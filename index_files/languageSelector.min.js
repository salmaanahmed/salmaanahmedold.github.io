define("languageSelector",["lodash","coreUtils","santa-components","componentsCore","prop-types","skins","coreMultilingual"],function(e,o,t,r,n,i,a){return function(e){var o={};function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var n in e)t.d(r,n,function(o){return e[o]}.bind(null,n));return r},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s=805)}({0:function(o,t){o.exports=e},1:function(e,t){e.exports=o},2:function(e,o){e.exports=t},242:function(e,o,t){var r;void 0===(r=function(){"use strict";return{HIDDEN:"hidden",PLACEHOLDER:"placeholder",VISIBLE:"visible"}}.apply(o,[]))||(e.exports=r)},3:function(e,o){e.exports=r},4:function(e,o){e.exports=n},48:function(e,o){e.exports=a},5:function(e,o){e.exports=i},805:function(e,o,t){var r,n;r=[t(2),t(0),t(3),t(5),t(806),t(242),t(807)],void 0===(n=function(e,o,t,r,n,i){"use strict";var a=6,s=46,l=14,p={displayName:"LanguageSelector",mixins:[t.mixins.skinBasedComp,t.mixins.createChildComponentMixin],propTypes:{compProp:e.santaTypesDefinitions.Component.compProp.isRequired,compTheme:e.santaTypesDefinitions.Component.theme.isRequired,isExperimentOpen:e.santaTypesDefinitions.isExperimentOpen,isEnabled:e.santaTypesDefinitions.RendererModel.multilingual.isEnabled,languages:e.santaTypesDefinitions.RendererModel.multilingual.languages,originalLanguage:e.santaTypesDefinitions.RendererModel.multilingual.originalLanguage,currentLanguage:e.santaTypesDefinitions.RendererModel.multilingual.currentLanguage,setCurrentLanguageCode:e.santaTypesDefinitions.RendererModel.multilingual.setCurrentLanguageCode,scriptsLocationMap:e.santaTypesDefinitions.ServiceTopology.scriptsLocationMap,isPreviewMode:e.santaTypesDefinitions.isPreviewMode.isRequired,pageId:e.santaTypesDefinitions.Component.currentUrlPageId.isRequired,reportBI:e.santaTypesDefinitions.reportBI.isRequired,getTranslatedAriaLabel:e.santaTypesDefinitions.Accessibility.getTranslatedAriaLabel.isRequired},componentDidUpdate:function(e,t){var r=this.state.keyboardNavigationIndex;o.isNull(r)||r===t.keyboardNavigationIndex||this.focusButton(r)},componentDidMount:function(){this.props.reportBI({evid:427},{language_rendered:this.props.currentLanguage.languageCode,page_id:this.props.pageId})},getMinContentHeight:function(){var e=this.props.compTheme.style.properties,t=e.itemFont,r=e.iconType,n=e.iconSize,i=function(e){return o.head(t.match(e)||[0])},a=parseInt(i(/\d+px/),10),s=parseFloat(i(/\d+\.?\d*em/)),l=Math.ceil(a*s),p="none"===r?0:o.parseInt(n,10);return Math.max(l,p)+20},getMinContentWidth:function(){var e=this.props.compTheme.style.properties,t=e.iconSize,r=e.iconType,n="iconOnly"!==this.props.compProp.itemFormat,i="none"!==r,p="circle"===r?1:13/8,d=o.parseInt(t,10)*p;return(i?d+a:0)+(n?l:0)+s},orderLanguages:function(e){var t=this.props.compProp.languagesOrder;0===t.length&&(t=[this.props.originalLanguage.languageCode]);var r=o.indexOf(t,e.languageCode);return-1===r?1/0:r},createButton:function(e,t){return this.createChildComponent({language:e},"wysiwyg.viewer.components.LanguageButton","languageButton",o.assign({iconType:this.props.compTheme.style.properties.iconType,iconSize:this.props.compTheme.style.properties.iconSize,linguistFlags:this.props.scriptsLocationMap["linguist-flags"],id:this.props.id+e.languageCode+"Button"},t))},getOrderedLanguages:function(){return o.sortBy(this.props.languages,this.orderLanguages)},getLanguageList:function(){var e=this.getOrderedLanguages(),t=this.props.currentLanguage,r=o.reject(e,this.props.currentLanguage);return[t].concat(function(e){if(Array.isArray(e)){for(var o=0,t=Array(e.length);o<e.length;o++)t[o]=e[o];return t}return Array.from(e)}(r))},getAriaSelectorLabel:function(){return this.props.getTranslatedAriaLabel("ariaLabels","LanguageSelector_AriaLabel_TopLevel","Language Selector - {{language}} selected").replace("{{language}}",this.props.currentLanguage.name)},focusButton:function(e){return this.refs.dropdownWrapper.querySelectorAll('[role="menuitem"]')[e].focus()},createDropdownButtons:function(e,t){var r=this,n=this.getLanguageList(),a=0;return t&&(n=n.reverse(),a=n.length-1),o.map(n,function(o,t){var n=t===r.state.keyboardNavigationIndex?"focus-ring":"",s=r.classSet({dropdownButton:!0,arrowButton:t===a});return r.createButton(o,{key:o.locale,tabIndex:t===a?null:-1,role:"menuitem",style:{height:e},arrowIconMode:t===a?i.VISIBLE:i.HIDDEN,className:n+" "+s,selected:t===a,iconType:r.props.compTheme.style.properties.iconType,onClick:function(){r.props.setCurrentLanguageCode(o.languageCode),r.closeDropdown()}})})},getInitialState:function(){return{isDropdownOpen:!1,isDropdownReverted:!1,keyboardNavigationIndex:null}},toggleDropDown:function(){this.state.isDropdownOpen?this.closeDropdown():this.openDropdown()},openDropdown:function(e){var o=this.getLanguageList(),t=this.shouldDropdownOpenInReverse(),r=t?0:1;this.setState({isDropdownOpen:!0,isDropdownReverted:t,keyboardNavigationIndex:e&&o.length>1?r:null})},closeDropdown:function(e){this.setState({isDropdownOpen:!1,keyboardNavigationIndex:null,isKeyboardFocused:e})},shouldDropdownOpenInReverse:function(){if(!window)return!1;var e=window.innerHeight,o=this.refs[""].getBoundingClientRect(),t=o.top+o.height,r=e-o.top,n=this.getOrderedLanguages().length,i=2*parseInt(this.props.compTheme.style.properties.borderWidth,10),a=(this.props.style.height-i)*n+i;return t>=a&&!(r>=a)},getHorizontalComponent:function(){var t=o.map(this.getOrderedLanguages(),function(e){return this.createButton(e,{key:e.locale,arrowIconMode:i.HIDDEN,selected:e.locale===this.props.currentLanguage.locale,onClick:this.props.setCurrentLanguageCode,iconType:this.props.compTheme.style.properties.iconType,isHorizontal:!0,tabIndex:e.locale===this.props.currentLanguage.locale?null:0,onKeyDown:this.handleHorizontalButtonKeyDown})}.bind(this));return{"":{children:e.utils.createReactElement("div",{className:this.classSet({"table-wrapper":!0}),children:e.utils.createReactElement("div",{className:this.classSet({horizontal:!0}),"aria-label":this.getAriaSelectorLabel(),role:"navigation",children:t})})}}},handleHorizontalButtonKeyDown:function(e,o){13===e.keyCode&&this.props.setCurrentLanguageCode(o)},getNextKeyboardNavigationIndex:function(e){var t=this.state,r=t.isDropdownReverted,n=t.keyboardNavigationIndex,i=this.getLanguageList().length-1,a=r?0:1,s=r?i-1:i,l=38===e?n-1:n+1;return o.clamp(l,a,s)},getDropdownButton:function(){return this.refs[""]},focusDropdownButton:function(){this.getDropdownButton().focus()},handleBlur:function(e){var t=this;e.target===this.getDropdownButton()&&this.setState({isKeyboardFocused:!1}),o.defer(function(){var e=t.state.isDropdownOpen,o=t.refs.dropdownWrapper,r=window.document.activeElement;e&&o&&!o.contains(r)&&t.closeDropdown()})},showDropdownIfClosedOtherwise:function(e){this.state.isDropdownOpen?e():this.openDropdown(!0)},getDropdownComponent:function(){var o=this,t=this.props.componentPreviewState||this.state.isDropdownOpen,r=2*parseInt(this.props.compTheme.style.properties.borderWidth,10),n=this.props.style.height-r,a=this.getMinContentHeight()+r,s=this.getMinContentWidth()+r,l=this.state.isDropdownReverted,p={minWidth:this.props.style.width,left:0,top:l?"auto":0,bottom:l?0:"auto"},d=this.state.isKeyboardFocused?"focus-ring":"",c=this.classSet({dropdown:!0,open:t,revert:l});return{"":{tabIndex:0,"aria-haspopup":!0,"aria-expanded":t,role:"listbox","aria-label":this.getAriaSelectorLabel(),className:d+" "+c,style:{minHeight:a,minWidth:s},onBlur:this.handleBlur,onKeyDown:function(e){switch(!0){case 13===e.keyCode:case 32===e.keyCode:o.showDropdownIfClosedOtherwise(function(){var e=o.getLanguageList();o.state.isDropdownReverted&&e.reverse();var t=o.state.keyboardNavigationIndex;o.props.setCurrentLanguageCode(e[t].languageCode),o.closeDropdown()}),e.preventDefault();break;case 38===e.keyCode:o.setState({keyboardNavigationIndex:o.getNextKeyboardNavigationIndex(e.keyCode)}),e.preventDefault();break;case 40===e.keyCode:o.showDropdownIfClosedOtherwise(function(){o.setState({keyboardNavigationIndex:o.getNextKeyboardNavigationIndex(e.keyCode)})}),e.preventDefault();break;case 27===e.keyCode:o.closeDropdown(!0),o.focusDropdownButton()}},children:[this.createButton(this.props.currentLanguage,{className:this.classSet({currentLanguage:!0,hidden:t}),arrowIconMode:i.VISIBLE,onClick:this.toggleDropDown,ref:"currentLanguage"}),e.utils.createReactElement("div",{key:"dropdownWrapper",role:"menu",className:this.classSet({dropdownWrapper:!0,hidden:!t}),children:this.createDropdownButtons(n,l),ref:"dropdownWrapper",style:p})]}}},getMobileComponent:function(){var o=this,t=this.props.compTheme.style.properties.iconType;return t="none"===t?"circle":t,{"":{className:this.classSet({mobileLanguageSelector:!0}),children:[this.createButton(this.props.currentLanguage,{isMobile:!0,className:this.classSet({currentLanguage:!0}),arrowIconMode:i.HIDDEN,iconType:t,onClick:function(){},ref:"currentLanguage"}),e.utils.createReactElement("select",{value:this.props.currentLanguage.languageCode,onChange:function(e){o.props.setCurrentLanguageCode(e.target.value)},children:this.getOrderedLanguages().map(function(o){return e.utils.createReactElement("option",{value:o.languageCode,children:o.name})})})]}}},getViewByCurrentMode:function(){return this.props.isMobileView?this.getMobileComponent():"dropdown"===this.props.compProp.displayMode?this.getDropdownComponent():this.getHorizontalComponent()},getSkinProperties:function(){var e=o.size(this.props.languages)>1,t=this.props.isPreviewMode||e;return this.props.isEnabled&&!o.isEmpty(this.props.currentLanguage)&&t?this.getViewByCurrentMode():{"":null}}};return t.compRegistrar.register("wysiwyg.viewer.components.LanguageSelector",p),r.skinsMap.addBatch(n),p}.apply(o,r))||(e.exports=n)},806:function(e,o,t){var r,n,i;"undefined"!=typeof self&&self,n=[],void 0===(i="function"==typeof(r=function(){"use strict";var e={"wysiwyg.viewer.skins.LanguageButtonSkin":{react:[["div","icon",[],{"aria-hidden":!0}],["div","label",[],{}],["div","spacer",[],{"aria-hidden":!0}],["div","arrow-icon",[],{"aria-hidden":!0},["svg",null,[],{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 9.2828 4.89817"},["defs",null,[],{}],["title",null,[],{}],["path",null,["_cls-1"],{d:"M4.64116,4.89817a.5001.5001,0,0,1-.34277-.13574L.15727.86448A.50018.50018,0,0,1,.84282.136L4.64116,3.71165,8.44.136a.50018.50018,0,0,1,.68555.72852L4.98393,4.76243A.5001.5001,0,0,1,4.64116,4.89817Z"}]]]],params:{itemFont:"FONT",itemTextColor:"TEXT_COLOR",backgroundColor:"BG_COLOR_ALPHA",itemTextColorHover:"TEXT_COLOR",backgroundColorHover:"BG_COLOR_ALPHA",itemTextColorActive:"TEXT_COLOR",backgroundColorActive:"BG_COLOR_ALPHA"},paramsDefaults:{itemFont:"font_0",itemTextColor:"color_1",backgroundColor:"color_4",itemTextColorHover:"color_1",backgroundColorHover:"color_4",itemTextColorActive:"color_1",backgroundColorActive:"color_4"},css:{"%":"display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;cursor:pointer;line-height:0;[itemFont]  color:[itemTextColor];background-color:[backgroundColor];","% path":"fill:[itemTextColor];",'%:hover,%[data-preview="hover"],%:focus':"color:[itemTextColorHover];background-color:[backgroundColorHover];position:relative;overflow:hidden;",'%:hover path,%[data-preview="hover"] path,%:focus path':"fill:[itemTextColorHover];",'%_selected:hover,%_selected[data-preview="hover"],%_selected:focus':"color:[itemTextColorActive];background-color:[backgroundColorActive];",'%_selected:hover path,%_selected[data-preview="hover"] path,%_selected:focus path':"fill:[itemTextColorActive];",'%:active,%[data-preview="active"],%_selected':"color:[itemTextColorActive];background-color:[backgroundColorActive];",'%:active path,%[data-preview="active"] path,%_selected path':"fill:[itemTextColorActive];","%_left":"-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;","%_left %spacer":"-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;","%_left %label%_has-text":"margin:0 0 0 14px;","%_left%_horizontal %label%_has-text":"margin:0 14px 0 14px;","%_left %icon%_has-icon":"margin:0 -6px 0 14px;","%_left %arrow-icon":"margin:0 14px 0 20px;","%_right":"-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;","%_right %spacer":"-webkit-box-ordinal-group:3;-webkit-order:2;order:2;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;","%_right %label%_has-text":"-webkit-box-ordinal-group:4;-webkit-order:3;order:3;margin:0 14px 0 0;","%_right%_horizontal %label%_has-text":"margin:0 14px 0 14px;","%_right %icon%_has-icon":"-webkit-box-ordinal-group:5;-webkit-order:4;order:4;margin:0 14px 0 -6px;","%_right %arrow-icon":"-webkit-box-ordinal-group:2;-webkit-order:1;order:1;margin:0 20px 0 14px;","%_center":"padding:0 40px;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;","%_center%_horizontal":"padding:0;","%_center%_horizontal %icon%_has-icon":"margin:0 4px 0 4px;","%_center%_horizontal %label%_has-text":"margin:0 4px 0 4px;","%_center %label%_has-text":"margin:0 4px;","%_center %icon%_has-icon":"margin:0 4px;","%_center %arrow-icon":"position:absolute;right:0;margin:0 14px 0 20px;","%_hidden %arrow-icon":"display:none;","%_hidden %spacer":"display:none;","%icon":"box-sizing:border-box;","%icon %_iconImg":"display:block;","%arrow-icon":"line-height:0;","%arrow-icon svg":"min-width:12px;width:12px;height:auto;"}},"wysiwyg.viewer.skins.LanguageSelectorSkin":{react:[["div","beakerFitContentTestDiv",[],{}]],exports:{languageButton:{skin:"wysiwyg.viewer.skins.LanguageButtonSkin"}},params:{borderColor:"BORDER_COLOR_ALPHA",borderWidth:"BORDER_SIZE",borderRadius:"BORDER_RADIUS",boxShadow:"BOX_SHADOW",separatorColor:"COLOR_ALPHA",backgroundColor:"BG_COLOR_ALPHA",borderRadiusValue:"SIZE"},paramsDefaults:{borderColor:"#202020",borderWidth:"1px",borderRadius:"5px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.5)",separatorColor:"#fefefe",backgroundColor:"color_4",borderRadiusValue:["borderRadius"]},css:{"%":"display:table;","%_table-wrapper":"display:table-cell;height:100%;","%_horizontal":"display:-webkit-box;display:-webkit-flex;display:flex;width:100%;height:100%;box-sizing:border-box;border-style:solid;border-color:[borderColor];border-width:[borderWidth];[borderRadius]  [boxShadow]","%_horizontal > *":"-webkit-box-flex:1;-webkit-flex:auto;flex:auto;-webkit-box-align:center;-webkit-align-items:center;align-items:center;","%_horizontal %languageButton + %languageButton":"border-left-width:1px;border-left-style:solid;border-left-color:[separatorColor];","%_horizontal %languageButton:first-child,%_horizontal %languageButton:last-child":"[borderRadius]","%_horizontal %languageButton:first-child":"border-top-right-radius:0;border-bottom-right-radius:0;","%_horizontal %languageButton:last-child":"border-top-left-radius:0;border-bottom-left-radius:0;","%_dropdown":"width:100%;position:relative;white-space:nowrap;display:block;","%_dropdown %_currentLanguage":"cursor:pointer;position:relative;height:100%;width:100%;box-sizing:border-box;border-style:solid;border-color:[borderColor];border-width:[borderWidth];[borderRadius]    [boxShadow]","%_dropdown %_dropdownWrapper":"z-index:99;position:absolute;[boxShadow]    box-sizing:border-box;background-color:[backgroundColor];border-style:solid;border-color:[borderColor];border-width:[borderWidth];[borderRadius]","%_dropdown %_dropdownWrapper %languageButton + %languageButton":"border-top-width:1px;border-top-style:solid;border-top-color:[separatorColor];","%_dropdown %_dropdownWrapper %languageButton:first-child,%_dropdown %_dropdownWrapper %languageButton:last-child":"border-radius:calc([borderRadiusValue] - [borderWidth]);","%_dropdown %_dropdownWrapper %languageButton:first-child":"border-bottom-left-radius:0;border-bottom-right-radius:0;","%_dropdown %_dropdownWrapper %languageButton:last-child":"border-top-left-radius:0;border-top-right-radius:0;","%_hidden":"display:none !important;","%_dropdownButton%_arrowButton %languageButtonarrow-icon":"-webkit-transform:scaleY(-1);transform:scaleY(-1);","%_currentLanguage %languageButtonlabel":"overflow:hidden;text-overflow:ellipsis;","%_open":"z-index:1002;","%_mobileLanguageSelector":"position:relative;z-index:auto;","%_mobileLanguageSelector %_currentLanguage":"cursor:pointer;position:relative;height:100%;width:100%;box-sizing:border-box;border-style:solid;border-color:[borderColor];border-width:[borderWidth];[borderRadius]    [boxShadow]","%_mobileLanguageSelector %languageButton":"padding:0;","%_mobileLanguageSelector %languageButtonicon":"margin:0 auto !important;","%_mobileLanguageSelector select":"opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;font-size:25px;"}}};return e})?r.apply(o,n):r)||(e.exports=i)},807:function(e,o,t){var r,n;function i(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}r=[t(2),t(1),t(4),t(48),t(242),t(3)],void 0===(n=function(e,o,t,r,n,a){"use strict";var s="shortName",l="fullName",p="iconOnly",d={displayName:"LanguageButton",mixins:[a.mixins.skinBasedComp],propTypes:{compData:e.santaTypesDefinitions.Component.compData.isRequired,compProp:e.santaTypesDefinitions.Component.compProp.isRequired,compTheme:e.santaTypesDefinitions.Component.theme.isRequired,linguistFlags:t.string,onClick:t.func,arrowIconMode:t.string.isRequired,isMobile:t.bool,iconType:t.string.isRequired,iconSize:t.string.isRequired,isHorizontal:t.bool},getTranslation:function(e){return o.translationsLoader.getTranslation("MULTILINGUAL","en",e)},getIconUrl:function(){return r.utils.getFlagIconUrl(this.props.linguistFlags,this.props.iconType,this.props.compData.language.countryCode)},createLabel:function(){var e=this.props.compData.language,o=this.props.compProp.itemFormat;return o===s?e.languageCode.toUpperCase():o===l?e.name:void 0},createIcon:function(){var o=[e.utils.createReactElement("img",{src:this.getIconUrl(),style:{height:this.props.iconSize+"px"},className:this.classSet({iconImg:!0})})];return{className:this.classSet({"has-icon":!0}),children:o}},onButtonClick:function(){this.props.onClick&&this.props.onClick(this.props.compData.language.languageCode)},onButtonKeyDown:function(e){this.props.onKeyDown&&this.props.onKeyDown(e,this.props.compData.language.languageCode)},getClassSet:function(){var e;return i(e={},this.props.compProp.alignTabs,!0),i(e,this.props.arrowIconMode,!0),i(e,"horizontal",this.props.isHorizontal),i(e,"selected",this.props.selected),e},getSkinProperties:function(){return{"":{className:this.classSet(this.getClassSet()),onClick:this.onButtonClick,onKeyDown:this.onButtonKeyDown,role:this.props.role,"aria-current":this.props.selected},label:this.props.isMobile?null:{className:this.classSet({"has-text":this.props.compProp.itemFormat!==p}),children:this.createLabel(),"aria-label":this.props.compData.language.name,tabIndex:this.props.tabIndex,role:"link"},icon:"none"===this.props.iconType?null:this.createIcon(),"arrow-icon":{hidden:this.props.arrowIconMode===n.HIDDEN}}}};return a.compRegistrar.register("wysiwyg.viewer.components.LanguageButton",d),d}.apply(o,r))||(e.exports=n)}})});
//# sourceMappingURL=languageSelector.min.js.map