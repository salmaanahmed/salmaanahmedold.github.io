var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(a=(o=r.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,s=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}define("pages/panel/pagesView/editorAPIConnectors/getActions",["lodash","util","core","tpa","coreBi","platform","experiment","wixData"],function(g,i,r,a,d,m,c,t){"use strict";var f=i.dataRouterPagesMenuItemPrefixUtils,P=i.addPageRouterActionUtils,s=["1380b703-ce81-ff05-f115-39571d94dfcd"],b="Pages_Actions_Page_Rename",y=["Pages_Actions_Page_Rename","page_rename"],I=function(e,t,n,a){e.bi.event(d.events.pages.pagesPanel.quick_actions_menu_select,{page_id:t,source:a,category:n})},h=function(e,t,n){e.bi.event(d.events.pages.pagesPanel.tab_clicked_an_item_at_settings_menu,{source:n,category:t})},_=function(n,a,i,s){return function(e){var t=g.defaults(s,{origin:"pagesPanel",publicUrl:n.dsRead.generalInfo.getPublicUrl(),pageRef:e?n.dsRead.pages.getReference(e):null});n.dsActions.platform.notifyApplication(a,{eventType:i,eventPayload:t})}},o=function(t,n,a){return{title:i.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(e){t({pageId:e,tabType:"page"}),I(n,e,"tabPageInfo",a)},isSettings:!0}},A=function(e){return e.developerMode.isEnabled()||t.isDataModeOn(e)};return{dynamicPage:function(o,n,r,p,a,e,l){if(!e)return null;var t=[];if(A(o)){var i=o.pages.dynamicPages.getDynamicPageActions(n,"pageActions");t=g.map(i,function(e){var a=e.title,t=e.icon,i=e.type,n=e.event,s=_(o,r,n,{routerRef:p});return{title:a,symbolName:i===b?"renameAction":t,onClick:function(e,t){if(i===b){o.pages.data.update(e,{title:t});var n=g.get(o.pages.data.get(e),"title");a!==n&&o.history.debouncedAdd("Rename Page")}else s(e);I(o,e,a,l||"router")},isRename:i===b}})}var s=o.pages.dynamicPages.getDynamicPageActions(n,"pageSettings",[m.constants.pages.page_settings.pageInfo.type,m.constants.pages.page_settings.seo.type]),u=g.map(s,function(t){return{title:t.title,symbolName:t.icon,onClick:function(e){a({pageId:n,tabType:t.type}),I(o,e,t.title,l||"router")},isSettings:!0}});return[].concat(_toConsumableArray(u),_toConsumableArray(t))},tpaPage:function(n,e,t){return t?[o(e,n,"tpa_pages"),{title:i.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(e,t){t!==g.get(n.pages.data.get(e),"title")&&(n.pages.data.update(e,{title:t}),n.history.debouncedAdd("Rename Page"),I(n,e,"rename","tpa_pages"))},isRename:!0},{title:i.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(e){n.pages.remove(e,function(){return n.history.add("removing a page",{currentPage:e})}),I(n,e,"delete","tpa_pages")}}]:null},tpaSubPage:function(e,t,n){return n?[o(t,e,"tpa_pages")]:null},popup:function(s,e,o,n){return e?[{title:i.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(e){var t=s.pages.popupPages.getPopupContainer();s.selection.selectComponentByCompRef(t),s.openComponentPanel("settingsPanel",{initiatorName:"quickActions"}),I(s,e,"open_popup_settings_panel","lightbox")},isSettings:!0},{title:i.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(e,t){t!==g.get(s.pages.data.get(e),"title")&&(s.pages.data.update(e,{title:t}),s.history.debouncedAdd("Rename Page"),I(s,e,"rename","lightbox")),n()},isRename:!0},{title:i.translate("Pages_Actions_Page_Duplicate"),symbolName:"duplicateAction",isDisabled:s.dsRead.language.isCurrentLanguageSecondary(),onClick:function(e){var t=s.pages.popupPages.duplicate(e),n=s.pages.serialize(e),a=r.utils.pageTitleUtils.generateDuplicatedTitle(n.data.title),i=s.dsRead.generalInfo.urlFormat.isSlash()?s.pages.data.pageUriSEO.convertPageNameToUrl:r.utils.pageTitleUtils.convertPageNameToUrl;s.pages.data.update(t.id,{title:a,pageUriSEO:i(a)},!0),c.isOpen("se_multilingual")&&s.dsRead.language.multilingual.isEnabled()&&s.dsActions.waitForChangesApplied(function(){s.dsActions.language.patchDataItemTranslations("masterPage",t.id,function(e){return g.assign({},e,{title:r.utils.pageTitleUtils.generateDuplicatedTitle(e.title)})})}),s.pages.navigateTo(t.id),s.history.add("popup page was duplicated",{currentPage:e}),o(t.id),I(s,e,"duplicate","lightbox")}},{title:i.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(e,t){s.dsActions.waitForChangesApplied(function(){s.pages.remove(e,g.partial(s.history.add,"removed popup"))}),s.bi.event(d.events.topbar.pages.page_or_pop_up_deleted,{page_or_popup:"pop up",page_popup_string_id:e,page_popup_name:t}),I(s,e,"delete","lightbox")}}]:null},tpaTab:function(e,t,n){if(!g.includes(s,t)||!n)return null;return[{title:i.translate("NewPages_Panel_StorePages_Panel_Manage"),symbolName:"settingsAction",onClick:function(){a.superApps.openDashboardUrl(a.superApps.superAppsConstants.ECOM_APP_DEF_ID),h(e,"manage","tpa_pages")}}]},menuTab:function(t,e,n){if(!n||!e)return null;var a=t.pages.dynamicPages.getActionByAppDefId(e,"routerActions"),i=g.get(t.dsRead.platform.getAppDataByAppDefId(e),"applicationId");return g.map(a,function(e){return{title:e.title,symbolName:e.icon,onClick:e.callback||_(t,i,e.event)}})},router:function(r,e,p,t,l,n,a){var i="Data"===a;if(!e||!A(r)&&!n||!i&&!r.developerMode.isEnabled()&&!n)return null;if(c.isOpen("se_groupDataRouterPagesByNamespaceOrCollection")&&f.isValidPrefix(t)){var s=P.getAddDataRouterPageAction(r);return g.isUndefined(s)?[]:[{title:s.title,symbolName:s.icon,type:s.type,event:s.event,onClick:function(){r.bi.event(d.events.pages.pagesPanel.tab_clicked_an_item_at_settings_menu,{source:"router",category:s.title});var e=r.dsRead.platform.getAppDataByAppDefId(r.dsRead.platform.editorApps.DATA_BINDING.appDefId).applicationId;r.dsActions.platform.notifyApplication(e,{eventType:s.event,eventPayload:g.assign({},f.getAddPageEventPayloadByPrefix(t),{origin:"pagesPanel"})})}}]}var u=r.dsRead.routers.getRouterRef.byPrefix(t),o=r.pages.dynamicPages.getRouterActionByPrefix(t);return g.map(o,function(e){var t=e.title,n=e.icon,a=e.event,i=e.type,s=e.callback,o=_(r,p,a,{routerRef:u});return{title:t,symbolName:n,type:i,event:a,onClick:function(e){s?s(e):o(e),h(r,t,l||"router")}}})},application:function(r,e,t,p){if(!t||!e)return null;var l=g.get(r.dsRead.platform.getAppDataByAppDefId(e),"applicationId"),n=r.pages.appPages.getApplicationActions(e);return g.map(n,function(e){var t=e.title,n=e.icon,a=e.event,i=e.callback,s=e.type,o=_(r,l,a);return{title:t,type:s,event:a,symbolName:n,onClick:function(e){i?i(e):o(e),h(r,t,p)}}})},applicationPage:function(r,n,e,t,p,a,l){if(!t)return null;var u=g.get(r.dsRead.platform.getAppDataByAppDefId(e),"applicationId"),i=r.pages.getReference(n),s=r.pages.appPages.getPageActions(e,i),o=g.map(s,function(e){var i=e.title,t=e.icon,s=e.type,n=e.event,o=_(r,u,n),a=g.includes(y,s);return{title:i,symbolName:a?"renameAction":t,onClick:function(e,t){var n=r.dsRead.data.getById(e);if("BasicMenuItem"===n.type&&(e=n.link.pageId.replace("#","")),s===b){r.pages.data.update(e,{title:t}),l();var a=g.get(r.pages.data.get(e),"title");i!==a&&r.history.debouncedAdd("Rename Page")}else o(e);I(r,e,i,p||"router")},isRename:s===b,isRemove:"page_remove"===s}}),d=r.pages.appPages.getPageSettings(e,[m.constants.pages.page_settings.pageInfo.type,m.constants.pages.page_settings.seo.type],i),c=g.map(d,function(t){return{title:t.title,symbolName:t.icon,onClick:function(e){a({pageId:n,tabType:t.type}),I(r,e,t.title,p)},isSettings:!0}});return[].concat(_toConsumableArray(c),_toConsumableArray(o))},getOnClickApplicationNotification:_,signup:function(n,t,e){return[{title:i.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(e){t({pageId:e,tabType:"page",isCustomSignup:!0}),I(n,e,"tabPageInfo","custom_signup")},isSettings:!0}].concat(e?[{title:i.translate("Pages_Actions_Page_Edit"),symbolName:"editAction",onClick:function(e){n.panelManager.closeAllPanels(),n.pages.navigateTo(e,function(){var e=n.pages.popupPages.getCurrentPopup(),t=g.find(n.components.getChildren(e,!0),function(e){return"wysiwyg.viewer.components.FormContainer"===n.components.getType(e)});n.selection.selectComponentByCompRef(t)}),I(n,e,"edit","custom_signup")},isSettings:!0},{title:i.translate("Pages_Actions_Page_Delete_Custom_Signup"),symbolName:"deleteAction",onClick:function(e,t){n.dsActions.waitForChangesApplied(function(){n.pages.remove(e,function(){n.siteMembers.setCustomSignupPageId(null),n.history.add("removed custom signup page")},g.noop,!0)}),n.bi.event(d.events.topbar.pages.page_or_pop_up_deleted,{page_or_popup:"pop up",page_popup_string_id:e,page_popup_name:t}),I(n,e,"delete","custom_signup")}}]:[])}}}),define("pages/utils/pageCategories",["lodash","util"],function(t,e){"use strict";var n=e.translate;return{MAIN_MENU:{id:"CUSTOM_MAIN_MENU",title:n("NewPages_Panel_Left_SiteMenu_Label"),flatMenuTitle:n("NewPages_QuickNav_Site_Pages_Label"),helpId:"8278a5f6-119c-412e-8b01-4bd0955cb307",mobileHelpId:"1aeed4d9-19a1-44b7-beec-7bc38a9d4d99",group:"menus"},MEMBERS_MENU:{id:"MEMBERS_SUB_MENU",title:n("NewPages_Panel_Left_MembersMenu_Label"),helpId:"ab4d4af2-0a5a-4ad9-93fe-dbf42f22d2ca",mobileHelpId:"8fa70d57-3d09-4f0b-a966-7ef2475e3f1b",group:"menus"},MENUS:{id:"MENUS",group:"menus",helpId:"8278a5f6-119c-412e-8b01-4bd0955cb307",biCategory:"custom menu",getBiCategory:function(e){return t.includes(["CUSTOM_MAIN_MENU","MEMBERS_SUB_MENU"],e)?e:"CUSTOM_MENU"},titleAdd:n("NewPages_Panel_AddPage_Button")},SPECIAL_PAGES:{group:"special_pages",getBiCategory:function(e,t){if(e===t)return"members"}},APPLICATION_PAGES:{group:"application_pages"},MEMBERS_PAGES:{helpId:"7710f007-cbdb-4b77-bb8b-fd4d65424ab1"},TPA_PAGES:{id:"TPA_PAGES",group:"tpa_pages",titleAdd:n("NewPages_Panel_AddPage_Button"),getBiCategory:function(e){return"tpa_"+e}},DYNAMIC_PAGES_INTRO:{id:"DYNAMIC_PAGES_INTRO",helpId:"4d88ab53-0157-47aa-9c19-0d5762fcb82b",title:"NewPages_Panel_Left_DynamicPage_Label",group:"dynamic_pages",biCategory:"dynamic_page_intro"},DYNAMIC_PAGES:{id:"DYNAMIC_PAGES",helpId:"1e76f0cc-531a-45b3-bfe0-8907cf391fca",mobileHelpId:"4eda8656-f16f-4ddd-9c80-4b80eef09686",group:"dynamic_pages",biCategory:"router"},ROUTER_PAGES:{id:"ROUTER_PAGES",helpId:"aa6cebfb-a948-4767-bb0e-a60cb8fa9146",mobileHelpId:"4b873e86-b218-4589-b84b-8070c775f3c4",group:"dynamic_pages",biCategory:"router"},SIGNUP:{id:"SIGNUP",title:"NewPages_Panel_Signup_Title",biCategory:"signup",helpId:"e8c26342-9c6b-4f7d-ae71-8e105009724b"},POPUPS:{id:"POPUPS",title:"POPUPS_SiteStructure_Panel_Popups",helpId:"24659a21-11c8-41e1-9752-5822677154a0",mobileHelpId:"05438eeb-262a-49e0-a59b-dfda242c5609",group:"popups",biCategory:"lightbox",titleAdd:n("POPUPS_SiteStructure_Panel_Button_Add")},TRANSITIONS:{id:"TRANSITIONS",title:"NewPages_Panel_Transitions_Title",group:"transitions",biCategory:"transitions"}}}),define("pages/panel/menuView/utils/menuDataGetterUtil",["pages/utils/pageCategories"],function(s){"use strict";var o="CUSTOM_MAIN_MENU";return{getMenuTabNameIfApplicable:function(e,t,n,a,i){return t===o?i?s.MAIN_MENU.flatMenuTitle:s.MAIN_MENU.title:n===e?s.MEMBERS_MENU.title:a},getHelpIdForMenu:function(e,t,n,a){return e===o?a?s.MAIN_MENU.helpId:s.MAIN_MENU.mobileHelpId:t===n?a?s.MEMBERS_MENU.helpId:s.MEMBERS_MENU.mobileHelpId:s.MENUS.helpId}}}),define("pages/panel/getPages",["lodash","util","core","pages/utils/pageCategories","experiment","pages/panel/menuView/utils/menuDataGetterUtil"],function(g,l,a,m,u,r){"use strict";var d=a.utils.tpaTypeUtils,c="1380b703-ce81-ff05-f115-39571d94dfcd",f=[c],P=function(e){return g.get(e,"pageSecurity.requireLogin")?"membersPagePermission":g.get(e,"pageSecurity.dialogLanguage")?"passwordPagePermission":null};return{dynamicPages:function(e,t){return g.map(t,function(e){var t=e.id,n=e.label,a=e.pageData;return{id:t,title:n,permissionSymbol:P(a)}})},popups:function(e){return g.map(e.pages.popupPages.getDataListOrdered(),function(e){return{id:e.id,title:e.title,managingAppDefId:e.managingAppDefId,biCategory:m.POPUPS.biCategory}})},tpas:function(o,e){if(u.isOpen("pagesPanelPlatformStoresTab"))return[];var t=g.filter(e,function(e){return 0<e.tpaApplicationId}),r=g.groupBy(t,"tpaApplicationId"),p=function(e,t,n){return g(e).reject(function(e){return d.isPageNotVisibleInPagesMenu(o.dsRead,e)}).filter(function(e){return d.isTPASpecialPage(o.dsRead,e,!0)}).map(function(e){return{id:e.id,title:e.title,isSubPage:!0,permissionSymbol:P(e),biCategory:t,info:function(e,t){var n=a.utils.wixStoreTypeUtils;if(t===c){if(n.isWixStoreProductPage(e))return l.translate("Pages_Store_Product_Info_WhatisText");if(n.isWixStoreCartPage(e))return l.translate("Pages_Store_Cart_Info_WhatisText");if(n.isWixStoreThankYouPage(e))return l.translate("Pages_Store_Thankyou_Info_WhatisText")}}(e,n)}}).value()};return g(r).thru(Object.keys).map(function(e){var t=o.dsRead.tpa.app.getData(e),n=t.appDefinitionId,a=t.appDefinitionName,i=t.helpId,s=m.TPA_PAGES.getBiCategory(n);return g.includes(f,n)?{pagesData:p(r[e],s,n),id:n,typeSymbol:"storesPageType",title:l.translate("NewPages_Panel_Left_StorePages_Label"),helpId:"59a4a620-30b2-4c93-a27a-c9290141738c",mobileHelpId:"2d2d9e55-a955-4f45-97c4-76fc2436f297",biCategory:s}:u.isOpen("pagesAllTpas")?{pagesData:p(r[e],s,n),id:n,title:a,helpId:i,biCategory:s}:null}).compact().value()},routers:function(c){return g(c.pages.dynamicPages.getMenuItems()).reject(function(e){var t=e.items;return g.isEmpty(t)}).map(function(e){var t=e.id,n=e.label,a=e.items,i=e.prefix,s=e.routerType,o=c.dsRead.pages.getReference(a[0].id),r=c.dsRead.routers.getRouterRef.byPage(o),p=c.dsRead.routers.get.byRef(r).appDefinitionId,l=c.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId,u=p===l,d=u?m.SPECIAL_PAGES.getBiCategory(p,l):m.DYNAMIC_PAGES.biCategory;return{id:t,title:n,pagesData:a,prefix:i,applicationId:g.get(c.dsRead.platform.getAppDataByAppDefId(p),"applicationId"),isSpecial:u,biCategory:d,routerType:s}}).compact().value()},pagesManagedByApps:function(i,e,s){var t,n=g.reject(e,function(e){return d.isPageNotVisibleInPagesMenu(i.dsRead,e)}),a=g.map(i.dsRead.platform.getInstalledEditorApps(),"appDefinitionId"),o=g.groupBy(n,"managingAppDefId"),r=(t=a,g.filter(t,function(e){switch(e){case"14bcded7-0066-7c35-14d7-466cb3f09103":return u.isOpen("pagesPanelBlogTab");case"140603ad-af8d-84a5-2c80-a0f60cb47351":return u.isOpen("pagesPanelEventsTab");case c:return u.isOpen("pagesPanelPlatformStoresTab");default:return!0}}));return g(r).map(function(e){var t=o[e]||[],n=i.pages.appPages.getApplicationSettings(e),a=i.dsRead.platform.getAppDataByAppDefId(e);return 0<t.length?{id:e,title:g.get(n,"displayName")||g.get(a,"appDefinitionName"),pagesData:function(a,e){var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return g(e).map(function(e){var t=a.pages.getReference(e.id),n=g.defaults(a.pages.appPages.getPageDescriptor(e.managingAppDefId,t),{orderIndex:0});return{id:e.id,title:e.title,permissionSymbol:P(e),pageDescriptor:i?n:g.pick(n,"orderIndex")}}).sortBy(function(e){return-e.pageDescriptor.orderIndex}).value()}(i,t,s),biCategory:e,helpId:g.get(n,"helpId")}:n&&n.emptyState?{id:e,title:g.get(n,"displayName"),emptyStateUrl:g.get(n.emptyState,"url"),biCategory:e,helpId:g.get(n.emptyState,"helpId")||n.helpId}:null}).compact().value()},menus:function(a,i,s){var o=a.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId,e=a.dsRead.menu.getAll();return g(e).filter(["id","CUSTOM_MAIN_MENU"]).map(function(e){var t=a.dsRead.platform.getAppDataByApplicationId(e.appId).appDefinitionId,n=a.menus.getExtendedMenuItemsTree(e,i);return{id:e.id,appDefId:t,menuItems:n.items,multiPageMenu:n.multiplePagesInMenu,title:r.getMenuTabNameIfApplicable(o,e.id,t,e.name,s)}}).value()}}}),define("pages/panel/pagesView/page/page.rt",["react","lodash","util","baseUILib","santa-editor-symbols"],function(i,n,t,s,o){"use strict";return function(){return i.createElement("div",{className:"page-pp "+n({selected:this.props.isSelected}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},null===this.state.inputValue?i.createElement("div",{className:"title-container",key:"title-container-page-pp",onClick:function(){this.props.onClick(this.props.id)}.bind(this),onDoubleClick:this.onDoubleClick},i.createElement("div",{className:"left-container"},i.createElement(s.Tooltip,{disabled:!this.props.info,content:this.props.info,shouldTranslate:!1,arrowAlignment:"top",key:"tooltip-type-symbol-pp"},this.props.typeSymbol?i.createElement(o.symbol,{name:this.props.typeSymbol,className:"page-entry-symbol",key:"typeSymbol-pp"}):null),i.createElement(s.TooltipOnEllipsis,{marginTop:5,contentClassName:"title"},this.props.title)),i.createElement("div",{className:"right-container"},this.props.permissionSymbol?i.createElement(o.symbol,{name:this.props.permissionSymbol,key:"permissionSymbol-pp"}):null,this.props.actions&&1<this.props.actions.length?function(){var e=this.getActions(),t=this.getSettingsActions();return i.createElement.apply(this,[s.ContextMenu,{className:"context-menu flat page-actions",key:"page-context-menu",automationId:"page-context-menu",onToggle:this.handleContextMenuToggle},n.map(t,function(e,t,n,a){return i.createElement(s.ContextMenuAction,{onClick:function(e,t,n,a){this.handleClickAction(n)}.bind(this,e,t,n,a),key:"action-"+n.title,automationId:"action-"+n.title,className:"page-settings-action-pp"},i.createElement(o.symbol,{name:n.symbolName}),i.createElement("span",{},n.title))}.bind(this,e,t)),n.isEmpty(e)||n.isEmpty(t)?null:i.createElement(s.Divider,{key:"divider"}),n.map(e,function(e,t,n,a){return i.createElement(s.ContextMenuAction,{onClick:function(e,t,n,a){this.handleClickAction(n)}.bind(this,e,t,n,a),key:"action-"+n.title,automationId:"action-"+n.title},i.createElement(o.symbol,{name:n.symbolName}),i.createElement("span",{},n.title))}.bind(this,e,t))])}.apply(this,[]):null,this.props.actions&&1===this.props.actions.length?function(){var e=this.props.actions[0];return i.createElement(s.Button,{className:"single-action page-actions",onClick:function(e){this.handleClickAction(e)}.bind(this,e),key:"page-single-action"},i.createElement(o.symbol,{name:e.symbolName}))}.apply(this,[]):null)):null,null!==this.state.inputValue?function(){var e=t.validate.pageNameValidator(this.state.inputValue);return i.createElement("div",{className:"input-button-container",key:"input-container-page-pp"},i.createElement(s.TextInput,{value:this.state.inputValue,onChange:this.handleChangeInput,isValid:!e,invalidMessage:t.translate(e),shouldTranslate:!1,selectOnFocus:!0,maxLength:40,onBlur:this.handleBlurInput,autoSelect:!0}),i.createElement(s.Button,{className:"done-button",disabled:e},"\n            ",t.translate("Pages_Actions_Rename_Button"),"\n        "))}.apply(this,[]):null)}}),define("pages/panel/pagesView/page/page",["react","prop-types","lodash","util","coreBi","pages/panel/pagesView/page/page.rt"],function(t,e,a,i,s,o){"use strict";var n=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={inputValue:e.mountInRenameMode?e.title:null},t.handleClickAction=function(e){e.isRename?t.openRenameMode():e.onClick(t.props.id,t.props.title)},t.handleContextMenuToggle=function(e){e&&t.props.biEvent(s.events.pages.pagesPanel.page_actions_click,{page_id:t.props.id,source:t.props.biCategory})},t.openRenameMode=function(){return t.setState({inputValue:t.props.title})},t.onDoubleClick=function(){a.filter(t.props.actions,"isRename")[0]&&t.props.renameEnabled&&t.openRenameMode()},t.handleChangeInput=function(e){return t.setState({inputValue:e})},t.handleBlurInput=function(){var e=!i.validate.pageNameValidator(t.state.inputValue)?t.state.inputValue:t.props.title;a.filter(t.props.actions,"isRename")[0].onClick(t.props.id,e),t.setState({inputValue:null})},t.getSettingsActions=function(){return a.filter(t.props.actions,"isSettings")},t.getActions=function(){return a.reject(t.props.actions,"isSettings")},t}return _inherits(n,t.Component),_createClass(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.inputValue===this.props.title,n=e.title!==this.props.title,a=null!==this.state.inputValue;(t&&n||e.mountInRenameMode!==this.props.mountInRenameMode&&!a)&&this.setState({inputValue:e.title})}},{key:"render",value:function(){return o.call(this)}}]),n}();return n.displayName="Page",n.propTypes={id:e.string.isRequired,title:e.string.isRequired,onClick:e.func.isRequired,actions:e.arrayOf(e.shape({title:e.string.isRequired,onClick:e.func.isRequired,symbolName:e.string.isRequired,isRename:e.bool})),isSelected:e.bool,info:e.string,mountInRenameMode:e.bool,renameEnabled:e.bool.isRequired,typeSymbol:e.string,permissionSymbol:e.string,biEvent:e.func.isRequired,biCategory:e.string.isRequired},n}),define("pages/panel/pagesView/pagesView.rt",["react","lodash","util","baseUILib","santa-editor-symbols","pages/panel/pagesView/page/page","platformPanels"],function(a,t,e,n,i,s,o){"use strict";return function(){return function(){var e=this.props.onClickAdd&&!this.props.emptyStateUrl;return a.createElement("div",{className:"pages-view-pp"},a.createElement(n.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelp,className:"header light"},a.createElement("span",{className:"title-pages-view-pp"},this.props.title)),a.createElement("div",{className:t({"pages-container-outer":!0,"with-footer":e}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},a.createElement(n.CustomScroll,{},0<this.props.pages.length?a.createElement.apply(this,["ul",{className:"pages-container-inner",key:"pages-container"},t.map(this.props.pages,function(e,t,n){return a.createElement("li",{className:"page-container",key:"li-"+t.id},a.createElement(s,{id:t.id,title:t.title,info:t.info,typeSymbol:t.typeSymbol,permissionSymbol:t.permissionSymbol,mountInRenameMode:this.props.renamedItemId===t.id,actions:t.actions,biEvent:this.props.biEvent,biCategory:this.props.biCategory,renameEnabled:this.props.renameEnabled,isSelected:this.props.selectedPageId===t.id,onClick:this.handleClickItem}))}.bind(this,e))]):null,this.props.emptyStateUrl?a.createElement(o.PlatformPanelApplicationFrame,{token:this.generatePanelToken(),key:"emptyStatePanel",url:this.props.emptyStateUrl,initialData:this.props.initialData,panelClass:"appEmptyState"}):null)),e?a.createElement("footer",{className:"add-container",key:"add-container"},a.createElement(n.Button,{className:"add-button",onClick:this.props.onClickAdd},a.createElement(i.symbol,{name:"addPage"}),a.createElement("span",{},this.props.titleAdd))):null)}.apply(this,[])}}),define("pages/panel/pagesView/pagesView",["lodash","react","prop-types","platform","pages/panel/pagesView/pagesView.rt"],function(e,t,n,a,i){"use strict";var s=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleClickItem=function(e){t.props.navigateTo(e)},t}return _inherits(n,t.Component),_createClass(n,[{key:"generatePanelToken",value:function(){return a.tokenService.generatePanelToken(this.props.appDefinitionId)}},{key:"render",value:function(){return i.call(this)}}]),n}();return s.displayName="PagesView",s.propTypes={title:n.string.isRequired,onClose:n.func.isRequired,onHelp:n.func.isRequired,navigateTo:n.func.isRequired,pages:n.arrayOf(n.shape({id:n.string.isRequired,title:n.string.isRequired,info:n.string,actions:n.arrayOf(n.shape({title:n.string.isRequired,onClick:n.func.isRequired,symbolName:n.string.isRequired,isRename:n.bool})),typeSymbol:n.string,permissionSymbol:n.string})).isRequired,selectedPageId:n.string,titleAdd:n.string,onClickAdd:n.func,onShowSettings:n.func,renamedItemId:n.string,renameEnabled:n.bool.isRequired,biEvent:n.func.isRequired,biCategory:n.string.isRequired},s}),define("pages/panel/pagesView/editorAPIConnectors/signupView",["lodash","util","coreBi","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/pagesView/pagesView"],function(c,l,g,m,u,e){"use strict";var f=function(e,t){var n,a,i,s,o=e.editorAPI,r=e.dsRead.siteMembers.getCustomSignupPageId(),p=u.signup(o,t,r);return[{id:r||"defaultSignup",typeSymbol:"regularPageType",title:(n=o,a=n.pages.popupPages.getDataList(),i=c.get(c.find(a,["managingAppDefId","5f4fa4f1-5afd-4ac0-8a85-e5ac1d2b9b7d"]),"id"),s=n.dsRead.siteMembers.getCustomSignupPageId(),s?i===s?l.translate("NewPages_Member_Signup_Custom_Title"):l.translate("NewPages_Member_Signup_Developer_Title"):l.translate("NewPages_Member_Signup_Default_Title")),actions:p}]},t=l.hoc,n=t.connect,a=t.renderWhenMutated;return n(t.STORES.EDITOR_API,function(e,t){var n,a,i,s,o,r=e.editorAPI,p=e.dsRead,l=t.biPanelName,u=t.onShowSettings,d=t.onHelp;return{pages:f({editorAPI:r,dsRead:p},u),navigateTo:(n={editorAPI:r,dsRead:p},a=l,i=u,s=n.editorAPI,o=n.dsRead,function(){var e=o.siteMembers.getCustomSignupPageId();e&&e!==o.pages.getFocusedPageId()?(s.pages.navigateTo(e,function(){s.selection.selectComponentByCompRef(s.pages.popupPages.getPopupContainer(e))}),s.bi.event(g.events.pages.navigate_to_page,{page_id:e,panel_name:a,category:m.SIGNUP.biCategory})):e||i({pageId:e,tabType:"page",isCustomSignup:!0})}),biEvent:r.bi.event,biCategory:m.SIGNUP.biCategory,renameEnabled:!1,onHelp:c.partial(d,m.SIGNUP.helpId)}})(a(e))}),define("pages/panel/pagesView/editorAPIConnectors/popupView",["lodash","util","stateManagement","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","coreBi","pages/panel/pagesView/pagesView"],function(c,g,i,d,m,f,e){"use strict";var t=g.hoc,n=t.connect,a=t.renderWhenMutated,s=t.STORES.EDITOR_API,P=function(e,t){var n=function(e,t){return c.template(g.translate(e))(t)},a=t.length,i=n("Pages_Menu_Popup_Tooltip_Start_Section",{$PAGE_NAME:c.truncate(c.head(t))}),s=n("Pages_Menu_Popup_Tooltip_End_Section",{$PAGE_NAME:c.truncate(c.last(t))}),o=void 0;if(1===a)o=i;else if(2===a)o=i+" "+s;else{o=c.reduce(c.slice(t,1,-1),function(e,t){return e+" "+n("Pages_Menu_Popup_Tooltip_Middle_Section",{$PAGE_NAME:c.truncate(t)})},i)+" "+s}return o},o=function(e,t,n,a){var s,i,o,r,p,l,u,d=c.map(t,function(e){return{id:e.id,title:e.title,typeSymbol:"popupPageType"}});return a?(i=d,o=n,r=(s=e).pages.popupPages.getOpenBehaviorsForPopups(),p=c.zipObject(c.map(o,"id"),c.map(o,"title")),l=c.groupBy(r,"popupId"),u=s.dsRead.siteSegments.getSiteStructureId(),c.map(i,function(e){var t=l[e.id],n=!!t&&t[0].pageId===u,a=c.map(t,"pageId");if(n)return e.info=g.translate("Pages_Menu_Popup_Tooltip_Set_To_All"),e;var i=c.map(a,c.partial(c.get,p));return 0<i.length&&(e.info=P(s,i)),e})):d},b=function(e,t,n){var a=n.editorAPI;a.store.dispatch(i.editorPlugins.userPreferences.actions.setSessionUserPreferences("addPanelCategoryIdOnClose","popup")),a.store.dispatch(i.editorPlugins.leftBar.actions.openAddPanel()),a.bi.event(f.events.pages.pagesPanel.add_page_selection_click,{category:"popup",source:"lightbox"})};return n(s,function(e,t){var n=e.editorAPI,a=t.popups,i=t.pagesData,s=t.isDesktop;return{pages:o(n,a,i,s),renameEnabled:s,titleAdd:d.POPUPS.titleAdd,biCategory:d.POPUPS.biCategory}},function(t,e){var i,s,o,n=e.onHelp,a=e.biPanelName,r=e.isDesktop,p=e.onItemAdded,l=e.onRename,u=t((i=r,s=p,o=l,function(e,t,n){var a=n.editorAPI;return m.popup(a,i,s,o)}));return{onClickAdd:r?function(){return t(b)}:null,navigateTo:function(e){return t((i=e,s=a,function(e,t,n){var a=n.editorAPI;a.dsRead.pages.getFocusedPageId()!==i&&(a.pages.navigateTo(i,function(){a.selection.selectComponentByCompRef(a.pages.popupPages.getPopupContainer(i))}),a.bi.event(f.events.pages.navigate_to_page,{page_id:i,panel_name:s,category:d.POPUPS.biCategory}))}));var i,s},onHelp:r?c.partial(n,d.POPUPS.helpId):c.partial(n,d.POPUPS.mobileHelpId),biEvent:function(){t(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.bi).event.apply(a,i)}}.apply(void 0,arguments))},popupsActions:c.reject(u,"isDisabled")}},function(e,t,n){var a=c.assign({},e,{pages:c.map(e.pages,function(e){return c.assign({},e,{actions:t.popupsActions})})}),i=c.omit(t,["popupsActions"]);return c.assign({},n,a,i)})(a(e))}),define("pages/panel/pagesView/editorAPIConnectors/dynamicPagesView",["experiment","lodash","util","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/getPages","coreBi","pages/panel/pagesView/pagesView","wixData"],function(d,S,e,C,T,E,R,t,c){"use strict";var n=e.hoc,a=n.connect,i=n.renderWhenMutated,s=n.STORES.EDITOR_API,g=e.dataRouterPagesMenuItemPrefixUtils,m=e.addPageRouterActionUtils,M={},f={},k=function(t,e,n,a,i,s,o,r){var p=!t.developerMode.isEnabled()&&!c.isDataModeOn(t);if(!a||p&&f[e])return{title:null,onClick:null};var l=m.findAddPageAction(i);if(!l)return{title:null,onClick:null};var u=T.getOnClickApplicationNotification(t,n,l.event,{prefix:s,routerRef:o});return{title:l.title,onClick:function(e){t.bi.event(R.events.pages.pagesPanel.add_page_selection_click,{category:"dynamic page",source:r||"router"}),d.isOpen("se_groupDataRouterPagesByNamespaceOrCollection")&&g.isValidPrefix(s)?t.dsActions.platform.notifyApplication(n,{eventType:l.event,eventPayload:S.assign({},g.getAddPageEventPayloadByPrefix(s),{origin:"pagesPanel"})}):u(e)}}},D=S.once(function(e){M[e.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId]="membersAction",M[e.dsRead.platform.editorApps.DYNAMIC_PAGES.appDefId]="routerPageType",M[e.dsRead.platform.editorApps.DATA_BINDING.appDefId]="dynamicPageType"}),N=S.once(function(e){f[e.dsRead.platform.editorApps.DYNAMIC_PAGES.appDefId]=!0,f[e.dsRead.platform.editorApps.DATA_BINDING.appDefId]=!0});return a(s,function(e,t){var n=e.editorAPI,a=t.router,i=a.title,s=a.pagesData,o=a.prefix,r=a.biCategory,p=a.actions,l=t.onShowSettings,u=t.isDesktop;D(n),N(n);var d,c,g,m,f,P,b,y,I=n.dsRead.pages.getReference(s[0].id),h=n.dsRead.routers.getRouterRef.byPage(I),_=n.dsRead.routers.get.byRef(h).appDefinitionId,A=S.get(n.dsRead.platform.getAppDataByAppDefId(_),"applicationId"),v=k(n,_,A,u,p,o,h,r);return{title:i,pages:(d=n,c=s,g=A,m=h,f=l,P=u,b=_,y=E.dynamicPages(d,c,g,m,f,P),S.map(y,function(e){return{id:e.id,title:e.title,permissionSymbol:e.permissionSymbol,typeSymbol:M[b]}})),renameEnabled:u,titleAdd:v.title,biCategory:r||C.ROUTER_PAGES.biCategory}},function(e,t){var p,l,u,d,c,a,g,m,f,i,r,P,b,n=t.router,s=n.pagesData,o=n.biCategory,y=n.actions,I=n.prefix,h=t.onShowSettings,_=t.isDesktop,A=t.onHelp,v=t.biPanelName;return{onHelp:e((r=_,P=s,b=A,function(e,t,n){var a=n.editorAPI,i=a.dsRead.pages.getReference(P[0].id),s=a.dsRead.routers.getRouterRef.byPage(i),o=a.dsRead.routers.get.byRef(s).appDefinitionId;return o===a.dsRead.platform.editorApps.DATA_BINDING.appDefId?r?S.partial(b,C.DYNAMIC_PAGES.helpId):S.partial(b,C.DYNAMIC_PAGES.mobileHelpId):o===a.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId?S.partial(b,C.MEMBERS_PAGES.helpId):r?S.partial(b,C.ROUTER_PAGES.helpId):S.partial(b,C.ROUTER_PAGES.mobileHelpId)})),navigateTo:e((i=v,function(e,t,n){var a=n.editorAPI;return function(e){a.dsRead.pages.getFocusedPageId()!==e&&(a.pages.navigateTo(e),a.bi.event(R.events.pages.navigate_to_page,{page_id:e,panel_name:i,category:C.ROUTER_PAGES.biCategory}))}})),biEvent:function(){return e(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.bi).event.apply(a,i)}}.apply(void 0,arguments))},dynamicPagesActions:e((a=s,g=h,m=_,f=o,function(e,t,n){var p=n.editorAPI;return D(p),N(p),S.reduce(a,function(e,t){var n=t.id,a=p.dsRead.pages.getReference(n),i=p.dsRead.routers.getRouterRef.byPage(a),s=p.dsRead.routers.get.byRef(i).appDefinitionId,o=p.dsRead.platform.getAppDataByAppDefId(s).applicationId,r=T.dynamicPage(p,n,o,i,g,m,f);return S.assign({},e,_defineProperty({},n,r))},{})})),onClickAdd:e((p=s,l=_,u=y,d=I,c=o,function(e,t,n){var a=n.editorAPI,i=a.dsRead.pages.getReference(p[0].id),s=a.dsRead.routers.getRouterRef.byPage(i),o=a.dsRead.routers.get.byRef(s).appDefinitionId,r=S.get(a.dsRead.platform.getAppDataByAppDefId(o),"applicationId");return k(a,o,r,l,u,d,s,c).onClick}))}},function(e,t,n){var a=S.assign({},e,{pages:S.map(e.pages,function(e){return S.assign({},e,{actions:t.dynamicPagesActions[e.id]})})}),i=S.omit(t,["dynamicPagesActions"]);return S.assign({},n,a,i)})(i(t))}),define("pages/panel/pagesView/editorAPIConnectors/appPagesView",["lodash","platform","util","pages/panel/pagesView/editorAPIConnectors/getActions","coreBi","pages/panel/pagesView/pagesView"],function(T,E,e,R,C,t){"use strict";var n=e.hoc,a=n.connect,i=n.renderWhenMutated,s=n.STORES.EDITOR_API,p=e.addPageRouterActionUtils,M=function(t,e,n,a,i,s){if(!a)return{title:null,onClick:null};var o=p.findAddPageAction(i);if(!o)return{title:null,onClick:null};var r=R.getOnClickApplicationNotification(t,n,o.event);return{title:o.title,onClick:function(e){t.bi.event(C.events.pages.pagesPanel.add_page_selection_click,{category:"application page",source:s||"router"}),r(e)}}};return a(s,function(e,t){var s,n,o,r,p,l,u,a,i,d,c=e.editorAPI,g=t.appData,m=g.id,f=g.title,P=g.pagesData,b=g.biCategory,y=g.emptyStateUrl,I=g.actions,h=t.onShowSettings,_=t.isDesktop,A=t.onRename,v=m,S=c.platform.getAppDataByAppDefId(v),C=M(c,0,S.applicationId,_,I,b);return{title:f,emptyStateUrl:y?(a=y,i=v,d=S,E.utils.getFullApplicationUrl(d,a,i,d.applicationId)):null,pages:(s=c,n=P,o=h,r=_,p=v,l=b,u=A,T.map(n,function(e){var t=e.id,n=e.title,a=e.permissionSymbol,i=e.pageDescriptor;return{id:t,title:n,permissionSymbol:a,typeSymbol:T.get(i,"icon","appsNewLight"),info:T.get(i,"tooltip"),actions:R.applicationPage(s,t,p,r,l,o,u)}})),renameEnabled:_,biCategory:b,appDefinitionId:v,titleAdd:C.title}},function(e,t){var i,s,o,r,p,l,u,d,c,g,m,f,n=t.appData,a=n.id,P=n.pagesData,b=n.helpId,y=n.biCategory,I=n.actions,h=t.onShowSettings,_=t.isDesktop,A=t.onHelp,v=t.biPanelName,S=t.onRename;return{onHelp:T.partial(A,b),navigateTo:e((m=v,f=y,function(e,t,n){var a=n.editorAPI;return function(e){a.dsRead.pages.getFocusedPageId()!==e&&(a.pages.navigateTo(e),a.bi.event(C.events.pages.navigate_to_page,{page_id:e,panel_name:m,category:f}))}})),biEvent:function(){e(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.bi).event.apply(a,i)}}.apply(void 0,arguments))},onClickAdd:e((u=a,d=_,c=I,g=y,function(e,t,n){var a=n.editorAPI,i=a.platform.getAppDataByAppDefId(u);return M(a,0,i.applicationId,d,c,g).onClick})),extendedPagesActions:e((i=P,s=h,o=_,r=a,p=y,l=S,function(e,t,n){var a=n.editorAPI;return T.fromPairs(T.map(i,function(e){var t=e.id;return[t,R.applicationPage(a,t,r,o,p,s,l)]}))}))}})(i(t))}),define("pages/panel/pagesView/editorAPIConnectors/tpaView",["lodash","util","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/pagesView/pagesView","coreBi","pages/utils/pageCategories"],function(m,e,f,t,P,u){"use strict";var n=e.hoc,a=n.connect,i=n.renderWhenMutated,s=n.STORES.EDITOR_API;return a(s,function(e,t){e.editorAPI;var n,s,a=t.tpa,i=a.pagesData,o=a.title,r=a.typeSymbol,p=a.biCategory,l=(t.onShowSettings,t.isDesktop);return{title:o,pages:(n=i,s=r,m.map(n,function(e){var t=e.id,n=e.title,a=e.isSubPage,i=e.permissionSymbol;return{id:t,title:n,info:e.info,typeSymbol:s,permissionSymbol:i,isSubPage:!!a}})),titleAdd:u.TPA_PAGES.titleAdd,renameEnabled:l,biCategory:p}},function(t,e){var i,s,n=e.tpa,a=n.helpId,o=n.mobileHelpId,r=n.onClickAdd,p=n.biCategory,l=e.onShowSettings,u=e.isDesktop,d=e.onHelp,c=e.biPanelName,g=t((i=l,s=u,function(e,t,n){var a=n.editorAPI;return{pageActions:f.tpaPage(a,i,s),subPageActions:f.tpaSubPage(a,i,s)}}));return{onHelp:u?m.partial(d,a):m.partial(d,o),onClickAdd:r,navigateTo:function(e){return t((i=c,s=p,o=e,function(e,t,n){var a=n.editorAPI;a.dsRead.pages.getFocusedPageId()!==o&&(a.pages.navigateTo(o),a.bi.event(P.events.pages.navigate_to_page,{page_id:o,panel_name:i,category:s}))}));var i,s,o},biEvent:function(){t(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.bi).event.apply(a,i)}}.apply(void 0,arguments))},tpaPagesActions:g}},function(e,t,n){var a=t.tpaPagesActions,i=a.pageActions,s=a.subPageActions,o=m.assign({},e,{pages:m.map(e.pages,function(e){return m.omit(m.assign({},e,{actions:e.isSubPage?s:i}),["isSubPage"])})}),r=m.omit(t,["tpaPagesActions"]);return m.assign({},n,o,r)})(i(t))}),define("pages/panel/menuView/utils/mainMenuTreeState",["lodash"],function(n){"use strict";var a={};function i(e,t){a[e]=Boolean(t)}function s(e,t){return a.hasOwnProperty(e)?a[e]:t||!1}return{setMenuItemCollapsed:i,reflectStateToMenuTree:function t(e){n.forEach(e,function(e){e.isCollapsed=s(e.id),0<e.items.length?t(e.items):e.isCollapsed&&(e.isCollapsed=!1,i(e.id,!1))})},reflectStateToMenuItem:function(e,t){return e.isCollapsed=s(e.id,t),n.get(e,"items.length",0)<=0&&e.isCollapsed&&(e.isCollapsed=!1,i(e.id,!1)),e}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewUtils",["lodash"],function(a){"use strict";return{getMenuItemsWithInitialCollaptionData:function(e,t){return t&&a.forEach(e,function(e){e.isCollapsed=t[e.id]}),e},getMenuItemsWithsymbolIfApplicable:function(e,t,n){return t!==n?e:a.map(e,function(e){return a.defaults({symbol:"membersAction",items:a.map(e.items,function(e){return a.defaults({symbol:"membersAction"},e)})},e)})}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewActions",["lodash","constants","util","coreBi","platform","wixData","pages/panel/pagesView/editorAPIConnectors/getActions","experiment"],function(x,L,H,T,b,l,E,G){"use strict";var F=function(e,t,n,a){e.bi.event(T.events.pages.pagesPanel.quick_actions_menu_select,{page_id:t,source:a,category:n})};function s(e,t,n,a,i){var s,o,r,p,l,u=a[x.findIndex(a,{id:n.id})-1],d=u.items.length;s=e,o=t,r=n,p=u.id,l=d,x.forEachRight(r.items,function(e){s.menus.moveMenuItem(o,e.id,p,l,!1)}),e.menus.moveMenuItem(t,n.id,u.id,d,!1),e.bi.event(T.events.topbar.pages.top_bar_PAGES_menu_sub_page_created,{origin:"quick actions",source:i}),e.history.add("subpaging a page")}var R=function(e,t,n,a,i){var s={};"boolean"==typeof a?s.hidePage=a:a=!n.isVisible,"boolean"==typeof i?s.mobileHidePage=i:i=!n.isVisibleMobile,n.pageData?e.pages.data.update(n.pageData.id,s):e.dsActions.menu.updateItem(t,n.id,{isVisible:!a,isVisibleMobile:!i}),e.history.add("hiding a page")},j=function(t,n,e,a,i){a.isVisible?e.push({title:H.translate("Pages_Actions_Page_Hide"),symbolName:"hideAction",onClick:function(){R(t,n,a,!0);var e=x.get(a,"pageData.id");F(t,e,"hide",i)}}):e.push({title:H.translate("Pages_Actions_Page_Unhide"),symbolName:"unhideAction",onClick:function(){R(t,n,a,!1);var e=x.get(a,"pageData.id");F(t,e,"show",i)}})},W=function(r,p,e,l,t,u){var n,a,i;i=0===(a=l).position,a.parent||i?(n=l,x.isObject(n.parent)&&e.push({title:H.translate("Pages_Actions_Page_MoveUp"),symbolName:"unsubpageAction",onClick:function(){var e,t,n,a,i,s;e=r,t=p,a=u,i=(n=l).parent.parent&&n.parent.parent.id,s=n.parent.position+1,e.menus.moveMenuItem(t,n.id,i,s,!1),e.bi.event(T.events.topbar.pages.top_bar_PAGES_menu_user_reverted_to_main_page,{origin:"quick actions",source:a}),e.history.add("moving a page out of its parent");var o=x.get(l,"pageData.id");F(r,o,"mainpage",u)}})):e.push({title:H.translate("Pages_Actions_Page_Subpage"),symbolName:"subpageAction",onClick:function(){s(r,p,l,t,u);var e=x.get(l,"pageData.id");F(r,e,"subpage",u)}})},Y=function(i,e,t,s,o){var n,a,r,p;s.type.isPage&&((p=i).developerMode.isEnabled()||l.isDataModeOn(p))&&(n=i,(r=(a=s).pageData&&a.pageData.id)&&n.dsRead.routers.pages.isConnectablePage(r))&&t.push({title:H.translate("Platform_Page_Actions_Set_Dynamic_Page"),symbolName:"dynamicPageType",onClick:function(){var e,t,n;e=i,t=s.pageData.id,n=e.dsRead.platform.getAppDataByAppDefId(e.dsRead.platform.editorApps.DATA_BINDING.appDefId),e.dsActions.platform.notifyApplication(n.applicationId,{eventType:"addDynamicPageClicked",eventPayload:{pageRef:e.dsRead.pages.getReference(t),origin:"quickActionsMenu"}});var a=x.get(s,"pageData.id");F(i,a,"Set Page Dynamic",o)}})},M=function(e,t,n,a,i,s,o,r,p,l){var u,d,c,g,m,f,P,b,y,I,h,_,A,v,S,C,T,E,R,M,k,D,N,w,O,V,q,B,U=[];return function(t,e,n,a,i,s){if(n.type.isPage&&a){var o=void 0,r=void 0;o=G.isOpen("promoteSEOTab")?(e.unshift({title:H.translate(L.PAGE_SETTINGS_TABS.TITLE_KEYS.SOCIAL),symbolName:"seoSocialShareAction",onClick:function(){i({tabType:L.PAGE_SETTINGS_TABS.SOCIAL_NEW,pageId:n.pageData.id});var e=x.get(n,"pageData.id");F(t,e,"tabPageInfo",s)},isSettings:!0}),H.translate(L.PAGE_SETTINGS_TABS.TITLE_KEYS.BASIC_SEO)):H.translate("Pages_Actions_Page_SEO_Social"),r=L.PAGE_SETTINGS_TABS.SEO,e.unshift({title:H.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(){i({tabType:L.PAGE_SETTINGS_TABS.PAGE_INFO,pageId:n.pageData.id});var e=x.get(n,"pageData.id");F(t,e,"tabPageInfo",s)},isSettings:!0},{title:o,symbolName:"seoSettingsAction",onClick:function(){i({tabType:r,pageId:n.pageData.id});var e=x.get(n,"pageData.id");F(t,e,"tabSEO",s)},isSettings:!0})}}(e,U,n,a,i,l),u=e,d=t.id,c=U,m=l,(g=n).type.isLink&&c.push({title:H.translate("Pages_Actions_Link_Change"),symbolName:"linkAction",onClick:function(){u.menus.updateLink(d,g,g.link),F(u,null,"change link",m)}}),f=e,P=t.id,b=n,y=o,I=l,U.push({title:H.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(e,t){var n,a,i,s;b.pageData?f.menus.renamePage(b.pageData.id,b.pageData.title,t):(n=f,a=P,i=b,(s=t)&&i.label!==s&&(n.menu.updateItem(a,i.id,{label:s}),n.history.debouncedAdd("Rename Menu Item")));var o=x.get(b,"pageData.id");F(f,o,"rename",I),y()},isRename:!0}),_=U,v=h=e,C=a,(S=A=n).type.isPage&&v.copyPaste.canCopyPage(S.pageData.id)&&C&&_.push({title:H.translate("MenuItem_Copy_Page_Action"),symbolName:"seoSettingsAction",onClick:function(){h.copyPaste.copyPage(A.pageData.id)}}),T=e,E=t.id,R=U,M=n,k=s,D=l,T.menus.canDuplicate(M)&&!T.dsRead.language.isCurrentLanguageSecondary()&&R.push({title:H.translate("Pages_Actions_Page_Duplicate"),symbolName:"duplicateAction",onClick:function(){T.menus.duplicateMenuItem(E,M,k);var e=x.get(M,"pageData.id");F(T,e,"duplicate",D)}}),Y(e,t.id,U,n,l),j(e,t.id,U,n,l),W(e,t,U,n,r,l),N=e,w=t.id,O=U,V=n,q=l,!(B=p)&&V.type.isPage||O.push({title:H.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(){N.menus.removeMenuItem(w,V,B);var e=x.get(V,"pageData.id");F(N,e,"delete",q)}}),U},k=function(e,t,n,a,i,s,o){var r,p,l,u,d,c,g,m,f,P=function(n,e,a,t,i,s){if(t){var o=n.dsRead.platform.getAppDataByApplicationId(e.appId).appDefinitionId,r=n.pages.dynamicPages.getActionByAppDefId(o,"pageSettings",[b.constants.pages.page_settings.pageInfo.type,b.constants.pages.page_settings.seo.type]);return x.map(r,function(t){return{title:t.title,symbolName:t.icon,onClick:function(){var e=x.get(a,"pageData.id");i({pageId:e,routerId:x.get(a,"link.routerId"),innerRoute:x.get(a,"link.innerRoute"),tabType:t.type}),F(n,e,t.type,s)},isSettings:!0}})}return[]}(e,t,n,a,i,o);return r=e,p=t,l=n,u=i,d=P,c=o,g=x.get(l,"pageData.id"),m=r.dsRead.platform.getAppDataByApplicationId(p.appId).appDefinitionId,(f=r.pages.dynamicPages.getActionByAppDefId(m,"pageSettings",[b.constants.pages.page_settings.pageInfo.type])[0])&&(l.isVisible?d.push({title:H.translate("Pages_Actions_Page_Hide"),symbolName:"hideAction",onClick:function(){u({tabType:f.type,pageId:g,routerId:x.get(l,"link.routerId"),innerRoute:x.get(l,"link.innerRoute")}),F(r,g,"hide",c)}}):d.push({title:H.translate("Pages_Actions_Page_Unhide"),symbolName:"unhideAction",onClick:function(){u({tabType:f.type,pageId:g,routerId:x.get(l,"link.routerId"),innerRoute:x.get(l,"link.innerRoute")}),F(r,g,"hide",c)}}),d.push({title:H.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(){u({tabType:f.type,pageId:g,routerId:x.get(l,"link.routerId"),innerRoute:x.get(l,"link.innerRoute")}),F(r,g,"rename",c)}})),W(e,t,P,n,s,o),P};return{getActionsForMenuItem:function(e,t,n,a,i,s,o,r,p,l){return t.appId?a?k(e,t,n,a,i,r,l):null:a?x.get(n,["pageData","managingAppDefId"])?(m=e,f=t,b=r,y=i,I=o,h=l,_=(P=n).pageData.id,A=P.pageData.managingAppDefId,v=E.applicationPage(m,_,A,!0,h,y,I),S=x.remove(v,{isRemove:!0}),C=_slicedToArray(S,1)[0],j(m,f.id,v,P,h),W(m,f,v,P,b,h),C&&v.push(C),v):M(e,t,n,a,i,s,o,r,p,l):(u=e,d=t.id,g=l,(c=n).isVisibleMobile?[{title:H.translate("MenuItem_Hide_Mobile_Action"),symbolName:"quickActionsHide",onClick:function(){R(u,d,c,void 0,!0);var e=x.get(c,"pageData.id");u.bi.event(T.events.pages.pagesPanel.quick_action_hide_show_mobile_click,{page_id:e,source:g,category:"hide"})}}]:[{title:H.translate("MenuItem_Show_Mobile_Action"),symbolName:"quickActionsShow",onClick:function(){R(u,d,c,void 0,!1);var e=x.get(c,"pageData.id");u.bi.event(T.events.pages.pagesPanel.quick_action_hide_show_mobile_click,{page_id:e,source:g,category:"show"})}}]);var u,d,c,g,m,f,P,b,y,I,h,_,A,v,S,C}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewMapper",["lodash","pages/panel/menuView/editorAPIConnectors/menuViewUtils","pages/panel/menuView/editorAPIConnectors/menuViewActions","pages/panel/menuView/utils/menuDataGetterUtil","pages/utils/pageCategories","coreBi","stateManagement","constants"],function(D,N,w,O,V,q,B,U){"use strict";var x=function(e){return B.editorPlugins.userPreferences.selectors.getSessionUserPreferences("collapsedMenuItems")(e.store.getState())},L=function(e,t,n){return n.editorAPI};return{mapStateToProps:function(e,t){var n=e.editorAPI,a=t.isDesktop,i=t.menu,s=n.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId,o=N.getMenuItemsWithInitialCollaptionData(i.menuItems,x(n)),r=N.getMenuItemsWithsymbolIfApplicable(o,i.appDefId,s),p=V.MENUS.getBiCategory(i.id);return{title:i.title,menuItems:r,isDraggable:a,renameEnabled:a,isMobile:!a,initialActions:!a&&i.appDefId?null:[],showAddOptions:a&&i.appDefId!==n.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId,biCategory:p,titleAdd:V.MENUS.titleAdd,getTooManyPagesFrequencyCount:B.editorPlugins.userPreferences.selectors.getSessionUserPreferences(U.USER_PREFS.TOO_MANY_PAGES.FREQUENCY_COUNT)(n.store.getState())||0}},mapDispatchToProps:function(t,e){var n,a,i,s,o,r,p,l,u,d,c,g,m,f,P,b=e.onShowSettings,y=e.onItemAdded,I=e.onRename,h=e.isDesktop,_=e.onHelp,A=e.menu,v=e.selectedMenuItemId,S=e.biPanelName,C=t(L),T=C.dsRead.menu.getById(A.id,!0),E=C.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId,R=N.getMenuItemsWithInitialCollaptionData(A.menuItems,x(C)),M=V.MENUS.getBiCategory(A.id),k=B.editorPlugins.contextMenu.actions;return{biEvent:C.bi.event,onMoveMenuItem:function(e,t,n,a){return C.menus.moveMenuItem(T,e,t,n,!0,a)},navigateCallback:function(e){if(e.type.isPage)m=C,f=e.pageData.id,P=M,b=S,m.dsRead.pages.getFocusedPageId()!==f&&(m.pages.navigateTo(f),m.bi.event(q.events.pages.navigate_to_page,{page_id:f,category:P,panel_name:b}));else if(e.type.isLink&&"AnchorLink"===e.type.raw){var t=e.link,n=t.pageId&&t.pageId.replace("#","");l=C,u=n,d=M,c=S,g=t.anchorDataId,(l.dsRead.pages.getFocusedPageId()!==u||g)&&(l.pages.navigateToAndScroll(u,g,l.applyPreviewScrollToEditorScroll),l.bi.event(q.events.pages.navigate_to_page,{page_id:u,category:d,panel_name:c}))}else e.type.isLink&&"DynamicPageLink"===e.type.raw&&(a=C,i=e.link.routerId,s=e.link.innerRoute,o=M,r=S,p=D.assign(a.dsRead.data.createItem("DynamicPageLink"),{innerRoute:s||"",routerId:i}),a.pages.navigateTo(p),a.bi.event(q.events.pages.navigate_to_page,{category:o,panel_name:r}));var a,i,s,o,r,p,l,u,d,c,g,m,f,P,b},findMenuItemById:C.menus.findMenuItemById,mainMenuPanelContext:C.mainMenu.panelContext,titleAdd:V.MENUS.titleAdd,onHelpHeader:D.partial(_,O.getHelpIdForMenu(A.id,A.appDefId,E,h)),onHelp:_,onClickAddPage:(c=C,g=M,m=A.id,f=v,P=y,function(){c.menus.addPage(m,f,P),c.bi.event(q.events.pages.pagesPanel.add_page_selection_click,{category:"page",source:g})}),onClickAddLink:(r=C,p=M,l=A.id,u=v,d=y,function(){r.menus.addLink(l,u,d),r.bi.event(q.events.pages.pagesPanel.add_page_selection_click,{category:"link",source:p})}),onClickAddFolder:(n=C,a=M,i=A.id,s=v,o=y,function(){n.menus.addFolder(i,s,o),n.bi.event(q.events.pages.pagesPanel.add_page_selection_click,{category:"dropdown menu",source:a})}),openContextMenu:function(e){return C.store.dispatch(k.openContextMenu(e))},setInPrefIscollapsedMenuItems:function(e,t){return a=e,i=t,(s=x(n=C))||(n.store.dispatch(B.editorPlugins.userPreferences.actions.setSessionUserPreferences("collapsedMenuItems",{})),s={}),s=Object.assign({},s,_defineProperty({},a,Boolean(i))),void n.store.dispatch(B.editorPlugins.userPreferences.actions.setSessionUserPreferences("collapsedMenuItems",s));var n,a,i,s},getMenuItemActions:function(e){return w.getActionsForMenuItem(C,T,e,h,b,y,I,R,A.multiPageMenu,M)},setTooManyPagesFrequencyCount:function(e){return C.store.dispatch(B.editorPlugins.userPreferences.actions.setSessionUserPreferences(U.USER_PREFS.TOO_MANY_PAGES.FREQUENCY_COUNT,e))},showUserActionNotification:function(){var e;return t((e=B.editorPlugins.notifications.actions).showUserActionNotification.apply(e,arguments))}}}}}),define("pages/panel/menuView/addTooltip.rt",["react","lodash","util","baseUILib"],function(n,e,a,i){"use strict";return function(e,t){return n.createElement("div",{className:"add-tooltip-pp",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},n.createElement(i.Composites.RichTextLabeled,{},n.createElement(i.TextLabel,{type:"T06",value:e.title}),n.createElement(i.RichText,{},n.createElement("p",{},a.translate(e.description),"\n            ",n.createElement("a",{onClick:e.onLearnMore},a.translate("NewPages_Panel_Add_Folder_Learnmore"))))))}}),define("pages/panel/menuView/addTooltip",["lodash","prop-types","pages/panel/menuView/addTooltip.rt"],function(e,t,n){"use strict";var a=n;return a.displayName="addTooltip",a.propTypes={title:t.string,description:t.string,onLearnMore:t.func,onMouseEnter:t.func,onMouseLeave:t.func},a}),define("pages/panel/menuView/menuItem/menuItem.rt",["react","lodash","baseUI","santa-editor-symbols","baseUILib","util","core","experiment"],function(s,a,e,o,r,n,t,i){"use strict";return function(){function t(e){var t=this.filterRegularActions(),n=this.filterSettingsActions();return s.createElement(r.ContextMenu,{className:"flat",isOpen:this.state.contextMenuOpened,key:"page-context-menu",onToggle:this.handleContextMenuToggle,automationId:"menu-item-context-menu"},s.createElement.apply(this,[r.ContextMenuContent,{key:"actions-"+this.state.actions.length},a.map(n,function(e,t,n,a,i){return s.createElement(r.ContextMenuAction,{onClick:function(e,t,n,a,i){this.handleClickAction(a)}.bind(this,e,t,n,a,i),key:"action-"+a.title,automationId:"action-"+a.title,className:"menu-item-settings-action-pp"},s.createElement(o.symbol,{name:a.symbolName}),s.createElement("span",{},a.title))}.bind(this,e,t,n)),a.isEmpty(t)||a.isEmpty(n)?null:s.createElement(r.Divider,{key:"actions-divider"}),a.map(t,function(e,t,n,a,i){return s.createElement(r.ContextMenuAction,{onClick:function(e,t,n,a,i){this.handleClickAction(a)}.bind(this,e,t,n,a,i),key:"action-"+a.title,automationId:"action-"+a.title},s.createElement(o.symbol,{name:a.symbolName}),s.createElement("span",{},a.title))}.bind(this,e,t,n))]))}return s.createElement("div",{className:"menu-item-pp "+a(this.getTopLevelClasses()).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onClick:this.props.setSelected,"data-aitemtype":this.getAutomationItemType()},null===this.state.inputValue?s.createElement("div",{className:"title-action-container",key:"pageInfo",onDoubleClick:this.onDoubleClick},s.createElement("div",{className:"left-container"},this.props.isDragAvailable?s.createElement(o.symbol,{name:"dragPage",key:"drag-icon",className:"page-item-drag",dataHintMyData:"hint_my_data"}):null,s.createElement(r.Tooltip,{disabled:!this.props.info,content:this.props.info,shouldTranslate:!1,arrowAlignment:"top",key:"tooltip-type-symbol-pp"},s.createElement(o.symbol,{name:this.getTypeSymbolName()})),s.createElement("span",{className:a(this.getTitleClass()).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},s.createElement(r.TooltipOnEllipsis,{marginTop:5,contentClassName:"menu-item-title-name"},this.props.dataSource.label))),function(){var e=this.getPagePermissionSymbol();return s.createElement("div",{className:"right-container"},e?s.createElement(o.symbol,{name:e,key:"pagePermissionSymbol"}):null,this.isHidden()?s.createElement(o.symbol,{name:"hiddenPageStatus",key:"hiddenPageStatus-symbol"}):null,this.state.actions?t.apply(this,[e]):null)}.apply(this,[])):null,null!==this.state.inputValue?function(){var e=n.validate.pageNameValidator(this.state.inputValue);return s.createElement("div",{className:"input-button-container",onMouseDown:function(e,t){t.stopPropagation()}.bind(this,e),key:"input-container-page-pp"},s.createElement(r.TextInput,{value:this.state.inputValue,onChange:this.handleChangeInput,isValid:!e,invalidMessage:e,shouldTranslate:!1,selectOnFocus:!0,maxLength:40,onBlur:this.handleRenameDone,autoSelect:!0}),s.createElement(r.Button,{className:"done-button",disabled:e},"\n            ",n.translate("Pages_Actions_Rename_Button"),"\n        "))}.apply(this,[]):null)}}),define("pages/panel/menuView/menuItem/menuItem",["lodash","react","prop-types","pages/panel/menuView/menuItem/menuItem.rt","coreBi","util"],function(s,n,e,a,o,r){"use strict";var t=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.state={actions:i.props.initialActions,contextMenuOpened:!1,inputValue:function(){if(!(i.props.dataSource.id===i.props.renamedMenuItemId)||!i.props.renameEnabled)return null;var e=i.props.getMenuItemActions(i.props.dataSource);return s.head(s.filter(e,"isRename"))?i.props.dataSource.label:null}()},i.handleClickAction=function(e){e.isRename?i.openRenameMode():e.onClick(i.props.dataSource.id,i.props.dataSource.label)},i.openRenameMode=function(){i.getRenameAction()&&i.props.renameEnabled&&i.setState({inputValue:i.props.dataSource.label})},i.handleChangeInput=function(e){return i.setState({inputValue:e})},i.handleRenameDone=function(){var e=!r.validate.pageNameValidator(i.state.inputValue)?i.state.inputValue:i.props.dataSource.label;i.getRenameAction().onClick(i.props.dataSource.id,e),i.props.setSelected(),i.setState({inputValue:null,contextMenuOpened:!1})},i.getRenameAction=function(){var e=i.state.actions;return s.isEmpty(e)&&(e=i.props.getMenuItemActions(i.props.dataSource)),s.head(s.filter(e,"isRename"))},i.onDoubleClick=function(){return i.openRenameMode()},i.handleContextMenuToggle=function(e){e?(i.setState({contextMenuOpened:!0,actions:i.getActionsForItem(i.props.dataSource)}),i.props.biEvent(o.events.pages.pagesPanel.page_actions_click,{page_id:s.get(i.props.dataSource,"pageData.id"),source:i.props.biCategory})):i.setState({contextMenuOpened:!1})},i.getActionsForItem=function(e){return i.props.getMenuItemActions(e)},i.isHidden=function(){return i.props.isMobile?!i.props.dataSource.isVisibleMobile:!i.props.dataSource.isVisible},i.getAutomationItemType=function(){var e=i.props.dataSource,t=e.parent?"subpage-":"";return e.isHomePage?t+"home":e.type.isPage?t+"page":e.type.isLink?t+"link":e.type.isDropdown?t+"folder":void 0},i.getTopLevelClasses=function(){return{"hidden-page":i.isHidden(),selected:i.props.isSelected}},i.getPagePermissionSymbol=function(){return s.get(i.props.dataSource,"pageData.pageSecurity.requireLogin")?"membersPagePermission":s.get(i.props.dataSource,"pageData.pageSecurity.dialogLanguage")?"passwordPagePermission":null},i.getTitleClass=function(){var e=!!i.getPagePermissionSymbol(),t=!!i.isHidden(),n=!!i.props.dataSource.parent;return{"menu-item-title":!0,"page-without-attributes":!n&&!e&&!t,"subpage-without-attributes":n&&!e&&!t,"page-with-attribute":!n&&e&&!t||!n&&!e&&t,"subpage-with-attribute":n&&e&&!t||n&&!e&&t,"page-with-attributes":!n&&e&&t,"subpage-with-attributes":n&&e&&t}},i.filterSettingsActions=function(){return s.filter(i.state.actions,"isSettings")},i.filterRegularActions=function(){return s.reject(i.state.actions,"isSettings")},i.getTypeSymbolName=function(){var e,t,n,a=i.props.dataSource;return a.symbol?a.symbol:a.type.isPopupLink?"popupPageType":a.type.isLink?(e=s.get(a,"link.type"),s.get({AnchorLink:"anchorPageType",ExternalLink:"urlPageType",EmailLink:"emailPageType",PhoneLink:"phonePageType",DocumentLink:"documentPageType"},e,"linkPageType")):a.type.isDropdown?"folderPageType":a.isHomePage?"homePageType":a.isOldBlog?"oldBlogPageType":"members"===s.get(a,"pageData.tpaPageId")?"membersAction":0<s.get(a,"pageData.tpaApplicationId")?(t=a.appDefinitionId,s.get((_defineProperty(n={},"1380b703-ce81-ff05-f115-39571d94dfcd","storesPageType"),_defineProperty(n,"13d21c63-b5ec-5912-8397-c3a5ddb27a97","bookingPageType"),_defineProperty(n,"14724f35-6794-cd1a-0244-25fd138f9242","forumPageType"),_defineProperty(n,"14bcded7-0066-7c35-14d7-466cb3f09103","blogPageType"),_defineProperty(n,"135aad86-9125-6074-7346-29dc6a3c9bcf","hotelsPageType"),_defineProperty(n,"13c1402c-27f2-d4ab-7463-ee7c89e07578","restaurantsPageType"),_defineProperty(n,"13e8d036-5516-6104-b456-c8466db39542","restaurantsPageType"),_defineProperty(n,"1484cb44-49cd-5b39-9681-75188ab429de","searchPageType"),n),t,"tpaPageType")):"regularPageType"},i}return _inherits(t,n.Component),_createClass(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.dataSource,n=e.renamedMenuItemId,a=null!==this.state.inputValue;t.id!==n||a||this.openRenameMode()}},{key:"render",value:function(){return a.call(this)}}]),t}();return t.displayName="MenuItem",t.propTypes={renamedMenuItemId:e.string,dataSource:e.object.isRequired,isSelected:e.bool,setSelected:e.func.isRequired,isDragAvailable:e.bool.isRequired,isMobile:e.bool.isRequired,info:e.string,getMenuItemActions:e.func.isRequired,renameEnabled:e.bool,biEvent:e.func.isRequired,biCategory:e.string.isRequired,initialActions:e.oneOfType([e.array,e.object])},t}),define("pages/panel/menuView/menuView.rt",["react","lodash","baseUI","baseUILib","pages/panel/menuView/menuItem/menuItem","pages/panel/menuView/addTooltip","santa-editor-symbols"],function(e,t,n,a,i,s,o){"use strict";return function(){return e.createElement("div",{className:"menu-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelpHeader,className:"header light"},e.createElement("span",{className:"title-menu-view-pp"},this.props.title)),e.createElement("div",{onContextMenu:this.onContextMenu,className:t({"pages-tree-container":!0,"disable-drag":!this.props.isDraggable,"with-footer":this.props.showAddOptions}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(n.treeDocker,{className:t({"pages-tree-docker":!0,"pages-tree-shrinked":this.isShrink()}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onNodeMoved:this.handleMovePage,treeClass:"pages-tree",treeNodeClass:"pages-tree-node",treeNodeLabelClass:"menu-item-pp",draggedClass:"rotated",previewClass:"shadow",isDragAvailable:this.props.isDraggable,scrollTopGetter:this.getScrollTop,collapsedClass:"tree-collapsed"},e.createElement(a.CustomScroll,{ref:"customScroll"},e.createElement(n.treeView,{nodeContent:i,structureType:"tree",isDragAvailable:this.props.isDraggable,isMobile:this.props.isMobile,className:"pages-tree",dataSource:this.props.menuItems,collapsedSelector:"isCollapsed",onNodeToggled:this.onMenuItemToggled,onNodeContextMenu:this.onMenuItemContextMenu,isRoot:!0,onChange:this.handleSelectedItem,initialActions:this.props.initialActions,equalityComparer:this.equalityComparer,value:this.state.selectedMenuItemId,getMenuItemActions:this.props.getMenuItemActions,renameEnabled:this.props.renameEnabled,biEvent:this.props.biEvent,biCategory:this.props.biCategory,renamedMenuItemId:this.props.renamedItemId})))),this.props.showAddOptions?e.createElement("footer",{key:"add-container"},e.createElement("div",{className:"add-options-container"},e.createElement("div",{className:"add-menu-page-button-container",onMouseEnter:this.handleMouseEnterAddPage,onMouseLeave:this.handleMouseLeaveAddPageButton},e.createElement(a.Tooltip,{arrowAlignment:"top",isOpen:this.isTooManyPagesTooltipOpen(),openOnMouseEnter:!1,content:this.getAddPageTooltipContent(),key:"tooltip-add-page"},e.createElement(a.Button,{className:"add-menu-page-button",onClick:this.addPage,automationId:"add-menu-page-button"},e.createElement(o.symbol,{name:"addPage"}),e.createElement("span",{className:"add-title"},this.props.titleAdd)))),e.createElement("div",{className:"add-menu-link-button-container",onMouseEnter:this.handleMouseEnterAddLink,onMouseLeave:this.handleMouseLeaveAddLinkButton},e.createElement(a.Tooltip,{arrowAlignment:"top",isOpen:this.state.isAddLinkHovered,content:this.getAddLinkTooltipContent(),key:"tooltip-add-link"},e.createElement(a.Button,{onClick:this.props.onClickAddLink,automationId:"add-menu-link-button"},e.createElement(o.symbol,{name:"addLink"})))),e.createElement("div",{className:"add-menu-folder-button-container",onMouseEnter:this.handleMouseEnterAddFolder,onMouseLeave:this.handleMouseLeaveAddFolderButton},e.createElement(a.Tooltip,{arrowAlignment:"top",isOpen:this.state.isAddFolderHovered,content:this.getAddFolderTooltipContent(),key:"tooltip-add-folder"},e.createElement(a.Button,{onClick:this.props.onClickAddFolder,automationId:"add-menu-folder-button"},e.createElement(o.symbol,{name:"addFolder"})))))):null)}}),define("pages/panel/menuView/menuView",["react","prop-types","reactDOM","lodash","util","pages/panel/menuView/utils/mainMenuTreeState","pages/panel/menuView/editorAPIConnectors/menuViewMapper","pages/panel/menuView/addTooltip","coreBi","experiment","pages/panel/menuView/menuView.rt","helpIds"],function(n,e,o,a,i,p,t,s,l,u,r,d){"use strict";var c=i.hoc,g=c.connect,m=c.renderWhenMutated,f=c.STORES.EDITOR_API,P=u.isOpen("se_enablePageCrossSiteCopyPaste"),b=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={selectedMenuItemId:r.props.selectedMenuItemId,isAddLinkHovered:!1,isAddFolderHovered:!1,isAddPageHovered:!1},r.scrollToSelectedNode=!1,r.componentWillReceiveProps=function(e){var t=e.renamedItemId||e.selectedMenuItemId;t&&r.state.selectedMenuItemId!==t&&(r.setState({selectedMenuItemId:t}),r.props.mainMenuPanelContext.setSelectedMenuItem(r.getMenuItemById(t)))},r.componentDidUpdate=function(){r.doScrollToSelectedNode()},r.componentDidMount=function(){r.scrollToSelectedNode=!0,r.doScrollToSelectedNode(),P&&(r.lastKeyboardContext=i.keyboardShortcuts.getContext(),i.keyboardShortcuts.setContext(i.keyboardShortcuts.CONTEXTS.PAGES_MENU_PANEL)),r.props.mainMenuPanelContext.setOpened({selectedMenuItem:r.getMenuItemById(r.state.selectedMenuItemId)})},r.componentWillUnmount=function(){P&&(i.keyboardShortcuts.setContext(r.lastKeyboardContext),r.props.mainMenuPanelContext.setClosed())},r.isShrink=function(){return 17<function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return a.reduce(e,function(e,t){return e+1+(t.isCollapsed?0:n(t.items))},0)}(r.props.menuItems)},r.getScrollTop=function(){return r.refs.customScroll.getScrollTop()},r.handleMovePage=function(e){var t={items:r.props.menuItems},n=e.from.findIn(t,"items"),a=n.id;if(a){var i=e.to.parent().findIn(t,"items").id||null,s=e.to.findIn(t,"items"),o=s?s.position:e.to.atRight();i&&p.setMenuItemCollapsed(i,!1),r.props.onMoveMenuItem(a,i,o,function(){i&&(r.scrollToSelectedNode=!0),r.handleSelectedItem(n)}),r.props.biEvent(l.events.topbar.pages.top_bar_PAGES_menu_drag,{source:r.props.biCategory}),i&&1===e.from.length()?r.props.biEvent(l.events.topbar.pages.top_bar_PAGES_menu_sub_page_created,{origin:"drag",source:r.props.biCategory}):!i&&1<e.from.length()&&r.props.biEvent(l.events.topbar.pages.top_bar_PAGES_menu_user_reverted_to_main_page,{origin:"drag",source:r.props.biCategory})}},r.onMenuItemToggled=function(e,t){var n=e.props.dataSource.id;r.props.setInPrefIscollapsedMenuItems(n,t)},r.onMenuItemContextMenu=function(e,t){P&&(e.preventDefault(),e.stopPropagation(),r.handleSelectedItem(t),r.props.openContextMenu({editorPositionX:e.clientX,editorPositionY:e.clientY,origin:"pagesMenuItem"}))},r.onContextMenu=function(e){P&&(e.preventDefault(),e.stopPropagation(),r.props.openContextMenu({editorPositionX:e.clientX,editorPositionY:e.clientY,origin:"pagesMenu"}))},r.handleSelectedItem=function(e){e.type.isDropdown||e.type.isLink?r.props.onSelectNonPageItem():e.type.isPage&&r.props.onSelectPageItem(e.pageData.id),r.setState({selectedMenuItemId:e.id}),r.props.mainMenuPanelContext.setSelectedMenuItem(e),r.props.navigateCallback(e)},r.equalityComparer=function(e,t){return e.id===t},r.doScrollToSelectedNode=function(){var e=void 0,t=void 0,n=NaN;if(r.scrollToSelectedNode){r.scrollToSelectedNode=!1;var a=o.findDOMNode(r),i=a.querySelector(".pages-tree-container"),s=a.querySelector(".menu-item-pp.selected");s&&(e=i.getBoundingClientRect(),(t=s.getBoundingClientRect()).top<e.top?n=r.getScrollTop()+(t.top-e.top):t.bottom>e.bottom&&(n=r.getScrollTop()+(t.bottom-e.bottom)),isNaN(n)||r.refs.customScroll.updateScrollPosition(Math.max(0,n)))}},r.clearTimeout=function(){return r.props.timeoutHandler.clearTimeout(r.tooltipTimeout)},r.getAddLinkTooltipContent=function(){return n.createElement(s,{title:"NewPages_Panel_Add_Link_Title",description:"NewPages_Panel_Add_Link_Text",onLearnMore:function(){r.props.onHelp("79f9b88c-f080-4acc-8195-d62d34583dc6"),r.clearTimeout(),r.setState({isAddLinkHovered:!1})},onMouseEnter:r.handleMouseEnterAddLink,onMouseLeave:function(){r.clearTimeout(),r.setState({isAddLinkHovered:!1})}})},r.getAddFolderTooltipContent=function(){return n.createElement(s,{title:"NewPages_Panel_Add_Folder_Title",description:"NewPages_Panel_Add_Folder_Text",onLearnMore:function(){r.props.onHelp("c29d5e56-186e-47c6-903a-7ee7908fc078"),r.clearTimeout(),r.setState({isAddFolderHovered:!1})},onMouseEnter:r.handleMouseEnterAddFolder,onMouseLeave:function(){r.clearTimeout(),r.setState({isAddFolderHovered:!1})}})},r.getAddPageTooltipContent=function(){return n.createElement(s,{title:"Add_Page_TooManyPages_Tooltip_Title",description:"Add_Page_TooManyPages_Tooltip_Text",onLearnMore:function(){r.props.onHelp("244dfae4-bd5c-4672-85ba-28938f4cb07f"),r.clearTimeout(),r.setState({isAddPageHovered:!1})},onMouseEnter:r.handleMouseEnterAddPage,onMouseLeave:function(){r.clearTimeout(),r.setState({isAddPageHovered:!1})}})},r.handleMouseEnterAddLink=function(){r.clearTimeout(),r.setState({isAddLinkHovered:!0,isAddFolderHovered:!1,isAddPageHovered:!1})},r.handleMouseLeaveAddLinkButton=function(){r.clearTimeout(),r.tooltipTimeout=r.props.timeoutHandler.setTimeout(function(){r.setState({isAddLinkHovered:!1})},700)},r.handleMouseEnterAddFolder=function(){r.clearTimeout(),r.setState({isAddFolderHovered:!0,isAddLinkHovered:!1,isAddPageHovered:!1})},r.handleMouseLeaveAddFolderButton=function(){r.clearTimeout(),r.tooltipTimeout=r.props.timeoutHandler.setTimeout(function(){r.setState({isAddFolderHovered:!1})},700)},r.handleMouseEnterAddPage=function(){r.clearTimeout(),r.setState({isAddPageHovered:!0,isAddLinkHovered:!1,isAddFolderHovered:!1})},r.handleMouseLeaveAddPageButton=function(){r.clearTimeout(),r.tooltipTimeout=r.props.timeoutHandler.setTimeout(function(){r.setState({isAddPageHovered:!1})},700)},r.siteHasTooManyPages=function(){return 50<r.props.menuItems.length},r.isTooManyPagesTooltipOpen=function(){return r.siteHasTooManyPages()&&r.state.isAddPageHovered},r.addPage=function(){if(r.props.onClickAddPage(),r.siteHasTooManyPages()&&"old"!==u.getValue("se_notificationCenter")){if(r.props.getTooManyPagesFrequencyCount%4==0){r.props.showUserActionNotification({message:"Notifications_Too_Many_Pages_Text",title:"Notifications_Too_Many_Pages_Text",type:"warning",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){r.props.onHelp(d.NOTIFICATIONS.TOO_MANY_PAGES)}}})}r.props.setTooManyPagesFrequencyCount(r.props.getTooManyPagesFrequencyCount+1)}},r}return _inherits(t,n.Component),_createClass(t,[{key:"getMenuItemById",value:function(e){return this.props.findMenuItemById(this.props.menuItems,e)}},{key:"render",value:function(){return r.call(this)}}]),t}();b.displayName="MenuView",b.propTypes={selectedMenuItemId:e.string,setInPrefIscollapsedMenuItems:e.func.isRequired,navigateCallback:e.func.isRequired,isDraggable:e.bool.isRequired,isMobile:e.bool.isRequired,onMoveMenuItem:e.func.isRequired,menuItems:e.arrayOf(e.object).isRequired,mainMenuPanelContext:e.object.isRequired,findMenuItemById:e.func.isRequired,title:e.string.isRequired,onClose:e.func.isRequired,onHelp:e.func.isRequired,onHelpHeader:e.func.isRequired,openContextMenu:e.func.isRequired,getMenuItemActions:e.func.isRequired,renamedItemId:e.string,initialActions:e.oneOfType([e.array,e.object]),renameEnabled:e.bool.isRequired,showAddOptions:e.bool.isRequired,onClickAddPage:e.func.isRequired,onClickAddLink:e.func.isRequired,onClickAddFolder:e.func.isRequired,titleAdd:e.string.isRequired,onSelectNonPageItem:e.func.isRequired,onSelectPageItem:e.func.isRequired,biEvent:e.func.isRequired,biCategory:e.string.isRequired,showUserActionNotification:e.func,timeoutHandler:e.object,setTooManyPagesFrequencyCount:e.func,getTooManyPagesFrequencyCount:e.number},b.defaultProps={timeoutHandler:window};var y=g(f,t.mapStateToProps,t.mapDispatchToProps)(m(b));return y.pure=b,y}),define("pages/panel/transitionsView/transitionsView.rt",["react","lodash","util","baseUILib","santa-editor-symbols"],function(e,t,n,a,i){"use strict";return function(){return e.createElement("div",{className:"transitions-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:function(){this.props.onHelp("000c9232-9321-4738-94c8-885f8633b35b")}.bind(this),className:"header light"},e.createElement("span",{},this.props.title)),e.createElement(a.Composites.Thumbnails,{},e.createElement(a.Thumbnails,{value:this.props.selectedTransition,onChange:this.props.onClickTransition,maxThumbsPerRow:3,options:this.getTransitions()})))}}),define("pages/panel/transitionsView/transitionsView",["lodash","react","prop-types","santa-editor-symbols","pages/panel/transitionsView/transitionsView.rt"],function(e,t,n,a,i){"use strict";var s=function(e){return t.createElement(a.symbol,{name:e})},o=[{value:"none",label:"Pages_Menu_Transitions_None",illustration:s("transition-none")},{value:"swipeHorizontalFullScreen",label:"Pages_Menu_Transitions_SwipeH_Selected",illustration:s("transition-pages-horizontal")},{value:"swipeVerticalFullScreen",label:"Pages_Menu_Transitions_SwipeV_Popup",illustration:s("transition-pages-vertical")},{value:"crossfade",label:"Pages_Menu_Transitions_CrossFade",illustration:s("transition-pages-crossfade")},{value:"outIn",label:"Pages_Menu_Transitions_OutIn",illustration:s("transition-pages-inout")}],r=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.getTransitions=function(){return o},t}return _inherits(n,t.Component),_createClass(n,[{key:"render",value:function(){return i.call(this)}}]),n}();return r.displayName="TransitionsView",r.propTypes={onClickTransition:n.func.isRequired,title:n.string.isRequired,onClose:n.func.isRequired,onHelp:n.func.isRequired,selectedTransition:n.string.isRequired},r}),define("pages/panel/dynamicPagesIntroView/dynamicPagesIntroView.rt",["react","lodash","util","baseUILib","pages/utils/pageCategories"],function(e,t,n,a,i){"use strict";return function(){return e.createElement("div",{className:"dynamic-pages-intro-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelp.bind(null,i.DYNAMIC_PAGES_INTRO.helpId),className:"header light"},e.createElement("span",{},this.props.title)),e.createElement("img",{className:"banner",src:n.media.getMediaUrl("panels/pages/add_dynamic_pages_intro.png")}),e.createElement(a.Composites.RichTextLabeled,{className:"composite-centered"},e.createElement(a.TextLabel,{type:"T16",value:"Platform_Pages_Menu_Add_Dynamic_Page_Member_Title"}),e.createElement(a.RichText,{type:"T06"},n.translate("Platform_Pages_Menu_Add_Dynamic_Page_Member_Text"))),e.createElement(a.Composites.ActionSetVertical,{},e.createElement(a.Button,{onClick:this.props.addDynamicPage},e.createElement("span",{},n.translate("Platform_Pages_Menu_Add_Dynamic_Page_Add_Button")))))}}),define("pages/panel/dynamicPagesIntroView/dynamicPagesIntroView",["lodash","react","prop-types","pages/panel/dynamicPagesIntroView/dynamicPagesIntroView.rt"],function(e,n,t,a){"use strict";var i=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,n.Component),_createClass(t,[{key:"render",value:function(){return a.call(this)}}]),t}();return i.displayName="DynamicPagesIntroView",i.propTypes={title:t.string.isRequired,onClose:t.func.isRequired,onHelp:t.func.isRequired,addDynamicPage:t.func.isRequired},i}),define("pages/panel/pagesPanelMapper",["lodash","tpa","core","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","coreBi","constants","stateManagement","pages/panel/getPages","wixData"],function(U,i,o,x,L,u,r,a,H,G){"use strict";var F=function(e,t){var n=e.dsRead.homePage.get(),a=e.menus.getSelectedMenuItemByPageId(t,n);return{selectedPageId:n,selectedMenuItemId:a.id,selectedTabId:a.menuId}},j=function(e,n,t){var a=U.find(t,function(e){var t=e.pagesData;return U.some(t,{id:n})}),i=U.get(a,"id");return i?{selectedPageId:n,selectedTabId:i,selectedPageIsDynamic:!0}:null},W=function(e,n,t){var a=U.find(t,function(e){var t=e.pagesData;return U.some(t,{id:n})}),i=U.get(a,"id");return i?{selectedPageId:n,selectedTabId:i,selectedPageIsManagedByApp:!0}:null},Y=function(n,e){return U.get(U.find(e,function(e){var t=e.pagesData;return U.some(t,{id:n})}),"id")},s=function(e,t,n){var a=n.editorAPI;i.superApps.openDashboardUrl(i.superApps.superAppsConstants.ECOM_APP_DEF_ID),a.bi.event(u.events.topbar.pages.top_bar_PAGES_store_pages_store_manager_click)},p=function(e,t,n){var a=n.editorAPI,i=a.dsRead.platform.editorApps.DATA_BINDING.appDefId,s=a.dsRead.platform.getAppDataByAppDefId(i).applicationId;a.dsActions.platform.notifyApplication(s,{eventType:"addDynamicPageClicked",eventPayload:{origin:"pagesPanel"}}),a.bi.event(u.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click,{category:"add_dynamic_page",origin:"dynamic_page_intro"})};return{mapStateToProps:function(e,t){var n,a,i,s,o,r,p,l,u,d,c,g,m,f,P,b,y,I,h,_=e.editorAPI,A=e.dsRead.pages.getPagesData(),v=_.isDesktopEditor(),S=(n=_,a=v,U.map(H.routers(n),function(e){return e.actions=L.router(n,a,e.applicationId,e.prefix,e.biCategory,e.isSpecial,e.routerType),e})),C=U.filter(S,"isSpecial"),T=U.reject(S,"isSpecial"),E=(i=_,s=A,o=v,U.map(H.tpas(i,s),function(e){return e.actions=L.tpaTab(i,e.id,o),e})),R=(r=_,p=A,l=v,U.map(H.menus(r,p),function(e){return e.actions=L.menuTab(r,e.appDefId,l),e})),M=(u=_,d=A,c=v,U.map(H.pagesManagedByApps(u,d),function(e){return e.actions=L.application(u,e.id,c,e.biCategory),e})),k=function(e,t,n,a,i,s){var o=e.pages.popupPages.getCurrentPopup();if(o){var r=e.pages.popupPages.getDataList(),p=U.get(U.find(r,["managingAppDefId","5f4fa4f1-5afd-4ac0-8a85-e5ac1d2b9b7d"]),"id"),l=s?x.SIGNUP.id:x.MAIN_MENU.id;return{selectedPageId:o.id,selectedTabId:o.id===p?l:x.POPUPS.id}}var u=e.pages.getCurrentUrlPageId();if(!u)return F(e,t);var d=W(e,u,i);if(U.get(d,"selectedTabId"))return d;var c=j(e,u,a);if(U.get(c,"selectedTabId"))return c;var g=e.menus.getSelectedMenuItemByPageId(t,u),m=g.menuId||Y(u,n);return m?{selectedPageId:u,selectedMenuItemId:U.get(g,"id"),selectedTabId:m}:F(e,t)}(_,R,E,S,M,v),D=k.selectedPageId,N=k.selectedPageIsDynamic,w=k.selectedMenuItemId,O=k.selectedTabId,V=k.selectedPageIsManagedByApp,q=function(e,t,n,a,i){if(!e)return null;var s=U.map(t,"id");return U.includes(s,i)?n:a}(t.renameEnabled,R,w,D,O),B=U.filter(H.popups(_),function(e){return!e.managingAppDefId});return{selectedPageId:D,selectedMenuItemId:w,selectedPageIsDynamic:N,selectedTabId:O,selectedPageIsManagedByApp:V,initialTabId:function(e,t,n){if(t){if("CUSTOM_MAIN_MENU"===t)return"CUSTOM_MAIN_MENU";var a=e.dsRead.menu.getById(t).appId,i=U.find(n,["applicationId",a]);return U.get(i,"id")}return null}(_,t.menuId,S)||O,pagesData:A,menus:R,specialRouters:C,userRouters:T,tpas:E,appPages:M,popups:B,isDesktop:v,renamedItemId:q,biPanelName:"pages_panel",shouldShowDynamicPagesIntroTab:(h=_,Boolean(h.developerMode.isEnabled())||G.isDataModeOn(h)),hasRestrictedPage:(I=_,U.find(I.dsRead.pages.getPagesData().map(function(e){return U.get(e,"pageSecurity.requireLogin")}))),hasCustomSignupLightbox:(f=_,P=f.dsRead.siteMembers.getCustomSignupPageId(),b=f.components.get.byId(P),y=b&&f.components.getChildren(b)||[],U.some(y,function(e){return"wysiwyg.viewer.components.FormContainer"===f.components.getType(e)})),selectedTransition:(g=_,m=g.pages.transitions.get(),U.get({outIn:"outIn",crossfade:"crossfade",shrinkfade:"crossfade",swipeHorizontal:"swipeHorizontalFullScreen",swipeHorizontalFullScreen:"swipeHorizontalFullScreen",swipeVertical:"swipeVerticalFullScreen",swipeVerticalFullScreen:"swipeVerticalFullScreen",none:"none"},m,"none")),forceOpenPagesPanelCounter:_.getForceOpenPagesPanelEventCounter()}},mapDispatchToProps:function(n,e){var t=e.panelName;return{onHelp:function(e){return n((s=t,o=e,function(e,t,n){var a=n.editorAPI,i={panel_name:s,origin:r.BI.HELP.ORIGIN.PAGES_PANEL,learn_more:!0};a.panelManager.openHelpCenter(o,null,i)}));var s,o},onClose:function(){return n((a=t,function(e,t,n){n.editorAPI.panelManager.closePanelByName(a)}));var a},isTPASubPage:function(e){return n((s=e,function(e,t,n){var a=n.editorAPI,i=(0,n.dsRead.pages.data.get)(s);return o.utils.tpaTypeUtils.isTPASpecialPage(a.dsRead,i)}));var s},getPageData:function(e){return n((a=e,function(e,t,n){return n.dsRead.pages.data.get(a)}));var a},openStoreManager:function(){return n(s)},biEvent:function(e,t){return n(a.editorPlugins.bi.actions.event(e,t))},addDynamicPage:function(){return n(p)},onClickTransition:function(e){var l;n((l=e,function(e,t,n){var a=n.editorAPI,i=function(e){return U.trim(e.link.pageId,"#")};a.pages.transitions.set(l),a.bi.event(u.events.pages.pagesPanel.page_transition_selected_click,{category:l});var s=a.dsRead.pages.getPrimaryPageId(),o=U(a.dsRead.mainMenu.getMenu(!0)).flatMap(function(e){return[e].concat(_toConsumableArray(e.items))}).filter(function(e){return"PageLink"===U.get(e,"link.type")&&!a.dsRead.pages.popupPages.isPopup(i(e))}).map(i).value(),r=o.indexOf(s),p=(r+1)%o.length;p!==r&&a.pages.navigateTo(o[p]),a.waitForChangesApplied(function(){a.pages.navigateTo(o[r])})}))}}}}}),define("pages/panel/tabs/panelTabs.rt",["react","lodash","util","baseUILib","santa-editor-symbols"],function(i,n,e,s,o){"use strict";return function(){return i.createElement("div",{className:"tabs-pp"},i.createElement(s.CustomScroll,{},i.createElement.apply(this,["ul",{},n.map(this.getTabs(),function(e,t){return i.createElement("li",{onClick:function(e,t){this.handleClick(e)}.bind(this,e,t),key:"li-"+e.id,"data-aid":"tab-"+e.title,className:"tab"},i.createElement("div",{className:"container-for-background "+n({selected:this.props.selectedTabId===e.id}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},i.createElement(s.TooltipOnEllipsis,{marginTop:9},i.createElement("div",{className:"title"},e.title)),i.createElement(s.Tooltip,{marginTop:6,className:"actions-tooltip",content:"NewPages_Panel_Left_SiteMenu_Actions_Label",closeOnMouseClick:!0},n.isEmpty(e.actions)?null:i.createElement.apply(this,[s.ContextMenu,{customButton:this.getActionsButton(e.id),automationId:"context-menu-"+e.id,key:"tab-context-menu",onToggle:function(e,t,n){this.handleContextMenuToggle(e,n)}.bind(this,e,t)},n.map(e.actions,function(e,t,n,a){return i.createElement(s.ContextMenuAction,{onClick:n.onClick,key:"action-"+n.title},i.createElement(o.symbol,{name:n.symbolName}),i.createElement("span",{},n.title))}.bind(this,e,t))]))),e.separatorAfter?i.createElement(s.Divider,{key:"separator-after-"+e.id}):null)}.bind(this))])))}}),define("pages/panel/tabs/panelTabs",["react","prop-types","lodash","util","santa-editor-symbols","pages/utils/pageCategories","coreBi","experiment","pages/panel/tabs/panelTabs.rt"],function(n,e,o,s,i,r,p,l,a){"use strict";var u=function(e){var t=e.id,n=e.title,a=e.group,i=e.biCategory;return{id:t,title:s.translate(n),group:a,biCategory:i}},d=function(e){return e.group===r.MENUS.group?r.MENUS.getBiCategory(e.id):e.group===r.TPA_PAGES.group?r.TPA_PAGES.getBiCategory(e.id):e.biCategory},t=function(e){function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.shouldDisplaySignupTab=function(){return l.isOpen("se_customRegistrationPagesPanel")&&a.props.isDesktop&&a.props.hasRestrictedPage||a.props.hasCustomSignupLightbox},a.getTabs=function(){var n,e=function(e,t,n){if(t&&o.isEmpty(n)&&e)return[u(r.DYNAMIC_PAGES_INTRO)];var i=[];return o.forEach(n,function(e){var t=e.id,n=e.title,a=e.actions;i.push({id:t,title:n,actions:a,group:r.DYNAMIC_PAGES.group,biCategory:r.DYNAMIC_PAGES.biCategory})}),i}(a.props.shouldShowDynamicPagesIntroTab,a.props.isDesktop,a.props.userRouters),s=[];return o.forEach(a.props.menus,function(e){var t=e.id,n=e.title,a=e.actions;s.push({id:t,title:n,actions:a,group:r.MENUS.group})}),o.isEmpty(a.props.specialRouters)||o.forEach(a.props.specialRouters,function(e){var t=e.id,n=e.title,a=e.actions,i=e.biCategory;s.push({id:t,title:n,actions:a,group:r.SPECIAL_PAGES.group,biCategory:i})}),a.shouldDisplaySignupTab()&&s.push(u(r.SIGNUP)),o.isEmpty(a.props.appPages)||o.forEach(a.props.appPages,function(e){var t=e.id,n=e.title,a=e.actions,i=e.biCategory;s.push({id:t,title:n,actions:a,group:r.APPLICATION_PAGES.group,biCategory:i})}),o.forEach(a.props.tpas,function(e){var t=e.id,n=e.title,a=e.actions;s.push({id:t,title:n,actions:a,group:r.TPA_PAGES.group})}),s=s.concat(e),o.isEmpty(a.props.popups)||s.push(u(r.POPUPS)),n=s,s=o.map(n,function(e,t){return e.separatorAfter=t===n.length-1,e}),a.props.isDesktop?s.push(u(r.TRANSITIONS)):o.last(s).separatorAfter=!1,s},a.handleContextMenuToggle=function(e,t){t&&a.props.biEvent(p.events.pages.pagesPanel.tab_clicked_on_settings,{category:d(e)})},a.getActionsButton=function(e){return n.createElement("div",{key:"actions-button-"+e},n.createElement(i.symbol,{name:"settingsActionSmall"}))},a.handleClick=function(e){a.props.biEvent(p.events.pages.pagesPanel.category_click,{category:d(e)}),a.props.onClickTab(e.id)},a}return _inherits(t,n.Component),_createClass(t,[{key:"render",value:function(){return a.call(this)}}]),t}();return t.displayName="PanelTabs",t.propTypes={popups:e.arrayOf(e.object).isRequired,userRouters:e.arrayOf(e.object).isRequired,specialRouters:e.arrayOf(e.object).isRequired,appPages:e.arrayOf(e.object).isRequired,tpas:e.arrayOf(e.object).isRequired,menus:e.arrayOf(e.object).isRequired,onClickTab:e.func.isRequired,selectedTabId:e.string,biEvent:e.func.isRequired,shouldShowDynamicPagesIntroTab:e.bool.isRequired,hasCustomSignupLightbox:e.bool,hasRestrictedPage:e.bool,isDesktop:e.bool.isRequired},t}),define("pages/panel/pagesPanel.rt",["react","lodash","pages/panel/tabs/panelTabs","util","panels","pageSettingsPanel"],function(a,e,i,t,s,o){"use strict";return function(){return function(){var e=o.settingsPanels.main,t=o.settingsPanels.tpaSubPage,n=o.settingsPanels.signup;return a.createElement(s.frames.leftPanelFrame,{className:"left-panel-frame-pages-panel-pp",ref:"pagesPanel",panelName:this.props.panelName,panelIndex:this.props.panelIndex,panelClass:"pages-panel-pp"},a.createElement(i,{onClickTab:this.handleClickTab,selectedTabId:this.state.selectedTabId,popups:this.props.popups,hasCustomSignupLightbox:this.props.hasCustomSignupLightbox,shouldShowDynamicPagesIntroTab:this.props.shouldShowDynamicPagesIntroTab,hasRestrictedPage:this.props.hasRestrictedPage,userRouters:this.props.userRouters,specialRouters:this.props.specialRouters,tpas:this.props.tpas,appPages:this.props.appPages,isDesktop:this.props.isDesktop,menus:this.props.menus,biEvent:this.props.biEvent}),"\n    ",this.getView(),"\n    ",!this.showSignupSettings()&&this.showRegularSettings()?a.createElement(e,{key:"shouldShowMainSettings",menuItem:this.getSettingsItem(),menuId:this.state.settingsData.menuId,activeTabType:this.state.settingsData.tabType,closeSettingsPanel:this.handleCloseSettings,token:"dffdfadsfa",actions:{closeSettingsPanel:this.handleCloseSettings}}):null,this.showSignupSettings()?a.createElement(n,{key:"shouldShowSignupSettings",closeSettingsPanel:this.handleCloseSettings}):null,this.showSignupSettings()||!this.showSettingsForTPASubPage()||this.showRegularSettings()?null:a.createElement(t,{key:"shouldShowTpaSubPageSettings",ref:"settingsPanel",menuItem:this.getSettingsItem(),closeSettingsPanel:this.handleCloseSettings,activeTabType:this.state.settingsData.tabType,actions:{openStoreManager:this.props.openStoreManager}}))}.apply(this,[])}}),define("pages/panel/pagesPanel",["react","prop-types","lodash","util","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/signupView","pages/panel/pagesView/editorAPIConnectors/popupView","pages/panel/pagesView/editorAPIConnectors/dynamicPagesView","pages/panel/pagesView/editorAPIConnectors/appPagesView","pages/panel/pagesView/editorAPIConnectors/tpaView","pages/panel/menuView/menuView","pages/panel/transitionsView/transitionsView","pages/panel/dynamicPagesIntroView/dynamicPagesIntroView","pages/panel/pagesPanelMapper","pages/panel/pagesPanel.rt"],function(n,e,a,s,o,r,p,l,u,d,c,g,m,t,i){"use strict";var f=s.hoc,P=f.connect,b=f.STORES.EDITOR_API;function y(e,t){return a.some(t.tpas,{id:e})}function I(e,t){return a.some(t.userRouters,{id:e})||a.some(t.specialRouters,{id:e})}var h=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.getInitialSettingsData=function(){return e.initialSettingsTabType?{tabType:e.initialSettingsTabType,pageId:e.selectedPageId}:null},i.state={selectedTabId:i.props.initialTabId,nonPageItemSelected:!1,userSelectedPageId:null,settingsData:i.getInitialSettingsData(),renamedItemId:i.props.renamedItemId||null},i.getView=function(){var e=void 0,t=i.state.selectedTabId;return t===o.TRANSITIONS.id?e=g:t===o.DYNAMIC_PAGES_INTRO.id?e=m:a.some(i.props.menus,{id:t})?e=c:t===o.SIGNUP.id?e=r:t===o.POPUPS.id?e=p:y(t,i.props)?e=d:I(t,i.props)?e=l:a.some(i.props.appPages,{id:t})&&(e=u),n.createElement(e,{pagesData:i.props.pagesData,onClose:i.props.onClose,onHelp:i.props.onHelp,selectedMenuItemId:i.props.selectedMenuItemId,selectedPageId:i.props.selectedPageId,renamedItemId:i.state.renamedItemId,title:s.translate(a.get(o[t],"title")),onShowSettings:i.handleShowSettings,onItemAdded:function(e){return i.setState({renamedItemId:e,settingsData:null})},onRename:function(){return i.setState({renamedItemId:null})},isDesktop:i.props.isDesktop,popups:i.props.popups,menu:a.find(i.props.menus,{id:t}),router:a.find(i.props.userRouters,{id:t})||a.find(i.props.specialRouters,{id:t}),appData:a.find(i.props.appPages,{id:t}),tpa:a.find(i.props.tpas,{id:t}),selectedTransition:i.props.selectedTransition,onClickTransition:i.props.onClickTransition,onSelectNonPageItem:function(){i.handleCloseSettings(),i.setState({nonPageItemSelected:!0,userSelectedPageId:null})},onSelectPageItem:function(e){return i.setState({nonPageItemSelected:!1,userSelectedPageId:e})},addDynamicPage:i.props.addDynamicPage,biPanelName:i.props.biPanelName})},i.handleClickTab=function(e){return i.setState({selectedTabId:e,settingsData:null})},i.handleChangeShownSettings=function(t){t?i.setState(function(e){return{settingsData:a.assign(e.settingsData,{tabType:t.tabType,pageId:t.pageId})}}):i.handleCloseSettings()},i.handleCloseSettings=function(){return i.setState({settingsData:null})},i.handleShowSettings=function(t){i.setState(function(e){return{settingsData:a.assign({},e.settingsData,t)}})},i.getSettingsItem=function(){var e=a.get(i.state.settingsData,"pageId")||i.props.selectedPageId,t=e&&i.props.getPageData(e);return{pageData:t,label:a.get(t,"title")}},i.updateSelectedTabIdIfDeleted=function(e){var t=i.state.selectedTabId,n=y(t,i.props)&&!y(t,e),a=I(t,i.props)&&!I(t,e);(n||a)&&i.setState({selectedTabId:e.selectedTabId,nonPageItemSelected:!1})},i.showSettingsForTPASubPage=function(){return i.state.settingsData&&a.get(i.state.settingsData,"pageId")&&!i.state.settingsData.isCustomSignup&&i.props.isTPASubPage(i.state.settingsData.pageId)&&!i.props.selectedPageIsDynamic&&!i.props.selectedPageIsManagedByApp},i.showSignupSettings=function(){return i.state.settingsData&&i.state.settingsData.isCustomSignup},i.showRegularSettings=function(){return!!i.state.settingsData&&((i.state.settingsData.pageId&&!i.props.isTPASubPage(i.state.settingsData.pageId)||i.props.selectedPageIsDynamic||i.props.selectedPageIsManagedByApp)&&!i.state.settingsData.isCustomSignup)},i}return _inherits(t,n.Component),_createClass(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.selectedPageId!==e.selectedPageId,n=this.state.selectedTabId===o.TRANSITIONS.id||this.state.selectedTabId===o.SIGNUP.id||this.state.userSelectedPageId===e.selectedPageId;this.state.settingsData&&t&&this.handleChangeShownSettings({tabType:null,pageId:e.selectedPageId});var a=!t&&e.selectedTabId!==this.props.selectedTabId;(e.selectedTabId&&!n&&t&&!this.state.nonPageItemSelected||a)&&this.setState({selectedTabId:e.selectedTabId}),e.forceOpenPagesPanelCounter>this.props.forceOpenPagesPanelCounter&&(e.renamedItemId!==this.state.renamedItemId&&(this.setState({renamedItemId:e.renamedItemId}),e.selectedTabId!==this.state.selectedTabId&&this.setState({selectedTabId:e.selectedTabId})),e.initialSettingsTabType&&this.handleShowSettings({tabType:e.initialSettingsTabType,pageId:e.selectedPageId})),this.updateSelectedTabIdIfDeleted(e)}},{key:"render",value:function(){return i.call(this)}}]),t}();h.displayName="PagesPanel",h.propTypes={pagesData:e.arrayOf(e.object).isRequired,selectedPageId:e.string.isRequired,selectedPageIsDynamic:e.bool,selectedPageIsManagedByApp:e.bool,selectedMenuItemId:e.string,selectedTabId:e.string,initialTabId:e.string,renamedItemId:e.string,menus:e.arrayOf(e.shape({id:e.string.isRequired,title:e.string.isRequired,applicationId:e.string})).isRequired,userRouters:e.arrayOf(e.shape({id:e.string.isRequired,title:e.string.isRequired,pagesData:e.arrayOf(e.object).isRequired,prefix:e.string.isRequired,biCategory:e.string.isRequired})).isRequired,specialRouters:e.arrayOf(e.shape({id:e.string.isRequired,title:e.string.isRequired,pagesData:e.arrayOf(e.object).isRequired,prefix:e.string.isRequired,isSpecial:e.bool.isRequired,biCategory:e.string.isRequired})).isRequired,tpas:e.arrayOf(e.shape({id:e.string.isRequired,title:e.string.isRequired,pagesData:e.arrayOf(e.object).isRequired})).isRequired,appPages:e.arrayOf(e.shape({id:e.string.isRequired,title:e.string.isRequired,pagesData:e.arrayOf(e.object),biCategory:e.string.isRequired,helpId:e.string.isRequired,emptyStateUrl:e.string})).isRequired,popups:e.arrayOf(e.object).isRequired,panelName:e.string,onClose:e.func.isRequired,onHelp:e.func.isRequired,getPageData:e.func.isRequired,isTPASubPage:e.func.isRequired,openStoreManager:e.func.isRequired,isDesktop:e.bool.isRequired,biEvent:e.func.isRequired,biPanelName:e.string.isRequired,selectedTransition:e.string.isRequired,onClickTransition:e.func.isRequired,shouldShowDynamicPagesIntroTab:e.bool.isRequired,addDynamicPage:e.func.isRequired,initialSettingsTabType:e.string,forceOpenPagesPanelCounter:e.number},h.defaultProps={panelName:"pagesPanel"};var _=P(b,t.mapStateToProps,t.mapDispatchToProps)(h);return _.pure=h,_}),define("pages/quickNavigation/quickNavigationMapper",["lodash","util","stateManagement","pages/utils/pageCategories","coreBi","pages/panel/getPages"],function(M,n,k,D,r,N){"use strict";var p="quick_navigation",t="RECENTLY-",w=function(e,t){return 0<t&&{title:n.translate(e.title)}},O=function(e){return M.flatMap(e,function(e){var t=e.title,n=e.pagesData,a=e.biCategory;return[{title:t}].concat(_toConsumableArray(M.map(n,function(e){return{id:e.id,title:e.label,biCategory:a}})))})},V=function t(e,n,a){var i=D.MENUS.getBiCategory(n);if(!M.isEmpty(e.items)){var s=M(e.items).flatMap(function(e){return t(e,n,!0)}).compact().value();if(!M.isEmpty(s))return[{id:M.get(e.pageData,"id",e.id),title:M.get(e.pageData,"title",e.label),isFolder:e.type.isDropdown,isLink:e.type.isLink,biCategory:i}].concat(_toConsumableArray(s))}return e.type.isPage?{id:e.pageData.id,title:e.pageData.title,isNested:a,biCategory:i}:null},a=function(e){return M.startsWith(e,t)},c=function(e){return a(e)?M.trimStart(e,t):e},g=function(e){return""+(a(e)?"":t)+e},e=function(e,t,n){var a,i,s,o,r,p,l,u,d,c=n.editorAPI,g=c.dsRead.pages.getPagesData(),m=c.dsRead.siteMembers.getCustomSignupPageId(),f=N.popups(c),P=M.filter(f,function(e){return!e.managingAppDefId}),b=m?M.filter(f,function(e){return"5f4fa4f1-5afd-4ac0-8a85-e5ac1d2b9b7d"===e.managingAppDefId}):[],y=N.routers(c),I=N.pagesManagedByApps(c,g,!1),h=(a=I,M.flatMap(a,function(e){var t=e.title,n=e.pagesData,a=e.biCategory;return n?[{title:t}].concat(_toConsumableArray(M.map(n,function(e){return{id:e.id,title:e.title,biCategory:a}}))):[]})),_=O(M.filter(y,"isSpecial")),A=O(M.reject(y,"isSpecial")),v=(i=c,s=g,M.flatMap(N.tpas(i,s),function(e){var t=e.title,n=e.pagesData;return[{title:t}].concat(_toConsumableArray(n))})),S=M.flatMap([P,b,_,A,v,h]).length,C=N.menus(c,g,!0),T=(o=C,M.flatMap(o,function(e){var t=e.id,n=e.title,a=e.menuItems,i=M(a).flatMap(function(e){return V(e,t)}).compact().value();if(!M.isEmpty(i))return[{title:n}].concat(_toConsumableArray(i))})),E=T.length-C.length,R=(r=c,S+E<18?[]:k.editorPlugins.userPreferences.selectors.getSiteUserPreferences("recentlyViewedPages")(r.store.getState())||[]);return p=T,l=S,u=R.length,d=C.length,l+u===0&&1===d&&(p[0]=null),M.compact([w({title:"NewPages_QuickNav_Pages_Recently_Viewed_Label"},R.length)].concat(_toConsumableArray(R),_toConsumableArray(T),_toConsumableArray(_),_toConsumableArray(h),_toConsumableArray(A),_toConsumableArray(v),[w(D.POPUPS,P.length)],_toConsumableArray(P),[w(D.SIGNUP,b.length)],_toConsumableArray(b)))},i=function(e,t,n){var a=n.editorAPI;a.panelManager.openPanel("pages.pagesPanel"),a.bi.event(r.events.pages.click_on_pages_panel_open,{origin:p})},s=function(e,t,n){return n.editorAPI.panelManager.closeAllPanels()};return{mapStateToProps:function(e){var t,n,a,i=e.editorAPI;return{selectedItem:(n=i,a=M.invoke(n,"dsRead.pages.getFocusedPageId"),a?{id:a,title:n.pages.getPageTitle(a),isHomePage:n.pages.isHomePage(a)}:null),closePopupPage:i.pages.popupPages.close,isPopupOpened:!!M.invoke(i,"dsRead.pages.popupPages.isPopupOpened"),backToAdiTooltipVisibility:(t=i,k.editorPlugins.topBar.selectors.getBackToAdiTooltipVisibility(t.store.getState()))}},mapDispatchToProps:function(a){return{getItems:function(){return a(e)},onClickItem:function(e){var s,o,t=e.id,n=e.biCategory;return a((s=t,o=n,function(e,t,n){var a=n.editorAPI,i=c(s);a.pages.navigateTo(i),a.bi.event(r.events.pages.navigate_to_page,{page_id:i,panel_name:p,category:o})}))},onClickManagePages:function(){return a(i)},biEvent:function(e,t){a(k.editorPlugins.bi.actions.event(e,t))},closeAllPanels:function(){return a(s)},updateRecentlyViewedPages:function(e){return a((d=e,function(e,t,n){var a=n.editorAPI;if(!d)return[];var i=d.id,s=d.title,o=d.isHomePage,r=M.cloneDeep(k.editorPlugins.userPreferences.selectors.getSiteUserPreferences("recentlyViewedPages")(a.store.getState()))||[];if(M.isEmpty(r)&&o)return[];var p=M.find(r,{id:g(i)}),l=Date.now();p?(p.time=l,p.title=s):r.push({time:l,id:g(i),title:s,biCategory:"recently_viewed"});var u=M(r).sortBy("time").filter(function(e){return a.pages.isPageExist(c(e.id))}).reverse().slice(0,3).value();a.store.dispatch(k.editorPlugins.userPreferences.actions.setSiteUserPreferences("recentlyViewedPages",u))}));var d},closeBackToAdiTooltip:function(){return a(k.editorPlugins.topBarTooltip.actions.closeBackToAdiTooltip())}}},PANEL_NAME:p}}),define("pages/quickNavigation/quickNavigation.rt",["react","lodash","baseUILib","util","santa-editor-symbols"],function(e,t,n,a,i){"use strict";return function(){return e.createElement("div",{className:"quick-navigation-pp",onMouseEnter:this.handleMouseEnter,onClick:this.onClick},e.createElement("div",{className:"exit-lightbox "+t({"active-exit-lightbox":this.props.isPopupOpened}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onClick:this.props.closePopupPage,key:"exit-lightbox"},e.createElement("span",{},a.translate("PopUps_TopBar_Exit")),e.createElement(i.symbol,{name:"zoomClose"})),e.createElement(n.DropDown,{value:this.getSelectedItemId(),onChange:this.handleClickItem,shouldTranslate:!1,searchBox:!0,onToggle:this.handleToggle,forceOpen:this.state.forceOpen,dataLabel:a.translate("NewPages_QuickNav_Label"),optionsContainerClassName:"dropdown-quick-navigation-pp"},this.getContent(),e.createElement(n.DropDownStickyFooter,{closeOnClick:!0},e.createElement(n.Button,{className:"btn-text",onClick:this.props.onClickManagePages},e.createElement("span",{className:"manage-pages-text"},a.translate("NewPages_QuickNav_Pages_Manage_Button"))))),e.createElement(n.Bubble,{className:"bubble-quick-navigation-pp",arrowAlignment:"top",arrowStyle:{position:"relative",left:"104px",top:"-97px"},contentStyle:this.bubbleContentStyle},e.createElement(n.TextLabel,{value:"TOPBAR_NEWPAGES_TOOLTIP_TITLE",type:"T03",className:"bubble-title-quick-navigation-pp",enableEllipsis:!1}),e.createElement(n.TextLabel,{value:"TOPBAR_NEWPAGES_TOOLTIP_BODY",enableEllipsis:!1})))}}),define("pages/quickNavigation/quickNavigation",["lodash","react","prop-types","util","baseUILib","pages/quickNavigation/quickNavigationMapper","coreBi","pages/quickNavigation/quickNavigation.rt"],function(i,s,e,t,o,a,r,p){"use strict";var n=t.hoc,l=n.connect,u=n.renderWhenMutated,d=n.STORES.EDITOR_API,c=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={items:e.selectedItem?t.props.getItems():[],forceOpen:!1},t.handleMouseEnter=function(){t.setState({items:t.props.getItems()}),t.props.backToAdiTooltipVisibility&&t.props.closeBackToAdiTooltip()},t.getContent=function(){return i.flatMap(t.state.items,function(e){return e.id?(t=e,s.createElement(o.DropDownOption,{value:t.id,label:t.title,shouldTranslate:!1,disabled:t.isFolder||t.isLink,optionWrapperClassName:(n=t,n.isNested?"nested-page":n.isFolder?"folder":n.isLink?"link":void 0),key:t.id})):(a=e.title,[s.createElement(o.SectionDivider,{className:"upper",key:i.uniqueId("section-divider")},i.toUpper(a))]);var t,n,a})},t.getSelectedItemId=function(){return t.props.selectedItem?t.props.selectedItem.id:null},t.handleClickItem=function(e){return t.props.onClickItem(i.find(t.state.items,{id:e}))},t.onClick=function(){t.props.biEvent(r.events.topbar.top_bar_click,{category:a.PANEL_NAME}),t.props.biEvent(r.events.pages.quick_navigation_clicked,{origin:"top_bar"})},t.handleToggle=function(e){e?t.props.closeAllPanels():t.setState({forceOpen:!1})},t}return _inherits(n,s.Component),_createClass(n,[{key:"componentWillReceiveProps",value:function(e){var t,n,a,i,s;t=this.props.selectedItem,n=e.selectedItem,a=!t&&n,i=t&&t.id!==n.id,s=t&&t.id===n.id&&t.title!==n.title,(a||i||s)&&(this.props.updateRecentlyViewedPages(e.selectedItem),this.setState({items:e.getItems()})),e.forceOpenEventCounter>this.props.forceOpenEventCounter&&this.setState({items:e.getItems(),forceOpen:!0})}},{key:"render",value:function(){return p.call(this)}}]),n}();c.displayName="QuickNavigation",c.propTypes={onClickItem:e.func.isRequired,onClickManagePages:e.func.isRequired,getItems:e.func.isRequired,closePopupPage:e.func,isPopupOpened:e.bool,selectedItem:e.shape({id:e.string.isRequired,title:e.string.isRequired,isHomePage:e.bool.isRequired}),updateRecentlyViewedPages:e.func.isRequired,forceOpenEventCounter:e.number,biEvent:e.func,closeAllPanels:e.func,backToAdiTooltipVisibility:e.bool,closeBackToAdiTooltip:e.func,currentPageId:e.string};var g=l(d,a.mapStateToProps,a.mapDispatchToProps)(u(c));return g.pure=c,g}),define("pages",["pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/getPages","pages/panel/pagesPanel","pages/quickNavigation/quickNavigation"],function(e,t,n,a){"use strict";return{getActions:e,getPages:t,pagesPanel:n,quickNavigation:a}});
//# sourceMappingURL=pages.min.js.map