!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports["platformUtils-bundle"]=t(require("lodash")):e["platformUtils-bundle"]=t(e.lodash)}(this,(function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(t,n){t.exports=e},function(e,t,n){"use strict";t.__esModule=!0,t.types=t.errors=t.parseMediaItemUri=t.createMediaItemUri=t.isValidMediaItemUri=void 0;var o,r=n(0),i=(o=r)&&o.__esModule?o:{default:o};var a={vector:function(e,t){return"wix:vector://v1/"+e+"/"+t},image:function(e,t,n,o,r){return"wix:image://v1/"+e+"/"+t+"#originWidth="+n+"&originHeight="+o+(r?"&watermark="+r:"")},document:function(e,t){return"wix:document://v1/"+e+"/"+t},video:function(e,t,n,o,r){return"wix:video://v1/"+e+"/"+n+"#posterUri="+t+"&posterWidth="+o+"&posterHeight="+r},audio:function(e,t,n){return"wix:audio://v1/"+e+"/"+t+"#duration="+n}},u={vector:/^wix:vector:\/\/v1\/([^\/]+)\/([^\/]*)$/,image:/^wix:image:\/\/v1\/([^\/]+)\/([^\/]+)#originWidth=([0-9]+)&originHeight=([0-9]+)(?:&watermark=([^\/]+))?$/,document:/^wix:document:\/\/v1\/([^\/]+)\/([^\/]+)$/,video:/^wix:video:\/\/v1\/([^\/]+)\/([^\/]+)#posterUri=([^\/]+)&posterWidth=([0-9]+)&posterHeight=([0-9]+)$/,audio:/^wix:audio:\/\/v1\/([^\/]+)\/([^\/]+)#duration=([0-9]+)$/,deprecated_video:/^wix:video:\/\/v1\/([^\/]+)\/([^\/]+)\/#posterUri=([^\/]+)&posterWidth=([0-9]+)&posterHeight=([0-9]+)$/,deprecated_image:/^image:\/\/v1\/([^\/]+)\/([0-9]+)_([0-9]+)\/([^\/]*)$/,deprecated_type:/^(image):/,type:/^wix:(\w+):/,splitExtension:/\.(?=[^.]+$)/,emptyTitle:/^_\./},l={vector:[u.vector],image:[u.image,u.deprecated_image],document:[u.document],video:[u.video,u.deprecated_video],audio:[u.audio]},s={IMAGE:"image",DOCUMENT:"document",VIDEO:"video",AUDIO:"audio",VECTOR:"vector"},d={empty_media_id:"empty_media_id",empty_poster_id:"empty_poster_id",bad_media_id:"bad_media_id",unknown_media_type:"unknown_media_type",missing_width_height:"missing_width_height",non_string_media_id:"non_string_media_id"};function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2].split(u.splitExtension),o=n[0],r=n[1],i=t.split(u.splitExtension),a=i[0],l=i[1],d="";switch(e){case s.IMAGE:d=(a||"_")+"."+(l||r);break;case s.DOCUMENT:d=(a||o)+"."+(l||r);break;case s.VIDEO:d=(a||"_")+(l?"."+l:"");break;case s.AUDIO:case s.VECTOR:d=(a||o)+"."+(l||r)}return encodeURI(d)}function p(e){return u.emptyTitle.test(e)?"":decodeURI(e)}t.isValidMediaItemUri=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=l[t];return i.default.some(n,(function(t){return t.test(e)}))},t.createMediaItemUri=function(e){var t=e.mediaId,n=e.type,o=e.title,r=e.width,i=e.height,u=e.posterId,l=e.watermark,p=e.duration;switch(n){case s.IMAGE:return function(e,t,n,o,r){if(!e)return{error:d.empty_media_id};if(isNaN(o)||isNaN(n))return{error:d.missing_width_height};var i=c(s.IMAGE,t,e);return{item:a.image(e,i,n,o,r)}}(t,o,r,i,l);case s.DOCUMENT:return function(e,t){if(!e)return{error:d.empty_media_id};var n=c(s.DOCUMENT,t,e);return{item:a.document(e,n)}}(t,o);case s.VECTOR:return function(e,t){if(!e)return{error:d.empty_media_id};var n=c(s.VECTOR,t,e);return{item:a.vector(e,n)}}(t,o);case s.VIDEO:return function(e,t,n,o,r){if(!e)return{error:d.empty_media_id};if(!r)return{error:d.empty_poster_id};if(isNaN(o)||isNaN(n))return{error:d.missing_width_height};e=e.replace("video/","");var i=c(s.VIDEO,t,e);return{item:a.video(e,r,i,n,o)}}(t,o,r,i,u);case s.AUDIO:return function(e,t,n){if(!e)return{error:d.empty_media_id};var o=c(s.AUDIO,t,e);return{item:a.audio(e,o,n)}}(t,o,p);default:return{error:d.unknown_media_type}}},t.parseMediaItemUri=function(){var e,t,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!i.default.isString(o))return{error:d.non_string_media_id};switch((o.match(u.type)||[])[1]){case s.IMAGE:return function(e){var t=e.match(u.image)||[],n=t[1],o=t[2],r=t[3],i=t[4],a=t[5],l=p(o);if(n){var c={type:s.IMAGE,mediaId:n,title:l,width:parseInt(r,10),height:parseInt(i,10)};return a&&(c.watermark=a),c}return{error:d.bad_media_id}}(o);case s.DOCUMENT:return e=o.match(u.document)||[],t=e[1],n=p(e[2]),t?{type:s.DOCUMENT,mediaId:t,title:n}:{error:d.bad_media_id};case s.VECTOR:return function(e){var t=e.match(u.vector)||[],n=t[1],o=p(t[2]);return n?{type:s.VECTOR,mediaId:n,title:o}:{error:d.bad_media_id}}(o);case s.VIDEO:return function(e){var t=u.deprecated_video.test(e)?u.deprecated_video:u.video,n=e.match(t)||[],o=n[1],r=n[2],i=n[3],a=n[4],l=n[5],c=p(r);return o&&i?{type:s.VIDEO,mediaId:o,posterId:i,width:parseInt(a,10),height:parseInt(l,10),title:c}:{error:d.bad_media_id}}(o);case s.AUDIO:return function(e){var t=e.match(u.audio)||[],n=t[1],o=t[2],r=t[3],i=p(o);return n?{type:s.AUDIO,mediaId:n,title:i,duration:parseInt(r,10)}:{error:d.bad_media_id}}(o);default:return(o.match(u.deprecated_type)||[])[1]?function(e){var t=e.match(u.deprecated_image)||[],n=t[1],o=t[2],r=t[3],i=p(t[4]);return n?{type:s.IMAGE,mediaId:n,title:i,width:parseInt(o,10),height:parseInt(r,10)}:{error:d.bad_media_id}}(o):{error:d.unknown_media_type}}},t.errors=d,t.types=s},function(e,t,n){"use strict";t.__esModule=!0,t.getAllCompsUnderRoot=function(e,t){for(var n=[t],o=0;o<n.length;o++){var r=i.default.get(e.components,[n[o],a])||[];n.push.apply(n,r)}return n.shift(),n},t.isTemplateComp=function(e,t){var n=function(t){return i.default.get(e,["components",t,"parent"])},o=function(t){return i.default.get(e,["components",a,"type"])===u},r=t,a=n(r);for(;a&&!o();)a=n(r=a);return o()&&i.default.includes(i.default.get(e,["components",a,"children"]),r)};var o,r=n(0),i=(o=r)&&o.__esModule?o:{default:o};var a="children",u="wysiwyg.viewer.components.Repeater"},function(e,t,n){"use strict";t.__esModule=!0;var o=n(16);t.default={items:{getAddedItems:o.getAddedItems,getRemovedItems:o.getRemovedItems,getTemplateCompsId:o.getTemplateCompIds},structure:{getUniqueDisplayedId:o.getUniqueDisplayedId,getOriginalId:o.getOriginalId,getItemId:o.getItemId,SPLITTED_DATA_TYPES:o.SPLITTED_DATA_TYPES}}},function(e,t,n){"use strict";t.__esModule=!0,t.MEDIA_PLAYER_DEFAULTS=t.BG_VIDEO_DEFAULTS=void 0,t.fixMediaTitleLength=p,t.getVideoBackgroundObject=function(e,t){var n=m(e,t);return i.default.assign(n,l)},t.getMediaPlayerVideoObject=function(e,t){var n=m(e,t);return i.default.assign(n,s)},t.getVideoPosterObject=function(e,t,n,o){return{type:"WixVideo",videoId:e,posterImageRef:{type:"Image",uri:t,width:n,height:o}}},t.getImageBackgroundObject=function(e,t){return{type:"Image",uri:e.fileName,title:p(e.title,d),description:t.path,width:e.width,height:e.height,artist:{name:e.vendor||"",id:e.reference||""}}};var o,r=n(0),i=(o=r)&&o.__esModule?o:{default:o};var a="...",u=3,l=t.BG_VIDEO_DEFAULTS={opacity:1,autoplay:!0,loop:!0,preload:"auto",mute:!0},s=t.MEDIA_PLAYER_DEFAULTS={opacity:1,preload:"auto"},d=100;function c(e){return e.replace(/^(.*[\/])/,"")}function p(e,t){if(e.length<=t)return e;var n=e.split(""),o=e.length-t+a.length,r=(e.lastIndexOf(".")>e.length-o-u?e.lastIndexOf("."):e.length-1)-o-u;return n.splice(r,o,a),n.join("")}function f(e){return i.default.map(e.image,(function(e){return c(e.url)}))}function g(e,t){return e[t]||e[i.default.camelCase(t)]}function m(e,t){var n,o,r=g(e,"file_input"),a=g(e,"file_output"),u=(n=e.fileUrl||e.file_name,(o=n.match(/(?:\/|^)([0-9a-fA-F_]+)(?:\/|$)/)).length>1?o[1]:""),l=p(e.title,d),s=function(e){var t=i.default.filter(e.video,{format:"mp4"}),n=i.default.find(e.storyboard,{format:"mp4"}),o=i.default.map(t,(function(e){return i.default.pick(e,["width","height","quality","url"])}));return n&&o.push({quality:"storyboard",width:n.width,height:n.height,url:n.url}),o}(a),m=function(e){var t=g(e,"adaptive_video");return i.default.map(t,(function(e){return{format:e.format,url:e.url}}))}(a),h=function(e){var t=[];return e.tags&&i.default.includes(e.tags,"_mp4_alpha")&&t.push("alpha"),i.default.isEmpty(t)?null:t}(e),y=i.default.head(a.image),v={type:"Image",width:y.width,height:y.height,uri:c(y.url),description:t.path?t.path:void 0},_={type:"WixVideo",title:l,videoId:u,duration:+(r.duration/1e3).toFixed(2),posterImageRef:v,generatedPosters:f(a),qualities:s,adaptiveVideo:m,artist:{name:e.vendor||"",id:e.reference||""},hasAudio:-1!==g(i.default.head(a.video),"audio_bitrate"),fps:i.default.get(i.default.head(a.video),"fps","").toString()};return h&&(_.mediaFeatures=h),_}},function(e,t,n){"use strict";t.__esModule=!0,t.videoTypes=void 0,t.getVideoUrl=function(e){if(e&&e.videoType&&e.videoId){var t=c(e.videoType,"getVideoUrl");return t&&t(e.videoId)||""}return""},t.getVideoDataFromUrl=function(e){var t=void 0;return i.default.forEach(d,(function(n,o){var r=c(o,"getVideoIdFromUrl"),a=r&&r(e);if(!i.default.isEmpty(a))return t={videoType:o,videoId:a},!1})),t};var o,r=n(0),i=(o=r)&&o.__esModule?o:{default:o},a=s(n(6)),u=s(n(7)),l=s(n(8));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var d={YOUTUBE:s(n(9)),VIMEO:l,DAILYMOTION:a,FACEBOOK:u};function c(e,t){return d[e.toUpperCase()]&&d[e][t]}t.videoTypes={YOUTUBE:"YOUTUBE",VIMEO:"VIMEO",DAILYMOTION:"DAILYMOTION",FACEBOOK:"FACEBOOK"}},function(e,t,n){"use strict";t.__esModule=!0,t.getVideoUrl=function(e){return"https://dailymotion.com/video/"+e},t.getVideoIdFromUrl=function(e){var t=/dailymotion\.com\/(?:video|playlist)\/([^_/]+)/gi.exec(e);if(t&&t.length&&t[1])return t[1]}},function(e,t,n){"use strict";t.__esModule=!0,t.getVideoUrl=function(e){return"https://www.facebook.com/"+e},t.getVideoIdFromUrl=function(e){var t=/facebook\.com\/(.+\/videos\/[A-Za-z0-9._%-]*)/gi.exec(e);if(t&&t.length&&t[1])return t[1]}},function(e,t,n){"use strict";t.__esModule=!0,t.getVideoUrl=function(e){return"https://vimeo.com/"+e},t.getVideoIdFromUrl=function(e){var t=/vimeo\.com\/(\d+)$/gi.exec(e);if(t&&t.length&&t[1])return t[1]}},function(e,t,n){"use strict";t.__esModule=!0,t.getVideoUrl=function(e){return"https://www.youtube.com/watch?v="+e},t.getVideoIdFromUrl=function(e){var t=/(?:youtube\.com\/watch[^\s]*[\?&]v=)([\w-]+)/g.exec(e)||/(?:youtu\.be\/)([\w-]+)/g.exec(e);if(t&&t.length&&t[1])return t[1]}},function(e,t,n){"use strict";t.__esModule=!0,t.loggingUtils=t.platformizedEndpointsUtils=t.componentsHooks=t.backgroundUtils=t.repeaterUtils=t.videoUrlsUtils=t.richTextUtils=t.uriUtils=t.mediaSrcHandler=t.mediaItemUtils=t.widgetUtils=t.linkUtils=t.typeUtils=t.RemoteModelInterface=t.RemoteGlobalsInterface=void 0;var o=n(11);Object.defineProperty(t,"RemoteGlobalsInterface",{enumerable:!0,get:function(){return o.RemoteGlobalsInterface}});var r=n(13);Object.defineProperty(t,"RemoteModelInterface",{enumerable:!0,get:function(){return r.RemoteModelInterface}});var i,a=w(n(4)),u=w(n(17)),l=w(n(20)),s=w(n(21)),d=w(n(22)),c=w(n(23)),p=w(n(5)),f=w(n(24)),g=w(n(1)),m=w(n(25)),h=n(26),y=n(3),v=(i=y)&&i.__esModule?i:{default:i},_=w(n(27)),I=w(n(31));function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.typeUtils=new h.TypeUtils(d);t.linkUtils=l,t.widgetUtils=f,t.mediaItemUtils=g,t.mediaSrcHandler=I,t.uriUtils=c,t.richTextUtils=s,t.videoUrlsUtils=p,t.repeaterUtils=v.default,t.backgroundUtils=a,t.componentsHooks=u,t.platformizedEndpointsUtils=_,t.loggingUtils=m},function(e,t,n){"use strict";t.__esModule=!0,t.RemoteGlobalsInterface=void 0;var o,r=n(12),i=n(0),a=(o=i)&&o.__esModule?o:{default:o};var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._globals=a.default.defaults(t,{navigation:{},sessionInfo:{},appsData:{},siteMemberData:{uid:null,permissions:null,onUserLogin:[]},multilingualInfo:{isEnabled:!1,currentLanguageCode:null,siteLanguages:[],onCurrentLanguageChange:[]},appStudioWidgetData:{isApplicationStudio:!1,onPropsChanged:[]},deviceType:null,isMobileFriendly:null,lightboxContext:void 0,contextId:null,siteRevision:null,routerData:null,regionalSettings:{locale:null,language:null,timezone:null,currency:null,browserLocale:null},seo:{isInSEO:void 0}}),this._globals.onInstanceChanged={},this._globals.onLocationChange=[]}return e.prototype.addRegionalSettings=function(e){this._globals.regionalSettings=e},e.prototype.addNavigation=function(e){var t=this,n=this._globals.navigation.currentPageId===e.currentPageId&&this._globals.navigation.tpaInnerRoute!==e.tpaInnerRoute;if(this._globals.navigation=e,n){var o=this._globals.onLocationChange;a.default.forEach(o,(function(e){return e({path:t.getLocation().path})}))}},e.prototype.addSiteMemberData=function(e){var t=e.uid&&e.uid!==this._globals.siteMemberData.uid;if(a.default.assign(this._globals.siteMemberData,e),t){var n=this._globals.siteMemberData.onUserLogin;a.default.forEach(n,(function(t){t(e)}))}},e.prototype.addAppsData=function(e){var t=this._globals.appsData;a.default.forEach(this._globals.onInstanceChanged,(function(n,o){var r=a.default.get(t,[o,"instance"]),i=a.default.get(e,[o,"instance"]);r!==i&&a.default.invokeMap(n,"call",null,{instance:i})})),this._globals.appsData=e},e.prototype.addOnLocationChangeCallback=function(e){this._globals.onLocationChange||(this._globals.onLocationChange=[]),this._globals.onLocationChange.push(e)},e.prototype.addOnUserLoginCallback=function(e){this._globals.siteMemberData.onUserLogin.push(e)},e.prototype.addSessionInfoProp=function(e){a.default.assign(this._globals.sessionInfo,e)},e.prototype.addSiteRevision=function(e){this._globals.siteRevision=e},e.prototype.addDeviceType=function(e){this._globals.deviceType=e},e.prototype.addIsMobileFriendly=function(e){this._globals.isMobileFriendly=e},e.prototype.addLightboxContext=function(e){this._globals.lightboxContext=e},e.prototype.addContextId=function(e){this._globals.contextId=e},e.prototype.addMultilingualInfo=function(e){var t=e.currentLanguageCode&&e.currentLanguageCode!==this._globals.multilingualInfo.currentLanguageCode;if(a.default.assign(this._globals.multilingualInfo,e),t){var n=this._globals.multilingualInfo.onCurrentLanguageChange;a.default.forEach(n,(function(t){t(e)}))}},e.prototype.addOnCurrentLanguageChangeCallback=function(e){this._globals.multilingualInfo.onCurrentLanguageChange.push(e)},e.prototype.addLivePreviewMode=function(e){this._globals.livePreviewMode=e},e.prototype.addRouterData=function(e){this._globals.routerData=e},e.prototype.getRouterData=function(e){if(!this._globals.routerData)return null;var t,n=a.default.get(this._globals.routerData,"routerDefinition.appDefinitionId");return t=a.default.isUndefined(e),"wix-code"===n&&t||e===n?a.default.cloneDeep(this._globals.routerData.routerData):null},e.prototype.getAppsData=function(){return a.default.cloneDeep(this._globals.appsData)},e.prototype.getDeviceType=function(){return this._globals.deviceType},e.prototype.getIsMobileFriendly=function(){return this._globals.isMobileFriendly},e.prototype.getLightboxContext=function(){return a.default.cloneDeep(this._globals.lightboxContext)},e.prototype.getContextId=function(){return this._globals.contextId},e.prototype.getAppData=function(e){return a.default.cloneDeep(a.default.get(this._globals.appsData,e))},e.prototype.getNavigationInfo=function(){return a.default.cloneDeep(this._globals.navigation)},e.prototype.getRegionalSettings=function(){return a.default.cloneDeep(this._globals.regionalSettings)},e.prototype.getSiteMemberData=function(e){var t=a.default.cloneDeep(this._globals.siteMemberData);if(e){var n=a.default.get(this._globals.appsData,e);n&&a.default.assign(t,a.default.pick(n,["instance","instanceId"]))}return t},e.prototype.getMultilingualInfo=function(){return a.default.cloneDeep(this._globals.multilingualInfo)},e.prototype.getCurrentLanguageCode=function(){return this._globals.multilingualInfo.currentLanguageCode},e.prototype.getSiteLanguages=function(){return this._globals.multilingualInfo.siteLanguages},e.prototype.getIsMultilingualEnabled=function(){return this._globals.multilingualInfo.isEnabled},e.prototype.getSessionInfo=function(){return a.default.cloneDeep(this._globals.sessionInfo)},e.prototype.getLivePreviewMode=function(){return this._globals.livePreviewMode},e.prototype.addIsApplicationStudio=function(e){this._globals.appStudioWidgetData.isApplicationStudio=e},e.prototype.getIsApplicationStudio=function(){return this._globals.appStudioWidgetData.isApplicationStudio},e.prototype.getSiteRevision=function(){return a.default.invoke(this._globals.siteRevision,"toString")||null},e.prototype.addOnWidgetPropsChangedCallback=function(e){this._globals.appStudioWidgetData.onPropsChanged.push(e)},e.prototype.triggerWidgetPropsChanged=function(e,t){a.default.forEach(this._globals.appStudioWidgetData.onPropsChanged,(function(n){n(a.default.cloneDeep(e),a.default.cloneDeep(t))}))},e.prototype.addOnInstanceChangedCallback=function(e,t){this._globals.onInstanceChanged[e]||(this._globals.onInstanceChanged[e]=[]),this._globals.onInstanceChanged[e].push(t)},e.prototype.getFullUrl=function(){return this._globals.navigation.currentPageFullUrl||this._globals.navigation.baseUrl},e.prototype.getLocation=function(){var e={};e.url=this.getFullUrl();var t=(0,r.parseUrl)(e.url),n=this._globals.navigation&&this._globals.navigation.routerDefinition?this._globals.navigation.routerDefinition.prefix:void 0,o=this._globals.navigation.baseUrl.indexOf("wixsite.com")>0,i=t.path.substring(1).split("/"),a=o?i.slice(1):i;return e.hash=t.hash,e.protocol=t.protocol,e.prefix=n,e.path=n&&a[0]===n?a.slice(1):a,e.query=t.query,e},e.prototype.isInSEO=function(){return this._globals.seo.isInSEO},e.prototype.toJson=function(){return this._globals},e}();t.RemoteGlobalsInterface=u},function(e,t,n){"use strict";t.__esModule=!0,t.parseUrl=function(e){if(!e)return{};var t=e.match(/((https?)\:\/\/)?([^\?\:\/#]+)(\:([0-9]+))?(\/[^\?\#]*)?(\?([^#]*))?(#.*)?/i),n=t[5]||"",o=t[8]?"?"+t[8]:"",r={full:e,protocol:t[2]||"http:",host:n?t[3]+":"+n:t[3],hostname:t[3],port:n,path:t[6]||"/",search:o,hash:t[9]||""};"#"!==r.hash&&"#!"!==r.hash||(r.hash="");return r.query=function(e){var t=/([^&=]+)=([^&]*)/g,n=void 0,o={};for(;null!==(n=t.exec(e));){var r=decodeURIComponent(n[1]),a=decodeURIComponent(n[2]);o[r]?i.default.isArray(o[r])?o[r].push(a):o[r]=[o[r],a]:o[r]=a}return o}(t[8]),r};var o,r=n(0),i=(o=r)&&o.__esModule?o:{default:o}},function(e,t,n){"use strict";t.__esModule=!0,t.RemoteModelInterface=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(0)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),a=n(14),u=n(15),l=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}var d="data",c="fullData",p="design",f="state",g="type",m="props",h="parent",y="events",v="layout",_="behavior",I="publicAPI",w="isDisplayed",b="isGhost",C="style",D="id",k="children",S="displayedOnlyComponents",E="displayedRoot",T="GLOBAL_SCOPE";t.RemoteModelInterface=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._model=r.default.defaults(t,{components:{},connections:{},componentsScopes:{},siteStructure:{},pageData:{},eventHandlers:{},EventTypes:{},appStudioWidgetData:{properties:{}},scopesHierarchy:[{type:T,id:T,additionalData:{}}],renderType:"bolt",appApis:{},seo:{title:"",structuredData:[],metaTags:[],links:[],statusCode:""}}),this._onUpdateCallback=n;var i=r.default.get(o,"_hooksManager"),a=r.default.get(o,"_transaction");this._hooksManager=i||new u.HooksManager,this._transaction=a||{_onTransaction:!1,_transactionData:{}},this.controllerId=null}return e.prototype.addComponent=function(e,t,n){if(n)return B.call(this,e,t);var o=O();for(var r in o)o[r]=t[r]||o[r];o[h]=t[h],o[g]=t[g],o[D]=t[D],o[E]=t[E],this._model.components[e]=o,this._model.componentsScopes[e]=T},e.prototype.addSiteStructure=function(e){this._model.siteStructure=e},e.prototype.addPageData=function(e){this._model.pageData=e},e.prototype.addConnections=function(e){r.default.defaultsDeep(this._model.connections,e)},e.prototype.resetComponentsScope=function(){var e=this;for(var t in this._model.components){this._model.components[t].displayedOnlyComponents.forEach((function(t){return e._model.componentsScopes[t]=null}))}},e.prototype.addEventTypes=function(e){this._model.EventTypes=e},e.prototype.getComp=function(e){return r.default.cloneDeep(r.default.get(this._model.components,e))},e.prototype.getState=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,f]))},e.prototype.getData=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,d]))},e.prototype.getStyle=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,C]))},e.prototype.getDesign=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,p]))},e.prototype.getType=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,g]))},e.prototype.getProps=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,m]))},e.prototype.getEvents=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,y]))},e.prototype.getLayout=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,v]))},e.prototype.getId=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,D]))},e.prototype.getEventTypes=function(){return r.default.cloneDeep(this._model.EventTypes)},e.prototype.isLivePreviewMode=function(){return this.livePreviewMode},e.prototype.getPublicAPI=function(e){var t=r.default.get(this._model.components,[e,I]);return r.default.isFunction(t)?t:r.default.cloneDeep(t)},e.prototype.getCallbackById=function(e,t){var n=this._model.eventHandlers[e];return t?n:r.default.get(n,"callback")},e.prototype.getParent=function(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,h]))},e.prototype.getChildren=function(e){return r.default.clone(r.default.get(this._model.components,[e,k]))},e.prototype.getSiteStructure=function(){return r.default.cloneDeep(this._model.siteStructure)},e.prototype.getPageData=function(){return r.default.cloneDeep(this._model.pageData)},e.prototype.getFullDataWithOverrides=function(e){return r.default.defaults(this.getData(e),A.call(this,e))},e.prototype.isGhostComponent=function(e){return r.default.get(this._model.components,[e,b])},e.prototype.jsonWithoutWixCodeComps=function(){var e=(0,r.default)(this._model.components).toPairs().filter((function(e){var t=e[1];return r.default.get(t,"data.applicationId")})).map((function(e){return e[0]})).value();return r.default.defaults({components:r.default.pick(this._model.components,e)},this._model)},e.prototype.cleanModelForLivePreview=function(){(0,r.default)(this._model.components).filter(["type","wysiwyg.viewer.components.Repeater"]).map("data").forEach((function(e){r.default.isEmpty(e.items)||((0,a.wSpyLog)("livepreview",["cleaning RMI repeater items",e.items]),e.items=[])}))},e.prototype.getCurrentScope=function(){return r.default.clone(r.default.get(this._model.scopesHierarchy,0))},e.prototype.getAppPublicAPI=function(e){return r.default.get(this._model.appApis,e)},e.prototype.setDataWithoutUpdate=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];U.call(this,e,d,t,n)},e.prototype.setData=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];U.call(this,e,d,t,n,this._onUpdateCallback)},e.prototype.setStyle=function(e,t,n){var o=this,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];U.call(this,e,C,t,r,(function(e){var t=e.compId,r=e.type,i=e.data;o._onUpdateCallback.call(o,{compId:t,type:r,data:i,appDefinitionId:o.getAppDefinitionId(),controllerId:o.controllerId,callback:n})}))},e.prototype.setDesign=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];U.call(this,e,p,t,n,this._onUpdateCallback)},e.prototype.setProps=function(e,t,n){var o=this,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];U.call(this,e,m,t,r,(function(e){var t=e.compId,r=e.type,i=e.data;t&&r&&i&&o._onUpdateCallback.call(o,{compId:t,type:r,data:i,appDefinitionId:o.getAppDefinitionId(),controllerId:o.controllerId,callback:n})}))},e.prototype.setLayout=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];U.call(this,e,v,t,n,this._onUpdateCallback)},e.prototype.setPublicAPI=function(e,t){var n=r.default.get(this._model.components,e);n&&(n[I]=t)},e.prototype.executeCompBehavior=function(e,t,n,o){P.call(this,"comp",t,n,e,o)},e.prototype.executeAnimation=function(e,t,n,o){P.call(this,"animation",t,n,e,o)},e.prototype.setUpdateCallback=function(e){this._onUpdateCallback=e},e.prototype.registerEvent=function(e,t,n,o,i){if(!this.isGhostComponent(t)&&!this.isLivePreviewMode()){var a=void 0,u={contextId:e,eventType:n,callbackId:a=r.default.isFunction(i)?this.registerEventCallback({callback:i,contextId:e,controllerId:o}):i},l=r.default.get(this._model,["components",t]);if(void 0!==l){if(this._hooksManager.executeHooksAndUpdateValue(this,"registerEvent",l.type,t,[e,n,o,a]),l.events.push({eventType:n,callbackId:a}),this._transaction._onTransaction)return void x.call(this,t,"registerEvent",u);r.default.isFunction(this._onUpdateCallback)&&this._onUpdateCallback({compId:t,type:"registerEvent",data:u,appDefinitionId:this.getAppDefinitionId(),controllerId:this.controllerId})}}},e.prototype.getEventCallbackIds=function(e,t){var n=r.default.get(this._model,["components",e]);if(void 0!==n){var o=r.default.filter(n.events,{eventType:t});return r.default.map(o,"callbackId")}},e.prototype.toJson=function(){return this._model},e.prototype.setRenderType=function(e){this._model.renderType=e},e.prototype.setAppPublicAPI=function(e,t){this._model.appApis[e]=t},e.prototype.getComponents=function(){var e={};for(var t in this._model.components)i.isTemplateComp(this._model,t)||(e[t]=this.getComp(t));return e},e.prototype.getCompToTypeMap=function(){var e={};for(var t in this._model.components)i.isTemplateComp(this._model,t)||(e[t]=this.getType(t));return e},e.prototype.getScopedRMI=function(e){var t=new this.constructor(this._model,this._onUpdateCallback,{_hooksManager:this._hooksManager,_transaction:this._transaction});return t.controllerId=e,t.getCompIdsFromRole=t.getCompIdsFromRole.bind(t,e),t.getCompIdsFromType=t.getCompIdsFromType.bind(t,e),t.getAppDefinitionId=t.getAppDefinitionId.bind(t,e),t.getAllCompIdsInScope=t.getAllCompIdsInScope.bind(t,e),t.getConfig=t.getConfig.bind(t,e),t},e.prototype.getNestedScopedRMI=function(e){return new this.constructor(e||this._model,this._onUpdateCallback,{_hooksManager:this._hooksManager,_transaction:this._transaction})},e.prototype.getCompIdsFromType=function(e,t,n){var o=r.default.get(this._model.connections,e);return R.call(this,o,e,t,n)},e.prototype.getCompIdsFromRole=function(e,t,n){var o=r.default.get(this._model.connections,[e,t]);return L.call(this,o,e,t,n)},e.prototype.getAllCompIdsInScope=function(e){return r.default.reduce(r.default.get(this._model.connections,[e]),(function(e,t){return r.default.map(r.default.keys(t),(function(t){return e.push(t)})),e}),[])},e.prototype.getConfig=function(e,t,n,o){var i=r.default.get(this._model.connections,[e,n]),a=M.call(this,o);return i&&i.hasOwnProperty(t)&&r.default.includes(a,r.default.get(this._model.componentsScopes,t))?i[t]:{}},e.prototype.updateModel=function(e){for(var t in e){var n=O(),o=r.default.get(this._model.components,t),i=e[t];if(o)for(var a in i)r.default.has(o,a)&&(r.default.isObject(o[a])?i[a]?r.default.assign(o[a],i[a]):o[a]=n[a]:o[a]=i[a])}},e.prototype.getScopedRMIByCompId=function(e){var t=this.getRepeaterItemContext(e);if(r.default.isEmpty(t))return this;var n=t.displayedRoot,o=t.itemId;return this.getScopedRMIForRepeaterItem(n,o)},e.prototype.getScopedRMIForRepeaterItem=function(e,t){var n=r.default.clone(this._model),o=i.getAllCompsUnderRoot(n,e),a=o.map((function(e){return l.default.structure.getUniqueDisplayedId(e,t)}));return n.scopesHierarchy=r.default.clone(n.scopesHierarchy),n.scopesHierarchy.unshift({type:"COMPONENT_SCOPE",id:e,compId:e,additionalData:{itemId:t}}),n.componentsScopes=r.default.clone(n.componentsScopes),o.forEach((function(e){return n.componentsScopes[e]=null})),a.forEach((function(t){return n.componentsScopes[t]=e})),this.getNestedScopedRMI(n)},e.prototype.getRepeaterItemContext=function(e){var t=r.default.get(this._model.components,[e,E]);return t?{displayedRoot:t,itemId:l.default.structure.getItemId(e)}:{}},e.prototype.getScopeByCompId=function(e){var t=this.getRepeaterItemContext(e),n=t.displayedRoot,o=t.itemId;return n?{type:"COMPONENT_SCOPE",id:n,compId:n,additionalData:{itemId:o}}:{type:T,id:T,additionalData:{}}},e.prototype.isRepeaterScope=function(e){return"COMPONENT_SCOPE"===r.default.get(e,"type")&&!r.default.isEmpty(r.default.get(e,"additionalData.itemId"))},e.prototype.startTransaction=function(){this._transaction._onTransaction=!0},e.prototype.endTransaction=function(){this._onUpdateCallback&&!r.default.isEmpty(this._transaction._transactionData)&&this._onUpdateCallback({type:"executeBatch",data:this._transaction._transactionData,appDefinitionId:this.getAppDefinitionId(),controllerId:this.controllerId}),this._transaction._onTransaction=!1,this._transaction._transactionData={}},e.prototype.setBatchData=function(e){var t=this;r.default.forEach(e,(function(e,n){r.default.forEach(e,(function(e,o){switch(o){case"registerEvent":r.default.forEach(e,(function(e){t.registerEvent.call(t,e.contextId,n,e.eventType,e.controllerId,e.callbackId)}));break;default:var i="set"+r.default.startCase(o);t[i].call(t,n,e)}}))}))},e.prototype.registerHook=function(e,t,n){this._hooksManager.registerHook(e,t,n)},e.prototype.getHooks=function(){return this._hooksManager.HOOKS},e.prototype.updateWidgetProperties=function(e){this._model.appStudioWidgetData.properties=e},e.prototype.getWidgetProperties=function(){return this._model.appStudioWidgetData.properties},e.prototype.getAppDefinitionId=function(e){var t=this.getCompIdByDataQuery(e);return r.default.get(this._model,["components",t,"data","applicationId"])},e.prototype.getCompIdByDataQuery=function(e){return r.default.findKey(this._model.components,[c+"."+D,e])},e.prototype.registerEventCallback=function(e){var t=e.callback,n=e.contextId,o=e.controllerId,i=e.overrideCallbackId;if(r.default.isFunction(t)){var a=i||function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}();return this._model.eventHandlers[a]={callback:t,contextId:n,controllerId:o},a}},e.prototype.isBolt=function(){return"bolt"===this._model.renderType},o(e,[{key:"seoTitle",get:function(){return this._model.seo.title},set:function(e){this._model.seo.title=e}},{key:"seoStructuredData",get:function(){return r.default.cloneDeep(this._model.seo.structuredData)},set:function(e){this._model.seo.structuredData=e}},{key:"seoMetaTags",get:function(){return r.default.cloneDeep(this._model.seo.metaTags)},set:function(e){this._model.seo.metaTags=e}},{key:"seoLinks",get:function(){return r.default.cloneDeep(this._model.seo.links)},set:function(e){this._model.seo.links=e}},{key:"seoStatusCode",get:function(){return this._model.seo.statusCode},set:function(e){this._model.seo.statusCode=e}}]),e}();function M(e){return e?r.default.get(this._model.scopesHierarchy,"0.id"):r.default.map(this._model.scopesHierarchy,(function(e){return r.default.get(e,"id")}))}function O(){var e;return(e={})[h]=null,e[f]={},e[g]=null,e[d]={},e[c]={},e[p]={},e[m]={},e[v]={},e[y]=[],e[w]=!1,e[b]=!1,e[D]=null,e[I]={},e[C]={},e[k]=[],e[S]=[],e[E]=null,e}function A(e){return r.default.cloneDeep(r.default.get(this._model.components,[e,c]))}function P(e,t,n,o,i){if(!this.isGhostComponent(o)){var a=r.default.get(n,"requiresDom",{compId:o}),u={type:e,name:t,targetId:o,requiresDom:a,params:n=a?n:r.default.omit(n,["requiresDom"])};this._onUpdateCallback&&this._onUpdateCallback({compId:o,type:_,data:u,appDefinitionId:this.getAppDefinitionId(),controllerId:this.controllerId,callback:i})}}function U(e,t,n,o,i){var a=r.default.get(this._model,["components",e]);if(a){if(this._hooksManager.executeHooksAndUpdateValue(this,t,a.type,e,[n,i]),a[w]){var u=a[t],l=r.default.defaults({},n,u);if(this.isBolt()&&o&&r.default.isEqual(l,u))return;this._model.components[e][t]=l}this.isBolt()&&this.isGhostComponent(e)||i&&(this._transaction._onTransaction?x.call(this,e,t,n):i({compId:e,type:t,data:n,appDefinitionId:this.getAppDefinitionId(),controllerId:this.controllerId}))}}function x(e,t,n){var o=this._transaction._transactionData;if(o[e]||(o[e]={}),"registerEvent"===t)return o[e][t]||(o[e][t]=[]),void o[e][t].push(n);o[e][t]||(o[e][t]={}),r.default.assign(o[e][t],n)}function R(e,t,n,o){var i=r.default.flatMap(e,Object.keys),a=[],u=M.call(this,o);return i.forEach((function(e){this.getType(e)===n&&r.default.includes(u,r.default.get(this._model.componentsScopes,e))&&a.push(e)}),this),a}function L(e,t,n,o){var i=this,a=M.call(this,o);return(e?Object.keys(e):[]).filter((function(e){return r.default.includes(a,r.default.get(i._model.componentsScopes,e))}))}function B(e,t){var n=r.default.cloneDeep(t);n[b]=!0,n[f]={},this._model.components[e]=n,this._model.componentsScopes[e]=T}},function(e,t,n){"use strict";t.__esModule=!0,t.wSpyLog=void 0;var o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),a=(o=i)&&o.__esModule?o:{default:o};t.wSpyLog=function(){try{for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];"object"===("undefined"==typeof window?"undefined":r(window))?a.default.invoke.apply(a.default,[window,"parent.wSpy.log"].concat(t)):"object"===("undefined"==typeof self?"undefined":r(self))&&self.wSpy&&a.default.invoke.apply(a.default,[self,"wSpy.log"].concat(t))}catch(e){}}},function(e,t,n){"use strict";t.__esModule=!0,t.HooksManager=void 0;var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(0),a=(o=i)&&o.__esModule?o:{default:o};var u={all:"all",data:"data"};t.HooksManager=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hooks={}}return e.prototype.validateHookName=function(e){if(!u[e])throw"Invalid Hook Name "+e},e.prototype.unregisterAllHooks=function(){this._hooks={}},e.prototype.unregisterHooks=function(e){var t=this;a.default.forEach(e,(function(e){return delete t._hooks[e]}))},e.prototype.executeHooksAndUpdateValue=function(e,t,n,o,r){function i(i){var u=this;if(i){var l=i[n]||[],s=i["*"]||[];a.default.forEach(l.concat(s),(function(n){n.apply(u,[e,t,o].concat(r||[]))}))}}var l=this._hooks[t],s=this._hooks[u.all];i(l),i(s)},e.prototype.registerHook=function(e,t,n){if(this.validateHookName(e),n){var o=this._hooks[e];o||(this._hooks[e]=o={});var r=o[t=t||"*"];r||(o[t]=r=[]),r.push(n)}},r(e,[{key:"HOOKS",get:function(){return u}}]),e}()},function(e,t,n){"use strict";t.__esModule=!0,t.SPLITTED_DATA_TYPES=void 0,t.getAddedItems=function(e,t){var n=l(t),o=l(e),r=i.default.difference(n,o);return s(t,r)},t.getRemovedItems=function(e,t){var n=l(t),o=l(e),r=i.default.difference(o,n);return s(e,r)},t.getUniqueDisplayedId=d,t.getOriginalId=function(e){if(!e)return;return e.split(u)[0]},t.getItemId=function(e){if(!e)return;return e.split(u)[1]},t.getTemplateCompIds=function(e,t,n){var o=(0,a.getAllCompsUnderRoot)(i.default.get(e,"_model"),t),r=i.default.compact(i.default.map(n,(function(e){return i.default.get(e,"item._id")})));return i.default.reduce(r,(function(e,t){return e.concat(i.default.map(o,(function(e){return d(e,t)})))}),[])};var o,r=n(0),i=(o=r)&&o.__esModule?o:{default:o},a=n(2);var u="__";t.SPLITTED_DATA_TYPES=["data","design"];function l(e){return i.default.map(e,(function(e){return i.default.isString(e)?e:e._id}))}function s(e,t){var n=i.default.map(e,(function(e){return i.default.isString(e)?{_id:e}:e}));return i.default.reduce(n,(function(e,n,o){return i.default.includes(t,n._id)&&e.push({item:n,index:o}),e}),[])}function d(e,t){return e+u+t}},function(e,t,n){"use strict";t.__esModule=!0,t.repeaters=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(18));t.repeaters=o},function(e,t,n){"use strict";t.__esModule=!0,t.updateRepeaterItems=function(e,t,n,u){if(u.items){var l=r.getAllCompsUnderRoot(e._model,n),s=o.default.get(e._model.components,[n,"data"]),d=i.default.items.getAddedItems(s.items,u.items);!function(e,t,n,r){(function(e,t,n){var r=o.default.get(e,"connections"),a=o.default.keys(r);o.default.forEach(a,(function(e){var a=o.default.keys(o.default.get(r,e));o.default.forEach(a,(function(a){var u=o.default.keys(o.default.get(r,[e,a]));o.default.forEach(u,(function(u){if(o.default.includes(t,u)){var l=o.default.get(r,[e,a,u]);o.default.forEach(n,(function(t){var n=i.default.structure.getUniqueDisplayedId(u,t);o.default.set(r,[e,a,n],o.default.cloneDeep(l))}))}}))}))}))})(e,t,n),function(e,t,n,r){o.default.forEach(t,(function(t){o.default.forEach(n,(function(n){var u=i.default.structure.getUniqueDisplayedId(t,n),l=e.components[t],s=(0,a.default)(l);s.displayedOnlyComponents=[],s.children=o.default.map(l.children,(function(e){return i.default.structure.getUniqueDisplayedId(e,n)})),s.parent=l.parent===r?r:i.default.structure.getUniqueDisplayedId(l.parent,n),s.displayedRoot=r,s.isDisplayed=!!o.default.get(e.components[r],"isDisplayed"),o.default.forEach(i.default.structure.SPLITTED_DATA_TYPES,(function(e){var t=s[e];t.id&&(t.id=i.default.structure.getUniqueDisplayedId(s[e].id,n),o.default.forEach(t,(function(e,r){o.default.isObject(e)&&e.id&&(t[r].id=i.default.structure.getUniqueDisplayedId(t[r].id,n))})))})),e.components[u]=s}))}))}(e,t,n,r),function(e,t,n){o.default.forEach(t,(function(t){o.default.forEach(n,(function(n){var o=i.default.structure.getUniqueDisplayedId(t,n);e.componentsScopes[o]=null}))}))}(e,t,n)}(e._model,l,o.default.map(d,"item._id"),n);var c=i.default.items.getRemovedItems(s.items,u.items);!function(e,t,n){(function(e,t,n){var r=o.default.get(e,"connections"),a=o.default.keys(r);o.default.forEach(a,(function(e){var a=o.default.keys(o.default.get(r,[e]));o.default.forEach(a,(function(a){var u=o.default.keys(o.default.get(r,[e,a]));o.default.forEach(u,(function(u){var l=i.default.structure.getItemId(u),s=i.default.structure.getOriginalId(u);l&&o.default.includes(n,l)&&o.default.includes(t,s)&&delete r[e][a][u]}))}))}))})(e,t,n),function(e,t,n){o.default.forEach(t,(function(t){o.default.forEach(n,(function(n){var o=i.default.structure.getUniqueDisplayedId(t,n);delete e.componentsScopes[o]}))}))}(e,t,n),function(e,t,n){o.default.forEach(t,(function(t){o.default.forEach(n,(function(n){var o=i.default.structure.getUniqueDisplayedId(t,n);delete e.components[o]}))}))}(e,t,n)}(e._model,l,o.default.map(c,"item._id")),o.default.forEach(l,(function(t){e._model.components[t].displayedOnlyComponents=o.default.map(u.items,(function(e){return i.default.structure.getUniqueDisplayedId(t,e)}))}))}},t.syncRepeaterItemData=function(e,t,n){var i=arguments,a=e._model;if("registerEvent"!==t&&r.isTemplateComp(a,n)){var u=o.default.get(a,["components",n]),l=arguments[3];a.components[n][t]=o.default.defaults({},l,u[t])}var s=o.default.get(e._model.components,[n,"displayedOnlyComponents"]);if(!o.default.isEmpty(s)){var d="set"+o.default.startCase(t);if("registerEvent"===t)return d="registerEvent",void o.default.forEach(s,(function(t){var n=[].concat(Array.prototype.slice.call(i));e[d].apply(e,[n[3],t].concat(n.splice(4)))}));o.default.forEach(s,(function(n){var r=[].concat(Array.prototype.slice.call(i));if("data"!==t||o.default.isFunction(o.default.last(r))){var a=[n].concat(r.splice(3));o.default.isFunction(o.default.last(a))&&a.pop(),e[d].apply(e,a)}else e.setDataWithoutUpdate.apply(e,[n].concat(r.splice(3)))}))}};var o=u(n(0)),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),i=u(n(3)),a=u(n(19));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function e(t){if(!i.default.isObject(t)||!t)return t;var n=void 0;if(Array.isArray(t)){n=[];for(var o=0;o<t.length;o++)n[o]=e(t[o])}else for(var r in n={},t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n};var o,r=n(0),i=(o=r)&&o.__esModule?o:{default:o}},function(e,t,n){"use strict";t.__esModule=!0,t.convertLinkObjectToUrl=function(e,t,n){if(!t||!i.default.get(O,[t.type,"url"]))throw new Error("Provided link type is not supported");return i.default.get(O,[t.type,"url"])(t,e,n)},t.convertUrlToLinkObject=V,t.convertUrlToPageId=function(e,t,n){var o=V(e,t,null,n);switch(o.type){case I.PAGE:var r=L(o.pageId);return i.default.find(n,{id:r})?r:null;case I.DYNAMIC_PAGE_WITH_QUERY_PARAMS:case I.DYNAMIC_PAGE:var a=A(O[o.type].regex,t,o.type);return function(e,t){var n=i.default.find(e,{prefix:t[0],type:"template"});return i.default.get(n,"id")}(n,a);default:throw new S}},t.getAnchorDataId=function(e){return U(e.anchorDataId)},t.getPageId=function(e){return B(e.pageId)},t.convertQueryParamsToObject=W;var o,r=n(0),i=(o=r)&&o.__esModule?o:{default:o};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=/^(http|https):\/\/(.*)/,d=/^mailto:([^\?]*)(?:\?subject=(.*)?)?/,c=/^\/([^ \?]*)[\?]?(.*)/,p=/^(\/?)([^ \?]*)#(top|SCROLL_TO_TOP)[\?]?(.*)/,f=/^(\/?)([^ \?]*)#(bottom|SCROLL_TO_BOTTOM)[\?]?(.*)/,g=/^document:\/\/(.*)/,m=/^wix:document:\/\/v1\/(.+)\/(.+)/,h=/^tel:(.*)/,y=/^\/([^ \?]*)#([^ \?]*)[\?]?(.*)/,v=/^#([^ \?]*)[\?]?(.*)/,_={SCROLL_TO_TOP:"top",SCROLL_TO_BOTTOM:"bottom"},I={PAGE:"PageLink",DYNAMIC_PAGE:"DynamicPageLink",DYNAMIC_PAGE_WITH_QUERY_PARAMS:"DynamicPageLinkWithQueryParams",EXTERNAL:"ExternalLink",EMAIL:"EmailLink",DOCUMENT:"DocumentLink",PHONE:"PhoneLink",PAGE_TOP:"AnchorLink",PAGE_BOTTOM:"AnchorLink",SAME_PAGE_ANCHOR_LINK:"SamePageAnchorLink",ANCHOR:"AnchorLink"},w=["_blank","_self"],b="masterPage",C={ROUTER_PREFIX_TYPE:"router",DYNAMIC_PAGE_PREFIX_TYPE:"dynamicPages"},D=i.default.template("<%=linkObject.pageId%>#<%=linkObject.anchorDataId%>",{variable:"linkObject"}),k=i.default.template("/<%=linkObject.pageId%>",{variable:"linkObject"}),S=function(e){function t(){a(this,t);var n=u(this,e.call(this,"Unsupported link type"));return n.name="UnsupportedLinkTypeError",Error.captureStackTrace&&Error.captureStackTrace(n,t),n}return l(t,e),t}(Error),E=function(e){function t(){a(this,t);var n=u(this,e.call(this,"Unsupported target value"));return n.name="UnsupportedTargetValueError",n.supportedTargets=w,Error.captureStackTrace&&Error.captureStackTrace(n,t),n}return l(t,e),t}(Error);function T(e,t){return i.default.find(e,(function(e){return e.prefix==="/"+t[0]&&((n=e).type===C.DYNAMIC_PAGE_PREFIX_TYPE||n.type===C.ROUTER_PREFIX_TYPE);var n}))}function M(e,t,n){var o=e;n&&(o=i.default.dropRight(e));var r=i.default.drop(t?i.default.dropRight(o):o);return i.default.join(r,"/")}var O={PageLink:{url:function(e,t,n){var o=L(e.pageId),r=i.default.find(n,{id:o});return r?r.url:k({pageId:o})},link:function(e,t,n,o){var r=function(e){var t=i.default.split(e,"/");if(t.length>1){var n=i.default.join(i.default.drop(t),"/");return i.default.concat([],i.default.head(t),n)}return t}(t[1]),a={type:e,pageId:"#"+G(i.default.head(r),o)};3===t.length&&t[2]&&i.default.assign(a,{queryParams:W(t[2])||""});var u=r[1];return u&&i.default.assign(a,{tpaInnerRoute:u}),a},regex:[c]},DocumentLink:{url:i.default.template("wix:document://v1/<%=linkObject.docId%>/<%=linkObject.name%>",{variable:"linkObject"}),link:function(e,t){return{type:e,docId:t[1],name:i.default.isUndefined(t[2])?"":t[2]}},regex:[g,m]},PhoneLink:{url:i.default.template("tel:<%=linkObject.phoneNumber%>",{variable:"linkObject"}),link:function(e,t){return{type:e,phoneNumber:t[1]}},regex:[h]},EmailLink:{url:function(e){var t="mailto:<%=linkObject.recipient%>";i.default.has(e,"subject")&&(t+="?subject=<%=linkObject.subject%>");return i.default.template(t,{variable:"linkObject"})(e)},link:function(e,t){var n={type:e,recipient:i.default.escape(t[1])};return t[2]&&(n.subject=i.default.escape(t[2])),n},regex:[d]},ExternalLink:{url:i.default.template("<%=linkObject.url%>",{variable:"linkObject"}),link:function(e,t,n,o,r){if(r&&!i.default.includes(w,r))throw new E;return{type:e,url:i.default.template("<%= partA %>://<%= partB%>")({partA:t[1],partB:t[2]}),target:r||"_blank"}},regex:[s]},DynamicPageLink:{url:x,link:function(e,t,n){var o=i.default.startsWith(i.default.last(t),"#"),r=T(n,t),a={type:e,innerRoute:M(t,o)||"/",routerId:r.id};if(o){var u=i.default.last(t).replace("#","");a.anchorDataId=i.default.get(i.default.invert(_),u,u)}return a},regex:[p,f,y,c]},DynamicPageLinkWithQueryParams:{url:x,link:function(e,t,n){var o=i.default.last(t),r=i.default.startsWith(t[t.length-2],"#"),a=T(n,t),u={type:I.DYNAMIC_PAGE,innerRoute:M(t,r,!0)||"/",routerId:a.id,queryParams:W(o)};if(r){var l=t[t.length-2].replace("#","");u.anchorDataId=i.default.get(i.default.invert(_),l,l)}return u},regex:[p,f,y,c]},AnchorLink:{url:R,link:function(e,t,n,o){var r=t[2],a={type:e,pageId:"#"+G(t[1],o),anchorDataId:i.default.invert(_)[r]||r};return 4===t.length&&t[3]&&i.default.assign(a,{queryParams:W(t[3])}),a},regex:[y]},SamePageAnchorLink:{url:R,link:function(e,t){var n=t[1],o={type:I.ANCHOR,anchorDataId:i.default.invert(_)[n]||n,pageId:"#"+b};return 3===t.length&&t[2]&&i.default.assign(o,{queryParams:W(t[2])}),o},regex:[v]}};function A(e,t,n){if(n===I.DYNAMIC_PAGE||n===I.DYNAMIC_PAGE_WITH_QUERY_PARAMS)return P(t);var o=i.default.find(e,(function(e){return e.test(t)})),r=t.match(o);return r=r||[]}function P(e){var t=e.match(c),n=t[1].replace("#","/#").split(/[\/]+/);return i.default.includes(e,"?")&&n.push(i.default.last(t)),n}function U(e){return _[e]||e}function x(e,t){var n=e.innerRoute&&"/"!==e.innerRoute?"/"+e.innerRoute:"",o=function(e,t){var n=i.default.find(e,{id:t.routerId});return n&&n.prefix}(t,e)+n,r=U(e.anchorDataId),a={pageId:i.default.startsWith(o,"/")?o:"/"+o,anchorDataId:r};return a.anchorDataId?D(a):o}function R(e,t,n){var o=U(e.anchorDataId);if(N(B(e.pageId)))return"#"+o;var r=L(e.pageId),a=i.default.find(n,{id:r});return D(a?{pageId:a.url,anchorDataId:o}:{pageId:i.default.startsWith(r,"/")?r:"/"+r,anchorDataId:o})}function L(e){return N(e=B(e))?"":e.replace("#","")}function B(e){if(!e)return e;if(i.default.isPlainObject(e)){if(e.pageUriSEO)return e.pageUriSEO;if(N(e.id))return b;throw new Error("pageId object should contain pageUriSEO")}return e}function G(e,t){var n=""===e?i.default.find(t,"isMainPage"):i.default.find(t,{url:"/"+e});return i.default.get(n,"id",e)}function j(e,t){return!!T(t,e)}function F(e){return i.default.includes(e,"?")?I.DYNAMIC_PAGE_WITH_QUERY_PARAMS:I.DYNAMIC_PAGE}function N(e){return e.replace("#","")===b}function V(e,t,n,o){var r=function(e,t){switch(!0){case s.test(e):return I.EXTERNAL;case d.test(e):return I.EMAIL;case v.test(e):return I.SAME_PAGE_ANCHOR_LINK;case p.test(e):return j(P(e),t)?F(e):I.PAGE_TOP;case f.test(e):return j(P(e),t)?F(e):I.PAGE_BOTTOM;case y.test(e):return j(P(e),t)?F(e):I.ANCHOR;case c.test(e):return j(P(e),t)?F(e):I.PAGE;case g.test(e):case m.test(e):return I.DOCUMENT;case h.test(e):return I.PHONE;default:throw new S}}(t,e),a=A(O[r].regex,t,r);return i.default.get(O,[r,"link"])(r,a,e,o,n)}function W(e){if(!i.default.isString(e))return{};var t=e.split("&");return i.default.reduce(t,(function(e,t){var n=t.split("=");return e[n[0]]=n[1]?decodeURIComponent(n[1]):null,e}),{})}},function(e,t,n){"use strict";t.__esModule=!0,t.applyTransformationForSetHtml=function(e){return e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return e;var t=/class\s*?=\s*["'](.*?)['"]/,n=/(class\s*?=\s*["'])(.*?)(['"])/;return e.replace(/<(ol|ul|h[1-6]|p)(.*?)>/g,(function(e,r,i){var a=i.match(t);if(!a)return"<"+r+i+' class="'+o[r]+'">';var u=a[1];return/(^|\s)font_[0-9]($|\s)/.test(u)?e:"p"===r&&/\bp[13]\b/i.test(u)?e.replace(/(.*?\bclass\s*?=.*?)\bp([13])\b(.*)/,(function(e,t,n,o){return""+t+("1"===n?"font_7":"font_9")+o})):"<"+r+i.replace(n,(function(e,t,n,i){return""+t+o[r]+" "+n+i}))+">"}))}(e)},t.applyTransformationForGetHtml=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=/(class\s*=['"][^'"]*?)\bfont_([79])\b/;return e.replace(/<(ol|ul|h[1-6]|p)(.*?)>/g,(function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=o[n],a=new RegExp("(class\\s*=['\"].*?)"+i);return a.test(r)?e=e.replace(a,"$1"):"p"===n&&t.test(r)&&(e=e.replace(t,(function(e,t,n){return t+("7"===n?"p1":"p3")}))),e.replace(/class\s*=(['"])\s*\1/,"").replace(/class\s*=(['"])\s*(.*?)\s*\1/,(function(e,t,n){return"class="+t+n+t})).replace(/(.+)\s{2,}/g,"$1 ").replace(/\s+>/,">")}))};var o={p:"font_8",h1:"font_0",h2:"font_2",h3:"font_3",h4:"font_4",h5:"font_5",h6:"font_6",ol:"font_8",ul:"font_8"}},function(e,t,n){"use strict";t.__esModule=!0;t.sdkTypeByViewerType={"wysiwyg.viewer.components.SiteButton":"Button","wysiwyg.viewer.components.PopupCloseTextButton":"Button","wysiwyg.viewer.components.PopupCloseIconButton":"Button","wysiwyg.common.components.imagebutton.viewer.ImageButton":"Button","wysiwyg.viewer.components.WPhoto":"Image","wysiwyg.viewer.components.FooterContainer":"Footer","wysiwyg.viewer.components.HeaderContainer":"Header","wysiwyg.viewer.components.WRichText":"Text","mobile.core.components.Page":"Page","wysiwyg.viewer.components.inputs.TextInput":"TextInput","wysiwyg.viewer.components.inputs.TextAreaInput":"TextBox","wysiwyg.viewer.components.inputs.DatePicker":"DatePicker","wysiwyg.viewer.components.BoxSlideShow":"Slideshow","wysiwyg.viewer.components.StripContainerSlideShow":"Slideshow","wysiwyg.viewer.components.StateBox":"MultiStateBox","wysiwyg.viewer.components.StateStrip":"MultiStateBox","wysiwyg.viewer.components.SlideShowGallery":"Gallery","wysiwyg.viewer.components.SliderGallery":"Gallery","wysiwyg.viewer.components.MatrixGallery":"Gallery","wysiwyg.viewer.components.PaginatedGridGallery":"Gallery","mobile.core.components.Container":"Box","wysiwyg.viewer.components.Group":"Box","platform.components.AppController":"AppController","wysiwyg.viewer.components.svgshape.SvgShape":"VectorImage","wysiwyg.viewer.components.VectorImage":"VectorImage","wysiwyg.viewer.components.inputs.Checkbox":"Checkbox","wixui.RichTextBox":"RichTextBox","wixui.ToggleSwitch":"Switch","wixui.AddressInput":"AddressInput","wysiwyg.viewer.components.inputs.RadioGroup":"RadioButtonGroup","wysiwyg.viewer.components.inputs.CheckboxGroup":"CheckboxGroup","wysiwyg.viewer.components.BoxSlideShowSlide":"Slide","wysiwyg.viewer.components.StripContainerSlideShowSlide":"Slide","wysiwyg.viewer.components.StateBoxState":"State","wysiwyg.viewer.components.StateBoxFormState":"State","wysiwyg.viewer.components.StateStripState":"State","wysiwyg.viewer.components.inputs.ComboBoxInput":"Dropdown","wysiwyg.viewer.components.Column":"Column","wysiwyg.viewer.components.StripColumnsContainer":"ColumnStrip","wysiwyg.viewer.components.Grid":"Table","wysiwyg.viewer.components.inputs.FileUploader":"UploadButton","wysiwyg.common.components.anchor.viewer.Anchor":"Anchor","wysiwyg.viewer.components.tpapps.TPASection":"IFrame","wysiwyg.viewer.components.tpapps.TPAMultiSection":"IFrame","wysiwyg.viewer.components.tpapps.TPAGluedWidget":"IFrame","wysiwyg.viewer.components.HtmlComponent":"HtmlComponent","wysiwyg.viewer.components.GoogleMap":"GoogleMap","wysiwyg.viewer.components.Video":"Video","wysiwyg.viewer.components.HoverBox":"HoverBox","wysiwyg.viewer.components.Popover":"Popover","wysiwyg.viewer.components.MenuContainer":"MenuContainer","tpa.viewer.components.Freestyle":"Gallery","tpa.viewer.components.Honeycomb":"Gallery","tpa.viewer.components.Accordion":"Gallery","wysiwyg.viewer.components.tpapps.TPA3DCarousel":"Gallery","wysiwyg.viewer.components.tpapps.TPA3DGallery":"Gallery","tpa.viewer.components.Impress":"Gallery","tpa.viewer.components.Masonry":"Gallery","tpa.viewer.components.Collage":"Gallery","tpa.viewer.components.StripSlideshow":"Gallery","tpa.viewer.components.StripShowcase":"Gallery","tpa.viewer.components.Thumbnails":"Gallery","wysiwyg.viewer.components.tpapps.TPAWidget":"IFrame","wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":"VerticalMenu","wysiwyg.viewer.components.LoginSocialBar":"AccountNavBar","wysiwyg.viewer.components.Repeater":"Repeater","wysiwyg.viewer.components.MediaContainer":"Container","wysiwyg.viewer.components.mobile.TinyMenu":"MobileMenu","wysiwyg.viewer.components.QuickActionBar":"QuickActionBar","wixui.MusicPlayer":"AudioPlayer","wixui.BarChart":"BarChart","wixui.VideoPlayer":"VideoPlayer","wixui.Pagination":"Pagination","wixui.Tags":"Tags","wixui.Slider":"Slider","wixui.Captcha":"Captcha","wixui.TimePicker":"TimePicker","wixui.RatingsDisplay":"RatingsDisplay","wixui.RatingsInput":"RatingsInput","wixui.SearchBox":"SearchBox","platform.components.AppWidget":"AppWidget","wysiwyg.viewer.components.tpapps.TPAWidgetNative":"Native","wysiwyg.viewer.components.MediaBox":"MediaBox","wixui.ProgressBar":"ProgressBar","wixui.SignatureInput":"SignatureInput","wixui.CustomElementComponent":"CustomElement","wixui.StylableButton":"Button"},t.sdkTypeByWidgetId={"142bb34d-3439-576a-7118-683e690a1e0d":"Gallery"},t.defaultSdkType="HiddenCollapsedElement"},function(e,t,n){"use strict";t.__esModule=!0,t.generateWixCodeImageUri=function(e){return a(e)},t.generateWixCodeDocumentUri=function(e){return u(e)},t.generateWixCodeVideoUri=function(e){return l(e)},t.extractImageRelativeUriFromWixUri=function(e){if(s.test(e)){return(e.match(s)||[0,0,e])[2]}return e},t.extractImageDataFromWixUri=function(e){if(s.test(e)){var t=e.match(s)||[0,0,e],n=t[2],o=t[3],r=t[4],a=t[5];return i.default.reduce({uri:n,width:o,height:r,title:a},d,{})}return{uri:e}};var o,r=n(0),i=(o=r)&&o.__esModule?o:{default:o};var a=i.default.template("image://v1/${uri}/${width}_${height}/${title}"),u=i.default.template("wix:document://v1/${uri}/${filename}"),l=i.default.template("wix:video://v1/${uri}/${filename}#posterUri=${posterUri}&posterWidth=${posterWidth}&posterHeight=${posterHeight}"),s=/^image:\/\/(.*)\/(.*)\/(.*)_(.*)\/(.*)/;function d(e,t,n){return t&&(e[n]=t),e}},function(e,t,n){"use strict";t.__esModule=!0,t.getSkinName=function(e){return i.default.get(l,e)||e},t.convertStyleParamForViewerType=function(e,t){var n=i.default.get(u,e),o=n||a;return i.default.get(o,t,t)};var o,r=n(0),i=(o=r)&&o.__esModule?o:{default:o};var a={backgroundColor:"bg",foregroundColor:"fg",borderColor:"brd",borderWidth:"brw",borderRadius:"rd",color:"txt"},u={"wysiwyg.viewer.components.inputs.FileUploader":{backgroundColor:"btn_bg",borderColor:"btn_brd",borderWidth:"btn_brw",borderRadius:"btn_rd",color:"btn_txt"},"wixui.FileUploaderNew":{backgroundColor:"btn_bg",borderColor:"btn_brd",borderWidth:"btn_brw",borderRadius:"btn_rd",color:"btn_txt"},"wixui.ProgressBar":{backgroundColor:"barBackgroundColor",foregroundColor:"barForegroundColor",borderColor:"borderColor",borderWidth:"borderSize",borderRadius:"borderRadius"},"wixui.SignatureInput":{backgroundColor:"padBackground",borderColor:"padBorderColor",borderWidth:"padBorderWidth"}},l={"skins.input.RadioGroupDefaultSkin":"wysiwyg.common.components.radio.viewer.skins.RadioButtonDefaultSkin"}},function(e,t,n){"use strict";t.__esModule=!0;var o={},r=function(e,t){return"none"===e||t&&"force"!==e},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1];return t%e==0},a=function(e){return i.bind(null,e)};t.isSiteInSampleRatio=function(e){var t=e.sampleRatio,n=e.sampleRatioState,i=e.viewerSessionId,u=e.requestId,l=e.isDebug,s=e.biSampleByRequestId,d=a(t);if(r(n,l))return!0;if("coinFromRequestId"in o||!u||(o.coinFromRequestId=parseInt(u,10)),!i)return d(o.coinFromRequestId);"coin"in o||(o.coin=parseInt(i,16));var c=d(o.coin);return!c&&s&&"coinFromRequestId"in o&&(c=d(o.coinFromRequestId)),c},t.getStore=function(){return o}},function(e,t,n){"use strict";t.__esModule=!0,t.TypeUtils=void 0;var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(0),a=(o=i)&&o.__esModule?o:{default:o};t.TypeUtils=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._typesData=t}return e.prototype.getSdkType=function(e,t){var n=this._typesData,o=n.sdkTypeByViewerType,r=n.sdkTypeByWidgetId,i=n.defaultSdkType;return r[t]||o[e]||i},e.prototype.getFullSdkType=function(e,t){return"$w."+this.getSdkType(e,t)},e.prototype.getPotentialViewerTypes=function(e){var t=this._typesData,n=t.sdkTypeByViewerType,o=t.sdkTypeByWidgetId,r=a.default.keys(n).filter((function(t){return n[t]===e}));return a.default.includes(a.default.values(o),e)&&r.push("wysiwyg.viewer.components.tpapps.TPAWidget","wysiwyg.viewer.components.tpapps.TPAWidgetNative"),r},e.prototype.setType=function(e,t){this._typesData.sdkTypeByViewerType[e]=t},r(e,[{key:"Types",get:function(){var e=this._typesData,t=e.sdkTypeByViewerType,n=e.sdkTypeByWidgetId,o=a.default.uniq(a.default.values(t).concat(a.default.values(n)));return a.default.zipObject(o,o)}},{key:"defaultSdkType",get:function(){return this._typesData.defaultSdkType}}]),e}()},function(e,t,n){"use strict";t.__esModule=!0,t.members=t.contacts=void 0;var o=n(28);t.contacts=o.contacts,t.members=o.members},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(29);t.contacts=o;var r=n(30);t.members=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r={firstName:{},lastName:{},picture:{schemaKey:"imageUrl"},emails:{},phones:{},labels:{}};t.serializeContactInfo=function(e){return o.reduce(e,(function(e,t,n){var i=r[n];if(i)return e[i.serviceKey||n]=t,e;var a,u="strValue";return o.isDate(t)?u="dateValue":o.isNumber(t)&&(u="numValue"),e.customFields.push(((a={name:n})[u]=t,a)),e}),{customFields:[]})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.serializeMemberRoles=function(e){return o.map(e&&e.groups,(function(e){return{name:e.title,description:e.description}}))}},function(e,t,n){"use strict";var o;t.__esModule=!0,t.types=t.errors=t.parseMediaSrc=t.createMediaSrc=t.isValidMediaSrc=void 0;var r,i=n(0),a=(r=i)&&r.__esModule?r:{default:r},u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));var l=u.errors,s=u.types,d={externalUrl:/(^https?)|(^data)|(^blob)|(^\/\/)/,inlineSvg:/<svg[\s\S]*>[\s\S]*<\/svg>/im},c=((o={})[u.types.VECTOR]=[d.externalUrl,d.inlineSvg],o[u.types.IMAGE]=[d.externalUrl],o[u.types.DOCUMENT]=[],o[u.types.VIDEO]=[],o);t.isValidMediaSrc=function(e,t){if(u.isValidMediaItemUri(e,t))return!0;var n=c[t];return a.default.some(n,(function(t){return t.test(e)}))},t.createMediaSrc=function(e){var t=e.mediaId,n=e.type,o=e.title,r=e.width,i=e.height,l=e.posterId,s=e.watermark,d=c[n];return a.default.some(d,(function(e){return e.test(t)}))?{item:t}:u.createMediaItemUri({mediaId:t,type:n,title:o,width:r,height:i,posterId:l,watermark:s})},t.parseMediaSrc=function(e,t){if(!a.default.includes(s,t))return{error:l.unknown_media_type};var n=c[t];if(a.default.some(n,(function(t){return t.test(e)})))return{type:t,mediaId:e};var o=u.parseMediaItemUri(e);return o.error===l.non_string_media_id?o:o.error===l.unknown_media_type||t!==o.type?{error:l.bad_media_id}:o},t.errors=l,t.types=s}])}));
//# sourceMappingURL=platformUtils-bundle.js.map