var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("textControls/comps/iconButton.rt",["react","lodash","santa-editor-symbols","baseUI","constants"],function(t,e,o,n,s){"use strict";return function(){return t.createElement(n.tooltip,{value:this.props.tooltipValue,disabled:!this.props.tooltipValue,styleType:s.UI.TOOLTIP.STYLE_TYPE.SMALL},t.createElement("div",{className:"icon-button-container"},t.createElement("button",{className:this.getClassName(),onClick:this.handleClick,style:this.props.style,disabled:this.props.disabled},this.props.name?t.createElement("span",{key:"key"+this.props.name},t.createElement(o.symbol,{name:this.props.name})):null,t.createElement("span",{},this.props.children),this.props.popupMode?t.createElement(n.arrowButton,{key:"iconButtonArrow",withoutBorder:!0}):null)))}}),define("textControls/comps/iconButton",["create-react-class","prop-types","lodash","textControls/comps/iconButton.rt","baseUI"],function(t,e,o,n,s){"use strict";return t({displayName:"iconButton",render:n,mixins:[s.reportUIChangeMixin],propTypes:{isSelected:e.bool,buttonMode:e.bool,popupMode:e.bool},contextTypes:{reportUIChange:e.func},getDefaultProps:function(){return{isSelected:!1,buttonMode:!0,popupMode:!1}},getClassName:function(){var t="";return this.props.className&&(t+=" "+this.props.className),this.props.isSelected&&(t+=" selected"),this.props.buttonMode&&!this.props.popupMode&&(t+=" icon-button"),this.props.popupMode&&(t+=" icon-button popup"),t.trim()},handleClick:function(){var t=function(t){var e={};switch(t){case"textOutdentLeft":case"textOutdentRight":e.category="decrease";break;case"textIndentLeft":case"textIndentRight":e.category="increase";break;case"textWriteDirectionLeft":e.category="RTL";break;case"textWriteDirectionRight":e.category="LTR"}return e}(this.props.name);this.reportUIChange(t,this.props.name||this.props.biName),this.props.onClick()}})}),define("textControls/comps/fontFamily.rt",["react","lodash","baseUI","santa-editor-symbols"],function(s,o,i,n){"use strict";return function(){return s.createElement(i.tooltip,{value:this.props.tooltipValue,disabled:!this.props.tooltipValue,styleType:this.props.tooltipStyleType},s.createElement("div",{style:{display:"inline"}},s.createElement.apply(this,[i.dropDown.combobox,{key:"font-family-with-fonts-upload-changes",label:this.props.label,ref:"combobox",optionsWidth:this.getOptionsWidth(),valueLink:this.props.valueLink,value:this.props.value,className:"font-family-dd "+(this.props.toolbarMode?"toolbar-mode":""),onChange:this.props.onChange,infoText:this.props.infoText,onOptionsVisible:function(t){this.handleOptionsVisible(t)}.bind(this),infoTitle:this.props.infoTitle},o.map(this.state.fontsItems,function(t,e){return s.createElement.apply(this,[i.dropDown.optgroup,{label:t.groupName,key:t.groupName},o.map(t.items,function(t,e,o,n){return s.createElement(i.dropDown.option,{shouldTranslate:!1,value:o.value,key:o.value,searchText:o.label},s.createElement("div",{className:"font-option-container"},s.createElement("span",{className:"font-label"},o.label),s.createElement("span",{className:"font-example"},this.translateIfNeeded(o.example)),o.isNew?s.createElement("span",{key:"font-badge",className:"font-badge"},this.translateIfNeeded("text_editor_fonts_dropdown_new_badge")):null))}.bind(this,t,e)),this.isMissingFont()?s.createElement(i.dropDown.option,{key:"textStyleCustom",value:this.props.value,style:{display:"none"},className:"missing-uploaded-font"},s.createElement("div",{className:"font-option-container"},s.createElement("span",{className:"font-label"},this.getMissingFontName()))):null])}.bind(this)),this.props.footerLinks?s.createElement(i.dropDown.footer,{key:"font_family_footer",className:"footer-content"},s.createElement.apply(this,["div",{className:"footer-links-container fonts-upload"},o.map(this.props.footerLinks,function(t,e){return s.createElement("div",{key:e,className:"font-family-footer-link "+t.className,onClick:t.onClick},t.symbol?s.createElement(n.symbol,{name:t.symbol,key:"footerLinkIcon-"+e}):null,s.createElement("span",{},this.translateIfNeeded(t.label)))}.bind(this))])):null])))}}),define("textControls/utils/constants",["lodash"],function(t){"use strict";var e={h1:{seoTag:"h1",label:"FONT_0_LABEL",tag:"h1",displayName:"text_editor_theme_new_1",cssClass:"font_0"},h2:{seoTag:"h2",label:"FONT_2_LABEL",tag:"h2",displayName:"text_editor_theme_new_2",cssClass:"font_2"},h3:{seoTag:"h3",label:"FONT_3_LABEL",tag:"h3",displayName:"text_editor_theme_new_3",cssClass:"font_3"},h4:{seoTag:"h4",label:"FONT_4_LABEL",tag:"h4",displayName:"text_editor_theme_new_4",cssClass:"font_4"},h5:{seoTag:"h5",label:"FONT_5_LABEL",tag:"h5",displayName:"text_editor_theme_new_5",cssClass:"font_5"},h6:{seoTag:"h6",label:"FONT_6_LABEL",tag:"h6",displayName:"text_editor_theme_new_6",cssClass:"font_6"},p:{seoTag:"p",label:"FONT_7_LABEL",tag:"p",displayName:"text_editor_theme_7",cssClass:"font_7"},div:{seoTag:"p",label:"FONT_8_LABEL",tag:"div",displayName:"text_editor_theme_8",cssClass:"font_8"},address:{seoTag:"p",label:"FONT_9_LABEL",tag:"address",displayName:"text_editor_theme_9",cssClass:"font_9"}};return{MAX_TEXT_LENGTH:6e4,CK_OFF:2,CK_ON:1,CK_DISABLED:0,IMAGE_WHITE_LIST_ATTRIBUTES:["src","style","wix-comp"],FORBIDDEN_TAGS:["script","iframe","embed","object","meta"],SENSITIVE_ATTRIBUTES:["href","src","style"],FORBIDDEN_TAGS_AND_ATTRIBUTES:["script","iframe","embed","object","meta","expression","id","comp","dataquery","propertyquery","styleid","skin","skinpart","y","x","scale","angle","idprefix","state","container","listposition","hasproxy","vcfield","vcview","vctype","pos","onAbort","onActivate","onAfterPrint","onAfterUpdate","onBeforeActivate","onBeforeCopy","onBeforeCut","onBeforeDeactivate","onBeforeEditFocus","onBeforePaste","onBeforePrint","onBeforeUnload","onBeforeUpdate","onBegin","onBlur","onBounce","onCellChange","onChange","onClick","onContextMenu","onControlSelect","onCopy","onCut","onDataAvailable","onDataSetChanged","onDataSetComplete","onDblClick","onDeactivate","onDrag","onDragEnd","onDragLeave","onDragEnter","onDragOver","onDragDrop","onDragStart","onDrop","onEnd","onError","onErrorUpdate","onFilterChange","onFinish","onFocus","onFocusIn","onFocusOut","onHashChange","onHelp","onInput","onKeyDown","onKeyPress","onKeyUp","onLayoutComplete","onLoad","onLoseCapture","onMediaComplete","onMediaError","onMessage","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseWheel","onMove","onMoveEnd","onMoveStart","onOffline","onOnline","onOutOfSync","onPaste","onPause","onPopState","onProgress","onPropertyChange","onReadyStateChange","onRedo","onRepeat","onReset","onResize","onResizeEnd","onResizeStart","onResume","onReverse","onRowsEnter","onRowExit","onRowDelete","onRowInserted","onScroll","onSeek","onSelect","onSelectionChange","onSelectStart","onStart","onStop","onStorage","onSyncRestored","onSubmit","onTimeError","onTrackChange","onUndo","onUnload","onURLFlip","seekSegmentTime"],DEFAULT_STYLES_MAP:e,CLASS_TO_FONT:{font_0:{tag:"h1",class:"font_0"},font_2:{tag:"h2",class:"font_2"},font_3:{tag:"h3",class:"font_3"},font_4:{tag:"h4",class:"font_4"},font_5:{tag:"h5",class:"font_5"},font_6:{tag:"h6",class:"font_6"},font_7:{tag:"p",class:"font_7"},font_8:{tag:"p",class:"font_8"},font_9:{tag:"p",class:"font_9"}},PALETTE_SEQUENCES:["color_11","color_12","color_13","color_14","color_15","color_16","color_17","color_18","color_19","color_20","color_21","color_22","color_23","color_24","color_25","color_26","color_27","color_28","color_29","color_30","color_31","color_32","color_33","color_34","color_35"],TEXT_LIST_TYPES:{textListNone:"nonelist",textListNumbers:"numberedlist",textListBullets:"bulletedlist"},TEXT_BACK_COLOR_TYPES:{textListNone:"noColor"},TEXT_LIST_TYPES_RTL:{textListNone:"nonelist",textListNumbersRight:"numberedlist",textListBulletsRight:"bulletedlist"},ALIGNMENT_TYPES:{textAlignLeft:"justifyleft",textAlignCenter:"justifycenter",textAlignRight:"justifyright",textAlignBlock:"justifyblock"},FONT_SIZE:{MIN:6,MAX:215},BLOG_CK_EDITOR_FONT_STYLES:{type:"map",metaData:{isPreset:!0,isHidden:!1,description:"",isPersistent:!1},items:{font_0:{seoTag:"h1",label:"FONT_0_LABEL"},font_1:{seoTag:"h2",label:"FONT_1_LABEL"},font_2:{seoTag:"h2",label:"FONT_2_LABEL"},font_3:{seoTag:"h3",label:"FONT_3_LABEL"},font_4:{seoTag:"h4",label:"FONT_4_LABEL"},font_5:{seoTag:"h5",label:"FONT_5_LABEL"},font_6:{seoTag:"h6",label:"FONT_6_LABEL"},font_7:{seoTag:"p",label:"FONT_7_LABEL"},font_8:{seoTag:"p",label:"FONT_8_LABEL"},font_9:{seoTag:"p",label:"FONT_9_LABEL"},font_10:{seoTag:"p",label:"FONT_10_LABEL"}},id:"CK_EDITOR_FONT_STYLES"},BLOG_EDITOR_STYLES:{type:"map",metaData:{isPersistent:!1},items:{h1:{tag:"h1",cssClass:"font_3"},h2:{tag:"h2",cssClass:"font_4"},h3:{tag:"h3",cssClass:"font_5"},h4:{tag:"h4",cssClass:"font_6"},h5:{tag:"h5",cssClass:"font_7"},h6:{tag:"h6",cssClass:"font_8"},p:{tag:"p",cssClass:"font_9"},div:{tag:"div",cssClass:"font_8",label:"default",seoTag:"hatul"}},id:"WIXAPPS_EDITOR_STYLES"},DEFAULT_STYLE_CLASS:"font_100",FALLBACK_STYLE_CLASS:"font_8",STYLE_COMMANDS:["bold","fontSize","fontFamily","foreColor","italic"],TEXT_BLOCKS:t.keys(e).concat(["ul","ol"]),FONT_GROUPS:{"my-uploads":"text_editor_font_dropdown_my_fonts",latin:"text_editor_font_dropdown_all_fonts","latin-ext":"add_languages_eastern_european",cyrillic:"add_languages_cyrillic",japanese:"add_languages_japanese",korean:"add_languages_korean",arabic:"add_languages_arabic",hebrew:"add_languages_hebrew"}}}),define("textControls/utils/colorUtils",["lodash","textControls/utils/constants","util"],function(s,n,i){"use strict";function r(t,e){return s.includes(e,t)}return{getColorValueFromTheme:function(e,t){e=i.colors.getColorInHex(e);var o=s.findKey(t,function(t){return t===e});return r(o,n.PALETTE_SEQUENCES)?o:e},isColorInPaletteSequences:r,getThemeColorData:function(t){var n=[];return s.forEach(t,function(t,e){var o=e.split("_")[1];n[o]=t}),{color:n}},getHexColorsMap:function(o,t){var n={};return s.forEach(t,function(t,e){n[o+e]=i.colors.getColorInHex(t)}),n},getColorPickerValue:function(t){return"noColor"!==t&&t?t:n.CK_OFF}}}),define("textControls/utils/fontUtils",["lodash","util","coreUtilsLib","stateManagement","textControls/utils/colorUtils","experiment"],function(p,a,t,i,n,r){"use strict";var u=t.fonts;function s(t){return p(t).values().map(function(t){return u.getFontFamily(t)}).value()}function l(t,e){var o=t.components.skin.get(p.head(e)),n=t.documentServices.theme.skins.getSkinDefinition(o);return p.pickBy(n,{type:"FONT"})}return{getStyleFont:function(t,e,o){return p.isString(t)?u.parseStyleFont(t,o,e):null},parseStyleFont:u.parseStyleFont,stringifyFontWithoutColor:function(t){return this.stringifyFont(t,!1)},stringifyFont:function(t,e,o){var n,s,i=(!0===(s=t.italic)?"italic":!1===s?"normal":s)+" "+t.variant+" "+(!0===(n=t.bold)?"700":!1===n?"normal":n)+" "+t.size+"/"+t.lineHeight+" "+t.family.replace(/\s/g,"+");if(e&&t.color){var r=a.colors.getColorInHex(t.color);if(o){var l=p.findKey(o,function(t){return t===r});l&&(r="{"+l+"}")}i+=" "+r}return i},createFontsCssString:function(t,e,o){var l=n.getThemeColorData(t),a=p.groupBy(e,"cssClass"),c="";return p.forEach(o,function(t,e){var o,n,s,i="font: "+u.fontToCSSWithColor(t,l.color),r=(s="",(n=a)[o=e]&&p.forEach(n[o],function(t){s+=t.tag+", "}),s+="."+o);c+=r+"{"+i+"}"}),c},createFontStyleString:function(t,e){var o=n.getThemeColorData(e);return"font:"+u.fontToCSSWithColor(t,o.color)},getCurrentSelectableFontsWithParams:function(t,e,o){var n=p.get(t,"dsRead.fonts");if(n){var s=n.getSiteFontsOptions();return o&&(s=n.getAllFontsOptions()),e||s.unshift({lang:"my-uploads",fonts:function(t){var e=i.editorPlugins.uploadedFonts.selectors.getList(t.store.getState());if(!p.isEmpty(e)){var o=p.map(e);return p.sortBy(o,"displayName")}}(t)}),p.map(s,function(t){var e=t.fonts;return r.isOpen("se_japaneseFonts")||"japanese"!==t.lang||(e=p.reject(t.fonts,{provider:"japanese-fonts"})),{lang:t.lang,fonts:e}})}return[]},getFontsDropDownItems:function(t){return u.getFontsDropDownItems(t)},getFont:function(t){return t=t.toLowerCase(),p.head(u.getMetadata([t]))},getSkinBasedCompFontSize:function(t,e){var o=p(l(t,e)).keys().head(),n=t.components.style.get(e),s=p.get(n,"style.properties."+o);return s?u.parseStyleFont(s,t.theme.fonts.getAll(),t.theme.colors.getAll()).size:""},getSkinBasedCompFontDefs:l,getWixStoredFontsCss:function(t,e){var o=window.santaBase,n=u.getWixStoredFontsCssUrlsWithParams(o,t);return"WixSite"===e&&(n=n.concat(a.serviceTopology.publicStaticsUrl+"/css/Helvetica/fontFace.css")),n},getFontsMetadata:function(t){var e="WixSite"!==t?p.omitBy(u.getFontsMetaData(),{permissions:"studio"}):{};return p.forEach(e,function(t,e){t.cssFontFamily=u.getFontFamilyWithFallbacks(e)}),e},getAllCustomFontsUrls:function(t,e){var o={};p.forEach(u.getFontsMetaData(),function(t,e){t.cdnName&&(o[e]=e)});var n,s,i,r=(n=p.keys(o),s=t,i=e,u.getFontsUrlWithParams(n,s,i)||"");return{missingFontsNames:o,missingFontsUrl:r}},getFontsSpriteUrl:function(){return"url("+a.media.getMediaUrl("textEditor/fonts.v8.png")+")"},getUploadedFontFace:function(t){return u.getUploadedFontFaceStyles(t,a.serviceTopology.mediaRootUrl)},isUploadedFont:u.isUploadedFontFamily,getUploadedId:u.getUploadedId,getThemeMap:function(t){return p.transform(t.dsRead.theme.fonts.getMap(),function(t,e,o){var n=e.color.match("{(.*?)}");return t[o]=p.assign(e,{fontFamily:e.family,fontSize:p.parseInt(e.size),foreColor:n?n[1]:e.color}),t})},getThemeFontFamilies:s,getUploadedUsedFonts:function(t,e){var o,n=p.union((o=t,u.collectFontsFromTextDataArray([o])),s(e));return p.filter(n,function(t){return u.isUploadedFontFamily(t)})}}}),define("textControls/comps/fontFamily",["create-react-class","prop-types","lodash","zepto","textControls/comps/fontFamily.rt","util","textControls/utils/fontUtils"],function(t,e,h,m,o,n,s){"use strict";return t({displayName:"fontFamily",render:o,mixins:[n.translationMixin],propTypes:{infoText:e.string,label:e.string,onClose:e.func,doNotFocus:e.bool,footerLinks:e.arrayOf(e.shape({label:e.string.isRequired,onClick:e.func.isRequired})),fonts:e.arrayOf(e.shape({fonts:e.array.isRequired,lang:e.string.isRequired}).isRequired)},getUploadedFontName:function(t){var e=t.split(",")[2];return e=e.replace(n.fontsManagerUtils.constants.ORIGINAL_FONT_PREFIX,""),e=h.startCase(e)},getMissingFontName:function(){if(this.isMissingFont())return s.isUploadedFont(this.props.value)?this.getUploadedFontName(this.props.value):this.props.value&&s.getFont(this.props.value)?s.getFont(this.props.value).displayName:""},getInitialState:function(){return{fontsItems:this.getFontsItems(this.props.fonts)}},getDefaultProps:function(){return{optionsWidth:284}},componentWillReceiveProps:function(t){h.isEqual(this.props.fonts,t.fonts)||this.setState({fontsItems:this.getFontsItems(t.fonts)})},getFontsItems:function(t){return s.getFontsDropDownItems(t)},getFontOptionsWithoutGroups:function(){return h(this.state.fontsItems).map("items").flattenDeep().value()},getFlattenItemsWithGropus:function(){var e=[];return h.forEach(this.state.fontsItems,function(t){e.push(t.groupName),h.forEach(t.items,function(t){e.push(t)})}),e},handleOptionsVisible:function(t){t&&this.addFontFamilyAttrToList(t)},addFontFamilyAttrToList:function(t){for(var e,o,n,s,i,r=m(t).find("li:not(.missing-uploaded-font)"),l=this.getFlattenItemsWithGropus(),a=(e=t.scrollTop,Math.round(e/36)),c=(o=a,n=r,s=t.clientHeight,i=Math.round(s/36),Math.min(o+i,n.length)),p=a;p<c;p++){var u=l[p],d=r[p].firstChild;d&&h.includes(d.classList,"font-option-container")&&(d.style.fontFamily=u&&u.cssFontFamily)}},isExpanded:function(){return this.refs.combobox.isExpanded()},getOptionsWidth:function(){return this.props.footerLinks?336:this.props.optionsWidth},isMissingFont:function(){var t=this.getFontOptionsWithoutGroups();return!h.find(t,{value:this.props.value})}})}),define("textControls/comps/iconsDropDown.rt",["react","lodash","baseUI"],function(o,t,n){"use strict";return function(){return o.createElement(n.tooltip,{value:this.props.tooltipValue,disabled:!this.props.tooltipValue,styleType:this.props.tooltipStyleType},o.createElement("div",{style:{display:"inline-block",verticalAlign:"middle"}},o.createElement.apply(this,[n.dropDown.select,{ref:"dropdown",shouldTranslate:!1,value:this.props.value,onChange:this.props.onChange,className:"icons-dd "+this.props.className,optionsWidth:56,template:this.props.fixedIconName?this.getFixedIcon:void 0,doNotFocus:this.props.doNotFocus},t.map(this.props.items,function(t,e){return o.createElement(n.dropDown.option,{value:t,className:"icons-dd-option",key:e},o.createElement(n.symbol,{name:e}))}.bind(this))])))}}),define("textControls/comps/iconsDropDown",["react","create-react-class","prop-types","lodash","textControls/comps/iconsDropDown.rt","baseUI"],function(t,e,o,n,s,i){"use strict";return e({displayName:"iconsDropDown",propTypes:{fixedIconName:o.string},render:s,getFixedIcon:function(){if(this.props.fixedIconName)return t.createElement(i.symbol,{name:this.props.fixedIconName})},isExpanded:function(){return this.refs.dropdown.isExpanded()}})}),define("textControls/comps/colorDrop.rt",["react","lodash"],function(t,e){"use strict";return function(){return t.createElement("span",{},this.props.isBackColor||this.props.colorDropOnly?null:t.createElement("span",{key:"backColorDrop"},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"symbol-textForeColor",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"22px",height:"18px"},t.createElement("path",{fill:this.props.fill?this.props.fill:"none",fillRule:"evenodd",d:"M 17 3C 17 3 27.03 17 17 17 6.9 17 17 3 17 3Z"}),t.createElement("path",{fillRule:"evenodd",d:"M 16.96 18C 13.35 18 12 14.95 12 13.03 12 9.97 15.69 4.09 16.12 3.43 16.12 3.43 16.95 2.12 16.95 2.12 16.95 2.12 17.8 3.42 17.8 3.42 18.23 4.08 22 9.97 22 13.03 22 15.09 20.44 18 16.96 18ZM 16.96 3.97C 16.96 3.97 13 10.18 13 13.03 13 14.52 14.02 16.99 16.96 16.99 19.89 16.99 21 14.52 21 13.03 21 10.18 16.96 3.97 16.96 3.97ZM 3.6 9.02C 3.6 9.02 2 13.03 2 13.03 2 13.03-0 13.03-0 13.03-0 13.03 5 1 5 1 5 1 6 0 6 0 6 0 7 0 7 0 7 0 8 1 8 1 8 1 11 7.01 11 7.01 11 7.01 11 11.02 11 11.02 11 11.02 9.4 9.02 9.4 9.02 9.4 9.02 3.6 9.02 3.6 9.02ZM 7 3.01C 7 3.01 6 3.01 6 3.01 6 3.01 4.4 7.01 4.4 7.01 4.4 7.01 8.6 7.01 8.6 7.01 8.6 7.01 7 3.01 7 3.01Z"}))),this.props.isBackColor&&!this.props.colorDropOnly?t.createElement("span",{key:"foreColorDrop"},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"symbol-textBackColor",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"28px",height:"21px"},t.createElement("path",{fill:this.props.fill?this.props.fill:"none",fillRule:"evenodd",d:"M 23 6C 23 6 33.03 20 23 20 12.9 20 23 6 23 6Z"}),t.createElement("path",{fillRule:"evenodd",d:"M 22.96 21C 19.35 21 18 17.95 18 16.03 18 12.98 21.69 7.09 22.12 6.43 22.12 6.43 22.95 5.12 22.95 5.12 22.95 5.12 23.8 6.42 23.8 6.42 24.23 7.09 28 12.97 28 16.03 28 18.09 26.44 21 22.96 21ZM 22.96 6.97C 22.96 6.97 19 13.18 19 16.03 19 17.52 20.02 20 22.96 20 25.89 20 27 17.52 27 16.03 27 13.18 22.96 6.97 22.96 6.97ZM 14 6.01C 14 6.01 15 10.02 15 10.02 15 10.02 12 10.02 12 10.02 12 10.02 13 6.01 13 6.01 13 6.01 14 6.01 14 6.01ZM 18 10.02C 18 10.02 15 4.01 15 4.01 15 4.01 14 3.01 14 3.01 14 3.01 13 3.01 13 3.01 13 3.01 12 4.01 12 4.01 12 4.01 6.63 16.03 6.63 16.03 6.63 16.03 9 16.03 9 16.03 9 16.03 11 12.02 11 12.02 11 12.02 16 12.02 16 12.02 16 12.02 16.79 13 16.79 13 16.32 14.18 16 15.26 16 16.03 16 16.93 16.3 18.07 16.98 19.04 16.98 19.04 6 19.04 6 19.04 4.9 19.04 4 18.14 4 17.03 4 17.03 4 15.03 4 15.03 4 15.03 3 15.03 3 15.03 2.45 15.03 2 14.58 2 14.03 2 13.47 2.45 13.02 3 13.02 3 13.02 4 13.02 4 13.02 4 13.02 4 11.02 4 11.02 4 11.02 3 11.02 3 11.02 2.45 11.02 2 10.57 2 10.02 2 9.47 2.45 9.02 3 9.02 3 9.02 4 9.02 4 9.02 4 9.02 4 7.01 4 7.01 4 7.01 2 7.01 2 7.01 1.45 7.01 1 6.57 1 6.01 1 5.46 1.45 5.01 2 5.01 2 5.01 4 5.01 4 5.01 4 5.01 4 2 4 2 4 2 1 2 1 2 0.45 2 0 1.56 0 1 0 0.45 0.45 0 1 0 1 0 4 0 4 0 4 0 20 0 20 0 21.1 0 22 0.9 22 2 22 2 22 4.01 22 4.01 22 4.01 21 5.01 21 5.01 21 5.01 19.43 7.1 18 10.02Z"}))):null,this.props.colorDropOnly?t.createElement("span",{key:"colorDrop"},t.createElement("svg",{width:"13px",height:"20px",viewBox:"0 0 13 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t.createElement("g",{fill:this.props.fill?this.props.fill:"none",fillRule:"evenodd"},t.createElement("g",{stroke:"#FFFFFF"},t.createElement("path",{d:"M6.444,1.22000003 L5.521,2.66700003 C5.055,3.39800003 0.968,9.90800003 0.968,13.287 C0.968,15.411 2.457,18.783 6.454,18.783 C10.302,18.783 12.032,15.569 12.032,13.287 C12.032,9.90200003 7.857,3.39000003 7.381,2.65900003 L6.444,1.22000003 L6.444,1.22000003 Z"}))))):null)}}),define("textControls/comps/colorDrop",["create-react-class","prop-types","lodash","textControls/comps/colorDrop.rt"],function(t,e,o,n){"use strict";return t({propTypes:{fill:e.string},displayName:"colorDrop",render:n})}),define("textControls/comps/textColor.rt",["react","lodash","textControls/comps/colorDrop","textControls/comps/iconButton"],function(t,e,o,n){"use strict";return function(){return t.createElement("span",{},t.createElement(n,{onClick:this.props.onClick,tooltipValue:this.props.tooltipValue,biName:this.getBiName()},t.createElement(o,{isBackColor:this.props.isBackColor,fill:this.props.value})))}}),define("textControls/utils/ckUtils",["textControls/utils/fontUtils","util","lodash"],function(o,n,i){"use strict";return{focus:function(t){var e=t.getSelection();e.ignoreFillingCharRemoveOnSelectionChange(),t.focus(),e.resumeFillingCharRemoveOnSelectionChange()},toggleSelectionToTransparent:function(t,e){t.toggleSelectionToTransparent(e)},registerAfterUndoRedoListener:function(t,e,o){var n=o.getRawData(),s=function(){i.isEqual(n,o.getRawData())&&t()};return e?o.onAfterUndo(s):o.onAfterRedo(s),s},setOverflowCss:function(t){t.execCommand("wixCss",{id:"overFlowCss",value:"body {overflow: hidden !important;}",isLink:!1,force:!1})},removeOverflowCss:function(t){t.execCommand("wixCss",{id:"overFlowCss",value:"",isLink:!1,force:!1})},setCkReadOnly:function(t,e,o){n.browserUtil.isIE()&&!o||t.setReadOnly(e)},expandSelectionToLinks:function(t){n.browserUtil.isIE()||t.commands.expandCurrentLinkSelection()},insertUploadedFontsToCk:function(t,e){i(t).filter(function(t){return o.isUploadedFont(t)}).forEach(function(t){e.execCommand("wixCss",{id:t,value:o.getUploadedFontFace([t])})})}}}),define("textControls/comps/textColor",["create-react-class","prop-types","lodash","textControls/comps/textColor.rt","textControls/utils/ckUtils"],function(t,e,o,n){"use strict";return t({displayName:"textColor",propTypes:{tooltipValue:e.string,value:e.string,isBackColor:e.bool,onClick:e.func.isRequired},getDefaultProps:function(){return{isBackColor:!1}},getBiName:function(){return this.props.isBackColor?"textHighlight":"textColor"},render:n})}),define("textControls/comps/textBackgroundColor.rt",["react","lodash","textControls/comps/colorDrop","textControls/comps/textColor","textControls/utils/constants","baseUI"],function(o,t,e,n,s,i){"use strict";return function(){return o.createElement("span",{},this.shouldRenderDropOwn()?null:o.createElement(n,{onClick:function(){this.props.onClick()}.bind(this),tooltipValue:this.props.tooltipValue,key:"backColorButton",tooltipStyleType:this.props.tooltipStyleType,isBackColor:!0,value:this.props.color}),this.shouldRenderDropOwn()?o.createElement(i.tooltip,{value:this.props.tooltipValue,styleType:this.props.tooltipStyleType,key:"backColorDropdown"},o.createElement("span",{},o.createElement.apply(this,[i.dropDown.select,{ref:"dropdown",shouldTranslate:!1,value:this.getDropDownValue(),onChange:this.handleChange,className:"back-color-dd",optionsWidth:40,toggleIcon:!1,template:this.getTemplate,setSelectedAnyway:!0,doNotFocus:this.props.doNotFocus},t.map(s.TEXT_BACK_COLOR_TYPES,function(t,e){return o.createElement(i.dropDown.option,{value:t,className:"icons-dd-option",key:e},o.createElement(i.symbol,{name:e}))}.bind(this)),this.props.colorDrop?o.createElement(i.dropDown.option,{key:"colorDropOption",value:"customColor",className:"icons-dd-option"},o.createElement(e,{colorDropOnly:!0,fill:this.props.color})):null]))):null)}}),define("textControls/comps/textBackgroundColor",["react","create-react-class","lodash","textControls/comps/textBackgroundColor.rt","textControls/comps/colorDrop"],function(t,e,o,n,s){"use strict";return e({displayName:"backColorDropDown",render:n,getDefaultProps:function(){return{colorDrop:!0}},shouldRenderDropOwn:function(){return null!==this.props.color},getDropDownValue:function(){return null===this.props.color?"noColor":"customColor"},getTemplate:function(){return t.createElement(s,{fill:this.props.color,isBackColor:!0})},handleChange:function(t){"noColor"===t&&this.props.handleNoColor&&this.props.handleNoColor(),"customColor"===t&&this.props.onClick&&this.props.onClick()},isExpanded:function(){return this.refs.dropdown.isExpanded()}})}),define("textControls/comps/textLinkControl.rt",["react","lodash","baseUI"],function(t,e,o){"use strict";return function(){return t.createElement("span",{},this.shouldRenderDropDown()?null:t.createElement(o.toggleButton,e.assign({},{key:"linkToggleButton"},this.props)),this.shouldRenderDropDown()?t.createElement(o.tooltip,{value:this.props.tooltipValue,styleType:this.props.tooltipStyleType,key:"textLinkDropdown"},t.createElement("span",{},t.createElement(o.dropDown.select,{ref:"dropdown",shouldTranslate:!1,onChange:this.handleChange,className:"text-link-dd",optionsWidth:40,toggleIcon:!1,value:"link",setSelectedAnyway:!0,onExpand:this.props.onExpand,doNotFocus:!0},t.createElement(o.dropDown.option,{value:"unlink",className:"link-dd-option"},t.createElement("div",{className:"link-icon-container"},t.createElement(o.symbol,{name:"textUnlink",key:"textUnlink"}))),t.createElement(o.dropDown.option,{value:"link",className:"link-dd-option"},t.createElement("div",{className:"link-icon-container"},t.createElement(o.symbol,{name:"textLink",key:"textLink"})))))):null)}}),define("textControls/comps/textLinkControl",["create-react-class","lodash","textControls/comps/textLinkControl.rt"],function(t,e,o){"use strict";return t({displayName:"textLinkControl",render:o,shouldRenderDropDown:function(){return!0===this.props.value&&!this.props.disabled},handleChange:function(t){"unlink"===t?this.props.onUnlink():"link"===t&&this.props.onChange()},isExpanded:function(){return this.refs.dropdown.isExpanded()}})}),define("textControls/comps/textStyle.rt",["react","lodash","baseUI"],function(o,t,n){"use strict";return function(){return o.createElement(n.tooltip,{value:this.props.tooltipValue,disabled:!this.props.tooltipValue,styleType:this.props.tooltipStyleType},o.createElement("div",{style:{display:"inline"}},o.createElement.apply(this,[n.dropDown.select,{label:this.props.label,value:this.getValue(),onChange:this.props.onChange,ref:"dropdown",infoText:this.props.infoText,infoTitle:this.props.infoTitle,optionsWidth:this.props.optionsWidth,className:"text-style-dd "+(this.props.toolbarMode?"toolbar-mode":"")+" "+(this.props.className?this.props.className:""),setSelectedAnyway:!0,doNotFocus:this.props.doNotFocus},t.map(this.getStyleOptions(),function(t,e){return o.createElement(n.dropDown.option,{value:t.cssClass,key:t.displayName+t.family,className:"style-option "+(this.props.optionsClass?this.props.optionsClass:"")},o.createElement("div",{className:"style-option-header"},o.createElement("div",{className:"style-color-container"},o.createElement("span",{className:"style-color",style:{backgroundColor:t.cssColor}})),o.createElement("span",{className:"style-name",style:this.getDisplayStyle(t)},this.translateIfNeeded(t.displayName))),o.createElement("div",{className:"style-option-footer"},o.createElement("span",{className:"style-size"},t.size),o.createElement("span",{className:"style-tag"},"<",t.seoTag,">")),o.createElement("div",{className:"style-option-label"},o.createElement("span",{className:"display-name"},this.translateIfNeeded(t.displayName)),o.createElement("span",{className:"custom-style-indicator"},"*")))}.bind(this)),this.isCustom()?o.createElement(n.dropDown.option,{key:"textStyleCustom",value:this.props.value,className:"style-option",style:{display:"none"}},"\n                ",this.state.nullLabel,"\n            "):null])))}}),define("textControls/comps/textStyle",["create-react-class","prop-types","lodash","textControls/comps/textStyle.rt","textControls/utils/constants","textControls/utils/fontUtils","util","experiment"],function(t,e,s,o,n,i,r,l){"use strict";return t({displayName:"textStyle",mixins:[r.translationMixin],propTypes:{nullLabel:e.string},getNullLabelFromProps:function(){return this.props.nullLabel||this.translateIfNeeded("list_design_panel_Customize_TextField_CustomTheme_DropdownItem_Label")},getInitialState:function(){return{nullLabel:this.getNullLabelFromProps()}},getDefaultProps:function(){return{stylesMap:n.DEFAULT_STYLES_MAP,toolbarMode:!1,optionsWidth:264}},getStyleOptions:function(){return s.map(this.props.stylesMap,s.bind(function(t){var e=i.getStyleFont(t.cssClass,this.props.themeColors,this.props.themeFonts),o=s.assign(e,s.pick(t,["seoTag","cssClass","displayName"]));if(l.isOpen("text_themes_sdk")&&this.props.isDeveloperMode&&/^font_[7-9]$/.test(o.cssClass)){var n=Number(o.cssClass.replace(/.*(\d)/,"$1"))-6;o.seoTag='p class="P'+n+'"'}return o},this))},getDisplayStyle:function(t){return{fontWeight:t.weight,fontFamily:t.family+","+t.fontWithFallbacks,fontSize:parseInt(t.size,10)<=28?t.size:"28px",fontStyle:t.style}},isExpanded:function(){return this.refs.dropdown.isExpanded()},getValue:function(){return s.get(this.props.value,"class")||this.props.value},render:o,isCustom:function(){return!s.some(this.props.stylesMap,{cssClass:this.getValue()})}})}),define("textControls/comps/textEffectButton.rt",["react","lodash"],function(t,e){"use strict";return function(){return t.createElement("span",{className:this.props.className},t.createElement("button",{className:e({"text-effect-button":!0,selected:this.props.isSelected}).transform(function(t,e,o){e&&t.push(o)},[]).join(" "),onClick:this.props.onClick},t.createElement("span",{},this.props.children)))}}),define("textControls/comps/textEffectButton",["create-react-class","lodash","textControls/comps/textEffectButton.rt"],function(t,e,o){"use strict";return t({displayName:"textEffectButton",render:o})}),define("textControls/comps/textEffects.rt",["react","lodash","textControls/comps/textEffectButton","santa-editor-symbols","baseUI","constants"],function(o,t,n,e,s,i){"use strict";return function(){return o.createElement.apply(this,["div",{className:"text-effect-container"},o.createElement(s.tooltip,{value:"text_editor_effects_tooltip_no_effect",styleType:i.UI.TOOLTIP.STYLE_TYPE.SMALL},o.createElement("span",{onClick:function(){this.handleOnChange("effect_0")}.bind(this),className:"text-none-icon "+("EFFECT_0"===this.props.value?"selected":"")})),t.map(this.getShadowEffects(),function(t,e){return o.createElement(n,{isSelected:this.props.value===e,onClick:function(t,e){this.handleOnChange(e)}.bind(this,t,e),key:e,className:e},o.createElement("span",{className:"text-shadow-effect",style:{textShadow:t.cssData}},this.translateIfNeeded("text_editor_"+e)))}.bind(this))])}}),define("textControls/comps/textEffects",["create-react-class","prop-types","lodash","textControls/comps/textEffects.rt","util","baseUI"],function(t,e,o,n,s,i){"use strict";return t({displayName:"textEffects",mixins:[s.translationMixin,i.reportUIChangeMixin],render:n,getDefaultProps:function(){return{value:"effect_0",onChange:function(){}}},contextTypes:{reportUIChange:e.func},getShadowEffects:function(){var t=o.clone(this.props.shadowEffects);return t.effect_0&&delete t.effect_0,t},handleOnChange:function(t){this.props.onChange(t);var e="effect_0"===t?"none":t;this.reportUIChange({value:e,control_name:"text_effects"})}})}),define("textControls/comps/lineHeight.rt",["react","lodash","baseUI","baseUILib"],function(t,e,o,n){"use strict";return function(){return t.createElement("div",{className:"control-line-height"},t.createElement(n.Composites.RadioButtonsLabeled,{},this.props.infoText||this.props.infoTitle?t.createElement(n.InfoIcon,{key:"lineHeightInfo",title:this.props.infoTitle,text:this.props.infoText}):null,t.createElement(n.TextLabel,{value:"text_editor_line_spacing_label"}),t.createElement(n.RadioButtons,{value:this.getSelectedOption(),className:"line-spacing",options:this.props.options||this.getDefaultOptions(),onChange:this.selectionChange})),"custom"===this.getSelectedOption()?t.createElement("div",{key:"line-height-slider",className:"slider-wrapper"},t.createElement(o.slider,{value:this.getLineHeightValue(),min:.5,max:3,stepperMax:9,stepperStep:.01,step:.1,onChange:this.handleSliderChange,onSlideEnd:this.props.onSlideEnd})):null)}}),define("textControls/comps/lineHeight",["create-react-class","prop-types","lodash","textControls/comps/lineHeight.rt","baseUI","util"],function(t,e,o,n,s,i){"use strict";return t({displayName:"lineHeight",render:n,mixins:[s.inputMixin,i.translationMixin],propTypes:{infoText:e.string,infoTitle:e.string,options:e.arrayOf(e.shape({label:e.string.isRequired,value:e.string.isRequired})),label:e.string,value:e.oneOfType([e.string,e.number])},getDefaultOptions:function(){return[{value:"auto",label:"text_editor_line_spacing_automatic"},{value:"custom",label:"text_editor_line_spacing_customize"}]},getSelectedOption:function(){return""===this.props.value?"auto":"custom"},handleSliderChange:function(t){i.valueLink.callOnChangeIfExists(this.props,t)},getLineHeightValue:function(){return""===this.props.value?"auto":parseFloat(this.props.value)},selectionChange:function(t){"auto"===t?i.valueLink.callOnChangeIfExists(this.props,t):""===this.props.value&&i.valueLink.callOnChangeIfExists(this.props,1.2)}})}),define("textControls/comps/richTextFrame.rt",["react","lodash","util"],function(t,e,o){"use strict";return function(){return t.createElement(o.outerClick,{onOuterClick:this.props.onOuterClick},t.createElement("div",{},this.props.children))}}),define("textControls/comps/richTextFrame",["create-react-class","textControls/comps/richTextFrame.rt"],function(t,e){"use strict";return t({displayName:"richTextFrame",render:e})}),define("textControls/comps/textPopup.rt",["react","lodash","textControls/comps/iconButton","util"],function(t,e,o,n){"use strict";return function(){return t.createElement(n.outerClick,{onOuterClick:this.hide},t.createElement("div",{className:"text-popup-control"},t.createElement("span",{},t.createElement(o,{ref:"popupButton",isSelected:this.state.popupOpen,style:{width:this.props.width},onClick:this.togglePopup,popupMode:!0,name:this.props.iconName},this.props.label?t.createElement("span",{key:"textPopupLabel"},this.props.label):null)),t.createElement("div",{className:"tri with-shadow",style:{visibility:this.state.popupOpen?"visible":"hidden"}}),t.createElement("div",{className:"text-popup with-shadow",ref:"popupContainer",style:{visibility:this.state.popupOpen?"visible":"hidden"}},t.createElement("span",{},this.props.children)),t.createElement("div",{className:"tri cover-shadow",style:{visibility:this.state.popupOpen?"visible":"hidden"}})))}}),define("textControls/comps/textPopup",["reactDOM","create-react-class","prop-types","lodash","textControls/comps/textPopup.rt"],function(s,t,e,o,n){"use strict";return t({displayName:"textPopup",propTypes:{label:e.string,iconName:e.string,width:e.number},getInitialState:function(){return{popupOpen:!1}},togglePopup:function(){var t=!this.state.popupOpen;this.setState({popupOpen:t}),t&&this.setPopupPosition()},hide:function(){this.state.popupOpen&&this.setState({popupOpen:!1})},setPopupPosition:function(){var t=s.findDOMNode(this.refs.popupButton).getBoundingClientRect();if(this.refs.popupContainer){var e=s.findDOMNode(this.refs.popupContainer),o=0-e.getBoundingClientRect().width/2,n=t.height+10;e.style.setProperty("bottom",n+"px"),e.style.setProperty("right",o+"px")}},render:n})}),define("textControls/comps/themeFontsLoaderMapper",["stateManagement"],function(t){"use strict";var o=t.editorPlugins.uploadedFonts.selectors;return function(t){var e=t.state;return{uploadedFontsList:o.getList(e)}}}),define("textControls/comps/themeFontsLoader.rt",["react","lodash"],function(o,t){"use strict";return function(){return o.createElement.apply(this,["div",{},t.map(this.getCssLinks(),function(t,e){return o.createElement("link",{type:"text/css",key:e,href:t,rel:"stylesheet"})}.bind(this)),t.map(this.props.uploadedFontsList,function(t,e){return o.createElement("style",{key:e,dangerouslySetInnerHTML:{__html:t.fontFace}})}.bind(this)),t.map(this.getUploadedThemeFonts(this.props.themeFonts),function(t,e){return o.createElement("style",{key:e,dangerouslySetInnerHTML:{__html:this.createUploadedFontFace(t)}})}.bind(this))])}}),define("textControls/comps/themeFontsLoader",["create-react-class","prop-types","lodash","textControls/utils/fontUtils","core","util","textControls/comps/themeFontsLoaderMapper","textControls/comps/themeFontsLoader.rt"],function(t,e,o,n,s,i,r,l){"use strict";var a=i.hoc,c=a.connect,p=a.STORES.STATE_ONLY,u=t({displayName:"themeFontsLoader",mixins:[s.mixins.editorAPIMixin],propTypes:{uploadedFontsList:e.array,themeFonts:e.object},getCssLinks:function(){return this.getEditorAPI().dsRead.fonts.css.getUrls()},render:l,shouldComponentUpdate:function(t){return!o.isEqual(t,this.props)},createUploadedFontFace:function(t){return n.getUploadedFontFace([t])},getUploadedThemeFonts:function(){return o.filter(n.getThemeFontFamilies(this.props.themeFonts),function(t){return n.isUploadedFont(t)})}}),d=c(p,r)(u);return d.pure=u,d}),define("textControls/comps/saveTextStyleConfirmation.rt",["react","lodash","panels","baseUI","baseUILib"],function(t,e,o,n,s){"use strict";return function(){return t.createElement(o.frames.focusPanelFrame,{ref:"frame",key:"saveTextConfirmationPanel",helpId:"1df23b96-45a4-41e0-b356-e1ee05308c9b",className:"text-style-save-confirm-panel",title:this.translateIfNeeded("text_editor_save_theme_dialog_header"),panelName:this.props.panelName},t.createElement("div",{className:"text-style-save-confirm-content"},t.createElement("div",{className:"image-container",key:"save-your-theme-clipart"},t.createElement(n.symbol,{name:"save-your-theme-clipart"})),t.createElement("div",{className:"description-container"},t.createElement("span",{className:"description-text"},this.translateIfNeeded("text_editor_save_theme_dialog_text_1")),t.createElement("span",{className:"description-text bold"}," '",this.props.textStyleName,"' "),t.createElement("span",{className:"description-text"},this.translateIfNeeded("text_editor_save_theme_dialog_text_2")),t.createElement("div",{className:"learn-more-link-container"},t.createElement("a",{className:"learn-more-link",onClick:this.openLearnMore},this.translateIfNeeded("text_editor_save_theme_dialog_learn_more")))),t.createElement("div",{className:"footer-buttons"},t.createElement(s.Checkbox,{label:"text_editor_save_theme_dialog_dont_show",value:this.props.dontShowAgain,onChange:this.props.toggleDontShowAgain,labelAfterSymbol:!0}),t.createElement(n.button,{onClick:this.handleOnSave,className:"save-button btn-md",label:"text_editor_save_theme_confirm_button"}))))}}),define("textControls/comps/saveTextStyleConfirmation",["create-react-class","prop-types","util","core","higherOrderComponents","stateManagement","constants","textControls/comps/saveTextStyleConfirmation.rt"],function(t,e,o,n,s,i,r,l){"use strict";var a=t({displayName:"saveTextStyleConfirmation",propTypes:{panelName:e.string.isRequired,dontShowAgain:e.bool,toggleDontShowAgain:e.func.isRequired,onConfirm:e.func.isRequired,textStyleName:e.string.isRequired},mixins:[o.translationMixin,n.mixins.editorAPIMixin],handleOnSave:function(){this.props.onConfirm(),this.close()},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},openLearnMore:function(){var t=this.getEditorAPI(),e={panel_name:this.props.panelName,origin:r.BI.HELP.ORIGIN.PANEL,component:t.selection.getSelectedComponentType(),learn_more:!0};t.panelManager.openHelpCenter("1df23b96-45a4-41e0-b356-e1ee05308c9b",null,e)},render:l}),c=i.bi.hoc.reportBiEventOnUiChange(s.linkUserPreferences({userPrefType:"session"})(a));return c.pure=a,c}),define("textControls/utils/dataUtils",["lodash","zepto","textControls/utils/constants"],function(r,l,a){"use strict";function e(t){var e=window.document.createElement("div");return e.innerHTML=t,e.textContent}return{getTextContentFromHtml:e,isEmptyHtmlText:function(t){return e(t).replace(/[\u200b\s]/g,"").length<1},wrapOrphans:function(t){if(!r.isString(t))return t;var e,o,n=(e=t.trim(),(o=window.document.createElement("div")).innerHTML=e,r.compact(o.childNodes)),s=l("<div>"),i=void 0;return r.forEach(n,function(t){var e;(e=t).nodeName&&r.includes(a.TEXT_BLOCKS,e.nodeName.toLowerCase())?(i&&(s.append(i),i=void 0),s.append(t)):0<t.textContent.trim().length&&(i=i||l("<p>").addClass(a.DEFAULT_STYLES_MAP.div.cssClass)).append(t)}),i&&s.append(i),s.html()}}}),define("textControls/utils/textLinkManager",[],function(){"use strict";return function(o){this.convertExternalLinkToLinkRef=function(t){return o.createLinkFromHref(t)},this.convertLinkRefToLinkRef=function(t){return o.duplicateLink(t)},this.convertLinkRefToAttributes=function(t){var e=o.getLink(t);return e?{dataquery:"#"+e.id}:null},this.convertAttributesToLinkRef=function(t){return t.dataquery&&t.dataquery.slice(1)}}}),define("textControls/utils/linksHelper",["lodash","util"],function(o,s){"use strict";var n={};function t(t,e){this.setCurrentLinks(t),this.setNonPasteableLinkTypes(e)}return t.prototype.getLink=function(t){return this._links[t]},t.prototype.setNonPasteableLinkTypes=function(t){this.nonPasteableLinkTypes=t},t.prototype.getAllLinks=function(){return o.map(this._links)},t.prototype.setCurrentLinks=function(t){this._links={};var e=this;o.forEach(t,function(t){e._links[t.id]=t})},t.prototype.cacheCopiedLinks=function(){n=o.clone(this._links)},t.prototype.createLinkFromHref=function(t){var e={};return(e=s.validationExpressions.validUrlReg.test(t)?{type:"ExternalLink",target:"_blank",url:t}:function(t){if(!/^mailto:/i.test(t))return null;var e=t.replace(/mailto:/i,"").split("?");if(!s.validationExpressions.validEmailReg.test(e[0]))return null;var o=e[0],n=e[1];return{type:"EmailLink",recipient:o,subject:n=/^subject=/i.test(n)?n.replace(/^subject=/i,""):""}}(t))?this.saveLink(e):null},t.prototype.saveLink=function(t){return t.id=s.guidUtils.getUniqueId("textLink","_"),(this._links[t.id]=t).id},t.prototype.getLatestCopiedLink=function(t){var e=n[t];return e&&!o.includes(this.nonPasteableLinkTypes,e.type)?e:null},t.prototype.duplicateLink=function(t){var e=this.getLink(t)||this.getLatestCopiedLink(t);return e?this.saveLink(o.clone(e)):null},t}),define("textControls/utils/mobileUtils",["lodash","zepto","textControls/utils/fontUtils"],function(l,n,s){"use strict";function a(t,e){var o=n(t).css("fontSize");return o||l.forEach(t.classList,function(t){e[t]&&(o=s.parseStyleFont(t,e).size)}),o}return{getMostCommonTextSize:function(t,e){var o,n,s,i={},r=window.document.createElement("div");return r.innerHTML=t,function o(t,n,s,i){"#text"!==t.nodeName&&"#comment"!==t.nodeName&&(i=a(t,s)?a(t,s):i,l.forEach(t.childNodes,function(t){if("#text"===t.nodeName){if(i){var e=t.textContent.replace(/ /g,"").length;n[i]||(n[i]=0),n[i]+=e}}else o(t,n,s,i)}))}(r,i,e,""),parseInt((o=i,n=void 0,s="",l.forEach(o,function(t,e){(void 0===n||n<t)&&(n=t,s=e)}),s),10)},getFirstTextAlignment:function(t){return l.isString(t)&&l.get(t.match(/text\-align:\s((left|center|right|justify))/),1,"left")},getFirstColor:function(t){return l.isString(t)&&l.get(t.match(/\sclass=\"(color_\d+)\"/)||t.match(/[;"\d]color:\s?(#?[A-Z\d()]+;?)/),1)}}}),define("textControls/utils/textMigrationDomHelper",["lodash","zepto"],function(s,n){"use strict";var o=["audio","dd","dt","li","video","address","article","aside","blockquote","details","div","dl","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","menu","nav","ol","p","pre","section","table","ul","center","dir","noframes"];function e(t){if(null===t)return"null";if(t.$family)return t.$family();if(t.nodeName){if(1===t.nodeType)return"element";if(3===t.nodeType)return/\S/.test(t.nodeValue)?"textnode":"whitespace"}else if("number"==typeof t.length){if(t.callee)return"arguments";if("item"in t)return"collection"}return void 0===t?"undefined":_typeof(t)}function i(t){var e=t.attributes,o=[];if(e.length<20)o=l(e);else{var n=t.getProperties("class","style","dir","href","background","action","src","data","align","alt","color","face","label","for","link","id","name","value");s.forEach(n,function(t,e){e&&t&&o.push({name:e,value:t})})}return o}function r(t,e){if(t!==e)for(var o=void 0;o=t.firstChild;)e.appendChild(t.removeChild(o))}function l(t){return function(t){for(var e=[],o=t.length;o--;)e.unshift(t[o]);return e}(t)}function a(t){var e=t.tagName&&t.tagName.toLowerCase();return s.includes(o,e)}return{moveChildren:r,collectionToArray:l,isBlockElement:a,hasBlockElementChildren:function(t){return s.some(t.children,a)},isDomElement:function(t){return"element"===e(t)},isTextNode:function(t){return"textnode"===e(t)},isElementHasAttributes:function(t){var e=i(t);if(!e)return!1;for(var o=0;o<e.length;o++)if(e[o].value)return!0;return!1},replaceElementWithItsChildren:function(e){var o=e.parentNode,t=l(e.childNodes);s.forEach(t,function(t){o.insertBefore(t,e)}),o.removeChild(e)},renameNode:function(t,e){if(t.tagName.toLowerCase()===e.toLowerCase())return t;var o=window.document.createElement(e),n=i(t);return s.forEach(n,function(t){o.setAttribute(t.name,t.value)}),r(t,o),t.parentNode&&t.parentNode.replaceChild(o,t),o},isOnlyWhiteSpace:function(t){return t.every(function(t){return"whitespace"===e(t)})},removeClass:function(t,e){var o=n(t);o.removeClass(e),0===o.prop("class").length&&o.removeAttr("class")},setStyle:function(t,e){n(t).css(e)}}}),define("textControls/utils/textMigrationStylesHelper",["zepto","lodash","textControls/utils/textMigrationDomHelper","textControls/utils/fontUtils"],function(a,l,c,p){"use strict";function u(t){return l.find(t.classList,function(t){return l.includes(t,"font_")})||null}function d(t,e){if(u(t))return t;var o=a(t).clone();o.empty();for(var n=c.collectionToArray(t.childNodes),s=0;s<n.length;s++){var i=n[s];if(u(i)||m(i)){var r=a(i).clone();r.empty();var l=d(i,r.get(0));return o.append(a(l)),r.get(0).firstChild&&a(e).append(r),o.get(0)}a(e).append(a(i))}return o.get(0)}function h(t){if(m(t)){var e=a(t).clone(!1);e.empty();for(var o=c.collectionToArray(t.childNodes),n=0;n<o.length;n++){var s=o[n];if(u(s)||m(s)){var i=a(s).clone(!1);i.empty();var r=d(s,i);return i.get(0).firstChild&&e.append(i),a(t).before(e),a(t).before(a(r)),f(r),void h(t)}e.append(a(s))}}}function m(t){return c.isDomElement(t)&&a(t).find('span[class*="font_"]').length}function o(t,e){c.isDomElement(t)&&(u(t)&&"span"===t.tagName.toLowerCase()?e.push(t):l.forEach(t.children,function(t){e.concat(o(t,e))}));return e}function f(t){if(u(t)&&h(t),m(t)){var e=o(t,[]);l.forEach(e,h)}}var g={"font-family":"family","font-size":"size","font-style":"style","font-variant":"variant","font-weight":"weight","line-height":"lineHeight"};return{flattenStyledSpans:f,isBlockContainUnstyledText:function t(e){if(c.isTextNode(e))return!0;if(u(e))return!1;for(var o=c.collectionToArray(e.childNodes),n=0;n<o.length;n++)if(t(o[n]))return!0;return!1},getStyledSpansRecursive:o,getMostCommonStyle:function(t){var e,o,n,s={};return l.forEach(t,function(t){var e=u(t);s[e]=s[e]||0,s[e]+=t.textContent.length}),e=s,o=0,n=null,l.forEach(e,function(t,e){o<t&&(o=t,n=e)}),n},getElementStyleClass:u,getStyleDelta:function(t,e,o,n){var s=t&&p.parseStyleFont(t,o,n),i=p.parseStyleFont(e,o,n),r={};return l.forEach(g,function(t,e){s&&s[t]===i[t]||(r[e]=i[t])}),r},getColorDelta:function(t,e,o,n){var s=t&&p.parseStyleFont(t,o,n),i=p.parseStyleFont(e,o,n);return i?s&&s.color===i.color?null:"#"===i.color.charAt(0)?{isRef:!1,value:i.color}:{isRef:!0,value:i.color.replace("{","").replace("}","")}:null}}}),define("textControls/utils/textStylesMigration",["lodash","zepto","textControls/utils/textMigrationDomHelper","textControls/utils/textMigrationStylesHelper","textControls/utils/fontUtils","textControls/utils/constants"],function(p,m,f,g,C,o){"use strict";var a=["h1","h2","h3","h4","h5","h6","p","div"],n=["font_1","font_10"],u=p.transform(o.DEFAULT_STYLES_MAP,function(t,e){t[e.cssClass]=e.seoTag});function x(s,t,i,r){p.forEach(t,function(t){var e,o,n=g.getElementStyleClass(t);n===s?0===t.childNodes.length?t.remove():(o=s,m(e=t).removeClass(o),f.isElementHasAttributes(e)||f.replaceElementWithItsChildren(e)):(f.removeClass(t,n),function(t,e,o,n,s){var i=g.getStyleDelta(t,e,n,s),r=o;f.setStyle(r,i);var l=g.getColorDelta(t,e,n,s);if(!l)return;l.isRef?m(r).addClass(l.value):f.setStyle(r,{color:l.value})}(s,n,t,i,r))})}function l(t,e,o,n){var s,i,r,l,a,c=void 0;p.includes(p.keys(o),e)&&(c=C.parseStyleFont(e,o,n).lineHeight,f.setStyle(t,{"line-height":c}),r=t,l=c,a=window.document.createElement("span"),f.setStyle(a,{"line-height":l}),f.moveChildren(r,a),r.appendChild(a),s=t,i=u[e],t=f.renameNode(s,i));return t}function y(t){return e=t,p.includes(n,e)?o.FALLBACK_STYLE_CLASS:t;var e}function c(t,e,o){var n,s,i,r,l,a,c,p=g.getStyledSpansRecursive(t,[]),u=g.getMostCommonStyle(p),d=null;if(u){var h=y(u);return h!==u&&(d=u,u=h),m(t).addClass(u),x(u,p,e,o),d&&(n=t,s=u,i=d,r=e,l=o,a=C.parseStyleFont(i,r,l).size,c=C.parseStyleFont(s,r,l).size,a<c&&f.setStyle(n,{"font-size":a})),u}return null}function d(t,e,o,n,s){if(0!==t.childNodes.length){g.flattenStyledSpans(t);var i=null;if(g.isBlockContainUnstyledText(t)){var r=function(t,e,o){if(!e||!o)return null;if(t&&t.tagName===e&&t.hasClass(o))return null;var n=f.renameNode(t,e);return m(n).addClass(o),n}(t,e,o);x(null,g.getStyledSpansRecursive(r,[]),n,s)}else(i=c(t,n,s))&&l(t,i,n,s);h(t,i,n,s)}}function h(t,e,o,n){var s=m(t).find('span[class*="font_"]');s.length&&x(e,s,o,n)}function _(t,e,o,n,s){if(!f.isOnlyWhiteSpace(t)){var i=window.document.createElement("p");m(t[0]).before(m(i)),m(i).append(m(t)),d(i,e,o,n,s)}}return{migrateElement:function e(t,o,n,s,i){var r=[],l=f.collectionToArray(t.childNodes);p.forEach(l,function(t){f.isBlockElement(t)?(0<r.length&&(_(r,o,n,s,i),r=[]),!p.includes(a,t.tagName.toLowerCase())||f.hasBlockElementChildren(t)?e(t,o,n,s,i):d(t,o,n,s,i)):r.push(t)}),0<r.length&&_(r,o,n,s,i)},verifyNoStyledSpans:h}}),define("textControls/utils/textSimpleFormatMigration",["lodash","zepto","textControls/utils/textMigrationDomHelper","textControls/utils/textMigrationStylesHelper","textControls/utils/constants"],function(i,s,r,o,n){"use strict";function l(t,o,n){i.forEach(t,function(t){var e=window.document.createElement(n);r.moveChildren(t,e),r.removeClass(t,o),r.isElementHasAttributes(t)||"span"!==t.nodeName.toLowerCase()?s(t).append(s(e)):s(t).replaceWith(s(e))})}function a(t,o,n,s){i.forEach(t,function(t){r.removeClass(t,o);var e={};e[n]=s,r.setStyle(t,e)})}return{migrateElement:function(t){var e;l(s(t).find(".bold"),"bold","strong"),l(s(t).find(".italic"),"italic","em"),l(s(t).find(".underline"),"underline","u"),a(s(t).find(".alignRight"),"alignRight","text-align","right"),a(s(t).find(".alignCenter"),"alignCenter","text-align","center"),a(s(t).find(".alignJustify"),"alignJustify","text-align","justify"),e=s(t).find("ul, ol"),i.forEach(e,function(t){o.getElementStyleClass(t)||s(t).addClass(n.DEFAULT_STYLE_CLASS)})}}}),define("textControls/utils/textMigrationHandler",["lodash","textControls/utils/textStylesMigration","textControls/utils/textSimpleFormatMigration"],function(r,l,a){"use strict";return{migrateText:function(t,e,o,n,s){if(n=n||"p",s=s||"font_8",!r.isString(t))return null;if(""===t)return r.template('<<%= defaultTag %> class="<%= defaultClass %>"></<%= defaultTag %>>')({defaultTag:n,defaultClass:s});var i=window.document.createElement("div");return i.innerHTML=t,l.migrateElement(i,n,s,e,o),a.migrateElement(i),i.innerHTML}}}),define("textControls/utils/migrationUtils",["lodash","textControls/utils/textMigrationHandler"],function(u,d){"use strict";return{isOldTextComponent:function(t,e){var o=e.components.getType(t),n=e.components.data.get(t);return"wysiwyg.viewer.components.WRichText"===o&&n&&"StyledText"!==n.type&&"MediaRichText"!==n.type},migrateComponent:function(t,e,o){var n,s,i,r,l,a,c,p=e.components.data.get(t);n=p,s=e.theme.fonts.getAll(),i=e.theme.colors.getAll(),a=d.migrateText(n.text,s,i,r,l),(c=u.omit(n,function(t,e){return!u.includes(["id","metaData"],e)})).type="StyledText",c.stylesMapId="CK_EDITOR_PARAGRAPH_STYLES",c.text=a,p=c,o.components.data.update(t,p,!0),o.components.style.connectToTheme(t,"txtNew")}}}),define("textControls/mixins/textTooltipMixin",["react","baseUI","util"],function(o,n,s){"use strict";return{getTooltipValue:function(t,e){return"bold"===t||"italic"===t||"underline"===t?this.getTooltipWithShortcut(t,e):"text_editor_buttons_tooltip_"+t},getTooltipWithShortcut:function(t,e){return o.createElement(n.popoverTemplates.keyboardShortcutTooltip,{label:"text_editor_buttons_tooltip_"+t,shortcut:s.browserUtil.getKeyboardSpecialKey().label+" + "+e})}}}),define("textControls/mixins/textEditorMixin",["lodash","prop-types","util","textControls/utils/ckUtils","textControls/utils/constants","textControls/utils/colorUtils"],function(i,t,l,r,a,c){"use strict";var p=l.browserUtil;function e(t,e){t.execCommand(e)}function o(t){r.expandSelectionToLinks(t)}function n(t){t.openLinkDialog()}function s(t){t.removeLink()}return{propTypes:{isLinkDialogClosed:t.bool.isRequired,isColorPickerClosed:t.bool.isRequired},isCkReady:function(){return!!this.props.textManager},execCommand:function(t,e,o){this.isCkReady()&&this.props.textManager.execCommand(t,e,o)},getValue:function(t){return this.isCkReady()?this.props.cmdState[t]:""},getListType:function(){return this.getValue(a.TEXT_LIST_TYPES.textListNumbers)?a.TEXT_LIST_TYPES.textListNumbers:this.getValue(a.TEXT_LIST_TYPES.textListBullets)?a.TEXT_LIST_TYPES.textListBullets:a.TEXT_LIST_TYPES.textListNone},getTextAlignment:function(){var e=this;return i.find(a.ALIGNMENT_TYPES,function(t){return e.getValue(t)})},execListCommand:function(t){var e=this.getListType();t!==e&&(t===a.TEXT_LIST_TYPES.textListNone?this.execCommand(e):this.execCommand(t)),this.focus()},execLineHeightCommand:function(t){"auto"===t?this.execCommand("lineHeight",a.CK_OFF):this.execCommand("lineHeight",t+"em")},getLineHeightValue:function(){return this.getValue("lineHeight")},changeAlignment:function(t){t!==this.getTextAlignment()&&this.execCommand(t),this.focus()},getBackColorValue:function(){if(this.isCkReady()){var t=this.getValue("backColor");return""===t?null:i.startsWith(t,"back")?this.props.themeColors[t.replace("back","")]:t}},getForeColorValue:function(){var t=this.getValue("foreColor");return i.startsWith(t,"color")?this.props.themeColors[t]:t},prepareColorPickerParams:function(t,e){var o=t?"foreColor":"backColor",n=t?this.getValue(o):this.getBackColorValue(),s=l.colors.getColorInHex(n),i=c.getColorValueFromTheme(n,this.props.themeColors),r=this.props.textManager.hasSelection();return{colorCommand:o,colorValue:n=i||s,originalColor:s,isOriginalColorFromTheme:t&&this.isColorFromTheme(),themeColorValue:i,previewOnHover:r,position:e}},execColorPickerChangeCommand:function(t,e,o,n,s){this.props.isColorPickerClosed||(r.setCkReadOnly(this.props.textManager,!1),i.startsWith(t,"color")&&i.startsWith(e,"back")&&(t="back"+t),s&&t===o?this.execCommand(e,a.CK_OFF,{execWithoutHistory:n}):this.execCommand(e,t,{execWithoutHistory:n}),r.setCkReadOnly(this.props.textManager,!0))},handleColorClick:function(t,e){var n=this,s=this.prepareColorPickerParams(t,e);r.setCkReadOnly(this.props.textManager,!0),this.props.openColorPicker(function(t,e){var o=c.getColorPickerValue(t);n.execColorPickerChangeCommand(o,s.colorCommand,s.originalColor,e,s.isOriginalColorFromTheme)},s.colorValue,!0,s.position,s.previewOnHover,!1),this.forceIsCustomStyleValue=this.isCustomStyle()},isColorFromTheme:function(){return this.getValue("foreColor")===a.CK_OFF},componentWillReceiveProps:function(t){!this.props.isLinkDialogClosed&&t.isLinkDialogClosed&&this.focus(),this.props.isColorPickerClosed!==t.isColorPickerClosed&&(r.toggleSelectionToTransparent(this.props.textManager,!t.isColorPickerClosed),t.isColorPickerClosed&&(this.focus(),r.setCkReadOnly(t.textManager,!1),this.forceIsCustomStyleValue=void 0))},getFormatBlockValue:function(){return this.isCkReady()?this.getValue("formatBlock"):""},getFormatBlockCss:function(){return this.isCkReady()?i.get(this.getValue("formatBlock"),"class")||"font_8":""},getFormatBlockHtmlTag:function(){return this.isCkReady()?i.get(this.getValue("formatBlock"),"tag")||"p":""},execFormatBlockCommand:function(t){var e=a.CLASS_TO_FONT[t];this.execCommand("formatBlock",e),this.focus()},resetBlocks:function(){this.execCommand("formatBlock",{getNewBlockValue:function(t){return a.CLASS_TO_FONT[t]}}),this.focus()},execSEOTagChange:function(t){this.execCommand("formatBlock",{tag:t,shouldRetainThemesAndStyles:!0}),this.focus()},execNoBackColor:function(){return this.execCommand("backColor",a.CK_OFF)},handleFontFamilyChange:function(t){r.insertUploadedFontsToCk([t],this.props.textManager),this.execCommand("fontFamily",t)},focus:function(){if(this.props.textManager){var t=this.props.textManager;window.setTimeout(function(){t.focus()},0)}},isCustomStyle:function(){if(void 0!==this.forceIsCustomStyleValue)return this.forceIsCustomStyleValue;var e=!1;if(this.props.cmdState){var o=this,n=this.getFormatBlockCss();i.forEach(a.STYLE_COMMANDS,function(t){n&&o.props.cmdState[t]!==o.props.themeMap[n][t]&&(e=!0)})}return e},canPerformSaveTheme:function(){return this.props.isColorPickerClosed&&this.isCustomStyle()&&this.props.textManager&&!this.props.textManager.isMultipleBlockSelection()},getBoldProps:function(){return{name:"textBold",instanceId:"textBold",tooltipValue:this.getTooltipValue("bold","B"),value:this.getValue("bold"),onChange:i.partial(e,this,"bold")}},getItalicProps:function(){return{name:"textItalic",instanceId:"textItalic",tooltipValue:this.getTooltipValue("italic","I"),value:this.getValue("italic"),onChange:i.partial(e,this,"italic")}},getUnderlineProps:function(){return{name:"textUnderline",instanceId:"textUnderline",tooltipValue:this.getTooltipValue("underline","U"),value:this.getValue("underline"),onChange:i.partial(e,this,"underline")}},getLinkProps:function(){return{name:"textLink",instanceId:"textLink",tooltipValue:this.shouldDisableLinkButton()?(t=this.props.textManager,t.hasSelection()?"text_editor_link_disabled_2":"text_editor_link_disabled"):this.getTooltipValue("link"),value:this.hasLink(),onChange:i.partial(n,this),disabled:this.shouldDisableLinkButton(),onUnlink:i.partial(s,this),onExpand:i.partial(o,this.props.textManager)};var t},shouldDisableLinkButton:function(){return this.getValue("wixLink")===a.CK_DISABLED||this.props.isEditingRepeatedTextComp&&this.props.textManager&&this.props.textManager.isAllSelected()},getBulletsItems:function(){return this.getValue("bidiltr")?a.TEXT_LIST_TYPES:a.TEXT_LIST_TYPES_RTL},getBulletsIconName:function(){return this.getValue("bidiltr")?"textListBullets":"textListBulletsRight"},hasLink:function(){return!i.isEmpty(this.getValue("wixLink"))&&!this.shouldDisableLinkButton()},removeLink:function(){this.execCommand("wixUnlink")},openLinkDialog:function(){var o=this,t=this.getValue("wixLink"),e=(this.props.getLink||this.props.linksHelper.getLink.bind(this.props.linksHelper))(t),n=e&&e.id;function s(t){var e=(o.props.saveLink||o.props.linksHelper.saveLink.bind(o.props.linksHelper))(t);e&&o.execCommand("wixLink",e)}p.isIE()&&r.expandSelectionToLinks(this.props.textManager),this.props.openLinkPanel(e,i.once(function(t){var e;(e=t)&&"EmailLink"===e.type&&!e.subject&&(e.subject=""),n?t?s(t):o.removeLink():t&&s(t)}))},linkFontSize:function(){return{value:this.getValue("fontSize"),requestChange:function(t,e){e?this.execCommandWithoutFocus("fontSize",t+"px"):this.execCommand("fontSize",t+"px")}.bind(this)}},handleFontSizeEnd:function(){this.focus()},linkSpacing:function(){return{value:parseFloat(this.getValue("letterSpacing")),requestChange:function(t,e){e?this.execCommandWithoutFocus("letterSpacing",t+"em"):this.execCommand("letterSpacing",t+"em")}.bind(this)}},execCommandWithoutFocus:function(t,e){this.execCommand(t,e,{execWithoutFocus:!0})},registerSaveThemeUndoRedoHandler:function(t,e){var o=e?"undo":"redo";this.savedThemeSnapshotListener||(this.savedThemeSnapshotListener={}),this.savedThemeSnapshotListener[o]&&this.props.textManager.unRegisterListener(this.savedThemeSnapshotListener[o]),this.savedThemeSnapshotListener[o]=r.registerAfterUndoRedoListener(t,e,this.props.textManager)}}}),define("textControls/mixins/textBiMixin",["coreBi","lodash"],function(o,s){"use strict";return{sendTextBiEvent:function(t,e){this.getEditorAPI().bi.event(o.events.textControls[t],e)},sendTextBiEventWithPanelName:function(t,e){var o=this.constructor.displayName,n=s.merge({panel_name:o},e);this.sendTextBiEvent(t,n)}}}),define("textControls/utils/textLimitsUtils",["lodash","textControls/utils/ckUtils","textControls/utils/constants"],function(i,o,n){"use strict";var r="panels.focusPanels.createNewTextBoxPanel",s=void 0;return{handleTextLengthExceeded:function(t,e){var n,s;i.defer(function(){e.undo(),o.setCkReadOnly(e,!0,!0)}),n=t,(s=e).onKey(function t(e){var o;e&&(o=n,!i.find(o.getOpenPanels(),{name:r}))?s.unRegisterListener(t()):e&&27===e.keyCode&&(n.closePanelByName(r),s.unRegisterListener(t()))}),t.openPanel(r,{isSingleInstance:!0},!0)},setCachedTextReadableLength:function(t){s=t},isNewTextLengthLimitExceeded:function(t){return t>n.MAX_TEXT_LENGTH&&(e=t,Math.max(e,s)>s);var e}}}),define("textControls/comps/textToolBar.rt",["react","lodash","textControls/comps/iconButton","textControls/comps/textColor","textControls/comps/fontFamily","textControls/comps/textStyle","textControls/comps/textPopup","textControls/comps/lineHeight","textControls/comps/iconsDropDown","textControls/comps/textBackgroundColor","textControls/comps/textLinkControl","textControls/utils/constants","constants","baseUI"],function(e,o,n,s,i,r,l,a,c,p,u,d,h,m){"use strict";return function(){return function(){var t=h.UI.TOOLTIP.STYLE_TYPE.SMALL;return e.createElement("div",{className:"rich-text-toolbar",key:"richTextToolBar"},e.createElement("section",{},e.createElement(r,{value:this.getFormatBlockCss(),themeColors:this.props.themeColors,ref:"textStyle",tooltipStyleType:t,themeFonts:this.props.themeFonts,toolbarMode:!0,hasSmallArrow:!0,tooltipValue:"text_editor_theme_label",optionsWidth:264,onChange:function(t,e){this.execFormatBlockCommand(e)}.bind(this,t),isDeveloperMode:this.props.isDeveloperMode}),e.createElement(i,{ref:"fontFamily",tooltipStyleType:t,value:this.getValue("fontFamily"),onChange:function(t,e){this.handleFontFamilyChange(e)}.bind(this,t),tooltipValue:"text_editor_font_label",fonts:this.props.fonts,toolbarMode:!0}),e.createElement(l,{label:this.getValue("fontSize")+" px",width:71,ref:"fontSizePopUp"},e.createElement(m.slider,{label:"text_editor_font_size_label",id:"font-size-slider",value:this.getValue("fontSize"),min:6,max:176,stepperMax:999,onChange:function(t,e){this.execCommand("fontSize",e+"px")}.bind(this,t),onSlideEnd:this.focus})),e.createElement(m.toggleButton,this.getBoldProps()),e.createElement(m.toggleButton,this.getItalicProps()),e.createElement(m.toggleButton,this.getUnderlineProps()),e.createElement(s,{value:this.getForeColorValue(),onClick:function(t){this.onColorClick(!0)}.bind(this,t),tooltipValue:this.getTooltipValue("text_color"),tooltipStyleType:t,ref:"foreColorButton"}),e.createElement(p,{ref:"backColorButton",color:this.getBackColorValue(),onClick:function(t){this.onColorClick(!1)}.bind(this,t),handleNoColor:this.execNoBackColor,tooltipValue:this.getTooltipValue("text_highlight"),tooltipStyleType:t}),e.createElement(u,o.assign({},{ref:"linkDropdownOption",key:"linkDropdownOption",tooltipStyleType:t},this.getLinkProps())),e.createElement(n,{onClick:function(t){this.execCommand("resetThemeAndStyles")}.bind(this,t),name:"textRemoveFormat",tooltipValue:"text_editor_reset_button",tooltipStyleType:t}),e.createElement("span",{className:"expand-toolbar-button",onClick:function(t){this.toggleToolbar()}.bind(this,t)},this.state.extraToolbarOpened?null:e.createElement("span",{className:"more-text",key:"richTextToolBarMore"},e.createElement(m.symbol,{name:"accordionClose"}),e.createElement("span",{},this.translateIfNeeded("list_dbe_edit_item_text_toolbar_more"))),this.state.extraToolbarOpened?e.createElement("span",{className:"less-text",key:"richTextToolBarLess"},e.createElement(m.symbol,{name:"accordionOpen"}),e.createElement("span",{},this.translateIfNeeded("list_dbe_edit_item_text_toolbar_less"))):null)),this.state.extraToolbarOpened?e.createElement("div",{key:"richTextToolBarDivider",className:"toolbar-divider"}):null,this.state.extraToolbarOpened?e.createElement("section",{key:"richTextToolBarExtraControls"},e.createElement(c,{ref:"textAlign",className:"align-dd",value:this.getTextAlignment(),onChange:function(t,e){this.changeAlignment(e)}.bind(this,t),items:d.ALIGNMENT_TYPES,tooltipValue:this.getTooltipValue("alignment"),tooltipStyleType:t}),e.createElement(c,{ref:"textBullets",className:"bullets-dd",value:this.getListType(),onChange:function(t,e){this.execListCommand(e)}.bind(this,t),items:this.getBulletsItems(),tooltipValue:this.getTooltipValue("bullets_and_numbering"),tooltipStyleType:t,fixedIconName:this.getBulletsIconName()}),e.createElement(n,{onClick:function(t){this.execCommand("outdent")}.bind(this,t),name:this.getValue("bidiltr")?"textOutdentLeft":"textOutdentRight",tooltipValue:this.getTooltipValue("decrease_indent"),tooltipStyleType:t}),e.createElement(n,{onClick:function(t){this.execCommand("indent")}.bind(this,t),name:this.getValue("bidiltr")?"textIndentLeft":"textIndentRight",tooltipValue:this.getTooltipValue("increase_indent"),tooltipStyleType:t}),e.createElement(l,{iconName:"textLineHeight",ref:"lineHeightPopUp"},e.createElement(a,{value:this.getLineHeightValue(),onChange:function(t,e){this.execLineHeightCommand(e)}.bind(this,t),onSlideEnd:this.focus})),e.createElement(l,{iconName:"textCharSpacing",ref:"charSpacingPopUp"},e.createElement(m.slider,{valueLink:this.linkSpacing(),min:-.1,max:.7,stepperMin:-.4,stepperMax:3,step:.05,stepperStep:.01,label:"text_editor_character_spacing_label",onSlideEnd:this.focus})),this.getValue("bidirtl")?e.createElement(n,{onClick:function(t){this.execCommand("bidiltr")}.bind(this,t),key:"richTextWriteLTR",name:"textWriteDirectionLeft",tooltipValue:this.getTooltipValue("text_direction"),tooltipStyleType:t}):null,this.getValue("bidiltr")?e.createElement(n,{onClick:function(t){this.execCommand("bidirtl")}.bind(this,t),key:"richTextWriteRTL",name:"textWriteDirectionRight",tooltipValue:this.getTooltipValue("text_direction"),tooltipStyleType:t}):null):null)}.apply(this,[])}}),define("textControls/comps/textToolBar",["reactDOM","create-react-class","lodash","zepto","util","textControls/mixins/textEditorMixin","textControls/mixins/textTooltipMixin","baseUI","textControls/comps/textToolBar.rt"],function(s,t,e,i,o,n,r,l,a){"use strict";return t({displayName:"textToolBar",mixins:[o.translationMixin,n,r,l.inputMixin],render:a,getInitialState:function(){return{extraToolbarOpened:!1}},componentWillUnmount:function(){this.state.extraToolbarOpened&&this.changeRichTextHeight(!1)},isAnyDropdownOpen:function(){return t=[this.refs.textStyle,this.refs.fontFamily,this.refs.textBullets,this.refs.textAlign,this.refs.backColorButton&&this.refs.backColorButton.refs.dropdown,this.refs.linkDropdownOption&&this.refs.linkDropdownOption.refs.dropdown],e.some(t,function(t){return t&&t.isExpanded()});var t},toggleToolbar:function(){var t=!this.state.extraToolbarOpened;this.setState({extraToolbarOpened:t}),this.changeRichTextHeight(t)},getColorPickerPosition:function(t){var e=t?s.findDOMNode(this.refs.foreColorButton):s.findDOMNode(this.refs.backColorButton),o=i(e).offset(),n=o.top-i(window).scrollTop();return{top:n<=370?n+40:n-370,left:o.left}},onColorClick:function(t){var e=this.getColorPickerPosition(t);this.handleColorClick(t,e)},changeRichTextHeight:function(t){var e=this.props.textManager.getDimensions().height||150;t?e-=50:e+=50,this.props.textManager.resize("100%",e)}})}),define("textControls",["textControls/comps/iconButton","textControls/comps/fontFamily","textControls/comps/iconsDropDown","textControls/comps/textBackgroundColor","textControls/comps/textLinkControl","textControls/comps/textStyle","textControls/comps/textColor","textControls/comps/textEffects","textControls/comps/lineHeight","textControls/comps/richTextFrame","textControls/comps/textPopup","textControls/comps/themeFontsLoader","textControls/comps/saveTextStyleConfirmation","textControls/utils/constants","textControls/utils/fontUtils","textControls/utils/dataUtils","textControls/utils/textLinkManager","textControls/utils/linksHelper","textControls/utils/ckUtils","textControls/utils/mobileUtils","textControls/utils/migrationUtils","textControls/mixins/textTooltipMixin","textControls/mixins/textEditorMixin","textControls/mixins/textBiMixin","textControls/utils/colorUtils","textControls/utils/textLimitsUtils","textControls/comps/textToolBar"],function(t,e,o,n,s,i,r,l,a,c,p,u,d,h,m,f,g,C,x,y,_,T,v,E,k,S,b){"use strict";return{textStyle:i,fontFamily:e,iconButton:t,iconsDropDown:o,textBackgroundColor:n,textLinkControl:s,textColor:r,textEffects:l,lineHeight:a,textPopup:p,richTextFrame:c,themeFontsLoader:u,constants:h,fontUtils:m,dataUtils:f,ckUtils:x,mobileUtils:y,textTooltipMixin:T,saveTextStyleConfirmation:d,textEditorMixin:v,migrationUtils:_,textBiMixin:E,colorUtils:k,textToolBar:b,TextLinksManager:g,textLimitsUtils:S,LinksHelper:C}});
//# sourceMappingURL=textControls.min.js.map