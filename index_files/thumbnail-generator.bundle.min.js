!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("thumbnail-generator",[],r):"object"==typeof exports?exports["thumbnail-generator"]=r():e["thumbnail-generator"]=r()}("undefined"!=typeof self?self:this,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(r){return e[r]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="https://static.parastorage.com/services/thumbnail-generator/1.39.0/",t(t.s=9)}([function(e,r){e.exports=function(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}},function(e,r,t){var n=t(2),i=t(0);e.exports=function(e){return function r(t,u){switch(arguments.length){case 0:return r;case 1:return i(t)?r:n(function(r){return e(t,r)});default:return i(t)&&i(u)?r:i(t)?n(function(r){return e(r,u)}):i(u)?n(function(r){return e(t,r)}):e(t,u)}}}},function(e,r,t){var n=t(0);e.exports=function(e){return function r(t){return 0===arguments.length||n(t)?r:e.apply(this,arguments)}}},function(e,r,t){var n=t(2),i=t(1),u=t(0);e.exports=function(e){return function r(t,o,a){switch(arguments.length){case 0:return r;case 1:return u(t)?r:i(function(r,n){return e(t,r,n)});case 2:return u(t)&&u(o)?r:u(t)?i(function(r,t){return e(r,o,t)}):u(o)?i(function(r,n){return e(t,r,n)}):n(function(r){return e(t,o,r)});default:return u(t)&&u(o)&&u(a)?r:u(t)&&u(o)?i(function(r,t){return e(r,t,a)}):u(t)&&u(a)?i(function(r,t){return e(r,o,t)}):u(o)&&u(a)?i(function(r,n){return e(t,r,n)}):u(t)?n(function(r){return e(r,o,a)}):u(o)?n(function(r){return e(t,r,a)}):u(a)?n(function(r){return e(t,o,r)}):e(t,o,a)}}}},function(e,r,t){var n=t(1),i=t(5),u=n(function(e,r){return i(function(e,r,t){return t},e,r)});e.exports=u},function(e,r,t){var n=t(3),i=t(6),u=t(7),o=n(function e(r,t,n){return u(function(t,n,u){return i(n)&&i(u)?e(r,n,u):r(t,n,u)},t,n)});e.exports=o},function(e,r){e.exports=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},function(e,r,t){var n=t(3),i=t(8),u=n(function(e,r,t){var n,u={};for(n in r)i(n,r)&&(u[n]=i(n,t)?e(n,r[n],t[n]):r[n]);for(n in t)i(n,t)&&!i(n,u)&&(u[n]=t[n]);return u});e.exports=u},function(e,r){e.exports=function(e,r){return Object.prototype.hasOwnProperty.call(r,e)}},function(e,r,t){"use strict";t.r(r);var n,i,u,o,a=function(){return(a=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e}).apply(this,arguments)};!function(e){e.Rembrandt="rembrandt",e.Vanbrandt="vanbrandt",e.Vangogh="vangogh"}(i||(i={})),function(e){e.Fill="fill",e.Fit="fit"}(u||(u={})),function(e){e.Srz="srz",e.Srb="srb"}(o||(o={}));var f,c,l=((n={})[u.Fill]=o.Srz,n[u.Fit]=o.Srb,n);!function(e){e.G5="G5",e.G6="G6"}(f||(f={})),function(e){e.Picture="picture",e.SiteIcon="site_icon",e.Watermark="watermark",e.SecurePicture="secure_picture",e.Video="video",e.VideoAlpha="videoalpha",e.SecureVideo="secure_video",e.UserFont="ufont",e.Shape="shape"}(c||(c={}));var p,s=function(e){return e.replace(/([a-z\-_0-9]+)\/\//gi,"$1/")},d=function(e){return e.split("/").pop()||""},v=function(e){var r=e.split("/");return r.length<=1?"":(r.pop(),r.join("/")+"/")},h=function(e,r){return Object.keys(r).forEach(function(t){var n,i=(n="g",new RegExp(("#"+t+"#").replace(/[()[\].^$|?+]/g,"\\$&"),n));e=e.replace(i,r[t])}),e},m={vangogh:function(e){return v(e)+d(e)+"_#mode#_#width#_#height#_75_22_0.5_1.20_0.00_jpg_#mode#"},rembrandt:function(e,r){var t=d(e),n=v(e)+"v1/#mode#/w_#width#,h_#height#";return r?n+",wm_#waterMark#/"+t:n+"/"+t},vanbrandt:function(e,r){var t=d(e),n=v(e)+t+"/v1/#mode#/w_#width#,h_#height#";return r?n+",wm_#waterMark#/"+t:n+"/"+t}},g=/_sr[bz]_(?:[0-9.]+_)+[a-z0-9]+_sr[bz]$/i,b=/([a-z0-9_-~]+\.[a-z0-9]+)\/v[0-9]+\/(?:fill|fit)\/[^\/]+\/(?:\1|file\.[a-z0-9_]+)$/i,_=/([a-z0-9_-]+)\/v[0-9]+\/(?:fill|fit)\/[^\/]+(\/(?:\1|file)\.[a-z0-9_]+)$/i,y=function(e,r,t){void 0===t&&(t=i.Rembrandt);var n,o=function(e){var r=(e.match(/wm_([^\/]*)/)||[])[1];return{restoredUrl:e.replace(g,"").replace(b,"$1").replace(_,"$1$2"),waterMark:r}}(e),f=o.restoredUrl,c=o.waterMark;if(!/\.(png|jpe?g|gif)/i.test(n=f)||function(e){return/shutterstock/i.test(e)}(n))return f;var p,d=a({waterMark:c,width:200,height:200,mode:u.Fill},r);t===i.Vangogh&&(d.mode=(p=d.mode,l[p]||p));var v=m[t](f,c),y=h(v,d);return s(y)},O=t(4),U=t.n(O);!function(e){e.Thumbnail="thumbnail",e.Preview="preview"}(p||(p={}));var w=function(e,r,t){return s("secure_picture"===e.mediaType&&t===f.G6?r.apiUrl+"/site/media/files/secure/"+e.fileUrl:r.filesUrl+"/"+e.fileUrl)},j=function(e,r,t,n){void 0===n&&(n=f.G5);var i=function(e,r,t){void 0===t&&(t=f.G5);var n=r.filesUrl;if(e.thumbnailUrl)return n+"/"+e.thumbnailUrl;switch(e.mediaType){case c.Picture:case c.SiteIcon:case c.Watermark:return n+"/"+e.fileUrl;case c.SecurePicture:return t===f.G6?r.apiUrl+"/site/media/files/secure/"+e.fileUrl:n+"/"+e.fileUrl;case c.Video:case c.VideoAlpha:return e.videoThumbnailUrl?n+"/"+e.videoThumbnailUrl:null;case c.SecureVideo:if(e.fileOutput&&e.fileOutput.image&&e.fileOutput.image[2]&&e.fileOutput.image[2].url)return n+"/"+e.fileOutput.image[2].url;break;case c.UserFont:if(e.fileOutput&&e.fileOutput.image&&e.fileOutput.image[0]&&e.fileOutput.image[0].url)return n+"/"+e.fileOutput.image[0].url}}(e,t,n),u=e.previewUrl?t.filesUrl+"/"+e.previewUrl:null,o={};if(e.mediaType===c.Shape||e.fileUrl&&"gif"===e.fileUrl.split(".").pop())o=function(e,r){return Object.keys(e).reduce(function(e,t){var n;return a({},e,((n={})[t+"Url"]=r,n))},{})}(r,w(e,t,n));else if(i){-1!==(e.tags||[]).indexOf("_mp4_alpha")&&(r=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.filter(Boolean).reduce(U.a)}({},r,{thumbnail:{mode:"fit"}})),o=function(e,r,t,n){return Object.keys(e).reduce(function(i,u){var o,f=u===p.Thumbnail&&n?n:r,c=y(f,e[u],t);return a({},i,c&&((o={})[u+"Url"]=c,o))},{})}(r,i,t.imageOperationsApi,u)}return e.fileUrl&&(o.originalUrl=w(e,t,n)),o},x=function(e){return parseInt(e,10)},S=function(e,r){return e.fileOutput&&e.fileOutput.video?e.fileOutput.video.filter(function(e){return x(e.quality)<=x(r.videoPreviewQuality)}).map(function(e){return s(r.videoFilesUrl+"/"+e.url)}):null};t.d(r,"resize",function(){return y}),t.d(r,"getWixThumbnailsUrls",function(){return j}),t.d(r,"getWixVideoPreviewUrls",function(){return S}),t.d(r,"ResizeAPI",function(){return i}),t.d(r,"ResizeMode",function(){return u})}])});
//# sourceMappingURL=thumbnail-generator.bundle.min.js.map