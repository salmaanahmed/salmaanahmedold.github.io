!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("lodash"),require("coreUtils"),require("experiment"),require("utils"),require("document-services-schemas"),require("mobileCore"),require("tpa"),require("wixappsCore"),require("layout"),require("wixCode"),require("core"),require("warmupUtilsLib"),require("zepto"),require("santa-core-utils"),require("wixappsClassics"),require("platformInit"),require("platformUtils"),require("platformEvents"),require("wixappsBuilder"),require("color"),require("mobx"),require("js-platform-apps-configuration-editor"),require("immutable"),require("immutableDiff"),require("wixImmutable"),require("speakingurl"),require("coreMultilingual"),require("wix-ui-santa/componentsMetaData.bundle"),require("editorSkinsData"),require("wix-ui-santa/components-editor-params"),require("skins"),require("wix-ui-santa/dsComponentsService.bundle"),require("pmrpc"),require("platformAPI"),require("elementory-browser-support"),require("wix-data-schemas-creator"),require("skinExports"),require("textCommon"),require("wix-ui-santa/componentsHooks.bundle"),require("santa-components"),require("warmupUtils"),require("image-client-api"),require("componentsCore"),require("wix-ui-santa/baseUIDSComponentsService.bundle"),require("wix-json-schema-utils"),require("localSiteSerializer"));else if("function"==typeof define&&define.amd)define(["lodash","coreUtils","experiment","utils","document-services-schemas","mobileCore","tpa","wixappsCore","layout","wixCode","core","warmupUtilsLib","zepto","santa-core-utils","wixappsClassics","platformInit","platformUtils","platformEvents","wixappsBuilder","color","mobx","js-platform-apps-configuration-editor","immutable","immutableDiff","wixImmutable","speakingurl","coreMultilingual","wix-ui-santa/componentsMetaData.bundle","editorSkinsData","wix-ui-santa/components-editor-params","skins","wix-ui-santa/dsComponentsService.bundle","pmrpc","platformAPI","elementory-browser-support","wix-data-schemas-creator","skinExports","textCommon","wix-ui-santa/componentsHooks.bundle","santa-components","warmupUtils","image-client-api","componentsCore","wix-ui-santa/baseUIDSComponentsService.bundle","wix-json-schema-utils","localSiteSerializer"],t);else{var n="object"==typeof exports?t(require("lodash"),require("coreUtils"),require("experiment"),require("utils"),require("document-services-schemas"),require("mobileCore"),require("tpa"),require("wixappsCore"),require("layout"),require("wixCode"),require("core"),require("warmupUtilsLib"),require("zepto"),require("santa-core-utils"),require("wixappsClassics"),require("platformInit"),require("platformUtils"),require("platformEvents"),require("wixappsBuilder"),require("color"),require("mobx"),require("js-platform-apps-configuration-editor"),require("immutable"),require("immutableDiff"),require("wixImmutable"),require("speakingurl"),require("coreMultilingual"),require("wix-ui-santa/componentsMetaData.bundle"),require("editorSkinsData"),require("wix-ui-santa/components-editor-params"),require("skins"),require("wix-ui-santa/dsComponentsService.bundle"),require("pmrpc"),require("platformAPI"),require("elementory-browser-support"),require("wix-data-schemas-creator"),require("skinExports"),require("textCommon"),require("wix-ui-santa/componentsHooks.bundle"),require("santa-components"),require("warmupUtils"),require("image-client-api"),require("componentsCore"),require("wix-ui-santa/baseUIDSComponentsService.bundle"),require("wix-json-schema-utils"),require("localSiteSerializer")):t(e.lodash,e.coreUtils,e.experiment,e.utils,e["document-services-schemas"],e.mobileCore,e.tpa,e.wixappsCore,e.layout,e.wixCode,e.core,e.warmupUtilsLib,e.zepto,e["santa-core-utils"],e.wixappsClassics,e.platformInit,e.platformUtils,e.platformEvents,e.wixappsBuilder,e.color,e.mobx,e["js-platform-apps-configuration-editor"],e.immutable,e.immutableDiff,e.wixImmutable,e.speakingurl,e.coreMultilingual,e["wix-ui-santa/componentsMetaData.bundle"],e.editorSkinsData,e["wix-ui-santa/components-editor-params"],e.skins,e["wix-ui-santa/dsComponentsService.bundle"],e.pmrpc,e.platformAPI,e["elementory-browser-support"],e["wix-data-schemas-creator"],e.skinExports,e.textCommon,e["wix-ui-santa/componentsHooks.bundle"],e["santa-components"],e.warmupUtils,e["image-client-api"],e.componentsCore,e["wix-ui-santa/baseUIDSComponentsService.bundle"],e["wix-json-schema-utils"],e.localSiteSerializer);for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,(function(e,t,n,o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A,T,_,O,C,D,w,M,b,R,N,x,L,B,F,k,U,H,V,G,W,Y,z){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=252)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){var o;e.exports={VIEW_MODES:{DESKTOP:"DESKTOP",MOBILE:"MOBILE"},DATA_TYPES:(o=n(1)).constants.DATA_TYPES,DEVICES:{DESKTOP:"desktop",MOBILE:"mobile"},ANCHORS:{LOCK_THRESHOLD:70,LOCK_CONDITION:{ALWAYS:"always",NEVER:"never",THRESHOLD:"threshold"}},DOM_ID_PREFIX:{DESKTOP:"",MOBILE:"mobile_"},RESIZE_SIDES:{TOP:"RESIZE_TOP",LEFT:"RESIZE_LEFT",BOTTOM:"RESIZE_BOTTOM",RIGHT:"RESIZE_RIGHT"},MOVE_DIRECTIONS:{HORIZONTAL:"HORIZONTAL_MOVE",VERTICAL:"VERTICAL_MOVE"},COMP_TYPES:{PAGE:"Page",MASTER_PAGE:"Document",HEADER:"wysiwyg.viewer.components.HeaderContainer",FOOTER:"wysiwyg.viewer.components.FooterContainer"},COMP_IDS:{PAGE_GROUP:"SITE_PAGES",PAGES_CONTAINER:"PAGES_CONTAINER",HEADER:"SITE_HEADER",FOOTER:"SITE_FOOTER",BACKGROUND:"SITE_BACKGROUND"},MOBILE_ONLY_COMPONENTS:{TINY_MENU:"TINY_MENU",MENU_AS_CONTAINER:"MENU_AS_CONTAINER",MENU_AS_CONTAINER_TOGGLE:"MENU_AS_CONTAINER_TOGGLE",BACK_TO_TOP_BUTTON:"BACK_TO_TOP_BUTTON",MENU_AS_CONTAINER_EXPANDABLE_MENU:"MENU_AS_CONTAINER_EXPANDABLE_MENU"},MOBILE_ONLY_COMPONENT_TYPES:{BACK_TO_TOP_BUTTON:"wysiwyg.viewer.components.BackToTopButton",BACK_TO_TOP_BUTTON_LEGACY:"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton"},PERMISSIONS:{EDIT_REVISIONS:"html-editor.edit-revisions",EDIT:"html-editor.edit",SAVE:"html-editor.save",PREVIEW:"html-editor.preview",PUBLISH:"html-editor.publish",UNPUBLISH:"html-editor.unpublish",VIEW_REVISIONS:"html-editor.view-revisions"},POPUPS:{DEFAULT_DELAY:2},HERO_IMAGE:{MIN_HEIGHT:7},MENU_ITEM_TYPES:{PAGE:"page",LINK:"link",HEADER:"header"},SITE_STRUCTURE:o.siteConstants.MASTER_PAGE_ID,MASTER_PAGE_ID:o.siteConstants.MASTER_PAGE_ID,SITE_SEGMENTS_GAP_THRESHOLD:20,JSON_TYPES:{FULL:"fullJson",DISPLAYED:"siteData"},COMP_ALIGNMENT_OPTIONS:{LEFT:"left",RIGHT:"right",CENTER:"center",TOP:"top",BOTTOM:"bottom",MIDDLE:"middle"},COMP_DISTRIBUTION_OPTIONS:{BOTH:"verticalAndHorizontal",VERTICAL:"vertical",HORIZONTAL:"horizontal"},COMP_MATCH_SIZE_OPTIONS:{WIDTH:"width",HEIGHT:"height",BOTH:"heightAndWidth"},URLS:{MAX_LENGTH:40},SNAPSHOT_TAGS:{MOBILE_MERGE:"mobileMerge"},STYLES:{THEME_DATA_ID:"THEME_DATA",COMPONENT_STYLE:"ComponentStyle",TOP_LEVEL_STYLE:"TopLevelStyle",FLAT_THEME:"WFlatTheme",TYPES:{SYSTEM:"system",CUSTOM:"custom"},STYLES_PER_PAGE_VER:o.constants.STYLES_PER_PAGE_VER},MEDIA_PLAYER_MOBILE_LAYOUT_LIMITS:{minWidth:240,maxWidth:320,minHeight:120,maxHeight:480},MEDIA_PLAYER_LAYOUT_LIMITS:{minWidth:240,maxWidth:1920,minHeight:240,maxHeight:1920}}},function(e,t,n){function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),o=n(260),i=n(60),a=n(59),s=n(262),c=n(6),u=n(15),l=n(19),p=n(5),d=n(17),g=t.constants,f=g.DATA_TYPES,m=g.COMP_DATA_QUERY_KEYS_WITH_STYLE,v=l.services,E=v.dataValidators,y=v.schemasService,I={Repeater:"Repeater",VerticalAnchorsMenu:"VerticalAnchorsMenu",Anchor:"Anchor"},S={MediaContainerDesignData:!0},h={StripColumnsContainerProperties:!0,ColumnProperties:!0},P={"wysiwyg.viewer.components.StripColumnsContainer":function(t,n,o){return e.isUndefined(o.fullWidth)?u.NO:u.YES},"wysiwyg.viewer.components.VectorImage":u.DONT_CARE},A=t.constants.BASE_PROPS_SCHEMA_TYPE;function T(e,t){return l.services.createDataItemByType(t)}function _(e){return C("ObsoleteBehaviorsList",{items:e})}function O(e){return C("MobileHints",e)}function C(t,n){var o=null;return t&&(o={type:t},E.resolveDefaultItem(t,o)),o?e.assign(o,n):o}function D(e,t,n){return e&&t&&n?o.addSerializedDataItemToPage(e,n,t):null}function w(e,t,n){if(!e||!t)return null;var o=e.pointers.getInnerPointer(t,n),r=(e.dal.isExist(t)?e.dal:e.dal.full).get(o);return r?r.replace("#",""):null}function M(e,t,n,o){var r=e.pointers.getInnerPointer(t,o);e.dal.full.set(r,n)}function b(e,t,n,o){return M(e,t,n,m[o])}function R(e,t,n,o){var r=u.replaceRuntimeRefWithOriginal(e,t),i=w(e,r,n);return i?o(i,(e.pointers.full.components.getPageOfComponent(r)||e.pointers.components.getPageOfComponent(r)).id):null}function N(e,t){return R(e,t,"dataQuery",e.pointers.data.getDataItem)}function x(e,t){return R(e,t,"designQuery",e.pointers.data.getDesignItem)}function L(e,t){return R(e,t,"propertyQuery",e.pointers.data.getPropertyItem)}function B(e,t){return R(e,t,"behaviorQuery",e.pointers.data.getBehaviorsItem)}function F(e,t){return R(e,t,"connectionQuery",e.pointers.data.getConnectionsItem)}function k(e,t){return R(e,t,"mobileHintsQuery",e.pointers.data.getMobileHintsItem)}function U(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=N(e,t);return z(e,f.data,r,n,o)}function H(e,t,n){var o=x(e,t);return z(e,f.design,o,n)}function V(e,t){var n=L(e,t);return z(e,f.prop,n)}function G(e,t,n){var o=w(e,t,m[n]),r=e.pointers.full.components.getPageOfComponent(t).id,i=e.pointers.data.getItem(n,o,r);return z(e,n,i)}function W(e){if(!p.isOpen("sv_newResponsiveDataModels")||!e||"RefArray"!==e.type)return e;var t=e.values.reduce((function(e,t){var n="BreakpointRelation"===t.type?t.ref:t,o=null;switch(n.type){case"FlexContainerLayout":case"GridContainerLayout":case"StackContainerLayout":case"OrganizerContainerLayout":o=e.containerLayouts;break;case"FlexItemLayout":case"GridItemLayout":case"StackItemLayout":case"FixedItemLayout":case"OrganizerItemLayout":o=e.itemLayouts;break;case"ComponentLayout":o=e.componentLayouts}return o.push(r({},n,{breakpoint:t.breakpoint})),e}),{componentLayouts:[],containerLayouts:[],itemLayouts:[]});return{type:"LayoutData",componentLayouts:t.componentLayouts,containerLayouts:t.containerLayouts,itemLayouts:t.itemLayouts,metaData:e.metaData}}function Y(e){if(!p.isOpen("sv_newResponsiveDataModels")||!e||"RefArray"!==e.type)return e;var t=e.values.map((function(e){return r({},"BreakpointRelation"===e.type?e.ref:e,{breakpoint:e.breakpoint})}));return{type:"StylesInBreakpoint",skin:t.length>0?t[0].skin:void 0,id:e.id,stylesInBreakpoints:t,metaData:e.metaData}}function z(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e&&n){var a=e.dal.full.get(n);if(a&&y.getSchema(t,a.type)){var s=o.serializeDataItem(e,t,n,r,i);return c.executeHook(c.HOOKS.DATA.AFTER_GET,a.type,[e,s]),s}}return null}var K=function(e,t){var n=u.getComponentType(e,t);return(y.getDefinition(n).dataTypes||[]).find((function(e){return""!==e}))};function j(t,n){var o=["trigger","type","part","name"];return e.isEqual(e.pick(t,o),e.pick(n,o))}function q(t,n,o){var r=e.map(n,(function(t){return{isEqualFunc:e.partial(j,t),behavior:t}})),i=t;return e.forEach(r,(function(t){i=e.reject(i,t.isEqualFunc),o||(i=i.concat(t.behavior))})),i}function Q(t,n,r,a){if(!t||!n)throw new Error("invalid args");var s=u.replaceRuntimeRefWithOriginal(t,n);!r.background||r.background.colorOverlay||r.background.imageOverlay||(r.dataChangeBehaviors=e.reject(r.dataChangeBehaviors,{part:"overlay"}));var l=u.getComponentType(t,s);c.executeHook(c.HOOKS.DESIGN.UPDATE_BEFORE,l,[t,s,r]),a||(r.charas=i.generateNewDesignId());var p=w(t,s,"designQuery"),g=t.pointers.full.components.getPageOfComponent(s).id,f=Boolean(p);return p=o.addSerializedDesignItemToPage(t,g,r,p,s),f||function(e,t,n){M(e,t,"#".concat(n),"designQuery")}(t,s,p),d.linkMobileComponentToDesktopDesignItem(t,n,p),c.executeHook(c.HOOKS.DESIGN.UPDATE_AFTER,l,[t,s,r]),p}function X(e,t,n){var r=w(e,t,"mobileHintsQuery"),i=!!r,a=e.pointers.full.components.getPageOfComponent(t).id,s=O(n);return r=o.addSerializedMobileHintsItemToPage(e,a,s,r,t),i||function(e,t,n){M(e,t,n,"mobileHintsQuery")}(e,t,r),r}function Z(n,o){var r=F(n,o),i=e.get(z(n,f.connections,r),"items");return i=function(n,o,r){return e.map(r,(function(r){if("WixCodeConnectionItem"===r.type)return r;var i=function(e,n,o){var r=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(o.id)?e.pointers.components.getPageOfComponent(o):e.pointers.full.components.getPageOfComponent(o),i=J(e,r,n);if(i)return i;if(e.pointers.components.isMasterPage(r))return null;return function(e,t){var n=e.siteDataAPI.siteData.getViewMode(),o=e.pointers.components.getMasterPage(n);return J(e,o,t)}(e,n)}(n,r.controllerId,o),a=e.assign({},e.omit(r,"controllerId"),{controllerRef:i});return e.has(a,"config")?(a.config=JSON.parse(a.config),a):a}))}(n,o,i),e.isEmpty(i)?null:i}function J(t,n,o){var r=t.siteAPI.isMobileView();return t.pointers.components.findComponentInPage(n,r,(function(t){return e.get(t,"dataQuery","").replace("#","")===o}))}function $(t,n,r,i){if(!t||!n)throw new Error("invalid args");var a=u.replaceRuntimeRefWithOriginal(t,n),s=w(t,a,"propertyQuery"),l=t.pointers.full.components.getPageOfComponent(a).id,p=u.getComponentType(t,a);c.executeHook(c.HOOKS.PROPERTIES.UPDATE_BEFORE,p,[t,a,r]),r.type=r.type||function(t){var n=y.getDefinition(t);return n.propertyType||e.find(n.propertyTypes)||A}(p),e.set(r,["metaData","autoGenerated"],!1);var d=Boolean(s);return s=o.addSerializedPropertyItemToPage(t,l,r,i||s,a),d||function(e,t,n){var o=e.pointers.getInnerPointer(t,"propertyQuery");e.dal.set(o,n)}(t,a,s),c.executeHook(c.HOOKS.PROPERTIES.UPDATE_AFTER,p,[t,a,r]),s}return{shouldUpdateDataWithSingleComp:function(e,t){var n=U(e,t);return!n||!I[n.type]},shouldUpdatePropertiesWithSingleComp:function(e,t){var n=V(e,t);return!n||!h[n.type]},shouldUpdateDesignWithSingleComp:function(e,t){var n=H(e,t);return!n||!S[n.type]},shouldUpdateAnchorsAfterPropertiesUpdate:function(t,n,o){if(!t.dal.isExist(n))return u.YES;var r=u.getComponentType(t,n),i=P[r];return i?e.isFunction(i)?i.apply(this,o):i:u.NO},getPlatformAppConnections:function(t,n){return e.reject(function(e,t){return Z(e,t)||[]}(t,n),{type:"WixCodeConnectionItem"})},addLink:function(t,n,o,r){var i=T(t,n);return i?(o&&(e.assign(i,o),E.validateDataBySchema(i,"data")),D(t,i,r||"masterPage")):null},createDataItemByType:T,createStyleItemByType:function(e){return l.services.createStyleItemByType(e)},createDesignItemByType:function(e,t){var n=null;return y.getSchema(f.design,t)&&(n=C(t)),n},createBehaviorsItem:_,createMobileHintsItem:O,addDataItem:D,getDataItem:U,updateDesignItem:Q,getRuntimeDataItem:function(e,t){return e.siteAPI.getRuntimeDal().getCompData(t.id)},updateDesignItemBehaviors:function(e,t,n){if(!e||!t)throw new Error("invalid args");var o=H(e,t);return o.dataChangeBehaviors=q(o.dataChangeBehaviors,n,!1),Q(e,t,o)},removeDesignItemBehaviors:function(e,t,n){if(!e||!t)throw new Error("invalid args");var o=H(e,t);return o.dataChangeBehaviors=q(o.dataChangeBehaviors,n,!0),Q(e,t,o)},getDesignItem:H,getRuntimeDesignItem:function(e,t){return e.siteAPI.getRuntimeDal().getCompDesign(t.id)},getDesignItemByModes:function(t,n,o){if(n){var r=function(t,n,o){if(n){var r=t.dal.full.get(t.pointers.componentStructure.getModesOverrides(n)),i=e.find(r,(function(t){return o&&t.modeIds.length===o.length&&e.intersection(t.modeIds,o).length===t.modeIds.length})),a=e.get(i,"designQuery");if(!a){var s=t.pointers.getInnerPointer(n,"designQuery");a=t.dal.full.get(s)}if(a){var c=t.pointers.full.components.getPageOfComponent(n);return t.pointers.data.getDesignItem(a.replace("#",""),c.id)}}return null}(t,n,o);return z(t,f.design,r)}return null},getMediaRef:function(t){return e.get(t,"background.mediaRef")},getDataItemById:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e&&t){var i=e.pointers.data.getDataItem(t,n||"masterPage");return z(e,f.data,i,o,r)}return null},getDesignItemById:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e&&t){var r=e.pointers.data.getDesignItem(t,n||"masterPage");return z(e,f.design,r,o)}return null},getPropertiesItemById:function(e,t,n){if(e&&t){var o=e.pointers.data.getPropertyItem(u.stripHashIfExists(t),n||"masterPage");return z(e,f.prop,o)}return null},getMobileHintsItemById:function(e,t,n){if(!e||!t)return null;var o=e.pointers.data.getMobileHintsItem(t,n||"masterPage");return z(e,f.mobileHints,o)},getDataItemPointer:N,getPropertyItemPointer:L,getDesignItemPointer:x,getBehaviorsItemPointer:B,getConnectionsItemPointer:F,getMobileHintsItemPointer:k,getFirstValidDataType:K,updateDataItem:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!t)throw new Error("invalid args");var i=u.replaceRuntimeRefWithOriginal(e,t),a=u.getComponentType(e,i);c.executeHook(c.HOOKS.DATA.UPDATE_BEFORE,a,[e,i,n]);var s=e.pointers.full.components.getPageOfComponent(i).id,l=w(e,i,"dataQuery"),p=Boolean(l);return p||n.type||(n.type=K(e,t)),l=o.addSerializedDataItemToPage(e,s,n,l,r),p||function(e,t,n){M(e,t,"#".concat(n),"dataQuery")}(e,i,l),c.executeHook(c.HOOKS.DATA.UPDATE_AFTER,a,[e,i,n]),l},removeComponentDataItem:function(t,n){if(!t||!n)throw new Error("invalid args");var o=y.getDefinition(u.getComponentType(t,n));if(o.dataTypes&&!e.includes(o.dataTypes,""))throw new Error("component's data can't be deleted");var r=t.pointers.getInnerPointer(n,"dataQuery");t.dal.full.remove(r)},removeComponentDesignItem:function(e,t){if(!e||!t)throw new Error("invalid args");var n=e.pointers.getInnerPointer(t,"designQuery");e.dal.remove(n)},removeComponentPropertyItem:function(e,t){if(!e||!t)throw new Error("invalid args");var n=y.getDefinition(u.getComponentType(e,t));if(n.propertyType&&""!==n.propertyType)throw new Error("component's property can't be deleted");var o=e.pointers.getInnerPointer(t,"propertyQuery");e.dal.remove(o)},removeComponentMobileHintsItem:function(e,t){if(!e||!t)throw new Error("invalid args");var n=e.pointers.getInnerPointer(t,"mobileHintsQuery");e.dal.full.remove(n)},setDataItemByPointer:function(t,n,o,r){e.set(o,"metaData.isPreset",!1),E.validateDataBySchema(o,r),t.dal.full.set(n,o),c.executeHook(c.HOOKS.DATA.SET_BY_POINTER_AFTER,"setDataItem",[t,n,o])},deleteDataItem:s.deleteDataItem,deleteDesignItem:s.deleteDesignItem,deleteMobileHintsItem:s.removeMobileHintsItem,removeDesignItemRecursively:s.removeDesignItemRecursively,removeDataItemRecursively:s.removeDataItemRecursively,getDataSchemaByType:function(e,t){if(t){var n=y.getSchema(f.data,t);return n&&n.properties}return null},createPropertiesItemByType:function(e,t){return l.services.createPropertiesItemByType(t)},getPropertiesItem:V,getRuntimePropertiesItem:function(e,t){return e.siteAPI.getRuntimeDal().getCompProps(t.id)},getPropertiesItemFields:function(t){return t?e.keys(t):[]},updatePropertiesItem:function(e,t,n){$(e,t,n)},setPropertiesItem:$,deletePropertiesItem:s.deletePropertiesItem,getPropertiesSchemaByType:function(t,n){if(n){var o=y.getSchema(f.prop,n);return e.get(o,["allOf",0],o)}return null},updateBehaviorsItem:function(e,t,n){var r=w(e,t,"behaviorQuery"),i=e.pointers.full.components.getPageOfComponent(t).id,a=Boolean(r),s=_(n);return r=o.addSerializedBehaviorsItemToPage(e,i,s,r),a||function(e,t,n){M(e,t,n,"behaviorQuery")}(e,t,r),r},getBehaviorsItem:function(t,n){var o=B(t,n);return e.get(z(t,f.behaviors,o),"items")},removeBehaviorsItem:s.removeBehaviorsItem,updateConnectionsItem:function(t,n,r){var i=w(t,n,"connectionQuery"),a=t.pointers.full.components.getPageOfComponent(n).id,s=Boolean(i),u=C("ConnectionList",{items:function(t,n){return e.map(n,(function(n){if("WixCodeConnectionItem"===n.type)return n;var o=w(t,n.controllerRef,"dataQuery"),r=e.assign({},e.omit(n,"controllerRef"),{controllerId:o});if(!e.has(r,"config"))return r;try{r.config=JSON.stringify(r.config)}catch(e){throw new Error("Invalid connection configuration - should be JSON stringifiable")}return r}))}(t,r)});return i=o.addSerializedConnectionsItemToPage(t,a,u,i),s||function(e,t,n){M(e,t,n,"connectionQuery")}(t,n,i),c.executeHook(c.HOOKS.DATA.AFTER_UPDATE_CONNECTIONS,"updateConnectionsItem",[t,u,n]),i},getConnectionsItem:Z,removeConnectionsItem:s.removeConnectionsItem,updateMobileHintsItem:X,updateMobileHintsHidden:function(t,n,o){return X(t,n,e.pick(o,["id","type","hidden"]))},getMobileHintsItem:function(e,t){var n=k(e,t);return z(e,f.mobileHints,n)},generateNewDataItemId:i.generateNewDataItemId,generateNewPropertiesItemId:i.generateNewPropertiesItemId,generateNewDesignItemId:i.generateNewDesignId,addSerializedStyleItemToPage:o.addSerializedStyleItemToPage,addSerializedDataItemToPage:o.addSerializedDataItemToPage,addSerializedDesignItemToPage:o.addSerializedDesignItemToPage,addSerializedBehaviorsItemToPage:o.addSerializedBehaviorsItemToPage,addSerializedLayoutItemToPage:o.addSerializedLayoutItemToPage,addSerializedBreakpointItemToPage:o.addSerializedBreakpointItemToPage,addSerializedConnectionsItemToPage:o.addSerializedConnectionsItemToPage,addSerializedPropertyItemToPage:o.addSerializedPropertyItemToPage,addSerializedMobileHintsItemToPage:o.addSerializedMobileHintsItemToPage,serializeDataItem:o.serializeDataItem,executeForDataItemRefs:a.executeForDataItemRefs,isOfType:a.isOfType,isPropertiesItemValid:function(e,t,n,o){return E.isItemValid(t,n,o,"properties")},isDataItemValid:function(e,t,n,r){var i=o.deserializeDataItem(e,t,"data");return E.isItemValid(i,n,r,"data")},getComponentDataItemId:w,getComponentLayoutData:function(e,t){return W(G(e,t,f.layout))},updateComponentLayoutData:function(e,t,n){var r=w(e,t,m[f.layout]),i=e.pointers.full.components.getPageOfComponent(t).id,a=Boolean(r);return r=o.addSerializedLayoutItemToPage(e,i,n,r),a||b(e,t,"#".concat(r),f.layout),r},getComponentBreakpointsData:function(e,t){return G(e,t,f.breakpoints)},updateComponentBreakpointsData:function(t,n,r){var a=w(t,n,m[f.breakpoints]),s=t.pointers.full.components.getPageOfComponent(n).id;return r.values=r.values.map((function(t){return t.id?t:e.assign(t,{id:i.generateNewId(f.breakpoints)})})),a=o.addSerializedItemToPage(t,s,r,a,f.breakpoints),b(t,n,"#".concat(a),f.breakpoints),a},convertNewLayoutToOld:W,convertNewResponsiveStyleToOld:Y,getComponentStylesData:function(e,t){return Y(G(e,t,f.theme))},updateComponentStylesData:function(e,t,n){var r=e.pointers.full.components.getPageOfComponent(t).id,a=o.addSerializedStyleItemToPage(e,n,i.generateNewId(f.theme),r);return b(e,t,a,f.theme),a}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(12),r=n(15),i=n(3),a=n(92),s=n(6),c=n(69),u=n(10),l=n(171),p=n(428),d=n(8),g=n(20),f=n(29),m=n(55),v=n(34),E=n(44),y=n(25),I=n(11),S=n(14),h=n(84),P=n(85),A=n(50),T=n(23),_=n(53),O=n(5),C=n(2),D=n(17),w=n(177),M=["custom","data","props","style","design","connections","activeModes","behaviors","mobileHints","layoutResponsive","breakpoints"],b="mobile_",R=["wysiwyg.viewer.components.SiteSegmentContainer","wysiwyg.viewer.components.FooterContainer","wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.PagesContainer","wysiwyg.viewer.components.PageGroup","wysiwyg.viewer.components.ScreenWidthContainer","wysiwyg.viewer.components.StripContainer","wysiwyg.viewer.components.StripColumnsContainer","wysiwyg.viewer.components.Column","wysiwyg.viewer.components.SiteRegionContainer","core.components.Container","core.components.ContainerOBC","wysiwyg.viewer.components.PopupContainer","mobile.core.components.Container","wysiwyg.viewer.components.Group","wysiwyg.viewer.components.FormContainer","wixapps.integration.components.common.formcontainer.viewer.FormContainer","wixapps.integration.components.Area","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateBoxFormState","wysiwyg.viewer.components.StateStrip","wysiwyg.viewer.components.StateStripState","wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.StripContainerSlideShowSlide","platform.components.AppWidget","responsive.components.Section"],N=["mobile.core.components.Page","core.components.Page","wixapps.integration.components.AppPage"],x=["wysiwyg.viewer.components.Repeater"],L=r.stripHashIfExists;function B(e,n,o,r){var i=r||ae(),a=e.pointers.components.getViewMode(n),s=t.displayedOnlyStructureUtil;if(s.isRepeatedComponent(n.id)){var c=s.getRepeaterItemId(n.id);return e.pointers.components.getUnattached(s.getUniqueDisplayedId(i,c),a)}return e.pointers.components.getUnattached(i,a)}function F(t,n,r,i,a,s){var c=e.get(i,"componentType"),u=e.get(t.dal.get(r),"componentType");o.integrations.ravenUtils.breadcrumb("Adding comp ".concat(c,', id: "').concat(n.id,'" , to container: ').concat(u,', id: "').concat(r.id,'"')),k(t,n,r,i,a,s),Y(t,n)}function k(t,n,o,r,i,a){var c=y.getContainerToAddComponentTo(t,o),u=l.validateComponentToAdd(t,n,r,c,a);if(!u.success)throw new Error(u.error);s.executeHook(s.HOOKS.ADD_ROOT.BEFORE,r.componentType,[t,n,o,r,i,a]),H(t,n,o,r,i,!1,{}),e.isEqual(c,o)?e.isFinite(a)&&h.moveToIndex(t,n,a):(I.adjustCompLayoutToNewContainer(t,n,c),I.addCompToContainer(t,n,c,a)),s.executeHook(s.HOOKS.ADD_ROOT.AFTER,r.componentType,arguments)}function U(t){return e.omit(t,M)}function H(n,o,r,a,c,u,p,d){var g=l.validateComponentToSet(n,o,a,c,r,u);if(!g.success)throw new Error(g.error);a.layout&&delete a.layout.anchors,s.executeHook(s.HOOKS.ADD.BEFORE,a.componentType,arguments);var m,v,E,y,I=t.objectUtils.cloneDeep(a);p&&a.id&&(p[a.id]=o.id),I.id=t.displayedOnlyStructureUtil.getRepeaterTemplateId(o.id),I.type||function(t){e.includes(x,t.componentType)?t.type="RepeaterContainer":e.includes(R,t.componentType)?t.type="Container":e.includes(N,t.componentType)?t.type="Page":t.type="Component"}(I),function(t){t.layout=t.layout||{};var n,o={},r=l.ALLOWED_LAYOUT_PARAMS;e.forEach(r,(function(e){var n=t.layout[e];if(n){var r=l.validateLayoutParam(e,n);if(!r.success)throw new Error(r.error);o[e]=n}})),delete o.anchors,t.layout=e.assign({x:0,y:0,fixedPosition:!1,width:160,height:90,scale:1,rotationInDegrees:0},o),t.layout.docked&&(((n=t.layout).docked.right||n.docked.left||n.docked.hCenter)&&(n.docked.right&&n.docked.left&&delete n.width,delete n.x),(n.docked.top||n.docked.bottom||n.docked.vCenter)&&(n.docked.top&&n.docked.bottom&&delete n.height,delete n.y))}(I),m=I,v=e.get(m,["connections","items"],[]),e.forEach(v,(function(e){var t=l.validateComponentConnection(e);if(!t.success)throw new Error(t.error)})),(d=d||{ancestorsModes:V(n,r,{}),oldModeIdsToNew:{}}).ancestorsModes=e.merge(d.ancestorsModes,(E=I,y={},e.forEach(e.get(E,"modes.definitions"),(function(e){y[e.modeId]=!0})),y)),function(t,n){e.defaults(n,function(t){var n=e.get(t,"modes.definitions");if(n){var o=t.id;return e.reduce(n,(function(e,t){return e[t.modeId]=f.createUniqueModeId(o),e}),{})}return{}}(t)),function(t,n){t.modes&&t.modes.definitions&&(t.modes.definitions=e.map(t.modes.definitions,(function(t){return e.defaults({modeId:n[t.modeId]},t)})))}(t,n),function(t,n){e.get(t,"modes.overrides")&&(t.modes.overrides=e.map(t.modes.overrides,(function(t){var o=e.map(t.modeIds,(function(e){return n[e]||e}));return e.defaults({modeIds:o},t)})))}(t,n),function(t,n){e.get(t,"props.mobileDisplayedModeId")&&(t.props.mobileDisplayedModeId=n[t.props.mobileDisplayedModeId])}(t,n)}(I=function(n,o,r,i){var a=i.ancestorsModes;if(e.isEmpty(a))return function(n,o,r){var i=r.activeModes,a=t.fullToDisplayedJson.applyModesOnSerializedStructure(r,i);e.isEmpty(i)||(s=a,c=r.layout,s.layout.x=e.get(c,"x")||e.get(s,"layout.x"),s.layout.y=e.get(c,"y")||e.get(s,"layout.y"));var s,c;return a}(0,0,o);return function(t,n){if(t&&n){var o=e.get(t,"modes.overrides");o&&(o=e.filter(o,(function(t){return e.every(t.modeIds,(function(e){return n[e]}))})),t.modes.overrides=o)}return t}(o,a)}(0,I,0,d),d.oldModeIdsToNew);var S=u?o.id:n.pointers.full.components.getPageOfComponent(r).id;!function(t,n,o,r,a,s,c){K(t,o,r,a,s,n),q(t,o,r,s,n),j(t,o,r,s,n),function(t,n,o,r,a,s){if(!s.behaviors)return;e.isString(s.behaviors)&&(s.behaviors=i.createBehaviorsItem(s.behaviors));s.behaviors=function(t,n,o){if(t&&t.items){var r=t.items;e.isString(r)&&(r=JSON.parse(r));var i=e.map(r,(function(t){return function(t,n){var o=e.get(t,"params.modeIds");o&&e.set(t,"params.modeIds",e.map(o,(function(e){return n.oldModeIdsToNew[e]||e})))}(t,n),function(t,n){if("comp"===e.get(t,"action.type")){var o=e.get(t,"action.sourceId");e.set(t,"action.sourceId",e.get(n,o,o))}if("runCode"===e.get(t,"behavior.name")&&e.has(t,"behavior.params.compId")){var r=e.get(t,"behavior.params.compId");e.set(t,"behavior.params.compId",e.get(n,r,r))}}(t,o),t})),a=e.omit(t,"items");return a.items=JSON.stringify(i),a}return t}(s.behaviors,a,r),o=Q(r,s.behaviors,o);var c=function(e,t,n,o){return t?i.addSerializedBehaviorsItemToPage(e,n,t,o):null}(t,s.behaviors,n,o);c&&(s.behaviorQuery=c,X(s.behaviors,c,r))}(t,o,r,s,c,n),function(e,t,n,o,r){n=Q(o,r.mobileHints,n);var a=function(e,t,n,o){return t?i.addSerializedMobileHintsItemToPage(e,n,t,o):null}(e,r.mobileHints,t,n);if(!a)return;r.mobileHintsQuery=a,X(r.mobileHints,a,o)}(t,o,r,s,n),function(e,t,n,o,r){n=Q(o,r.layoutResponsive,n);var a=function(e,t,n,o){return t?i.addSerializedLayoutItemToPage(e,n,t,o):null}(e,r.layoutResponsive,t,n);a&&(r.layoutQuery="#".concat(a),X(r.layoutResponsive,a,o))}(t,o,r,s,n),function(e,t,n,o,r){n=Q(o,r.breakpoints,n);var a=function(e,t,n,o){return t?i.addSerializedBreakpointItemToPage(e,n,t,o):null}(e,r.breakpoints,t,n);a&&(r.breakpointsQuery="#".concat(a),X(r.breakpointsQuery,a,o))}(t,o,r,s,n),function(e,t,n){W(e,t,n.componentType,n)}(t,o,n),function(t,n,o,r,i){var a=e.get(n,"modes.overrides");e.isEmpty(a)||(e.forEach(a,(function(e){W(t,o,n.componentType,e),j(t,o,r,i,e),q(t,o,r,i,e)})),a=e.map(a,U),e.set(n,"modes.overrides",a))}(t,n,o,r,s),function(e,t,n,o,r){o=Q(r,e.connections,o);var a=function(e,t,n,o){return t?i.addSerializedConnectionsItemToPage(e,n,t,o):null}(t,e.connections,n,o);a&&(e.connectionQuery=a,X(e.connections,a,r))}(n,t,o,r,s)}(n,I,S,c,u,p,d);var P=a.components;P&&(I.components=[]),D.resetMobileComponentsForClonedComp(n,a,I);var A=U(I);if(u)n.dal.full.set(o,A);else{var T=n.pointers.full.components.getChildrenContainer(r),_=h.getNewIndexForNewComp(n,A,r);n.dal.full.push(T,A,o,_),function(r,i){var s=n.pointers.components.getAllDisplayedOnlyComponents(o);!e.isEmpty(s)&&t.displayedOnlyStructureUtil.isRepeatedComponent(o.id)&&(i.dataQuery||i.designQuery)&&e.forEach(s,(function(o){var s=t.displayedOnlyStructureUtil.getRepeaterItemId(o.id);if(i.dataQuery){var c=t.displayedOnlyStructureUtil.getUniqueDisplayedId(i.dataQuery.replace("#",""),s);n.dal.full.isExist(n.pointers.data.getDataItem(c,r))||K(n,r,c,u,p,e.clone(a))}if(i.designQuery){var l=t.displayedOnlyStructureUtil.getUniqueDisplayedId(i.designQuery.replace("#",""),s);n.dal.full.isExist(n.pointers.data.getDesignItem(l,r))||j(n,r,l,p,e.clone(a))}}))}(S,A)}z(n,P,o,p,d,I.activeModes),D.setMobileComponentChildrenDefinition(n,a,S,p,d,I.activeModes,z);var O=[n,o,I,c,p,r];return s.executeHook(s.HOOKS.ADD.AFTER,I.componentType,O),o}function V(t,n,o){for(var r=[];n;){var i=G(t,n,o);r=r.concat(i),n=t.pointers.full.components.getParent(n)}return e(r).groupBy(e.identity).mapValues(Boolean).value()}function G(t,n,o){var r=[],i=f.getComponentModes(t,n);return e.forEach(i,(function(e){var t=o[e.modeId];t?r.push(t):r.push(e.modeId)})),r}function W(n,o,r,a){if(a.style)if(e.isObject(a.style)){var s=o;if("StylesInBreakpoint"!==a.style.type){var c=n.runtimeConfig.stylesPerPage&&"custom"===a.style.styleType;s=c?o:"masterPage",e.set(a.style,"type",c?C.STYLES.COMPONENT_STYLE:C.STYLES.TOP_LEVEL_STYLE)}var l=i.addSerializedStyleItemToPage(n,a.style,void 0,s);a.styleId=l}else{var p=a.style;if(!_(p)){if(O.isOpen("reportBiErrorWhenAddingCompWithCustomeStyleId"))"onboarding"===e.get(n.config,["origin"])&&!O.isOpen("reportBiErrorInADIAddingCompWithCustomeStyleId")||T.error(n,A.ADD_COMPONENT_WITH_CUSTOM_STYLE_ID,{compType:r,styleId:p});t.log.warnDeprecation("You tried to create a component with an unknown system style Id. It should be either called with a string for system style, or an object for custom style")}u.styles.get(n,p)||g.style.createSystemStyle(n,p,r),a.styleId=p}}function Y(e,t){c.updateAnchors(e,t)}function z(t,n,o,r,i,a){n&&o&&e.forEach(n,(function(e){var n=r&&r[e.id],s=B(t,o,0,n);e.activeModes=a,H(t,s,o,e,n,!1,r,i),Y(t,s)}))}function K(n,o,r,a,s,c){if(a)c.dataQuery="#".concat(o);else{r=Q(s,c.data,r);var u=function(n,o,r,a){var s=null;if(o)if(e.isObject(o))"RepeatedData"===o.type?(s=i.addSerializedDataItemToPage(n,r,o.original,a),e.forEach(o.overrides,(function(e,o){var a=t.displayedOnlyStructureUtil.getUniqueDisplayedId(s,o);i.addSerializedDataItemToPage(n,r,e,a)}))):s=i.addSerializedDataItemToPage(n,r,o,a);else if(e.isString(o)){var c=i.createDataItemByType(n,o);s=i.addSerializedDataItemToPage(n,r,c,a)}return s}(n,c.data,o,r);u&&(c.dataQuery="#".concat(u),X(c.data,u,s))}}function j(n,o,r,a,s){r=Q(a,s.design,r);var c=function(n,o,r,a){var s=null;if(o){if(e.isObject(o))"RepeatedData"===o.type?(s=i.addSerializedDesignItemToPage(n,r,o.original,a),e.forEach(o.overrides,(function(e,o){var a=t.displayedOnlyStructureUtil.getUniqueDisplayedId(s,o);i.addSerializedDesignItemToPage(n,r,e,a)}))):s=i.addSerializedDesignItemToPage(n,r,o,a);else if(e.isString(o)){var c=i.createDataItemByType(n,o);s=i.addSerializedDesignItemToPage(n,r,c,a)}s&&!e.startsWith(s,"#")&&(s="#".concat(s))}return s}(n,s.design,o,r);c&&(s.designQuery=c,X(s.design,c,a))}function q(t,n,o,r,a){o=Q(r,a.props,o);var s=function(t,n,o,r){var a=null;if(n)if(e.isObject(n))a=i.addSerializedPropertyItemToPage(t,o,n,r);else if(e.isString(n)){var s=i.createPropertiesItemByType(t,n);a=i.addSerializedPropertyItemToPage(t,o,s,r)}return a}(t,a.props,n,o);s&&(a.propertyQuery=s,X(a.props,s,r))}function Q(t,n,o){var r=o;if(!t||!n)return r;var i=L(n.id)||"";if(t[i])r=t[i];else if(e.startsWith(i,b)){var a=t[i.substring(b.length)];a&&(r=b+a)}return r}function X(e,t,n){if(n){var o=L(e.id)||"";t=L(t),e.id&&n&&!n[o]&&(n[o]=t)}}function Z(t,n,o){if(o=o||e.noop,f.shouldDeleteComponentFromFullJson(t,n)){if(t.pointers.components.isMobile(n))throw new Error(l.ERRORS.CANNOT_DELETE_MOBILE_COMPONENT);!function(t,n,o){o=o||e.noop,$(t,n)?(!function(t,n){var o=J(t,n);e.forEach(o,(function(e){m.isDeleteHandlerExists(e.id)&&m.executeDeleteHandler(e.id)}))}(t,n),e.delay((function(){m.unRegisterHandlers(t,n.id),o()}),500)):o()}(t,n,o)}else o()}function J(e,t){var n=y.getTpaChildren(e,t);return v.isTpaByCompType(y.getType(e,t))&&n.push(t),n}function $(t,n){if(!y.isExist(t,n))return!1;var o=J(t,n);return e.some(o,(function(e){return m.isDeleteHandlerExists(e.id)}))}function ee(n,o){var r=[o];if(t.displayedOnlyStructureUtil.isRepeatedComponent(o.id)){var s=t.displayedOnlyStructureUtil.getRepeaterTemplateId(o.id),c=n.pointers.components.getPageOfComponent(o),l=n.pointers.full.components.getComponent(s,c);n.dal.full.isExist(l)&&!n.dal.isExist(l)&&r.push(l)}var p=!n.pointers.components.isMobile(o);e.forEach(r,(function(t){var o=p?t:n.pointers.components.getDesktopPointer(t);p&&(i.deleteDataItem(n,o),i.removeBehaviorsItem(n,o),i.deleteMobileHintsItem(n,o),i.deleteDesignItem(n,o),i.deletePropertiesItem(n,o),i.removeConnectionsItem(n,o),function(t,n){var o=g.style.get(t,n);if(e.get(o,"type")===C.STYLES.COMPONENT_STYLE){var r=(t.pointers.components.getPageOfComponent(n)||t.pointers.full.components.getPageOfComponent(n)).id;u.styles.remove(t,o.id,r)}}(n,o)),D.deleteForkedData(n,o,i,a)}))}function te(t,n,o,r,a){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.noop,l=arguments.length>6?arguments[6]:void 0,p=t.pointers.components.getParent(n),d=y.getType(t,n);s.executeHook(s.HOOKS.REMOVE.BEFORE,d,arguments);var g=t.pointers.full.components.getChildren(n),m=a||f.shouldDeleteComponentFromFullJson(t,n);e.forEachRight(g,(function(e){return l(t,e,!0,r,m)}));var v=i.getDataItem(t,n),E=P.getPlatformAppConnections(t,n);t.pointers.components.isPage(n)||ee(t,n);var I=[t,n,o,r,a,v,p,E];(t.dal.isExist(n)?t.dal:t.dal.full).remove(n),s.executeHook(s.HOOKS.REMOVE.AFTER,d,I),c&&p&&!o&&t.dal.get(p)&&c.updateAnchors(t,p),u(t)}var ne=function(n,o){var r=n.pointers.full.components.getAllDisplayedOnlyComponents(o);if(t.displayedOnlyStructureUtil.isRepeatedComponent(o.id)){var i=t.displayedOnlyStructureUtil.getRepeaterTemplateId(o.id),a=n.pointers.components.getPageOfComponent(o),s=n.pointers.full.components.getComponent(i,a);n.dal.isExist(s)&&r.push(s)}else n.dal.isExist(o)&&r.push(o);return e.uniqBy(r,"id")};function oe(t,n,o,r,i,a){var s=ne(t,n);a=a||e.noop;var c=e.after(s.length,a);e.forEach(s,(function(e){!function(e,t,n,o,r,i){if(r||f.shouldDeleteComponentFromFullJson(e,t)){var a=l.validateComponentToDelete(e,t,r);if(!a.success)throw new Error(a.error);te(e,t,n,o,r,i,oe)}else!function(e,t,n){e.dal.remove(t),n&&n(e)}(e,t,i)}(t,e,o,r,i,c)}))}function re(t,n,o,r,i,a){var s=t.pointers.full.components.getAllDisplayedOnlyComponents(n);a=a||e.noop;var c=e.after(s.length,a);e.forEach(s,(function(e){!function(e,t,n,o,r,i){var a=l.validateComponentTypeToDelete(e,t);if(!a.success)throw new Error(a.error);if(!(a=l.validateComponentExistOnFull(e,t)).success)throw new Error(a.error);te(e,t,n,o,r,i,re)}(t,e,o,r,i,c)}))}function ie(e,t){return E.getComponentLayout(e,t)}function ae(){return t.guidUtils.getUniqueId("comp","-")}return e.merge({isContainsCompWithType:y.isContainsCompWithType,isRenderedOnSite:y.isRenderedOnSite,getComponentToAddRef:B,getComponentToDuplicateRef:function(e,t,n,o){var r=o||ae(),i=e.pointers.components.getViewMode(n);return e.pointers.components.getUnattached(r,i)},add:F,addWithConstraints:function(t,n,o,r,i,a){if(function(t){if(e.isNull(t)||e.isPlainObject(t)&&e.isEmpty(t))return!0;if(!e.isObject(t))throw new Error("Non valid constraints value. Expected null or object");var n=Object.getOwnPropertyNames(t);if(1!==n.length||e.isUndefined(t.under))throw new Error('Constrains should be empty {} or have only property "under"');if(!e.isPlainObject(t.under))throw new Error('Constrains "under" property should have plain object value');if(2!==(n=Object.getOwnPropertyNames(t.under)).length||e.isUndefined(t.under.margin)||e.isUndefined(t.under.comp))throw new Error('Constraints "under" property should has the schema {comp: compRef, margin: number}');if(!e.isNumber(t.under.margin))throw new Error('Constrains "margin" should be a number')}(i),!t.pointers.components.isPage(o))throw new Error("this API works only for page parent for now");if(!I.isSimpleLayout(r.layout))throw new Error("the layout of the added comp should be simple, no fixed, docked, rotated and such");var s=r;if(!e.isEmpty(i)){var c=t.dal.get(t.pointers.getInnerPointer(i.under.comp,"layout"));if(!I.isSimpleLayout(c))throw new Error("you cannot place a component below a fixed, rotated, docked and such comps.");(s=e.clone(r)).layout=e.assign({},s.layout,function(e,t){var n=ie(e,t.under.comp);return{y:n.y+n.height+t.under.margin}}(t,i))}F(t,n,o,s,a)},addAndAdjustLayout:k,duplicate:function(e,t,n,o,r){var i=p.serializeComponent(e,n);s.executeHook(s.HOOKS.DUPLICATE.BEFORE,i.componentType,[e,n,i,o]),F(e,t,o,i,r)},serialize:p.serializeComponent,remove:function(e,t,n,o){if(e.pointers.components.isMobile(t))throw new Error(l.ERRORS.CANNOT_DELETE_MOBILE_COMPONENT);oe(e,t,!1,o,!1,n)},removeFromFull:function(e,t,n,o){if(e.pointers.components.isMobile(t))throw new Error(l.ERRORS.CANNOT_DELETE_MOBILE_COMPONENT);re(e,t,!1,o,!1,n)},deleteComponent:oe,validateRemoval:function(e,t){Z(e,t,e.setOperationsQueue.asyncPreDataManipulationComplete.bind(e.setOperationsQueue))},validateRemovalInternal:Z,shouldDelayDeletion:$,getContainer:y.getContainer,getAncestors:y.getAncestors,getAncestorsFromFull:y.getAncestorsFromFull,getPage:y.getPage,getSiblings:y.getSiblings,getRepeatedComponents:y.getRepeatedComponents,getChildren:y.getChildren,getChildrenFromFull:y.getChildrenFromFull,getAllJsonChildren:y.getAllJsonChildren,getTpaChildren:y.getTpaChildren,getBlogChildren:y.getBlogChildren,getType:y.getType,getDefinition:y.getDefinition,setComponent:H,isComponentRemovable:function(e,t){if(!d.public.isRemovable(e,t))return!1;var n=y.getType(e,t);return s.executeHook(s.HOOKS.REMOVE.IS_OPERATION_ALLOWED,n,arguments,(function(e){return!1===e}))},isComponentVisible:function(e,n){var o=e.dal.get(e.pointers.general.getRenderFlags()),r=e.pointers.components.getViewMode(n),i=e.dal.get(e.pointers.general.getIsCompHiddenPointer(n.id,r)),a={compId:n.id,compType:y.getType(e,n),compProperties:y.getPropertiesItem(e,n),compLayout:E.getComponentLayout(e,n),isMobile:S.isMobileView(e),isVisible:d.public.isVisible(e,n),renderFlags:o,isCompHiddenByRenderPlugin:i};return t.componentVisibility.isComponentVisible(a)},isComponentModal:function(e,t){return d.public.isModal(e,t)},isComponentUsingLegacyAppPartSchema:function(e,t){return d.public.isUsingLegacyAppPartSchema(e,t)},isComponentDuplicatable:function(e,t,n){if(!d.public.isDuplicatable(e,t,n))return!1;var o=y.getType(e,t);return s.executeHook(s.HOOKS.DUPLICATE.IS_OPERATION_ALLOWED,o,arguments,(function(e){return!1===e}))},isPageComponent:y.isPageComponent,generateNewComponentId:ae,properties:{update:i.updatePropertiesItem,get:i.getPropertiesItem,mobile:{fork:a.splitMobileComponentProperties,join:a.resetMobileComponentProperties,isForked:a.isMobileComponentPropertiesSplit}},data:{get:i.getDataItem,update:i.updateDataItem},design:{updateDesignItem:function(t,n,o,r){var a=i.getDesignItem(t,n)||{},s=o.background&&!e.isEqual(o.background,a.background),c=i.updateDesignItem(t,n,o,r);return s&&function(t,n){var o=f.getAllCompDesignItems(t,n),r=e.map(o,(function(t){return e.pick(i.getMediaRef(t),["uri","videoId","type"])}));(!e.every(r,(function(t){return e.isEqual(t,e.head(r))}))||r.length<=1)&&f.removeDesignBehaviorsFromAllModes(t,n,["media"])}(t,n),c}},layout:{get:ie},isExist:y.isExist,getContainerToAddComponentTo:y.getContainerToAddComponentTo,applyComponentToMode:function(t,n,o){e.forEach(n,(function(n){var r=n.compRef;f.removeSingleModeBehaviors(t,r);var a=t.pointers.componentStructure.getModes(r),s=t.dal.full.get(a);e.some(s.overrides,(function(t){return e.includes(t.modeIds,o)}))?s.overrides=s.overrides.map((function(t){return e.includes(t.modeIds,o)&&(t.isHiddenByModes=!1),t})):s.overrides.push({modeIds:[o],isHiddenByModes:!1}),t.dal.full.set(a,s);var c=e.find(n.compDefinition.modes.overrides,(function(t){var o=e(n.compDefinition.activeModes).keys().head();return e.includes(t.modeIds,o)})),u=c&&c.layout?c.layout:n.compDefinition.layout,l=t.pointers.getInnerPointer(r,"layout");t.dal.set(l,u);var p=c&&c.props?c.props:n.compDefinition.props;p&&i.updatePropertiesItem(t,r,p),c&&c.style&&g.style.setId(t,r,c.previousStyleId)}))},getA11ySchema:w.getA11ySchema},{modes:f})}()},function(e,t){e.exports=n},function(e,t,n){e.exports=n(261).createHandler()},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(14),r=n(21),i=n(27),a=n(11),s=n(25),c=n(117),u=n(17);function l(e,t,n){var o=t.right-t.left+1,r=t.bottom-t.top+1,i={x:t.left+o/2,y:t.top+r/2},a={A:e,B:i},s=e.y-i.y,c=e.x-i.x;a.hypotenuse=Math.pow(Math.pow(c,2)+Math.pow(s,2),.5),a.ABHorizontalXangle=0===c?s>0?Math.PI/2:-Math.PI/2:Math.atan(s/c);var u=n*Math.PI/180;a.ABComponentXangle=a.ABHorizontalXangle-u;var l=Math.abs(a.hypotenuse*Math.cos(a.ABComponentXangle)),p=Math.abs(a.hypotenuse*Math.sin(a.ABComponentXangle));return l<o/2&&p<r/2}function p(e,t,n,o,r,i,s){var c={x:t,y:a.isShowOnFixedPosition(e,s)?n-r:n,margin:o},u=function(e,t,n){return n(e,t)}(e,s,i),p=u.rotationInDegrees,d=p>0;d||(u=u.bounding);var g,f,m=isNaN(o)?0:o,v=function(e,t,n,o,r){return{left:n-r,top:o-r,right:n+e+r,bottom:o+t+r}}(u.width,u.height,u.x,u.y,m);return d?l(c,v,p):(g=c).x>(f=v).left&&g.x<f.right&&g.y>f.top&&g.y<f.bottom}function d(t,n,o,r){var i=t.siteAPI.getSiteMeasureMap(),s=r?t.pointers.full:t.pointers,c=n.reverse();return e(c).map((function(e){return s.components.getChildrenRecursivelyRightLeftRootIncludingRoot(e)})).flattenDeep().filter(o).sortBy((function(n){var o=e.get(i,["zIndex",n.id],0);return a.isFixedPosition(t,n)||a.isAncestorFixedPosition(t,n)?-1:1e3-o})).value()}function g(t,n,o){var r=o?t.dal.full:t.dal;return e.filter(n,(function(e){return"platform.components.AppController"===r.get(t.pointers.getInnerPointer(e,"componentType"))}))}function f(n,a,s,c){s=u.getViewMode(n,s,t);var l=c?n.pointers.full:n.pointers,p=l.components.getMasterPage(s),d=l.components.getChildren(p);if(a===p.id)return d;var f,m=a?[a]:r.getPagesList(n,!1,!0),v=e.map(m,(function(e){return l.components.getPage(e,s)}));if(a&&n.siteAPI.isPageLandingPage(a)){var E=l.components.getLandingPageComponents(s);return f=g(n,d,c),E.concat(v,f)}if(a&&i.isPopup(n,a))return f=g(n,d,c),v.concat(f);var y=e.findIndex(d,{id:"PAGES_CONTAINER"})+1;return d.splice.apply(d,[y,0].concat(o(v))),d}function m(t,n,o,r,i,a,u){var l,g=n,m=o,v=(l=t,c.getScroll(l));if(u){var E=t.pointers.general.getRenderFlag("siteScale"),y=t.dal.get(E);g+=v.x,m+=v.y/y}var I=e.partial(p,t,g,m,r,v.y,a);i=i||t.siteAPI.getFocusedRootId();var S=f(t,i),h=d(t,S,I);return i===t.siteAPI.getFocusedRootId()&&(h=e.reject(h,(function(e){return!s.isRenderedOnSite(t,e)}))),h}function v(n,o,r,i){if(!o)return null;r=r||n.siteAPI.getCurrentUrlPageId(),i=u.getViewMode(n,i,t);var a,s=n.pointers.components.getPage(r,i);if(s){var c=n.siteAPI.isMobileView(),l=n.pointers.components.getMasterPage(i);if(a=n.pointers.components.findComponentInPage(s,c,(function(t){return e.get(t,"id")===o}))||n.pointers.components.findComponentInPage(l,c,(function(t){return e.get(t,"id")===o})))return a}return((a=(s=n.pointers.full.components.getPage(r,i))?n.pointers.full.components.getComponent(o,s):null)?n.dal.full.get(a):null)&&a}return{getComponentsAtXYRelativeToStructure:function(e,t,n,o,r){return m(e,t,n,o,r,a.getCompLayoutRelativeToStructure,!1)},getComponentsAtXYRelativeToScreen:function(e,t,n,o,r){return m(e,t,n,o,r,a.getCompLayoutRelativeToScreen,!0)},getComponentByType:function(t,n,o){var r=e.isArray(n)?n:[n],i=o?[o]:f(t,void 0,void 0,!0),a=function(t,n){return e(n).map((function(e){return t.pointers.full.components.getChildrenRecursively(e)})).flattenDeep().value()}(t,i);return a=a.concat(i),e.filter(a,(function(n){var o=t.dal.full.get(t.pointers.getInnerPointer(n,"componentType"));return e.includes(r,o)}))},getAllComponents:function(e,t,n,o){return d(e,f(e,t,o),n)},getAllComponentsFromFull:function(e,t,n,o){return d(e,f(e,t,o,!0),n,!0)},getComponentsUnderAncestor:function(e,t){return e.pointers.components.getChildrenRecursively(t)},getComponentById:v,getSiteHeader:function(e,t){return v(e,"SITE_HEADER","masterPage",t)},isDescendantOfComp:function(e,t,n){return n&&e.pointers.full.components.isDescendant(t,n)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(12),r=n(157),i=(n(45),n(2)),a=n(9),s=n(165),c=n(14),u=n(62),l=n(27),p=n(6),d=n(10),g={};function f(e,t){return a.isContainer(a.getComponentType(e,t))||e.pointers.components.isMasterPage(t)}function m(t,n,o,r){var i=f(n,r)&&(function(e,t,n,o){var r=a.getComponentType(t,o),i=e?n.componentType:a.getComponentType(t,n),s=_(t,n,e),c=_(t,o),u=a.isHeaderOrFooterOrPageOrMasterPage(r),l=a.isNonContainableFullWidth(i);return!s||c&&!l||u}(t,n,o,r)||function(e,t,n,o){var r=a.getComponentType(t,o),i=e?n.componentType:a.getComponentType(t,n);return a.isComponentParentTypeMatchesComponentChildType(r,i)}(t,n,o,r)||function(e,t){var n=a.getComponentType(e,t);return l.isPopupContainer(n)}(n,r))&&!function(t,n,o){for(var r=t.pointers.components.getParent(o);r;){if(e.isEqual(r,n))return!0;r=t.pointers.components.getParent(r)}return!1}(n,o,r);return t?i:i&&function(e,t,n){if(e.pointers.components.getPageOfComponent(t).id!==e.pointers.components.getPageOfComponent(n).id){if(!e.pointers.components.isInMasterPage(t)&&!e.pointers.components.isInMasterPage(n))return!1;if(c.isMobileView(e))return!1}return!0}(n,o,r)}function v(e,t,n,o){return o?m(e,t,n,o):!(c.isMobileView(t)||_(t,n,e)||w(t,n))}function E(e){return!c.isMobileView(e)}g[s.MOVE_DIRECTIONS]=p.HOOKS.METADATA.MOVE_DIRECTIONS,g[s.REMOVABLE]=p.HOOKS.METADATA.REMOVABLE,g[s.DUPLICATABLE]=p.HOOKS.METADATA.DUPLICATABLE,g[s.CAN_REPARENT]=p.HOOKS.METADATA.CAN_REPARENT,g[s.ROTATABLE]=p.HOOKS.METADATA.ROTATABLE,g[s.FIXED_POSITION]=p.HOOKS.METADATA.FIXED_POSITION,g[s.RESIZABLE_SIDES]=p.HOOKS.METADATA.RESIZABLE_SIDES,g[s.CONTAINABLE]=p.HOOKS.METADATA.CONTAINABLE,g[s.LAYOUT_LIMITS]=p.HOOKS.METADATA.LAYOUT_LIMITS;var y,I={containable:v.bind(null,!1),containableByStructure:v.bind(null,!0),container:f,canContain:f,canContainByStructure:f,shouldKeepChildrenInPlace:!0,disableable:!1,isRepeater:!1,isRepeatable:!0,isContainCheckRecursive:!0,moveDirections:[i.MOVE_DIRECTIONS.HORIZONTAL,i.MOVE_DIRECTIONS.VERTICAL],resizableSides:[i.RESIZE_SIDES.TOP,i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.BOTTOM,i.RESIZE_SIDES.RIGHT],rotatable:!1,flippable:!1,anchors:{to:{allow:!0,lock:i.ANCHORS.LOCK_CONDITION.THRESHOLD},from:{allow:!0,lock:i.ANCHORS.LOCK_CONDITION.THRESHOLD}},canBeFixedPosition:!0,canBeStretched:!1,showMarginsIndicator:!1,removable:!0,alignable:function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"layout"));return!(n.fixedPosition||n.docked)},duplicatable:E,crossSiteDuplicatable:E,hiddenable:!0,minimalChildrenNumber:0,maximumChildrenNumber:Number.MAX_VALUE,collapsible:!0,dockable:!0,fullWidth:function(e,t){var n=e.pointers.getInnerPointer(t,"layout"),r=e.dal.get(n);return o.dockUtils.isHorizontalDockToScreen(r)||a.isLegacyFullWidthContainer(e,t)},fullWidthByStructure:function(e,t){return o.dockUtils.isHorizontalDockToScreen(t.layout)||a.isLegacyFullWidthContainerByType(t.componentType)},styleCanBeApplied:!1,groupable:function(e,t){return P(e,s.CONTAINABLE,t)},enforceContainerChildLimitsByWidth:!0,enforceContainerChildLimitsByHeight:!0,nickname:a.getComponentNickname,layoutLimits:{minWidth:o.siteConstants.COMP_SIZE.MIN_WIDTH,minHeight:o.siteConstants.COMP_SIZE.MIN_HEIGHT,maxWidth:o.siteConstants.COMP_SIZE.MAX_WIDTH,maxHeight:o.siteConstants.COMP_SIZE.MAX_HEIGHT,aspectRatio:null},isProportionallyResizable:function(e,t){return Y(e,t)&&z(e,t)},ignoreChildrenOnProportionalResize:!1,enforceMaxDimensionsOnProportionalResize:!1,resizeOnlyProportionally:!1,isVisible:!0,enforceResizableCorners:!1,forceMaintainIDsOnSerialize:!1,canReparent:!0,heightAuto:!1,widthAuto:!1},S=function(t,n){var o=e.get(r,[t,"isExternal"],!1),i=e.get(r,[t,n]);return o&&!e.isUndefined(i)};function h(t,n){var o=e.get(r,[t,n]);return e.isUndefined(o)?I[n]:o}function P(t,n,o){for(var r=a.getComponentType(t,o),i=h(r,n),s=arguments.length,c=new Array(s>3?s-3:0),u=3;u<s;u++)c[u-3]=arguments[u];var l=[o].concat(c);if(e.isFunction(i)){var d;if(S(r,n)){if(!y)return I[n];d=y(t,o)}else d=t;var f=[d].concat(l);i=i.apply(this,f)}return g[n]?p.executeHookAndUpdateValue(t,g[n],r,l,i):i}function A(t,n,o){var r=h(o.componentType,n);if(e.isFunction(r)){for(var i=arguments.length,a=new Array(i>3?i-3:0),s=3;s<i;s++)a[s-3]=arguments[s];r=r.apply(void 0,[t,o].concat(a))}return r}function T(e,t){return P(e,s.RESIZABLE_SIDES,t)}function _(e,t,n){return n?A(e,s.FULL_WIDTH_BY_STRUCTURE,t):P(e,s.FULL_WIDTH,t)}function O(e,t){return P(e,s.CONTAINER,t)}function C(e,t){return!!P(e,s.MOVE_DIRECTIONS,t).length}function D(t){return e.isObject(t)&&0!==t.rotationInDegrees}function w(e,t){var n=e.pointers.getInnerPointer(t,"layout"),r=e.dal.get(n);return o.dockUtils.isHorizontalDockToScreen(r)}function M(e,t){var n=a.getComponentType(e,t);return a.isLegacyFullWidthContainer(e,t)||l.isPopupContainer(n)}function b(e,t,n,o){for(var r,i=!0,a=n;n&&i;)r=P(e,s.IS_CONTAIN_CHECK_RECURSIVE,n),i=o(e,t,n,a),n=r?e.pointers.components.getParent(n):null;return i}function R(e,t,n,o){return P(e,s.CAN_CONTAIN,n,t,o)}var N=function(e,t){return P(e,s.IS_REPEATER,t)},x=function(e){return h(e,s.IS_REPEATABLE)},L=function(t,n){var o=t.pointers.full.components.getChildren(n);return e.size(o)>0},B=function t(n,o){var r=function(e,t){return P(e,s.IS_REPEATABLE,t)}(n,o),i=n.pointers.components.getChildren(o);return r&&e.every(i,(function(e){return t(n,e)}))},F=function(e,t,n){var o=N(e,n);return(!o||!L(e,n))&&(!(o||H(e,n))||B(e,t))};function k(e,t){return P(e,s.CAN_REPARENT,t)}function U(t,n,r,i){if(function(t,n,o,r){if(!(r.id===o.id))return!1;var i=N(t,r);if(i&&L(t,r))return!0;if(i||H(t,r)){var s=a.getChildrenTypesDeep([n]);return!e.every(s,x)}return!1}(t,n,r,i))return!1;var c=P(t,s.CAN_CONTAIN_BY_STRUCTURE,r,n,i);o.dockUtils.isHorizontalDockToScreen(n.layout)&&(c=c&&M(t,r));var u=A(t,s.CONTAINABLE_BY_STRUCTURE,n,r);return Boolean(c&&u)}function H(e,n){return t.displayedOnlyStructureUtil.isRepeatedComponent(n.id)}function V(e,t){return P(e,s.ENFORCE_CONTAINER_CHILD_LIMITS_BY_WIDTH,t)}function G(e,t){return P(e,s.ENFORCE_CONTAINER_CHILD_LIMITS_BY_HEIGHT,t)}function W(t,n){var o=e.defaults(P(t,s.LAYOUT_LIMITS,n),I.layoutLimits);return!e.isNull(o.aspectRatio)}function Y(t,n){return!!e.intersection(T(t,n),[i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.RIGHT]).length||W(t,n)}function z(t,n){return!!e.intersection(T(t,n),[i.RESIZE_SIDES.TOP,i.RESIZE_SIDES.BOTTOM]).length||W(t,n)}return{init:function(e){y=e},public:{isContainable:function(e,n,o){return!!(o&&O(e,o)&&F(e,n,o))&&(!(!k(e,n)&&function(e,t,n){return!e.pointers.isSamePointer(e.pointers.components.getParent(t),n)}(e,n,o))&&(P(e,s.CONTAINABLE,n,o)&&b(e,n,o,R)&&function(e,n,o){return!c.isMobileView(e)||(!H(e,n)&&!H(e,o)||t.displayedOnlyStructureUtil.getRepeaterItemId(n.id)===t.displayedOnlyStructureUtil.getRepeaterItemId(o.id))}(e,n,o)&&(!w(e,n)||M(e,o))))},isContainableByStructure:function(e,t,n){return b(e,t,n,U)},isContainer:O,isAlignable:function(e,t){return P(e,s.ALIGNABLE,t)&&C(e,t)},isMovable:C,isHorizontallyMovable:function(t,n){return e.includes(P(t,s.MOVE_DIRECTIONS,n),i.MOVE_DIRECTIONS.HORIZONTAL)},isVerticallyMovable:function(t,n){return e.includes(P(t,s.MOVE_DIRECTIONS,n),i.MOVE_DIRECTIONS.VERTICAL)},getMobileConversionConfig:function(t,n,o){var a=n.componentType||n.documentType,c=e.get(r,[a,s.MOBILE_CONVERSION_CONFIG]),u=e.mapValues(c,(function(r){return e.isFunction(r)?r(t,n,o):r})),l=e.get(r,[a,s.LAYOUT_LIMITS]);if(e.isFunction(l)){var p=t.pointers.components.getPage(o,i.VIEW_MODES.DESKTOP),d=t.pointers.components.getComponent(n.id,p);l=d&&t.dal.isExist(d)?l(t,d):l}var g=e.get(r,[a,s.HIDDENABLE],!0);return e.defaults(u,l?{layoutLimits:l}:{},{hiddenable:g})},getMobileConversionConfigByName:function(t,n,o,i){var a=n.componentType||n.documentType,c=e.get(r,[a,s.MOBILE_CONVERSION_CONFIG,o]);return e.isFunction(c)?c(t,n,i):c},getMinimalChildrenNumber:function(e,t){return P(e,s.MINIMAL_CHILDREN_NUMBER,t)},allowedToContainMoreChildren:function(e,t){var n=P(e,s.MAXIMUM_CHILDREN_NUMBER,t);return n===Number.MAX_VALUE||n>e.pointers.components.getChildren(t).length},getDefaultMobileProperties:function(t,n,o){var r=h(n.componentType,s.DEFAULT_MOBILE_PROPERTIES);return e.isFunction(r)?r(t,n,o):r},getResizableSides:function(e,t){return T(e,t)},isHorizontallyResizable:Y,isVerticallyResizable:z,isProportionallyResizable:function(e,t){return P(e,s.IS_PROPORTIONALLY_RESIZABLE,t)},isIgnoreChildrenOnProportionalResize:function(e,t){return P(e,s.IGNORE_CHILDREN_ON_PROPORTINAL_RESIZE,t)},enforceMaxDimensionsOnProportionalResize:function(e,t){return P(e,s.ENFORCE_MAX_DIM_ON_PROPORTIONAL_RESIZE,t)},isResizable:function(e,t){return!!T(e,t).length},isRotatable:function(e,t){return P(e,s.ROTATABLE,t)&&!function(e,t){var n=e.pointers.getInnerPointer(t,"layout"),r=e.dal.get(n);return o.dockUtils.isStretched(r)}(e,t)},isFlippable:function(e,t){return P(e,s.FLIPPABLE,t)},isGroupable:function(e,t){return P(e,s.GROUPABLE,t)&&k(e,t)},canBeFixedPosition:function(e,t){return P(e,s.FIXED_POSITION,t)},isModal:function(e,t){return!!P(e,s.MODAL,t)},isMobileOnly:function(e,t){return!!P(e,s.MOBILE_ONLY,t)},isUsingLegacyAppPartSchema:function(e,t){return!!P(e,s.USING_LEGACY_APP_PART_SCHEMA,t)},canBeStretched:function(e,t){var n=e.pointers.components.getPageOfComponent(t);return!(l.isPopup(e,n.id)&&!l.isPopupFullWidth(e,n))&&(P(e,s.CAN_BE_STRETCHED,t)&&!function(e,t){var n=e.pointers.getInnerPointer(t,"layout");return D(e.dal.get(n))}(e,t))},canBeStretchedByStructure:function(e,t){return A(e,s.CAN_BE_STRETCHED,t)&&!D(t.layout)},resizeOnlyProportionally:W,enforceResizableCorners:function(e,t){return P(e,s.ENFORCE_RESIZABLE_CORNERS,t)},isRepeatedComponent:H,isEnforcingContainerChildLimitations:function(e,t){return V(e,t)||G(e,t)},isEnforcingContainerChildLimitationsByWidth:V,isEnforcingContainerChildLimitationsByHeight:G,isFullWidth:function(e,t){return _(e,t,!1)},isFullWidthByStructure:function(e,t){return _(e,t,!0)},isRemovable:function(e,t){return P(e,s.REMOVABLE,t)},isDuplicatable:function(e,t,n){return P(e,s.DUPLICATABLE,t,n)},isCrossSiteDuplicatableByStructure:function(e,t){return A(e,s.CROSS_SITE_DUPLICATABLE,t)},isStyleCanBeApplied:function(e,t){return P(e,s.STYLE_CAN_BE_APPLIED,t)},getLayoutLimits:function(t,n,o){var r=e.defaults(P(t,s.LAYOUT_LIMITS,n,o),I.layoutLimits),i=t.pointers.components.isMobile(n)&&u.isWidgetPage(t,e.get(t.pointers.components.getParent(n),"id"));return r.maxWidth=Math.min(r.maxWidth,I.layoutLimits.maxWidth,i?320:Number.MAX_SAFE_INTEGER),r.maxHeight=Math.min(r.maxHeight,I.layoutLimits.maxHeight),r.minWidth=Math.max(r.minWidth,I.layoutLimits.minWidth),r.minHeight=Math.max(r.minHeight,I.layoutLimits.minHeight),r},isHiddenable:function(e,t){return P(e,s.HIDDENABLE,t)},isCollapsible:function(e,t){return P(e,s.COLLAPSIBLE,t)},isDockable:function(e,t){return P(e,s.DOCKABLE,t)},isDisableable:function(e,t){return!!P(e,s.DISABLEABLE,t)},isAnchorableFrom:function(t,n){var r=a.getComponentType(t,n),i=o.getComponentsAnchorsMetaData();return e.get(i[r],"from.allow",i.default.from.allow)},isAnchorableTo:function(t,n){var r=a.getComponentType(t,n),i=o.getComponentsAnchorsMetaData();return e.get(i[r],"to.allow",i.default.to.allow)},isVisible:function(e,t){return P(e,s.VISIBLE,t)},isPotentialContainerForScreenWidthComp:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return M(e,t)})),canReparent:k,heightAuto:function(e,t){return P(e,s.HEIGHT_AUTO,t)},heightAutoByStructure:function(e,t){return A(e,s.HEIGHT_AUTO,t)},widthAuto:function(e,t){return P(e,s.WIDTH_AUTO,t)},widthAutoByStructure:function(e,t){return A(e,s.WIDTH_AUTO,t)}},getShouldKeepChildrenInPlace:function(e,t){return P(e,s.SHOULD_KEEP_CHILDREN_IN_PLACE,t)},getAnchorableHeight:function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"layout.height"));if(!O(e,t))return n;var r=function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"styleId")),o=e.pointers.components.getPageOfComponent(t).id;return n?d.styles.get(e,n,o):null}(e,t),i=r&&r.skin||e.dal.get(e.pointers.getInnerPointer(t,"skin"));return n-o.layoutAnchors.getNonAnchorableHeightForSkin(i,r)},getDefaultNickname:function(e,t){return P(e,s.NICKNAME,t)},shouldForceMaintainIDsOnSerialize:function(e,t){return P(e,s.FORCE_MAINTAIN_IDS_ON_SERIALIZE,t)},shouldBeRemovedByParent:function(e,t,n){var o=(n=n||e.pointers.components.getParent(t))&&a.getComponentType(e,n);return!!o&&"wysiwyg.viewer.components.RefComponent"===o},getComponentType:a.getComponentType}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E;e.exports=(o=n(0),r=n(12),i=n(15),a=n(114),s=n(27),c=n(19),u=n(268),l=n(3),p=n(43),g=["wysiwyg.viewer.components.SiteSegmentContainer","wysiwyg.viewer.components.FooterContainer","wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.PagesContainer"],f={"wysiwyg.viewer.components.ScreenWidthContainer":!0,"wysiwyg.viewer.components.StripContainerSlideShow":!0,"wysiwyg.viewer.components.StripContainerSlideShowSlide":!0,"wysiwyg.viewer.components.StateStrip":!0,"wysiwyg.viewer.components.StateStripState":!0},m=["wysiwyg.viewer.components.FooterContainer","wysiwyg.viewer.components.HeaderContainer","mobile.core.components.Page","core.components.Page","wixapps.integration.components.AppPage",d="wysiwyg.viewer.components.WSiteStructure"],v=["wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateBoxFormState","wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStripState","wysiwyg.viewer.components.StateStrip","wysiwyg.viewer.components.StripContainerSlideShowSlide","wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.StripColumnsContainer","wysiwyg.viewer.components.HoverBox","wysiwyg.common.components.anchor.viewer.Anchor","wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu","wysiwyg.viewer.components.tpapps.TPAWidget","wysiwyg.viewer.components.tpapps.TPASection","wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.tpapps.TPAMultiSection","wixapps.integration.components.AppPart","platform.components.AppWidget","wixapps.integration.components.AppPart2"],E={isSiteStructure:function(e){return e===d},isSiteSegment:function(e){return o.includes(g,e)},isContainer:function(e){return c.services.isContainer(e)},isLegacyFullWidthContainer:function(e,t){var n=i.getComponentType(e,t),r=u[n];return o.isFunction(r)?r(e,t):!!r},isLegacyFullWidthContainerByType:function(e){return!(!u[e]||o.isFunction(u[e]))},isHeaderOrFooterOrPageOrMasterPage:function(e){return o.includes(m,e)},isComponentSuitableForNonRenderingState:function(e){return!o.includes(v,e)},isPopupPageOrPopupContainer:function(e,t){return s.isPopup(e,t.id)||"wysiwyg.viewer.components.PopupContainer"===i.getComponentType(e,t)},isComponentParentTypeMatchesComponentChildType:function(e,t){return a.isSlideShowComponent(e)&&a.isSlideComponent(t)&&a.getMatchingChildSlideType(e)===t},isNonContainableFullWidth:function(e){return!(!f[e]||o.isFunction(f[e]))},getComponentType:i.getComponentType,getComponentNickname:function(e,t){var n=e.dal.full.get(e.pointers.getInnerPointer(t,"componentType"));if(!n)return"";var r=o.get(c.services.schemasService.getDefinition(n),"nickname");return r||o.camelCase(o.last(n.split(".")))},getChildrenTypesDeep:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?o.flatMap(e,(function(e){var t=e.componentType,n=E.getChildrenTypesDeep(e.components);return[t].concat(n)})):[]},containableByFullWidthPopup:function(e,t,n){var o=e.pointers.components.getPageOfComponent(n);return!(s.isPopup(e,o.id)&&!s.isPopupFullWidth(e,o))},notContainableByPopup:function(e,t,n){var o=e.pointers.components.getPageOfComponent(n);return!s.isPopup(e,o.id)},isMaintainSvgAspectRatio:function(e,t){var n=e.dal.get(t),o=e.pointers.components.getPageOfComponent(t),r=e.pointers.data.getPropertyItem(i.stripHashIfExists(n.propertyQuery),o.id);return"fit"===e.dal.get(r).displayMode},isMaintainWPhotoAspectRatio:function(e,t,n){var o=r.imageTransform.fittingTypes,a=o.STRETCH,s=o.LEGACY_FULL,c=e.pointers.data.getPropertyItem(i.stripHashIfExists(t.propertyQuery),n),u=e.dal.get(c)||{},l=u.autoFill,p=u.displayMode;return!l&&p!==a&&p!==s},isMaintainVideoBoxAspectRatio:function(e){var t=o.get(e,["background","mediaRef","mediaFeatures"],[]);return o.includes(t,"alpha")},getVideoBoxAspectRatio:function(e){var t=o.get(e,["background","mediaRef","qualities"],[]),n=o.maxBy(t,"width")||{};return n.width/n.height},getControllerNickname:function(e,t){var n=l.getDataItem(e,t)||{},r=n.applicationId,i=n.controllerType,a=(p.getControllerStageData(e,t.id,i,r)||{}).nickname;return o.camelCase(a||i)}})},function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(){var e=n(0),t=n(3),r=n(390),i=n(166),a=n(393),s=n(12),c=n(1),u=n(30),l=n(19),p=n(2),d=n(53),g=n(167),f=s.fonts,m=l.services,v=m.themeValidationHelper,E=m.schemasService,y=s.constants.DATA_TYPES,I="THEME_DATA",S=[];function h(t,n,o,r){var i=e.omit(n,["id"]);return i.styleType="custom",O(t,i,null,o,r)}function P(t,n,o,r,i){w(n,o);var a=e.omit(o,["styleType","type"]),s=t.pointers.data.getThemeItem(n,r),c=t.dal.get(s),u=e.assign(c||{},a),l=e.get(c,"styleType")||e.get(o,"styleType");!function(e,t,n,o){var r=o&&e.runtimeConfig.stylesPerPage&&t===p.STYLES.TYPES.CUSTOM;n.type=r?p.STYLES.COMPONENT_STYLE:p.STYLES.TOP_LEVEL_STYLE}(t,l,u,i),u.styleType=l,u.id=n,t.dal.set(s,u),t.setOperationsQueue.executeAfterCurrentOperationDone(K.bind(this,{type:"STYLE",values:n}))}function A(e,t,n){P(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"masterPage",!0)}var T=e.once((function(){var e;return(e=s.log).warnDeprecation.apply(e,arguments)}));var _=["system","custom"];function O(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.MASTER_PAGE_ID,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=D(e,t,n);return C(e,i,i,o,r),i.id}function C(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.MASTER_PAGE_ID,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];r!==p.MASTER_PAGE_ID&&"system"===e.get(n,"styleType")?(r=p.MASTER_PAGE_ID,s.log.warnVerbose("You tried to add a system style with page ".concat(r,". \nPlease update API call to use the master page"))):r=t.runtimeConfig.stylesPerPage?r:p.MASTER_PAGE_ID,w(n.id,n);var a=i?t.dal.full:t.dal,c=t.pointers.data.getThemeItem(n.id,r);a.set(c,n)}function D(n,o,r){if(!e.includes(_,o.styleType))throw new Error("Unable to create a style without a styleType. styleType must be one of ".concat(JSON.stringify(_)));if("system"===o.styleType&&!function(e){return d(e)}(r))throw new Error("Unable to create a system style whose id - ".concat(r,", is not in componentDefinitionMap"));return function(n,o,r){var i=n.runtimeConfig.stylesPerPage&&o.styleType===p.STYLES.TYPES.CUSTOM?p.STYLES.COMPONENT_STYLE:p.STYLES.TOP_LEVEL_STYLE,a=t.createStyleItemByType(i);return e.merge(a,o),a.compId="",a.pageId="",a.id=r||g.getStyleIdToAdd(),a.metaData={isPreset:!1,schemaVersion:"1.0",isHidden:!1},a.style=a.style||{properties:{},propertiesSource:{}},a.type=i,a}(n,o,r)}function w(e,t){if(!e||!t)throw new Error("missing arguments - styleId: ".concat(e,", styleValue: ").concat(t));var n=function(e){if("object"!==o(e))return{success:!1,error:"received style value is not an object"};if(!e.skin)return{success:!1,error:"received style did not contain a skin property"};if(!e.type)return{success:!1,error:"received style did not contain a type property"};return{success:!0}}(t);if(!n.success)throw new Error(n.error)}function M(e){return W(e,"font")}function b(t){function n(e){var t;if(0!==e.indexOf("#")){var n=0===e.indexOf("r")?e:"rgba(".concat(e,")");t=new i(n)}else t=new i(e);return t.hexString()}return e.isArray(t)?e.map(t,n):e.isObject(t)?e.mapValues(t,n):n(t)}function R(e){return b(W(e,"color"))}function N(e,t){var n=Y(e,"color",t);return n&&b(n)}var x=e.once((function(){var e;return(e=s.log).warnDeprecation.apply(e,arguments)}));function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.MASTER_PAGE_ID,o=(arguments.length>3?arguments[3]:void 0)?e.dal.full:e.dal,r=e.pointers.data.getThemeItem(t,n);return o.get(r)}var B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.MASTER_PAGE_ID;return L(e,t,n,!1)},F=function(t){return t.dal.getKeys(t.pointers.page.getAllPagesPointer()).reduce((function(n,o){return e.assign(n,e.defaults({},n,t.dal.get(t.pointers.general.getAllStylesInPage(o))))}),{})},k=e.once((function(){var e;return(e=s.log).warnDeprecation.apply(e,arguments)}));var U=function(t){return e(t.pointers.page.getAllPagesPointer()).thru(t.dal.getKeys).reduce((function(e,n){return e.concat(t.dal.getKeys(t.pointers.general.getAllStylesInPage(n)))}),[])},H=e.once((function(){var e;return(e=s.log).warnDeprecation.apply(e,arguments)}));function V(e,t,n){var o=e.pointers.data.getThemeItem(I,p.MASTER_PAGE_ID);return e.pointers.getInnerPointer(o,[t,n])}function G(t,n,o){var r=W(t,n);!function(t,n,o,r){e.forEach(n,(function(e,i){if(!o[i])throw new Error("Invalid Key ".concat(i));if("color"===r){var a=function(e){if(e){var t=/^(rgb|rgba)\(([0-9,\\.]*)\)$/.exec(e);e=t&&t[2]||e}return e}(e);if(!v.validateColor(a))throw new Error("color value isn't valid ".concat(e," .Please supply or hex/rgb string"));n[i]=a}"font"===r&&function(e,t){var n=v.validateFont(t,R(e));if(n.isValid)return!0;if(n.error)throw n.error}(t,e)}))}(t,o,r,n),e.forEach(o,(function(e,o){var r=z(o),i=V(t,n,r);t.dal.set(i,e)}))}function W(t,n){var o={},r=t.pointers.data.getThemeItem(I,p.MASTER_PAGE_ID),i=t.pointers.getInnerPointer(r,n),a=t.dal.get(i);return e.forEach(a,(function(e,t){o["".concat(n,"_").concat(t)]=e})),o}function Y(t,n,o){var r=z(o);if(!e.isNaN(r)){var i=V(t,n,r);return t.dal.get(i)}return e.template("Non valid <%=type %> value <%=name %>")({type:n,name:o})}function z(e){return parseInt(e.split("_")[1],10)}function K(t){e(S).filter("callback").invokeMap("callback",t).value()}var j="skins.viewer.svgshape.SvgShapeDefaultSkin";function q(t,n){return e.includes(n,"svgshape.")?r[j]:r[n]}var Q={pl:["latin-ext","latin"],ru:["cyrillic","latin"],ja:["japanese","latin"],ko:["korean","latin"]};return{colors:{update:function(e,t){if("object"!==o(t))throw new Error('Value "'.concat(t,'" is not valid.Param should be an object'));G(e,"color",t),e.setOperationsQueue.executeAfterCurrentOperationDone(K.bind(this,{type:"COLOR",values:t}))},get:N,getAll:R,getCustomUsedInSkins:function(t,n){var o,r=F(t),i=function(t,n){var o=t.pointers.page.getAllPagesPointer(),r=t.dal.getKeys(o);return e.reduce(r,(function(o,r){var i=t.pointers.data.getDesignItemsWithPredicate(n,r);return e.forEach(i,(function(e){o.push(t.dal.get(e))})),o}),[])}(t,(function(e){return"BackgroundMedia"===e.type})),a=(o=i,e.reduce(o,(function(t,n){return e(n).pickBy((function(t,o){return n[o]&&"color"===e.get(E.getSchema(y.design,"BackgroundMedia").properties[o],"format")})).forOwn((function(e){t[e]=e})),t}),{})),s=function(t,n){return e.transform(n,(function(n,o){var r=q(t,o.skin);if(o.type!==p.STYLES.FLAT_THEME&&r){var i=o.style&&o.style.properties||{};e(i).pickBy((function(t,n){return r[n]&&e.includes(r[n].type,"COLOR")})).forOwn((function(e){n[e]=e}))}}),{})}(t,r),c=e.merge(a,s),u=e.filter(c,(function(t){return!e.includes(t,"color")}));if(u=b(u),n){var l=R(t);u=e.difference(u,l)}return u},getColorPresets:function(){return a},getCssString:function(e){var t=e.pointers.data.getThemeItem("THEME_DATA",p.MASTER_PAGE_ID),n=e.pointers.getInnerPointer(t,"color"),o=e.dal.get(n);return s.cssUtils.getColorsCssString(o)},render:function(t,n){if(e.includes(n,"color"))return N(t,n);if("#"===n.charAt(0)||e.includes(n,"rgb"))return n;var o=n.split(",");return 3===o.length?"rgb(".concat(n,")"):4===o.length?"rgba(".concat(n,")"):n}},fonts:{update:function(e,t){if("object"!==o(t))throw new Error('Value "'.concat(t,'" is not valid.Param should be an object'));G(e,"font",t),e.setOperationsQueue.executeAfterCurrentOperationDone(K.bind(this,{type:"FONT",values:t}))},get:function(e,t){return Y(e,"font",t)},getAll:M,getMap:function(t){var n=R(t),o=M(t);return e.transform(o,(function(e,t,r){return e[r]=f.fontUtils.parseStyleFont(r,o,n),e}),{})},getCharacterSet:function(t){var n=t.pointers.data.getDataItemFromMaster("masterPage"),o=t.dal.get(n).characterSets;return o?e.includes(o,"latin")||o.push("latin"):o=["latin"],o},getLanguageCharacterSet:function(e,t){if(t)return Q[t]},getCharacterSetByGeo:function(t){var n=[],o=u.getGeo(t);return o&&c.countryCodes.countries[o]&&(n=e.clone(c.countryCodes.countries[o].characterSets)),n.length>0&&!e.includes(n,"latin")?n.push("latin"):n=["latin"],n},updateCharacterSet:function(t,n){if(e.isArray(n)){var o=t.pointers.data.getDataItemFromMaster("masterPage"),r={characterSets:n};t.dal.merge(o,r)}},getThemeStyles:function(e){var t=e.pointers.data.getThemeItem("THEME_DATA",p.MASTER_PAGE_ID),n=e.pointers.getInnerPointer(t,"color"),o=e.pointers.getInnerPointer(t,"font"),r=e.dal.get(n),i=e.dal.get(o);return f.fontUtils.getThemeFontsCss(i,r)}},styles:{updateAndWarn:function(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"masterPage";w(n,o);var i=B(t,n,r);"custom"===e.get(i,"styleType")&&T("You tried to update a custom style with id ".concat(n,". \nPlease use components.style.update(compPointer, style) instead. theme.style.update should only be used for theme styles"));var a=t.pointers.data.getThemeItem(n,r);if(t.dal.isExist(a)){var c=t.pointers.data.getPageIdOfData(a);c!==r&&s.log.warnVerbose("You tried to update a style with id ".concat(n," and page ").concat(r,", but the style belongs to page ").concat(c,". Please update API call to use the correct page"))}else T("You are trying to update style with id ".concat(n," and page ").concat(r,", but the style does not exist. Previously, a style would be created with this id - but this is no longer supported and will be deprecated soon."));return A(t,n,o,r)},update:A,updateWithoutChangingType:function(e,t,n){P(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"masterPage",!1)},createAndAddStyleItem:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.MASTER_PAGE_ID;return O(e,t,n,o,!1)},addStyleItem:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.MASTER_PAGE_ID;return C(e,t,n,o,!1)},createStyleItemToAdd:D,getAndWarn:function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.MASTER_PAGE_ID,r=B(t,n,o);return"custom"===e.get(r,"styleType")&&x("You tried to get a custom style with id ".concat(n," and page ").concat(o,". \nPlease use components.style.get(compPointer) instead. theme.style.get should only be used for theme styles")),r},get:B,getAll:function(e,t){return t?function(e,t){return e.dal.get(e.pointers.general.getAllStylesInPage(t))}(e,t):(k("You tried to get all styles without providing pageId, which causes styles from all pages to be returned. Please use theme.styles.getAllFromAllPages instead"),F(e))},getAllFromAllPages:F,getAllIds:function(e,t){return t?function(e,t){return e.dal.getKeys(e.pointers.general.getAllStylesInPage(t))}(e,t):(H("You tried to get all styles Ids without providing pageId, which causes styles Ids from all pages to be returned. Please use theme.styles.getAllIdsFromAllPages instead"),U(e))},getAllIdsFromAllPages:U,fork:function(e,t,n){return h(e,t,n,!1)},remove:function(e,t,n){e.dal.remove(e.pointers.data.getThemeItem(t,n))},internal:{addStyleItem:C,createAndAddStyleItem:O,get:L,fork:h}},skins:{getComponentSkins:function(e,t){return l.services.getComponentSkins(t)},getSkinDefinition:function(t,n){return e.clone(q(0,n))}},getSchema:function(){return e.cloneDeep(E.getSchema(y.data,"FlatTheme").properties)},events:{onChange:{addListener:function(e,t){if("function"!=typeof t)throw new Error('Value "'.concat(t,'" is not valid.Param should be function'));var n=S.length;return S.push({listenerId:n,callback:t}),n},removeListener:function(t,n){if(e.isNil(n))throw new Error("missing argument - listenerId: ".concat(n));var o=e.findIndex(S,{listenerId:n});if(-1===o)throw new Error('Value "'.concat(n,'" is not valid.No listener with this id exist'));S.splice(o,1)},executeListeners:K}},FONT_POSSIBLE_VALUES:v.FONT_POSSIBLE_VALUES}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(12),o=n(84),r=n(63),i=n(69),a=n(8),s=n(25),c=n(116),u=n(29),l=n(44),p=n(168),d=(n(2),n(3)),g=n(411),f=n(173),m=n(6),v=n(91),E=n(117),y=n(87),I=n(174),S=n(86),h=n(37),P=n(38),A=n(17),T=["x","y","width","height","rotationInDegrees","scale","fixedPosition","aspectRatio"],_=["bounding","anchors"],O="ANY",C={x:O,y:O,width:O,height:O,anchors:O,bounding:O,rotationInDegrees:0,scale:1,fixedPosition:!1},D={"wysiwyg.viewer.components.StripColumnsContainer":!0,"wysiwyg.viewer.components.Column":!0};function w(t,n,o){var r=t.pointers.components.getParent(n);if(!t.pointers.components.isPage(r)){var i=s.getPage(t,n);i=s.getContainerToAddComponentTo(t,i);var a=o?function(t,n,o){var r=p.getCompLayoutRelativeToStructure(t,n),i=p.getCompLayoutRelativeToStructure(t,o),a=e.pick(r,["x","y"]);return a.y-=i.y,a}(t,n,i):null;ne(t,n,i),o&&V(t,n,a)}}function M(n,o,r){var i=n.pointers.getInnerPointer(o,"layout");r=r||n.dal.get(i);var a=l.getPositionAndSize(n,o,e.omit(r,"aspectRatio")),s=t.layout.calcAspectRatio(a.width,a.height),c=n.pointers.getInnerPointer(i,"aspectRatio");n.dal.set(c,s)}function b(e,n){var o=e.pointers.getInnerPointer(n,"layout"),r=e.dal.get(o);return t.layout.isAspectRatioOn(r)}var R=function(e){return e.dal.get(e.pointers.getInnerPointer(function(e){return e.pointers.data.getDataItemFromMaster("masterPage")}(e),"layoutSettings"))},N=function(t,n){var r=t.pointers.components.getParent(n);(function(e,t){return e.pointers.isSamePointer(t,e.pointers.components.getMasterPage(t.type))})(t,r)&&function(t){return e.get(R(t),"soapCompsAroundPagesContainer",!1)}(t)&&o.fixIndexForMasterPageChild(t,n)};function x(e){var t=e?G:V;return function(e,n,o){t(e,n,o,!0)}}var L=function(e){return e.dal.get(e.pointers.general.getRenderFlag("enforceShouldKeepChildrenInPlace"))},B=function(e){return e.dal.get(e.pointers.general.getRenderFlag("preserveCompLayoutOnReparent"))};function F(t,n,o,r,i){var c=t.pointers.getInnerPointer(n,"layout"),u=t.dal.get(c),p=s.getType(t,n),d=x(r);m.executeHook(m.HOOKS.LAYOUT.UPDATE_BEFORE,p,[t,n,o,d,i,u]);var g=I.getValidLayoutToUpdate(t,n,o);if(f.constrainByDimensionsLimits(t,n,g),f.constrainByDockingLimits(g),a.public.isContainer(t,n)&&a.public.isEnforcingContainerChildLimitations(t,n)){var v=a.public.isEnforcingContainerChildLimitationsByWidth(t,n),E=a.public.isEnforcingContainerChildLimitationsByHeight(t,n);f.constrainByChildrenLayout(t,n,g,!v,!E)}f.constrainBySpecificType(t,n,g),f.constrainsByContainer(t,n,g,u);var y=l.getPositionAndSize(t,n);if(t.dal.set(c,g),e.has(g,"aspectRatio")&&M(t,n,g),a.getShouldKeepChildrenInPlace(t,n)&&L(t)){var S=l.getPositionAndSize(t,n),h=function(e,t){return t.width!==e.width&&t.x!==e.x}(y,g),P=function(e,t){return t.height!==e.height&&t.y!==e.y}(y,g);(h||P)&&function(t,n,o,r){var i=t.pointers.components.getChildren(n),a=(r.x||0)-(o.x||0),s=(r.y||0)-(o.y||0);e.forEach(i,(function(e){var n=t.pointers.getInnerPointer(e,"layout"),o=t.dal.get(n);l.isHorizontallyDocked(o)||(o.x-=a),l.isVerticallyDocked(o)||(o.y-=s),t.dal.merge(n,o)}))}(t,n,y,S)}m.executeHook(m.HOOKS.LAYOUT.UPDATE_AFTER,p,[t,n,g,d,i,u])}function k(t,n,o){if(oe(t,n)){var r=y.applyPositionAndSizeOnCurrentLayoutSchema(t,n,o);return e.assign(r,o)}return o}function U(e,n){if(e.siteAPI.getLayoutMechanism()===t.constants.LAYOUT_MECHANISMS.MESH&&e.dal.set(e.pointers.layoutAdjustment.getLayoutAdjustmentPointer(),{id:null}),v.isGroupedComponent(e,n)){var o=s.getContainer(e,n);i.updateAnchors(e,n,o)}else i.updateAnchors(e,n)}function H(t,n,o,r,i){var a,s=(a=o,e.omit(a,_));e.isEmpty(s)||(!function(t){var n=e.omit(t,T);if(!e.isEmpty(n))throw new Error("updateCompLayout: new layout properties are not supported")}(s),F(t,n,k(t,n,s),r,i))}function V(e,t,n,o){H(e,t,n,!1,o),U(e,t)}function G(e,n,o,r){e.dal.set(e.pointers.layoutAdjustment.getLayoutAdjustmentPointer(),n),H(e,n,o,!0,r),e.siteAPI.getLayoutMechanism()===t.constants.LAYOUT_MECHANISMS.ANCHORS&&e.setOperationsQueue.executeAfterCurrentOperationDone((function(){i.updateAnchorsForCompChildren(e,n)}))}function W(e,n){var o=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(n.id),r=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(e.id);return!o&&r}function Y(e,n){var o=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(n.id),r=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(e.id);return o&&!r}function z(e){return!t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(e.id)}function K(e,n,o){var r=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(o.id),i=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(n.id);if(r&&i){var a=s.getAncestorByPredicate(e,n,z),c=s.getAncestorByPredicate(e,o,z);return!e.pointers.isSamePointer(a,c)}return!1}function j(e,t,n){var o=e.pointers.components.getParent(t);return e.pointers.components.isPage(o)&&e.pointers.components.isMasterPage(n)||e.pointers.components.isPage(n)&&e.pointers.components.isMasterPage(o)}function q(t,n,o){var r=u.getComponentModes(t,n);if(!r||0===r.length){var i=function(t,n){var o=P.getComponentBehaviors(t,n),r=["modeChange","modeIn","modeOut"];return e.filter(o,(function(t){return e.includes(r,t.action)}))}(t,o);e.forEach(i,(function(e){P.removeComponentSingleBehavior(t,o,e.name,e.action)}))}var a=t.pointers.full.components.getPageOfComponent(o),s=t.pointers.full.components.getPageOfComponent(n);e.isEqual(a,s)||function(t,n){var o=[n];for(;!e.isEmpty(o);){var r=o.pop();Q(t,r);var i=t.pointers.full.components.getChildren(r);o=o.concat(i)}}(t,o)}function Q(t,n){var o=u.getComponentModes(t,n);e.forEach(o,(function(e){t.siteAPI.deactivateMode(n,e.modeId)}))}function X(e,t){return Boolean(c.getShowOnSomePagesRoot(e,t))}var Z=function(e,t,n){return e.dal.isExist(t)&&e.dal.isExist(n)?a.public.isContainable(e,t,n)?function(e,t){return a.public.allowedToContainMoreChildren(e,t)}(e,n)?"":"maximum number of child components reached":"component isn't containable in container: ".concat(n.id):"invalid component ref or new parent container ref"};function J(e,t,n){if(!(B(e)||p.isFixedPosition(e,t)&&j(e,t,n))){var o=re(e,t);o||ae(e,t);var r=e.pointers.getInnerPointer(t,"layout"),i=p.getCompLayoutRelativeToScreenConsideringScroll(e,t,!0),a=p.getCompLayoutRelativeToScreenConsideringScroll(e,n,!0),s={x:i.x-a.x,y:i.y-a.y};o&&delete s.x,e.dal.merge(r,s)}}function $(t,n){var o=t.pointers.components.getAllDisplayedOnlyComponents(n);e.forEach(o,(function(e){d.deleteDataItem(t,e),d.deleteDesignItem(t,e)}))}function ee(n,o,r,i,a){var s=[o].concat(a);e.forEach(s,(function(o){!function(n,o,r,i){var a=n.dal.get(o),s=a.dataQuery&&t.displayedOnlyStructureUtil.getRepeaterTemplateId(a.dataQuery.replace("#","")),c=a.designQuery&&t.displayedOnlyStructureUtil.getRepeaterTemplateId(a.designQuery.replace("#","")),u=n.pointers.components.getAllDisplayedOnlyComponents(r),l=s&&d.getDataItemById(n,s,i,!0),p=c&&d.getDesignItemById(n,c,i,!0);(l||p)&&e.forEach(u,(function(e){var o=t.displayedOnlyStructureUtil.getRepeaterItemId(e.id);if(l){var r=t.displayedOnlyStructureUtil.getUniqueDisplayedId(s.replace("#",""),o);d.addSerializedDataItemToPage(n,i,l,r)}if(p){var a=t.displayedOnlyStructureUtil.getUniqueDisplayedId(c.replace("#",""),o);d.addSerializedDesignItemToPage(n,i,p,a)}}))}(n,o,r,i)}))}function te(e,n,o,r){if(o.dataQuery){var i=d.getDataItem(e,n,!0),a=t.displayedOnlyStructureUtil.getRepeaterTemplateId(o.dataQuery).replace("#",""),s=e.pointers.data.getDataItem(a,r.id);d.removeDataItemRecursively(e,s),d.addSerializedDataItemToPage(e,r.id,i,a)}if(o.designQuery){var c=d.getDesignItem(e,n,!0),u=t.displayedOnlyStructureUtil.getRepeaterTemplateId(o.designQuery).replace("#",""),l=e.pointers.data.getDesignItem(u,r.id);d.removeDesignItemRecursively(e,l),d.addSerializedDesignItemToPage(e,r.id,c,u)}}function ne(n,i,a,s,c){var u=c||i,p=n.pointers.components.getPageOfComponent(i),g=n.pointers.components.getPageOfComponent(a);p.id!==g.id&&function n(o,r,i,a){var s=t.constants.DATA_TYPES;var c=o.runtimeConfig.stylesPerPage?t.constants.COMP_DATA_QUERY_KEYS_WITH_STYLE:t.constants.COMP_DATA_QUERY_KEYS;function u(n,r){var s=c[r],u=o.pointers.getInnerPointer(n,s);if(s&&o.dal.full.isExist(u)){var p=(t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(u.id)?o.dal.get:o.dal.full.get)(u).replace("#",""),g=o.pointers.data.getItem(r,p,a.id);g.useOriginalLanguage=!0,function t(n,o,r,i){var a=o&&n.dal.full.get(o);if(a&&l.canMoveDataItemToAnotherPage(a,i)){var s=n.pointers.data.getPageIdOfData(o);d.executeForDataItemRefs(i,a,(function(o){if(e.isString(o)){var a=n.pointers.data.getItem(i,o.replace("#",""),s);t(n,a,r,i)}})),n.dal.full.remove(o);var c=n.pointers.data.getItem(i,o.id,r);n.dal.full.set(c,a)}}(o,g,i.id,r)}}e.forEach(s,(function(e){u(r,e)}));var p=o.pointers.page.getPageTranslations(a.id,o.siteAPI.isExperimentOpen.bind(o.siteAPI));var g=o.dal.full.get(p);var f=o.pointers.getInnerPointer(r,"dataQuery");if(o.dal.full.isExist(f)){var m=o.dal.full.get(f).replace("#","");e.forEach(g,(function(e,t){var n=o.pointers.multilingualTranslations.translationDataItem(a.id,t,m);if(o.dal.full.isExist(n)){var r=o.dal.full.get(n),s=o.pointers.multilingualTranslations.translationDataItem(i.id,t,m);o.dal.fullJsonDal.set(s,r),o.dal.fullJsonDal.remove(n)}})),o.siteDataAPI.createDisplayedPages()}!function(){var t=o.pointers.componentStructure.getModesOverrides(r);if(t&&o.dal.full.isExist(t)){var n=o.dal.full.get(t);e.forEach(n,(function(e,n){var r=o.pointers.getInnerPointer(t,n);u(r,s.design),u(r,s.prop)}))}}();var v=o.pointers.full.components.getChildren(r);var E=o.pointers.components.getChildren(r);var y=e.unionBy(v,E,(function(e){return e.id}));e.forEach(y,(function(e){n(o,e,i,a)}))}(n,i,g,p);var f=n.pointers.components.getChildrenRecursively(i),m=n.dal.full.get(i),v=n.dal.get(i),E=W(i,a),y=Y(i,a),I=K(n,i,a);I?(te(n,i,v,g),$(n,i),ee(n,i,a,g.id,f)):E?(te(n,i,v,g),$(n,i)):y&&ee(n,i,a,g.id,f);var S=o.getNewIndex(n,i,a,s);n.dal.full.remove(i),(E||y||I)&&A.removeComponentByDesktopComp(n,i,!0);var h=n.pointers.full.components.getChildrenContainer(a),P=n.pointers.getOriginalPointerFromInner(h),T=t.displayedOnlyStructureUtil.getRepeaterTemplateId(u.id);v=t.displayedOnlyStructureUtil.getOriginalStructure(v);var _=r.adjustModesToNewContainer(n.pointers,n.dal.fullJsonDal,n.dal.displayedJsonDal,P,e.assign(m,e.omit(v,["components","modes","parent","id","componentType","skin"]),{id:T}));n.dal.full.push(h,_,u,S)}function oe(e,t){return!!ie(e,t)}function re(e,n){return t.dockUtils.isHorizontalDockToScreen(e.dal.get(e.pointers.getInnerPointer(n,["layout"])))}function ie(e,t){var n=e.pointers.getInnerPointer(t,["layout","docked"]);return e.dal.get(n)}function ae(t,n){if(oe(t,n)){var o=y.getPositionAndSize(t,n),r=t.pointers.getInnerPointer(n,"layout"),i=t.dal.get(r);e.assign(i,o),delete i.docked,t.dal.set(r,i)}}function se(e,t,n){var o=e.pointers.getInnerPointer(t,"layout"),r=e.dal.get(o),i=I.getValidLayoutToUpdate(e,t,{docked:n}),a=s.getType(e,t);m.executeHook(m.HOOKS.LAYOUT.UPDATE_BEFORE,a,[e,t,i,V,!1,r]),f.constrainByDockingLimits(i),e.dal.set(o,i),b(e,t)&&M(e,t),m.executeHook(m.HOOKS.LAYOUT.UPDATE_AFTER,a,[e,t,i,V,!1,r]),U(e,t)}return{initialize:function(t){g.initialize(t);var n=S.createInitialGapMap(t);e.some(n,(function(e){return e>0}))&&t.siteAPI.reportBI(h.SITE_GAPS_MAP,{above_header:n.aboveHeader,above_page:n.abovePagesContainer,above_footer:n.aboveFooter})},getDockedStyle:function(e,n){return t.dockUtils.applyDockedStyleWithMargins(n,{width:n.width,height:n.height},e.siteAPI.getPageMargins(),e.siteAPI.getScreenWidth(),e.siteAPI.getSiteWidth(),e.siteAPI.getSiteX())},unDock:function(e,t){ae(e,t),U(e,t)},updateDock:se,setDock:function(e,t,n){ae(e,t),se(e,t,n)},getDock:ie,isHorizontallyStretchedToScreen:re,isHorizontallyStretchedToScreenByStructure:function(e,n){return t.dockUtils.isHorizontalDockToScreen(n.layout)},getPositionAndSize:l.getPositionAndSize,updateCompLayout:V,getProportionStructure:function(t,n,o){var r=function t(n,o){var r,i,a=n.pointers.components.getChildren(o),s=n.pointers.components.getParent(o),c=l.getComponentLayout(n,s),u=l.getComponentLayout(n,o);return{component:o,proportions:(i=c,{x:(r=u).x/i.width,y:r.y/i.height,width:r.width/i.width,height:r.height/i.height}),children:e.map(a,(function(e){return t(n,e)}))}}(t,n);return f.addCompMinLayout(t,r,o),r},updateCompLayoutAndAdjustLayout:G,updateAndPreserveProportions:function t(n,o,r,i){var c=a.public.isIgnoreChildrenOnProportionalResize(n,r.component),u=a.public.enforceMaxDimensionsOnProportionalResize(n,r.component),p=r.children,d=n.dal.get(n.pointers.getInnerPointer(r.component,"layout"));f.constrainProportionalResize(n,r,o,i,u),f.constrainsByContainer(n,r.component,o,d,!0),e.isArray(c)&&(p=l.getChildrenToPreserveProportionsByType(n,a,p,c)),!0===c||e.isEmpty(p)||e.forEach(p,(function(r){var i,a,s,c=(i=o,a=r.proportions,s={x:i.width*a.x,y:i.height*a.y,width:i.width*a.width,height:i.height*a.height},s=e(s).pickBy(e.isFinite).mapValues(Math.round).value());t(n,c,r,!1)})),o=e.pick(o,["x","y","width","height"]),function(e,t,n){var o=e.pointers.getInnerPointer(t,"layout"),r=e.dal.get(o);n=k(e,t,n);var i=s.getType(e,t),a=x(!1);m.executeHook(m.HOOKS.LAYOUT.UPDATE_BEFORE,i,[e,t,n,a,!1,r]);var c=I.getValidLayoutToUpdate(e,t,n);e.dal.set(o,c),m.executeHook(m.HOOKS.LAYOUT.UPDATE_AFTER,i,[e,t,c,V,!1,r])}(n,r.component,o),U(n,r.component)},canSetContainer:function(t,n,o){return e.isEmpty(Z(t,n,o))},setContainer:function(t,n,o,r){!function(t,n,o){var r=Z(t,n,o);if(!e.isEmpty(r))throw new Error(r)}(t,o,r);var a=s.getContainerToAddComponentTo(t,r);J(t,o,a),function(e,t,n){if(p.isFixedPosition(e,t)&&!j(e,t,n)){var o=e.pointers.getInnerPointer(t,"layout.fixedPosition");e.dal.set(o,!1)}}(t,o,a);var c=t.pointers.components.getParent(o),u=s.getType(t,o);return m.executeHook(m.HOOKS.CHANGE_PARENT.BEFORE,u,[t,o,r]),q(t,r,o),ne(t,o,a,void 0,n),m.executeHook(m.HOOKS.CHANGE_PARENT.AFTER,u,[t,o,r]),i.updateAnchors(t,o,c),n},getNewComponentPointerAfterReparent:function(n,o,r){var i=e.clone(o);if(K(n,o,r)){var a=t.displayedOnlyStructureUtil.getRepeaterTemplateId(o.id),s=t.displayedOnlyStructureUtil.getRepeaterItemId(r.id);i.id=t.displayedOnlyStructureUtil.getUniqueDisplayedId(a,s)}else if(W(o,r))i.id=t.displayedOnlyStructureUtil.getRepeaterTemplateId(o.id);else if(Y(o,r)){var c=t.displayedOnlyStructureUtil.getRepeaterItemId(r.id);i.id=t.displayedOnlyStructureUtil.getUniqueDisplayedId(o.id,c)}var u=n.pointers.components.getViewMode(r);return n.pointers.components.getUnattached(i.id,u)},isShowOnAllPages:function(e,t){return e.pointers.components.isInMasterPage(t)&&!X(e,t)},isShowOnSomePages:X,getCompLayoutRelativeToStructure:p.getCompLayoutRelativeToStructure,getCompLayoutRelativeToScreen:p.getCompLayoutRelativeToScreen,getCompLayoutRelativeToScreenConsideringScroll:p.getCompLayoutRelativeToScreenConsideringScroll,addCompToContainer:ne,isFixedPosition:p.isFixedPosition,isAncestorFixedPosition:function(e,t){var n=t;do{if(!(n=e.pointers.components.getParent(n)))return!1}while(!p.isFixedPosition(e,n));return!0},isRenderedInFixedPosition:p.isRenderedInFixedPosition,isAncestorRenderedInFixedPosition:p.isAncestorRenderedInFixedPosition,getClosestAncestorRenderedInFixedPosition:p.getClosestAncestorRenderedInFixedPosition,isShowOnFixedPosition:p.isShowOnFixedPosition,isDocked:oe,isDockedToScreen:function(e,n){return t.layout.isDockToScreen(e.dal.get(e.pointers.getInnerPointer(n,["layout"])))},isRotated:function(e,t){var n=e.pointers.getInnerPointer(t,["layout","rotationInDegrees"]);return 0!==e.dal.get(n)},getDeprecatedMinDimensions:function(){return{width:0,height:0}},getSiteHeight:function(e){var n=e.siteAPI.getSiteMeasureMap();if(n){var o=e.siteAPI.getCurrentPopupId();if(o)return n.height[o];var r=e.pointers.general.getRenderFlag("extraSiteHeight");return n.height[t.siteConstants.MASTER_PAGE_ID]+(e.dal.get(r)||0)}return 0},getSiteWidth:function(e){return e.siteAPI.getSiteWidth()},setScroll:E.setScroll,isScrollingEnabled:function(e){return!e.siteAPI.isSiteScrollingBlocked()},getScroll:E.getScroll,setScrollAndScale:function(e,t,n,o,r,i){var a=e.pointers.general.getRenderFlag("siteScale");e.dal.set(a,o),E.setScrollAndScale(e,t,n,o,r,i)},animateScroll:E.animateScroll,updateFixedPosition:function(t,n,o){var r=t.pointers.getInnerPointer(n,"layout"),i=t.dal.get(r);o!==i.fixedPosition&&(!function(t,n,o,r){var i={fixedPosition:o};if(o){var a=p.getCompLayoutRelativeToScreen(t,n);e.assign(i,e.pick(a,["x","y"])),i.y-=E.getScroll(t).y}else{var s=t.pointers.components.getParent(n),c=p.getCompLayoutRelativeToScreen(t,s,!0);e.assign(i,{y:r.y-c.y+E.getScroll(t).y,x:r.x-c.x})}V(t,n,i)}(t,n,o,i),o?w(t,n):N(t,n))},reparentComponentToPage:w,getEffectiveTextDimensions:function(e,t){var n=e.pointers.general.getTextRuntimeOverallBorders(),o=e.pointers.getInnerPointer(n,t.id);if(o)return e.dal.get(o)},updateAspectRatio:M,removeAspectRatio:function(t,n){var o=t.pointers.getInnerPointer(n,"layout"),r=t.dal.get(o);e.isUndefined(r.aspectRatio)||(delete r.aspectRatio,t.dal.set(o,r))},getSiteX:p.getSiteX,isAspectRatioOn:b,shouldUpdateSingleComp:function(e,t){var n=a.getComponentType(e,t);return!D[n]},adjustCompLayoutToNewContainer:J,isHorizontallyStretched:function(e,n){return t.dockUtils.isHorizontallyStretched(e.dal.get(e.pointers.getInnerPointer(n,["layout"])))},isVerticallyStretched:function(e,n){return t.dockUtils.isVerticallyStretched(e.dal.get(e.pointers.getInnerPointer(n,["layout"])))},isSimpleLayout:function(t){if(!t)return!0;var n=!0;return e.forOwn(t,(function(t,o){var r=C[o];if(e.isUndefined(r)||r!==O&&t!=r)return n=!1,!1})),n},isSiteLayoutMesh:function(e){return R(e).mechanism===t.constants.LAYOUT_MECHANISMS.MESH},migrateToMeshLayout:function(n){var o=n.pointers.getInnerPointer(n.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),r=n.dal.get(o);n.dal.set(o,e.assign({},r,{mechanism:t.constants.LAYOUT_MECHANISMS.MESH}))}}}()},function(e,t){e.exports=o},function(e,t,n){var o,r,i,a,s,c,u,l,p,d;e.exports=(o=n(42),r=n(154),i=n(254),a=n(255),s=n(256),c=n(30),u=n(257),l=n(258),p=n(259),d=n(83),{PROPERTY_NAMES:o.PROPERTY_NAMES,getProperty:o.getProperty,setProperty:o.setProperty,getRevertibleMetaDataInfo:o.getRevertibleMetaDataInfo,getNonRevertibleMetaDataInfo:o.getNonRevertibleMetaDataInfo,seo:r,social:i,favicon:a,premiumFeatures:s,generalInfo:c,siteName:u,statistics:l,compatibility:p,language:d})},function(e,t,n){var o;e.exports=(o=n(2),{getViewMode:function(e){return e.siteAPI.isMobileView()?o.VIEW_MODES.MOBILE:o.VIEW_MODES.DESKTOP},isMobileView:function(e){return e.siteAPI.isMobileView()}})},function(e,t,n){var o,r,i,a,s,c;e.exports=(i=n(0),a=n(1),s=n(5),c={masterPage:"wysiwyg.viewer.components.WSiteStructure"},{YES:"yes",NO:"no",DONT_CARE:"don't care",stripHashIfExists:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?e:null;return i.isString(e)?e.replace("#",""):t},getComponentType:function(e,t){if(t){var n=c[t.id];if(n)return n;if(t===o)return r;var i=e.pointers.getInnerPointer(t,"componentType"),a=e.dal.full.get(i)||e.dal.get(i);if(a||e.dal.full.isExist(t))return o=t,r=a,a}throw new Error("non existing component pointer: ".concat(function(e){if(!e)return"(null)";var t="type: ".concat(e.type," id: ").concat(e.id);return"innerPath"in e&&(t+=" inner: ".concat(e.innerPath)),t}(t)))},replaceRuntimeRefWithOriginal:function(e,t){if(!e||!t||!s.isOpen("sv_livePreview"))return t;var n=a.displayedOnlyStructureUtil.getRepeaterItemId(t.id);if(n&&function(e,t){var n=e.siteAPI.getRuntimeDal().getAllCompsRuntimeData();return i(n).values().map((function(e){return i.get(e,["items"])})).flatten().compact().includes(t)}(e,n)){var o=e.pointers.full.components.getPageOfComponent(t)||e.pointers.components.getPageOfComponent(t);if(o)return e.pointers.full.components.getComponent(a.displayedOnlyStructureUtil.getRepeaterTemplateId(t.id),o)}return t}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E;e.exports=(o=n(0),r=n(13),i=n(35),a=n(34),s=n(7),c=n(4),u=!1,l=function(e,t,n){return(i.getAppData(e,t).widgets||{})[n]||null},p=function(e){var t=e.published,n=e.santaEditorPublished;return t||n},d=function(e,t){var n=t&&t.widgets;return n=o.filter(n,(function(e){return o.isNil(e.appPage)})),u||(n=o.filter(n,p)),n},g=function(e,t){var n=t&&t.widgets;return n=o.filter(n,(function(e){return!o.isNil(e.appPage)})),u||(n=o.filter(n,p)),n},f=function(e){return!o.isUndefined(e)&&!o.isUndefined(e.appType)&&"Hybrid"===e.appType},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.appType;return"Hybrid"===t||"Editor"===t},v=function(e){return e.permissions&&o.isBoolean(e.permissions.revoked)&&e.permissions.revoked},E=function(e,t){var n=g(0,t);return o.find(n,(function(e){return!e.appPage.hidden}))},{registerAppData:i.registerAppData,getAppData:i.getAppData,getAppDataByAppDefinitionId:i.getAppDataByAppDefinitionId,getAppsData:i.getAppsData,filterApps:function(e){return o.pickBy(e,(function(e){return a.isTpaByAppType(e.type)&&(o.isUndefined(e.appType)||m(e))}))},getLargestApplicationId:function(e){var t=i.getAppsData(e);return o(t).keys().map((function(e){return parseInt(e,10)})).compact().concat(0).max()},getWidgetData:l,getExtensionsWidgets:d,isHybridAppAndEditorPartNotDismissed:function(e){return f(e)&&(o.isUndefined(e.editorPartDismissed)||!1===e.editorPartDismissed)},isHybridApp:function(e,t){var n=t&&i.getAppData(e,t);return f(n)},isHybridAppFromAppData:f,isDashboardAppOnly:function(e){return!o.isUndefined(e)&&!o.isUndefined(e.appType)&&"Dashboard"===e.appType},isEditorOrHybridApp:m,setAppsData:function(e,t){r.setProperty(e,r.PROPERTY_NAMES.CLIENT_SPEC_MAP,t)},isAppPermissionsIsRevoked:v,isAppActive:function(e){return!o.isUndefined(e)&&!v(e)&&"REMOVE"!==e.pendingAction},isAppAutoRevoked:function(e){return!o.has(e,"appFields.platform.studio")},isPremiumApp:function(e,t){var n=i.getAppData(e,t);return!!n&&!!n.vendorProductId},hasPremiumOffering:function(e,t){var n=i.getAppData(e,t);return!!n&&o.size(n.vendorProducts)>0},hasHiddenPages:function(e,t){var n=i.getAppData(e,t),r=g(0,n),a=o.filter(r,"appPage.hidden");return o.size(a)>0},getAppSections:g,getAppSectionsToInstall:function(e,t){var n=i.getAppData(e,t),r=g(0,n);return r=o.filter(r,{autoAddToSite:!0}),o.sortBy(r,"appPage.order")},widgetsToAutoAddToSite:function(e,t){var n=d(0,t);return o.filter(n,"autoAddToSite")},getWidgetDataFromTPAPageId:function(e,t,n){var r=g(0,i.getAppDataByAppDefinitionId(e,t));return o.find(r,{appPage:{id:n}})},getWidgetDataFromTPAWidgetId:function(e,t,n){var r=d(0,i.getAppDataByAppDefinitionId(e,t));return o.find(r,{tpaWidgetId:n})},setIsInDevMode:function(e){u=e},isWidgetHasMobileUrl:function(e,t,n){if(!t||!n)return!1;var r=l(e,t,n);if(r&&r.mobileUrl){var i=r.mobileUrl,a=r.mobilePublished&&o.isBoolean(r.mobilePublished)&&r.mobilePublished;return!o.isEmpty(i)&&(u||a)}return!1},isAppPermissionsIsGranted:function(e){return e.permissions&&o.isBoolean(e.permissions.revoked)&&!e.permissions.revoked},hasSections:function(e,t){var n=g(0,t);return!o.isEmpty(n)},isAppProvisionedOnServer:function(e,t){return!i.getAppData(e,t).notProvisioned},hasMainSection:function(e,t){var n=g(0,t);return o.some(n,(function(e){return!e.appPage.hidden}))},getMainSectionWidgetData:E,getMainSectionWidgetDataFromApplicationId:function(e,t){return E(0,i.getAppData(e,t))},getSectionsWidgetIdsToPreFetch:function(e){return o(e.widgets).filter("preFetch").filter("appPage").filter(p).map("widgetId").value()},isDemoAppAfterProvision:function(e){var t=o.get(e,"instance");if(!o.isEmpty(t)){var n=e.instance.split("."),r=JSON.parse(atob(n[1]));return!o.isEmpty(r.originInstanceId)}},isSuperAppByCompId:function(e,t){var n=s.getComponentById(e,t),r=c.data.get(e,n),a=o.get(r,"applicationId");return i.getAppData(e,a).isWixTPA},getDependentApps:function(){return[]},hasEditorPlatformPart:function(e){return!!o.get(e,"appFields.platform.editorScriptUrl")},isPageMarkedAsAutoAddToSite:function(e,t){var n=i.getAppData(e,o.get(t,"tpaApplicationId")),r=g(0,n),a=o.find(r,{appPage:{id:o.get(t,"tpaPageId")}});return o.get(a,"autoAddToSite")},isPageMarkedAsShouldDeleteAppWhenDeleted:function(e,t){var n=i.getAppData(e,o.get(t,"tpaApplicationId")),r=g(0,n),a=o.find(r,{appPage:{id:o.get(t,"tpaPageId")}});return o.get(a,"componentFields.shouldDeleteAppWhenDeleted")},computeHidePage:function(e,t,n){var r=o.defaultTo(t,o.get(e,"componentFields.hiddenInPagesPanel"));return r=o.defaultTo(r,n)},isMultiSectionInstanceEnabled:function(e,t){if(!t)return!1;var n=o.get(e,["widgets",t]);return o.get(n,"appPage.multiInstanceEnabled")}})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(2),i=n(5),a=n(1),{isMobileSupported:s=function(e){return!e||e.runtimeConfig.supportMobile},syncMobileAndDesktopStyleId:function(e,t,n,o){if(s(e)){var i=o?e.dal.full:e.dal,a=o?e.pointers.full:e.pointers,c=t.type===r.VIEW_MODES.DESKTOP?a.components.getMobilePointer(t):a.components.getDesktopPointer(t);if(i.isExist(c)){var u=e.pointers.getInnerPointer(c,"styleId");i.set(u,n)}}},syncMobileAndDesktopSkin:function(e,t,n){if(s(e)){var o=e.pointers.components.getMobilePointer(t),r=e.pointers.getInnerPointer(o,"skin");e.dal.get(r)&&e.dal.set(r,n)}},deleteForkedData:function(e,t,n,r){if(s(e)){var i=e.pointers.components.getMobilePointer(t);if(e.dal.isExist(i)){var a=!o.isEqual(n.getDesignItemPointer(e,t),n.getDesignItemPointer(e,i)),c=r.isMobileComponentPropertiesSplit(e,i);a&&n.deleteDesignItem(e,i),c&&n.deletePropertiesItem(e,i)}}},serializeMobileStructure:function(e,t,n,r,a,c,u,l,p,d){var g=d.componentStructureInfo,f=d.mobileConversionFacade;if(s(e)){var m=e.pointers.components.getMobilePointer(t);if(i.isOpen("presetUploaderAddOn"))g.isExist(e,m)&&(n.mobileStructure=p(e,m,null,null,c,{ignoreChildren:!0,maintainIdentifiers:!1}));else if(!e.pointers.components.isPage(t)){var v=a[t.id];if(v&&!v.isCustomPreset)return l(e,v,void 0,u,r,c),void(n.mobileStructure={layout:o.cloneDeep(v.layout),props:o.cloneDeep(v.props)});u.shouldAddMobilePresets&&f.createMobilePreset(e,r,t,n)}}},linkMobileComponentToDesktopDesignItem:function(e,t,n){if(s(e)&&t.type!==a.constants.VIEW_MODES.MOBILE){var r,i,c,u,l,p=(i=e.pointers.componentStructure.getModesOverrides(t),c=e.dal.full.isExist(i)&&e.dal.full.get(i),u=o.map(c,"designQuery"),l=e.pointers.getInnerPointer(t,"designQuery"),r=a.displayedOnlyStructureUtil.isDisplayedOnlyComponent(t.id)?e.dal.get(l):e.dal.full.get(l),u.concat(r)),d=e.pointers.components.getMobilePointer(t);if(e.dal.isExist(d)){var g=e.pointers.getInnerPointer(d,"designQuery"),f=e.dal.get(g);o.includes(p,f)||e.dal.set(g,"#".concat(n))}}},removeComponentByDesktopComp:function(e,t,n){if(s(e)){var o=n?e.pointers.full:e.pointers,r=n?e.dal.full:e.dal,i=o.components.getMobilePointer(t);r.isExist(i)&&r.remove(i)}},syncDockData:function(e,t,n,o){s(e)&&o.setDock(e,e.pointers.components.getMobilePointer(t),n)},prepareComponentStructureForMobileAlgorithm:function(e,t,n){if(s(e)){var o=t.getCompMobileMode(e,n);t.activateComponentMode(e,n,o.modeId);var r=e.pointers.components.getMobilePointer(n);if(e.dal.isExist(r)){var i=e.dal.get(e.pointers.getInnerPointer(n,"designQuery"));e.dal.set(e.pointers.getInnerPointer(r,"designQuery"),i)}}},setMobileHiddenComponentListIfNeeded:function(e,t,n,r,i,a){if(s(e)&&i.mobileComponents){var c=a.hiddenComponents.get(e,t),u=o(r).pick(c).values().value();a.hiddenComponents.set(e,n,u)}},serializeMobileChildren:function(e,t,n,i,a,c,u,l){if(s(e)&&t.mobileComponents){var p=e.pointers.components.getPage(n,r.VIEW_MODES.MOBILE),d=e.pointers.full.components.getChildren(p);t.mobileComponents=o.map(d,(function(t){return l(e,t,null,a,c,i,u)}))}},getChildComponent:function(e,t){return s(e)&&t.mobileComponents&&!o.isEmpty(t.mobileComponents)?t.mobileComponents:[]},resetMobileComponentsForClonedComp:function(e,t,n){s(e)&&t.mobileComponents&&(n.mobileComponents=[])},setMobileViewMode:function(e,t){s(e)&&t.executeHook(t.HOOKS.SWITCH_VIEW_MODE.MOBILE)},setMobileComponentChildrenDefinition:function(e,t,n,o,r,i,a){if(s(e)){var c=t.mobileComponents;if(c){var u=e.pointers.components.getPage(n,"MOBILE");a(e,c,u,o,r,i)}}},getViewMode:function(e,t,n){return s(e)?t||n.getViewMode(e):r.VIEW_MODES.DESKTOP},getSupportedViewModes:function(e){return s(e)?[r.VIEW_MODES.DESKTOP,r.VIEW_MODES.MOBILE]:[r.VIEW_MODES.DESKTOP]},wPhoto:{removeMobileCropOverrideIfNeeded:function(e,t,n,r){var i=r.dataModel,a=r.component;if(s(e)){var c=e.pointers.components.getMobilePointer(t);if(n&&a.isExist(e,c)){var u=i.getPropertiesItem(e,c);i.setPropertiesItem(e,c,o.assign(u,{overrideCrop:null}))}}}},page:{initMobileComponents:function(e,t){if(s(e)){var n=e.pointers.getInnerPointer(t,"mobileComponents");e.dal.full.isExist(n)||e.dal.full.set(n,[])}}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=(n(51),n(12)),r=n(6),i=n(122),a=n(38),s=n(2),c=n(4),u=n(7),l=n(20),p=(n(3),n(82)),d=n(27),g=n(21),f=n(180),m=n(28),v=n(14),E=n(123),y=n(94),I=n(39),S=n(454),h=n(125),P=n(16),A=n(5),T=n(61),_=n(17),O="wysiwyg.viewer.components.PopupContainer";function C(t,n,o,r,i){var a=u.getComponentByType(t,"wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",n),s=n.id;e.forEach(a,(function(n){!function(t,n,o,r){var i,a=e.findKey(r,(function(e){return e===o})),s=c.data.get(t,n);i=a?function(t,n){return e.compact(e.map(t,(function(e){return n[e]})).concat(e.includes(t,"PAGE_TOP_ANCHOR")?"PAGE_TOP_ANCHOR":null))}(s.hiddenAnchorIds[a],r):[];s.hiddenAnchorIds[o]=i,c.data.update(t,n,s)}(t,n,s,i)}))}function D(t){if(!e.isString(t))throw Error("pageId to remove should be a string ".concat(t));return t.replace("#","")}function w(n,o,i,a){var u,p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],d=o.id,f=h.getBlankPageStructure(n,d);!function(e,t){var n=e.pointers.components.getPage(e.siteAPI.getPrimaryPageId(),s.VIEW_MODES.DESKTOP),o=l.style.get(e,n),r=l.skin.get(e,n);t.style=o,t.skin=r}(n,f),a&&(u=e.cloneDeep(a),e.defaultsDeep(u,f)),(u=u||f).data.title=i||u.data.title;var m=u.data;m.id=d,g.addPageData(n,d,m,p);var v,I,S,P,A,T,O=(v=n,I=u.data.title,S=u.data.pageUriSEO,P=v.dal,A=v.pointers,(T={data:{component_properties:{},document_data:{},theme_data:{},behaviors_data:{},connections_data:{},mobile_hints:{},design_data:{}},pageUriSEO:S,structure:{},title:I}).translations=t.multilingual.generatePageTranslationsData({dal:P,pointers:A}),T),C=n.pointers.page.getNewPagePointer(d);n.dal.full.set(C,O);var D=u.mobileComponents&&{};c.setComponent(n,o,null,u,d,!0,D),y.markPageAsInitialized(n,d),r.executeHook(r.HOOKS.ADD_PAGE.AFTER,u.componentType,[n,o]),r.executeHook(r.HOOKS.ADD_ROOT.AFTER,u.componentType,[n,o]),_.setMobileHiddenComponentListIfNeeded(n,u.id,o.id,D,E)}function M(e,t){var n=D(t),o=L(e,n);if(!o.success)throw new Error(o.description);var r=e.pointers.components.getPage(n,s.VIEW_MODES.DESKTOP);c.validateRemovalInternal(e,r)}function b(e,t,n){var o=F(e,t),r=e.pointers.data.getDataItemFromMaster(t);n=n||!1;var i=c.serialize(e,o,r,!1,n,!1,void 0,!0);return i.data=g.getPageDataWithoutIds(e,t,!0),i}function R(e,t,n){var o=F(e,t);return c.isContainsCompWithType(e,o,n)}function N(t,n){var o=function(e){return"string"==typeof e?{pageId:e}:e}(n);return o.pageId&&t.siteAPI.getFocusedRootId()!==o.pageId||function(t,n){var o=t.siteAPI.getRootNavigationInfo();return!e.isEqual(n.routerDefinition,o.routerDefinition)||n.innerRoute!==o.innerRoute}(t,n)}function x(t,n,o){var i=function(t,n){if(e.isString(n))return{pageId:n};if("PageLink"===n.type){var o=g.getPageData(t,n.pageId);return{pageId:o.id,title:o.pageUriSEO}}if("DynamicPageLink"===n.type){var r=T.get.byId(t,n.routerId);if(!r)return;var i=n.innerRoute;return{routerDefinition:r,innerRoute:i,pageAdditionalData:i&&"/"!==i?"".concat(r.prefix,"/").concat(i):r.prefix}}}(t,n);if(i){if(i.pageId&&!i.routerDefinition){var a=T.getRouterDataForPageIfExist(t,i.pageId);a&&(i=e.assign(i,{routerDefinition:a}))}N(t,i)?(A.isOpen("ds_updateAnchorsOnlyOnNavigation")&&function(t,n){var o=t.siteDataAPI,r=t.siteDataAPI.siteData.anchorsMap,i=t.siteDataAPI.siteData.getViewMode();e.has(r,[n,i])||o.anchors.createPageAnchors(n)}(t,n),o&&t.setOperationsQueue.waitForChangesApplied(o),t.siteAPI.navigateToPage(i),r.executeHook(r.HOOKS.PAGE.AFTER_NAVIGATE_TO_PAGE,n,[t])):o&&o()}}function L(e,t){var n=D(t);return p.isMasterPage(e,n)?{success:!1,description:"It is not allowed to remove masterPage"}:g.doesPageExist(e,n)?p.isHomepage(e,n)?{success:!1,description:"It is not allowed to delete homePage (".concat(n,"), please set a new page as homePage (page.setAsHomepage) and try again")}:e.siteAPI.getPrimaryPageId()===n?{success:!1,description:"It is not allowed to delete current page (".concat(t,"), please navigate to another page (page.navigateTo) and try again")}:e.siteAPI.getCurrentPopupId()===n?{success:!1,description:"It is not allowed to delete open popup (".concat(n,"), please close the popoup nand try again")}:{success:!0,description:""}:{success:!1,description:'Page with id "'.concat(n,'" does not exist')}}function B(t,n){var o=D(n),r=g.getPageData(t,o),i=R(t,o,[m.COMP_TYPES.TPA_MULTI_SECTION,m.COMP_TYPES.TPA_SECTION]),a=r&&r.appInnerID&&P.getAppData(t,r.appInnerID)&&"blog"===P.getAppData(t,r.appInnerID).packageName;return p.isMasterPage(t,o)?{success:!1,description:"It is not allowed to duplicate masterPage"}:g.doesPageExist(t,o)?i?{success:!1,description:"It is not allowed to duplicate TPA pages"}:a?{success:!1,description:"It is not allowed to duplicate Blog pages"}:"AppPage"===e.get(r,"type")?{success:!1,description:"It is not allowed to duplicate Old blog page"}:{success:!0,description:""}:{success:!1,description:'Page with id "'.concat(o,'" does not exist')}}function F(e,t){return e.pointers.components.getPage(t,v.getViewMode(e))}r.registerHook(r.HOOKS.ADD.AFTER,C,"mobile.core.components.Page");var k={shouldDelayDeletion:function(e,t){var n=e.pointers.components.getPage(t,v.getViewMode(e));return c.shouldDelayDeletion(e,n)},initialize:function(n){try{t.loggingUtils.performance.start(t.loggingUtils.performanceMetrics.PAGE.INITIALIZE),t.loggingUtils.fedopsLogger.interactionStarted(t.loggingUtils.fedopsLogger.INTERACTIONS.PAGE.INITIALIZE);var r=g.getPagesList(n);e.forEach(r,(function(t){var o=g.getPageData(n,t);(function(t){return!!e.get(t,"pageSecurity.passwordDigest")})(o)&&(function(e,t){S.setPagePassword(e,t.id,{value:t.pageSecurity.passwordDigest,isHashed:!0})}(n,o),function(e,t){g.setPageData(e,t.id,{pageSecurity:{requireLogin:!1,dialogLanguage:t.pageSecurity.dialogLanguage}})}(n,o)),function(t,n){if(n.tpaApplicationId>0&&n.tpaPageId){var o=P.getAppData(t,n.tpaApplicationId),r=P.getWidgetDataFromTPAPageId(t,o.appDefinitionId,n.tpaPageId);e.isBoolean(e.get(r,"appPage.indexable"))&&e.get(r,"appPage.indexable")!==n.indexable&&n.indexable&&g.setPageData(t,n.id,{indexable:e.get(r,"appPage.indexable")})}}(n,o)})),t.loggingUtils.fedopsLogger.interactionEnded(t.loggingUtils.fedopsLogger.INTERACTIONS.PAGE.INITIALIZE),t.loggingUtils.performance.finish(t.loggingUtils.performanceMetrics.PAGE.INITIALIZE)}catch(e){o.integrations.ravenUtils.captureError(e,{tags:{pageInitializationFailed:!0}})}},getPageBottomByComponents:function(e,t){return e.siteAPI.getSiteMeasureMap().pageBottomByComponents[t]},getPageIdToAdd:function(e){var n=e.pointers.page.getAllPagesPointer(),o=e.pointers.general.getDeletedPagesMapPointer(),r=e.dal.getKeys(n).concat(e.dal.getKeys(o)),i=t.guidUtils.generateNewPageId(r);return e.pointers.components.getNewPage(i)},add:w,duplicate:function(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=D(n),s=e.pointers.page.getPagePointer(a);if(!s)throw new Error("page does not exist ".concat(n));var c=B(e,n);if(!c.success)throw new Error(c.description);var u=e.dal.get(e.pointers.getInnerPointer(s,"title"));I.runPartialConversionAllPages(e);var l=b(e,a,!0);l.data.pageUriSEO=g.getValidPageUriSEO(e,"",l.data.pageUriSEO),r.executeHook(r.HOOKS.DUPLICATE_ROOT.BEFORE,l.componentType,[e,l]),w(e,t,u,l,o),g.copyTranslationData(e,a,t.id,d.isPopup(e,a)),r.executeHook(r.HOOKS.DUPLICATE_ROOT.AFTER,l.componentType,[e,t.id,a,i])},remove:function(t,n,o){o=o||e.noop;var r=D(n),a=t.pointers.components.getPage(r,s.VIEW_MODES.DESKTOP);c.deleteComponent(t,a),t.siteDataAPI.removeResolvedDataMapForPage(r),function(e,t){var n=e.pointers.data.getDataItemFromMaster(t),o=e.pointers.page.getPagePointer(t);g.removePageData(e,n),e.dal.full.remove(o),function(e,t){var n=e.pointers.general.getDeletedPagesMapPointer(),o={};o[t]=!0,e.dal.merge(n,o)}(e,t)}(t,r),function(e,t){var n=i.getPagesGroupByPageId(e,t);n&&i.removePageFromPagesGroup(e,n,t)}(t,r),o(t)},validatePageRemoval:function(e,t){M(e,t),e.setOperationsQueue.asyncPreDataManipulationComplete()},validatePageRemovalInternal:M,navigateTo:x,scrollToComponent:function(e,t,n){e.siteAPI.scrollToComponent(t,n)},navigateToPageAndScrollToAnchor:function(e,n,o,r){var i=t.scrollAnchors.isSpecialAnchor(o),a=e.siteAPI.scrollToAnchor.bind(e.siteAPI,o,r);i?a():x(e,n,a)},willNavigateNavigateAndScroll:function(e,n,o){return!t.scrollAnchors.isSpecialAnchor(o)&&N(e,n)},willNavigateNavigateToPage:N,isRemovable:function(e,t){return L(e,t).success},isDuplicable:function(e,t){return B(e,t).success},isLandingPage:function(e,t){var n=e.pointers.data.getDataItemFromMaster(t),o=e.pointers.getInnerPointer(n,"isLandingPage"),r=e.pointers.getInnerPointer(n,"isMobileLandingPage"),i=e.siteAPI.isMobileView(),a=e.dal.isExist(o)&&e.dal.get(o),s=i&&e.dal.isExist(r)&&e.dal.get(r);return a||s},isPageContainsCompWithType:R,getSocialUrl:function(e,t,n){var o=e.pointers.general.getPublicUrl(),r=e.dal.get(o);return n?p.getMainPageUrl(e,t,r):p.getCurrentUrl(e,t,r)},getPageUrl:function(e,t,n,o){var r=g.getPageUriSEO(e,t);return n=n||e.dal.get(e.pointers.general.getPublicUrl()),p.getPageUrl(e,{pageId:t,title:r},o,n)},getPageTitle:function(e,t){var n=e.pointers.data.getDataItemFromMaster(t),o=e.pointers.getInnerPointer(n,"title");return e.dal.get(o)||""},getPage:F,getPageIdList:g.getPagesList,getPagesDataItems:g.getPagesDataItems,getLayout:function(e,t){var n=F(e,t),o=c.layout.get(e,n),r=e.siteAPI.getSiteWidth();return o.width=r,o},getReference:F,serializePage:b,homePage:{set:function(e,t){if(t=D(t),!e.pointers.page.isExists(t))throw Error("pageId ".concat(t," does not exist. cannot set as home page."));if(d.isPopup(e,t))throw Error("Can't set popup page as home page.");var n=e.pointers.data.getDataItemFromMaster(s.MASTER_PAGE_ID),o=e.pointers.getInnerPointer(n,"mainPage"),r=e.pointers.getInnerPointer(n,"mainPageId");e.dal.set(o,"#".concat(t)),e.dal.set(r,t)},get:p.getHomepageId},data:{set:g.setPageData,get:g.getPageData},style:{setId:function(e,t,n){var o=F(e,t);l.style.setId(e,o,n)},connectToThemeStyle:function(e,t,n){var o=F(e,t);l.style.connectToThemeStyle(e,o,n)},getId:function(e,t){var n=F(e,t);return l.style.getId(e,n)},setCustom:function(e,t,n,o,r,i){var a=F(e,n);l.style.setCustom(e,t,a,o,r,i)}},background:{get:g.getBgDataItem,update:g.updateBgDataItem},getPageAnchors:function(n,o,r){var i=n.pointers.data.getDataItemsWithPredicate({type:"Anchor"},o).map(n.dal.get),a=t.scrollAnchors.getPageTopAnchor(o,r);i.push(a);var s=n.pointers.components.getPage(o,"DESKTOP"),c=e.keyBy(n.pointers.components.getChildren(s),"id");return e.sortBy(i,(function(e){var o=t.scrollAnchors.SCROLL_PAGE_TOP_Y_POS,r=c[e.compId];if(r){var i=n.pointers.getInnerPointer(r,"layout.y");o=n.dal.get(i)}return o}))},permissions:{hasPassword:function(e,t){return S.isPageProtected(e,t)},updatePassword:function(n,o,r){e.isObject(r)?(t.log.warnDeprecation("pages.permissions.updatePassword: Pass password as a string and not an object"),S.setPagePassword(n,o,r)):S.setPagePassword(n,o,{value:r,isHashed:!1})},removePassword:function(e,t){S.setPageToNoRestriction(e,t)},isPagesProtectionOnServerOn:function(e){return t.log.warnDeprecation("pages.permissions.isPagesProtectionOnServerOn: Use true instead of calling this function, because it always returns true"),S.isPagesProtectionOnServerOn(e)}},properties:{get:f.getPageProperties,update:f.updatePageProperties}};return k.popupPages={open:x,close:function(e,t){var n=e.siteAPI.getRootNavigationInfo();n&&k.navigateTo(e,n.pageId,t)},getCurrentPopupId:function(e){return e.siteAPI.getCurrentPopupId()},getCurrentMainContainer:function(e,t){var n={id:k.popupPages.getCurrentPopupId(e),type:_.getViewMode(e,t,v)};return d.getPopupContainer(e,n)},add:function(n,o,r,i){i?function(t){if(!e.find(t.components,{componentType:O}))throw new Error("Can't create a popup page. Main container inside the popup was not found")}(i):i=h.getBlankPopupPageStructure(n),i.data.pageUriSEO=i.data.pageUriSEO||t.siteConstants.DEFAULT_POPUP_URI_SEO_PREFIX+o.id,w(n,o,r,i),function(e,t){var n=F(e,e.siteAPI.getPrimaryPageId()),o=F(e,s.MASTER_PAGE_ID),r=a.getActionDefinition(e,"load"),i=a.getBehaviorDefinition(e,"openPopup");if(a.hasBehavior(e,n,r,null,i))return;if(a.hasBehavior(e,o,r,null,i))return;a.updateBehavior(e,n,r,t,i)}(n,o)},getPopupIdToAdd:function(n){var o=n.pointers.page.getAllPagesPointer(),r=n.pointers.general.getDeletedPagesMapPointer(),i=n.dal.getKeys(o),a=i.concat(n.dal.getKeys(r)),s=e.filter(i,e.partial(d.isPopup,n)),c=t.guidUtils.generateNewPopupId(a,s);return n.pointers.components.getNewPage(c)},getDataList:g.getPopupsDataItems,isPopup:function(e,t){return d.isPopup(e,t)},isPopupOpened:function(e){return e.siteAPI.isPopupOpened()}},k}()},function(e,t){e.exports=r},function(e,t,n){e.exports=function(){var e=n(0),t=n(409),o=n(69),r=n(9),i=n(171),a=n(2),s=n(10),c=n(19),u=n(53),l=n(17),p=n(23),d=n(37),g=n(5);function f(t,n,o){var i=null;t&&n&&(i=(o?t.dal.full:t.dal).get(t.pointers.getInnerPointer(n,"styleId")),i=function(t,n,o,i){if(i){if(!g.isOpen("fixStyleIdForMissingStyle"))return i;var s=!t.runtimeConfig.stylesPerPage||u(i)?a.MASTER_PAGE_ID:e.get(t.pointers.components.getPageOfComponent(n),"id"),l=t.pointers.data.getThemeItem(i,s);if(!t.dal.isExist(l)){var f=r.getComponentType(t,n),m=c.services.schemasService.getDefinition(f).styles,v=e.keys(m).sort()[0];E(t,n,v,e.noop,o);var y={dsOrigin:t.config.origin,componentType:f,componentId:n.id,style:i};return p.event(t,d.FIX_MISSING_COMPONENT_STYLE,y),v}return i}}(t,n,o,i));return i}var m=function(e,t,n,o){var i=(o?e.pointers.full:e.pointers).components.getPageOfComponent(t).id,a=n||C(e,t,o);a.componentClassName=a.componentClassName||r.getComponentType(e,t);var c=s.styles.internal.fork(e,a,i,o);return E(e,t,c,void 0,o),c},v=function(e,t,n){return m(e,t,n,!1)};function E(e,t,n,o,c){var u=a.MASTER_PAGE_ID;if(e.runtimeConfig.stylesPerPage){var p=c?e.pointers.full:e.pointers;u=p.components.getPageOfComponent(t).id}var d=s.styles.internal.get(e,n,u,c);d||(n=I(e,n,r.getComponentType(e,t)),d=s.styles.internal.get(e,n,a.MASTER_PAGE_ID,c));var g=i.validateSetStyleIdParams(e,n,u);if(!g.success)throw new Error(g.error);l.syncMobileAndDesktopStyleId(e,t,n,c),(c?e.dal.full:e.dal).set(e.pointers.getInnerPointer(t,"styleId"),n),e.setOperationsQueue.executeAfterCurrentOperationDone((function(){o&&o({styleProperties:s.styles.internal.get(e,n,u,c).style.properties}),s.events.onChange.executeListeners({type:"STYLE",values:n})})),h(e,t,d.skin,c)}var y=function(e,t,n,o){return E(e,t,n,o,!1)};function I(e,t,n){var o=c.services.schemasService.getDefinition(n);if(!o)throw new Error("Component of type - ".concat(n," is not listed in componentsDefinitionsMap"));var r=o.styles[t];if(!r)throw new Error("Style id - ".concat(t," is not a known system style id."));var i=function(e,t,n){return{compId:"",componentClassName:n,pageId:"",styleType:"system",type:"TopLevelStyle",skin:t,style:{groups:{},properties:S(e,t),propertiesSource:{}}}}(e,r,n);return s.styles.createAndAddStyleItem(e,i,t,a.MASTER_PAGE_ID)}function S(t,n){return e.mapValues(s.skins.getSkinDefinition(t,n),"defaultValue")}function h(e,t,n,o){var r=e.pointers.getInnerPointer(t,"skin");(o?e.dal.full:e.dal).set(r,n)}function P(t,n){return e.mapValues(n,(function(t){return e.isNumber(t)||e.isBoolean(t)||e.isString(t)&&(e.includes(t,"#")||e.includes(t,"rgb"))?"value":/^(font|color)_[0-9]+$/.test(t)?"theme":"value"}))}function A(e,t,n,r){T(e,t,n,r,arguments.length>4&&void 0!==arguments[4]&&arguments[4]),o.updateAnchors(e,t)}function T(t,n,o,r,a){var c=i.validateExistingComponent(t,n,a);if(!c.success)throw new Error(c.error);var u,l=D(t,n);if(l)if(u=l.id,"system"===l.styleType)u=v(t,n,o);else{var p=t.pointers.components.getPageOfComponent(n).id;o.componentClassName=o.componentClassName||l.componentClassName,e.set(o,"style.propertiesSource",P(0,o.style.properties)),s.styles.update(t,l.id,o,p)}else u=m(t,n,o,a);t.setOperationsQueue.executeAfterCurrentOperationDone((function(){r&&r({styleProperties:o.style.properties}),s.events.onChange.executeListeners({type:"STYLE",values:u})})),h(t,n,o.skin,a)}function _(e,t){var n=null;if(t){var o=D(e,t);n=o&&o.skin?o.skin:e.dal.get(e.pointers.getInnerPointer(t,"skin"))}return n}function O(e,n){var o=_(e,n);return t.params.getSkinDefaultParams(o)}function C(e,t,n){var o=f(e,t,n);if(o){var r=(n?e.pointers.full:e.pointers).components.getPageOfComponent(t).id;return s.styles.internal.get(e,o,r,n)}return null}var D=function(e,t){return C(e,t,!1)};return{style:{setId:y,getId:function(e,t){return f(e,t,!1)},get:D,setCustom:function(t,n,o,a,c){if(!t.dal.isExist(o))throw new Error("component param does not exist");var u=i.validateComponentCustomStyleParams(t,a,c);if(!u.success)throw new Error(u.error);var l,p,d=o.id,g=r.getComponentType(t,o);if(c)p=P(t,l=c);else if(a)l={},p={};else{var f=D(t,o);l=e.get(f,"style.properties",{}),p=e.get(f,"style.propertiesSource",{})}var m=t.pointers.components.getPageOfComponent(o).id,v={id:n,compId:d,componentClassName:g,pageId:"",styleType:"custom",type:"TopLevelStyle",skin:a||_(t,o),style:{groups:{},properties:l,propertiesSource:p}};s.styles.update(t,n,v,m),y(t,o,n||"")},update:function(e,t,n,o){return A(e,t,n,o,!1)},updateAndAdjustLayout:T,createSystemStyle:I,connectToThemeStyle:function(e,t,n,o){if(!u(n))throw new Error("connectToThemeStyle called with custom style");y(e,t,n,o)},fork:v,internal:{setId:E,getId:f,get:C,fork:m,update:A}},skin:{set:function(e,t,n){var o=i.validateSetSkinParams(e,t,n);if(!o.success)throw new Error(o.error);h(e,t,n)},get:_,getComponentSkinExports:function(e,n){var o=_(e,n);return t.params.getSkinExports(o)},getComponentSkinDefaults:O,getCompSkinParamValue:function(t,n,o){var r=D(t,n).style.properties||{},i=O(t,n);return e.isArray(i[o])&&1===i[o].length?r[i[o]]:i[o]}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=(n(51),n(12)),o=n(3),r=n(82),i=n(27),a=n(2),s=n(61),c=n(6),u=n(83),l=n(68),p=t.constants.DATA_TYPES,d=["desktop","mobile"];function g(t,n,o){var r=t.pointers.page.getNonDeletedPagesPointers(n);return e(r).map("id").filter((function(e){var n=i.isPopup(t,e);return o?n:!n})).value()}function f(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=t.pointers.data.getDataItemFromMaster(n),s=o.serializeDataItem(t,p.data,a,r,i);return s&&s.pageBackgrounds&&e.forEach(d,(function(e){var n=s.pageBackgrounds[e];if(n&&n.ref){var a=t.pointers.data.getDataItemFromMaster(n.ref.replace("#",""));n.ref=o.serializeDataItem(t,p.data,a,r,i)}})),s}function m(t,n,o){if(function(e,t){return!!s.get.byPrefix(e,t)}(t,o))return!0;var r=D.getPagesList(t,!1);return e(r).pull(n).some((function(e){return D.getPageUriSEO(t,e)===o}))}function v(e,t,n){var o=D.getForbiddenPageUriSEOs(e);return delete o[D.getPageUriSEO(e,t)],o.hasOwnProperty(n.toLowerCase())}function E(t,n){return n=n||0,e.size(t)>a.URLS.MAX_LENGTH-n}function y(e){return/[A-Z]/.test(e)}function I(e){return!/^[a-z0-9\-]+$/.test(e)}function S(t,n){return e.chain(t).find((function(e){return e[0](n)})).get(1,"").value()}function h(e,t,n){return S([[m.bind(null,e,t),"pageUriSEO is invalid: not unique across site"],[v.bind(null,e,t),"pageUriSEO is invalid: reserved word"]],n)}function P(e,n,o){var r=e.pointers.general.getUrlFormat();return e.dal.get(r)===t.siteConstants.URL_FORMATS.HASH_BANG?"":h(e,n,o)||function(e){return S([[E,"pageUriSEO is invalid: over ".concat(a.URLS.MAX_LENGTH," chars")],[y,"pageUriSEO is invalid: all letters must be lowercase"],[I,"pageUriSEO is invalid: must only be alphanumeric or hyphen"]],e)}(o)}var A=5;function T(e,t,n){E(n=r.convertPageNameToUrl(e,n),A)&&(n=n.slice(0,a.URLS.MAX_LENGTH-A));for(var o=n,i=1;h(e,t,o);i++)o="".concat(n,"-").concat(i);return o}function _(t,n,r){return e.isString(r.pageUriSEO)&&e.isEmpty(r.pageUriSEO)&&(r.pageUriSEO=T(t,n,r.title)),r.pageUriSEO&&(!function(t,n,o){var r=P(t,n,o);if(!e.isEmpty(r))throw new Error(r)}(t,n,r.pageUriSEO),e.get(r,["translationData","uriSEOTranslated"])||(r.translationData={uriSEOTranslated:!1})),function(t,n,r){var i=t.pointers.data.getDataItemFromMaster(n),a=o.serializeDataItem(t,p.data,i,!1);return r.pageBackgrounds&&(e.forEach(d,(function(e){var i,s,c=r.pageBackgrounds[e];c&&c.ref&&(a?(s=a.pageBackgrounds&&a.pageBackgrounds[e]&&a.pageBackgrounds[e].ref,i=r.pageBackgrounds[e]&&r.pageBackgrounds[e].ref&&r.pageBackgrounds[e].ref.id||s&&a.pageBackgrounds[e].ref.replace("#","")):i="".concat(n,"_").concat(e,"_bg"),c.ref="#".concat(o.addSerializedDataItemToPage(t,"masterPage",c.ref,i)))})),r.pageBackgrounds=e.assign(a&&a.pageBackgrounds||{},r.pageBackgrounds)),r}(t,n,r)}function O(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(n=_(e,t,n)).pageUriSEO&&u.patchPageTranslations(e,t,{pageUriSEO:n.pageUriSEO}),o.addSerializedDataItemToPage(e,"masterPage",n,t,r)}function C(t,n){return e(t.pointers.components.getChildrenRecursively(n)).map((function(e){return o.getComponentDataItemId(t,e,"dataQuery")})).reject(e.isNull).value()}var D={getPagesDataItems:function(t){var n=D.getPagesList(t,!1);return e.map(n,(function(e){return D.getPageData(t,e)}))},getPopupsDataItems:function(e){return D.getPopupsList(e).map((function(t){return D.getPageData(e,t)}))},getNumberOfPages:function(e){return D.getPagesList(e,!1).length},getPagesList:function(t,n,o){return o?function(t,n){var o=t.pointers.page.getNonDeletedPagesPointers(n);return e.map(o,"id")}(t,n):g(t,n,!1)},getPopupsList:function(e){return g(e,!1,!0)},doesPageExist:function(e,t){var n=e.pointers.page.getPagePointer(t);return Boolean(n)},addPageData:function(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];O(e,t,n),r.executePageAddedCallback(e,t,o)},setPageData:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];O(e,t,n,o),r.executePageDataChangedCallback(e,t,n,o)},getPageData:function(e,t){return f(e,t,!1)},getPageDataWithoutIds:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f(e,t,!0,!0,n)},getBgDataItem:function(t,n,o){if(!e.includes(d,o))throw new Error("unknown device for background");return D.getPageData(t,n).pageBackgrounds[o]},updateBgDataItem:function(t,n,o,r){if(!e.includes(d,r))throw new Error("unknown device for background");var i={pageBackgrounds:{}};i.pageBackgrounds[r]=e.cloneDeep(o),D.setPageData(t,n,i),c.executeHook(c.HOOKS.SITE_BACKGROUND_UPDATE.AFTER,null,[t,n,r])},removePageData:function(t,n){var r=t.dal.get(n),i=t.pointers.data.getPageIdOfData(n);r.pageBackgrounds&&e.forEach(d,(function(e){var n=r.pageBackgrounds[e];if(n&&n.ref){var a=t.pointers.data.getDataItem(n.ref.replace("#",""),i);o.removeDataItemRecursively(t,a)}})),o.removeDataItemRecursively(t,n)},getPageUriSEO:function(e,t){var n=e.pointers.data.getDataItemFromMaster(t),o=e.pointers.getInnerPointer(n,"pageUriSEO");return e.dal.get(o)},getForbiddenPageUriSEOs:function(e){var t=e.pointers.general.getForbiddenPageUriSEOs();return e.dal.get(t)||{}},isDuplicatePageUriSeo:m,isForbiddenPageUriSeo:v,getValidPageUriSEO:T,isPageUriSeoTooLong:E,copyTranslationData:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(u.multilingual.isEnabled(t)){var s=t.dal.full.get(t.pointers.data.getDataItemFromMaster(r)),c={id:r,pageBackgrounds:e.cloneDeep(s.pageBackgrounds)};u.copyDataItemTranslations(t,a.MASTER_PAGE_ID,n,a.MASTER_PAGE_ID,c),function(t,n,o){var r=t.pointers.components.getPage(n,a.VIEW_MODES.DESKTOP),i=t.pointers.components.getPage(o,a.VIEW_MODES.DESKTOP),s=e.zipObject(C(t,r),C(t,i)),c=u.component.getTranslations(t,r);u.copyTranslationData(t,i,c,s)}(t,n,r),function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=t.dal.full.get(t.pointers.data.getDataItemFromMaster(n)).pageBackgrounds,c=t.dal.full.get(t.pointers.data.getDataItemFromMaster(r)).pageBackgrounds,l=i?n:a.MASTER_PAGE_ID,d=i?r:a.MASTER_PAGE_ID;e.forEach(a.DEVICES,(function(n){if(s[n]&&s[n].ref){var r=s[n].ref.replace("#",""),i={id:c[n].ref.replace("#","")};u.copyDataItemTranslations(t,l,r,d,i),function(t,n){u.patchDataItemTranslations(t,a.MASTER_PAGE_ID,n,(function(n){if(!n.mediaRef)return n;var r=n.mediaRef.replace("#",""),i=t.pointers.data.getDataItem(r,a.MASTER_PAGE_ID);if(!t.dal.fullJsonDal.isExist(i))return n;var s=o.serializeDataItem(t,p.data,i,!0),c=o.addSerializedDataItemToPage(t,a.MASTER_PAGE_ID,s);return e.assign({},n,{mediaRef:"#".concat(c)})}))}(t,i.id)}}))}(t,n,r,i),i||function(e,t,n){var o=l.getPageMenuItemPointer(e,t),r=l.getPageMenuItemPointer(e,n),i={id:r.id,link:l.getLinkIdByMenuItemId(e,r.id)};u.copyDataItemTranslations(e,a.MASTER_PAGE_ID,o.id,a.MASTER_PAGE_ID,i)}(t,n,r)}},convertPageNameToUrl:r.convertPageNameToUrl};return D}()},function(e,t){var n,o,r,i,a,s,c;e.exports=(o=(n=["wixCode"]).concat("nonUndoable"),r=n.concat("undoable"),a=(i=["rendererModel","wixCodeModel"]).concat("appData"),s=a.concat("codeAppId"),c=o.concat("isAppReadOnly"),{paths:{BASE:n,NON_UNDOABLE_BASE_PATH:o,UNDOABLE_BASE_PATH:r,DUPLICATED_FILES_INFO:o.concat("duplicatedFilesInfo"),LOADED_FILE_CONTENTS:o.concat("loadedFileContents"),MODIFIED_FILE_CONTENTS:o.concat("modifiedFileContents"),UNDOABLE_MODIFIED_FILE_CONTENTS:r.concat("modifiedFileContents"),FILE_PATH_TO_ID_MAP:o.concat("filePathToIdMap"),LOADED_CHILDREN:o.concat("loadedChildren"),ARE_CHILDREN_LOADED:o.concat("areChildrenLoaded"),WIX_CODE_MODEL:i,WIX_CODE_APP_DATA:a,GRID_APP_ID:s,IS_APP_READ_ONLY:c,DIRECTORY_FLAG_BY_DELETED_PATH:o.concat("directoryFlagByDeletedPath")},WIX_CODE_APP_ID:"wixCode",WIX_CODE_SERVICE_URL_KEY:"wixCodeServiceUrl",WIX_CODE_SPEC_TYPE:"siteextension",PAGES_ROOT:"pages",JS_EXTENSION:".js"})},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(1),r=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=window.parent.location.search.replace(/^\??/,""),n=t.urlUtils.parseUrlParams(e).editorSessionId;return r=function(){return n},n}));function i(e){return e.siteAPI.getEditorSessionId()||r()}function a(e){return e.siteAPI.isMobileView()?"mobile":"desktop"}function s(t){var n,r=e.tail(arguments);return r[0]=e.defaults({},r[0],{src:38,endpoint:"editor",sampleRatio:0}),r[1]=e.defaults({},r[1],{esi:i(t),editor_working_mode:a(t)}),(n=t.siteAPI).reportBI.apply(n,o(r))}function c(t){var n=t.reportDefCollection,o=t.packageName,r=t.shouldMutate;return n=!0===(void 0!==r&&r)?n:e.cloneDeep(n),e.forOwn(n,(function(e,t){e.packageName=o,e.errorName=t})),n}return{event:s,error:function(t){var n=e.toArray(arguments);return n[1]=e.defaults(n[1],{endpoint:"trg",evid:10}),n[2]=e.defaults(n[2],{dsOrigin:t.config.origin}),s.apply(this,n)},formatErrorEvents:c,register:function(e,t,n){"error"===t&&c({packageName:e,reportDefCollection:n,shouldMutate:!0})}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=["wixapps"],o=t.concat("appbuilder"),r=o.concat("descriptor"),i={VIEWS:r.concat("views"),TYPES:r.concat("types"),PARTS:r.concat("parts"),DATA_SELECTORS:r.concat("dataSelectors"),PAGES:r.concat("pages"),ITEMS:o.concat("items"),DELETED_ITEMS:o.concat("deletedItems")};function a(e,t){if(!e)throw new Error(t)}return{initBasePaths:function(n){var a=[t,o,r].concat(e.values(i));e.forEach(a,(function(e){n.dal.isPathExist(e)||n.dal.full.setByPath(e,{})}))},getBaseItemsPath:function(e){return e?i.ITEMS.concat(e):i.ITEMS},getItemPath:function(e,t,n){a(e,"Must provide a type ID"),a(t,"Must provide an item ID");var o=this.getBaseItemsPath(e).concat(t);return n&&(o=o.concat(n)),o},getBaseDeletedItemsPath:function(e){return e?i.DELETED_ITEMS.concat(e):i.DELETED_ITEMS},getDeletedItemPath:function(e,t){return a(e,"Must provide a type ID"),a(t,"Must provide an item ID"),this.getBaseDeletedItemsPath(e).concat(t)},getBaseTypesPath:function(){return i.TYPES},getTypePath:function(e){return a(e,"Must provide a type ID"),this.getBaseTypesPath().concat(e)},getBasePartsPath:function(){return i.PARTS},getPartPath:function(e){return a(e,"Must provide a part ID"),this.getBasePartsPath().concat(e)},getBaseViewsPath:function(){return i.VIEWS},getViewPath:function(e){return a(e,"Must provide a view ID"),this.getBaseViewsPath().concat(e)},getBaseDataSelectorsPath:function(){return i.DATA_SELECTORS},getDataSelectorPath:function(e){return a(e,"Must provide a data selector ID"),this.getBaseDataSelectorsPath().concat(e)},getPagePath:function(e){return a(e,"Must provide a page ID"),i.PAGES.concat(e)},getApplicationInstanceVersionPath:function(){return r.concat(["applicationInstanceVersion"])},getOffsetFromServerTimePath:function(){return r.concat(["offsetFromServerTime"])},getRepoPath:function(){return r},getAppbuilderPath:function(){return o},getPackageMetaDataPath:function(){return o.concat(["metadata"])},getAppbuilderMetadataPath:function(t){return e.compact(o.concat(["metadata","appbuilder_metadata"].concat(t)))},getAppPart2MetadataPath:function(e){return o.concat(["metadata",e])}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(8),r=(n(9),n(3),n(6)),i=n(34),a=n(15),s=n(19);function c(e,t){var n=null;return e&&t&&(n=e.pointers.components.isMasterPage(t)?"wysiwyg.viewer.components.WSiteStructure":o.getComponentType(e,t)),n}function u(e,t){return e.pointers.components.getParent(t)}function l(e,t){return e.pointers.full.components.getParent(t)}function p(e,t,n){for(var o=n(e,t),r=[];null!==o;)r.push(o),o=n(e,o);return r}function d(e,t,n){return n?e.pointers.components.getChildrenRecursively(t):e.pointers.components.getChildren(t)}return{buildDefaultComponentStructure:function(e,t){return s.services.buildDefaultComponentStructure(t)},getType:c,getDefinition:function(e,t){return s.services.schemasService.getDefinition(t)},getPropertiesItem:function(e,t){var n=e.pointers.getInnerPointer(t,"propertyQuery"),o=n&&e.dal.get(n),r=e.pointers.components.getPageOfComponent(t),i=r&&r.id,s=o&&e.pointers.data.getPropertyItem(a.stripHashIfExists(o),i);return s&&e.dal.get(s)},getPage:function(e,t){return e.pointers.full.components.getPageOfComponent(t)},getContainerToAddComponentTo:function(e,t){var n=c(e,t),o=r.executeHooksAndCollectValues(r.HOOKS.ADD_ROOT.GET_CONTAINER_TO_ADD_TO,n,[e,t]);if(o.length>1)throw new Error("you can't have more that one hook returning a container");return o[0]||t},getContainer:u,getAncestors:function(e,t){return p(e,t,u)},getAncestorsFromFull:function(e,t){return p(e,t,l)},getSiblings:function(t,n){var o=t.pointers.components.getParent(n),r=d(t,o);return e.remove(r,{id:n.id}),r},getRepeatedComponents:function(e,n){return t.displayedOnlyStructureUtil.isRepeatedComponent(n.id)?e.pointers.components.getAllDisplayedOnlyComponents(n):[]},getChildren:d,getChildrenFromFull:function(e,t,n){return n?e.pointers.full.components.getChildrenRecursively(t):e.pointers.full.components.getChildren(t)},getAllJsonChildren:function(e,t){return d(e,t,!1)},getTpaChildren:function(t,n){var o=t.pointers.components.getChildrenRecursively(n);return e.filter(o,(function(e){var n=c(t,e);return i.isTpaByCompType(n)}))},getBlogChildren:function(t,n){var o=t.pointers.components.getChildrenRecursively(n);return e.filter(o,(function(e){return"wixapps.integration.components.AppPart"===c(t,e)}))},getAncestorByPredicate:function(e,t,n){return e.pointers.components.getAncestorByPredicate(t,n)},isRenderedOnSite:function(e,t){return e.siteAPI.isComponentRenderedOnSite(t.id)},isContainsCompWithType:function(t,n,o){o=e.isArray(o)?o:[o];for(var r,i=t.pointers.components.getChildrenRecursively(n),a=0;a<i.length;a++)if(r=c(t,i[a]),e.includes(o,r))return!0;return!1},isExist:function(e,t){return e.dal.isExist(t)},isPageComponent:function(e,t){return e.pointers.components.isPage(t)}}}()},function(e,t){e.exports=i},function(e,t,n){e.exports=function(){var e=n(1),t=n(3),o="wysiwyg.viewer.components.PopupContainer";function r(e,t){var n=e.pointers.components.getChildren(t);if(n.length>1)throw new Error("More than one child of the popup page was found. A popup page must have only single direct child of type ".concat(o));if(n.length<1)throw new Error("No direct child of the popup page was found");var r=n[0],i=e.dal.get(e.pointers.getInnerPointer(r,"componentType"));if(i!==o)throw new Error("Direct child of the popup is of type ".concat(i,". Expected type: ").concat(o));return r}return{getPopupContainer:r,isPopupContainer:function(t){return t===e.constants.POPUP.POPUP_CONTAINER.COMPONENT_TYPE},isPopupFullWidth:function(e,n){var o=r(e,n);return"fullWidth"===t.getPropertiesItem(e,o).alignmentType},isPopup:function(e,t){if("masterPage"===t)return!1;var n=e.pointers.data.getDataItemFromMaster(t);return e.dal.get(e.pointers.getInnerPointer(n,"isPopup"))}}}()},function(e,t){e.exports={TYPE:{TPA_SECTION:"TPASection",TPA_MULTI_SECTION:"TPAMultiSection",TPA_WIDGET:"TPAWidget",TPA_GLUED_WIDGET:"TPAGluedWidget"},DATA_TYPE:{TPA_SECTION:"TPA",TPA_MULTI_SECTION:"TPAMultiSection",TPA_WIDGET:"TPAWidget"},COMP_TYPES:{TPA_SECTION:"wysiwyg.viewer.components.tpapps.TPASection",TPA_MULTI_SECTION:"wysiwyg.viewer.components.tpapps.TPAMultiSection",TPA_WIDGET:"wysiwyg.viewer.components.tpapps.TPAWidget",TPA_GLUED_WIDGET:"wysiwyg.viewer.components.tpapps.TPAGluedWidget"},TPA_COMP_TYPES:{TPA_SECTION:"tpa.viewer.components.tpapps.TPASection",TPA_MULTI_SECTION:"tpa.viewer.components.tpapps.TPAMultiSection",TPA_WIDGET:"tpa.viewer.components.tpapps.TPAWidget",TPA_GLUED_WIDGET:"tpa.viewer.components.tpapps.TPAGluedWidget"},SKINS:{TPA_SECTION:"wysiwyg.viewer.skins.TPASectionSkin",TPA_WIDGET:"wysiwyg.viewer.skins.TPAWidgetSkin"},APP_MARKET:{EDITOR_BASE_URL:"http://editor.wix.com/app-market-editor",DOMAIN:"http://editor.wix.com/"},STYLE:{TPA_WIDGET:"tpaw0",TPA_GLUED_WIDGET:"tpagw0",TPA_SECTION:"tpas0"},CYCLE:{MONTHLY:"monthly",YEARLY:"yearly",ONE_TIME:"oneTime"},APP_DEF_ID:{CHAT:"14517e1a-3ff0-af98-408e-2bd6953c36a2"}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(15),r=n(14),i=n(63),a=n(3),s=n(38),c=n(25),u=n(6),l="isHiddenByModes",p="wysiwyg.viewer.components.SiteRegionContainer",d=t.siteConstants.COMP_MODES_TYPES,g={SHOW_ON_SOME_PAGES:{mobileConversionConfig:"copyOverrides"},POPOVER:{mobileConversionConfig:"copyOverrides"},HOVER:{mobileConversionConfig:"chooseMobileMode"}};function f(t,n){if(e.isEmpty(n))return null;var o=t.pointers.componentStructure.getModesDefinitions(n);return t.dal.full.get(o)}function m(t,n){var o=f(t,n);return function(t,n,o){var r=e.find(n,{type:d.HOVER});if(r){var i,s=t.pointers.full.components.getDesktopPointer(o),c=a.getPropertyItemPointer(t,s);if(c){var u=t.dal.get(c).mobileDisplayedModeId;i=u&&e.find(n,{modeId:u})}return i||r}}(t,o,n)||function(t,n){return e(n).filter((function(t){return"copyOverrides"===e.get(g,[t.type,"mobileConversionConfig"])})).find({type:d.POPOVER})}(0,o)}function v(t,n,o){if(!o)return null;var r=f(t,n);return e.filter(r,{type:o})}function E(e,t){return S(t.id)}function y(t,n,o,r,i,a){if(s=r,!e.includes(e.values(d),s))throw new Error("added component mode is invalid");var s;!function(e,t){var n=e.pointers.componentStructure.getModes(t),o=e.pointers.componentStructure.getModesDefinitions(t),r=e.pointers.componentStructure.getModesOverrides(t);e.dal.full.isExist(n)?(e.dal.full.isExist(r)||e.dal.full.set(r,[]),e.dal.full.isExist(o)||e.dal.full.set(o,[])):e.dal.full.set(n,{definitions:[],overrides:[]})}(t,o);var c=I(o.id,r,i,n,a),u=function(t,n,o){var r=t.pointers.componentStructure.getModesDefinitions(n),i=t.dal.full.get(r);switch(o.type){case d.DEFAULT:case d.HOVER:return function(t,n,o){var r=e.find(t,{type:d.DEFAULT}),i=e.find(t,{type:d.HOVER}),a=n.type===d.DEFAULT,s=n.type===d.HOVER;if(a&&r||s&&i||r&&i)return t;if(a)return t.concat(n,I(o,d.HOVER));if(s)return t.concat(n,I(o,d.DEFAULT));return t}(i,o,n.id);case d.SCROLL:return function(t,n,o){if(e.isUndefined(n.settings.scrollPos))throw new Error("scroll mode must have a scroll pos");var r=[],i=e.filter(t,{type:d.SCROLL});e.find(i,"settings.scrollPos",0)||0===n.settings.scrollPos||(r=[I(o,d.SCROLL,{scrollPos:0})]);if(!e.find(i,["settings.scrollPos",n.settings.scrollPos]))return r.concat(n,t);return r.concat(t)}(i,o,n.id);case d.WIDTH:return function(t,n,o){if(e.isUndefined(n.settings.width))throw new Error("width mode must have a width pos");var r=[],i=e.filter(t,{type:d.WIDTH});e.find(i,"settings.width",0)||0===n.settings.width||(r=[I(o,d.WIDTH,{width:0})]);if(!e.find(i,["settings.width",n.settings.width]))return r.concat(n,t);return r.concat(t)}(i,o,n.id);case d.APPLICATIVE:return function(e,t){return[t].concat(e)}(i,o);case d.SHOW_ON_SOME_PAGES:return function(t,n,o,r){if(!t.pointers.components.isMasterPage(n))throw new Error("SOSP mode can be added only to masterPage");if(e.isUndefined(r.settings.pagesGroupId))throw new Error("SOSP mode must have a pagesGroupId");return[r].concat(o)}(t,n,i,o)}}(t,o,c),l=t.pointers.componentStructure.getModesDefinitions(o);t.dal.full.set(l,u),c.type===d.SHOW_ON_SOME_PAGES&&t.siteAPI.updateActiveSOSPModes()}function I(e,t,n,o,r){return{modeId:o||S(e.id),type:t,label:r||null,settings:n||null}}function S(e){var n="".concat(e?"".concat(e,"-"):"","mode");return t.guidUtils.getUniqueId(n,"-")}function h(e,n){if(!n)return null;var o=e.siteAPI.getActiveModes(),r=e.pointers.components.getPageOfComponent(n)||e.pointers.full.components.getPageOfComponent(n),i=f(e,n);return t.modesUtils.getActiveComponentModeIds(o[r.id],i)}function P(e,t,n){e.siteAPI.deactivateMode(t,n)}function A(e,t){var n=e.pointers.componentStructure.getModesOverrides(t);return e.dal.full.isExist(n)&&e.dal.full.get(n)}function T(e,t){s.removeComponentsBehaviorsWithFilter(e,t,{action:"modeOut"}),s.removeComponentsBehaviorsWithFilter(e,t,{action:"modeIn"})}function _(t,n){for(var o=t.pointers.full.components.getParent(n),r=h(t,o);o&&e.isEmpty(r);)r=(o=t.pointers.components.getParent(o))?h(t,o):null;return o}function O(t,n,o){if(!e.isEmpty(o)&&n){var r,i,a=t.pointers.componentStructure.getModes(n),s=t.dal.full.get(a)||{};s.isHiddenByModes=!0,s.overrides=function(t,n){t=t||[];var o=e.find(t,(function(e){return w(e.modeIds,n)}));o||(o={modeIds:n},t.push(o));return o.isHiddenByModes=!1,t}(s.overrides,o),s.overrides=(r=s.overrides,i=o,e.filter(r,(function(e){return w(e.modeIds,i)}))),t.dal.full.set(a,s)}}function C(e,t){var n=i.getSospModeByPagesGroup(e,t);return n?n.modeId:function(e,t){var n=r.getViewMode(e),o=e.pointers.components.getMasterPage(n),i=E(0,o),a={pagesGroupId:"#".concat(t.id)};return y(e,i,o,d.SHOW_ON_SOME_PAGES,a,function(e,t){var n=e.dal.get(t);return"SOSP-".concat(n.groupName)}(e,t)),i}(e,t)}function D(e,t,n){if(!e.dal.isExist(n))throw new Error("componentModes: pagesGroup not exist");if(!function(e,t){return o.getComponentType(e,t)===p&&e.pointers.components.isInMasterPage(t)}(e,t))throw new Error("componentModes: cant show component only on some pages")}function w(t,n){return t.length===n.length&&e.intersection(t,n).length===t.length}function M(e,t){var n=_(e,t);return n?h(e,n):{}}function b(t,n){var o=function(t,n){var o=h(t,n);return e.isEmpty(o)?M(t,n):o}(t,n),r=A(t,n),i=e.findIndex(r,(function(t){return e.every(t.modeIds,(function(e){return o[e]}))}));if(i>=0){var a=t.pointers.componentStructure.getModesOverrides(n);return t.pointers.getInnerPointer(a,i)}return null}function R(t,n,o){if(!n)throw new Error("missing component pointer");o&&!e.isArray(o)&&(o=[o]);var r=A(t,n),i=e.find(r,(function(t){return e.isEqual(e.sortBy(t.modeIds),e.sortBy(o))}));if(i&&!e.isUndefined(i[l]))return!i[l];var a=t.dal.full.get(t.pointers.componentStructure.getModes(n));return!(a&&!e.isUndefined(a[l]))||!a[l]}function N(e,t){return e.dal.isExist(t)}function x(t,n,o,r){var i=a.getDesignItemByModes(t,n,o),s=t.pointers.components.getPageOfComponent(n).id,c=function(t,n){return t.dataChangeBehaviors&&(t.dataChangeBehaviors=e.reject(t.dataChangeBehaviors,(function(t){return e.includes(n,t.part)})),e.set(t,"background.mediaTransforms",{scale:1})),t}(i,r);a.addSerializedDesignItemToPage(t,s,c,c.id)}return{addModeDefinition:y,getComponentModeById:function(t,n,o){var r=f(t,n);return r&&o?e.find(r,{modeId:o}):null},getModeTypes:function(){return e.cloneDeep(d)},getComponentModes:f,getComponentModesByType:v,removeComponentMode:function(t,n,o){h(t,n)[o]&&P(t,n,o);var r=c.getType(t,n);u.executeHook(u.HOOKS.REMOVE_COMP_MODE.BEFORE,r,[t,n,o]);var i=t.pointers.componentStructure.getModesDefinitions(n),a=t.dal.full.get(i),s=e.reject(a,{modeId:o});t.dal.full.set(i,s)},getComponentActiveModeIds:h,resetAllActiveModes:function(e){e.siteAPI.resetAllActiveModes()},activateComponentMode:function(e,t,n){e.siteAPI.activateMode(t,n)},deactivateCompMode:P,createUniqueModeId:S,showComponentOnlyOnPagesGroup:function(e,t,n){D(e,t,n),O(e,t,[C(e,n)])},overrides:{getAllOverrides:A,removeAllOverrides:function(e,t){var n=e.pointers.componentStructure.getModesOverrides(t);e.dal.full.isExist(n)&&e.dal.full.set(n,[])},getOverridePointerByActiveModes:b,applyCurrentToAllModes:function(t,n){var o=t.pointers.componentStructure.getModes(n),r=t.dal.full.get(o),i=b(t,n);if(i){var a=e.omit(t.dal.full.get(i),["isHiddenByModes","modeIds"]);t.dal.full.merge(n,a)}T(t,n),r&&t.dal.full.set(o,e.assign(r,{isHiddenByModes:!1,overrides:[]}))},updateComponentOverrides:function(e,t,n){var o=e.pointers.componentStructure.getModesOverrides(t);e.dal.full.isExist(o)&&e.dal.full.set(o,n)},showComponentOnlyInModesCombination:O},getFirstAncestorActiveModes:M,getFirstAncestorWithActiveModes:_,isComponentDisplayedByDefault:function(t,n){var o=_(t,n);if(o){var r=e.head(v(t,o,d.DEFAULT));return!!r&&R(t,n,[r.modeId])}return!0},isComponentDisplayedInModes:R,isComponentCurrentlyDisplayed:N,shouldDeleteComponentFromFullJson:function(n,o){if(!N(n,o)&&n.dal.full.isExist(o))return!0;var r=_(n,o);if(!r)return!0;var i=e(h(n,r)).keys().head();return!t.modesUtils.isCompVisibleAfterRemovalFromMode(n.pointers,n.dal.full,o,r,i)},getModeToAddId:E,getComponentModesAvailableInView:function(e,t){return e.pointers.components.isMobile(t)?[m(e,t)]:f(e,t)},getCompMobileMode:m,removeDesignBehaviorsFromAllModes:function(t,n,o){var r=f(t,n);e.forEach(r,(function(e){x(t,n,[e.modeId],o)}))},getAllCompDesignItems:function(t,n){var o=t.pointers.componentStructure.getModes(n),r=t.pointers.components.getPageOfComponent(n),i=t.pointers.getInnerPointer(n,"designQuery"),s=t.dal.full.get(i).replace("#",""),c=a.getDesignItemById(t,s,r.id);if(!t.dal.full.isExist(o))return[c];var u=[],l=t.dal.full.get(o),p=l.overrides,d=l.definitions||[],g=e.filter(p,"designQuery");return g.length!==d.length&&u.push(c),u=u.concat(e.map(g,(function(e){return a.getDesignItemByModes(t,n,e.modeIds)})))},getMobileActiveModesMap:function(n,o){var r=n.pointers.components.getPage(o,t.constants.VIEW_MODES.DESKTOP),i=e.filter(f(n,r),(function(t){return"copyOverrides"===e.get(g,[t.type,"mobileConversionConfig"])})),a=e.map(n.pointers.components.getChildrenRecursively(r),e.partial(m,n));return e(a).concat(i).map("modeId").compact().uniq().map((function(e){return[e,!0]})).fromPairs().value()},removeSingleModeBehaviors:T,metaData:g,getModesIdsAndParentNeededToShowComp:function(t,n){var o,r;if(!t.dal.isExist(n)&&t.dal.full.isExist(n)){var i=t.pointers.componentStructure.getModes(n),a=t.pointers.full.components.getParent(n);for(t.dal.full.isExist(i)&&(o=t.dal.full.get(i),r=n);!o&&a;)t.dal.full.isExist(a)&&(i=t.pointers.componentStructure.getModes(a),t.dal.full.isExist(i)&&(o=t.dal.full.get(i),r=a)),o||(a=t.pointers.full.components.getParent(a));return{modeIdsToActivate:function(t){return e.get(e.find(t.overrides,{isHiddenByModes:!1}),"modeIds")}(o),parentWithModesDef:function(t,n){var o=t.pointers.componentStructure.getModes(n),r=t.dal.full.get(o),i=r&&r.definitions&&!e.isEmpty(r.definitions);if(i)return n;for(var a=t.pointers.full.components.getParent(n);!i&&a;)o=t.pointers.componentStructure.getModes(a),(i=(r=t.dal.full.get(o))&&r.definitions&&!e.isEmpty(r.definitions))||(a=t.pointers.full.components.getParent(a));return a}(t,r)}}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(42),r=n(58).urlUtils;function i(e){return o.getProperty(e,o.PROPERTY_NAMES.SITE_ID)}function a(e){return o.getProperty(e,o.PROPERTY_NAMES.ORIGINAL_TEMPLATE_ID)}function s(e){var n=e.pointers.general.getUrlFormat();return e.dal.get(n)||t.siteConstants.URL_FORMATS.HASH_BANG}function c(e,t){return s(e)===t}return{getUserInfo:function(e){return o.getProperty(e,o.PROPERTY_NAMES.USER_INFO)},isHttpsEnabled:function(e){return!!o.getProperty(e,o.PROPERTY_NAMES.IS_HTTPS_ENABLED)},getPublicUrl:function(e){return o.getProperty(e,o.PROPERTY_NAMES.PUBLIC_URL)},setPublicUrl:function(e,t){o.setProperty(e,o.PROPERTY_NAMES.PUBLIC_URL,t)},getSiteId:i,getMetaSiteId:function(e){return o.getProperty(e,o.PROPERTY_NAMES.META_SITE_ID)},getSiteOriginalTemplateId:a,getLanguage:function(e){return o.getProperty(e,o.PROPERTY_NAMES.LANGUAGE_CODE)||"en"},getCurrency:function(e){return o.getProperty(e,o.PROPERTY_NAMES.CURRENCY)},getTimeZone:function(e){return o.getProperty(e,o.PROPERTY_NAMES.TIME_ZONE)},getLocale:function(e){return o.getProperty(e,o.PROPERTY_NAMES.LOCALE)},getGeo:function(e){return o.getProperty(e,o.PROPERTY_NAMES.GEO)},isFirstSave:function(e){return o.getProperty(e,o.PROPERTY_NAMES.NEVER_SAVED)||!1},isTemplate:function(e){return i(e)===a(e)},getDocumentType:function(e){return o.getProperty(e,o.PROPERTY_NAMES.DOCUMENT_TYPE)},isSitePublished:function(e){var t=o.getProperty(e,o.PROPERTY_NAMES.IS_PUBLISHED);return null===t||t},getUrlFormat:s,isUsingUrlFormat:c,isUsingSlashUrlFormat:function(e){return c(e,t.siteConstants.URL_FORMATS.SLASH)},getPossibleUrlFormats:function(){return e.clone(t.siteConstants.URL_FORMATS)},pendingApps:function(e){return o.getProperty(e,o.PROPERTY_NAMES.PENDING_APPS)},isSiteFromOnBoarding:function(t){var n=t.siteAPI.getClientSpecMap(),r=e.find(n,{type:"onboarding"}),i=!0===e.get(r,"inUse",!1),a=o.getProperty(t,o.PROPERTY_NAMES.USE_ONBOARDING);return i&&(e.isUndefined(a)||a)},setUseOnBoarding:function(e,t){o.setProperty(e,o.PROPERTY_NAMES.USE_ONBOARDING,t)},getUserPermissions:function(e){return o.getProperty(e,o.PROPERTY_NAMES.PERMISSIONS)},isOwner:function(e){return o.getProperty(e,o.PROPERTY_NAMES.IS_OWNER)},getSiteToken:function(e){return o.getProperty(e,o.PROPERTY_NAMES.SITE_TOKEN)},getMediaSiteUploadToken:function(e){return o.getProperty(e,o.PROPERTY_NAMES.MEDIA_SITE_UPLOAD_TOKEN)},getMediaUserUploadToken:function(e){return o.getProperty(e,o.PROPERTY_NAMES.MEDIA_USER_UPLOAD_TOKEN)},getUserId:function(e){return o.getProperty(e,o.PROPERTY_NAMES.USER_ID)},getCurrentRevisionPublicUrl:function(e){var t=o.getProperty(e,o.PROPERTY_NAMES.PUBLIC_URL),n=o.getProperty(e,o.PROPERTY_NAMES.SITE_REVISION);return r.setUrlParams(t,{siteRevision:n})}}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A,T,_,O,C,D,w;e.exports=(o=n(0),r=n(5),i=n(18),n(3),a=n(4),s=n(16),c=n(73),n(74),u=n(28),l=n(2),p=n(32),d=n(34),g=n(100),f=function(e,t,n){var r=o.filter(e,(function(e){return function(e,t){return e.pendingAction===p.APP_ACTION_TYPES.REMOVE||s.isAppAutoRevoked(e)&&I(e,t)&&!h(e)&&!c.isPending(void 0,e)}(e,t)}));return n&&o.isBoolean(n.excludeHybrid)&&n.excludeHybrid?o.filter(r,(function(e){return s.isHybridAppAndEditorPartNotDismissed(e)})):r},m=function(e){return o.get(e,"appFields.platform.editorScriptUrl")&&!o.get(e,"appFields.platform.viewerScriptUrl")&&o.isEmpty(e.widgets)},v=function(e,t){return o.filter(e,(function(e){return S(e,t)||function(e){return e.notProvisioned&&m(e)}(e)}))},E=function(e,t,n){return s.hasEditorPlatformPart(e)&&(function(e,t){var n=e.appDefinitionId;return o.some(t,{appDefinitionId:n})}(e,n)||function(e,t){var n=!1;return e.forEach((function(e){return e.getIn(["data","document_data"]).forEach((function(e){var o=e.get("appId"),r=e.get("applicationId"),i=e.get("appDefinitionId"),a=e.get("appDefId");n=n||"".concat(o)==="".concat(t.applicationId)||"".concat(r)==="".concat(t.applicationId)||"".concat(r)==="".concat(t.appDefinitionId)||"".concat(i)==="".concat(t.appDefinitionId)||"".concat(a)==="".concat(t.appDefinitionId)}))})),n}(t,e))},y=function(e,t,n){return o.reduce(e,(function(e,o,r){return E(o,n,t)&&e.push(r),e}),[])},I=function(e,t){return s.isEditorOrHybridApp(e)&&s.isAppPermissionsIsGranted(e)&&!o.includes(o.invokeMap(t,"toString"),e.applicationId.toString())&&!m(e)},S=function(e,t){return s.isEditorOrHybridApp(e)&&s.isAppPermissionsIsRevoked(e)&&o.includes(o.invokeMap(t,"toString"),e.applicationId.toString())},h=function(e){return o.isBoolean(e.preInstalled)&&e.preInstalled},A=function(e,t,n){var r,a=i.getPageIdList(e,!0,!0),s=o.find(a,(function(i){var a=D(e,i);return r=o.find(a,(function(e){return e.applicationId.toString()===t.toString()&&n(e)})),!o.isUndefined(r)}));return s?{pageId:s,compId:r.id}:null},T=function(e,t){t=t||-1;var n=i.getPageIdList(e,!0,!0);return o.some(n,(function(n){return _(e,n,t)}))},_=function(e,t,n){var r=e.pointers.page.getPageData(t),i=e.dal.get(r);return o.some(i,(function(e){return o.get(e,"applicationId","").toString()===n.toString()}))},O=function(e){var t=e.get("data");if(!t)return null;var n=t.get("document_data").filter((function(e){return d.isTpaByDataType(e.get("type"))})).toJS();return o(n).map("applicationId").uniq().value()},w=function(e){if(!e||!e.size)return!1;var t=!1,n=e.getIn(["data","document_data"]);return n&&n.forEach((function(e){t=t||d.isTpaByDataType(e.get("type"))})),t},{getInstalledAppsOnPage:P=function(e,t){var n=e.pointers.page.getPageData(t),r=e.dal.get(n),i=o(r).filter((function(e){return d.isTpaByDataType(e.type)})).map("applicationId").uniq().value(),a=s.getAppsData(e);return o(a).pick(i).values().value()},getAllTpaCompsOnPage:D=function(e,t){var n=i.getPage(e,t),r=a.getTpaChildren(e,n);return o.map(r,(function(n){return o.assign(a.data.get(e,n),{id:n.id,pageId:t})}))},isMainSectionInstalled:function(e,t){var n=i.getPageIdList(e,!0);return o.some(n,(function(n){var r=D(e,n);return o.some(r,(function(e){return e.applicationId.toString()===t.toString()&&e.type===u.DATA_TYPE.TPA_SECTION}))}))},getWidgetsByAppId:function(e,t){var n=[],r=i.getPageIdList(e,!0,!0);return o.forEach(r,(function(r){var i=D(e,r);n=o.union(n,o.filter(i,(function(e){return e.applicationId.toString()===t.toString()&&e.type===u.DATA_TYPE.TPA_WIDGET})))})),o.isEmpty(n)?null:n},getAllAppCompsByAppId:function(e,t){var n=[];o.isArray(t)||(t=[t]),t=o(t).compact().invokeMap("toString").value();var r=i.getPageIdList(e,!0,!0);return o.forEach(r,(function(r){var i=D(e,r);n=o.union(n,o.filter(i,(function(e){return e&&e.applicationId&&o.includes(t,e.applicationId.toString())})))})),o.isEmpty(n)?null:n},isMultiSectionInstalled:function(e,t){var n=[];t=t||-1;var r=i.getPageIdList(e,!0);return o.forEach(r,(function(r){var i=D(e,r);n=o.union(n,o.filter(i,(function(e){return e&&e.applicationId&&e.applicationId.toString()===t.toString()&&e.type===u.DATA_TYPE.TPA_SECTION})))})),o.size(n)>1},getHiddenSections:function(e,t){var n=[],r=i.getPageIdList(e,!0);return o.forEach(r,(function(r){var i=D(e,r);n=o.union(n,o.filter(i,(function(e){return e.applicationId.toString()===t.toString()&&e.type===u.DATA_TYPE.TPA_MULTI_SECTION})))})),o.isEmpty(n)?null:n},getFirstAppCompPageId:function(e,t,n){var r=s.getAppDataByAppDefinitionId(e,t),i=o.get(r,"applicationId",null),a=i&&function(e,t){return A(e,t,(function(e){return e.type===u.DATA_TYPE.TPA_SECTION}))}(e,i);return!a&&n&&(a=function(e,t){var n=o.find(t.widgets,{default:!0});return n?A(e,t.applicationId,(function(e){return e.widgetId===n.widgetId})):null}(e,r)),a=i&&(a||A(e,i,(function(){return!0})))},isApplicationIdExists:T,isAppInstalledBy:function(e,t,n){var o=s.getAppDataByAppDefinitionId(e,t);if(o){var r=T(e,o.applicationId);return n?r&&!o.demoMode:r}return!1},isAppInstalledOnPage:function(e,t,n,o){var r=s.getAppDataByAppDefinitionId(e,n);if(r){var i=_(e,t,r.applicationId);return o?i&&!r.demoMode:i}return!1},getDeletedAppsIds:function(e){var t=s.getAppsData(e);if(r.isOpen("ds_publicMethodInit")){var n=function(e){var t=i.getPageIdList(e,!0,!0);return o.reduce(t,(function(t,n){var r=e.pointers.page.getPageData(n),i=e.dal.get(r),a=o(i).map((function(e){return o.get(e,"applicationId","").toString()})).compact().value();return t=t.concat(a)}),[])}(e);return o(t).filter((function(e){return!o.includes(n,e.applicationId.toString())&&s.isEditorOrHybridApp(e)})).map("applicationId").value()}return o(t).filter((function(t){return!T(e,t.applicationId)&&s.isEditorOrHybridApp(t)})).map("applicationId").value()},getAppsDefIdToProvisionOnSiteLoad:function(e){var t=s.getAppsData(e);return o(t).filter((function(t){return t.demoMode&&(T(e,t.applicationId)||g.isPlatformAppInstalled(e,t.appDefinitionId))})).map("appDefinitionId").value()},getAppsToGrantAndRevoke:function(e,t,n,o){var r=C(t,e,o);return{revoke:f(e,r,n),grant:v(e,r)}},getAllAppIdsInstalledOnPages:C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=[];return e.forEach((function(e){r=r.concat(O(e))})),o.union(r,y(t,n,e))},areTpaCompsWereUnInstalled:function(e,t,n,r){if(function(e){var t=!1;return e&&e.forEach((function(e){t=t||w(e)})),t}(n))return!0;var i=C(e)||[],a=C(t)||[],c=i.length===a.length&&!o.isEqual(i,a);return i.length>a.length||c||function(e,t,n,r){if(e.get(l.MASTER_PAGE_ID)){var i=o.find(r,{appDefinitionId:u.APP_DEF_ID.CHAT});return i&&s.isAppPermissionsIsGranted(i)&&!o.includes(t,i.appDefinitionId)&&!o.includes(n,i.appDefinitionId)}return!1}(t,i,a,r)},getAppsToGrantPermissions:v,getAppPages:function(e,t){var n=i.getPageIdList(e,!1,!1);return o(n).map((function(t){return o.merge(i.data.get(e,t),{pageId:t})})).filter({tpaApplicationId:parseInt(t,10)}).value()},getPagesByApplicationIds:function(e,t){var n=i.getPagesDataItems(e);return o.filter(n,(function(e){return o.includes(t,e.tpaApplicationId)}))},isAppComponentInstalled:function(e,t){var n=i.getPageIdList(e,!0,!0);return o.some(n,(function(n){var r=e.pointers.page.getPageData(n),i=e.dal.get(r);return o.some(i,{widgetId:t})}))},isSectionInstalledByTpaPageId:function(e,t,n){var r=i.getPagesDataItems(e);return o.some(r,{tpaApplicationId:t,tpaPageId:n})},isPlatformOnlyAppReinstalled:function(e,t,n){var r=o.filter(t,(function(t){return!!s.hasEditorPlatformPart(t)&&!0===o.get(t.permissions,"revoked")&&E(t,e,n)}));return!o.isEmpty(r)},isPlatformOnlyAppUninstalled:function(e,t,n){var r=o.filter(t,(function(t){return!!s.hasEditorPlatformPart(t)&&!1===o.get(t.permissions,"revoked")&&!E(t,e,n)}));return!o.isEmpty(r)},getInstalledDependentAppsData:function(e,t){var n=s.getAppData(e,t),r=o.get(n,"appDefinitionId"),a=s.getDependentApps(e,r);if(!o.isEmpty(a)){var c=function(e){var t=i.getPageIdList(e,!0,!0),n=o.reduce(t,(function(t,n){var r=o.map(P(e,n),"applicationId");return o.union(t,r)}),[]);return o.uniq(n)}(e);return o.reduce(a,(function(t,n){var r=s.getAppDataByAppDefinitionId(e,n);return function(e,t){return s.isAppAutoRevoked(t)?o.includes(e,o.get(t,"applicationId")):s.isAppActive(t)}(c,r)&&t.push(r),t}),[])}return[]}})},function(e,t){e.exports={Intents:{PLATFORM_WORKER:"PLATFORM_WORKER"},AppIds:{EDITOR:"editor"},MessageTypes:{WORKER_ALIVE:"workerAlive",SDK_READY:"sdkReady",SET_MANIFEST:"setManifest",TRIGGER_EVENT:"triggerEvent",ADD_APPS:"addApps",NOTIFY_APP_UPDATED:"notifyAppUpdated",VIEWER_INFO_CHANGED:"viewerInfoChanged",ADD_APP_COMPLETED:"addAppCompleted",APP_UPDATE_COMPLETED:"appUpdateCompleted",REMOVE_APP:"notifyRemoveApp",REMOVE_APP_COMPLETED:"notifyRemoveAppCompleted",MIGRATE:"notifyMigrate",MIGRATE_COMPLETED:"notifyMigrateCompleted",GET_INSTALLED_APPS:"getInstalledApps",SET_APP_PUBLIC_API:"setAppPublicAPI",GET_IS_PLATFORM_APP_INSTALLED:"getIsPlatformAppInstalled",ADD_ALL_APPS_COMPLETED:"addAllAppsCompleted"},EVENTS:{COMPONENT_DELETED:"componentDeleted"},Controller:{DEFAULT_STATE:"default"},Page:{DEFAULT_STATE:"default"},APPS:{DATA_BINDING:{appDefId:"dataBinding"},DYNAMIC_PAGES:{appDefId:"wix-code"},SANTA_MEMBERS:{appDefId:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9"},WIX_CODE:{appDefId:"675bbcef-18d8-41f5-800e-131ec9e08762"},META_SITE:{applicationId:"-666"}},APP_ACTION_TYPES:{REMOVE:"REMOVE",UPDATE:"UPDATE"},SESSION_STATE_TYPES:["wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateBoxFormState","wysiwyg.viewer.components.StateStripState"],CONTROLLER_TYPES:{APP_CONTROLLER:"platform.components.AppController",APP_WIDGET:"platform.components.AppWidget"}}},function(e,t){e.exports=a},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(0),r=n(33),i=n(1),n(2),a=n(30),s=n(28),c=n(3),{isSiteSaved:function(e){return!a.isFirstSave(e)},isTpaByCompType:function(e){return o.includes(s.COMP_TYPES,e)||o.includes(s.TPA_COMP_TYPES,e)},isTpaByAppType:i.coreTpaUtils.isTpaByAppType,isTpaByDataType:function(e){return o.includes(s.DATA_TYPE,e)},sendBIEvent:function(e,t,n){var o=e.pointers.components.getViewMode(e.siteAPI.getFocusedRootId()),i=e.pointers.components.getPage(e.siteAPI.getFocusedRootId(),o),a=e.pointers.components.getComponent(t.compId,i),s=c.getDataItem(e,a);r.common.bi.sendBIEvent(t,n,s,e.siteAPI.getClientSpecMap(),e.siteAPI.reportBI.bind(e.siteAPI))}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(13);function o(e){return t.getProperty(e,t.PROPERTY_NAMES.CLIENT_SPEC_MAP)||{}}function r(e,n){var r=o(e);r[n.applicationId]=n,t.setProperty(e,t.PROPERTY_NAMES.CLIENT_SPEC_MAP,r)}function i(t,n){var r=o(t);return e.find(r,{appDefinitionId:n})}return{registerAppData:r,updateAppInstance:function(e,t,n){var o=i(e,t);o&&(o.instance=n,r(e,o))},getAppData:function(e,t){return o(e)[t]||{}},getAppDataByAppDefinitionId:i,getAppsData:o,filterAppsDataByType:function(t,n){var r=o(t);return e.filter(r,{type:n})}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(126),o=n(6),r=n(35),i=n(189),a=n(190),s=n(100),c=n(476),u=n(192),l=n(16),p=n(98),d=n(477),g=n(478),f=n(32),m=n(193),v=n(5);function E(t,n){var o=l.getLargestApplicationId(t),i=p.generateAppFlowsLargestAppId(o),a={type:"Application",displayName:n.appDefinitionId,appDefinitionId:n.appDefinitionId,applicationId:i,editorArtifact:n.editorArtifact,appFields:{platform:{editorScriptUrl:e.get(n,"appFields.platform.editorScriptUrl")}}};return e.get(n,"appFields.platform.viewerScriptUrl")&&e.set(a,"appFields.platform.viewerScriptUrl",n.appFields.platform.viewerScriptUrl),r.registerAppData(t,a),a}function y(t){var n=r.getAppsData(t);return e.filter(n,h)}function I(t,n,o,r){r&&e.set(o,"eventPayload.historySnapshotId",t.runtimeConfig.nextHistorySnapshotId),i.triggerEvent(n,o)}function S(t,n,o,r){var i=n.id,a=t.pointers.platform.getPagesPlatformApplicationPointer(o),s=t.dal.full.get(a)||{};delete s[i],r&&e.set(s,i,!0),e.isEmpty(s)&&"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9"===o?t.dal.full.isExist(a)&&t.dal.full.remove(a):t.dal.full.set(a,s)}function h(t){return e.get(t,"appFields.platform.editorScriptUrl")&&l.isAppActive(t)}return{init:function(n,a,c,u){var p=i.isInitiated();!function(e){var t=e.pointers.platform.getPlatformPointer(),n=e.pointers.platform.getPagesPlatformApplicationsPointer();e.dal.full.set(t,{appState:{},appManifest:{},appPublicApiName:{}}),e.dal.full.isExist(n)||e.dal.full.set(n,{})}(n),i.init(n,a,c),function(n,o){var r=n.dal.get(n.pointers.general.getServiceTopology()),a=e(l.getAppsData(n)).filter(h).map((function(e){return t.specMapUtils.resolveEditorScriptUrl(e,{clientSpec:e,serviceTopology:r})})).map((function(t){return t.origin=e.get(o,"origin"),t.firstInstall=!1,t})).value();if(a.length){if(v.isOpen("platformPrefetchEditorScripts")){var s=a.map((function(e){return{id:e.applicationId,url:e.appFields.platform.editorScriptUrl}}));c=s,e.forEach(c,(function(e){var t="prefetch-editor-".concat(e.id);if(!window.document.getElementById(t)){var n=window.document.createElement("link");n.setAttribute("rel","prefetch"),n.setAttribute("href",e.url),n.setAttribute("id",t),window.document.head.appendChild(n)}}))}i.addApps(n,a)}var c}(n,u),n.siteAPI.registerToNotifyApplicationRequestFromViewerWorker((function(t,o){var i=e.get(s.getAppDataByAppDefId(n,t),"applicationId");I(n,i,o),function(t,n,o){if("instanceChanged"===e.get(o,"eventType")){var i=e.get(o,"eventPayload.instance");i&&r.updateAppInstance(t,n,i)}}(n,t,o)})),p||(o.registerHook(o.HOOKS.REMOVE.AFTER,d.getOnDeleteHook(I)),o.registerHook(o.HOOKS.METADATA.DUPLICATABLE,d.isDuplicatable),o.registerHook(o.HOOKS.METADATA.CAN_REPARENT,d.canReparent),o.registerHook(o.HOOKS.METADATA.ROTATABLE,d.isRotatable),o.registerHook(o.HOOKS.METADATA.FIXED_POSITION,d.canBeFixedPosition),o.registerHook(o.HOOKS.METADATA.RESIZABLE_SIDES,d.isResizableSides),o.registerHook(o.HOOKS.METADATA.LAYOUT_LIMITS,d.layoutLimitsHook),o.registerHook(o.HOOKS.METADATA.CONTAINABLE,d.isContainable),function(e){o.registerHook(o.HOOKS.PLATFORM.APP_UPDATED,g.removeGhostStructureForApp),o.registerHook(o.HOOKS.SAVE.SITE_SAVED,(function(t){t&&g.notifyOnFirstSaved(e,y(e),I)}))}(n)),(v.isOpen("sv_livePreview")||v.isOpen("sv_livePreview_forAppBuilder"))&&(m.init(n),m.autoRun(n))},setManifest:s.setManifest,registerToManifestAdded:s.registerToManifestAdded,initApp:function(t,n,o){var r=l.getAppDataByAppDefinitionId(t,n.appDefinitionId);r||(r=E(t,n)),i.isInitiated()&&(o&&(r.appUrlQueryParams=o),i.addApp(t,r));var a=function(t){function n(e){return"http://localhost:".concat(e.port,"/").concat(e.path)}function o(n){var o=t.siteAPI.getCurrentUrl(),r=e.get(o,["query",n]);return e(r||"").split(",").invokeMap("split",":").fromPairs().value()}var r=o("editorPlatformAppSources"),i=o("viewerPlatformAppSources"),a=r.id;if(a)return{appDefinitionId:a,appFields:{platform:{viewerScriptUrl:n(i),editorScriptUrl:n(r)}}}}(t);if(a){var s=E(t,a);i.addApp(t,s)}},remove:function(t,n){return i.notifyRemoveApp(n).then((function(o){if(!e.get(o,"success"))throw new Error("Failed to remove applicationId ".concat(n));var i=l.getAppData(t,n);r.registerAppData(t,e.defaults({pendingAction:f.APP_ACTION_TYPES.REMOVE},i))}))},migrate:function(t,n,o){var r=s.getAppDataByAppDefId(t,n);return r?i.notifyMigrate(r.applicationId,o).then((function(t){if(!1===e.get(t,"success"))throw new Error("Failed to migrate applicationId ".concat(r.applicationId))})):Promise.reject(new Error("Migration failed: Unknown appDefinitionId: ".concat(n)))},notifyApplication:I,getAPIForSDK:function(e,t){return a.getAPIForSDK(t)},getInstalledAppsData:function(e){return[s.getAppDataByAppDefId(e,f.APPS.DATA_BINDING.appDefId)]},pageHasPlatformApp:function(e,t,n){var o=e.pointers.platform.getPagesPlatformApplicationPointer(n);return!!(e.dal.full.get(o)||{})[t]},updatePagePlatformApp:S,removePageFromPlatformApps:function(t,n){var o=t.pointers.platform.getPagesPlatformApplicationsPointer(),r=t.dal.full.get(o);e.forEach(r,(function(e,o){S(t,n,o,!1)}))},getAppManifest:s.getAppManifest,getAppDataByAppDefId:s.getAppDataByAppDefId,getAppDataByApplicationId:s.getAppDataByApplicationId,getAppsContainer:i.getAppsContainer,getInstalledEditorApps:y,notifyAppsOnCustomEvent:function(e,t){var n=t.eventType,o=t.eventPayload;return c.notifyAppsOnCustomEvent(e,n,o,I)},registerAppToCustomEvents:function(e,t,n){return c.registerAppToEvents(t,n)},registerToPublicApiSet:s.registerToPublicApiSet,isPlatformAppInstalled:s.isPlatformAppInstalled,getPagesDataFromAppManifest:function(t,n,o,r,i){var a=s.getAppManifest(t,n),c=i?u.getState(t,i):"default",l=!!e.get(a,["pages",o,c]),p=e.get(a,["pages",o,l?c:"default"]),d=!!e.get(p,["defaultValues"]),g=d?e.get(p,"defaultValues"):p,f=d?e.get(p,"overrides"):e.get(a,["pages",o,"overrides"]);return e.isEmpty(f)?g:e.reduce(f,(function(t,n){return e.isMatch(r,n.condition)&&(e.isArray(n.override)?t=n.override:e.assign(t,n.override)),t}),g)},registerToAppsCompleted:function(e,t){i.registerToAppsCompleted(t)},getEditorSdkUrl:i.getEditorSdkUrl,setGhostStructure:function(t,n){var o=t.pointers.general.getGhostStructure(),r=t.dal.get(o);t.dal.set(o,e.defaults(n,r))}}}()},function(e){e.exports=JSON.parse('{"SITE_GAPS_MAP":{"eventId":356,"params":["above_header","above_page","above_footer"]},"MESH_MIGRATION":{"eventId":410,"params":["status","reasonid","pages_count"]},"MESH_MIGRATION_PRESAVE":{"eventId":424,"params":["status","reasonid","pages_count"]},"MESH_MIGRATION_WIZARD":{"eventId":426,"params":["status","reasonid","pages_count"]},"AUTO_SAVE_DIFFS_RESTORED":{"eventId":623,"params":[]},"FULL_DOCUMENT_SAVE_ATTEMPTED_AFTER_PARTIAL_FAILURE":{"eventId":632,"params":["endpoint"]},"DATA_ITEM_REFS_SAVE_DATAFIXER":{"src":38,"eventId":659,"params":{"dataType":"dataType","dataItemType":"dataItemType"}},"PLATFORM_API_CALL":{"endpoint":"platform","src":79,"evid":24,"params":["app_name","module","function","arguments","pageId"]},"SECTION_LAYOUT_MIGRATION_REPARENT":{"endpoint":"editor","src":38,"evid":753,"params":["component_id","z_index_changed","new_container_id"]},"SECTION_LAYOUT_MIGRATION_CLOSE_GAP":{"endpoint":"editor","src":38,"evid":754,"params":["gap_size","gap_type","is_closed"]},"SECTION_LAYOUT_MIGRATION_RUN":{"endpoint":"editor","src":38,"evid":757,"params":[]},"SOAP_ORDER_FIXER":{"endpoint":"editor","src":38,"evid":842,"params":["is_changed","soap_order_before","soap_order_after","components_attached_to_header"]},"EDITOR_PLATFORM_APPS_LOADED":{"endpoint":"platform","src":79,"evid":25,"params":["app_list","number_of_apps"]},"MOVE_STYLE_TO_PAGES_MIGRATION":{"endpoint":"document","src":40,"evid":101,"params":["mp_styles_before","mp_styles_after","page_styles_after","errorReason","duration","esi","dsOrigin"]},"REMOVE_BADLY_DUPLICATED_PAGES":{"endpoint":"document","src":40,"evid":104,"params":["numberOfInvalidPages","errorReason","duration","esi","dsOrigin"]},"PREVIEW_SITE_READY":{"endpoint":"document","eventId":103,"src":40,"params":["dsOrigin","esi"]},"DOCUMENT_SERVICES_LOADED":{"endpoint":"document","eventId":102,"src":40,"params":["dsOrigin","esi"]},"DEPRECATED_PUBLIC_API_CALL":{"endpoint":"document","eventId":105,"src":40,"params":["methodName","dsOrigin"]},"FIX_MISSING_COMPONENT_STYLE":{"endpoint":"document","eventId":106,"src":40,"params":["dsOrigin","componentType","style"]},"INPUT_WRONG_PLACEHOLDER":{"eventId":535,"src":42,"params":["comp_id"]}}')},function(e,t,n){e.exports=function(){var e=n(0),t=n(395),o=n(396),r=n(397),i=n(398),a=n(25),s=n(2),c=n(3),u=n(1),l=["sourceId","type","name"],p=["targetId","type","name","part","viewMode"],d=["action","targetId","name","duration","delay","params","playOnce","type","viewMode"];function g(){return e.sortBy(e.keys(o.getSchema()))}function f(n,i,a){var s=r;if(i){var c=e.last(i.split(".")),u=t.getSchema()[c]||t.getSchema().AllComponents;s=e.isEmpty(u)?[]:e.filter(s,(function(t){return e(t.groups).difference(u).isEmpty()}))}return a&&(s=e.filter(s,(function(t){return e(o.getSchema()[a].groups).difference(t.groups).isEmpty()}))),e(s).map("name").sortBy().value()}function m(e,t){if(u.displayedOnlyStructureUtil.isRepeatedComponent(t.id)){var n=u.displayedOnlyStructureUtil.getRepeaterTemplateId(t.id),o=e.pointers.components.getPageOfComponent(t);return e.pointers.full.components.getComponent(n,o)}return t}function v(t,n){var o=P(t,n);return e.isEmpty(o)?null:o}function E(t,n){return e.get(n,"type")===s.VIEW_MODES.MOBILE&&t.dal.isExist(y(n))}function y(t){return e.defaults({type:s.VIEW_MODES.DESKTOP},t)}function I(t){return"animation"===e.get(t,"type","animation")}function S(t,n){return e.isEqual(e.pick(t,p),e.pick(n,p))}function h(t,n){return o=t.action,r=n.action,e.isEqual(e.pick(o,l),e.pick(r,l))&&S(t.behavior,n.behavior);var o,r}function P(e,t){var n=m(e,t),o=c.getBehaviorsItem(e,n);return o?JSON.parse(o):[]}function A(t,n,o){var r=JSON.stringify(o);e.isEmpty(o)?c.removeBehaviorsItem(t,n):c.updateBehaviorsItem(t,n,r)}function T(e,t){var n=e.pointers.components.getMasterPage(t),o=e.pointers.components.getComponent(s.COMP_IDS.PAGE_GROUP,n),r=c.getPropertyItemPointer(e,o);return e.pointers.getInnerPointer(r,"transition")}function _(){return e.sortBy(e.map(i,"legacyName"))}function O(e,t,n,o){var r=e.pointers.components;return e.siteAPI.previewAnimation(t.id,r.getPageOfComponent(t).id,n,o)}function C(e,t,n){e.siteAPI.stopPreviewAnimation(t,n)}return{getActionNames:g,getActionDefinition:function(t,n){if(e.has(o.getSchema(),n))return{type:"comp",name:n}},getBehaviorDefinition:function(t,n){return e.cloneDeep(e.find(r,{name:n}))},getBehaviorNames:f,isBehaviorable:function(t,n,o){var r=a.getType(t,n);return!e.isEmpty(f(0,r,o))},getComponentBehaviors:v,setComponentBehavior:function t(n,o,r,i){i&&(r.action=i);var c=function(t,n,o){var r={type:"ok",message:""},i=f(0,o);if(e.includes(i,n.name))if(e.isPlainObject(n))if(e.isEmpty(n))r.type="error",r.message+="Behavior can not be empty\n";else{var a=g();e.includes(a,n.action)||(r.type="error",r.message+="Action of type ".concat(n.action," does not exist\n"));var c=f(0,null,n.action);e.includes(c,n.name)||(r.type="error",r.message+="Behavior of type ".concat(n.name," is not allowed on action ").concat(n.action)),I(n)&&e.isNaN(Number(n.duration))&&e.isNaN(Number(n.params.duration))&&(r.type="error",r.message+="Animation duration must be a number\n"),I(n)&&e.isNaN(Number(n.delay))&&e.isNaN(Number(n.params.delay))&&(r.type="error",r.message+="Animation delay must be a number\n"),!n.viewMode||e.isString(n.viewMode)&&e.includes(s.VIEW_MODES,n.viewMode)||(r.type="error",r.message+="Behavior viewMode must be undefined or a string: 'DESKTOP', 'MOBILE' or 'BOTH' \n"),n.params&&!e.isPlainObject(n.params)&&(r.type="error",r.message+="Animation params property are optional, but if they exist params must be an object\n"),n.playOnce&&!e.isBoolean(n.playOnce)&&(r.type="error",r.message+="Animation playOnce property is optional, but if is exists playOnce must be a boolean\n");var u=e.difference(e.uniq(e.keys(n).concat(d)),d);e.isEmpty(u)||(r.type="error",r.message+="The keys [".concat(u,"] are not allowed values of a Behavior"))}else r.type="error",r.message+="Each behavior should be an object\n";else r.type="error",r.message+="Behavior of type ".concat(n.name," is not allowed on component of type ").concat(o);return r}(0,r,a.getType(n,o));if("error"===c.type)throw new Error(c.message);"screenIn"===r.action&&e.set(r,["params","doubleDelayFixed"],!0),E(n,o)&&t(n,y(o),r,i);var u=v(n,o)||[],l=e.partial(S,r);A(n,o,(u=e.reject(u,l)).concat(r))},removeComponentSingleBehavior:function t(n,o,r,i){E(n,o)&&t(n,y(o),r,i);var a=v(n,o),s={action:i};e.isString(r)?s.name=r:e.isObject(r)&&(s=e.assign(s,r)),A(n,o,a=a?e.reject(a,s):[])},removeComponentBehaviors:function(e,t){A(e,t,[])},removeComponentsBehaviorsWithFilter:function t(n,o,r){E(n,o)&&t(n,y(o),r);var i=v(n,o);A(n,o,i=i?e.reject(i,r):[])},updateBehavior:function(t,n,o,r,i){var a=m(t,n),s=P(t,a),c={action:e.defaults({sourceId:a.id},o),behavior:e.defaults({targetId:r.id},i)},u=e.partial(h,c);A(t,a,e.reject(s,u).concat(c))},removeBehavior:function(t,n,o,r,i){var a=m(t,n),s=P(t,a),c={action:e.defaults({sourceId:a.id},o),behavior:e.defaults({targetId:r.id},i)},u=e.partial(h,c),l=e.reject(s,u);l.length!==s.length&&A(t,a,l)},getBehaviors:P,hasBehavior:function(t,n,o,r,i){var a=m(t,n),s=P(t,a),c={action:e(a&&{sourceId:a.id}).defaults(o).pick(l).value(),behavior:e(r&&{targetId:r.id}).defaults(i).pick(p).value()};return e.some(s,c)},getPageTransitionsNames:_,getPagesTransition:function(e){var t=T(e,s.VIEW_MODES.DESKTOP);return e.dal.get(t)},setPagesTransition:function(t,n){if(!e.includes(_(),n))throw new Error("No such transition ".concat(n));var o=T(t,s.VIEW_MODES.DESKTOP);t.dal.set(o,n)},executeAction:function(e,t){e.siteAPI.executeAction(t)},deprecatedPreviewAnimation:function(e,t,n,o,r){return O(e,t,n,r)},deprecatedStopPreviewAnimation:function(e,t,n){C(e,n)},previewAnimation:O,previewTransition:function(t,n,o,r,i){var a=t.pointers.components,s=e.isArray(n)?n:[n],c=e.isArray(o)?o:[o],u=s.length>0?s[0]:c[0];return t.siteAPI.previewTransition(e.map(s,"id"),e.map(c,"id"),a.getPageOfComponent(u).id,r,i)},stopPreviewAnimation:C,executeAnimationsInPage:function(e){e.siteAPI.reloadPageAnimations()},stopAndClearAllAnimations:function(e){e.siteAPI.stopAndClearAllAnimations()}}}()},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(0),r=n(26),i=n(1),a=n(429),s=n(119),c=n(2),{runMobileConversionOnPage:function(e,t){a.mobileConversion({ps:e}).runMobileConversionOnPage(t)},runMobileConversionOnAllPages:function(e,t){var n=o.get(t,"heuristicStrategy");return"minimal"===n?a.mobileConversion({ps:e}).syncMobileSite():a.mobileConversion({ps:e,heuristicStrategy:n}).runMobileConversionOnAllPages()},prepareForConversion:function(e,t){var n=e.dal.get(e.pointers.page.getAllPagesPointer()),r=o.mapValues(n,(function(t,n){return e.dal.get(e.pointers.page.getPagePointer(n))})),s=a.mobileConversion({ps:e});return t&&(r=o.pick(r,t)),o.mapValues(r,(function(e,t){var n=e.structure.DESKTOP,o=i.mobileUtils.buildDeepStructure(n[t],n);return s.prepareConversion(o)}))},applyConversion:function(e,t){var n=o.mapValues(t,r.conversionUtils.getChildren);a.mobileConversion({ps:e}).applyConvertedComponentsMap(n)},execConversion:function(e,t,n){var r={ps:e,heuristicStrategy:n},i=a.mobileConversion(r);o.forEach(t,(function(e){return i.executeConversion(e)}))},runMobileMergeOnPage:function(e,t,n,o){a.mobileConversion({ps:e}).runMobileMergeOnPage(t,n,o)},addMobileOnlyComponent:function(e,t,n){var o=e.pointers.page.getComponentsMapPointer("masterPage",c.VIEW_MODES.MOBILE),s=e.dal.get(o,!0),u=i.mobileUtils.buildDeepStructure(s.masterPage,s);u.mobileComponents=u.children;var l=a.mobileConversion({ps:e});l.prepareConversion(u),r.mobileOnlyComponents.addComponent(u,t),l.applyConvertedComponentsToPage(r.conversionUtils.getChildren(u),u.id,n)},syncMobileSite:function(e){a.mobileConversion({ps:e}).syncMobileSite()},runPartialConversionAllPages:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.config.disableMobileConversion?a.mobileConversion({ps:e}).syncMobileSite():a.mobileConversion({ps:e}).runMobileMergeOnAllPages(t)},inspect:function(e,t){return a.mobileConversion({ps:e}).inspect(t)},getComponentsOrder:function(e,t){return a.mobileConversion({ps:e}).getComponentsOrder(t)},shouldCreateMobilePreset:s.shouldCreateMobilePreset,createMobilePreset:s.createMobilePreset})},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(35),i=n(46),a=n(22),{getExistingWixCodeAppFromPS:function(e){return o.head(r.filterAppsDataByType(e,a.WIX_CODE_SPEC_TYPE))},getExistingWixCodeAppFromSnapshot:function(e){var t=i.extractFromSnapshot(e,["rendererModel","clientSpecMap"],!0);return o.find(t,{type:a.WIX_CODE_SPEC_TYPE})}})},function(e,t){e.exports=s},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(153),i=n(1),a=r,{getRevertibleMetaDataInfo:function(){return o.filter(a,{revertible:!0})},getNonRevertibleMetaDataInfo:function(){return o.filter(a,{revertible:!1})},getProperty:function(e,t){var n=e.pointers.metadata.getSiteMetaDataPointer(t);return n?e.dal.get(n):(i.log.error("SiteMetaData getProperty was called with an invalid metadata property"),null)},setProperty:function(e,t,n){var o=e.pointers.metadata.getSiteMetaDataPointer(t);o?e.dal.set(o,n):i.log.error("SiteMetaData setProperty was called with an invalid metadata property")},PROPERTY_NAMES:o.mapValues(a,(function(e,t){return t}))})},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),o=n(32),r=n(15),i=n(6),a=n(85),s="platform.components.AppController",c="platform.components.AppWidget";function u(e,t){var n=r.getComponentType(e,t);if(n!==s&&n!==c)throw new Error("controllerRef component type is invalid - should be an AppController or AppWidget")}function l(e,n){return u(e,n),t.getDataItem(e,n)}function p(e,t){var n=l(e,t);return n.settings?JSON.parse(n.settings):{}}function d(e,n,o){u(e,n),t.updateDataItem(e,n,o)}function g(e,t,n){var o;try{o=JSON.stringify(n)}catch(e){throw new Error("Invalid settings item - should be JSON stringifiable")}d(e,t,{settings:o})}function f(e,t){var n=e.pointers.platform.getAppStatePointer();return e.dal.get(e.pointers.getInnerPointer(n,t))||o.Controller.DEFAULT_STATE}function m(t,n,r,i){var a=f(t,n),s=t.pointers.platform.getControllerStageDataPointer(i,r,a),c=t.dal.get(s);if(a===o.Controller.DEFAULT_STATE)return c;var u=t.pointers.platform.getControllerStageDataPointer(i,r,o.Controller.DEFAULT_STATE),l=t.dal.get(u);return e.defaults({},c,l)}function v(e,t){if(t){var n=l(e,t),o=n.applicationId,r=n.controllerType;return m(e,t.id,r,o)}}return{setSettings:g,getSettings:p,setSettingsIn:function(t,n,o,r){var i=p(t,n);e.set(i,o,r),g(t,n,i)},getSettingsIn:function(t,n,o){var r=p(t,n);return e.get(r,o)},getName:function(t,n){return e.get(l(t,n),"name")},setName:function(e,t,n){d(e,t,{name:n})},setState:function(t,n){var o=t.pointers.platform.getAppStatePointer();e.forEach(n,(function(n,r){e.forEach(n,(function(e){t.dal.full.set(t.pointers.getInnerPointer(o,e.id),r)}))})),i.executeHook(i.HOOKS.PLATFORM.AFTER_CONTROLLERS_SET_STATE,"controller",[n])},getState:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return f(e,t.id)})),getControllerStageDataByControllerRef:v,getConnectedComponentStageData:function(t,n){var o=a.getPrimaryConnection(t,n);if(o){var r=v(t,o.controllerRef),i=e.get(r,["connections",o.role]),s=e.get(r,["connections","*"]);return e.defaults(i,s)}},getControllerStageData:m}}()},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(1),i=n(87),a=["MAIN_MENU","CUSTOM_MAIN_MENU","CUSTOM_MENUS","masterPage"],{isHorizontallyDocked:r.layoutUtils.isHorizontallyDocked,isVerticallyDocked:r.layoutUtils.isVerticallyDocked,getBoundingY:r.boundingLayout.getBoundingY,getBoundingX:r.boundingLayout.getBoundingX,getBoundingHeight:r.boundingLayout.getBoundingHeight,getBoundingWidth:r.boundingLayout.getBoundingWidth,getBoundingLayout:i.getBoundingLayout,getLayoutFromBoundingLayout:function(e,t,n){return r.boundingLayout.getLayoutFromBoundingLayout(t,n)},canMoveDataItemToAnotherPage:function(e,t){switch(t){case r.constants.DATA_TYPES.data:return n=e.id,!o.includes(a,n);case r.constants.DATA_TYPES.theme:return"system"!==e.styleType}var n;return!0},ensureWithinLimits:function(e,t,n){if((t=o.isUndefined(t)?e:t)>(n=o.isUndefined(n)?e:n))throw new Error("min limit is greater than max limit");return e<t?t:e>n?n:e},getChildrenToPreserveProportionsByType:function(e,t,n,r){return o.reject(n,(function(n){var i=t.getComponentType(e,n.component);return o.includes(r,i)}))},getComponentLayout:i.getComponentLayout,getPositionAndSize:i.getPositionAndSize})},function(e,t){e.exports=c},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(72);function r(n){return new Promise((function(r,i){n.success=r,n.error=function(e,t){var r=o.build({errorType:t,xhr:e});r.request=n,i(r)},n.data&&!e.isString(n.data)&&(n.data=JSON.stringify(n.data)),t.ajaxLibrary.ajax(n)}))}return{sendRequest:function(e,t,n){var o={type:t,url:e,dataType:"json",contentType:"application/json"};return n&&(o.data=JSON.stringify(n)),r(o)},sendRequestObj:r,extractFromSnapshot:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.getIn(t);return n&&(o=o.toJS()),o},requestTypes:{POST:"POST",GET:"GET",PUT:"PUT",DELETE:"DELETE"}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(48),o=n(56),r=n(40),i=n(46),a=n(22),s=function(e){return{getBaseUrl:function(){var t=e.pointers.general.getServiceTopology();return e.dal.get(e.pointers.getInnerPointer(t,"wixCodeMonitoringHubUrl"))},getAppId:function(){return o.getGridAppId(e)},getMetaSiteId:function(){var t=e.pointers.general.getMetaSiteId();return e.dal.get(t)},getInstanceId:function(){var t=r.getExistingWixCodeAppFromPS(e);return t?t.instanceId:""}}},c=function(e){return{getBaseUrl:function(){return e.getIn(["serviceTopology","wixCodeMonitoringHubUrl"])},getAppId:function(){return i.extractFromSnapshot(e,a.paths.GRID_APP_ID)},getMetaSiteId:function(){return i.extractFromSnapshot(e,["rendererModel","metaSiteId"])},getInstanceId:function(){var t=r.getExistingWixCodeAppFromSnapshot(e);return t?t.instanceId:""}}};function u(n,o){var r=function(t,n){var o={appId:t.getAppId()||"",params:{metaSiteId:t.getMetaSiteId(),instanceId:t.getInstanceId()}};return e.merge({},o,n)}(n,o),i=n.getBaseUrl();return t.log.trace(r,i)}return{levels:t.log.levels,trace:function(e,t){return u(s(e),t)},traceWithSnapshot:function(e,t){return u(c(e),t)}}}()},function(e,t){e.exports=u},function(e,t,n){e.exports=function(){var e=n(0),t=n(24),o=n(209),r={String:1,"wix:Date":2,"wix:RichText":3,"String|AsPrice":4,"wix:Image":5,"wix:Video":6,"String|AsButton":7},i=/(.*)_\d+$/;function a(t){t&&t.fields&&(t.fields=e.sortBy(t.fields,(function(t){return"title"===t.name?Number.MIN_VALUE:r[function(t){var n=t.metadata&&t.metadata.showAsHint;return e.compact([t.type,n]).join("|")}(t)]||Number.MAX_VALUE})))}function s(n){var o=n.dal.getByPath(t.getBaseTypesPath());return e.forEach(o,a),o}function c(n,o){var r=i.exec(o),a=r?r[1]:o,s=function(t,n){var o=new RegExp("".concat(t,"_(\\d+)$"));return e(n).map((function(t){var n=o.exec(t);return n?e.parseInt(n[1]):null})).concat(0).max()+1}(a,n.dal.getKeysByPath(t.getBaseTypesPath()));return"".concat(a,"_").concat(s)}return{getType:function(e,n){var o=e.dal.getByPath(t.getTypePath(n));return a(o),o},getAllTypes:s,createType:function(n,r){r=r||{};var i={};return i.name=c(n,r.name||"type"),i.displayName=function(t,n){var r=e.map(s(t),"displayName"),i=n;for(;e.includes(r,i);)i=o.incNumberSuffix(i);return i}(n,r.displayName||i.name),i.version=0,i.baseTypes=r.baseTypes||[],i.fields=r.fields||[],n.dal.full.setByPath(t.getTypePath(i.name),i),function(e,n){e.dal.full.setByPath(t.getBaseItemsPath(n),{})}(n,i.name),i.name}}}()},function(e,t,n){var o;e.exports=(o=n(253),n(23).register("documentServices","error",o),o)},function(e,t){e.exports=l},function(e,t,n){e.exports=(n(5),{disableable:!0})},function(e,t,n){var o;e.exports=(o=n(19).services.schemasService,function(e){return!!o.isSystemStyle(e)})},function(e,t,n){e.exports=function(){var e=n(0),t=n(6),o=n(1),r=n(29),i=n(93),a=n(2),s=!0;function c(e){var t=e.pointers.general.getCommittedMobilePages();e.dal.set(t,null)}function u(t,n){var o=e.keys(n);return e.pickBy(t,(function(t,n){return e.includes(o,n)}))}function l(t){var n=t.pointers.page.getNonDeletedPagesPointers(s);return i.hasMobileStructure(t)?e.filter(n,(function(e){return t.dal.wasValueChangedSinceLastSnapshot(a.SNAPSHOT_TAGS.MOBILE_MERGE,e)})):n}function p(t,n){var i=t.pointers.page.getPagePointer(n),a=r.getMobileActiveModesMap(t,n),s=e.set({},n,a);return o.fullToDisplayedJson.getDisplayedJson(t.dal.full.get(i),s,n).structure}return{initialize:function(e){t.unregisterHooks([t.HOOKS.PUBLISH.BEFORE]),t.registerHook(t.HOOKS.PUBLISH.BEFORE,(function(){return c(e)})),e.dal.full.immutable.getLastSnapshotByTagName(a.SNAPSHOT_TAGS.MOBILE_MERGE)||e.dal.takeSnapshot(a.SNAPSHOT_TAGS.MOBILE_MERGE)},getAggregatedPages:function(t){var n=function(t){var n=l(t);return e.transform(n,(function(n,o){var r=o.id,i=p(t,r);e.set(n,r,i)}),{})}(t);if(e.isEmpty(n))return null;var r=t.pointers.general.getCommittedMobilePages(),i=t.dal.get(r)||{};return e.forOwn(n,(function(t,n){if(!i[n]){var r=o.objectUtils.cloneDeep(t);e.set(r,r.components?"components":"children",t.mobileComponents||[]),i[n]=r}})),t.dal.set(r,i),{desktop:n,mobile:u(i,n)}},getChangedPagesPointers:l,getPage:p,commitResults:function(e){c(e),e.dal.takeSnapshot(a.SNAPSHOT_TAGS.MOBILE_MERGE)},getCommittedMobileComponent:function(t,n,r){if(!n||!r)return null;var i=t.pointers.general.getCommittedMobilePages(),a=t.dal.get(i),s=e.get(a,n);return e.isEmpty(s)?t.dal.full.get(r):o.dataUtils.findCompInStructure(s,!1,(function(e){return e.id===r.id}))}}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E;e.exports=(o=n(0),r=n(10),i={},a={},s={},c={},u={},l={},p={},d={},g={},f={},m=[],v=[],{supportedEvents:["COMPONENT_DELETED","EDIT_MODE_CHANGE","SITE_PUBLISHED","SETTINGS_UPDATED","WINDOW_PLACEMENT_CHANGED","THEME_CHANGE","DEVICE_TYPE_CHANGED","STYLE_PARAMS_CHANGE","SITE_SAVED","ON_MESSAGE_RESPONSE","PUBLIC_DATA_CHANGED"],unRegisterHandlers:function(e,t){i=o.omit(i,t),a=o.omit(a,t),s=o.omit(s,t),c=o.omit(c,t),u=o.omit(u,t),l=o.omit(l,t),d=o.omit(d,t),g=o.omit(g,t),o.isUndefined(p[t])||(r.events.onChange.removeListener(e,p[t]),p=o.omit(p,t))},registerEditModeChangeHandler:function(e,t){i[e]=t},registerSettingsUpdatedHandler:function(e,t){s[e]=t},registerWindowPlacementChangedHandler:function(e,t){c[e]=t},registerSitePublishedHandler:function(e,t){u[e]=t},registerDeviceTypeChangeHandler:function(e,t){l[e]=t},registerSiteSavedHandler:function(e,t){d[e]=t},registerCompLoaded:function(e){o.forEach(v,(function(t){e({compPointer:t})})),m.push(e)},callCompLoaded:function(e){v.push(e),o.forEach(m,(function(t){t({compPointer:e})}))},editModeChange:function(e){o.forEach(i,(function(t){t(e)}))},sitePublished:function(){o.forEach(u,(function(e){e()}))},siteSaved:function(){o.forEach(d,(function(e){e()}))},deviceTypeChange:function(e){o.forEach(l,(function(t){t(e)}))},triggerOnWindowPlacementChanged:function(e){var t=e.data.placement,n=e.compId,o=c[n];o&&o(t)},registerThemeChangeHandler:function(e,t,n){if(o.isUndefined(p[t])){var i=r.events.onChange.addListener(e,n);p[t]=i}},callSettingsUpdateCallback:function(e,t){var n=s[e];n&&n(t)},registerDeleteCompHandler:function(e,t){g[e]=t},executeDeleteHandler:function(e){E(e)&&(g[e](),delete g[e])},isDeleteHandlerExists:E=function(e){return!o.isUndefined(g[e])},registerPublicDataChangedHandler:function(e,t,n){f[t]||(f[t]={}),f[t][e]=n},callPublicDataChangedCallback:function(e,t,n){var r=f[t],i=o.get(r,e);i&&i(n)},callPublicDataChangedCallbackForAllAppRegisteredComps:function(e,t){var n=f[e];o.forEach(n,(function(e){e(t)}))},registerEditorEventHandler:function(e,t){a[e]=t},triggerEditorEvent:function(e){o.forEach(a,(function(t){t(e)}))}})},function(e,t,n){var o;e.exports=(o=n(6),{setWixCodeModel:function(e,t){var n=t.gridAppId,r=e.pointers.wixCode.getGridAppId();e.dal.set(r,n),o.executeHook(o.HOOKS.AUTOSAVE.ACTION)},getGridAppId:function(e){var t=e.pointers.wixCode.getGridAppId();return e.dal.get(t)}})},function(e,t,n){e.exports=n(37)},function(e,t){e.exports=p},function(e,t,n){e.exports=function(){var e=n(0),t=n(19).services.schemasService;function o(n,r,i){if(!n)return null;if(n.$ref)return o(t.getSchema(i,n.$ref),r,i);if(n.properties)return n.properties[r];if(n.allOf){var a=e.find(n.allOf,(function(e){return o(e,r,i)}));return a&&o(a,r,i)}}var r=function(t,n,r,i){var a=o(n,r,t);return!a||e.isString(a)?a&&a===i||!1:("list"===i&&(i="array"),e.includes(a.pseudoType,i)||e.includes(a.type,i)||a.type===i)};return{isOfType:function(e,n,o,i){var a=t.getSchema(e,n);return r(e,a,o,i)},getPropertyDefinition:o,executeForDataItemRefs:function(n,o,i){var a=t.getSchema(n,o.type);a&&e.forOwn(o,(function(t,o){return r(n,a,o,"ref")?i(t):r(n,a,o,"refList")?e.map(t,(function(e){return i(e)})):void 0}))}}}()},function(e,t,n){e.exports=function(){var e=n(1);function t(t){return e.guidUtils.getUniqueId(t,"-")}function o(){return t("dataItem")}function r(){return t("propItem")}return{generateNewId:function(e){switch(e){case"data":return o();case"props":case"properties":return r();case"design":return o();case"behaviors":return t("behavior");case"connections":return t("connection");case"style":case"mobileHints":case"layout":case"breakpoints":return t(e);default:return null}},generateNewDataItemId:o,generateNewPropertiesItemId:r,generateNewDesignId:function(){return t("design")}}}()},function(e,t,n){e.exports=function(){var e=n(0);function t(e){var t=e.pointers.routers.getRoutersConfigMapPointer();return e.dal.get(t)}function o(n,o){var r=t(n);return e.findKey(r,{prefix:o})}function r(e,t){var n=e.pointers.routers.getRouterPointer(t);return e.dal.get(n)}return{get:{all:t,byApp:function(n,o){return e.filter(t(n),{appDefinitionId:o})},byRef:function(e,t){var n=e.dal.get(t);return n&&n.config&&(n.config=JSON.parse(n.config),n.id=o(e,n.prefix)),n||null},byId:r,byPrefix:function(e,t){var n=o(e,t);return n&&e.pointers.routers.getRouterPointer(n)},byPage:function(n,o){var r=e.get(n.dal.get(o),"id"),i=t(n),a=e.findKey(i,(function(t){return t.pages&&e.includes(e.values(t.pages),r)}));return a&&n.pointers.routers.getRouterPointer(a)}},getRouterDataForPageIfExist:function(n,o){o=e.startsWith(o,"#")?o.substr(1):o;var i=t(n),a=e.findKey(i,(function(t){return t.pages&&e.includes(e.values(t.pages),o)}));return a?e.assign(r(n,a),{routerId:a}):null}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(21),r={},i={};var a=function(e,t){return e.pointers.data.getDataItemFromMaster(t)},s=function(e,t){return e.pointers.data.getDataItemFromMaster(t)};function c(e){return(o.getPageData(e,t.siteConstants.MASTER_PAGE_ID)||{}).appStudioData}function u(t){var n=c(t)||{};return e.map(n.widgets,(function(e){var n=a(t,e.id),o=t.dal.get(n);return{pointer:n,name:o.name,variations:o.variations}}))}function l(t,n){var o=u(t);return e.find(o,(function(e){var o=t.dal.get(e.pointer);return o&&o.rootCompId==="#".concat(n)}))||e.get(p(t,n),"widget")}function p(t,n){var o,r=u(t),i=e.find(r,(function(r){return o=e.find(r.variations,(function(o){var r=t.pointers.data.getDataItemFromMaster(e.replace(o,"#","")),i=t.dal.get(r);return e.get(i,"rootCompId")==="#".concat(n)}))}));return{variationId:o,widget:i}}function d(t,n){return!!o.doesPageExist(t,n)&&(e.isUndefined(i[n])&&(i[n]=Boolean(e.get(p(t,n),"variationId"))),i[n])}return{isWidgetPage:function(t,n){return!!o.doesPageExist(t,n)&&(e.isUndefined(r[n])&&(r[n]=Boolean(l(t,n))),r[n]||d(t,n))},isVariationPage:d,getWidgetPointerByWidgetId:a,findWidgetByPageId:l,findVariationByPageId:p,getAllWidgets:u,getAppStudioData:c,getAppStudioMetaData:function(t){var n=c(t);return n?e.pick(n,["name","description"]):void 0},getAllSerializedWidgets:function(t){return e.map(u(t),(function(n){var o=t.dal.get(n.pointer),r=e.pick(o,"name","widgetApi","rootCompId");return r.variations=e.map(o.variations,(function(n){var o=t.pointers.data.getDataItemFromMaster(e.replace(n,"#","")),r=t.dal.get(o);return e.pick(r,["rootCompId","name"])})),r}))},getAllCustomDefinitions:function(t){var n=c(t)||{};return e.map(n.customDefinitions,(function(n){var o=s(t,n.id),r=n.structure,i=e.head(e.keys(r));return{pointer:o,name:i,title:r[i].title,type:r[i].$ref||r[i].type}}))},getAllSerializedCustomDefinitions:function(t){var n=c(t)||{};return e.map(n.customDefinitions,"structure")},getSerializedCustomDefinition:function(t,n){return e.get(t.dal.get(n),"structure")},cleanCache:function(){r={},i={}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(14),r={};function i(t,n){return e.every(n.modeIds,(function(e){return!!t[e]}))}function a(e,t,n){var o=e.componentStructure.getModesDefinitions(n);return t.get(o)}function s(n,o,r,s){for(var c=t.objectUtils.cloneDeep(r),u=function(t,n,o){for(var r={};null!==o;){var i=a(t,n,o),s=e.map(i,"modeId");r=e.merge(r,e.zipObject(s,s)),o=t.components.getParent(o)}return r}(n,o,s),l=[c];!e.isEmpty(l);){var p=l.pop(),d=e.get(p,"modes.definitions"),g=e.map(d,"modeId");u=e.merge(u,e.zipObject(g,g));var f=e.get(p,"modes.overrides");if(f){var m=e.filter(f,e.partial(i,u));e.set(p,"modes.overrides",m),e.isEmpty(m)&&delete p.modes.isHiddenByModes}l=l.concat(p.components||[])}return c}function c(n){var r=function(t){var n=o.getViewMode(t),r=t.pointers.components.getMasterPage(n),i=t.pointers.componentStructure.getModes(r);return i?e.get(t.dal.get(i),"definitions",[]):[]}(n);return e.filter(r,{type:t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES})}function u(){return{isHiddenByModes:!1,definitions:[],overrides:[]}}function l(t,n,o,r,i){if(!r)return null;for(var a=i?r:t.full.components.getParent(r);a;){if(!e.isEmpty(g(t,n,o,a)))return a;a=t.components.getParent(a)}return null}function p(t,n,o,r,i){var a=l(t,n,o,r,i);return a?e.head(g(t,n,o,a)):null}function d(e,t){var n={isHiddenByModes:(!1,!0),definitions:[],overrides:[]};return n.overrides.push({modeIds:e,isHiddenByModes:!1,layout:t}),n}function g(n,o,i,a){var s=n.components.getPageOfComponent(a);if(s){var c=function(t,n,o){var r=t.general.getActiveModes(),i=n.get(r);return o&&i[o]?e.omitBy(i[o],(function(e){return!e})):{}}(n,i,s.id),u=n.componentStructure.getModesDefinitions(a),l=e.reject(o.get(u),(function(e){return r[e.type]}));return e.keys(t.modesUtils.getActiveComponentModeIds(c,l))}return[]}return r[t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES]=!0,{adjustModesToNewContainer:function(t,n,o,r,i){i=s(t,n,i,r);var a=p(t,n,o,r)||e.head(g(t,n,o,r));if(a){var c=d([a],i.layout);if(i.modes){i.modes.isHiddenByModes=!0,i.modes.overrides=i.modes.overrides||[];var u=e.find(i.modes.overrides,(function(t){return e.isEqual(t.modeIds,[a])}));u?u.isHiddenByModes=!1:i.modes.overrides.push(c.overrides[0])}else i.modes=c}return i},createEmptyModesObject:u,getFirstAncestorModeToGenerateOverrides:p,createModesObjectForCompAddedInMode:d,getComponentModesToGenerateOverrides:g,getSospModeByPagesGroup:function(t,n){if(t.dal.isExist(n)){var o=c(t);return e.find(o,["settings.pagesGroupId","#".concat(n.id)])}},getFirstAncestorWithModesToGenerateOverrides:l,getSOSPModes:c}}()},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(1),r=!1,i=Promise.resolve();function a(){r=!1}function s(e){return r=!0,e()}function c(e){var t=r?i.then((function(){return s(e)})):s(e);return i=t.then(a,a),t}function u(e){this.name="PrimaryTaskError",this.message="Document save has failed",this.reason={document:e},this.stack=(new Error).stack}function l(e){this.name="SecondarySaveError",this.message="One or more Secondary save tasks have failed",this.reason=e,this.stack=(new Error).stack}function p(e){this.name="RequiredTaskSaveError",this.message="One or more required save tasks have failed",this.reason=e,this.stack=(new Error).stack}function d(e,t,n){var o=new Promise((function(o,r){var i=e.args().concat([o,r,t,n]);e.execute.apply(null,i)}));return e.onTaskFailure&&o.catch(e.onTaskFailure),e.onTaskSuccess?o.then(e.onTaskSuccess):o}function g(t,n,o,r){var i=e.transform(t,(function(e,t){var r,i;e[t.name]=(r=d(t,n,o),i=t.name,new Promise((function(e){return r.then(e).catch((function(t){e({error:!0,name:i,result:t})}))})))}),{});return Promise.all(e.values(i)).then((function(t){var n={};if(t.filter((function(e){return e&&e.error})).forEach((function(e){n[e.name]=e.result})),0!==e.keys(n).length)throw new r(n);return i}))}function f(t,n,r,i){this.name=n,this.execute=r,this.onTaskSuccess=function(r){if(r&&r.historyAlteringChanges){var a,s=m.call(this,t,n,i);if(function(t,n,o,r){e.forEach(r,(function(e){var r=o+e;t.duplicateLastSnapshot(r,n)}))}(t,r.historyAlteringChanges,n,i),s)(a=r.changes).push.apply(a,o(r.historyAlteringChanges));r=e.omit(r,"historyAlteringChanges")}return E(t,e.get(r,"changes")),r&&r.result}.bind(this)}function m(e,t,n){var o=t+n[0],r=this.currentState;e.takeSnapshot(o);var i=e.full.immutable.getLastSnapshotByTagName(o);return e.removeLastSnapshot(o),r.equals(i)}function v(t,n,o,r){f.call(this,t,n,r,o),this.lastSavedState=t.full.immutable.getLastSnapshotByTagName(n+o[0])||t.full.immutable.getInitialSnapshot(),e.forEach(o,(function(e){t.takeSnapshot(n+e)})),this.currentState=t.full.immutable.getLastSnapshotByTagName(n+o[0]),this.args=function(){return[this.lastSavedState,this.currentState]};var i=function(r){e.forEach(o,(function(e){t.removeLastSnapshot(n+e)})),r&&!e.isEmpty(r.changes)&&(e.forEach(o,(function(e){t.duplicateLastSnapshot(n+e,r.changes)})),E(t,r.changes))};this.onTaskFailure=i,this.cancel=i}function E(t,n){e.forEach(n,(function(n){var o=n.path,r=n.value;e.isUndefined(r)?t.full.removeByPathInHostModel(o):t.full.setByPath(o,r)}))}function y(n,o,r,i,a,s,c,f){var m=g(i,c,f,p).catch((function(t){throw o.cancel(),e.invokeMap(r,"cancel"),t})).then((function(){return d(o,c,f).catch((function(t){throw e.invokeMap(r,"cancel"),new u(t)})).then((function(t){return function(t,n){e.forOwn(n,(function(e){e.currentState&&(e.currentState=e.currentState.withMutations((function(e){return e.set("documentServicesModel",t.full.immutable.getByPath(["documentServicesModel"])).set("rendererModel",t.full.immutable.getByPath(["rendererModel"]))})))}))}(n,r),g(r,c,f,l).then((function(){return t}))}))}));return m.then((function(e){a&&(e?a(e):a())})).catch((function(e){if(!e instanceof u&&!e instanceof l)throw e;t.log.error("Save has failed - please see the failure details below:",e),s&&s(e.reason)})),m}function I(t,n){var o=t.getSnapshotTags(n);return o&&e.isArray(o)&&!e.isEmpty(o)||(o=[""]),o}function S(t,n,o,r,i,a,s,u){return c((function(){var c=o.primaryTask.getTaskName(),l=I(o.primaryTask,t),p=new n(r,c,l,o.primaryTask[t]);function d(e){return new n(r,e.getTaskName(),e.getSnapshotTags(t),e[t])}var g=e.map(o.requiredTasks,d),f=e.map(o.secondaryTasks,d);return y(r,p,f,g,i,a,s,u)}))}u.prototype=Object.create(Error.prototype),l.prototype=Object.create(Error.prototype);return{runPartialSaveTasks:S.bind(null,"partialSave",v),runFullSaveTasks:S.bind(null,"fullSave",v),runFirstSaveTasks:S.bind(null,"firstSave",v),runSaveAsTemplate:S.bind(null,"saveAsTemplate",v),runPublishTasks:S.bind(null,"publish",(function(e,t,n,o){f.call(this,e,t,o,n);var r=e.full.immutable.getLastSnapshotByTagName(t+n[0])||e.full.immutable.getInitialSnapshot();this.currentState=function(e,t){var n=e.getByPath(["rendererModel"]);return t.mergeIn(["rendererModel"],{metaSiteId:n.metaSiteId,siteInfo:{siteId:n.siteInfo.siteId}})}(e,r),this.args=function(){return[this.currentState]}})),runAutosaveTasks:S.bind(null,"autosave",(function(e,t,n,o){v.call(this,e,t,n,o),this.onTaskSuccess=function(t){t&&(this.currentState.getIn(["documentServicesModel","version"])===e.full.getByPath(["documentServicesModel","version"])&&E(e,t.changes))}.bind(this)})),runFunctionInSaveQueue:c,shouldSaveBeforePublish:function(e,t){var n=e.primaryTask,o=function(e,t,n){return e.full.immutable.getLastSnapshotByTagName(t.getTaskName()+I(t,n)[0])||e.full.immutable.getInitialSnapshot()}(t,n,"partialSave"),r=t.full.immutable.getCurrentSnapshot();return n.shouldRun&&n.shouldRun(o,r,"partialSave")}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),o=n(85),r=n(4),i=n(6),a=n(7),s="platform.components.AppController",c="platform.components.AppWidget",u="*";function l(e){return e===s||e===c}return{connect:function(n,i,p,d,g,f){var m=r.getType(n,p);if(m===c){if(!a.isDescendantOfComp(n,i,p))throw new Error("cannot connect to app widget from the outside");!1!==f&&(f=!0)}else{if(m!==s)throw new Error("controllerRef component type is invalid - should be a controller or current context");f=f||!1}if(f&&l(r.getType(n,i)))throw new Error("cannot connect to another controller with a primary connection");if(d===u)throw new Error("invalid connection role - cannot be *");var v={type:"ConnectionItem",controllerRef:p,role:d,isPrimary:f};g&&(v.config=g);var E=o.getConnections(n,i),y=e.reject(E,{controllerRef:p,role:d});if(v.isPrimary&&e.some(y,{isPrimary:!0}))throw new Error("Primary connection is already connected to the component");t.updateConnectionsItem(n,i,y.concat(v))},disconnect:function(n,r,a,s){var c=o.getConnections(n,r),u={controllerRef:a};s&&(u.role=s);var l=e.reject(c,u);e.isEmpty(l)?t.removeConnectionsItem(n,r):t.updateConnectionsItem(n,r,l),i.executeHook(i.HOOKS.CONNECTION.AFTER_DISCONNECT,"connection",[n,r,a,s])},get:o.getConnections,getPlatformAppConnections:o.getPlatformAppConnections,getPrimaryConnection:o.getPrimaryConnection,getConnectedComponents:function(e,t){var n=e.pointers.full.components.getPageOfComponent(t);if(!n)return[];var r=e.pointers.full.components.isMasterPage(n)?null:n.id;return a.getAllComponentsFromFull(e,r,(function(n){return o.isCompConnectedToController(e,n,t)}))},getControllerConnections:function(t,n){var r=t.pointers.full.components.getPageOfComponent(n);if(!r)return[];var i=t.pointers.full.components.isMasterPage(r)?null:r.id,s=a.getAllComponentsFromFull(t,i);return e.flatMap(s,(function(r){return e(o.getConnections(t,r)).reject({type:"WixCodeConnectionItem"}).filter(["controllerRef.id",n.id]).map((function(e){return{componentRef:r,connection:{config:e.config,controllerRef:e.controllerRef,role:e.role,isPrimary:e.isPrimary}}})).value()}))},isControllerType:l}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A,T,_,O,C,D,w,M,b,R,N,x,L,B,F,k,U,H,V,G;e.exports=(o=n(0),r=n(1),i=n(206),a=n(16),s=n(13),c=n(34),u=n(73),l=n(31),p=n(98),d=n(32),g=o.template("<%= provisionServerBaseUrl %>/editor/pre-save-add-apps/template/<%= metaSiteId %>?"),f=o.template("<%= provisionServerBaseUrl %>/editor/pre-save-add-app/<%= metaSiteId %>?appDefId=<%= appDefinitionId %>"),m=o.template("<%= provisionServerBaseUrl %>/editor/settle/<%= metaSiteId %>?context=<%= context %>&editorSessionId=<%= editorSessionId %>"),v=o.template("<%= provisionServerBaseUrl %>/editor/provision-from-source-template/<%= metaSiteId %>?appDefId=<%= appDefinitionId %>&sourceTemplateId=<%= sourceTemplateId %>"),E="save",y="load",I="firstSave",S=function(e,t,n){var r=t.payload;o.forEach(r,(function(t){k(e,t),n&&n(t)}))},h=function(e,t,n,o,r){if(c.isSiteSaved(e)){var a=s.getProperty(e,s.PROPERTY_NAMES.META_SITE_ID),u=s.getProperty(e,s.PROPERTY_NAMES.SITE_REVISION),l=H(e,f,t,a),p=new i(l).addAcceptJson().addAppVersionAndSiteRevision(r,String(u)).build();G(e,p,"GET",{},n,o)}else A(e,[t],(function(t){t&&t.success?S(e,t,n):o(t)}),o)},P=function(e,t,n,o,r){var a=s.getProperty(e,s.PROPERTY_NAMES.META_SITE_ID),c=e.pointers.general.getServiceTopology(),u=e.dal.get(e.pointers.getInnerPointer(c,"appStoreUrl")),l=v({provisionServerBaseUrl:u,metaSiteId:a,appDefinitionId:t,sourceTemplateId:n}),p=new i(l).addAcceptJson().build();G(e,p,"POST",{},o,r)},A=function(e,t,n,o){var r=s.getProperty(e,s.PROPERTY_NAMES.META_SITE_ID),a=e.pointers.general.getServiceTopology(),c=e.dal.get(e.pointers.getInnerPointer(a,"appStoreUrl")),u=g({provisionServerBaseUrl:c,metaSiteId:r}),l=new i(u).addAcceptJson().build();G(void 0,l,"POST",{guids:t},n,o)},T=function(e,t){return e.filter((function(e,n){return!!t.get(n)}))},_=function(e){var t=e.get("pagesData"),n=a.filterApps(e.getIn(["rendererModel","clientSpecMap"]).toJS()),r=o.invoke(e.getIn(["routers","configMap"]),"toJS");return F(n,t,r)},O=function(e,t,n,o,r){var i=b(e,n);G(null,i,"POST",t,o,r)},C=function(e,t){var n=t.get("pagesData"),r=t.getIn(["rendererModel","clientSpecMap"]).toJS(),i=e.get("pagesData"),s=w(i,n),c=M(i,n),u=T(i,s),p=T(n,s),d=l.areTpaCompsWereUnInstalled(u,s,c,r),g=o.invoke(t.getIn(["routers","configMap"]),"toJS"),f=l.isPlatformOnlyAppUninstalled(p,r,g),m=d||function(e){return o.some(e,{shouldTriggerFullSave:!0})}(r)||f,v=a.filterApps(r);return m?F(v,n,g):D(s,v,g)},D=function(e,t,n){var r=l.getAllAppIdsInstalledOnPages(e,t,n),i=o.concat(o.filter(t,"notProvisioned"),u.getAppsToAdd(),l.getAppsToGrantPermissions(t,r)),s=function(e,t){return o(e).filter((function(e){return o.includes(t,o.toString(e.applicationId))||a.isDemoAppAfterProvision(e)||a.hasEditorPlatformPart(e)})).map((function(e){var t=e.appDefinitionId,n=e.applicationId,r=e.instanceId,i=e.version;return o.omitBy({type:"add",appDefId:t,applicationId:o.toString(n),instanceId:r,appVersion:i},o.isUndefined)})).value()}(i,r),c=L(),p=R(t,i);return o.concat(s,c,p)},w=function(e,t){return t.filter((function(t,n){return function(e,t,n){var o=t.get("structure");return!e&&o||!o.equals(e.getIn([n,"structure"]))}(e,t,n)}))},M=function(e,t){return e.filter((function(e,n){return!t.getIn([n,"structure"])}))},b=function(e,t){var n=e.getIn(["serviceTopology","appStoreUrl"]),o=e.getIn(["rendererModel","metaSiteId"]),r=e.getIn(["documentServicesModel","editorSessionId"]),a=V(n,m,o,r,t);return new i(a).addAcceptJson().build()},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return o(e).filter((function(e){var r=e.pendingAction,i=e.applicationId;return r===d.APP_ACTION_TYPES.UPDATE&&!o.some(t,{applicationId:i})&&!o.some(n,{applicationId:i})})).map((function(e){return{type:"update",appDefId:e.appDefinitionId,applicationId:o.toString(e.applicationId),instanceId:e.instanceId,appVersion:e.version}})).value()},N=function(e,t){return o(e).reject((function(e){var n=e.applicationId;return o.some(t,{applicationId:n})})).map((function(e){var t=e.appDefinitionId,n=e.applicationId,r=e.instanceId,i=e.version;return o.omitBy({type:"add",appDefId:t,applicationId:o.toString(n),instanceId:r,appVersion:i},o.isUndefined)})).value()},x=function(e){return o.map(e,(function(e){var t=e.applicationId;return{type:"remove",applicationId:o.toString(t)}}))},L=function(){return o.map(u.getAppsToDismiss(),(function(e){return{type:"dismiss",appDefId:e}}))},B=function(e,t,n,r){var i=o.invoke(e.getIn(["routers","configMap"]),"toJS"),a=l.getAppsToGrantAndRevoke(n,t,{excludeHybrid:!0},i),s=a.grant,c=a.revoke,u=N(s,c),p=x(c),d=L(),g=R(n,s,c),f=e.getIn(["documentServicesModel","revision"]),m={actions:o.concat(u,p,d,g),siteRevision:f};o.isEmpty(m.actions)||O(e,m,y,r)},F=function(e,t,n){var r=l.getAppsToGrantAndRevoke(e,t,{},n),i=o.concat(o.filter(e,"notProvisioned"),u.getAppsToAdd(),r.grant),a=r.revoke,s=N(i,a),c=x(a),p=L(),d=R(e,i,a);return o.concat(s,c,p,d)},k=function(e,t){if(o.includes([void 0,-1],t.applicationId))t.applicationId=U(e),t.notProvisioned=!0;else{var n=a.getAppDataByAppDefinitionId(e,t.appDefinitionId),r=n&&n.demoMode&&!t.demoMode;u.isPremiumPendingApp(e,t.applicationId)?u.add(t):!r&&n||(t.notProvisioned=!0)}e.setOperationsQueue.executeAfterCurrentOperationDone((function(){c.isTpaByAppType(t.type)&&p.cacheAppMarketDataAfterProvision(e,t)}))},U=function(e){var t=a.getLargestApplicationId(e);return p.generateAppFlowsLargestAppId(t)},H=function(e,t,n,o){var r=e.pointers.general.getServiceTopology();return t({provisionServerBaseUrl:e.dal.get(e.pointers.getInnerPointer(r,"appStoreUrl")),metaSiteId:o,appDefinitionId:n})},V=function(e,t,n,o,r){return t({provisionServerBaseUrl:e,metaSiteId:n,editorSessionId:o,context:r})},G=function(e,t,n,i,a,s){var c={type:n,url:t,dataType:"json",contentType:"application/json",success:function(t){e?function(e,t,n){var o=n.payload;k(e,o),t(o)}(e,a,t):a(t)},error:s};i&&!o.isEmpty(i)&&(c.data=JSON.stringify(i)),r.ajaxLibrary.ajax(c)},{preSaveAddApp:h,settleOnSave:function(e,t,n,r){var i={actions:C(e,t),siteRevision:t.getIn(["documentServicesModel","revision"])};o.isEmpty(i.actions)?n():O(t,i,E,n,r)},settleOnFirstSave:function(e,t,n,o){var r={actions:_(t),siteRevision:t.getIn(["documentServicesModel","revision"])};O(t,r,I,n,o)},getSettleActionsForFullSave:_,getSettleActionsForSave:C,settleOnLoad:function(e){e.dal.takeSnapshot("tpa-settle-on-load");var t=e.dal.full.immutable.getLastSnapshotByTagName("tpa-settle-on-load");e.dal.removeLastSnapshot("tpa-settle-on-load");var n=t.get("pagesData"),o=a.filterApps(t.getIn(["rendererModel","clientSpecMap"]).toJS());B(t,n,o,(function(t){t&&t.success&&a.setAppsData(e,t.payload.clientSpecMap)}))},preSaveAddAppsOnLoad:function(e){var t=l.getAppsDefIdToProvisionOnSiteLoad(e);o.isEmpty(t)||(c.isSiteSaved(e)?function(e,t){var n=function(t){t&&(t.shouldTriggerFullSave=!0,a.registerAppData(e,t))},r=function(){};o.forEach(t,(function(t){h(e,t,n,r)}))}(e,t):function(e,t){o.isEmpty(t)||A(e,t,(function(t){t&&t.success&&(S(e,t),o.forEach(t.payload,(function(t){a.registerAppData(e,t)})))}),(function(){}))}(e,t))},provisionAppFromSourceTemplate:function(e,t,n,o,r){c.isSiteSaved(e)?P(e,t,n,o,r):r({success:!1})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(24),r=n(209),i=n(49),a=n(80),s=n(109),c=n(81),u=n(647),l="List does not exist",p="Data selector does not exist",d="Type does not exist",g="List views do not exist",f="View is not valid",m="New List";function v(e){throw new Error(e)}function E(e,t){return e.dal.getByPath(o.getPartPath(t))}function y(t,n){var o=E(t,n)||v(l),r=h(t,n);if(!r)throw new Error(p);if("ManualSelectedList"!==r.type)throw new Error("Only manual lists are supported");return e(a.getAllItemsOfType(t,o.type)).pick(r.itemIds).values().value()}function I(e,t){var n=E(e,t)||v(l);return i.getType(e,n.type)}function S(e,t){var n=E(e,t)||v(l);return c.getAllViewsByName(e,n.viewName)}function h(e,t){var n=E(e,t)||v(l);return s.getSelector(e,n.dataSelector)}function P(e){return e.dal.getByPath(o.getBasePartsPath())}function A(t,n){for(var o=e.map(P(t),"displayName"),i=n;e.includes(o,i);)i=r.incNumberSuffix(i);return i}function T(t,n,o){var r=E(t,n)||v(l),i=S(t,n),a=e.findKey(i,(function(t){return t.forType===r.type&&(o?t.format===o:e.isEmpty(t.format))}));return[a,i[a]]}function _(e,t){var n=e.pointers.wixapps.getPackageCounterData("appbuilder");e.dal.isExist(n)||e.dal.set(n,{});var o=E(e,t),r=e.pointers.wixapps.getCounterData("appbuilder",o.type),i=e.dal.get(r)||0;e.dal.set(r,i+1)}return{markDataAsUpdated:_,getListDef:E,getDisplayName:function(e,t){return E(e,t).displayName},getItems:y,getHiddenItems:function(t,n){var o=E(t,n)||v(l),r=y(t,n),i=a.getAllItemsOfType(t,o.type);return e(i).omit(e.map(r,"_iid")).values().value()},getType:I,getViews:S,getSelector:h,setManualSelector:function(e,t,n){var o=E(e,t)||v(l);s.setManualSelector(e,o.dataSelector,n)},getAllLists:P,createList:function(n,r){if(!i.getType(n,r.type))throw new Error(d);if(!s.getSelector(n,r.dataSelector))throw new Error(p);if(e.isEmpty(c.getAllViewsByName(n,r.viewName)))throw new Error(g);var a={displayName:A(n,r.displayName||m),dataSelector:r.dataSelector,type:r.type,viewName:r.viewName,version:u.LIST_VERSION},l="list_".concat(t.guidUtils.getUniqueId());return n.dal.full.setByPath(o.getPartPath(l),a),l},getTypeName:function(e,t){return I(e,t).name},rename:function(e,t,n){var r=E(e,t);r.displayName=n,e.dal.full.setByPath(o.getPartPath(t),r)},getVersion:function(e,t){return E(e,t).version||"1.0"},replaceItemView:function(t,n,o){e.isEmpty(o)&&v(f);var r=e.head(T(t,n,o.format));c.replaceView(t,r,o),_(t,n)},getItemView:function(t,n,o){return e.last(T(t,n,o))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(3),r=n(61),i=n(83);function a(e){return e.replace("#","")}function s(t,n){return e.every(n,(function(n,o){var r=t[o];return e.isObject(r)?e.isEqual(n,"#".concat(r.id)):e.isEqual(n,r)}))}function c(e,t){var n=u(e,t),o=e.pointers.getInnerPointer(n,"link");return e.dal.get(o)}function u(e,t){return t=a(t),e.pointers.data.getDataItem(t,"masterPage")}function l(t,n,o,r){var i=r.items.map(e.partial(l,t,n,o)),a=t.pointers.multilingualTranslations.translationDataItem("masterPage",n,r.id),s=t.dal.full.get(a);if(s&&(s.items=i,t.dal.fullJsonDal.set(a,s),o)){var c=t.pointers.data.getDataItem(r.id,"masterPage");t.dal.displayedJsonUpdater.Displayed.onSet(c,s)}return"#".concat(e.get(s,"id")||r.id)}return{getIndexOfItemInParent:function(e,t,n){var o=u(e,t),r=e.dal.get(e.pointers.getInnerPointer(o,"items")).indexOf("#".concat(n));if(r<0)throw new Error("Cannot find item #".concat(n," at parent #").concat(t));return r},getItemIdAndParent:function e(t,n){for(var o,r,i=t.items,c=0;c<i.length;c++){if((o=i[c]).link&&s(o.link,n))return{parentId:t.id?a(t.id):null,itemId:o.id?a(o.id):null};if(r=e(o,n))return r}return null},getLinkItemByMenuItemId:function(e,t){var n=c(e,t);if(!n)return null;var o=u(e,n);return e.dal.get(o)},getLinkIdByMenuItemId:c,getParentItemId:function e(t,n){var o,r,i=t.items;for(o=0;o<i.length;o++){if((r=i[o]).id===n)return t.id;var a=e(r,n);if(a)return a}return null},getSiteMenu:function(e){var n={getDataByQuery:function(t,n){return o.getDataItemById(e,t,n)},getRouters:function(){return r.get.all(e)}};return t.menuUtils.getSiteMenuWithoutRenderedLinks(n,!0)},sanitizeHash:a,validateParent:function(t,n,o,r){if(n=n?a(n):"CUSTOM_MAIN_MENU",(o=o&&a(o))&&o===n)throw new Error("menu item ".concat(o," cannot be a parent for itself"));var i=u(t,n);if(!t.dal.isExist(i))throw new Error('Parent "'.concat(n,'" does not exist'));var s=t.dal.get(t.pointers.getInnerPointer(i,"type"));if("BasicMenuItem"!==s&&"CustomMenu"!==s)throw new Error('Parent of type "'.concat(s,'" is not a legal parent. Please provide parent of types "BasicMenuItem" or "CustomMenu" only'));if(function(t,n,o){if(function(e,t){var n=e.pointers.getInnerPointer(e.pointers.data.getDataItem(t,"masterPage"),"type");return"CustomMenu"===e.dal.get(n)}(t,n))return!1;o=o||"CUSTOM_MAIN_MENU";var r=t.dal.get(u(t,o));return!e.includes(r.items,"#".concat(n))}(t,n,r))throw new Error("Cannot add/move items into a sub item");if(o){var c=u(t,o),l=t.pointers.getInnerPointer(c,"items"),p=t.dal.get(l);if(p&&p.length>0&&!e.includes(["CUSTOM_MAIN_MENU",r],n))throw new Error("Cannot move item with sub items (#".concat(o,") to anything other than  #CUSTOM_MAIN_MENU"))}},getMenuDataItemPointer:u,getPageMenuItemPointer:function(e,t){for(var n,o=e.pointers.data.getDataItemsWithPredicate({type:"PageLink",pageId:"#".concat(t)}),r=0;o.length;r++)if(n=e.pointers.data.getDataItemWithPredicate({type:"BasicMenuItem",link:"#".concat(o[r].id)}))return n},updateTranslatedMenuItems:function(e,t){if(i.multilingual.isEnabled(e)){var n=i.current.get(e);i.getFull(e).forEach((function(o){var r=o.code===n;l(e,o.code,r,t)}))}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=(n(5),n(1)),o=n(2),r=n(25),i=n(44);function a(e,t){var n=e.pointers.components.getPageOfComponent(t).id,r=e.dal.get(t),i=e.pointers.components.getViewMode(t)===o.VIEW_MODES.MOBILE;e.siteAPI.createChildrenAnchors(r,n,{forceMobileStructure:i})}function s(e,t){var n=e.pointers.general.getCompsToUpdateAnchors();e.dal.isExist(n)?e.dal.push(n,t):e.dal.set(n,[t])}return{updateAnchors:function(e,t,n){t&&s(e,t),n&&s(e,n)},updateAnchorsForCompChildren:a,getMinDragHandleY:function(t,n,o){var r=t.pointers.components.getSiblings(n),a=n.id;return o=o||[],e.reduce(r,(function(n,r){if(e.includes(o,r.id))return n;var s=i.getComponentLayout(t,r);return e.find(s.anchors,{targetComponent:a,type:"BOTTOM_TOP"})?Math.max(n,i.getBoundingY(s)+i.getBoundingHeight(s)):e.find(s.anchors,{targetComponent:a,type:"TOP_TOP"})?Math.max(n,i.getBoundingY(s)):n}),0)},getMinAnchorLockDistance:function(){return o.ANCHORS.LOCK_THRESHOLD},updateAnchorsForMultipleComps:function(n){var o=n.pointers.general.getCompsToUpdateAnchors(),i=n.dal.get(o)||[];e(i).concat(function(n,o){return e.transform(o,(function(e,o){if(!t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(o.id)){var r=n.pointers.full.components.getParent(o);r&&e.push(r)}}),[])}(n,i)).map((function(e){return t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(e.id)?function(e,n){return r.getAncestorByPredicate(e,n,(function(e){return!t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(e.id)}))}(n,e):e})).uniqBy("id").compact().filter((function(e){var t=n.pointers.components.getPageOfComponent(e);return!!t&&n.siteAPI.isComponentRenderedOnSite(t.id)})).forEach(e.partial(a,n)),n.dal.set(o,[])}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(3),r=n(4),i=n(10),a=n(97),s=t.constants;function c(t){!function(e){e.text=e.text.slice(0,a.QUICK_ACTION_ITEM_MAX_LENGTH)}(t),function(t){if(!e.includes(a.actionTypesMap,t.itemType))throw new Error('"'.concat(t.itemType,'" is an unsupported action'))}(t),"custom"===t.itemType?function(t){var n=e.find(a.quickActionIconsData,{hash:t.icon,isFree:!0});if(e.isUndefined(n))throw new Error('"'.concat(t.icon,'" is not a predefined free icon and cannot be used for custom action bar item'));e.assign(t,{color:n.color})}(t):function(t){var n=a.quickActionIconsData[t.itemType];e.assign(t,{icon:n.hash,color:n.color})}(t)}function u(e){return e.pointers.components.getPage("masterPage",s.VIEW_MODES.MOBILE)}function l(e){return e.pointers.components.getComponent("QUICK_ACTION_BAR",u(e))}function p(t){var n=l(t);return!e.isNull(n)&&r.isExist(t,n)}function d(t,n){c(n);var i=e.merge(e.clone(a.defaultSerializedQuickActionBarItem),{data:e.assign(o.createDataItemByType(t,"QuickActionBarItem"),e.pick(n,["link","itemType","text","icon"])),style:e.set({},"style.properties",e.pick(n,["color"]))}),s=l(t),u=r.getComponentToAddRef(t,s,null);r.add(t,u,s,i)}function g(t){if(!p(t))return[];var n=function(t){var n=t.pointers.components.getChildren(l(t));return e.map(n,(function(n){var o=r.data.get(t,n),a=t.dal.get(n).styleId,s=i.styles.get(t,a);return e.assign({pointer:n},e.pick(o,["text","icon","link","itemType"]),e.pick(s.style.properties,["color"]))}))}(t),o=function(t){var n=e(t.siteDataAPI.siteData.getClientSpecMap()).reject((function(t){return e.get(t,["permissions","revoked"],!1)})).map("appDefinitionId").value();return e(s.SUPPORTED_DYNAMIC_ACTIONS).map((function(t){return e.assign({},t,{isDynamic:!0})})).filter((function(t){return e.includes(n,t.appId)})).value()}(t);return e.concat(n,o)}return{getQuickActionBarPointer:l,hasQuickActionBar:p,addAction:d,addQuickActionBar:function(t,n,i){var s=p(t),c=e(g(t)).reject("isDynamic").isEmpty();if(!s||c){if(!s){var l=e.merge(e.clone(n||a.defaultSerializedFAB),{props:o.createPropertiesItemByType(t,"QuickActionBarProperties")}),f=u(t),m=r.getComponentToAddRef(t,f,null,"QUICK_ACTION_BAR");r.add(t,m,f,l)}e.forEach(i,e.partial(d,t,e))}},removeQuickActionBar:function(e){p(e)&&r.deleteComponent(e,l(e))},getActions:g,clearActions:function(t){if(p(t)){var n=t.pointers.components.getChildren(l(t));e.forEach(n,(function(e){return r.deleteComponent(t,e)}))}},getAllTypes:function(){return a.actionTypesMap},validateActionItemData:c,getIconsMap:function(){return a.quickActionIconsData}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(46),o=n(22),r=n(35),i=n(16),a=n(40),s=n(98),c=n(47),u=(n(48),n(56)),l=n(127),p=n(183),d="/appStore/wix-code/",g="save",f="wixCodeNotProvisioned";function m(e,t){var n=i.getLargestApplicationId(e),a={type:o.WIX_CODE_SPEC_TYPE,appDefinitionId:t.appDefinitionId,instance:t.dsi,instanceId:t.instanceId,applicationId:s.generateAppFlowsLargestAppId(n)};return a[f]=!0,r.registerAppData(e,a),a}function v(e,t){return u.setWixCodeModel(e,{gridAppId:t.gridAppId}),t}function E(e){var t=e.pointers.general.getMetaSiteId();return e.dal.get(t)}function y(e){return t.extractFromSnapshot(e,["rendererModel","clientSpecMap"],!0)}function I(e){return function(e){return!!a.getExistingWixCodeAppFromPS(e)}(e)&&function(e){return!!u.getGridAppId(e)}(e)}return{provision:function(t){var n=c.trace(t,{action:"createApp"}),o=a.getExistingWixCodeAppFromPS(t);return I(t)?(n({message:"wix code is already provisioned"}),Promise.resolve(o)):function(t,n){var o={baseUrl:l.getBaseUrlFromPS(t),metasiteId:E(t),signedInstance:n?n.instance:null};return l.create(o).then(e.partial(v,t)).then((function(e){return p.setAppWriteable(t),e})).then(n?e.constant(n):e.partial(m,t))}(t,o).then((function(e){return n({message:e}),e})).catch((function(e){return n({message:e,level:c.levels.ERROR}),Promise.reject(e)}))},isProvisioned:I,save:function(n,r,i){var a=function(e){return t.extractFromSnapshot(e,["serviceTopology","appStoreUrl"])+d}(n)+g,s=function(e){return t.extractFromSnapshot(e,["rendererModel","metaSiteId"])}(n),c=e(n).thru(y).filter(f).map((function(e){return{applicationId:e.applicationId.toString(),instanceId:e.instanceId,signedInstance:e.instance,gridAppId:t.extractFromSnapshot(n,o.paths.GRID_APP_ID)}})).value();if(c.length>0){var u={metaSiteId:s,codeAppSpec:c[0]};t.sendRequest(a,t.requestTypes.POST,u).then((function(t){r(function(t){if(!t.success)return t;var n={};return n[t.payload.applicationId]=t.payload,e.assign({},t,{payload:{clientSpecMap:n}})}(t))})).catch((function(e){i(e)}))}else r()},ensureAppIsWriteable:p.ensureAppIsWriteable,handleAppIsReadOnlyServerError:p.handleAppIsReadOnlyServerError}}()},function(e,t){var n,o;e.exports=(o=function(e){var t,o=e.errorType,r=e.xhr;return o===n.ABORT?((t=new Error("Request aborted by browser")).name="RequestAbortError",t):o===n.TIMEOUT?function(){var e=new Error("Request timed out");return e.name="RequestTimeoutError",e}():function(e){var t="Status: ".concat(e.status),n="Response Text: ".concat(e.responseText);return new Error(["Server Error",t,n].join("\n"))}(r)},{build:function(e){var t=e.errorType,n=e.xhr,r=o({errorType:t,xhr:n});return r.xhr=n,r},errorTypes:n={ABORT:"abort",TIMEOUT:"timeout",PARSE:"parseerror"},safeGetErrorCode:function(e){try{return JSON.parse(e.xhr.responseText).errorCode}catch(e){return null}},safeGetStatusCode:function(e){try{return e.xhr.status}catch(e){return null}}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g;e.exports=(o=n(0),r=n(16),i=n(13),a=[],s=[],c=[],u=function(e){var t=r.getAppsData(e);return o.filter(t,(function(t){return g(e,t)&&l(t)&&p(t)}))},l=function(e){return o.has(e,"appDefId")?!o.includes(a,e.appDefId):!o.includes(a,e.appDefinitionId)},p=function(e){return o.has(e,"appDefId")?!o.some(s,{appDefinitionId:e.appDefId}):!o.some(s,{appDefinitionId:e.appDefinitionId})},{getPendingApps:u,getPendingAppsFromSiteMetaData:function(e){var t=(i.getProperty(e,i.PROPERTY_NAMES.PENDING_APPS)||[]).slice(0).concat(c),n=o.uniqBy(t,"appDefId");return o.filter(n,(function(e){return l(e)&&p(e)}))},getPendingAppsCount:function(e){var t=u(e);return o.size(t)},getPremiumPendingApps:function(e){var t=r.getAppsData(e),n=o.map(t,"appDefinitionId"),a=i.getProperty(e,i.PROPERTY_NAMES.PENDING_APPS)||[],s=o.filter(a,(function(e){return o.has(e,"appDefId")&&o.has(e,"vendorProductId")}));return o.filter(s,(function(e){return!o.includes(n,e.appDefId)}))},isPending:g=function(e,t){return e&&t?t.requiresEditorComponent&&r.isHybridApp(e,t.applicationId):!(!o.isUndefined(e)||!t)&&d(t)},isPendingAppData:d=function(e){return e.requiresEditorComponent&&r.isHybridAppFromAppData(e)},dismiss:function(e,t){o.some(s,{appDefinitionId:t})||(o.includes(a,t)||a.push(t),c=o.reject(c,{appDefId:t}))},add:function(e){s.push(e),o.includes(a,e.appDefinitionId)&&(a=o.without(a,e.appDefinitionId))},addPendingDashboardApp:function(e,t){if(!o.isEmpty(t)){var n={appDefId:t};c.push(n),a=o.without(a,t)}},getAppsToDismiss:function(){return a},getAppsToAdd:function(){return s},isPremiumPendingApp:function(e,t){var n=i.getProperty(e,i.PROPERTY_NAMES.PENDING_APPS)||[];return o.some(n,(function(e){return o.has(e,"appDefId")&&"Premium"===e.reason&&e.applicationId===t}))},onSave:function(){a=[],s=[]}})},function(e,t,n){var o,r,i;e.exports=(o=n(0),r={},i={},{registerOnAppDeleted:function(e,t){o.isUndefined(r[e])&&(r[e]=[]),r[e].push(t)},registerOnAppInstalled:function(e,t){o.isUndefined(i[e])&&(i[e]=[]),i[e].push(t)},invokeDeleteAppCallbacks:function(e){r[e]&&o.forEach(r[e],(function(e){e()}))},invokeAddAppCallbacks:function(e){i[e]&&o.forEach(i[e],(function(e){e()}))}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),o=n(3),r=n(4),i=n(185),a=n(18),s=n(8),c=n(65),u=n(14),l=n(6),p=n(17),d=128,g={VALID:"VALID",ALREADY_EXISTS:"ALREADY_EXISTS",TOO_SHORT:"TOO_SHORT",TOO_LONG:"TOO_LONG",INVALID_NAME:"INVALID_NAME"},f="originalNicknameContext";function m(t,n,o){return e(n).filter((function(e){return T(t,e,o)})).keyBy((function(e){return T(t,e,o)})).value()}function v(e,t){return e.pointers.full.components.getChildrenRecursivelyRightLeftRootIncludingRoot(t)}function E(t,n,o){var r=h(t,o),i=r?e.reject(v(t,r),r):v(t,o),a=m(t,i,r),c=e.assign({},a,n),u=e.groupBy(i,(function(e){return s.getDefaultNickname(t,e)})),l=e.flatMap(u,(function(n,o){var i=function(t,n){var o=new RegExp("".concat(t,"(\\d+)"));return e(n).map((function(t,n){var r=o.exec(n);return r?e.parseInt(r[1]):null})).concat(0).max()+1}(o,c);return function(t,n,o,r,i){return e(n).filter((function(e){return M(t,e,i)})).map((function(e){var n=o+r++;return O(t,e,n,i),e})).value()}(t,n,o,i,r)}));return e.assign(a,m(t,l,r))}function y(t,n,o){var r=t.pointers.components.getPage("masterPage",o),i=m(t,v(t,r),null),a=e.reduce(n,(function(n,r){var a=t.pointers.components.getPage(r,o),s=E(t,i,a);return e.assign(n,s)}),{});E(t,a,r)}function I(n,o,r){e.includes(o,"masterPage")?S(n,r):(r=p.getViewMode(n,r,u),y(n,o,t.VIEW_MODES.DESKTOP),r!==t.VIEW_MODES.DESKTOP&&(!function(n,o,r){e(o).concat("masterPage").uniq().forEach((function(o){var i=n.pointers.components.getPage(o,r),a=h(n,i),s=v(n,i),c=n.pointers.components.getPage(o,t.VIEW_MODES.DESKTOP);e(s).filter((function(e){return M(n,e,a)})).forEach((function(e){var t=n.pointers.components.getComponent(e.id,c);if(t){var o=T(n,t,a);o&&O(n,e,o,a)}}))}))}(n,o,r),y(n,o,r)))}function S(t,n){var o=e.map(a.popupPages.getDataList(t),"id");I(t,a.getPageIdList(t).concat(o),n)}function h(e,t){return i.getNicknameContext(e,t)}function P(t,n){return t?e.find(n,{controllerRef:{id:t.id}}):_(n)}function A(t,n,o){if(n){var i=r.data.get(t,n).id;return e.find(o,{controllerId:i})}return _(o)}function T(e,t){var n=P(arguments.length>2&&void 0!==arguments[2]?arguments[2]:h(e,t),c.get(e,t));if(n)return n.role}function _(t){return"WixCodeConnectionItem"===e.get(t,[0,"type"])&&t[0]}function O(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h(t,n);if(w(t,n,r)!==g.VALID)throw new Error("The new nickname you provided is invalid");if(l.executeHook(l.HOOKS.WIX_CODE.SET_NICKNAME_BEFORE,"updateConnectionsItem",[t,n,r]),e.get(n,"id")===e.get(i,"id"))throw new Error("Cannot set nickname of context component to itself");var a=c.get(t,n),s=P(i,a);s?s.role=r:a=[function(e,t){return e?{type:"ConnectionItem",role:t,controllerRef:e,isPrimary:!0}:{type:"WixCodeConnectionItem",role:t}}(i,r)].concat(a);o.updateConnectionsItem(t,n,a)}function C(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h(t,n),i=c.get(t,n),a=P(r,i);a&&(e.remove(i,a),i.length>0?o.updateConnectionsItem(t,n,i):o.removeConnectionsItem(t,n))}function D(t,n,o,r){if(!o)return!1;r=r?t.pointers.full.components.getComponent(r.id,n):void 0;var i=function(t,n){var o=n.type;if("masterPage"===n.id){var r=t.pointers.page.getNonDeletedPagesPointers(!0);return e.map(r,(function(e){return t.pointers.full.components.getPage(e.id,o)}))}return[n,t.pointers.full.components.getMasterPage(o)]}(t,n);return e.some(i,(function(n){var i=h(t,n),a=t.pointers.full.components.getChildrenRecursivelyRightLeftRootIncludingRoot(n);return e(a).reject(e.isEqual.bind(e,r)).map((function(e){return T(t,e,i)})).includes(o)}))}function w(t,n,o){return e.isEmpty(o)?g.TOO_SHORT:o.length>d?g.TOO_LONG:D(t,r.getPage(t,n),o,n)?g.ALREADY_EXISTS:function(e){return!/^[a-zA-Z0-9]+$/.test(e)}(o)?g.INVALID_NAME:g.VALID}function M(e,t,n){return!e.pointers.components.isMasterPage(t)&&!T(e,t,n)}return{generateNicknamesForSite:S,getNickname:T,setNickname:O,removeNickname:C,removeNicknameFromComponentIfInvalid:function(t,n,o){var i=r.isPageComponent(t,o)?o:r.getPage(t,o),a=h(t,i);e.forEach(t.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(n),(function(e){var n=T(t,e,a);D(t,i,n,e)&&C(t,e,a)}))},removeNicknameFromSerializedComponentIfInvalid:function(t,n,o,i){var a=r.isPageComponent(t,o)?o:r.getPage(t,o),s=A(t,h(t,a),i.connections.items);s&&D(t,a,s.role,n)&&e.remove(i.connections.items,s)},updateNicknameContextByNewContainer:function(t,n,o,i){var a=e.get(o,["connections","items"]);if(a){var s=e.get(o,["custom",f]);if(s){var c=A(t,s,a),u=function(t,n){var o=h(t,n);return e.get(r.data.get(t,o),"id")}(t,i);c.controllerId=u}}},setOriginalContextToSerializedComponent:function(e,t,n){var o=h(e,t);o&&(n[f]=o)},validateNickname:w,generateNicknamesForPages:I,hasComponentWithThatNickname:D,getComponentsInPage:v,VALIDATIONS:g}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),o=n(30),r=n(18),i=n(12);function a(e,n,o){var r=[e,n,o],i={methodName:"components.data.update",singleComp:t.shouldUpdateDataWithSingleComp(e,n)};e.setOperationsQueue.runSetOperation(t.updateDataItem,r,i)}function s(e,n,o){var r=t.getDataItem(e,n);r&&r.urlFormat!==o&&(r.urlFormat=o,a(e,n,r))}return{updateUrlFormatIfNeeded:s,upgradeUrl:function(n,c,u,l){var p=o.getPossibleUrlFormats(),d=r.getSocialUrl(n,p.HASH_BANG,l&&l.forceMainPage);o.isHttpsEnabled(n)&&function(e,n){var o=t.getDataItem(e,n);o&&(o.isHttpsEnabled=!0,a(e,n,o))}(n,c),o.isUsingUrlFormat(n,p.HASH_BANG)?s(n,c,p.HASH_BANG):u&&e.get(i.socialAPI,u)(d,(function(e){s(n,c,e?p.HASH_BANG:p.SLASH)}))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(48),r=n(6),i=n(71),a=n(131),s=n(133),c=n(130),u=n(56),l=n(484),p=n(102),d=n(103),g=n(106),f=n(195),m=n(104),v=n(72),E=n(132),y=n(36),I=n(2),S=n(22),h=n(47),P=n(197),A=n(40),T=n(46),_=g.getCodeAppInfoFromPS;function O(e,t){if(p.isPageFile(t)){var n=p.getFileName(t).replace(".js",""),o=e.pointers.components.getPage(n,I.VIEW_MODES.DESKTOP);o&&y.updatePagePlatformApp(e,o,S.WIX_CODE_APP_ID,!0)}}function C(e,t){return B(e,p.getParentFolderPath(t),!0)}function D(e,t){var n=C(e,t);n===t||M(e,n)||D(e,n),s.addChild(e,n.location,t)}function w(e,t){var n=C(e,t);s.removeChild(e,n.location,t)}function M(e,t){if(p.isSystemFolder(t))return!0;if(s.isChildrenExists(e,t.location))return!0;var n=C(e,t);return!!s.hasKnownChild(e,n.location,t)}function b(e){return"WD_COLLECTION_DELETED"===e.code}function R(t,n,o){var r=e.map(n,(function(t,n){return a.getVirtualDescriptor("".concat(o,"/").concat(n),(r=t,!e.isString(r)));var r}));s.loadChildren(t,"".concat(o,"/"),r)}function N(t,n){if(!p.isFile(n))return Promise.reject(new d.ArgumentError("fileDescriptor","filesAPI.readFile",n.location));var o=h.trace(t,{action:"DSFS.readFile",message:{file:n.location}});if(s.isFileReadable(t,n.location))return o({message:"read file from cache"}),Promise.resolve(s.readFile(t,n.location));var r=s.getSourceFilePath(t,n.location),i=a.getVirtualDescriptor(r,!1),c=m.isSchemaFile(n.location);return(c?P.get(_(t),m.getSchemaIdFromFilePath(n.location)).then((function(e){return JSON.stringify(e)})):a.readFile(_(t),i)).catch((function(o){return(c?function(e){return"WD_SCHEMA_DOES_NOT_EXIST"===e.code}(o)||b(o):function(t){return 404===e.get(t,"xhr.status")}(o))&&s.isFileExists(t,n.location)?null:Promise.reject(o)})).then((function(e){return s.loadFileContent(t,n.location,e),s.updateDuplicates(t,n.location,e),o({message:"read file from server"}),s.readFile(t,n.location)}),(function(e){var t=b(e)?h.levels.INFO:h.levels.ERROR,n=b(e)?e.message:e;throw o({message:n,level:t}),e}))}function x(t,n){var o=h.trace(t,{action:"DSFS.getChildren",message:{parent:n.location}});return function(){if(s.areChildrenLoaded(t,n.location))return Promise.resolve({didExistInCache:!0});return(m.isSchemaFile(n.location)?P.list(_(t)).then((function(n){var o="".concat(E.SCHEMAS,"/");function r(e){return"".concat(o+e.id,".json")}e(n).tap((function(n){e.forEach(n,(function(e){s.loadFileContent(t,r(e),JSON.stringify(e))}))})).groupBy((function(e){return e.namespace?"".concat(o+e.namespace,"/"):o})).mapValues((function(n){return e.map(n,(function(e){return B(t,r(e),!1)}))})).tap((function(n){var r=e(n).keys().without(o).value(),i=e.map(r,(function(e){return B(t,e,!0)})),a=e.get(n,o,[]);n[o]=i.concat(a)})).forEach((function(e,n){s.loadChildren(t,n,e)}))})):k(t,{origin:Y.GET_CHILDREN}).then((function(){return a.getChildren(_(t),n)})).then((function(e){s.loadChildren(t,n.location,e)}))).then((function(){return{didExistInCache:!1}}))}().then((function(e){return{children:s.getChildren(t,n.location),didExistInCache:e.didExistInCache}})).then((function(t){var n=t.didExistInCache?"read from cache":"read from server";return o({message:{message:n,first10Children:e.take(t.children,10)}}),t.children}),(function(e){throw o({message:e,level:h.levels.ERROR}),e}))}function L(){return a.getRoots()}function B(e,t,n){return a.getVirtualDescriptor(t,n)}function F(e){var t=e.pointers.wixCode.getWixCodeModel(),n=e.dal.get(t),r=A.getExistingWixCodeAppFromPS(e),i=e.siteAPI.getAllRenderedRootIds().filter((function(t){return y.pageHasPlatformApp(e,t,S.WIX_CODE_APP_ID)}));return Promise.all(i.map((function(t){var i="".concat(t,".js"),a={wixCode:e.dal.get(e.pointers.wixCode.getRoot()),serviceTopology:e.dal.get(e.pointers.general.getServiceTopology()),viewMode:"preview"},s=o.wixCodeUserScriptsService.getUserCodeUrl(i,t,n,r,a);return T.sendRequestObj({url:s,headers:{Accept:"*/*"},contentType:"text/plain",type:"GET",dataType:"text",mode:"no-core"}).catch((function(){}))})))}function k(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).origin,n=void 0===t?"MISSING":t,o=h.trace(e,{action:"DSFS.flush",params:{flushOrigin:n}});return new Promise((function(t,n){e.setOperationsQueue.flushQueueAndExecute((function(){var r=s.getChanges(e);if(s.isChangesEmpty(r))return o({message:"no changes"}),void t();i.ensureAppIsWriteable(e),l.save(e).then((function(){return F(e)})).then(a,c).then(t,n)}))}));function a(){r.executeHook(r.HOOKS.WIX_CODE.FLUSH),o()}function c(t){throw function(t){var n=v.safeGetStatusCode(t),o=v.safeGetErrorCode(t);400===n&&10009===o&&i.handleAppIsReadOnlyServerError(e)}(t),o({message:t,level:h.levels.ERROR}),t}}var U=function(e){!function(e){s.deleteFolder(e,E.SCHEMAS)}(e),W(e).forEach((function(e){e()}))},H=function(e){s.deleteFile(e,"backend/authorization-config.json")};function V(e,t){var n=W(e),o=n.indexOf(t);-1!==o&&n.splice(o,1)}var G=new t.SiteDataPrivates;function W(e){var t=e.siteDataAPI.siteData;return G.has(t)||G.set(t,[]),G.get(t)}var Y={ROUTERS_PAGE:"ROUTERS_PAGE",ROUTERS_ROUTES:"ROUTERS_ROUTES",MOVE_FILE:"MOVE_FILE",GET_CHILDREN:"GET_CHILDREN",DELETE_ITEM:"DELETE_ITEM",LOCAL_MODE_INIT_EDIT:"LOCAL_MODE_INIT_EDIT"};return{copyFile:function(e,t,n,o){if(!p.isFile(t))return Promise.reject(new d.ArgumentError("fileDescriptor","filesAPI.copyFile",t.location));if(!p.isFolder(n))return Promise.reject(new d.ArgumentError("targetFolderDescriptor","filesAPI.copyFile",n.location));var r=n.location+o,c=a.getVirtualDescriptor(r,!1);if(O(e,c),s.isFileExists(e,t.location)){var u=s.readFile(e,t.location);s.writeFile(e,r,u)}else s.markFileForDuplication(e,t.location,r);return D(e,c),i.ensureAppIsWriteable(e)},writeFile:function(e,t,n){var o=n||"",r=t.location==="".concat(E.SCHEMAS,"/$commands/invalidateCache"),a=t.location==="".concat(E.BACKEND,"/$commands/invalidateAuthorizationConfig");if(r)return U(e),Promise.resolve();if(a)return H(e),Promise.resolve();if(!p.isFile(t))return Promise.reject(new d.ArgumentError("fileDescriptor","filesAPI.writeFile",t.location));if(m.isSchemaFile(t.location)&&!m.isValidContent(o))return Promise.reject(new Error("Invalid file content"));var c=C(e,t);if(!M(e,c)&&p.isInsideFolder(L().pages,t))return Promise.reject(new Error("cannot write to unknown folder: ".concat(c.location)));O(e,t);var u=s.isFileExists(e,t.location);return s.writeFile(e,t.location,o),D(e,t),Promise.all([!u&&f.isUndoableFile(t.location)?N(e,t):Promise.resolve(),i.ensureAppIsWriteable(e)]).then((function(){return t}))},loadAllFiles:function(t){return a.readAllFiles(_(t)).then((function(n){var o=n.filter((function(e){var t=e.path;return!m.isSchemaFile(t)})),r=e.reduce(o,(function(t,n){var o=n.path,r=n.content;return e.set(t,o.split("/"),r)}),{});e.map(["public","backend"],(function(n){return function t(n){var o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;o=r,e.isString(o)?s.loadFileContent(n,i,r):(R(n,r,i),e.keys(r).forEach((function(e){return t(n,r[e],"".concat(i,"/").concat(e))})))}(t,r[n],[n])}))}))},readFile:N,move:function(t,n,o,r){if(!p.isFile(n))return Promise.reject(new d.ArgumentError("fileDescriptor","filesAPI.moveFile",n.location));if(!p.isInsideFolder(o,n))return Promise.reject(new d.FileSystemError("Cannot move files between folders"));if(p.isPageFile(n))return Promise.reject(new d.FileSystemError("Cannot move page files"));var u=h.trace(t,{action:"DSFS.moveFile",message:{file:n.location,newName:r}});return c.notifyItemModified(t,n),i.ensureAppIsWriteable(t).then(e.partial(k,t,{origin:Y.MOVE_FILE})).then((function(){return a.move(_(t),n,o,r)})).then((function(e){return s.moveFile(t,n.location,e.location),D(t,e),w(t,n),u({message:{newFile:e.location}}),e}),(function(e){throw u({message:e,level:h.levels.ERROR}),e}))},deleteItem:function(t,n){if(p.isPageFile(n))return Promise.reject(new d.FileSystemError("Cannot delete page files"));if(p.isSystemFolder(n))return Promise.reject(new d.FileSystemError("Cannot delete system folders"));var o=h.trace(t,{action:"DSFS.deleteItem",message:{item:n.location}});return c.notifyItemModified(t,n),s.markPathAsDeleted(t,n.location,n.directory),i.ensureAppIsWriteable(t).then(e.partial(k,t,{origin:Y.DELETE_ITEM})).then((function(e){if(p.isFolder(n)?s.deleteFolder(t,n.location):s.deleteFile(t,n.location),w(t,n),m.isSchemaFile(n.location)){var r=C(t,n),i=s.getChildren(t,r.location);void 0!==i&&0===i.length&&(s.deleteFolder(t,r.location),w(t,r))}return o({message:e}),e}),(function(e){throw s.clearDeletedPath(t,n.location),o({message:e,level:h.levels.ERROR}),e}))},createFolder:function(e,t,n){var o=h.trace(e,{action:"DSFS.createFolder",message:{name:t,parent:n.location}});return i.ensureAppIsWriteable(e).then((function(){return a.createFolder(_(e),t,n)})).then((function(t){return D(e,t),o({message:{newFolder:t.location}}),t}),(function(e){throw o({message:e,level:h.levels.ERROR}),e}))},getChildren:x,findByExtension:function(t,n,o){var r=h.trace(t,{action:"DSFS.findByExtension",message:{parent:n.location,extension:o}});return a.findByExtension(_(t),n,o).then((function(t){return r({message:{first10Results:e.take(t,10)}}),t}),(function(e){throw r({message:e,level:h.levels.ERROR}),e}))},flush:k,loadAllFilesFromGrid:function t(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.values(L());return Promise.all(o.map((function(e){return e.directory?x(n,e).then((function(e){return t(n,e)})):N(n,e).then((function(t){return{path:e.location,content:t}}))}))).then((function(t){return e.flatten(t)}))},prefetchUserCode:F,getRoots:L,getViewerInfo:function(e){return{gridAppId:u.getGridAppId(e)}},getVirtualDescriptor:B,handleSchemaInvalidationActions:function(){r.registerHook(r.HOOKS.ADD_TPA.AFTER,U),r.registerHook(r.HOOKS.PLATFORM.APP_PROVISIONED,U),r.registerHook(r.HOOKS.PLATFORM.APP_UPDATED,U)},subscribeToSchemasInvalidation:function(t,n){return W(t).push(n),e.once(e.partial(V,t,n))},FLUSH_ORIGINS:Y}}()},function(e,t,n){var o,r,i;e.exports=(o=n(498),r=n(499),i=n(13),{save:o,build:r,seo:i.seo.ERRORS,social:{facebook:i.social.facebook.ERRORS},favicon:i.favicon.ERRORS,siteName:i.siteName.ERRORS})},function(e,t){e.exports=d},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(139),r=n(508),i=n(24),a=n(509),s=n(49),c=n(109),u="Type does not exist",l="Item does not match schema",p="Item does not exist",d="Deleted item does not exist",g={DRAFT:"Draft",SAVED:"Saved",PUBLISHED:"Published",MODIFIED:"Modified"};function f(e){throw new Error(e)}function m(t,n){return e.isObject(t)?(e.isArray(t)?e.map:e.mapValues)(t,(function(t){return e.isObject(t)?n(t):t})):t}function v(t,n){var o=t;return e.has(t,"links")&&((o=e.clone(t)).links=m(t.links,n)),e.forEach(o,(function(t,r){e.has(t,"links")&&(o[r]=e.clone(t),o[r].links=m(t.links,n))})),o}function E(t,n){return v(n,e.partial(r.convertWixappsDataToWLink,t))}function y(e){return v(e,r.convertWLinkToWixappsData)}function I(t,n,o){var r=s.getType(t,n)||f(u),i=e.map(e.filter(r.fields,S),"name"),a=e.keys(o);return 0===e.difference(a,i).length}function S(t){return e.isUndefined(t.computed)||!t.computed}function h(e,t,n){return e.dal.getByPath(i.getItemPath(t,n))}function P(t,n){return e.mapValues(n,(function(e){return"wix:Image"===e._type?o.resolveImageData(e,t):e}))}return{STATES:g,createItem:function(n,o,r){var c=t.guidUtils.getUniqueId(),p=function(e,t,n){return{_iid:e,_type:t,_createdAt:n,_updatedAt:n,_state:g.DRAFT}}(c,o,a.getCurrentTime(n)),d=e.omit(e.cloneDeep(r)||{},e.keys(p).concat("_permissions"));if(!I(n,o,d=y(d)))throw new Error(l);return d=e.assign(function(t,n){var o={},r=s.getType(t,n)||f(u);return e.forEach(r.fields,(function(t){e.isUndefined(t.defaultValue)||(o[t.name]=e.clone(t.defaultValue))})),o}(n,o),d,p),n.dal.full.setByPath(i.getItemPath(o,d._iid),d),c},updateItem:function(t,n,o,r){if(!I(t,n,r))throw new Error(l);r=y(r);var s=h(t,n,o)||f(p);e.forOwn(r,(function(t,n){s[n]=e.isString(t)?t:e.defaults(t,s[n])})),s._updatedAt=a.getCurrentTime(t),s._state===g.PUBLISHED&&(s._state=g.MODIFIED),t.dal.full.setByPath(i.getItemPath(n,o),s)},deleteItem:function(e,t,n){h(e,t,n)||f(p),e.dal.full.removeByPath(i.getItemPath(t,n)),c.deleteItemFromAllManualDataSelectors(e,n)},restoreItem:function(e,t,n){var o=e.dal.getByPath(i.getDeletedItemPath(t,n))||f(d);delete o._deletedAt,e.dal.full.removeByPath(i.getDeletedItemPath(t,n)),e.dal.full.setByPath(i.getItemPath(t,n),o)},setAllItemsOfType:function(e,t,n){e.dal.full.setByPath(i.getBaseItemsPath(t),n)},getAllItemsOfType:function(t,n){var o=t.dal.get(t.pointers.general.getServiceTopology()),r=t.dal.getByPath(i.getBaseItemsPath(n))||{};return e(r).mapValues(e.partial(P,o)).mapValues(e.partial(E,t)).value()}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(24),r=n(49),i=n(41),a="Type does not exist",s="Cannot created multiple views with the same type, name & format",c="View does not exist",u="Must provide a view definition",l="Array";function p(e){throw new Error(e)}function d(t,n,i){if(n.forType!==l&&!r.getType(t,n.forType))throw new Error(a);var s=e.cloneDeep(n);f(s,n.name,i),s.name=i;var c=g(s.forType,s.name,s.format);return t.dal.full.setByPath(o.getViewPath(c),s),c}function g(e,t,n){return i.viewsUtils.getViewId(e,t,n)}function f(t,n,o){e.forEach(t,(function(r,i){e.isObject(r)?f(r,n,o):r===n&&(t[i]=o)}))}function m(t,n){var r=t.dal.getKeysByPath(o.getBaseViewsPath());return e.filter(r,(function(e){return i.viewsUtils.getViewNameFromId(e)===n}))}function v(e,t){return e.dal.getByPath(o.getViewPath(t))}return{getAllViewsByName:function(t,n){var r=m(t,n),i=e.map(r,(function(e){return t.dal.getByPath(o.getViewPath(e))}));return e.zipObject(r,i)},createView:function(e,n){return d(e,n,"".concat(n.name||"viewDef","_").concat(t.guidUtils.getUniqueId()))},createViewsWithSameName:function(n,o){var r="".concat(o[e.keys(o)[0]].name||"viewDef","_").concat(t.guidUtils.getUniqueId());return function(t,n){var o=e.map(t,(function(e){return g(e.forType,n,e.format)}));if(e.uniq(o).length<o.length)throw new Error(s)}(o,r),e.map(o,(function(e){return d(n,e,r)}))},getViewById:v,getView:function(e,t,n,o){return v(e,g(t,n,o))},deleteAllViewsByName:function(t,n){var r=m(t,n);e.forEach(r,(function(e){t.dal.full.removeByPath(o.getViewPath(e))}))},replaceView:function(e,t,n){n||p(u);var r=v(e,t)||p(c);f(n,n.name,r.name),n.forType=r.forType,e.dal.full.setByPath(o.getViewPath(t),n)},setValueInView:function(e,t,n,r,i,a){var s=g(t,n,a),c=o.getViewPath(s);e.dal.full.setByPath(c.concat(r),i)}}}()},function(e,t,n){e.exports=function(){var e,t,o=n(264),r=n(61);function i(e){return e.siteAPI.getMainPageId()}function a(e,t,n,o){return e.siteAPI.getPageUrl(t,n,o)}return{getHomepageId:i,isMasterPage:function(e,t){return"masterPage"===t},isHomepage:function(e,t){return t===i(e)},registerPageDataChangedCallback:function(t){e=t},executePageDataChangedCallback:function(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e(t,n,o,r)},registerPageAddedCallback:function(e){t=e},executePageAddedCallback:function(e,n,o){t(e,n,o)},convertPageNameToUrl:function(e,t){return o(t,{custom:{_:"-"},symbols:!1})||"blank"},getCurrentUrl:function(e,t,n){return a(e,{pageId:e.siteAPI.getCurrentUrlPageId()},t,n)},getMainPageUrl:function(e,t,n){return a(e,{pageId:i(e)},t,n)},getPageUrl:a,isDynamicPage:function(e,t){return!!r.get.byPage(e,e.pointers.data.getDataItemFromMaster(t))}}}()},function(e,t,n){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),r=n(265),i=n(6),a=r.languageStatus,s=e.property("languageCode");function c(t,n){return e(t).map(s).includes(s(n))}function u(e){return t.multilingual.getCurrentLanguageCode(e)}function l(n,o){I(n,{languageCode:o})&&(t.multilingual.setCurrentLanguage(e.pick(n,["siteAPI","siteDataAPI","pointers","dal"]))(o),i.executeHook(i.HOOKS.MULTILINGUAL.AFTER_CHANGE_LANGUAGE,null,[n,o]))}function p(n,r){var i=n.dal.get(n.pointers.page.getAllPagesPointer());e.forEach(i,(function(i,a){var c=o({},s(r),e.cloneDeep(t.multilingual.EMPTY_TRANSLATION_DATA)),u=n.pointers.page.getPageTranslations(a,n.siteAPI.isExperimentOpen.bind(n.siteAPI)),l=n.dal.fullJsonDal.get(u),p=e.assign(c,l);n.dal.fullJsonDal.set(u,p)}))}function d(t){return!e.isEmpty(m(t))}function g(t,n,o){var r=m(t);if(c(r,n)){var i=e.assign({},n,{status:o});if(v(t,r.map((function(e){return s(e)===s(n)?i:e}))),o===a.DELETED&&u(t)===n.languageCode)l(t,f(t).languageCode)}}function f(e){var t=e.dal,n=e.pointers;return t.get(n.multilingual.originalLanguage())}function m(e){var t=e.dal,n=e.pointers;return t.get(n.multilingual.translationLanguages())}function v(e,t){var n=e.dal,o=e.pointers;return n.set(o.multilingual.translationLanguages(),t)}function E(t){var n=t.dal,o=t.pointers;return e.reject(m({dal:n,pointers:o}),{status:a.DELETED})}function y(t){return e.concat(f(t),E(t))}function I(e,t){return c(y(e),t)}function S(e,t){var n=e.pointers.components.getPageOfComponent(t);return e.dal.fullJsonDal.get(n).id}function h(t,n,o,r){e.forEach(m(t),(function(i){var a=i.languageCode,s=t.pointers.multilingualTranslations.translationDataItem(n,a,o);if(t.dal.fullJsonDal.isExist(s)){var c=t.dal.fullJsonDal.get(s),u=e.isFunction(r)?r(c):e.merge(c,r);t.dal.fullJsonDal.set(s,u)}}))}return{multilingual:{isEnabled:d},current:{get:u,set:l},original:{get:f,set:function(e,t){if(!I(e,t)){var n=s(f(e));t.status=a.ACTIVE;var o=e.dal,r=e.pointers;o.set(r.multilingual.originalLanguage(),t),u(e)===n&&l(e,s(t))}}},public:{get:function(t,n){return c(function(t){return e.filter(y(t),{status:a.ACTIVE})}(t),n)}},status:{set:g},get:E,getFull:m,add:function(e,t){I(e,t)||(v(e,m(e).concat(t)),p(e,t))},remove:function(t,n){var o=m(t),r={languageCode:s(n)};if(e.find(o,r)){var i=e.reject(o,r),c=e.filter(i,{status:a.ACTIVE});e.isEmpty(c)&&g(t,f(t),a.ACTIVE);var u=t.dal,l=t.pointers;u.set(l.multilingual.translationLanguages(),i)}},init:function(t,n){var o=n.originalLanguage,r=n.translationLanguages;t.dal.set(t.pointers.multilingual.originalLanguage(),o),t.dal.set(t.pointers.multilingual.translationLanguages(),r),function(t){var n=t.dal.get(t.pointers.page.getAllPagesPointer());e.forEach(n,(function(n,o){var r=t.pointers.page.getPageTranslations(o,t.siteAPI.isExperimentOpen.bind(t.siteAPI)),i=t.dal.fullJsonDal.get(r);e.isUndefined(i)&&t.dal.fullJsonDal.set(r,{})}))}(t),e.forEach(r,e.partial(p,t)),l(t,s(o)||null)},copyTranslationData:function(t,n,o,r){t.siteDataAPI.getActionQueue().runImmediately((function(){var i=S(t,n);e.forEach(o,(function(n,o){e.forEach(n,(function(n,a){if(r[a]){var s=e.cloneDeep(n);s.id=r[a];var c=t.pointers.multilingualTranslations.translationDataItem(i,o,s.id);t.dal.fullJsonDal.set(c,s)}}))})),t.siteDataAPI.createDisplayedNode(n)}))},patchPageTranslations:function(e,t,n){h(e,"masterPage",t,n)},patchDataItemTranslations:function(e,t,n,o){h(e,t,n,o)},copyDataItemTranslations:function(t,n,o,r,i){e.forEach(m(t),(function(a){var s=a.languageCode,c=t.pointers.multilingualTranslations.translationDataItem(n,s,o);if(t.dal.fullJsonDal.isExist(c)){var u=t.dal.fullJsonDal.get(c),l=e.assign({},e.cloneDeep(u),i),p=t.pointers.multilingualTranslations.translationDataItem(r,s,l.id);t.dal.fullJsonDal.set(p,l)}}))},isCurrentLanguageSecondary:function(e){return d(e)&&f(e).languageCode!==u(e)},component:{getTranslations:function(t,n){var r=S(t,n),i=t.pointers.page.getPageTranslations(r,t.siteAPI.isExperimentOpen.bind(t.siteAPI)),a=t.dal.fullJsonDal.get(i),s=e.concat(n,t.pointers.components.getChildrenRecursively(n));return e.reduce(a,(function(n,i,a){return e.forEach(s,(function(i){var s=function(t,n){var o=t.pointers.getInnerPointer(n,"dataQuery"),r=t.dal.fullJsonDal.get(o);return e.isUndefined(r)?null:r.replace("#","")}(t,i);if(!e.isNull(s)){var c=t.pointers.multilingualTranslations.translationDataItem(r,a,s);if(t.dal.fullJsonDal.isExist(c)){var u=t.dal.fullJsonDal.get(c);e.merge(n,o({},a,o({},s,u)))}}})),n}),{})}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(155),r=n(156),i=n(394),a=function(e,t,n){return e.pointers.getInnerPointer(t,n)};function s(e,t,n,o){var r=e.pointers.full.components.getChildrenContainer(t),i=a(e,r,n),s=a(e,r,o),c=e.dal.full.get(i),u=e.dal.full.get(s);e.dal.transaction((function(){e.dal.full.set(i,u)})),e.dal.full.set(s,c)}var c=function(e,t,n,o){return i.shouldUseMasterPageArrangement(e,n)?i.findValidIndexForChild(e,t,n,o):o};function u(t,n){var a=t.pointers.components.getParent(n);if(i.shouldUseMasterPageArrangement(t,a))return i.getNextCompIndexInDisplayedJson(t,n);var s=t.pointers.components.getChildren(a),c=e.findIndex(s,{id:n.id});return o.findNext(s,(function(e){return r.canSwapComponents(t,n,e)}),c)}function l(t,n){var a=t.pointers.components.getParent(n);if(i.shouldUseMasterPageArrangement(t,a))return i.getPrevCompIndexInDisplayedJson(t,n);var s=t.pointers.components.getChildren(a),c=e.findIndex(s,{id:n.id});return o.findPrev(s,(function(e){return r.canSwapComponents(t,n,e)}),c)}var p=function(e){return function(t,n){return!!r.isCompArrangeable(t,n)&&e(t,n)>-1}},d=p(l),g=p(u);return{getNewIndex:c,getNewIndexForNewComp:function(e,t,n){return i.shouldUseMasterPageArrangement(e,n)?i.findValidIndexForNewChild(e,t,n):null},moveToIndex:function(t,n,o){if(!function(t,n,o){if(!r.isCompArrangeable(t,n))return!1;var i=t.pointers.components.getParent(n),a=t.pointers.components.getChildren(i);return e.isFinite(o)&&o>=0&&o<a.length}(t,n,o))throw new Error("index is out of children's bounds, cannot move to index");var i=t.pointers.full.components.getParent(n),a=t.pointers.full.components.getChildrenContainer(i),s=t.pointers.full.components.getChildren(i);if(e.findIndex(s,{id:n.id})!==o){var u=c(t,n,i,o),l=t.dal.full.get(n);t.dal.full.remove(n),t.dal.full.push(a,l,n,u)}},moveBackward:function(n,o){if(!d(n,o))throw new Error("component is the bottom one, cannot move backward");var r=n.pointers.components.getParent(o);if(i.shouldUseMasterPageArrangement(n,r)&&i.isMasterPageSection(n,o))return i.moveMasterPageSectionBackward(n,o);var a=function(e,t){var n=e.pointers.components.getParent(t),o=l(e,t);return e.pointers.components.getChildren(n)[o]}(n,o),c=n.pointers.full.components.getChildren(r);s(n,r,e.findIndex(c,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(o.id)}),e.findIndex(c,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(a.id)}))},moveForward:function(n,o){if(!g(n,o))throw new Error("component is the top one, cannot move forward");var r=n.pointers.components.getParent(o);if(i.shouldUseMasterPageArrangement(n,r)&&i.isMasterPageSection(n,o))return i.moveMasterPageSectionForward(n,o);var a=function(e,t){var n=e.pointers.components.getParent(t),o=u(e,t);return e.pointers.components.getChildren(n)[o]}(n,o),c=n.pointers.full.components.getChildren(r);s(n,r,e.findIndex(c,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(o.id)}),e.findIndex(c,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(a.id)}))},canMoveForward:g,canMoveBackward:d,moveToFront:function(e,t){if(!g(e,t))throw new Error("component is the top one, cannot move to front");var n=e.pointers.full.components.getParent(t);if(i.shouldUseMasterPageArrangement(e,n))return i.moveMasterPageChildToFront(e,t);var o=e.dal.full.get(t);e.dal.full.remove(t);var r=e.pointers.full.components.getChildrenContainer(n);e.dal.full.push(r,o,t)},moveToBack:function(n,o){if(!d(n,o))throw new Error("component is the bottom one, cannot move to back");var r=n.pointers.full.components.getParent(o);if(i.shouldUseMasterPageArrangement(n,r))return i.moveMasterPageChildToBack(n,o);var a=n.pointers.full.components.getChildrenContainer(r),s=n.dal.full.get(a),c=e.findIndex(s,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(o.id)}),u=s.splice(c,1)[0];s.unshift(u),n.dal.full.set(a,s)},fixIndexForMasterPageChild:function(n,o){var r=n.pointers.full.components.getParent(o);if(i.shouldUseMasterPageArrangement(n,r)){var a=function(n,o){var r=n.pointers.full.components.getParent(o),i=n.pointers.full.components.getChildren(r);return e.findIndex(i,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(o.id)})}(n,o),s=n.pointers.full.components.getChildrenContainer(r),u=c(n,o,r,a);if(a!==u){var l=n.dal.full.get(o);n.dal.full.remove(o),n.dal.full.push(s,l,o,u)}}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3);function o(e,n){return t.getConnectionsItem(e,n)||[]}function r(t,n){return e.reject(o(t,n),{type:"WixCodeConnectionItem"})}return{getConnections:o,getPlatformAppConnections:r,isCompConnectedToController:function(t,n,r){return e.some(o(t,n),{controllerRef:r})},getPrimaryConnection:function(t,n){return e.find(r(t,n),{isPrimary:!0})}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(14),r=n(44),i={},{createInitialGapMap:function(e){var t=e.siteAPI.getSiteId();return i[t]||(i[t]=function(e){var t=o.getViewMode(e),n=e.pointers.components.getHeader(t),i=e.pointers.components.getFooter(t),a=e.pointers.components.getPagesContainer(t),s=r.getComponentLayout(e,n),c=r.getComponentLayout(e,a),u=r.getComponentLayout(e,i),l=s.y+s.height,p=c.y+c.height;return{aboveHeader:s.y,abovePagesContainer:c.y-l,aboveFooter:u.y-p}}(e)),i[t]},getInitialGapMap:function(e){return i[e.siteAPI.getSiteId()]}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1);function o(e,n){return t.boundingLayout.getBoundingLayout(n)}function r(t){return e.includes(["vw","pct"],t)}function i(t,n,o){var i=e.keys(t);if(e.includes(i,"px"))t.px+=n;else{var a=e.find(i,r);t[a]+=n/o*100,t[a]=parseFloat(t[a].toFixed(2))}}function a(t,n,o){this.ps=t,this.compPointer=n;var r=s(t,n);this.newPositionAndSize=e.assign({},r,o),this.positionAndSizeDiff=function(t,n){return e.mapValues(t,(function(t,o){return e.isFinite(n[o])?n[o]-t:0}))}(r,o),this.compLayout=t.dal.get(t.pointers.getInnerPointer(n,"layout"))}function s(n,o,r){var i=r||n.dal.get(n.pointers.getInnerPointer(o,"layout"));if(!i.docked)return e.pick(i,["x","y","width","height"]);var a=function(e,t){var n=e.pointers.components.getParent(t),o=e.siteAPI.getSiteMeasureMap();return{width:o.width[n.id],height:o.height[n.id]}}(n,o),s=n.siteAPI.getScreenSize(),c=n.siteAPI.getSiteMeasureMap(),u=n.pointers.components.getPageOfComponent(o),l=t.layoutUtils.getRootWidth(c,u.id,n.siteAPI.getSiteWidth()),p=n.siteAPI.getSiteX(),d=t.layoutUtils.getRootLeft(c,u.id,p);return t.positionAndSize.getPositionAndSize(i,a,s,l,d)}return a.prototype.value=function(){return this.compLayout},a.prototype.updateVerticalLayout=function(){if(0===this.positionAndSizeDiff.y&&0===this.positionAndSizeDiff.height)return this;if(t.layoutUtils.isVerticallyDocked(this.compLayout)&&!t.layoutUtils.isVerticallyStretchedToScreen(this.compLayout)){var e=function(e,t,n){if(n.fixedPosition)return e.siteAPI.getSiteMeasureMap().clientHeight;var o=e.pointers.components.getParent(t);return e.siteAPI.getSiteMeasureMap().height[o.id]}(this.ps,this.compPointer,this.compLayout);!function(e,t,n){var o=e.docked;if(o.top&&t.y&&i(o.top,t.y,n),o.bottom){var r=-1*(t.y+t.height);r&&i(o.bottom,r,n)}if(o.vCenter){var a=t.height/2+t.y;a&&i(o.vCenter,a,n)}o.top&&o.bottom||(e.height+=t.height)}(this.compLayout,this.positionAndSizeDiff,e)}else this.compLayout.y+=this.positionAndSizeDiff.y,this.compLayout.height+=this.positionAndSizeDiff.height;return this},a.prototype.updateHorizontalLayout=function(){if(0===this.positionAndSizeDiff.x&&0===this.positionAndSizeDiff.width)return this;if(t.layoutUtils.isHorizontallyDocked(this.compLayout)){var e=function(e,n,o){if(o.fixedPosition||t.dockUtils.isHorizontalDockToScreen(o))return e.siteAPI.getSiteMeasureMap().clientWidth;var r=e.pointers.components.getParent(n);return e.siteAPI.getSiteMeasureMap().width[r.id]}(this.ps,this.compPointer,this.compLayout);!function(e,t,n){var o=e.docked;if(o.left&&t.x&&i(o.left,t.x,n),o.right){var r=-1*(t.x+t.width);r&&i(o.right,r,n)}if(o.hCenter){var a=t.width/2+t.x;a&&i(o.hCenter,a,n)}o.left&&o.right||(e.width+=t.width)}(this.compLayout,this.positionAndSizeDiff,e)}else this.compLayout.x+=this.positionAndSizeDiff.x,this.compLayout.width+=this.positionAndSizeDiff.width;return this},a.prototype.keepAspectRatioIfNeeded=function(){return t.layoutUtils.isAspectRatioOn(this.compLayout)&&(this.compLayout.aspectRatio=t.layoutUtils.calcAspectRatio(this.newPositionAndSize.width,this.newPositionAndSize.height)),this},{applyPositionAndSizeOnCurrentLayoutSchema:function(e,t,n){return function(e,t,n){return new a(e,t,n)}(e,t,n).updateVerticalLayout().updateHorizontalLayout().value()},getBoundingLayout:o,getComponentLayout:function(t,n){var r=t.dal.get(t.pointers.getInnerPointer(n,"layout"));return r?(r.docked&&(e.assign(r,s(t,n)),delete r.docked),e.merge(r,{bounding:o(0,r)})):null},getPositionAndSize:s}}()},function(e,t){e.exports=g},function(e,t,n){e.exports=function(){var e=n(0),t=n(14),o={SINGLE_POST:"7326bfbb-4b10-4a8e-84c1-73f776051e10",FEED:"79f391eb-7dfc-4adf-be6e-64434c4838d9"};function r(t,n,o){var r=e(n).thru(t.pointers.data.getDataItem).thru(t.dal.get).value();return r&&"AppPage"===r.type&&"AppPage"===r.appPageType&&r.appPageId===o}return{isSinglePost:function(e,t){return r(e,t,o.SINGLE_POST)},isFeed:function(e,t){return r(e,t,o.FEED)},isBlogPage:function(e,n){var o=t.getViewMode(e),r=e.pointers.components.getPage(n,o),i=e.pointers.getInnerPointer(r,"componentType");return"wixapps.integration.components.AppPage"===e.dal.get(i)}}}()},function(e,t){e.exports=function(e,t){var n=e.isMobileView();return{x:n?t.x:0,width:n?e.getSiteWidth():e.getSiteMeasureMap().clientWidth}}},function(e,t,n){e.exports=function(){var e=n(25),t="wysiwyg.viewer.components.Group";function o(n,o){return e.getType(n,o)===t}return{isGroup:o,isGroupedComponent:function(t,n){return o(t,e.getContainer(t,n))},getGroupComponentType:function(){return t}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),o=n(8),r=n(2),i=n(19).services.schemasService;function a(e,t){return e.pointers.full.components.getDesktopPointer(t)}function s(e,t){return!o.public.isMobileOnly(e,t)}return{getComponentDataSchemasByType:function(n,o){if(n&&o){var r=i.getDefinition(o);if(!r)throw new Error("component type: ".concat(o," is unsupported"));var a=r.dataTypes||[];return e.map(a,(function(e){return t.getDataSchemaByType(n,e)}))}return null},getComponentPropertiesByType:function(e,n){if(e&&n){var o=i.getDefinition(n);if(!o)throw new Error("component type: ".concat(n," is unsupported"));var r=o.propertyType;if(r)return t.getPropertiesSchemaByType(e,r)}return null},resetMobileComponentProperties:function(e,n){if(e&&n&&s(e,n)){var o=a(e,n),r=t.getPropertiesItem(e,o);t.deletePropertiesItem(e,n),t.updatePropertiesItem(e,n,r)}},splitMobileComponentProperties:function(e,n){if(e&&n&&s(e,n)){var o=a(e,n),i=t.getPropertiesItem(e,o),c=e.dal.get(e.pointers.getInnerPointer(o,"propertyQuery")).replace("#",""),u=r.DOM_ID_PREFIX.MOBILE+c;t.setPropertiesItem(e,n,i,u),e.dal.set(e.pointers.getInnerPointer(n,"propertyQuery"),u)}},isMobileComponentPropertiesSplit:function(n,r){if(o.public.isMobileOnly(n,r))return!0;var i=a(n,r),s=t.getPropertyItemPointer(n,r),c=t.getPropertyItemPointer(n,i),u=s&&s.id,l=c&&c.id;return!e.isEqual(u,l)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(26),o=n(1),r=n(8),i=n(2),a=n(29),s=function(e,t,n){return!!r.public.getMobileConversionConfigByName(e,n,"desktopOnly",t)};function c(t,n,o){var a=t.pointers.components.getPage(n,i.VIEW_MODES.MOBILE),s=t.pointers.full.components.getComponent(o.id,a);return e.get(r.public.isMobileOnly(t,s),"mobileOnly",!1)}return{getHiddenAndShownComponents:function(n,r){var i=n.pointers.page.getPagePointer(r),u=a.getMobileActiveModesMap(n,r),l=e.set({},r,u),p=o.fullToDisplayedJson.getDisplayedJson(n.dal.full.get(i),l,r).structure;if(p.mobileComponents){var d=o.dataUtils.getAllCompsInStructure(p,!1,e.negate(s.bind(null,n,r))),g=o.dataUtils.getAllCompsInStructure(p,!0,e.negate(c.bind(null,n,r)));return{hiddenComponents:t.structuresComparer.getComponentIdsAddedToDesktopStructure(d,g),shownComponents:e.intersection(e.keys(g),e.keys(d))}}},hasMobileStructure:function(t){var n=t.pointers.components.getMasterPage(i.VIEW_MODES.MOBILE);return!e.isEmpty(t.pointers.components.getChildren(n))}}}()},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(93),r=n(2),i=n(3),a=n(8),s=n(23),c=n(50),u=(n(1),n(5)),l=n(120),p=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.VIEW_MODES.DESKTOP;return e.pointers.full.components.getComponent(t,e.pointers.components.getPage(n,o))},d=function(e,t){return a.public.isHiddenable(e,t)},g=function(t,n){return e.get(i.getMobileHintsItem(t,n),"hidden",!1)},f=function(t){return e.map(t.pointers.page.getNonDeletedPagesPointers(!0),"id")};function m(t,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(o&&!l.isMobileOnlyComponent(t,o.id)){s=s||t.pointers.full.components.getPageOfComponent(o).id;var c=!n.hidden||d(t,o),u=g(t,o)!==n.hidden;if(c&&u&&i.updateMobileHintsItem(t,o,n),a.updateChildren)!function(t,n,o,r,i){var a=t.pointers.full.components.getChildren(o);e.forEach(a,(function(e){var o=p(t,e.id,i);m(t,n,o,r,i)}))}(t,n,a.childrenSourceView===r.VIEW_MODES.MOBILE?p(t,o.id,s,r.VIEW_MODES.MOBILE):o,a,s)}}var v=function(e,t,n,o){var r=p(e,t,n);(function(e,t){return e.dal.displayedJsonDal.isExist(t)})(e,r)&&m(e,{hidden:o},r)};function E(n,i){var a=t.getHiddenAndShownComponents(n,i);a&&(!function(t,n,i){if(n===r.MASTER_PAGE_ID){var a=["SITE_FOOTER","PAGES_CONTAINER","SITE_PAGES","SITE_HEADER"],u=e.remove(i.hiddenComponents,(function(t){return e.includes(a,t)}));if(!e.isEmpty(u)){var l;(l=i.shownComponents).push.apply(l,o(u));var p=(new Error).stack;s.error(t,c.MOBILE_STRUCTURE_MANDATORY_ELEMENT_MISSING,{missingComponents:u.toString(),stack:p})}}}(n,i,a),e.forEach(a.hiddenComponents,(function(e){return v(n,e,i,!0)})),e.forEach(a.shownComponents,(function(e){return v(n,e,i,!1)})))}function y(e,t){var n=e.pointers.components.getPage(t,r.VIEW_MODES.DESKTOP),o=e.pointers.getInnerPointer(n,"mobileHintsQuery");return!!e.dal.get(o)}function I(n){if(t.hasMobileStructure(n)){var o=function(e){if(u.isOpen("sv_patchDataDisablesMobileHintsInit")){var t=e.pointers.general.getAutoSaveInnerPointer("changesApplied")||!1;return t&&e.dal.get(t)}return!1}(n),r=f(n);e.forEach(r,(function(e){var t=y(n,e);o&&t||(E(n,e),S(n,e))}))}}function S(e,t){if(!y(e,t)){var n=e.pointers.components.getPage(t,r.VIEW_MODES.DESKTOP);i.updateMobileHintsItem(e,n,{hidden:!1})}}return{initialize:function(e){I(e)},updateProperty:m,updateHiddenComponentsOnPage:E,updateHiddenComponents:function(n,o){t.hasMobileStructure(n)&&(o=o||f(n),e.forEach(o,(function(e){return E(n,e)})))},markPageAsInitialized:S,testAPI:{initializeMobileHints:I}}}()},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(5),i={conversionType:"FULL",heuristicStrategy:"default"},a={default:{detectSemanticGroups:!0,fixMasterPageStructureOrder:!1},appbuilder:{keepEmptyTextComponents:!0,keepNotRecommendedMobileComponents:!0,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,keepInvisibleComponents:!0},onboarding:{detectSemanticGroups:!1},accessibility:{keepNotRecommendedMobileComponents:!0,detectSemanticGroups:!1,analyzeOnly:!0}},s={FULL:{},MERGE_ALL_PAGES:{keepEmptyTextComponents:!1,keepNotRecommendedMobileComponents:!1,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,fixMasterPageStructureOrder:!1},MERGE_UNHIDE:{keepEmptyTextComponents:!0,keepNotRecommendedMobileComponents:!0,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,keepInvisibleComponents:!0,fixMasterPageStructureOrder:!1},MERGE_PRESET:{keepEmptyTextComponents:!0,keepNotRecommendedMobileComponents:!0,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,fixMasterPageStructureOrder:!1},MERGE_DISPLAY_MODE:{keepEmptyTextComponents:!1,keepNotRecommendedMobileComponents:!0,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,fixMasterPageStructureOrder:!1}},{getConversionSettings:function(e){return e=o.defaults({},e,i),o.assign({applySemanticRules:!0,useOverlapRules:r.isOpen("sv_mobileOverlapRules"),reparentMobileSOAP:r.isOpen("sv_reparentMobileSOAP")},s[e.conversionType],a[e.heuristicStrategy])}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(4),o=n(8),r=n(443),i={"wysiwyg.viewer.components.BoxSlideShow":r,"wysiwyg.viewer.components.StateBox":r,"wysiwyg.viewer.components.StateStrip":r,"wysiwyg.viewer.components.StripContainerSlideShow":r};function a(e,t,n){if(!e||!e.dal.isExist(t)||!function(e,t){return i[o.getComponentType(e,t)]}(e,t))throw new Error("invalid args");var r=o.getComponentType(e,t);return i[r][n].call(this,e,t,r)}function s(e,t,n,o){if(!e||!e.dal.isExist(t)||!i[n])throw new Error("invalid args");return i[n][o].call(this,e,t,n)}function c(e,t,n){return s(e,t,n,"canBeMasterChild")}return{getMasterChildren:function(e,t){return a(e,t,"getMasterChildren")},getNonMasterChildren:function(e,t){return a(e,t,"getNonMasterChildren")},isMasterChild:function(e,t,n){return s(e,t,n,"isMasterChild")},toggleMasterChild:function(e,t,n){if(!c(e,t,n))throw new Error("component can't be shown on all states");return s(e,t,n,"toggleMasterChild")},canBeMasterChild:c,getParentCompWithOverflowHidden:function(n,r){var a=function(n,r){if(n.pointers.components.isPage(r))return null;for(var a=t.getContainer(n,r);a;){var s=o.getComponentType(n,a);if(e.includes(e.keys(i),s))return s;a=t.getContainer(n,a)}return null}(n,r);return!!a&&s(n,r,a,"getParentCompWithOverflowHidden")}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(0),i={type:"Container",componentType:"wysiwyg.viewer.components.QuickActionBar",components:[],layout:{fixedPosition:!0},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-controlButtonBG":"1","alpha-controlButtonFG":"1","alpha-controlButtonBorderColor":"1","alpha-actionsBorderColor":"1","boxShadowToggleOn-actionsSHD":"false","boxShadowToggleOn-controlButtonSHD":"false",controlButtonBG:"#008afc",controlButtonFG:"#ffffff",controlButtonBorderSize:"0",controlButtonBorderColor:"#ffffff",actionsBorderSize:"0",actionsBorderColor:"#ffffff",colorScheme:"brand inv",controlButtonSHD:"0px 1px 4px 0px rgba(0,0,0,0.6)",actionsSHD:"0px 1px 4px 0px rgba(0,0,0,0.6)"},propertiesSource:{controlButtonBG:"value",controlButtonFG:"value",controlButtonBorderSize:"value",controlButtonBorderColor:"value",actionsBorderSize:"value",actionsBorderColor:"value",colorScheme:"value",controlButtonSHD:"value",actionsSHD:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.QuickActionBar",styleType:"custom"}},{quickActionIconsData:r={"3dots":{hash:"286a3b718f2e46d1bdceaea477f567db",color:"#C63A84",isFree:!0},"3dotsvertical":{hash:"5b8499dddc884b0c87c906f2945f7962",color:"#C63A84",isFree:!0},address:{hash:"51ecb8e1148b45ba827df5c5134801af",color:"#00B594"},album:{hash:"d709a69b4a714cebb65fc287d0630e75",color:"#733CA6"},arrowdown:{hash:"094cf2e688d74039954477cf851901a3",color:"#2AA3A9",isFree:!0},arrowup:{hash:"1f4ff05481fd413a96841c299ffc48f5",color:"#2AA3A9",isFree:!0},blog:{hash:"637cdaa62e924d7aad59381e66330fc5",color:"#60BC57",isFree:!0},booking:{hash:"a94c8289b0ea431c980dce3b6aa9d0a6",color:"#8754B5",isFree:!0},briefcase:{hash:"30310f1c574449d4bcf29c2549b61270",color:"#09262A",isFree:!0},chat:{hash:"55ef598f51c14f36ba4f0690cf28626f",color:"#2D41A9"},clock:{hash:"bed5fd23d3814f0bb299fd79f204fe55",color:"#1F3655",isFree:!0},clothes:{hash:"e46817a53c534c49b882f6ee07be5094",color:"#EA7A58",isFree:!0},contactform:{hash:"f0ca657289864c5b9edef58b618e6e5f",color:"#4D599B"},creditcard:{hash:"08268d30cd6044fba10cdbd0d8773b8e",color:"#8B572A",isFree:!0},currency:{hash:"b4542c951dd74a99a9e1b03b70faa8ea",color:"#606C18",isFree:!0},ecom:{hash:"c229237b026740dfb16cdb09ec871e71",color:"#03BEFD",isFree:!0},email:{hash:"e4dde6644597420b93af3ca1ccfa9683",color:"#BE1867"},events:{hash:"4285df5e7be04a75814382611597fba0",color:"#EC125A"},facebook:{hash:"a855d9a5d94e444a9ef9f8f8f9192a5a",color:"#3C5A99"},flickr:{hash:"e27433a598ef44c1ba46e7f00ac0a7a1",color:"#000000"},google_plus:{hash:"0a6ab2eef3f14015ada0a0ab109afbcc",color:"#3B3B3B"},heart:{hash:"1330065097db4eb9aab7c9ac4a1f9b86",color:"#FF001F",isFree:!0},home:{hash:"6e90c5e2acf844ceaa63078cf649d7d3",color:"#3D0045",isFree:!0},hotel:{hash:"9af8517dcdf0402191aca1d28b4c45a6",color:"#0ACDCD",isFree:!0},icecream:{hash:"7ab1cea0e9384ab9a0b5d8bc5d6033e6",color:"#FF87B0",isFree:!0},instegram:{hash:"b6218b8d6b2549ad8a560dc75771a395",color:"#000000"},linkedin:{hash:"149a816584cd44b997f3023a42716113",color:"#1670BB"},restaurant:{hash:"bf24cfb7a774404bbc82477c34ce816e",color:"#E05050",isFree:!0},phone:{hash:"4387e0ae8fd6412e9a988f77faa4f379",color:"#63C956"},whatsapp:{hash:"a3c153_f546f836e5ca40dcb6a1bc44a1f3bdd7",color:"#21D366"},pinterest:{hash:"01c31f7f2d44432498ca45e05a3cf675",color:"#E33F44"},present:{hash:"e81a40c1ebba4666aec6e813e8ada603",color:"#FA6B6B",isFree:!0},progallery:{hash:"fd308926fe3e4a769b1f7ffbc228b502",color:"#733CA6"},register:{hash:"ba87eb144d914cfc89f2e3db904ddcf7",color:"#0058FF",isFree:!0},sale_free:{hash:"4c04d52e5f684c2a9c6c665046753ece",color:"#FF8447",isFree:!0},sale_vert:{hash:"f699000a2fef45348e20e216dae95f90",color:"#FFA300"},search:{hash:"32d9ddb6733d49b58eca7e21b503b619",color:"#6274C0",isFree:!0},shoppingcart:{hash:"0bc9ff91b06245b29e06f4010f61ab7e",color:"#EC00FF",isFree:!0},social:{hash:"ad394788d7224e189a13755a84d648e8",color:"#008751",isFree:!0},star:{hash:"a5e038d3c1dd478187aa016a17f210b1",color:"#FFCB00",isFree:!0},subscribe:{hash:"27c43b9381384a21ae01d8efcc0fbc12",color:"#3899EC"},ticket:{hash:"b8c5b2babffd4f3a819207a8da2bd94d",color:"#AD7C26",isFree:!0},twitter:{hash:"96ecb8929029472c90c7e72980d0c77c",color:"#68C1ED"},vk:{hash:"931c3651bada4183b7aa2c9b80016dc1",color:"#4E7DA0"},vimeo:{hash:"14a099fdcd514554a289f702afb73a6b",color:"#1AB7EA"},yelp:{hash:"2e61070007304317aadc1b49816ea07c",color:"#CD0F23"},line:{hash:"a3c153_16c2d22de67d4d2aacbd96274922a9f9",color:"#00B900"},youtube:{hash:"f58d5df33a944ddba14878977dd6dab0",color:"#E14D3B"},about:{hash:"3b550d5040dc4dddbb30939e36b37822",color:"#876969",isFree:!0},add:{hash:"e91cd3dc01e8493c81901aecf2c63ae7",color:"#A49595",isFree:!0},cloud:{hash:"8f9ad7995fdf40b28874170d6f3ea525",color:"#5CACB8",isFree:!0},crown:{hash:"fcb89d73f7a340abac9d96bd69e634b2",color:"#0D1F60",isFree:!0},dribbble:{hash:"c9d243a60f654aba9438199a22d986b1",color:"#F1538F"},earth:{hash:"ad5375b24d2d4687a09fb42d7ca2f1ca",color:"#0024AA",isFree:!0},flag:{hash:"b8a15fd471c745b390660fc4fa036383",color:"#578A80",isFree:!0},gallery:{hash:"f931ccee8c3c41be85194d887c683aa9",color:"#B58ED6",isFree:!0},hamburgermenu:{hash:"5bc41ee34c744e3983a0e1f4a1ac825e",color:"#C63A84",isFree:!0},hot:{hash:"c2082a19ca4d46c0956146df4471b16b",color:"#E55600",isFree:!0},hotsale:{hash:"f699000a2fef45348e20e216dae95f90",color:"#FFA300",isFree:!0},lightning:{hash:"2bcf8eda9a204136a3d92616774f87bd",color:"#1E1F45",isFree:!0},link:{hash:"d5ddf13e300448b6b0bacf1c7752e009",color:"#3E505E",isFree:!0},music:{hash:"5b1be2530dba4e5993b3b224b38e4cba",color:"#A6B941",isFree:!0},new:{hash:"21f18c501e8e422990c89b7df6018197",color:"#AB47FF",isFree:!0},page:{hash:"634183d69e7b4929a231d5afb5eadaf6",color:"#636478",isFree:!0},rocket:{hash:"7d307c038ead47c598cf2353384e2d0e",color:"#575174",isFree:!0},signup_free:{hash:"84d93d95e9ec4a779e5463f51cf311b5",color:"#52D3D4",isFree:!0},signup_cont:{hash:"84d93d95e9ec4a779e5463f51cf311b5",color:"#52D3D4"},smile:{hash:"84cbddf7e33e46438d7beb465ce9914d",color:"#11D5B8",isFree:!0},speaker:{hash:"f8c7e50b75174c0aa4ddb6dd149b6b3e",color:"#B94156",isFree:!0},unfilled_add:{hash:"a3c153_9b5e1fa2854744bdaa3586cb90fd6419",color:"#6D7281",isFree:!0},unfilled_arrow_down:{hash:"a3c153_9e42cf512dd54d1b9fa41dd70bd19f1a",color:"#2AA3A9",isFree:!0},unfilled_arrow_up:{hash:"a3c153_4789a225e2f34881b5a245b24203efc9",color:"#2AA3A9",isFree:!0},unfilled_bell:{hash:"a3c153_f2a3ded771934490bcb15efa2a80c8b4",color:"#B94156",isFree:!0},unfilled_bookmark:{hash:"a3c153_810dda02e2f64b61908d7732fed93eaa",color:"#6D7281",isFree:!0},unfilled_briefcase:{hash:"a3c153_ec320dbe0e364d61883b435faa123f37",color:"#09262A",isFree:!0},unfilled_calendar:{hash:"a3c153_d00a2d250e9641d5a135a5aec3d431bc",color:"#EC125A",isFree:!0},unfilled_card:{hash:"a3c153_a89bc965f07d4d849a3f3dac0366a3bb",color:"#8B572A",isFree:!0},unfilled_cart:{hash:"a3c153_caa8ad94822349459ef91c26601c1446",color:"#F032FE",isFree:!0},unfilled_chat:{hash:"a3c153_3da968185b5e4467935fe3f4cc665d5e",color:"#5D7589",isFree:!0},unfilled_clock:{hash:"a3c153_e6629475d92c4922accdf64a027d7243",color:"#1F3655",isFree:!0},unfilled_clothes:{hash:"a3c153_9377b39d11774616a204c6e8a1312889",color:"#EA7A58",isFree:!0},unfilled_cloud:{hash:"a3c153_d034117ea8084b769faed9e0c894b30a",color:"#5CACB8",isFree:!0},unfilled_connect:{hash:"a3c153_331c25fb55724ff89989cc3249ce2f44",color:"#FF7E04",isFree:!0},unfilled_drop:{hash:"a3c153_12475476a9f1435fa4f458aad8c402ba",color:"#90B1AD",isFree:!0},unfilled_export:{hash:"a3c153_e24a3c1cc4394a9ba70a9c235d9780a3",color:"#1E1E1E",isFree:!0},unfilled_eye:{hash:"a3c153_732a2c7442184ea784859accd60b1e54",color:"#156A56",isFree:!0},unfilled_flag:{hash:"a3c153_51903dd14f3c433392d04e92abacc5d0",color:"#6B988F",isFree:!0},unfilled_gallery:{hash:"a3c153_0f6bd0f150b04ef387d7e2d0486d312d",color:"#B58ED6",isFree:!0},unfilled_gift:{hash:"a3c153_0ed0bd58fda04443a7613bdb82f64af6",color:"#FA6B6B",isFree:!0},unfilled_globe:{hash:"a3c153_79007e14b0ef438189c4622abc4f4e71",color:"#1537B1",isFree:!0},unfilled_hamburger_menu:{hash:"a3c153_42ed9a9bd59f4806b6e9e37aabfaa15c",color:"#C63A84",isFree:!0},unfilled_heart:{hash:"a3c153_6216ac66ccfd45c3842655b36c3196d7",color:"#FF001F",isFree:!0},unfilled_home:{hash:"a3c153_31a71486208748488e4d42c04a7d6c5b",color:"#434343",isFree:!0},unfilled_hotel:{hash:"a3c153_5be577bbaeda4692aef6d37bd28da4b0",color:"#0ACDCD",isFree:!0},unfilled_info:{hash:"a3c153_59eb82c4c74740f1935eae19ce57b300",color:"#876969",isFree:!0},unfilled_lightning:{hash:"a3c153_355b00aaccac4053bd0f7e7bfac178d6",color:"#1E1F45",isFree:!0},unfilled_link:{hash:"a3c153_5500ce40c7ed47ef9680168a2b725dab",color:"#4B5C69",isFree:!0},unfilled_location:{hash:"a3c153_6f289816887a448282efeafbfea84ad3",color:"#0AB899",isFree:!0},unfilled_lock:{hash:"a3c153_f36d1a885eee4f64aa1b8d7011ee3c11",color:"#3D3782",isFree:!0},unfilled_magnet:{hash:"a3c153_afeb9034968544eeb58bd808cd588c7d",color:"#D60A0A",isFree:!0},unfilled_mail:{hash:"a3c153_542bcab5df8342cb921af8ac1d643b07",color:"#BE1867",isFree:!0},unfilled_note:{hash:"a3c153_af634f2e37c04525be769f4beef56bb4",color:"#A6B941",isFree:!0},unfilled_page:{hash:"a3c153_9423e66e180141b495a414cd1ff63b32",color:"#9B9B9B",isFree:!0},unfilled_pencil:{hash:"a3c153_fe7cd9ee7eb846fb9ef482f6eab6fe95",color:"#7E4E21",isFree:!0},unfilled_phone:{hash:"a3c153_0b0df77f73c34859bc19858649996944",color:"#79D36D",isFree:!0},unfilled_plane:{hash:"a3c153_47d57c626d804dc9982267beddc65b78",color:"#AAA9CC",isFree:!0},unfilled_plus:{hash:"a3c153_5006278ca03a4aefb6fe6400198e8419",color:"#A49595",isFree:!0},unfilled_print:{hash:"a3c153_50a90bcaee43484895c77ed8c0c78ea6",color:"#DBA4FF",isFree:!0},unfilled_profile:{hash:"a3c153_4c07fa587c7a461aae161d002d3083e9",color:"#0058FF",isFree:!0},unfilled_rocket:{hash:"a3c153_ba013d86a9664a22bd40da3232aa07de",color:"#575174",isFree:!0},unfilled_sale:{hash:"a3c153_d8b99e24fd624844972f4d8d2ccbe861",color:"#FFBE44",isFree:!0},unfilled_search:{hash:"a3c153_3b93314a71a942b7b6e68614a5c10893",color:"#7C8BCB",isFree:!0},unfilled_settings:{hash:"a3c153_e60220e49bfb461faea34786b027b92b",color:"#515151",isFree:!0},unfilled_share:{hash:"a3c153_63ffb654a97b4f6ba942a41ff34f83f9",color:"#098C57",isFree:!0},unfilled_shop:{hash:"a3c153_3c433bdab70b4cbf813f83eb33ec9b22",color:"#03BEFD",isFree:!0},unfilled_smile:{hash:"a3c153_ff07d3ae7c554d5fae506fb19246659a",color:"#11D5B8",isFree:!0},unfilled_star:{hash:"a3c153_89b3cad0aee74d24ad5dd542729c711e",color:"#FFCB00",isFree:!0},unfilled_talk:{hash:"a3c153_d665c30487e94b2b8476b979c485593b",color:"#4EA5EF",isFree:!0},unfilled_ticket:{hash:"a3c153_d418a7315e2b4e12aa7ef7d9c6520dba",color:"#AD7C26",isFree:!0},unfilled_time:{hash:"a3c153_6a0f5967056c49178e6b969ec25e38fa",color:"#BF6262",isFree:!0},unfilled_truck:{hash:"a3c153_388dbf14b0824411ab19a0cfb7c91238",color:"#7DA991",isFree:!0}},actionTypesMap:["phone","email","contactform","chat","address","facebook","whatsapp","twitter","instegram","pinterest","linkedin","youtube","google_plus","yelp","line","vimeo","vk","flickr","subscribe","album","progallery","custom"],socialLinkTexts:{facebook:"Facebook",twitter:"Twitter",pinterest:"Pinterest",google_plus:"Google+",tumblr:"Tumblr",linkedin:"Linkedin",youtube:"Youtube",vimeo:"Vimeo",flickr:"Flickr",instegram:"instagram"},defaultSerializedMAB:o.defaultsDeep({},{skin:"wysiwyg.viewer.skins.quickActionBar.anchoredSkin",style:{skin:"wysiwyg.viewer.skins.quickActionBar.anchoredSkin",style:o.set({},"properties",{colorScheme:"brand",actionsSHD:"0px 0px 20px 0px rgba(0,0,0,0.1)","boxShadowToggleOn-actionsSHD":"true"})}},i),defaultSerializedFAB:o.defaultsDeep({},{skin:"wysiwyg.viewer.skins.quickActionBar.floatingSkin",style:{skin:"wysiwyg.viewer.skins.quickActionBar.floatingSkin",style:o.set({},"properties",{colorScheme:"brand inv",controlButtonBG:"#008afc","alpha-controlButtonBG":"1",controlButtonSHD:"0px 2px 8px 0px rgba(0,0,0,0.3)",actionsSHD:"0px 2px 8px 0px rgba(0,0,0,0.3)","boxShadowToggleOn-actionsSHD":"true","boxShadowToggleOn-controlButtonSHD":"true"})}},i),defaultSerializedQuickActionBarItem:{type:"Component",componentType:"wysiwyg.viewer.components.QuickActionBarItem",layout:{},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{color:"#000000"},propertiesSource:{color:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.QuickActionBarItem",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.quickActionBarItem"}},defaultQuickActionItems:[{itemType:"phone",link:{type:"PhoneLink",phoneNumber:""},text:"Phone",icon:r.phone.hash},{itemType:"email",link:{type:"EmailLink",recipient:"",subject:""},text:"Email",icon:r.email.hash},{itemType:"facebook",link:{type:"ExternalLink",url:"",target:"_blank"},text:"Facebook",icon:r.facebook.hash}],QUICK_ACTION_ITEM_MAX_LENGTH:40})},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(99),i=n(182),{cacheAppMarketDataAfterProvision:function(e,t){r.getAppMarketDataAsync(e,t.appDefinitionId).catch((function(){e.siteAPI.reportBI(i.FAIL_TO_GET_APP_MARKET_DATA)}))},generateAppFlowsLargestAppId:function(e){return o.max([e,999])+o.random(1,999)+o.random(1,99)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(12),o=n(13),r=n(28),i=n(447),a=n(31),s=n(456),c=n(1),u=n(181),l=e.template("<%= appMarketEditorAPIUrl %><%= appDefinitionId %>/priced-app?metaSiteId=<%= metaSiteId %>&lang=<%= lang %>"),p=e.template("<%= appMarketEditorAPIUrl %>?market=related_apps&fields=appDefinitionId,slug,name,appIcon,colorSvgIcon,weights,categories,by,relatedAppsTeaser,hasSection,widgets.defaultWidth,widgets.defaultHeight"),d=e.template("<%= appMarketEditorAPIUrl %>?id=<%= appDefinitionIds %>"),g=e.template("<%= appMarketEditorAPIUrl %>page-apps?fields=widgets.title,widgets.widgetId,appDefinitionId&lang=<%= lang %>"),f=e.template("<%= premiumBaseUrl %>?appInstanceId=<%= instanceId %>&appDefinitionId=<%= appDefinitionId %>&paymentCycle=<%= cycle %>&vendorProductId=<%= vendorProductId %>"),m=function(e){var t=e.pointers.general.getServiceTopology(),n=e.pointers.getInnerPointer(t,"appMarketEditorApiUrl");return"".concat(e.dal.get(n),"/")};function v(e,t,n){var r=o.getProperty(e,o.PROPERTY_NAMES.META_SITE_ID),i=o.getProperty(e,o.PROPERTY_NAMES.LANGUAGE_CODE)||"en",a=l({appMarketEditorAPIUrl:m(e),appDefinitionId:t,metaSiteId:r,lang:i});return n&&(a+="&currency=".concat(n)),a}var E=function(n,o,r,i,a){c.loggingUtils.fedopsLogger.interactionStarted(c.loggingUtils.fedopsLogger.INTERACTIONS.APP_MARKET_SERVICE.CALL_SERVER),s.lock(o),c.ajaxLibrary.ajax({type:"GET",url:v(n,o,e.get(r,"currency")),success:function(t){if(function(t){return!e.get(t,"currency")}(r))t=s.set(o,t);else{var n=s.get(o);n&&(t=e.merge({},n,t))}s.unlock(o),i&&i(t),c.loggingUtils.fedopsLogger.interactionEnded(c.loggingUtils.fedopsLogger.INTERACTIONS.APP_MARKET_SERVICE.CALL_SERVER)},error:function(e,n,r){t.integrations.ravenUtils.captureError(new Error("Error with calling server: Type: ".concat(n,", Error: ").concat(r)),{tags:{appMarketCallServer:!0,appDefinitionId:o}}),s.unlock(o);var c="app market response error for appDefinitionId: ".concat(o);i?i({error:c,errorType:n,errorMessage:r}):a&&a({error:c,errorType:n,errorMessage:r})}})},y=function(t,n,o){return new Promise((function(r,i){if(e.isUndefined(n))i({error:"appDefinitionId was not given"});else{var a=s.get(n);a&&S(a)&&!e.get(o,"currency")?r(a):E(t,n,o,r,i)}}))},I=function(e,t,n){var o=s.get(t);return h(t)&&E(e,t,n),o},S=function(e){return e&&e.price},h=function(t){var n=s.get(t);return 1!==s.isLocked(t)&&(e.isUndefined(n)||!S(n))},P=function(t,n){var r=t.pointers.general.getServiceTopology(),a=t.pointers.getInnerPointer(r,"appMarketEditorNewUrl"),s=t.dal.get(a);s=e.replace(s,"wix-app-market","one-app-market");var c=new i(s),u=o.getProperty(t,o.PROPERTY_NAMES.LANGUAGE_CODE)||"en",l=o.getProperty(t,o.PROPERTY_NAMES.META_SITE_ID),p=o.getProperty(t,o.PROPERTY_NAMES.SITE_ID);return c.addOriginParam(n.origin).addModalParams(n.modalName,n.appName,n.tab).addDevAppParam(n.appDefinitionId).addLangParam(u).addAppMarketTests(n.tests).addCompIdParam("MarketPanel").addMetaSiteIdParam(l).addSiteIdParam(p).addTagsParam(n.query).addOpenAppParam(n.openAppDefId).addAppMarketParams(n.appMarketParams).addNewWixStores("true").addCategoryParam(n.categorySlug).addBiReferralInfoParam(n.openMarketOrigin).addBiReferralInfoCategoryParam(n.referralInfoCategory).addBiSectionParam(n.section).addAddingMethodParam(n.addingMethod).addStateParam(n.state).build()},A=function(t){return e.isArray(t)||(t=[t]),t};return{getAppMarketDataAsync:y,getAppMarketData:I,getAppMarketDataForPage:function(t,n,o,r){if(e.isUndefined(n))r&&r({error:"pageId was not given"});else{var i=function(t,n){var o=a.getInstalledAppsOnPage(t,n),r=e.map(o,"appDefinitionId"),i=s.keys();return e.remove(r,(function(t){return!e.includes(i,t)}))}(t,n);if(e.isEmpty(i))return;var u=function(e,t){var n=m(e);return d({appMarketEditorAPIUrl:n,appDefinitionIds:t.toString()})}(t,i);c.ajaxLibrary.ajax({type:"GET",url:u,success:function(t){e.forEach(t,(function(e){s.set(e.appDefinitionId,e)})),o&&o(t)},error:function(){o?o({error:"app market response error for appDefinitionIds: ".concat(i.toString())}):r&&r({error:"app market response error for appDefinitionIds: ".concat(i.toString())})}})}},getAppMarketUrl:P,getAppMarketInfoUrl:function(e,t,n){return t.appName=n,t.modalName="app-modal",P(e,t)},getAppReviewsUrl:function(e,t,n){return t.appName=n,t.modalName="app-modal",t.tab="reviews",P(e,t)},getAppMarketPermissionsUrl:function(e,t){return t.modalName="permissions-modal",P(e,t)},getPackages:function(t,n,o,i){return new Promise((function(a,s){y(t,n,i).then((function(t){if(t.error)s(t);else{var i=t.purchaseStartUrl,c=e.pick(t.price,"currencyCode","currencySymbol"),u=e.map(t.packages,(function(t){var a=e.assign(e.cloneDeep(t),c);return e.forEach(r.CYCLE,(function(t){!function(t,n,o,i,a){t.hasOwnProperty(a)&&(t[a].hasOwnProperty("price")?t[a].url=f({premiumBaseUrl:n,instanceId:o,appDefinitionId:i,cycle:e.findKey(r.CYCLE,(function(e){return e===a})),vendorProductId:t.id}):delete t[a])}(a,i,o,n,t)})),a}));a(u)}})).catch((function(e){s(e)}))}))},getPremiumApps:function(t,n,o,r){u.getPremiumApps(t,n,(function(n){!function(t,n,o){e.forEach(n.tpaPackages,(function(e){s.get(e.appDefinitionId)?s.set(e.appDefinitionId,{upgradedToYearly:u.isYearly(e)}):E(t,e.appDefinitionId,{},(function(){s.set(e.appDefinitionId,{upgradedToYearly:u.isYearly(e)})}))})),e.isFunction(o)&&o(n.tpaPackages)}(t,n,o)}),r)},getRelatedApps:function(e,t,n){var o=function(e){var t=m(e);return p({appMarketEditorAPIUrl:t})}(e);c.ajaxLibrary.ajax({type:"GET",url:o,dataType:"json",contentType:"application/json",success:function(e){t(A(e))},error:n})},getSectionsTranslatedPageTitles:function(e){return new Promise((function(t,n){var r=function(e){var t=m(e),n=o.getProperty(e,o.PROPERTY_NAMES.LANGUAGE_CODE)||"en";return g({appMarketEditorAPIUrl:t,lang:n})}(e);c.ajaxLibrary.ajax({type:"GET",url:r,success:function(e){t(e)},error:n})}))},requestAppMarketDataToBeCached:I}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(126),o=n(35),r=n(16),i=n(455),a=[],s=[];function c(e,n){var o=e.dal.get(e.pointers.general.getServiceTopology());return t.specMapUtils.resolveEditorScriptUrl(n,{clientSpec:n,serviceTopology:o})}function u(e,t){return c(e,r.getAppDataByAppDefinitionId(e,t))}function l(e,t){var n=e.pointers.platform.getAppManifestPointer(t);return e.dal.get(n)}return{registerToManifestAdded:function(t,n){a.push(n);var r=function(t){var n=o.filterAppsDataByType(t,"Application");return e.compact(e.map(n,(function(e){return l(t,e.appDefinitionId)})))}(t);e.isEmpty(r)||r.forEach((function(e){n(e)}))},setManifest:function(t,n,o){var r=t.pointers.platform.getAppManifestPointer(n),i=u(t,n);t.dal.set(r,o),e.forEach(a,(function(e){e(o,i)}))},getAppManifest:l,getAppDataByAppDefId:u,getAppDataByApplicationId:function(e,t){return c(e,r.getAppData(e,t))},setAppPublicAPI:function(t,n,o){var r=t.pointers.platform.appPublicApiNamePointer(n);t.dal.set(r,o),e.forEach(s,(function(e){return e({apiName:o})}))},registerToPublicApiSet:function(t,n){s.push(n);var r=function(t){var n=o.filterAppsDataByType(t,"Application");return e.compact(e.map(n,(function(e){return function(e,t){var n=e.pointers.platform.appPublicApiNamePointer(t);return e.dal.get(n)}(t,e.appDefinitionId)})))}(t);e.isEmpty(r)||r.forEach((function(e){return n({apiName:e})}))},isPlatformAppInstalled:function(e,t){var n=e.pointers.platform.getPagesPlatformApplicationsPointer(),o=e.dal.get(n),r=u(e,t);return i.isPlatformAppInstalled(o,r)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(6),o=n(482),r=n(71),i=n(130),a=n(47),s=n(77),c=n(489),u=n(490),l=n(36),p=n(3),d=n(22),g=n(35),f=n(23),m=n(37),v=n(48),E=n(128),y=n(1),I=n(198),S=n(199),h=n(161),P=n(40),A=n(56),T=n(30),_=n(107),O=n(75);var C=y.urlUtils.joinURL;function D(e){s.handleSchemaInvalidationActions(),function(e){l.initApp(e,R(e,"dbsm-viewer-app","dbsm-editor-app","dataBinding"))}(e),function(e){l.initApp(e,R(e,"","wix-code-editor-app","wix-code"))}(e)}function w(e){e.siteAPI.reloadAppsContainer()}var M=function(e){return new Promise((function(t,n){var o=T.isFirstSave(e),r=e.siteAPI.isQaMode();if(o||r)return t();_.save(e,t,n,!1)}))},b=function(e){return function(t){return O.generateNicknamesForSite(e),t}};function R(t,n,o,i){function a(t){return e(t||"").split(",").invokeMap("split",":").fromPairs().value()}function s(e,t,n){var o=C(e.scriptsDomainUrl,"services",t);return n?C(o,n):e.scriptsLocationMap[t]}if(r.isProvisioned(t)){var c=t.pointers.general.getServiceTopology(),u=t.dal.get(c),l=t.siteAPI.getCurrentUrl(),p=a(e.get(l,["query","viewerPlatformAppSources"]))[i],d=a(e.get(l,["query","editorPlatformAppSources"]))[i],g={appDefinitionId:i};return n&&e.set(g,"appFields.platform.viewerScriptUrl",C(s(u,n,p),"/app.js")),o&&(e.set(g,"appFields.platform.editorScriptUrl",C(s(u,o,d),"/editorAppModule.js")),g.editorArtifact=o),g}}return t.registerHook(t.HOOKS.PLATFORM.APP_PROVISIONED,w),t.registerHook(t.HOOKS.PLATFORM.APP_UPDATED,w),{initializeWixCode:function(t){o.initPaths(t),i.init(t),r.isProvisioned(t)&&(D(t),s.prefetchUserCode(t));var n=t.pointers.wixCode.getIsAppReadOnly();t.dal.set(n,!function(){try{return t.dal.wasValueChangedSinceLastSnapshot("before-autosave-apply",t.pointers.wixCode.getGridAppId())}catch(e){return!1}}()),function(t){var n=e(t).thru(g.getAppsData).filter("platformApp").map("displayName").value();e.isEmpty(n)||f.event(t,m.EDITOR_PLATFORM_APPS_LOADED,{app_list:n,number_of_apps:n.length})}(t)},provision:function(t,n){var o=a.trace(t,{action:"provision"});return n=e.defaults({},n,{onSuccess:e.noop,onError:e.noop}),r.provision(t).then(b(t)).then((function(e){return w(t),D(t),e})).then((function(e){return t.setOperationsQueue.asyncPreDataManipulationComplete(),M(t).then((function(){o({message:e}),n.onSuccess(e)}))})).catch((function(e){t.setOperationsQueue.asyncPreDataManipulationComplete(null,new Error("Wix Code provision failed: ".concat(e))),o({level:v.log.levels.ERROR,message:e}),n.onError(e)}))},isProvisioned:r.isProvisioned,getClientSpec:function(t){return e.head(g.filterAppsDataByType(t,d.WIX_CODE_SPEC_TYPE))},generateRemoteModelInterface:function(t,n,o){if(!e(t.pointers.page.getNonDeletedPagesPointers(!1)).map("id").includes(n))throw new Error("contextId - ".concat(n," is invalid"));return t.siteAPI.generateRemoteModelInterface(n,o)},getWidgetRef:function(e,t){var n=e.pointers.components,o=n.getPageOfComponent(t);return o?n.isMasterPage(o)?function(e,t){var n=e.siteAPI.getCurrentUrlPageId(),o=y.constants.VIEW_MODES,r=e.siteAPI.isMobileView()?o.MOBILE:o.DESKTOP;return t.getPage(n,r)}(e,n):o:null},duplicatePageCode:function(e,t,n){r.isProvisioned(e)&&u.duplicatePageCode(e,t,n)},getCompSdkType:function(t,n){var o=t.dal.get(t.pointers.getInnerPointer(n,"componentType")),r=p.getDataItemPointer(t,n),i=r&&t.dal.get(r),a=e.get(h.getWidgetData(t,i),"widgetId")||null,s=I.getWidgetDisplayName(S,a);return s||E.typeUtils.getFullSdkType(o,a)},log:{levels:a.levels,trace:a.trace},fileSystem:s,pages:c,userScripts:{isUserCodeUrl:function(e,t){var n=P.getExistingWixCodeAppFromPS(e),o={wixCode:e.dal.get(e.pointers.wixCode.getRoot()),serviceTopology:e.dal.get(e.pointers.general.getServiceTopology()),viewMode:"preview"};return v.wixCodeUserScriptsService.isUserCodeUrl(t,n,o)},getSourceMapUrl:function(e,t){var n=A.getGridAppId(e),o=P.getExistingWixCodeAppFromPS(e),r={wixCode:e.dal.get(e.pointers.wixCode.getRoot()),serviceTopology:e.dal.get(e.pointers.general.getServiceTopology()),viewMode:"preview"};return v.wixCodeUserScriptsService.getSourceMapUrl(t,n,o,r)}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(132);function o(t){return e.isObject(t)&&t.name&&t.location}function r(e){return o(e)&&e.directory}function i(e){return o(e)&&!e.directory}function a(t){return e.last(t.location.split("/"))}function s(n){return i(n)&&3===n.location.split("/").length&&e.startsWith(n.location,t.PAGES)}return{isFileSystemItem:o,isFolder:r,isFile:i,isInsideFolder:function(e,t){return r(e)&&0===t.location.indexOf(e.location)},getFileName:a,isPagesFolder:function(n){return r(n)&&e.startsWith(n.location,t.PAGES)},isPageFile:s,isSystemFolder:function(n){return r(n)&&e.includes(e.values(t),n.location.toLowerCase().replace(/\/*$/,""))},getParentFolderPath:function(e){var t=e.location.replace(/\/$/,"").split("/");return t.pop(),t.join("/")},getPageId:function(e){if(s(e))return a(e).replace(".js","")}}}()},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return s(e,arguments,u(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),c(o,e)})(e)}function s(e,t,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&c(r,n.prototype),r}).apply(null,arguments)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e.exports={ArgumentError:function(e){function t(e,n,i,a){var s;o(this,t),s=r(this,u(t).call(this));var c=a?" Expecting ".concat(a,"."):"";return s.name="ArgumentError",s.message="Illegal Argument '".concat(e,"' in ").concat(n,". '").concat(i,"' is invalid.").concat(c),s.stack=(new Error).stack,s}return i(t,e),t}(a(Error)),FileSystemError:function(e){function t(e){var n;return o(this,t),(n=r(this,u(t).call(this))).name="FileSystemError",n.message=e,n.stack=(new Error).stack,n}return i(t,e),t}(a(Error)),WixCodeNotWriteableError:function(e){function t(){var e;return o(this,t),(e=r(this,u(t).call(this))).name="WixCodeNotWriteableError",e.message="Wix Code App is not writeable",e.stack=(new Error).stack,e}return i(t,e),t}(a(Error))}},function(e,t,n){e.exports=function(){var e=n(0),t=n(132);function o(e){return"pagelink"===e.type&&"dataBinding"===e.plugin}function r(t,n){var r=e.keys(n),i=e.assign({},t,n);return e.omitBy(i,(function(t,n){return o(t)&&!e.includes(r,n)}))}return{assembleSchema:function(t,n,i){var a=JSON.parse(t||"{}"),s=n?JSON.parse(n):a,c=i?JSON.parse(i):a,u=e.pickBy(c.fields,o);return JSON.stringify(e.assign({},s,{fields:r(s.fields,u)}))},isSchemaFile:function(n){return e.startsWith(n,"".concat(t.SCHEMAS,"/"))},isSchemasDirectory:function(e){return e==="".concat(t.SCHEMAS,"/")},isValidContent:function(t){try{var n=JSON.parse(t);return e.isObject(n)}catch(e){return!1}},getSchemaIdFromFilePath:function(e){var n="".concat(t.SCHEMAS,"/").length,o=e.length-".json".length;return e.substring(n,o)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(196),o=n(131),r=n(48),i=n(106),a=n(22),s=n(104),c=n(40),u=n(103),l=n(133),p=n(197),d=n(130),g=n(47),f=n(102),m=n(5),v=r.wixCodeUserScriptsService;function E(t,n,r,E){if(c.getExistingWixCodeAppFromSnapshot(n)){var I=g.traceWithSnapshot(n,{action:"saveCode"});Promise.resolve().then((function(){return function(t,n){var r=l.getChangesBetweenSnapshots(t,n);if(l.isChangesEmpty(r))return Promise.resolve({message:"no changes"});var d=r.toSave.map((function(e){return e.fileId})),g={filesToSave:JSON.stringify(d),filesToCopy:JSON.stringify(r.toCopy),filesToDelete:JSON.stringify(r.toDelete)};try{if(n.getIn(a.paths.IS_APP_READ_ONLY))throw new u.WixCodeNotWriteableError;var v=function(e){var t=c.getExistingWixCodeAppFromSnapshot(e),n=(r=e,r.getIn(["serviceTopology","wixCodeIdeServerUrl"])),o=e.getIn(a.paths.GRID_APP_ID);var r;return i.createCodeAppInfo({baseUrl:n,appId:o,signedInstance:t.instance,instanceId:t.instanceId})}(n),E=function(t,n){if(m.isOpen("ds_saveWixCodeBulkUpdate"))return function(e,t){var n=t.reduce((function(e,t){return s.isSchemaFile(t.fileId)?e.schemaFiles.push(t):e.nonSchemaFiles.push(t),e}),{schemaFiles:[],nonSchemaFiles:[]}),r=n.schemaFiles,i=n.nonSchemaFiles,a=r.map((function(t){return p.save(e,s.getSchemaIdFromFilePath(t.fileId),JSON.parse(t.content))})),c=o.bulkWrite(e,i);return[a,c]}(t,n);return e.map(n,(function(e){return function(e,t,n){if(s.isSchemaFile(t))return p.save(e,s.getSchemaIdFromFilePath(t),JSON.parse(n)).then((function(e){return e?{modifiedSchemas:e}:e}));var r=o.getVirtualDescriptor(t,!1);return o.writeFile(e,r,n)}(t,e.fileId,e.content)}))}(v,r.toSave),y=function(t,n){return e.map(n,(function(e){return function(e,t,n){var r=o.getVirtualDescriptor(t,!1),i=o.getVirtualDescriptor(n,!1),a=n.lastIndexOf("/"),s=n.substr(0,a),c=o.getVirtualDescriptor(s,!0),u=n.substr(a+1);return o.copy(e,r,c,u).catch((function(e){return 404===e.xhr.status&&f.isPageFile(r)?Promise.resolve({pagesWithoutCode:[r,i].map(f.getPageId)}):Promise.reject(e)}))}(t,e.srcFileId,e.destFileId)}))}(v,r.toCopy),I=function(t,n){return e.map(n,(function(e,n){return function(e,t,n){if(!n&&s.isSchemaFile(t))return p.remove(e,s.getSchemaIdFromFilePath(t)).then((function(e){return e?{modifiedSchemas:e}:e}));var r=o.getVirtualDescriptor(t,n);return o.deleteItem(e,r)}(t,n,e)}))}(v,r.toDelete),S=E.concat(y,I);return Promise.all(S).then((function(t){var n=e(t).filter("modifiedSchemas").flatMap("modifiedSchemas").value(),o=e(t).filter("pagesWithoutCode").flatMap("pagesWithoutCode").value();return{message:"changes saved",params:g,savedPaths:d,modifiedSchemas:n,directoryFlagByDeletedPath:r.toDelete,pagesWithoutCode:o}})).catch((function(e){throw{error:e,params:g}}))}catch(e){return Promise.reject({error:e,params:g})}}(t,n)})).then((function(t){var o=t.message,i=t.params,c=t.savedPaths,u=t.modifiedSchemas,l=t.directoryFlagByDeletedPath,p=t.pagesWithoutCode;I({message:o,params:i}),r(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,c=function(t,n){if(t){var o=function(t){return e.reduce(t,(function(e,t,n){return!t&&s.isSchemaFile(n)?e.concat(s.getSchemaIdFromFilePath(n)):e}),[])}(n),r=e.filter(t,(function(t){return!e.includes(o,t.id)}));return e.reduce(r,(function(e,t){return e.concat({path:a.paths.MODIFIED_FILE_CONTENTS.concat(".schemas/".concat(t.id,".json")),value:JSON.stringify(t)})}),[])}}(o,r),u=function(t,n){var o=n.filter((function(e){return v.filePathAffectsBundles(e)}));if(e.isEmpty(o))return;if(e.every(o,(function(e){return v.filePathAffectsSingleBundle(e)})))return function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce((function(t,n){var o=v.bundleIdFromFilePath(n),r=v.paths.CACHE_KILLERS_MAP.concat(o),i=e.getIn(r);return t.push({path:r,value:d.getNewCacheKillerValue(i)}),t}),[])}(t,o);return function(e){var t=[],n=e.getIn(v.paths.GLOBAL_CACHE_KILLER);return t.push({path:v.paths.GLOBAL_CACHE_KILLER,value:d.getNewCacheKillerValue(n)}),t.push({path:v.paths.CACHE_KILLERS_MAP,value:{}}),t}(t)}(t,n),l=function(t){if(!e.isEmpty(t))return[{path:a.paths.DIRECTORY_FLAG_BY_DELETED_PATH,value:{}}]}(r),p=function(t,n){var o=["pagesPlatformApplications",a.WIX_CODE_APP_ID];if(n&&t.getIn(o)){var r=t.getIn(o).toJS();return n.forEach((function(t){return e.set(r,t,!1)})),{path:o,value:r}}}(t,i);if(c||u||l||p)return{changes:y(u,p),historyAlteringChanges:y(c,l)}}(n,c,u,l,p))}),(function(t){t&&t.error&&t.params?(I({level:g.levels.ERROR,message:t.error,params:t.params}),E(t.error)):(t=e.isError(t)?t:new Error(t),I({level:g.levels.ERROR,message:t}),E(t))}))}else r()}function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e.concat(t||[])}),[])}return{partialSave:E,fullSave:E,firstSave:E,saveAsTemplate:E,autosave:E,publish:function(e,t){t()},getTaskName:t.getTaskName,getSnapshotTags:t.getSnapshotTags}}()},function(e,t,n){e.exports=function(){var e=n(56),t=n(40),o=n(103);function r(e,t,n,r){if(!n)throw new o.ArgumentError(e,t,n,r)}function i(e){var t=e.baseUrl,n=e.appId,o=e.signedInstance,i=e.instanceId;return r("baseUrl","createCodeAppInfo",t,"string"),r("appId","createCodeAppInfo",n,"string"),r("signedInstance","createCodeAppInfo",o,"string"),r("instanceId","createCodeAppInfo",i,"string"),{baseUrl:t,signedInstance:o,instanceId:i,appId:n}}return{createCodeAppInfo:i,getCodeAppInfoFromPS:function(n){var o=t.getExistingWixCodeAppFromPS(n),r=e.getGridAppId(n);return i({baseUrl:n.dal.get(n.pointers.general.getServiceTopology()).wixCodeIdeServerUrl,appId:r,signedInstance:o.instance,instanceId:o.instanceId})}}}()},function(e,t,n){e.exports=n(200)(n(504))},function(e,t,n){e.exports=function(){var e=n(0),t=n(208),o=n(505),r=n(24),i=n(506),a=n(513),s=t.fromJS({parts:null}),c=t.fromJS({dataSelectors:null}),u=t.fromJS({views:null}),l=t.fromJS({types:null}),p={items:function(e){return f(e,r.getBaseItemsPath())},parts:function(e){return s.update("parts",f.bind(null,e,r.getBasePartsPath()))},dataSelectors:function(e){return c.update("dataSelectors",f.bind(this,e,r.getBaseDataSelectorsPath()))},views:function(e){return u.update("views",f.bind(this,e,r.getBaseViewsPath()))},types:function(e){return l.update("types",f.bind(this,e,r.getBaseTypesPath()))}},d=["_state"];function g(t,n){return e.assign(n,{_timestamp:t._updatedAt})}function f(e,n){return e.getIn(n,t.fromJS({}))}function m(e,t,n,r,i){var a=p[i](e),s=p[i](t);return o.getItemsDiff(a,s,n,r)}function v(t,n,o,r,i){var a=e.map(o,m.bind(null,t,n,r,i));return{created:e(a).map("created").flattenDeep().value(),updated:e(a).map("updated").flattenDeep().value(),deleted:e(a).map("deleted").flattenDeep().value()}}function E(t){return e.every(p,(function(e){return e(t).every((function(e){return e&&e.isEmpty()}))}))}function y(e,t,n,o,r){if(t===e||E(t)&&E(e))n();else{var s=function(e,t){return{dataItems:v(e,t,["items"],d,g),repo:I(e,t)}}(e,t);i.saveRepoAndItems(a.getAppInstance(t),s.repo,s.dataItems,r).then(n).catch(o)}}function I(t,n){var o=v(t,n,["types","parts","dataSelectors","views"]);if(!e.some(o,(function(e){return e.length>0})))return null;var r=e.transform(["dataSelectors","views","types"],(function(t,o){var r=p[o](n).toJS();t[o]=e(r).map(e.values).flattenDeep().value()}),{}),i=p.parts(n).toJS();return e.assign(r,i)}return{partialSave:function(e,t,n,o,r){y(e,t,n,o,r)},fullSave:function(e,t,n,o,r){y(e,t,n,o,r)},firstSave:function(e,t,n,o,r){var i=a.getAppInstanceId(e),s=a.getAppInstanceId(t);i&&i===s?o({errorCode:1970,errorDescription:"application instance id is the template id",changes:null}):y(e,t,n,o,r)},saveAsTemplate:function(e,t,n){n()},autosave:function(e,t,n,o,r){y(e,t,n,o,r)},publish:function(e,t,n,o){E(e)?t():i.publish(a.getAppInstance(e),o).then(t).catch(n)},getTaskName:function(){return"appbuilder"},getSnapshotTags:function(){return["primary"]}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(24),r=n(49),i="Type does not exist",a="Selector does not exist",s={"IB.ManualSelectedList":"ManualSelectedList"};function c(e){throw new Error(e)}function u(e,t){return e.dal.getByPath(o.getDataSelectorPath(t))}function l(t,n,r){if(!function(t){return e.isArray(t)&&e.every(t,(function(t){return e.isString(t)}))}(r))throw new Error("itemsId must be an array of strings.");var i=u(t,n)||c(a);i.itemIds=function(t,n,r){var i=t.dal.getByPath(o.getBaseItemsPath(n))||{};return e.intersection(r,e.map(i,"_iid"))}(t,i.forType,r),i.logicalTypeName="IB.ManualSelectedList",t.dal.full.setByPath(o.getDataSelectorPath(n),i)}return{getSelector:function(t,n){var o=u(t,n);if(o){var r=e.omit(o,["dataProviderId","forType","logicalTypeName"]);return r.type=s[o.logicalTypeName],r}},setManualSelector:l,createSelector:function(e,n){r.getType(e,n)||c(i);var a={id:"dataSelector_".concat(t.guidUtils.getUniqueId()),forType:n};return e.dal.full.setByPath(o.getDataSelectorPath(a.id),a),a.id},deleteItemFromAllManualDataSelectors:function(t,n){var r=t.dal.getByPath(o.getBaseDataSelectorsPath());e(r).filter({logicalTypeName:"IB.ManualSelectedList"}).forEach((function(o){var r=e.reject(o.itemIds,(function(e){return e===n}));r.length!==o.itemIds.length&&l(t,o.id,r)}))}}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P;e.exports=(o=n(0),r=n(1),i=n(206),a=n(16),n(211),s=n(66),c=n(13),u=n(34),l=n(98),p=o.template("<%= provisionServerBaseUrl %>/appStore/demo/pre-save-provision/<%= metaSiteId %>/<%= applicationId %>"),d=o.template("<%= provisionServerBaseUrl %>/appStore/pre-save-provision/<%= appDefinitionId %>"),g=o.template("<%= provisionServerBaseUrl %>/appStore/post-save-complete-provision?metaSiteId=<%= metaSiteId %>&editorSessionId=<%= editorSessionId %>"),f=o.template("<%= provisionServerBaseUrl %>/appStore/provision/<%= appDefinitionId %>"),m=o.template("<%= provisionServerBaseUrl %>/appStore/spec/<%= metaSiteId %>/<%= applicationId %>"),v=o.template("<%= provisionServerBaseUrl %>/appStore/disable/<%= metaSiteId %>/<%= appDefinitionId %>"),E=o.template("<%= provisionServerBaseUrl %>/appStore/restore/<%= metaSiteId %>/<%= appDefinitionId %>"),y=function(e,t,n,o,r){return t({provisionServerBaseUrl:I(e),appDefinitionId:n,applicationId:o,metaSiteId:r})},I=function(e){var t=e.pointers.general.getServiceTopology();return e.dal.get(e.pointers.getInnerPointer(t,"appStoreUrl"))},S=function(e,t,n,o){var r=y(e,f,t),a=h(e),s=new i(r).addMetaSiteId(a).addAcceptJson().build();P(e,s,"POST",{},n,o)},h=function(e){return c.getProperty(e,c.PROPERTY_NAMES.META_SITE_ID)},P=function(e,t,n,i,s,c){r.ajaxLibrary.ajax({type:n||"GET",url:t,data:JSON.stringify(i),dataType:"json",contentType:"application/json",success:function(t){e?function(e,t,n){var r=n.payload;if(o.includes([void 0,-1],r.applicationId))r.applicationId=a.getLargestApplicationId(e)+1,r.notProvisioned=!0;else{var i=a.getAppDataByAppDefinitionId(e,r.appDefinitionId);!u.isSiteSaved(e)&&i&&i.demoMode&&!r.demoMode&&(r.notProvisioned=!0)}a.registerAppData(e,r),e.setOperationsQueue.executeAfterCurrentOperationDone((function(){u.isTpaByAppType(r.type)&&l.cacheAppMarketDataAfterProvision(e,r)})),t(r)}(e,s,t):s(t)},error:c})},{restoreWixappOnServer:function(e,t,n,o){var r=I(e),i=E({appDefinitionId:t,metaSiteId:h(e),provisionServerBaseUrl:r});P(null,i,"POST",{},n,o)},disableWixappOnServer:function(e,t,n,o){var r=I(e),i=v({appDefinitionId:t,metaSiteId:h(e),provisionServerBaseUrl:r});P(null,i,"POST",{},n,o)},provisionAppAfterSave:S,provisionAppBeforeSave:function(e,t,n,o){var r=y(e,d,t),a=new i(r).addAcceptJson().build();P(e,a,"POST",{},n,o)},provisionAppDemoAfterSave:function(e,t,n,o){S(e,t,n,o)},provisionAppDemoBeforeSave:function(e,t,n,o){var r=h(e),a=y(e,p,null,t,r),s=new i(a).addAcceptJson().build();P(e,s,"POST",{},n,o)},completeProvisionAppsAfterSave:function(e,t,n,r,a,s){var c=g({provisionServerBaseUrl:e,metaSiteId:t,editorSessionId:n}),l=new i(c).addAcceptJson().build(),p=o.filter(r,"notProvisioned");p=o.filter(p,(function(e){return!u.isTpaByAppType(e.type)}));var d=o.map(p,(function(e){return{appDefinitionId:e.appDefinitionId,applicationId:e.applicationId.toString(),instanceId:e.instanceId}}));o.isEmpty(d)?a():P(void 0,l,"POST",{apps:d,metaSiteId:t},a,s)},refreshSpecMap:function(e,t,n,o,r){var a=y(e,m,null,t,n),s=new i(a).addAcceptJson().build();P(e,s,"GET",void 0,o,r)},provisionAppFromSourceTemplate:function(e,t,n,o,r){s.provisionAppFromSourceTemplate(e,t,n,o,r)}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P;e.exports=(o=n(0),n(5),r=n(4),i=n(11),a=n(7),s=n(74),c=n(31),u=n(16),l=n(112),p=n(144),d=n(516),g=n(145),f=n(146),m=n(14),y=function(e,t,n,i){var a=i.applicationId,s=i.appDefinitionId,c=n.widgetId||P(e,i),u=o.get(i,"widgets.".concat(c)),g=o.get(u,"tpaWidgetId"),m=n.styleId||n.style;g&&o.get(n,"componentOptions.widget.tpaWidgetId")===g&&(n.pageId=n.componentOptions.widget.wixPageId||n.pageId,n.showOnAllPages=n.componentOptions.widget.allPages||n.showOnAllPages,m=n.componentOptions.styleId||m);var E,y,h=n.pageId||e.siteAPI.getFocusedRootId();if(!c||!h||!u)throw new Error("invalid params");if(n.componentDefinition)E=n.componentDefinition;else{var A={width:u.defaultWidth,height:u.defaultHeight};n.layout&&o.defaults(n.layout,A),y={width:u.defaultWidth||0,height:u.defaultHeight||0,defaultPosition:u.defaultPosition||o.get(n,"layout.defaultPosition")||{}},(u.defaultShowOnAllPages||n.showOnAllPages||v(u)||"header"===y.defaultPosition.region||"footer"===y.defaultPosition.region)&&(h="masterPage"),E=v(u)?p.getGluedWidgetStructure(a,s,u,y,m):p.getWidgetStructure(a,s,u.widgetId,d.getCompLayoutFrom(e,y,n.layout),m)}var T=n.containerRef||I(e,h,n,y);t||(t=r.getComponentToAddRef(e,T)),p.convertStyleIdToStyleDef(e,E),r.add(e,t,T,E),S(e,t,u,n),l.setPrefetchPageBehaviorIfNeeded(e,t,i),o.isString(n.presetId)&&!o.isEmpty(n.presetId)&&f.set(e,t,"presetId",n.presetId,f.SCOPE.COMPONENT)},I=function(e,t,n,r){var i=e.pointers.components.getPage(t,m.getViewMode(e)),s=i;return n.parentContainerRef&&e.pointers.isSamePointer(e.pointers.components.getPageOfComponent(n.parentContainerRef),i)&&(s=n.parentContainerRef),"header"===o.get(r,"defaultPosition.region")&&(s=a.getSiteHeader(e)),s},S=function(e,t,n,o){var r=n.canBeStretched&&n.shouldBeStretchedByDefault&&!o.dontStretch,a=!1===o.dontStretch;(r||a)&&i.setDock(e,t,{left:{vw:0},right:{vw:0}})},h=function(e,t,n){var r=u.widgetsToAutoAddToSite(e,t);o.forEach(r,(function(o){o.default||y(e,void 0,{widgetId:o.widgetId,componentOptions:n},t)}))},P=function(e,t){var n=o.filter(t.widgets,(function(e){return o.isNil(e.appPage)||o.isUndefined(e.appPage)})),r=o.find(n,{default:!0});return o.get(r,"widgetId")||n&&!o.isEmpty(n)&&n[0].widgetId||null},{isGlued:v=function(e){return o.has(e,"gluedOptions")&&!o.isNull(e.gluedOptions)},addWidgetAfterProvision:function(e,t,n,r,i,a){n=n||{};var p=!0;o.isBoolean(o.get(n,"invokeAddAppCallbacks"))&&(p=o.get(n,"invokeAddAppCallbacks"));var d=!c.isApplicationIdExists(e,r.applicationId);if(d){if(u.hasSections(e,r)){if(u.hasMainSection(e,r))return void(o.isFunction(a)&&a());l.addHiddenPages(e,r,n.componentOptions)}h(e,r,n.componentOptions)}y(e,t,n,r),d&&p&&s.invokeAddAppCallbacks(r.appDefinitionId),e.setOperationsQueue.isRunningSetOperation()?e.setOperationsQueue.executeAfterCurrentOperationDone((function(){d?l.addPlatformAppIfNeeded(e,r).then(o.partial(E,n,t,!0)).catch(o.partial(E,n,t,!1)):E(n,t,!0)})):E(n,t,!0),i&&i(e)},duplicateWidget:function(e,t,n){n=n||e.siteAPI.getFocusedRootId(e);var o=e.pointers.components.getPage(n,m.getViewMode(e));if(!o)throw new Error("no such component");var i=r.getComponentToDuplicateRef(e,t,o);r.duplicate(e,i,t,o)},notifyBeforeWidgetDelete:function(e,t){var n=r.data.get(e,t).applicationId;g.notifyWidgetAboutToDelete(e,t,n,e.setOperationsQueue.asyncPreDataManipulationComplete.bind(e.setOperationsQueue))},deleteWidget:function(e,t){var n=r.data.get(e,t).applicationId,o=g.deleteTpaCompleteCallback.bind(null,e,[n]);g.deleteWidget.apply(l,[e,t,n,o])},getPagesToBeRemovedWithWidget:function(e,t){var n=r.data.get(e,t),i=o.get(n,"applicationId"),a=c.getWidgetsByAppId(e,i);if(g.isLastInstalledMainWidget(a,e,i,t)){var s=o.union([i],o.map(c.getInstalledDependentAppsData(e,i),"applicationId"));return c.getPagesByApplicationIds(e,s)}return[]},invokeWidgetCallback:E=function(e,t,n){e.callback&&e.callback({comp:t,success:n})}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S;e.exports=(o=n(0),r=n(1),i=n(18),a=n(21),s=n(4),n(11),c=n(38),u=n(14),l=n(16),p=n(31),d=n(143),g=n(144),f=n(28),m=n(220),S=function(e,t){var n=c.getBehaviors(e,t),r=o.find(n,{behavior:{name:"prefetchPages"}});r&&c.removeComponentSingleBehavior(e,t,r,r.action.name)},{addSubSection:y=function(e,t,n,a,s){s=s||{},E(n.appPage.id,s);var c=s.title||d.getTitle(a.appDefinitionId,n.widgetId)||n.appPage.name,u="".concat(f.TYPE.TPA_MULTI_SECTION,"_").concat(r.guidUtils.getUniqueId());o.assign(n,{applicationId:a.applicationId});var l=v(e,s.title||n.appPage.name);n.name=c;var p=g.getSubSectionStructure(e,n,u,l,s.requireLogin,s.isHidden);return t=t||i.getPageIdToAdd(e,c,p),I(e,t,u,a.applicationId,a.appDefinitionId,n,p,n.widgetId,f.COMP_TYPES.TPA_MULTI_SECTION,f.DATA_TYPE.TPA_MULTI_SECTION,s),u},addHiddenPages:function(e,t,n){var r=l.getAppSectionsToInstall(e,t.applicationId);o.forEach(r,(function(o){o.appPage.hidden&&o.appPage.id&&y(e,null,o,t,{componentOptions:n})}))},addPageAndSection:I=function(e,t,n,r,a,c,u,l,p,d,m){m=m||{};var v,E=e.pointers.components.getViewMode(t),y=e.pointers.components.getUnattached(n,E),I={componentType:p,type:"Component",id:y.id,style:m.styleId||f.STYLE.TPA_SECTION,skin:f.SKINS.TPA_SECTION,layout:(v=m.layout,{x:(v=v||{}).x||0,y:v.y||0,width:v.width||980,height:v.height||500}),data:{appDefinitionId:a,type:d,applicationId:"".concat(r),metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},widgetId:l}};o.get(c,"appPage.fullPage")||o.get(c,"componentFields.fullPageDesktopOnly")?o.assign(I.layout,{fixedPosition:!0,docked:{top:{px:0},right:{px:0},bottom:{px:0},left:{px:0}}}):c.canBeStretched&&c.shouldBeStretchedByDefault&&o.assign(I.layout,{docked:{left:{vw:0},right:{vw:0}}}),i.add(e,t,c.name,u),g.convertStyleIdToStyleDef(e,I),s.add(e,y,t,I)},getPageUriSEO:v=function(e,t){return a.getValidPageUriSEO(e,"",t.replace(/[^A-Za-z0-9-]/g,"-").toLowerCase()||"blank")},setPrefetchPageBehaviorIfNeeded:function(e,t,n){var r=l.getSectionsWidgetIdsToPreFetch(n);if(!o.isEmpty(r)){var i=p.getHiddenSections(e,n.applicationId);if(!o.isEmpty(i)){var a=o(i).filter((function(e){return o.includes(r,e.widgetId)})).map("pageId").value();if(o.size(a)>0){var s=e.pointers.components.getPage(o.head(a),u.getViewMode(e)),d=c.getBehaviorDefinition(e,"prefetchPages"),g=c.getActionDefinition(e,"screenIn");d.params.prefetchFilters.id=a,S(e,t),c.updateBehavior(e,t,g,s,d)}}}},addPlatformAppIfNeeded:function(e,t,n){return new Promise((function(o,r){l.hasEditorPlatformPart(t)?m.provision(e,t.appDefinitionId,n).then(o,r):o()}))},addSectionComponentOptionsIfNeeded:E=function(e,t){e&&o.get(t,"componentOptions.page.pageId")===e&&(t.title=t.componentOptions.page.title||t.title,t.requireLogin=o.isUndefined(t.componentOptions.page.requireLogin)?t.requireLogin:t.componentOptions.page.requireLogin,t.styleId=t.componentOptions.styleId||t.styleId,t.layout=t.componentOptions.layout||t.layout,t.isHidden=o.isUndefined(t.componentOptions.page.isHidden)?t.isHidden:t.componentOptions.page.isHidden)}})},function(e,t,n){var o;e.exports=(o=n(0),{isCompRescaling:function(e,t){return o.isNumber(t.scale)&&t.scale!==e.scale},isCompResizing:function(e,t){return o.isNumber(t.width)&&t.width!==e.width||o.isNumber(t.height)&&t.height!==e.height}})},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r={"wysiwyg.viewer.components.BoxSlideShow":"wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.StripContainerSlideShow":"wysiwyg.viewer.components.StripContainerSlideShowSlide","wysiwyg.viewer.components.StateBox":["wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateBoxFormState"],"wysiwyg.viewer.components.StateStrip":"wysiwyg.viewer.components.StateStripState"},i=o.flatten(o.values(r)),{isSlideShowComponent:function(e){return o.has(r,e)},getSlidesFromChildrenByStructure:function(e){return o.filter(e,(function(e){var t=e.componentType;return a(t)}))},getShownOnAllSlidesFromChildrenByStructure:function(e){return o.reject(e,(function(e){var t=e.componentType;return a(t)}))},isSlideComponent:a=function(e){return o.includes(i,e)},getMatchingChildSlideType:function(e){var t=r[e];if(!t)throw new Error("invalid comp type, not a slideshow component");return t}})},function(e,t){e.exports=f},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(14),r=n(29);function i(e){var n=e.pointers.components.getMasterPage(o.getViewMode(e));return r.getComponentModesByType(e,n,t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES)}function a(t,n,o){var i=r.overrides.getAllOverrides(t,n);return e.some(i,(function(t){return!e(t.modeIds).intersection(o).isEmpty()}))}function s(t,n){if(!t.pointers.components.isInMasterPage(n))return null;var o=i(t);if(e.isEmpty(o))return null;for(var r=e.map(o,"modeId"),s=n;!a(t,s,r);)if(!(s=t.pointers.components.getParent(s)))return null;return s}return{getSOSPModes:i,removeSOSPMode:function(e,t){var n=e.pointers.components.getMasterPage(o.getViewMode(e));r.removeComponentMode(e,n,t)},getShowOnSomePagesRoot:s,getComponentPagesGroupId:function(t,n){var a,c=s(t,n),u=c?function(t,n){var a=t.pointers.components.getMasterPage(o.getViewMode(t)),s=e.map(i(t),"modeId"),c=r.overrides.getAllOverrides(t,n),u=e.find(c,(function(t){return!e(t.modeIds).intersection(s).isEmpty()}));return r.getComponentModeById(t,a,u.modeIds[0])}(t,c):null;return a=u,e.get(a,["settings","pagesGroupId"],"").replace("#","")}}}()},function(e,t,n){var o;e.exports=(o=n(0),{setScrollAndScale:function(e,t,n,r,i,a){var s=e.siteAPI.getSiteAnimationsService(),c=s.sequence(),u=o.isUndefined(a)?"50%":a.toString();return c.add(s.animate("BaseNone","#SITE_ROOT",0,0,{transformOrigin:"".concat(u," 0")}),0).add(s.animate("BaseScale","#SITE_ROOT",i,0,{to:{scale:r},clearProps:1===r?"transform, transform-origin":""}),0).add(s.animate("BaseScroll",window,i,0,{x:t,y:n}),0),c.get()},animateScroll:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.noop,a=e.siteAPI.getSiteAnimationsService(),s=a.sequence();return s.add(a.animate("BaseScroll",window,r,0,{x:t,y:n,callbacks:{onComplete:i}}),0),s.get()},setScroll:function(e,t,n){if(e.siteAPI.isPopupOpened()){var o=window.document.getElementById("POPUPS_ROOT");o.scrollLeft=t,o.scrollTop=n}else window.scrollTo(t,n)},getScroll:function(e){if(e.siteAPI.isPopupOpened()){var t=window.document.getElementById("POPUPS_ROOT");return{x:o.get(t,"scrollLeft",0),y:o.get(t,"scrollTop",0)}}return{x:o.isFinite(window.pageXOffset)?window.pageXOffset:window.scrollX,y:o.isFinite(window.pageYOffset)?window.pageYOffset:window.scrollY}}})},function(e,t,n){e.exports=function(){var e=n(0),t=(n(26),n(3)),o=n(8),r=n(19),i=n(6),a=n(2),s="data";var c=[{error:"Cannot unhide desktop only component",isValid:function(t,n,r,i){return!1!==e.get(r,"hidden")||!o.public.getMobileConversionConfigByName(t,t.dal.get(n),"desktopOnly",i)}},{error:"Cannot hide not hiddenable component",isValid:function(t,n,r){return!e.get(r,"hidden",!1)||o.public.isHiddenable(t,n)}}],u=[{error:"Unhidden container with children number less than allowed",isValid:function(n,r,i){var a=o.public.getMinimalChildrenNumber(n,r);if(0===a||e.get(i,"hidden",!1))return!0;var s=function(n,o){var r=n.pointers.components.getChildren(o);return e.reject(r,(function(o){return e.get(t.getMobileHintsItem(n,o),"hidden",!1)}))}(n,r);return e.size(s)>=a}},{error:"Unhidden structuralItem component with hidden parent",isValid:function(n,r,i,a){if(!o.public.getMobileConversionConfigByName(n,n.dal.get(r),"structuralItem",a)||e.get(i,"hidden",!1))return!0;var s=n.pointers.components.getParent(r);return!e.get(t.getMobileHintsItem(n,s),"hidden",!1)}}];function l(n,o,r){var i=r||e.get(n.pointers.full.components.getPageOfComponent(o)||n.pointers.components.getPageOfComponent(o),"id",""),a=t.getMobileHintsItem(n,o);!function(t,n,o,r){var i=e.union(c,u);g(t,n,o,r,i)}(n,o,a,i),p(a)}function p(e){e&&r.services.dataValidators.validateDataBySchema(e,s)}function d(e,t,n,o){g(e,t,n,o,c)}function g(t,n,o,r,i){e.forEach(i,(function(e){if(!e.isValid(t,n,o,r))throw new Error(e.error)}))}return{validateComponentMobileHints:l,validateMobileHintsBySchema:p,validateMobileHintsOnPages:function(t,n){var o={};if(e.forEach(n,(function(n){var r=function(t,n){var o=[],r=t.pointers.components.getPage(n,a.VIEW_MODES.DESKTOP);if(!r)return[];var i=t.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(r);return e.forEach(i,(function(e){try{l(t,e,n)}catch(n){o.push({componentId:e.id,componentType:t.dal.get(t.pointers.getInnerPointer(e,"componentType")),error:n.message||n.toString()})}})),o}(t,n);e.isEmpty(r)||e.set(o,n,r)})),!e.isEmpty(o))throw{message:"invalid mobileHints are found",error:o}},initialize:function(){i.unregisterHooks([i.HOOKS.MOBILE_HINTS.UPDATE_BEFORE]),i.registerHook(i.HOOKS.MOBILE_HINTS.UPDATE_BEFORE,d)},testAPI:{beforeUpdateValidators:c,finalStructureValidators:u}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(8),o=n(54),r=n(433),i=n(17),a=r.initialize,s=r.applyPresetsToConversionData;function c(t,n,o){if(!o.mobileHintsQuery)return!1;var r=t.pointers.data.getMobileHintsItem(o.mobileHintsQuery,n);return!(!r||!t.dal.full.isExist(r))&&e.get(t.dal.full.get(r),"hidden",!1)}return{initialize:a,createMobilePreset:r.createDuplicateMobilePreset,applyPresetsToConversionData:s,shouldCreateMobilePreset:function(n,r){if(!i.isMobileSupported(n))return!1;var a=e.get(n.pointers.full.components.getPageOfComponent(r),"id"),s=n.dal.full.get(r);if(!s||c(n,a,s))return!1;if(!1===t.public.getMobileConversionConfigByName(n,s,"createMobilePresets",a))return!1;var u=n.pointers.components.getMobilePointer(r),l=o.getCommittedMobileComponent(n,a,u);return!!l&&!function t(n,o,r){var i=e.reject(n.components||[],(function(e){return r(e)}))||[];var a=e.xor(e.map(i,"id"),e.map(o.components||[],"id"));if(!e.isEmpty(a))return!0;return e.some(i,(function(n){var i=e.find(o.components,{id:n.id});return!i||t(n,i,r)}))}(s,l,c.bind(null,n,a))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(26),o=["MENU_AS_CONTAINER"],r=["wysiwyg.viewer.components.MenuContainer"];function i(e,n){var o=t.conversionUtils.getComponentByIdFromStructure("SITE_HEADER",e);if(o)return t.conversionUtils.extractComponentsFromStructureByType(o,n)}function a(n,o){var r=function(n,o){var r=e.cloneDeep(o);return r.components=[],t.conversionUtils.addComponentsTo(n,[r]),r}(n,e.find(t.conversionUtils.getChildren(o),{id:"MENU_AS_CONTAINER"})),a=i(n,["wysiwyg.viewer.components.LoginSocialBar","wysiwyg.viewer.components.LanguageSelector"]);e.isEmpty(a)||t.conversionUtils.addComponentsTo(r,a)}function s(e,n){t.conversionUtils.getComponentByIdFromStructure("MENU_AS_CONTAINER",n)&&(!function(e){var n=i(e,["wysiwyg.viewer.components.MenuContainer"]);t.conversionUtils.addComponentsTo(e,n)}(n),a(e,n))}function c(e,n){var o=t.conversionUtils.getComponentByIdFromStructure("MENU_AS_CONTAINER",e);o&&(t.conversionUtils.removeChildrenFrom(e,[o]),function(e){var n=t.conversionUtils.extractComponentsFromStructureByType(e,["wysiwyg.viewer.components.MenuContainer"]),o=t.conversionUtils.getComponentByIdFromStructure("SITE_HEADER",e);t.conversionUtils.addComponentsTo(o,n)}(n))}return{isMobileOnlyComponentToBeMockedInDesktop:function(t){return e.includes(r,e.get(t,"componentType"))},isMobileOnlyComponent:function(n,r){return t.mobileOnlyComponents.isMobileOnlyComponentId(r)||function(t){return e.includes(o,t)}(r)},handleComponentsBeforeMobileAlgo:function(e,t){s(e,t)},handleComponentsAfterMobileAlgo:function(e,t){c(e,t)}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(13),i=n(19),{setSiteMetaData:function(e,t){var n=o.omit(t,["preloader","contactInfo","quickActions"])||{},a=o.clone(o.get(t,"preloader"))||{},s=o.clone(o.get(t,"contactInfo"))||{},c=o.clone(o.get(t,"quickActions"))||{},u=i.services.dataValidators;u.validateItem(n,"data",{schemaName:"MobileMetaData"}),u.validateItem(a,"data",{schemaName:"Preloader"}),u.validateItem(s,"data",{schemaName:"ContactInfo"}),u.validateItem(c,"data",{schemaName:"QuickActions"}),t=o.assign(n,{preloader:a},{contactInfo:s},{quickActions:c}),r.setProperty(e,r.PROPERTY_NAMES.SITE_META_DATA,t)},getSiteMetaData:function(e){return r.getProperty(e,r.PROPERTY_NAMES.SITE_META_DATA)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(116),r=n(63),i=n(60),a=n(3),s=t.constants.DATA_TYPES,c="PAGES_GROUP_COLLECTION",u="PagesGroupCollection",l="PagesGroupData";function p(e,t){return e.pointers.data.getDataItem(t.replace("#",""),"masterPage")}function d(t){var n=t.pointers.data.getDataItem(c,"masterPage");if(!n)return[];var o=t.pointers.getInnerPointer(n,"groups"),r=t.dal.full.get(o);return e.map(r,p.bind(null,t))}function g(t){return e.map(d(t),y.bind(null,t))}function f(t,n,o){var r=g(t);if(function(t,n){return e.some(t,(function(t){return e.some(n,(function(n){return e.includes(t.pages,n)}))}))}(e.reject(r,{id:n}),o))throw new Error("pagesGroup: page already exists in another pagesGroup")}function m(t,n){t.dal.isExist(n)&&(!function(e,t){var n=r.getSospModeByPagesGroup(e,t);n&&o.removeSOSPMode(e,n.modeId)}(t,n),function(t,n){var o=t.pointers.data.getDataItemFromMaster(c),r=t.pointers.getInnerPointer(o,"groups"),i=t.dal.get(r),a=e.pull(i,"#".concat(n.id));t.dal.set(r,a)}(t,n),a.removeDataItemRecursively(t,n))}function v(t,n){var o=e.find(g(t),n);return o?t.pointers.data.getDataItem(o.id,"masterPage"):null}function E(e,t){return v(e,{id:t})}function y(e,t){return t?e.dal.get(t):null}return{createPagesGroup:function(t,n,o){var r=function(t,n){var o=a.createDataItemByType(t,l);return e.defaults(n,o)}(t,o);!function(t,n,o){var r=g(t);if(e.isEmpty(n.groupName))throw new Error("pagesGroup: groupName is required");if(e.some(r,["groupName",n.groupName]))throw new Error("pagesGroup: groupName must be unique");if(e.has(n,"appId")&&e.some(r,["appId",n.appId]))throw new Error("pagesGroup: appId must be unique");f(t,o,n.pages)}(t,r,n),a.addSerializedDataItemToPage(t,"masterPage",r,n),function(e){return Boolean(a.getDataItemById(e,c))}(t)||function(e){var t=a.createDataItemByType(e,u);a.addSerializedDataItemToPage(e,"masterPage",t,c)}(t),function(e,t){var n=e.pointers.data.getDataItemFromMaster(c),o=e.pointers.getInnerPointer(n,"groups");e.dal.push(o,"#".concat(t))}(t,n)},removePagesGroup:m,getNewPagesGroupId:function(){return i.generateNewId(s.data)},getAll:d,getPagesGroupById:E,getPagesGroupByGroupName:function(e,t){return v(e,{groupName:t})},getPagesGroupByAppId:function(e,t){return v(e,{appId:t})},getPagesGroupByPageId:function(t,n){var o="#".concat(n);return v(t,(function(t){return e.includes(t.pages,o)}))},getComponentPagesGroup:function(e,t){var n=o.getComponentPagesGroupId(e,t);return n?E(e,n):null},serializePagesGroup:y,addPageToPagesGroup:function(t,n,o){var r=t.pointers.getInnerPointer(n,"pages"),i=t.dal.get(r),a="#".concat(o);i&&!e.includes(i,a)&&(f(t,n.id,[a]),t.dal.push(r,a),t.siteAPI.updateActiveSOSPModes())},removePageFromPagesGroup:function(t,n,o){var r=t.pointers.getInnerPointer(n,"pages"),i=t.dal.get(r),a="#".concat(o);if(e.includes(i,a)){var s=e.without(i,a);e.isEmpty(s)?m(t,n):t.dal.set(r,s),t.siteAPI.updateActiveSOSPModes()}}}}()},function(e,t,n){e.exports=function(){var e=n(180),t=n(0),o=n(26),r=n(39),i=n(54),a=n(448),s=n(449),c=n(95),u=n(124),l=n(453),p=n(2),d=n(6),g=n(1),f=n(94),m=n(8),v=n(4),E=n(3),y=n(120),I=function(e,t,n){return e.pointers.full.components.getComponent(t,e.pointers.components.getPage(n,p.VIEW_MODES.DESKTOP))},S=function(e,t,n){return e.pointers.components.getComponent(t,e.pointers.components.getPage(n,p.VIEW_MODES.MOBILE))},h=function(e,n,o,r){return t.get(m.public.getMobileConversionConfig(e,e.dal.get(n),o),r)},P=y.isMobileOnlyComponent;function A(t,n){var o=t.pointers.components.getPage(n,p.VIEW_MODES.MOBILE);e.updatePageProperties(t,o,{minHeight:null})}function T(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"componentType"));d.executeHook(d.HOOKS.MOBILE_CONVERSION.BEFORE,n,[e,t])}function _(e){!function(e){var n=i.getChangedPagesPointers(e),o=t.map(e.siteAPI.getAllRenderedRootIds(),(function(t){return e.pointers.page.getPagePointer(t)}));t.forEach(t.uniqBy(n.concat(o),"id"),(function(t){return T(e,t)}))}(e),r.runPartialConversionAllPages(e)}function O(e,t){return e.dal.get(e.pointers.getInnerPointer(t,"componentType"))===p.MOBILE_ONLY_COMPONENT_TYPES.BACK_TO_TOP_BUTTON_LEGACY}function C(e,t,n){var o=e.pointers.components.getMasterPage(p.VIEW_MODES.MOBILE),r=v.getComponentToAddRef(e,o,null,p.MOBILE_ONLY_COMPONENTS.BACK_TO_TOP_BUTTON),i=l.getBackToTopButtonDefinition(t,n);v.add(e,r,o,i)}function D(e,n){return t.reduce(n,(function(n,o,r){return t.set(n,r,function(e,n,o){var r=t.flatMap(n,(function(n){if(P(e,n))return[];var r=e.pointers.components.getPage(o,p.VIEW_MODES.DESKTOP),i=e.pointers.components.getComponent(n,r);return h(e,i,o,"filterChildrenWhenHidden")?t.map(e.pointers.components.getChildrenRecursively(i),"id"):[]}));return t.difference(n,r)}(e,o,r))}),{})}function w(e,n){var o=e.pointers.components.getPage(n,p.VIEW_MODES.DESKTOP);if(!o)return null;var r=e.pointers.components.getChildrenRecursively(o),i=t(r).filter((function(n){return t.get(E.getMobileHintsItem(e,n),"hidden")&&t.get(E.getMobileHintsItem(e,n),"displayedCompId",n.id)===n.id})).map("id").value();return n!==p.MASTER_PAGE_ID?i:(function(e,t){!M(e,p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER)&&!M(e,p.MOBILE_ONLY_COMPONENTS.TINY_MENU)&&t.push(p.MOBILE_ONLY_COMPONENTS.TINY_MENU),M(e,p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER)&&!M(e,p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE)&&t.push(p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE),M(e,p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER)&&!M(e,p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU)&&t.push(p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU)}(e,i),t.compact(i))}function M(e,t){var n=S(e,t,p.MASTER_PAGE_ID);return n&&e.dal.isExist(n)}function b(e,n){var o=n?[n]:t.keys(e.dal.get(e.pointers.page.getAllPagesPointer())),r=t.reduce(o,(function(n,o){return t.set(n,o,w(e,o))}),{});return n?r[n]:r}return{initialize:function(e){var n,o;n=d.HOOKS.SWITCH_VIEW_MODE.MOBILE,o=t.bind(_,null,e),d.unregisterHooks([n]),d.registerHook(n,o),f.initialize(e)},reLayoutPage:function(e,t){t=t||e.siteAPI.getCurrentUrlPageId(),T(e,e.pointers.page.getPagePointer(t)),A(e,t);var n=i.getPage(e,t);r.runMobileConversionOnPage(e,n),d.executeHook(d.HOOKS.RELAYOUT_MOBILE_PAGE.AFTER,null,[e,t])},enableBackToTopButton:function(e,t){if("boolean"!=typeof t)throw new Error("invalid parameter type");var n=p.MASTER_PAGE_ID,o=S(e,p.MOBILE_ONLY_COMPONENTS.BACK_TO_TOP_BUTTON,n),i=o&&e.dal.isExist(o);t&&!i&&r.addMobileOnlyComponent(e,p.MOBILE_ONLY_COMPONENTS.BACK_TO_TOP_BUTTON),!t&&i&&s.hideMobileComponent(e,o,n,{updateLayout:!1})},toggleBackToTopButton:function(e,t,n){var o=S(e,p.MOBILE_ONLY_COMPONENTS.BACK_TO_TOP_BUTTON,p.MASTER_PAGE_ID),r=e.dal.isExist(o);r&&t&&O(e,o)?(v.deleteComponent(e,o),C(e,!0,n)):!r&&t?C(e,!1,n):r&&!t&&v.deleteComponent(e,o)},isLegacyBackToTopButton:O,setComponentDisplayMode:a.setComponentDisplayMode,getTinyMenuDefaultPosition:o.conversionUtils.getTinyMenuDefaultPosition,hiddenComponents:{get:b,getFiltered:function(e,n){var o=b(e,n),r=D(e,n?t.set({},n,o):o);return n?r[n]:r},hide:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{updateLayout:!0};if(n=e.pointers.components.getMobilePointer(n),m.shouldBeRemovedByParent(e,n)&&(n=e.pointers.components.getParent(n)),e.dal.isExist(n)){var r=e.pointers.components.getPageOfComponent(n).id;A(e,r);var i=I(e,n.id,r),a={hidden:!0};g.displayedOnlyStructureUtil.isDisplayedOnlyComponent(n.id)&&t.assign(a,{displayedCompId:n.id}),f.updateProperty(e,a,i,{updateChildren:!0,childrenSourceView:p.VIEW_MODES.MOBILE},r),s.hideMobileComponent(e,n,r,o)}},show:function(e,t,n,a){if(!n||!a)throw new Error("function must receive component id and page id");if(P(e,n))!function(e,t){switch(t){case p.MOBILE_ONLY_COMPONENTS.TINY_MENU:r.addMobileOnlyComponent(e,p.MOBILE_ONLY_COMPONENTS.TINY_MENU,{commitConversionResults:!1});break;case p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE:u.toggle.add(e);break;case p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU:u.expandableMenu.add(e)}}(e,n);else{var s=I(e,n,a);f.updateProperty(e,{hidden:!1},s,{updateChildren:!0,childrenSourceView:p.VIEW_MODES.DESKTOP});var l=i.getPage(e,a),d=o.conversionUtils.extractMobilePage(l),g=c.getConversionSettings({conversionType:"MERGE_UNHIDE"});r.runMobileMergeOnPage(e,l,d,g)}},set:function(e,n,r){var i=e.dal.full.get(e.pointers.page.getPagePointer(n)).structure,a=t(g.dataUtils.getAllCompsInStructure(i)).reject(o.conversionUtils.isPageComponent).map("id").value();t.forEach(a,(function(o){var i=t.includes(r,o),a=I(e,o,n);f.updateProperty(e,{hidden:i},a)}))}},isMobileOnlyComponent:P,isMobileOnlyComponentExistOnStructure:M,mobileOnlyComps:p.MOBILE_ONLY_COMPONENTS,implicitFontSize:function(e,t){return g.mobileUtils.convertFontSizeToMobile(t,1)},getMobileComponentToShow:S}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A;e.exports=(o=n(0),r=n(26),i=n(4),a=n(2),s=n(38),c=n(450),u=n(451),l=n(452),p=n(94),d=n(39),g=n(93),f=n(54),m=n(95),S=function(e,t){if(!E(e))throw new Error("cannot add menu container toggle without menu instance");if(!y(e)){var n=e.pointers.components.getHeader(a.VIEW_MODES.MOBILE),r=i.getComponentToAddRef(e,n,null,a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE);o.assign(u.layout,t),i.add(e,r,n,u),h(e,v(e),r)}},h=function(e,t,n){return s.updateBehavior(e,n,{name:"click",type:"comp"},t,{name:"toggle",type:"comp"})},P=function(e){if(!E(e))throw new Error("cannot add menu container toggle without menu instance");if(!I(e)){var t=v(e),n=i.getComponentToAddRef(e,t,null,a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU);i.add(e,n,t,l)}},A=function(e,t){var n=e.pointers.components.getMasterPage(a.VIEW_MODES.MOBILE),s=e.pointers.components.getComponent(a.COMP_IDS.HEADER,n),u=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,s);if(!e.dal.isExist(u)){var l=i.getComponentToAddRef(e,s,null,a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER);i.add(e,l,s,c),P(e),S(e,t),function(e){var t=e.pointers.components.getMasterPage(a.VIEW_MODES.DESKTOP),n=["wysiwyg.viewer.components.LoginSocialBar","wysiwyg.viewer.components.LanguageSelector"];if(o(g.getHiddenAndShownComponents(e,a.MASTER_PAGE_ID).hiddenComponents).map((function(n){return e.pointers.components.getComponent(n,t)})).filter((function(t){var r=e.dal.get(e.pointers.getInnerPointer(t,"componentType"));return o.includes(n,r)})).forEach((function(t){return p.updateProperty(e,{hidden:!1},t)})).length>0){var i=f.getPage(e,a.MASTER_PAGE_ID),s=r.conversionUtils.extractMobilePage(i),c=m.getConversionSettings({conversionType:"MERGE_UNHIDE"});d.runMobileMergeOnPage(e,i,s,c)}}(e)}},{get:v=function(e){var t=e.pointers.components.getMasterPage(a.VIEW_MODES.MOBILE);return e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,t)},isExist:E=function(e){var t=e.pointers.components.getMasterPage(a.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,t);return e.dal.isExist(n)},upgrade:function(e){var t=function(e){var t=e.pointers.components.getHeader(a.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.TINY_MENU,t),r=e.pointers.getInnerPointer(n,"layout"),s=e.dal.get(r);if(e.dal.isExist(n))return i.deleteComponent(e,n),o.pick(s,["x","y"])}(e);A(e,t)},toggle:{get:function(e){var t=e.pointers.components.getMasterPage(a.VIEW_MODES.MOBILE);return e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE,t)},isExist:y=function(e){var t=e.pointers.components.getMasterPage(a.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE,t);return e.dal.isExist(n)},add:S},expandableMenu:{isExist:I=function(e){var t=e.pointers.components.getMasterPage(a.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU,t);return e.dal.isExist(n)},add:P}})},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(1),i=n(21),a=r.imageClientApi,{getBlankPageStructure:function(e,t){var n={componentType:"mobile.core.components.Page",type:"Page",id:"mainPage",styleId:"p2",skin:"skins.core.InlineSkin",layout:{x:0,y:0,width:980,height:500,anchors:[]},data:{type:"Page",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"Blank",hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"",hidePage:!1,underConstruction:!1,pageBackgrounds:null},components:[]};return n.data=o.assign(n.data,{pageUriSEO:i.getValidPageUriSEO(e,t,"blank"),pageBackgrounds:o.get(i.getPageDataWithoutIds(e,e.siteAPI.getPrimaryPageId()),"pageBackgrounds")}),n},getBlankPopupPageStructure:function(){var e={componentType:"mobile.core.components.Page",type:"Page",id:"mainPage",styleId:"p2",skin:"skins.core.InlineSkin",layout:{x:0,y:0,width:980,height:500,anchors:[]},data:{type:"Page",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"Blank",hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"",hidePage:!1,underConstruction:!1,pageBackgrounds:null},components:[]};e.data=o.assign({},e.data,{pageBackgrounds:{desktop:{custom:!0,ref:{type:"BackgroundMedia",color:"{color_11}",alignType:"top",fittingType:"fill",scrollType:"fixed"},isPreset:!1},mobile:{custom:!0,ref:{type:"BackgroundMedia",color:"{color_11}",alignType:"top",fittingType:"fill",scrollType:"fixed"},isPreset:!0}},indexable:!1,isPopup:!0});var t={popup:{closeOnOverlayClick:!0}};return e.props=o.defaults({type:"PageProperties",metaData:{schemaVersion:"1.0"},mobile:o.cloneDeep(t),desktop:o.cloneDeep(t)},e.props),e.components=[{type:"Container",components:[],skin:"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer",props:{type:"PopupContainerProperties",metaData:{schemaVersion:"1.0"},horizontalAlignment:"center",verticalAlignment:"center",alignmentType:"nineGrid",horizontalOffset:0,verticalOffset:0},design:{type:"MediaContainerDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},background:{type:"BackgroundMedia",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},color:"#FFFFFE",colorOpacity:1,alignType:"center",fittingType:"fill",scrollType:"none",colorOverlay:"",colorOverlayOpacity:0}},layout:{width:340,height:276,x:620,y:80,scale:1,rotationInDegrees:0,anchors:[]},componentType:"wysiwyg.viewer.components.PopupContainer",style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-bg":"1",bg:"rgba(255,255,255,1)"},propertiesSource:{"alpha-bg":"value",bg:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.PopupContainer",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer",id:"style-ili7m0pe"}}],e},getBlankBackground:function(){return{desktop:{custom:!0,ref:{type:"BackgroundMedia",color:"{color_11}",alignType:a.alignTypes.CENTER,fittingType:a.fittingTypes.SCALE_TO_FILL,scrollType:"none"},isPreset:!0},mobile:{custom:!0,ref:{type:"BackgroundMedia",color:"{color_11}",alignType:a.alignTypes.CENTER,fittingType:a.fittingTypes.SCALE_TO_FILL,scrollType:"none"},isPreset:!0}}}})},function(e,t){e.exports=m},function(e,t,n){e.exports=function(){var e=n(0),t=n(46),o=n(22),r=e.template("<%= baseUrl %>/api/code/apps?msid=<%= metasiteId %>"),i=e.template("<%= baseUrl %>/api/code/apps/<%= gridAppId %>/clone?msid=<%= metasiteId %>&isFirstSave=<%= isFirstSave %>"),a=e.template("<%= baseUrl %>/api/code/apps/<%= gridAppId %>/save?msid=<%= metasiteId %>"),s=function(t){var n=t.signedInstance,o=t.accept;return e.pickBy({"X-Wix-Si":n,Accept:o})},c=function(n){var o=n.url,r=n.data,i=n.signedInstance,a=n.accept;return e.assign({url:o,type:t.requestTypes.POST,contentType:"application/json",data:r,headers:s({signedInstance:i,accept:a}),timeout:15e3,xhrFields:{withCredentials:!0},crossDomain:!0})};function u(e){return e.payload}return{create:function(e){var n=e.baseUrl,o=e.metasiteId,i=e.signedInstance,a=r({baseUrl:n,metasiteId:o}),s=c({url:a,data:{},signedInstance:i});return t.sendRequestObj(s).then(u)},save:function(e){var n=e.baseUrl,o=e.gridAppId,r=e.metasiteId,i=e.signedInstance,s=a({baseUrl:n,gridAppId:o,metasiteId:r}),u=c({url:s,data:{},signedInstance:i});return t.sendRequestObj(u)},clone:function(e){var n=e.baseUrl,o=e.gridAppId,r=e.metasiteId,a=e.signedInstance,s=e.isFirstSave,l=i({baseUrl:n,gridAppId:o,metasiteId:r,isFirstSave:s}),p=c({url:l,data:{},signedInstance:a,accept:"*/*"});return t.sendRequestObj(p).then(u)},getBaseUrlFromPS:function(e){var t=e.pointers.general.getServiceTopology();return e.dal.get(e.pointers.getInnerPointer(t,o.WIX_CODE_SERVICE_URL_KEY))}}}()},function(e,t){e.exports=v},function(e,t){e.exports=E},function(e,t,n){e.exports=function(){var e=n(48);function t(e){!function(e){e.dal.set(e.pointers.wixCode.getBundleCacheKillerMap(),{})}(e),function(e,t){var n=o(e.dal.get(t));e.dal.set(t,n)}(e,e.pointers.wixCode.getGlobalBundleCacheKiller())}function o(e){var t=Date.now().toString();return t===e?"".concat(t,"_1"):t}return{init:function(e){t(e)},getNewCacheKillerValue:o,notifyItemModified:function(n,o){var r=o.location;e.wixCodeUserScriptsService.filePathAffectsBundles(r)&&t(n)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(46),r=n(102),i=n(103),a=n(22),s="application/json;charset=UTF-8",c="text/plain;charset=UTF-8",u="public",l="backend",p=".schemas",d="/",g=/^\/file\/[^\/]+\/(.+)$/;function f(e,t){return e.match(g)?e:"/file/".concat(t.appId,"/").concat(e)}function m(t){return e.assign({},t,{location:(n=t.location,o=n.match(g),o?o[1]:n)});var n,o}function v(t){return e.isString(t)}function E(t){return e.isObject(t)&&t.diff&&e.isArray(t.diff)}function y(e){return e?"?".concat(t.urlUtils.toQueryString(e)):""}function I(e){return"".concat(e.baseUrl,"/v1")}function S(t,n){return t.headers=e.assign({"X-Wix-Si":n.signedInstance},t.headers),e.assign(t,{xhrFields:{withCredentials:!0},crossDomain:!0}),o.sendRequestObj(t)}function h(e,t,n,o){return e.url=function(e,t,n){return I(e)+f(t,e)+y(n)}(t,n,o),S(e,t)}function P(e,t,n,o){return e.url=function(e,t,n){return"".concat(I(e),"/find").concat(f(t,e)).concat(y(n))}(t,n,o),S(e,t)}function A(e,t,n){return e.url=function(e,t){return"".concat(e.baseUrl,"/files/").concat(e.appId).concat(y(t))}(t,n),S(e,t)}function T(t,n,a,c){if(!r.isFolder(a))return Promise.reject(new i.ArgumentError("parentFolder","fileSystemService.doCreateFileOrFolder",a,"folder object"));if(u=n,!(e.isString(u)&&u.length>0))return Promise.reject(new i.ArgumentError("itemName","fileSystemService.doCreateFileOrFolder",n));var u,l={name:n,localTimeStamp:0,directory:c};return h({type:o.requestTypes.POST,contentType:s,headers:{"X-Create-Options":"no-overwrite"},timeout:15e3,data:JSON.stringify(l)},t,a.location).then(m)}function _(e,t,n,a,c){if(!r.isFileSystemItem(n))return Promise.reject(new i.ArgumentError("fileSystemItem","fileSystemService.doCopyOrMove",n));if(!r.isFolder(a))return Promise.reject(new i.ArgumentError("targetFolder","fileSystemService.doCopyOrMove",a,"folder object"));if(!c){var u=n.location.split(d);c=u.pop()||u.pop()}var l={"X-Create-Options":"no-overwrite,".concat(t)},p={name:c,location:f(n.location,e)};return h({type:o.requestTypes.POST,contentType:s,headers:l,timeout:15e3,data:JSON.stringify(p)},e,a.location).then(m)}function O(e,t){var n=e.replace(new RegExp("".concat(d,"*$")),"");return{virtual:!0,localTimeStamp:0,eTag:'"virtual"',name:n.split(d).pop(),length:0,directory:Boolean(t),location:n+(t?d:""),attributes:{readOnly:!1}}}return{getRoots:function(){return{schemas:O(p,!0),public:O(u,!0),pages:O("".concat(u,"/").concat(a.PAGES_ROOT),!0),backend:O(l,!0)}},createFolder:function(e,t,n){return T(e,t,n,!0)},deleteItem:function(e,t){return r.isFileSystemItem(t)?h({type:o.requestTypes.DELETE,timeout:15e3},e,t.location):Promise.reject(new i.ArgumentError("location","fileSystemService.deleteItem",t))},copy:function(e,t,n,o){return _(e,"copy",t,n,o)},move:function(e,t,n,o){return _(e,"move",t,n,o)},getChildren:function(t,n){return r.isFolder(n)?h({type:o.requestTypes.GET},t,n.location,{depth:1}).then((function(t){return e.map(t.children||[],m)})):Promise.reject(new i.ArgumentError("parentFolder","fileSystemService.getChildren",n,"folder object"))},getMetadata:function(e,t){return r.isFileSystemItem(t)?h({type:o.requestTypes.GET},e,t.location,{parts:"meta"}).then(m):Promise.reject(new i.ArgumentError("fileSystemItem","fileSystemService.getMetadata",t,"file system object"))},readAllFiles:function(e){return A({type:o.requestTypes.GET,headers:{Accept:"application/json"}},e)},readFile:function(e,t){return r.isFileSystemItem(t)?h({type:o.requestTypes.GET,headers:{Accept:"text/plain"},contentType:"text/plain",dataType:"text"},e,t.location):Promise.reject(new i.ArgumentError("filePath","fileSystemService.readFile",t,"file object"))},writeFile:function(e,t,n){return r.isFileSystemItem(t)?v(n)||E(n)?"string"==typeof n?function(e,t,n){if(!v(n))return Promise.reject(new i.ArgumentError("content","fileSystemService.overrideFileContent",n,"string"));var r={"If-Match":t.eTag};return h({type:o.requestTypes.PUT,headers:r,contentType:c,log:!1,data:n},e,t.location).then(m)}(e,t,n):function(e,t,n){if(!E(n))return Promise.reject(new i.ArgumentError("partialChange","fileSystemService.patchFileContent",n,"partial change with diff object"));var r={"X-HTTP-Method-Override":"PATCH","If-Match":t.eTag};return h({type:o.requestTypes.POST,headers:r,contentType:c,log:!1,data:JSON.stringify(n)},e,t.location).then(m)}(e,t,n):Promise.reject(new i.ArgumentError("content","fileSystemService.writeFile",n,"string or partial-change object")):Promise.reject(new i.ArgumentError("filePath","fileSystemService.writeFile",t,"file object"))},bulkWrite:function(e,t){var n={updates:t.map((function(e){return{path:e.fileId,content:e.content}}))};return S({url:"".concat(I(e),"/files/").concat(e.appId),type:o.requestTypes.PUT,contentType:s,data:JSON.stringify(n),headers:{Accept:"*/*"},dataType:"text"},e)},getVirtualDescriptor:O,findByExtension:function(t,n,a){if(!r.isFolder(n))return Promise.reject(new i.ArgumentError("parentFolder","fileSystemService.findByExtension",n,"folder object"));if(e.isEmpty(a))return Promise.reject(new i.ArgumentError("extension","fileSystemService.findByExtension",a,"empty extension"));var s={extension:e.startsWith(a,".")?a:".".concat(a)};return P({type:o.requestTypes.GET},t,n.location,s).then((function(t){return e.map(t.items||[],m)}))}}}()},function(e,t){e.exports={PUBLIC:"public",PAGES:"public/pages",BACKEND:"backend",SCHEMAS:".schemas"}},function(e,t,n){e.exports=function(){var e=n(0),t=n(195),o=n(47),r=n(22),i=n(196);function a(e,t,n){return e.dal.isExist(t)?e.dal.get(t):n}function s(e,t){e.dal.isExist(t)&&e.dal.remove(t)}function c(t,n,r){e.isUndefined(r)&&o.trace(t,{action:"filesDAL.loadFileContent",message:{filePath:n}})({message:new Error("about to set file content to undefined"),level:o.levels.ERROR});var i=t.pointers.wixCode.getLoadedFileContent(n);t.dal.isExist(i)||t.dal.set(i,r)}function u(t,n){return e.some([t.pointers.wixCode.getLoadedFileContent(n),t.pointers.wixCode.getModifiedFileContent(n)],t.dal.isExist)}function l(t){return e.orderBy(t,["directory","name"],["desc","asc"])}function p(e,t){var n=e&&e.getIn(t);return n?n.toJS():null}function d(n,o,r){return e.mapValues(o,(function(e,i){return t.isUndoableFile(i)?t.assembleUndoableFile(i,n[i],o[i],r[i]):o[i]}))}function g(e){if(!e)return null;var n=p(e,r.paths.LOADED_FILE_CONTENTS),o=p(e,r.paths.MODIFIED_FILE_CONTENTS),i=p(e,r.paths.UNDOABLE_MODIFIED_FILE_CONTENTS),a=p(e,r.paths.FILE_PATH_TO_ID_MAP);return d(n,o,t.getUndoableContentByPath(i,a))}function f(t,n){return e.transform(n,(function(n,o,r){o!==e.get(t,r)&&n.push({fileId:r,content:o})}),[])}function m(t,n){return e.transform(n,(function(o,r,i){if(!e.get(t,i)){for(var a=r;n[a];)a=n[a];o.push({destFileId:i,srcFileId:a})}}),[])}function v(e,n){var o=g(e),i=function(e){var n=a(e,e.pointers.wixCode.getLoadedFileContentMap(),{}),o=a(e,e.pointers.wixCode.getModifiedFileContentMap(),{}),r=a(e,e.pointers.wixCode.getUndoableModifiedFileContentMap(),{}),i=a(e,e.pointers.wixCode.getFilePathToIdMap(),{});return d(n,o,t.getUndoableContentByPath(r,i))}(n),s=e&&e.getIn(r.paths.DUPLICATED_FILES_INFO)?e.getIn(r.paths.DUPLICATED_FILES_INFO).toJS():{},c=n.dal.get(n.pointers.wixCode.getDuplicatedFilesInfoMap()),u=a(n,n.pointers.wixCode.getDirectoryFlagByDeletedPathMap(),{});return{toSave:f(o,i),toCopy:m(s,c),toDelete:u}}return{writeFile:function(n,r,i){e.isUndefined(i)&&o.trace(n,{action:"filesDAL.writeFile",message:{filePath:r}})({message:new Error("about to set file content to undefined"),level:o.levels.ERROR});var a=n.pointers.wixCode.getModifiedFileContent(r);n.dal.set(a,i),function(t,n){var o=t.pointers.wixCode.getDuplicatedFilesInfoMap(),r=t.dal.get(o);r[n]&&t.dal.set(o,e.omit(r,[n]))}(n,r),t.isUndoableFile(r)&&t.setUndoableContent(n,r,i)},loadFileContent:c,readFile:function(n,o){if(t.isUndoableFile(o))return function(e,n){var o=a(e,e.pointers.wixCode.getLoadedFileContent(n),null),r=a(e,e.pointers.wixCode.getModifiedFileContent(n),null),i=t.getUndoableContent(e,n);return null===o&&null===r&&null===i?null:t.assembleUndoableFile(n,o,r,i)}(n,o);var r=e.find([n.pointers.wixCode.getModifiedFileContent(o),n.pointers.wixCode.getLoadedFileContent(o)],n.dal.isExist);return r?n.dal.get(r):null},getSourceFilePath:function(e,t){for(var n=e.pointers.wixCode.getDuplicatedFilesInfoMap(),o=e.dal.get(n);o[t];)t=o[t];return t},markFileForDuplication:function(e,t,n){var o=e.pointers.wixCode.getDuplicatedFilesInfoMap(),r=e.dal.get(o);r[n]=t,e.dal.set(o,r)},updateDuplicates:function t(n,o,r){var i=n.pointers.wixCode.getDuplicatedFilesInfoMap(),a=n.dal.get(i),s=e.transform(a,(function(e,t,r){r!==o||u(n,t)?t!==o||u(n,r)||e.push(r):e.push(t)}),[]);e.forEach(s,(function(e){c(n,e,r)})),e.forEach(s,(function(e){t(n,e,r)}))},moveFile:function(t,n,o){if(u(t,o))throw new Error("target file [".concat(o,"] already exists"));e.forEach([t.pointers.wixCode.getLoadedFileContent,t.pointers.wixCode.getModifiedFileContent,t.pointers.wixCode.getFilePathId],(function(e){!function(e,t,n){e.dal.isExist(t)&&(e.dal.set(n,e.dal.get(t)),e.dal.remove(t))}(t,e(n),e(o))}))},deleteFile:function(e,t){s(e,e.pointers.wixCode.getLoadedFileContent(t)),s(e,e.pointers.wixCode.getModifiedFileContent(t)),s(e,e.pointers.wixCode.getFilePathId(t))},deleteFolder:function(t,n){e.forEach([t.pointers.wixCode.getLoadedFileContentMap(),t.pointers.wixCode.getModifiedFileContentMap(),t.pointers.wixCode.getFilePathToIdMap(),t.pointers.wixCode.getAreChildrenLoadedMap(),t.pointers.wixCode.getLoadedChildrenMap()],(function(o){var r=t.dal.get(o),i=e(r).keys().filter(function(t){var n=t.replace(/\/*$/,"/");return function(t){return e.startsWith(t,n)}}(n)).value(),a=e.omit(r,i);t.dal.set(o,a)}))},isFileReadable:function(n,o){return t.isUndoableFile(o)?n.dal.isExist(n.pointers.wixCode.getLoadedFileContent(o)):e.some([n.pointers.wixCode.getLoadedFileContent(o),n.pointers.wixCode.getModifiedFileContent(o)],n.dal.isExist)},isFileExists:u,addChild:function(t,n,o){var r=t.pointers.wixCode.getLoadedChildren(n),i=t.dal.get(r)||[];if(!e.find(i,{name:o.name,directory:o.directory})){var a=l(function(e,t){return e.concat([t])}(i,o));t.dal.set(r,a)}},removeChild:function(t,n,o){var r=t.pointers.wixCode.getLoadedChildren(n),i=function(t,n){return e.reject(t,{name:n.name,directory:n.directory})}(t.dal.get(r)||[],o);t.dal.set(r,i)},hasKnownChild:function(t,n,o){var r=t.pointers.wixCode.getLoadedChildren(n),i=t.dal.get(r)||[];return!!e.find(i,{name:o.name,directory:o.directory})},isChildrenExists:function(e,t){return e.dal.isExist(e.pointers.wixCode.getLoadedChildren(t))},areChildrenLoaded:function(e,t){return!!e.dal.get(e.pointers.wixCode.getAreChildrenLoaded(t))},getChildren:function(e,t){var n=e.pointers.wixCode.getLoadedChildren(t);return n?e.dal.get(n):null},loadChildren:function(t,n,o){var r=t.pointers.wixCode.getLoadedChildren(n),i=l(function(t,n){return e.unionBy(t,n,"name")}(t.dal.get(r)||[],o));t.dal.set(r,i),t.dal.set(t.pointers.wixCode.getAreChildrenLoaded(n),!0)},getChanges:function(e){var t=i.getTaskName()+i.getSnapshotTags();return v(e.dal.full.immutable.getLastSnapshotByTagName(t),e)},getChangesBetweenSnapshots:function(e,t){var n=g(e),o=g(t),i=e&&e.getIn(r.paths.DUPLICATED_FILES_INFO)?e.getIn(r.paths.DUPLICATED_FILES_INFO).toJS():{},a=t.getIn(r.paths.DUPLICATED_FILES_INFO).toJS(),s=t.getIn(r.paths.DIRECTORY_FLAG_BY_DELETED_PATH).toJS()||{};return{toSave:f(n,o),toCopy:m(i,a),toDelete:s}},getChangesBetweenLastSnapshotAndCurrentStateTakenFromPS:v,isChangesEmpty:function(t){return e.isEmpty(t.toSave)&&e.isEmpty(t.toCopy)&&e.isEmpty(t.toDelete)},markPathAsDeleted:function(t,n,o){var r,i,a,s=t.pointers.wixCode.getDirectoryFlagByDeletedPathMap();t.dal.set(s,e.assign({},t.dal.get(s),(a=o,(i=n)in(r={})?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r)))},clearDeletedPath:function(t,n){var o=t.pointers.wixCode.getDirectoryFlagByDeletedPathMap();t.dal.set(o,e.omit(t.dal.get(o),n))}}}()},function(e,t,n){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A,T,_;e.exports=(a=n(0),s=n(1),c=n(5),u=n(201),l=n(2),p=n(37),d=3,g=4,E=[f="noJsonAnchors",m="desktopSOAPOrder",v="mobileInvalidSOAP"],o(r={},f,2),o(r,m,g),o(r,v,d),y=r,I=["wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.SiteRegionContainer","wysiwyg.viewer.components.PagesContainer","wysiwyg.viewer.components.FooterContainer","platform.components.AppController","wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.QuickActionBar","wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton","wysiwyg.viewer.components.BackToTopButton","wysiwyg.viewer.components.MenuContainer"],o(i={},f,(function(e){var t=e.pointers.page.getNonDeletedPagesPointers(!0),n=a.flatMap(t,(function(t){var n=t.id;return[e.pointers.full.components.getPage(n,l.VIEW_MODES.DESKTOP),e.pointers.full.components.getPage(n,l.VIEW_MODES.MOBILE)]}));return a.every(n,a.partial(u,e))})),o(i,m,(function(e){return!c.isOpen("sv_soapReorderFixer")||function(e,t){var n=e.pointers.getInnerPointer(h(e),"layoutSettings"),o=e.dal.get(n);return a.get(o,t,!1)}(e,"soapCompsAroundPagesContainer")})),o(i,v,(function(e){var t=e.pointers.components.getMasterPage(l.VIEW_MODES.MOBILE),n=e.pointers.components.getChildren(t);return function(e,t){return a.every(t,(function(t){var n=e.dal.get(e.pointers.getInnerPointer(t,"componentType"));return a.includes(I,n)}))}(e,n)})),S=i,h=function(e){return e.pointers.data.getDataItemFromMaster(s.siteConstants.MASTER_PAGE_ID)},P=function(e,t){var n=e.dal.get(h(e));e.dal.set(h(e),a.merge({},n,{layoutSettings:{mechanism:t}}))},A=function(e,t,n,o,r){var i={status:t,pages_count:n};t||(i.reasonid=r),e.siteAPI.reportBI(o,i)},T=function(e,t,n,o){!function(e){P(e,"anchors")}(e),function(e,t,n,o){A(e,!1,t,n,o)}(e,t,n,o)},{meshLayoutReadySiteDataFixerAfterMeshWizard:(_=function(e){return function(t,n,o){if(function(e){var t=e.pointers.getInnerPointer(h(e),"layoutSettings"),n=e.dal.get(t);return"mesh"===a.get(n,"mechanism")}(t))n&&n();else{var r=function(e){return a.size(e.pointers.page.getNonDeletedPagesPointers(!0))}(t);s.loggingUtils.fedopsLogger.interactionStarted(s.loggingUtils.fedopsLogger.INTERACTIONS.MESH_LAYOUT_READY_DATA_FIXER);var i=function(e){return a.findIndex(E,(function(t){return!S[t](e)}))}(t);-1===i?(function(e){P(e,"mesh")}(t),function(e,t,n){A(e,!0,t,n)}(t,r,e),n&&n()):(T(t,r,e,y[E[i]]),o&&o("cant use mesh, validation failed, failed on index: ".concat(i))),s.loggingUtils.fedopsLogger.interactionEnded(s.loggingUtils.fedopsLogger.INTERACTIONS.MESH_LAYOUT_READY_DATA_FIXER)}}})(p.MESH_MIGRATION_WIZARD),meshLayoutReadySiteDataFixer:_(p.MESH_MIGRATION),meshLayoutReadySiteDataPreSaveFixer:function(e){_(p.MESH_MIGRATION_PRESAVE)(e)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(203),o=n(204),r=n(12),i=n(78),a=n(57),s=n(50),c=n(500),u=n(205),l=n(22),p=n(6),d=n(136),g=n(1),f=n(138),m=n(66),v=n(59),E=n(5),y=g.urlUtils,I=g.loggingUtils,S=I.performance,h=I.performanceMetrics,P=u.getSaveableSnapshot,A=u.extendSavableSnapshotWithFullSnapshot,T={partialSave:"/api/partially_update",fullSave:"/api/new_override_save",validateSite:"/api/validate_site",firstSave:"/api/first_save",saveAsTemplate:"/api/save_as_template/",publish:"/api/publish",publishRC:"/api/publish-rc",autosave:"save_diff"},_={"-12":i.save.SESSION_EXPIRED,"-15":i.save.NOT_LOGGED_IN,"-17":i.save.USER_NOT_AUTHORIZED_FOR_SITE,"-10116":i.save.CONCURRENT_SAVE,"-40003":i.save.SITE_NAME_TAKEN,"-10132":i.save.SAVE_PUBLISH_DISABLED_ON_SERVER,"-10154":i.save.SAVE_PUBLISH_RC_FAILED_ON_SERVER,"-10104":function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){var n=t.payload;return e.isEmpty(n.duplicateComponents)?e.isEmpty(n.dataReferenceMismatches)?e.isEmpty(n.missingContainers)?e.isEmpty(n.appControllerReferenceMismatches)?e.isEmpty(n.connectionListReferenceMismatches)?e.isEmpty(n.styleReferenceMismatches)?e.isEmpty(n.behaviorReferenceMismatches)?e.isEmpty(n.propertyReferenceMismatches)?e.isEmpty(n.designReferenceMismatches)?void 0:i.save.DESIGN_REFERENCE_MISMATCHES:i.save.PROPERTY_REFERENCE_MISMATCHES:i.save.BEHAVIOR_REFERENCE_MISMATHCHES:i.save.STYLE_REFERENCE_MISMATCHES:i.save.CONNECTION_LIST_REFERENCE_MISMATCHES:i.save.APP_CONTROLLER_REFERENCE_MISMATCH:i.save.MISSING_CONTAINERS:i.save.DATA_REFERENCE_MISMATCH:i.save.DUPLICATE_COMPONENTS})),"-10145":i.save.CONCURRENT_AUTO_SAVE,"-10148":i.save.SITE_STALE_STATE_FROM_AUTO_SAVE,"-10124":i.save.SITE_DESERIALIZATION_ERROR},O=[i.save.DUPLICATE_COMPONENTS,i.save.DATA_REFERENCE_MISMATCH,i.save.MISSING_CONTAINERS,i.save.APP_CONTROLLER_REFERENCE_MISMATCH,i.save.DESIGN_REFERENCE_MISMATCHES,i.save.BEHAVIOR_REFERENCE_MISMATHCHES,i.save.PROPERTY_REFERENCE_MISMATCHES,i.save.STYLE_REFERENCE_MISMATCHES,i.save.CONNECTION_LIST_REFERENCE_MISMATCHES],C=Object.values(g.constants.PAGE_DATA_DATA_TYPES);function D(t){var n=_[t.errorCode];return e.isFunction(n)&&(n=n(t)),n||i.save.UNKNOWN_SERVER_ERROR}function w(t){return e.includes(O,D(t))}function M(t,n){var o=n.getIn(["masterPage","structure"]);if(!t||!o.equals(t.getIn(["masterPage","structure"])))return e.pick(o.toJS(),["children","mobileComponents","type","behaviorQuery","layout","modes","mobileHintsQuery"])}function b(e,t,n){return!e&&t||!t.equals(e.getIn([n,"structure"]))}function R(t,n,o){var r=n.map((function(e){return e.get("structure")})).filter(b.bind(null,t)).toJS();return o?e.values(r):e.filter(r,(function(e,t){return!function(e){return"masterPage"===e}(t)}))}function N(e,t){return e.keySeq().toSet().subtract(t.keySeq().toSet()).toArray()}function x(e,t){return e?t.filter((function(t,n){return t!==e.get(n)&&!t.equals(e.get(n))})):t}var L=["Page","AppPage"],B=function(t){var n=t,o=n.filter((function(t){return n=t.get("type"),e.includes(L,n);var n})),r={};return o.forEach((function(t,o){(function t(n,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!o)return r;var i=o.get("type");return o.forEach((function(o,a){if("pageBackgrounds"===a&&e.forEach(["desktop","mobile"],(function(e){var i=o.getIn([e,"ref"]);if(i){var a=i.replace("#",""),s=n.get(a);t(n,s,r),r.push(a)}})),v.isOfType("data",i,a,"ref")){if(o){var s=o.replace("#",""),c=n.get(s);t(n,c,r),r.push(s)}}else v.isOfType("data",i,a,"refList")&&o.forEach((function(e){var o=e.replace("#",""),i=n.get(o);t(n,i,r),r.push(o)}))})),r})(n,t).forEach((function(e){r[e]=o}))})),r},F=["data","document_data"];function k(t,n){var o=e.groupBy(C),r=[],i=function(t){e.includes(r,t)||r.push(t)};return{changedData:e.mapValues(o,(function(e,o){return n.flatMap((function(e,n){var r=e.getIn(["data",o]);if(!t)return i(n),r;var a=t.getIn([n,"data",o]);if(r&&!r.equals(a)){var s=x(a,r);return s.size>0&&i(n),s}})).toJS()})),changedDataPageIds:r}}function U(t,n){var o=V(t),r=V(n);if(!e.isEqual(o,r))return r}function H(t,n){var o=G(t),r=G(n);if(!e.isEqual(o,r))return r}function V(t){return e(t.getIn(["rendererModel","siteMetaData"]).toJS()).omit(["adaptiveMobileOn"]).merge({headTags:t.getIn(["documentServicesModel","customHeadTags"])||""}).value()}function G(t){return e.merge({},t.getIn(["documentServicesModel","metaSiteData"]).toJS(),{adaptiveMobileOn:W(t)})}function W(e){return e.getIn(["rendererModel","siteMetaData","adaptiveMobileOn"])}function Y(e,t){var n=t.getIn(["rendererModel","pageToHashedPassword"]);if(n){var o=e&&e.getIn(["rendererModel","pageToHashedPassword"]);return o?n.filter((function(e,t){return e!==o.get(t)})).toJS():n.toJS()}return{}}function z(e,t){var n=t.getIn(["routers"]),o=e&&e.getIn(["routers"]);return!n&&o?{}:n&&!n.equals(o)?n.toJS():void 0}function K(t,n){var o=n.get("pagesPlatformApplications");if(o){var r=t&&t.get("pagesPlatformApplications");if(!e.isEqual(r,o))return o.toJS()}}function j(e){return e.get("orphanPermanentDataNodes").toJS()}function q(e){return e.getIn(["rendererModel","siteInfo","siteId"])}function Q(e){return e.getIn(["documentServicesModel","revision"])}function X(e){return e.getIn(["documentServicesModel","version"])}function Z(e,t){var n=l.paths.WIX_CODE_APP_DATA,o=t.getIn(n);if(o&&(!e||!o.equals(e.getIn(n))))return o.toJS()}function J(e){return e.isEmpty()}function $(n,o){n=n||t.Map();var r=[],i=function(t){e.includes(r,t)||r.push(t)},a=o.map((function(t,o){return function(t,n,o){var r=n.get("translations");if(!e.isUndefined(r)){var i=t&&t.get("translations");return e.isUndefined(i)?(function(e){return e.some((function(e){return e.some((function(e){return e.some((function(e){return!e.isEmpty()}))}))}))}(r)&&o(),r.toJS()):r.map((function(e,t){return e.map((function(e){return e.map((function(e,n){var r=x(i.getIn([t,"data",n]),e);return r.size>0&&o(),r})).filterNot(J)})).filterNot(J)})).filterNot(J)}}(n.get(o),t,i.bind(null,o))})).filterNot(e.isUndefined).reduce((function(e,t){return e.mergeDeep(t)}),t.Map()).toJS();return{translationsDelta:e.isEmpty(a)?void 0:a,changedTranslationPageIds:r}}var ee=function(t,n,o){var r,i,a=(r=t.get("masterPage"),i=B(r.getIn(F)),r.has("translations")&&r.get("translations").forEach((function(t){var n=t.getIn(F),o=B(n);e.assign(i,o)})),i),s=e(o).map((function(t){return e.keys(e.get(t,F))})).flatten().value(),c=e.keys(n.document_data);return e(c).concat(s).uniq().filter((function(e){return a[e]})).map((function(e){return a[e]})).value()},te=function(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.settleInServer,a=n.get("pagesData"),s=t.get("pagesData"),u=k(s,a),l=u.changedData,p=u.changedDataPageIds,d=$(s,a),g=d.translationsDelta,f=d.changedTranslationPageIds,v=e(p).concat(f).concat(ee(a,l,g)).uniq().value(),E={protectedPagesData:Y(t,n),dataDelta:l,dataNodeIdsToDelete:j(n),deletedPageIds:N(s,a),id:q(n),masterPage:M(s,a),revision:Q(n),version:X(n),updatedPages:R(s,a),siteMetaData:U(t,n),metaSiteData:H(t,n),pagesPlatformApplications:K(t,n),wixCodeAppData:Z(t,n),routers:z(t,n),initiator:ne(n),translationsDelta:g,pageIdsWithChangedData:v};if(i){var y=m.getSettleActionsForSave(t,n);e.isEmpty(y)||(E.metaSiteActions={actions:y})}return c.fixData(E,t,n,o),e.omitBy(E,(function(t){return e.isNil(t)}))};function ne(e){var t,n;return oe(e,"autoFullSaveFlag")?t="auto_save":t=((n=e.getIn(["documentServicesModel","publishSaveInitiator"]))&&n.toJS?n.toJS():n)?"publish":function(e){var t=e.getIn(["documentServicesModel","silentSaveInitiator"]);return t&&t.toJS?t.toJS():t}(e)?"provision":"manual",t}function oe(e,t){var n=e.getIn(["documentServicesModel","autoSaveInfo",t]);return n&&n.toJS?n.toJS():n}function re(n){var o=d.getAutosavePaths(),r=t.fromJS({});return e.forEach(o,(function(t){var o=function t(n,o,r){var i={};return r=r||[],1===n.length?i[n[0]]=o.getIn(r.concat(n[0])):(r=r.concat(n.splice(0,1)),i[e.last(r)]=t(n,o,r)),i=e.omitBy(i,e.isUndefined)}(t.split("."),n);r=r.mergeDeep(o)})),r}function ie(t){var n=t.get("pagesData"),o={protectedPagesData:Y(null,t),dataDelta:k(null,n).changedData,dataNodeIdsToDelete:j(t),deletedPageIds:[],id:q(t),masterPage:M(null,n),revision:Q(t),version:X(t),updatedPages:R(null,n),siteMetaData:V(t),metaSiteData:G(t),pagesPlatformApplications:K(null,t),wixCodeAppData:Z(null,t),routers:z(null,t),initiator:ne(t)},r=$(null,n).translationsDelta;return e.isEmpty(r)||e.assign(o,{translationsDelta:r}),c.fixData(o,null,t),e.omitBy(o,(function(t){return e.isNil(t)}))}function ae(t){var n=t.masterPage;return e.find(n.children,{componentType:"wysiwyg.viewer.components.PagesContainer"}).components[0].components=t.updatedPages,e.merge(t.masterPage,{componentProperties:t.dataDelta.component_properties},{themeData:t.dataDelta.theme_data},{mobileHintsQuery:n.mobileHintsQuery})}function se(e,t){var n={dataNodes:e.dataDelta.document_data,documents:[ae(e)],protectedPagesData:e.protectedPagesData,siteMetaData:e.siteMetaData,metaSiteData:e.metaSiteData,pagesPlatformApplications:e.pagesPlatformApplications,sourceSiteId:e.id,targetName:t.getIn(["documentServicesModel","siteName"]),wixCodeAppData:e.wixCodeAppData,urlFormat:t.getIn(["urlFormatModel","format"]),behaviors:e.dataDelta.behaviors_data,connections:e.dataDelta.connections_data,mobileHints:e.dataDelta.mobile_hints,initiator:e.initiator,layoutDataNodes:e.dataDelta.layout_data,breakpointsNodes:e.dataDelta.breakpoints_data};return e.routers&&(n.routers=e.routers),n.translations=e.translationsDelta,n.designNodes=e.dataDelta.design_data,n}function ce(e,t){e.wixCodeModel&&t.changes.push({path:l.paths.WIX_CODE_MODEL,value:e.wixCodeModel})}function ue(e,t,n,o,i){r.integrations.ravenUtils.breadcrumb("server request",{data:t,url:e});var a=E.isOpen("ds_recordActionsToCompareWithRC"),s=E.isOpen("ds_runActionsToCompareWithRC");a||s?(a&&window.documentServices.debug.trace.upload().then((function(){f.actions.sendHttpRequest(e,"POST",{dataType:"json",headers:ye(n)},t,o,i)})).catch((function(e){console.log(e),i(e)})),s&&(void 0===window.autopilotSaves&&(window.autopilotSaves=[]),window.autopilotSaves.push({url:e,body:t,headers:ye(n)}))):f.actions.sendHttpRequest(e,"POST",{dataType:"json",headers:ye(n)},t,o,i)}function le(e){return{errorCode:e.errorCode,errorType:D(e),errorDescription:e.errorDescription}}function pe(t,n,o,r,i){i.success?t(function(t,n,o){var r,i,a=n.get("rendererModel").toJS(),s=n.get("documentServicesModel").toJS(),c=[{path:["rendererModel","siteInfo","siteId"],value:t.previewModel.siteId},{path:["rendererModel","metaSiteId"],value:t.previewModel.metaSiteModel.metaSiteId},{path:["rendererModel","mediaAuthToken"],value:t.mediaAuthToken},{path:["rendererModel","premiumFeatures"],value:t.previewModel.metaSiteModel.premiumFeatures},{path:["rendererModel","siteInfo","documentType"],value:t.previewModel.metaSiteModel.documentType},{path:["rendererModel","clientSpecMap"],value:e.mergeWith(a.clientSpecMap,t.previewModel.metaSiteModel.clientSpecMap,(function(t,n){return n.demoMode&&t&&!t.demoMode?t:e.merge({},t,n)}))}],u=[{path:["documentServicesModel","neverSaved"],value:!1},{path:["documentServicesModel","siteName"],value:t.previewModel.metaSiteModel.siteName},{path:["documentServicesModel","metaSiteData"],value:t.metaSiteData},{path:["documentServicesModel","publicUrl"],value:t.publicUrl},{path:["documentServicesModel","usedMetaSiteNames"],value:s.usedMetaSiteNames.push(t.publicUrl.match(/^.*\/([^\/]+)/)[1])&&s.usedMetaSiteNames},{path:["documentServicesModel","version"],value:t.siteHeader.version},{path:["documentServicesModel","revision"],value:t.siteHeader.revision},{path:["documentServicesModel","autoSaveInfo"],value:t.autoSaveInfo},{path:["documentServicesModel","mediaManagerInfo","siteUploadToken"],value:t.mediaSiteUploadToken},{path:["documentServicesModel","permissionsInfo"],value:t.permissionsInfo}],l={changes:c.concat(u).concat({path:["orphanPermanentDataNodes"],value:[]}),historyAlteringChanges:fe(t.deletedItems,n,!0,o)};return ce(t,l),i=l,(r=t).devSiteAppDefId&&i.changes.push({path:["devSiteAppDefId"],value:r.devSiteAppDefId}),l}(i.payload,o,r)):n(le(i))}function de(e,t,n,o,r,i,s){!s.success&&w(s)?(r.event(a.FULL_DOCUMENT_SAVE_ATTEMPTED_AFTER_PARTIAL_FAILURE,{endpoint:"partial"}),Ae(e,t,n,o,r,i)):ge(t,n,o,r,i,s)}function ge(t,n,o,i){var a=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).settleInServer,c=arguments.length>5?arguments[5]:void 0;if(c.success){var u={changes:[{path:["documentServicesModel","revision"],value:c.payload.revision},{path:["documentServicesModel","version"],value:c.payload.version},{path:["orphanPermanentDataNodes"],value:[]}]};if(Boolean(t.getIn(["documentServicesModel","autoSaveInfo","shouldAutoSave"]))&&u.changes.push({path:["documentServicesModel","autoSaveInfo","previousDiffId"],value:void 0}),ce(c.payload,u),a){var l=["rendererModel","clientSpecMap"],p=["rendererModel","siteInfo","documentType"],d=t.getIn(l).toJS(),g=t.getIn(p);c.payload.clientSpecMap&&u.changes.push({path:l,value:"Template"===g?c.payload.clientSpecMap:e.assign({},d,c.payload.clientSpecMap)}),u.changes.push({path:p,value:g})}u.historyAlteringChanges=fe(c.payload.deletedItems,t),n(u)}else{var f=le(c),m=f.errorType,v=t.get("origin");w(c)&&r.integrations.ravenUtils.captureError(new Error("Save Error: ".concat(m)),{tags:{errorType:m,saveError:!0},extra:{origin:v,errorCode:e.get(f,"errorCode"),errorDescription:e.get(f,"errorDescription"),duplicateComponentId:e.get(c,"payload.duplicateComponents[0].id")||null}}),i.error(s.SAVE_DOCUMENT_FAILED_ON_SERVER,{serverErrorCode:f.errorCode,errorType:m,origin:v}),o(f)}}function fe(t,n,o,r){var i=[];return o&&(t=function(t,n,o){var r={};return e.forEach(t,(function(t,i){e.forEach(t,(function(t){var a=function(e,t,n){var o=["data",t,e];return n.map((function(e,t){return!!e.getIn(o)&&t})).filter(Boolean).keySeq().toArray()}(t,i,n);if(e.isEmpty(a))o.error(s.SYNC_DELETED_ITEMS_AFTER_SAVE_FAILED,{errorType:"notFound",itemId:t,pagesIds:null});else if(e.size(a)>1)o.error(s.SYNC_DELETED_ITEMS_AFTER_SAVE_FAILED,{errorType:"multipleFound",itemId:t,pagesIds:a.toString()});else{var c=e.head(a),u=e.get(r,[c,i],[]);u.push(t),e.set(r,[c,i],u)}}))})),r}(t,n.get("pagesData"),r)),e.forEach(t,(function(t,n){e.forEach(t,(function(t,o){e.forEach(t,(function(e){i.push({path:["pagesData",n,"data",o,e],value:void 0})}))}))})),i}function me(e,t,n){n.success?e({changes:[{path:["rendererModel","siteInfo","documentType"],value:"Template"}]}):t(le(n))}function ve(e,t,n){if(n.success){var o=[{path:["documentServicesModel","isPublished"],value:!0}];n.payload.revision&&o.push({path:["documentServicesModel","revision"],value:n.payload.revision}),n.payload.version&&o.push({path:["documentServicesModel","version"],value:n.payload.version}),e({changes:o,result:{siteRcExists:n.payload.siteRcExists}})}else t(le(n))}function Ee(e,t){e({errorCode:t.status,errorType:i.save.HTTP_REQUEST_ERROR,errorDescription:t.statusText})}function ye(e){return{"X-Wix-Editor-Version":"new","X-Wix-DS-Origin":e.get("origin"),"X-Editor-Session-Id":e.getIn(["documentServicesModel","editorSessionId"])}}function Ie(e){var t=e.getIn(["rendererModel","metaSiteId"]),n=e.getIn(["documentServicesModel","editorSessionId"]),o=y.toQueryString({metaSiteId:t,editorSessionId:n,esi:n});return"?".concat(o)}function Se(e){return e.getIn(["serviceTopology","editorServerRoot"])}var he=function(e){return function(t,n){for(var o=arguments.length,r=new Array(o>2?o-2:0),i=2;i<o;i++)r[i-2]=arguments[i];return e.apply(void 0,[A(P(t),t),A(P(n),n)].concat(r))}},Pe=he((function(e,t,n,o,r,i){Oe(t,n,o,r,i,T.fullSave)}));function Ae(e,t,n,o,r,i){Oe(t,n,o,r,i,T.partialSave)}var Te=he((function(t,n,o,r,i){var a=Se(n)+T.validateSite,s=te(t,n,i,{settleInServer:!1});ue(a+Ie(n),s,n,e.partial(_e,t,n,o,r,i),e.partial(Ee,r))}));function _e(e,t,n,o,r,i){i.success?n():o(le(i))}function Oe(t,n,o,r){var i=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).settleInServer,a=arguments.length>5?arguments[5]:void 0,s=Se(t)+a+Ie(t),c=ie(t);i&&(c.metaSiteActions={actions:m.getSettleActionsForFullSave(t)}),ue(s,c,t,e.partial(ge,t,n,o,r,{settleInServer:i}),e.partial(Ee,o))}var Ce=he((function(t,n,o,r,i,a){if(e.get(a,"fullPayload"))return Ae(0,n,o,r,i,a);var s=Se(n)+T.partialSave,c=te(t,n,i,a);ue(s+Ie(n),c,n,e.partial(de,t,n,o,r,i,a),e.partial(Ee,r))}));return{partialSave:Ce,fullSave:Pe,validateSite:Te,firstSave:function(t,n,o,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=Se(n)+T.firstSave,c=s+Ie(n),u=ie(n),l=e.assign({},se(u,n),a.extraPayload),p=e.partial(pe,o,r,n,i),d=e.partial(Ee,r);ue(c,l,n,p,d)},saveAsTemplate:function(t,n,o,r){ue(Se(n)+T.saveAsTemplate+q(n)+Ie(n),null,n,e.partial(me,o,r),e.partial(Ee,r))},publish:function(t,n,o,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=i.publishRC?T.publishRC:T.publish,s="".concat(Se(t)+a,"/").concat(q(t)),c=s+Ie(t),u=e.partial(ve,n,o),l=e.partial(Ee,o);p.executeHook(p.HOOKS.PUBLISH.BEFORE),f.actions.sendHttpRequest(c,"POST",{headers:ye(t)},{},u,l)},autosave:function(t,n,r,i){var a=n.getIn(["serviceTopology","autoSaveUrl"])+T.autosave,s=oe(n,"reportingInfo")||{};g.loggingUtils.fedopsLogger.interactionStarted(g.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.CALC_DIFF),S.start(h.AUTOSAVE.CALC_DIFF);var c,u=(c=[t,n],o.apply(o,c.map(re)).toJS());if(g.loggingUtils.fedopsLogger.interactionEnded(g.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.CALC_DIFF),S.finish(h.AUTOSAVE.CALC_DIFF,{additionalData:s,report:!0}),e.isEmpty(u))return r();var l=function(e,t){return{siteId:q(e),metaSiteId:e.getIn(["rendererModel","metaSiteId"]),siteVersion:X(e),previousDiffId:e.getIn(["documentServicesModel","autoSaveInfo","previousDiffId"])||null,diffPayload:JSON.stringify(t)}}(n,u);g.loggingUtils.fedopsLogger.interactionStarted(g.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.SEND_AJAX),S.start(h.AUTOSAVE.SEND_AJAX),f.actions.sendHttpRequest(a,"POST",{dataType:"json"},l,(function(t){g.loggingUtils.fedopsLogger.interactionEnded(g.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.SEND_AJAX),S.finish(h.AUTOSAVE.SEND_AJAX,{report:!0,additionalData:e.assign({},s,{success:t.success.toString()})}),t.success?r({changes:[{path:["documentServicesModel","autoSaveInfo","previousDiffId"],value:t.payload.diffId}]}):i(le(t))}),Ee.bind(null,i))},getChangedPages:function(t,n){var o=n.get("pagesData"),r=t.get("pagesData");return e.map(R(r,o,!0),"id")},getTaskName:function(){return"saveDocument"},shouldRun:function(e,t,n){if("partialSave"===n){var o=function(e,t){return!t.equals(e)}(P(e),P(t));return r.integrations.ravenUtils.breadcrumb("shouldRun",{didSnapShotsChangeFromLastSave:o}),o}return!0},getSnapshotTags:function(e){switch(e){case"partialSave":case"fullSave":case"firstSave":case"saveAsTemplate":return["primary","autosave"];case"autosave":return["autosave"];case"publish":default:return["primary"]}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(13),o=n(24),r=n(137),i=n(22),a=n(2),s=["pagesData","wixapps","editorData","committedMobilePages","textRuntimeLayout","deletedPagesMap","orphanPermanentDataNodes","dockedRuntimeLayout","displayedOnlyComponents","mobileStructures","contactforms_metadata","saveInvalidationCount","pagesPlatformApplications","routers","platform","siteAspectsData","wixCode","mobileConversionHeuristicStrategy"],c=["pagesData"],u={path:o.getApplicationInstanceVersionPath(),optional:!0},l=e.map(["blog","ecommerce","faq","menu"],(function(e){return{path:r.getPackageMetaDataPath(e),optional:!0}})),p=["documentServicesModel","rendererModel","serviceTopology","urlFormatModel","runtime","compsToUpdateAnchors","svgShapes","renderFlags","renderRealtimeConfig","rootsRenderedInMobileEditor",u,{path:o.getPackageMetaDataPath(),optional:!0},{path:["origin"],optional:!0},{path:i.paths.NON_UNDOABLE_BASE_PATH,optional:!0},{path:["pagesPlatformApplications","wixCode"],optional:!0},{path:["ghostStructureData"],optional:!0},{path:["devSiteAppDefId"],optional:!0}].concat(l),d=[{path:["platform","appManifest"],innerDepth:1},{path:["platform","appState"],innerDepth:1},{path:["platform","appPublicApiName"],innerDepth:1}];function g(t){return e.isString(t)?[t]:e.isPlainObject(t)?t.path:t}function f(t){return e.map(t,g)}function m(e){return!!e.optional}return(s=s.concat(t.getRevertibleMetaDataInfo()),p=p.concat(t.getNonRevertibleMetaDataInfo()),{getWhiteList:function(){return f(s)},getNonUndoableInitialDataPaths:function(){return d},getNonUndoableList:function(){return f(p)},getPathsInJsonData:function(){var t={},n=s.concat(p),o=e.without(n,c);return t[a.JSON_TYPES.DISPLAYED]=e.map(o,(function(e){return{path:g(e),optional:m(e)}})),t[a.JSON_TYPES.FULL]=[{path:c,optional:!1}],t},getAutosavePaths:function(){return["rendererModel.pageToHashedPassword","rendererModel.passwordProtectedPages","rendererModel.siteMetaData","pagesData","orphanPermanentDataNodes","documentServicesModel.metaSiteData","documentServicesModel.customHeadTags","routers","pagesPlatformApplications","rendererModel.wixCodeModel"]},getSavePaths:function(){return[["pagesData"],["rendererModel","siteMetaData"],["rendererModel","pageToHashedPassword"],["rendererModel","siteInfo"],["rendererModel","metaSiteId"],["rendererModel","premiumFeatures"],["rendererModel","clientSpecMap"],["rendererModel","wixCodeModel","appData"],["documentServicesModel","siteName"],["documentServicesModel","editorSessionId"],["documentServicesModel","customHeadTags"],["documentServicesModel","metaSiteData"],["orphanPermanentDataNodes"],["routers"],["pagesPlatformApplications"]]}})}()},function(e,t,n){e.exports=function(){var e=n(0);function t(e){return["wixapps",e]}return{getPackagePath:t,getPackageDescriptorPath:function(e){return t(e).concat(["descriptor"])},getPackageMetaDataPath:function(n){return e.compact(t(n).concat(["metadata"]))},getBlogTagNamesPath:function(){return["wixapps","blog","tagNames"]},getCategoriesPath:function(n){return e.compact(t(n).concat(["categories","categories"]))},getAppPartDataPath:function(e,n){return t(e).concat([n])},getAppPartExtraDataPath:function(e,n){return t(e).concat(["".concat(n,"_extraData")])}}}()},function(e,t){e.exports={actions:{}}},function(e,t){e.exports=y},function(e,t,n){var o;e.exports=(o=n(0),function(e){return function(t,n,r,i){!function(t,n,r,i){var a=1;e(t,n,(function s(c){if(c){var u=n.getIn(["rendererModel","clientSpecMap"]).toJS();!0===c.success?r({changes:[{path:["rendererModel","clientSpecMap"],value:o.assign({},u,c.payload.clientSpecMap)}]}):!1===c.success&&-40103===c.errorCode&&1===a?(a+=1,e(t,n,s,i)):r()}else r()}),i)}(t,n,r,i)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(12),o=n(21),r=n(18),i=n(217),a=n(61),s=n(521),c=n(101),u=n(36),l=n(225);function p(t,n){var o=i.getMenu(t),r=function(t,n){var o={isSubPage:!1};return e.forEach(t,(function(t){var r=t.items||[];e.forEach(r,(function(e){(e.link&&e.link.pageId?e.link.pageId.slice(1):"")===n&&(o={isSubPage:!0,menuItemId:e.id})}))})),o}(o,n);r.isSubPage&&i.moveItem(t,r.menuItemId,null,o.length)}function d(t,n){var o=i.getMenu(t),r=function(t,n){var o=[];return e.forEach(t,(function(t){var r=e.get(t,"link.pageId");r&&r.slice(1)===n&&(o=t.items)})),o}(o,n);e.forEach(r,(function(e,n){i.moveItem(t,e.id,null,o.length+n)}))}function g(t,n){var o=function(t){var n=t.pointers.routers.getRoutersConfigMapPointer();return e.map(t.dal.get(n),"prefix")}(t);return e.includes(o,n)}function f(t,n){var r=o.getPagesList(t,!0),i=e.map(r,(function(e){return o.getPageUriSEO(t,e)}));return e.includes(i,n)}function m(t,n){return e.transform(t,(function(e,t){e[t]=n}),{})}function v(t,n,i,s){s=e.isArray(s)?s:[s];var c=e.get(t.dal.get(i),"id");o.setPageData(t,c,{hidePage:!0,indexable:!1});var u=t.dal.get(n),l=a.get.byPage(t,i);if(l&&!t.pointers.isSamePointer(n,l))throw new Error("page already exist on another router");if(r.homePage.get(t)===i.id)throw new Error("home page can't become dynamic page");u.pages=l?e(u.pages).omitBy((function(e){return e===c})).assign(m(s,c)).value():e.merge(u.pages||{},e.omitBy(m(s,c),e.isUndefined)),p(t,i.id),d(t,i.id),t.dal.set(n,u)}function E(t,n,i){var a=e.get(t.dal.get(i),"id"),s=t.dal.get(n);if(!(s.pages&&e.includes(e.values(s.pages),a)))throw new Error("the page is not connected to this router");y(t,n,a);var c=o.getPageData(t,a),u=o.getValidPageUriSEO(t,a,c.title);t.siteAPI.getPrimaryPageId()===i.id&&r.navigateTo(t,i.id),o.setPageData(t,a,{pageUriSEO:u,title:c.title,hidePage:!1,indexable:!0})}function y(t,n,o){var r=t.dal.get(n);r.pages=e.omitBy(r.pages,(function(e){return o===e})),t.dal.set(n,r)}function I(t){var n=o.getPagesDataItems(t),i=r.homePage.get(t);return e.reduce(n,(function(e,n){var o=r.getReference(t,n.id);return function(e,t,n,o){return!("Page"!==t.type||t.tpaApplicationId>0||a.get.byPage(e,o)||n===t.id)}(t,n,i,o)&&e.push({pageRef:o,pageData:n}),e}),[])}function S(e,t){return{valid:e,message:t,errorCode:t}}return{add:function(t,n,o){var r=e.clone(o);return r.config?e.isObject(r.config)&&(r.config=JSON.stringify(r.config)):r.config="",function(t,n){if(!n.prefix)throw new Error("Router not valid - Missing prefix.");if(!n.appDefinitionId)throw new Error("Router not valid - Missing appDefinitionId.");if(!e.isNil(n.hide)&&!e.isBoolean(n.hide))throw new Error("Router not valid - hide parameter need to be boolean");if(g(t,n.prefix))throw new Error("Router not valid - Prefix: ".concat(n.prefix,", already exist"));if(f(t,n.prefix))throw new Error("Router not valid - Page Uri SEO: ".concat(n.prefix,", already exist."));if(n.pages)throw new Error("Router not valid - pages should not be on the router object")}(t,r),t.dal.set(n,r),n},remove:function(t,n){var o=a.get.all(t),i=a.get.byRef(t,n),s=e.findKey(o,{prefix:i.prefix});e.forEach(i.pages,(function(e){var o=r.getReference(t,e);E(t,n,o)})),delete o[s];var c=t.pointers.routers.getRoutersConfigMapPointer();t.dal.set(c,o)},get:{all:a.get.all,byApp:a.get.byApp,byRef:a.get.byRef,byId:a.get.byId},getRouterRef:{byPrefix:a.get.byPrefix,byPage:a.get.byPage},update:function(t,n,o){var r=t.dal.get(n);if(o.prefix&&o.prefix!==r.prefix){if(g(t,o.prefix))throw new Error("Router not valid - Prefix: ".concat(o.prefix,", already exist"));if(f(t,o.prefix))throw new Error("Router not valid - Page Uri SEO: ".concat(o.prefix,", already exist."));r.prefix=o.prefix}o.config&&(e.isObject(o.config)?r.config=JSON.stringify(o.config):r.config=o.config),e.isBoolean(o.hide)&&o.hide!==r.hide&&(r.hide=o.hide),t.dal.set(n,r)},getRouterDataForPageIfExist:a.getRouterDataForPageIfExist,getPageFromInnerRoute:function(n,r,i,a){var s=n.dal.get(n.pointers.routers.getRoutersConfigMapPointer())[r],u=t.routersBackEndRequests.makeParamObjFromPs(n,s,o);c.fileSystem.flush(n,{origin:c.fileSystem.FLUSH_ORIGINS.ROUTERS_PAGE}).then((function(){t.routersBackEndRequests.getInnerRoutesSiteMap(u,(function(t){var n=e.find(t,{url:i});a(n?n.pageName:null)}),(function(){a()}),n.siteDataAPI.siteData)}))},getRouterInnerRoutes:function(n,r,i,a){var s=n.dal.get(n.pointers.routers.getRoutersConfigMapPointer())[r],u=t.routersBackEndRequests.makeParamObjFromPs(n,s,o);c.fileSystem.flush(n,{origin:c.fileSystem.FLUSH_ORIGINS.ROUTERS_ROUTES}).then((function(){t.routersBackEndRequests.getInnerRoutesSiteMap(u,(function(t){a(e.filter(t,{pageName:i}))}),(function(){a()}),n.siteDataAPI.siteData)}))},getCurrentInnerRoute:function(t){var n=t.siteAPI.getPrimaryPageId(),o=a.getRouterDataForPageIfExist(t,n);if(!o)return{isDynamic:!1};var r=t.siteAPI.getRootNavigationInfo();if(r.routerDefinition){if(!r.pageAdditionalData)return{isDynamic:!0,routerId:o.routerId};var i=r.pageAdditionalData.split("/");return{isDynamic:!0,innerRoute:e.drop(i,1).join("/"),routerId:o.routerId}}return{isDynamic:!1}},isValidPrefix:function(t,n,r){if(!r)return S(!1,l.InvalidPrefixReason.PREFIX_CAN_NOT_BE_EMPTY);var i=e.get(u.getAppDataByApplicationId(t,n),"appDefinitionId"),s=function(e,t){var n=a.get.byPrefix(e,t);if(n)return e.dal.get(n).appDefinitionId}(t,r);if(s)return s===i?S(!0,""):S(!1,l.InvalidPrefixReason.PREFIX_IS_IN_USE_BY_ANOTHER_APPLICATION);if(o.isPageUriSeoTooLong(r))return S(!1,l.InvalidPrefixReason.PREFIX_IS_TOO_LONG);if(o.isDuplicatePageUriSeo(t,null,r))return S(!1,l.InvalidPrefixReason.PREFIX_IS_DUPLICATE_OF_URI_SEO);if(r.match(/[^A-Za-z0-9-]/g))return S(!1,l.InvalidPrefixReason.PREFIX_CONTAINS_INVALID_CHARACTERS);var c=t.pointers.general.getForbiddenPageUriSEOs();return(t.dal.get(c)||{})[r]?S(!1,l.InvalidPrefixReason.PREFIX_IS_FORBIDDEN_WORD):S(!0,"")},pages:{add:function(e,t,n,o,i){return r.add(e,t,o),v(e,n,t,i),t},connect:v,disconnect:E,removePageFromRouter:y,listConnectablePages:I,isConnectablePage:function(t,n){var o=e.matchesProperty("pageData.id",n);return e.some(I(t),o)},getDynamicPagesList:function(t){return e.map(a.get.all(t),(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.appDefinitionId,i=n.pages,a=n.prefix,s=n.group,c=n.hide,l=void 0!==c&&c,p=u.getAppDataByAppDefId(t,r)||{},d=p.appDefinitionName;return{appDefinitionId:r,appDefinitionName:d,prefix:a,group:s,pages:e(i).values().uniq().map((function(e){return o.getPageData(t,e)})).value(),hide:l}}))},move:function(t,n,o,r){var i=a.get.byPage(t,n);if(!i)throw new Error("cannot move a static page");if(!t.pointers.isSamePointer(o,i))throw new Error("page is not related to the origin router");var s=t.dal.get(o),c=t.dal.get(r);if(s&&c&&s.appDefinitionId!==c.appDefinitionId)throw new Error("cannot move a page that not related to app");if(!t.pointers.isSamePointer(o,r)){var u,l,p=(u=s.pages,l=n.id,e.invertBy(u)[l]);E(t,o,n),v(t,r,n,p)}}},getRouterPointer:function(t){var n=a.get.all(t),o=s.generateRouterId(n);!function(t){var n=a.get.all(t);if(e.isEmpty(n)){var o=t.pointers.routers.getRoutersPointer();t.dal.set(o,{configMap:{}})}}(t);var r=t.pointers.routers.getRoutersConfigMapPointer();return t.pointers.getInnerPointer(r,o),t.pointers.routers.getRouterPointer(o)},getPageToAddPointer:function(e){return r.getPageIdToAdd(e)}}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A,T,_,O,C,D,w,M,b,R,N,x,L,B,F,k,U,H,V,G,W,Y,z,K,j,q;e.exports=(o=n(0),r=n(1),i=n(33),a=n(4),s=n(11),c=n(18),u=n(169),l=n(219),p=n(517),d=n(112),g=n(111),f=n(147),m=n(31),v=n(16),E=n(99),y=n(110),I=n(66),S=n(143),h=n(518),P=n(73),A=n(28),T=n(519),_=n(34),O=n(55),C=n(74),D=n(182),w=n(181),M=n(146),b=n(222),R=n(221),N=n(223),x=n(145),L=n(224),B=!1,F=function(e,t){return v.isPremiumApp(e,t)},k=function(e,t,n){return v.getWidgetDataFromTPAPageId(e,t,n)},U=function(e,t,n){O.registerThemeChangeHandler(e,t,n)},H=function(e,t){return v.getAppData(e,t)},V=function(e,t,n){return m.isAppInstalledBy(e,t,n)},G=function(e,t,n,o){return m.isAppInstalledOnPage(e,t,n,o)},W=function(e,t){var n=o(Y(e,t)).map((function(t){return a.data.get(e,t)})).filter((function(t){return v.isPremiumApp(e,t.applicationId)})).map((function(t){return v.getAppData(e,t.applicationId)})).value();return o.uniqBy(n,"applicationId")},Y=function(e,t){t=o.isArray(t)?t:[t];var n=[];return o.forEach(t,(function(t){var o=a.getType(e,t);_.isTpaByCompType(o)&&n.push(t),n=n.concat(a.getTpaChildren(e,t))})),n},z=function(e,t){return v.isAppPermissionsIsRevoked(t)},K=function(e){var t=c.getPageIdList(e,!1,!1),n=o(t).map((function(t){return c.data.get(e,t)})).filter("tpaApplicationId").reject("pageUriSEO").value();o.forEach(n,(function(t){var n=v.getAppData(e,t.tpaApplicationId),r=k(e,n.appDefinitionId,t.tpaPageId);if(r){var i=d.getPageUriSEO(e,o.get(r,"appPage.name"));c.data.set(e,t.id,{pageUriSEO:i})}}))},j=function(e){B=e},q={initialize:function(e,t){r.loggingUtils.performance.start(r.loggingUtils.performanceMetrics.TPA.INITIALIZE),t&&t.runStylesGC&&M.runGarbageCollection(e);var n=e.dal.get(e.pointers.general.getClientSpecMap());u.setMeasuringForType("wysiwyg.viewer.components.tpapps.TPAGluedWidget",i.gluedWidgetMeasuringUtils.getGluedWidgetMeasurements.bind(null,n)),N.settpads(q),b.init(e),L.init(e),j(!0),I.settleOnLoad(e),I.preSaveAddAppsOnLoad(e),K(e),E.getSectionsTranslatedPageTitles(e).then((function(e){S.init(e)})),r.loggingUtils.performance.finish(r.loggingUtils.performanceMetrics.TPA.INITIALIZE)},isTpaByCompType:function(e,t){return _.isTpaByCompType(t)},addApp:l.addAppWrapper,getCompToAddWithOptionalCustomIdRef:function(e,t,n){return a.getComponentToAddRef(e,t,n,o.get(n,"optionalCustomId"))},onProvisionSucceeded:function(e,t,n,o){v.registerAppData(e,t);var r=m.getAllAppCompsByAppId(e,n);l.refreshApp(e,r),o&&o()},isPageMarkedAsHideFromMenu:function(e,t,n){var o=H(e,t);return i.common.utils.isPageMarkedAsHideFromMenu(o,n)},isContainerContainsPremiumTpa:function(e,t){var n=W(e,t);return!o.isEmpty(n)},getPremiumTpaChildren:W,getTpaPointersRecursive:Y,getPremiumTpaChildrenOnPage:function(e,t,n,r){var i=W(e,t);return r?o.reject(i,(function(t){if(!n||n!==t.applicationId)return v.hasSections(e,t)})):i},closePopupsAndModal:function(e){e.siteAPI.removeAllPopups(),e.siteAPI.removeModal()},addSystemApp:o.partial(l.addAppWrapper,A.TYPE.TPA_WIDGET),provisionSystemApp:function(e,t,n,r){var i=v.getAppDataByAppDefinitionId(e,n);if(i&&!z(e,i)){var a=o.get(r,"widgetId"),s=i.widgets[a];if(!(g.isGlued(s)?G(e,"masterPage",n):V(e,n)))return l.provisionWidget(e,t,n,{widgetId:a}),void P.add(i)}e.setOperationsQueue.asyncPreDataManipulationComplete({dontAdd:!0})},addOriginCompIdToWidgetsOnPage:function(e,t){!function e(t){o.forEach(t.components,(function(t){t.componentType===A.COMP_TYPES.TPA_WIDGET&&(t.originCompId=t.id),e(t)}))}(t)},widget:{add:o.partial(l.addAppWrapper,A.TYPE.TPA_WIDGET),provisionWidget:l.provisionWidget,delete:g.deleteWidget,notifyBeforeDelete:g.notifyBeforeWidgetDelete,getPagesToBeDeleted:g.getPagesToBeRemovedWithWidget,duplicate:function(e,t,n){g.duplicateWidget(e,t,n)}},section:{add:l.addSection,provisionSection:l.provisionSection,addMultiSection:l.addMultiSection,provisionMultiSection:l.provisionMultiSection,addSubSection:l.addSubSection,delete:f.actualDeleteSection,notifyBeforeDelete:f.notifyDeleteSection,alreadyInstalled:function(e,t){return f.alreadyInstalled(e,t)},isSectionInstalledByTpaPageId:m.isSectionInstalledByTpaPageId,getPageData:function(e,t){var n,o=c.data.get(e,t),r=o.tpaApplicationId>0;return r&&(n=v.getAppData(e,o.tpaApplicationId)),{title:o.title,hasSection:r,appData:n}},getSectionRefByPageId:function(e,t){return l.getSectionRefByPageId(e,t)}},app:{provisionApp:p.provisionApp,add:p.addApp,getData:H,getDataByAppDefId:function(e,t){return v.getAppDataByAppDefinitionId(e,t)},isHybrid:function(e,t){return v.isHybridApp(e,t)},isDashboardAppOnly:function(e,t){var n=t&&H(e,t);return v.isDashboardAppOnly(n)},isPremium:F,hasPremiumOffering:function(e,t){return v.hasPremiumOffering(e,t)},isPremiumByAppDefinitionId:function(e,t){var n=v.getAppDataByAppDefinitionId(e,t);return!!n&&F(e,n.applicationId)},isLastAppComp:function(e,t){var n=m.getAllAppCompsByAppId(e,t);return n&&1===n.length},isInstalled:V,getWidgetDataFromTPAPageId:k,getWidgetDataFromTPAWidgetId:function(e,t,n){return v.getWidgetDataFromTPAWidgetId(e,t,n)},registerOnInstalled:function(e,t,n){C.registerOnAppInstalled(t,n)},registerOnDeleted:function(e,t,n){C.registerOnAppDeleted(t,n)},getRenderedReactCompsByApplicationId:m.getAllAppCompsByAppId,getAllCompsByApplicationId:m.getAllAppCompsByAppId,hasSections:v.hasSections,getDefaultLayout:l.getDefaultLayout,url:{getSettingsUrl:T.getSettingsUrl,getSettingsModalUrl:T.getSettingsModalUrl},getExtensionsWidgets:function(e,t){return v.getExtensionsWidgets(e,t)},getInstalledDependentAppsData:m.getInstalledDependentAppsData,getFirstAppCompPageId:function(e,t,n){return m.getFirstAppCompPageId(e,t,n)},refreshApp:function(e,t,n){l.refreshApp(e,t,n)},isMultiSectionInstalled:function(e,t){return m.isMultiSectionInstalled(e,t)},getSections:function(e,t){var n=m.getAllAppCompsByAppId(e,t);return o.filter(n,(function(e){return e.type===A.DATA_TYPE.TPA_SECTION||e.type===A.DATA_TYPE.TPA_MULTI_SECTION}))},isAppProvisionedOnServer:v.isAppProvisionedOnServer,isPermissionsRevoked:z,getMainSectionWidgetDataFromApplicationId:v.getMainSectionWidgetDataFromApplicationId,getMainSectionWidgetData:v.getMainSectionWidgetData,getSectionsToAutoInstallWidgetData:v.getAppSectionsToInstall,hasMainSection:v.hasMainSection,isSuperAppByCompId:function(e,t){return v.isSuperAppByCompId(e,t)},hasEditorPlatformPart:function(e,t){return v.hasEditorPlatformPart(t)},delete:function(e,t,n,o,r){x.actualDeleteApps(e,t,n).then(o,(function(){r({error:"error when deleting app"})}))},notifyBeforeApplicationDelete:function(e,t){var n=x.notifyAppsToDelete(e,t,!0);e.setOperationsQueue.asyncPreDataManipulationComplete(n)}},change:{editMode:function(e,t){O.editModeChange(t)},siteSaved:function(){O.siteSaved()},sitePublished:function(){O.sitePublished()},deviceType:function(e,t){O.deviceTypeChange(t)},register:{editorEventHandler:function(e,t,n){O.registerEditorEventHandler(t,n)},compLoadedHandler:function(e,t){O.registerCompLoaded(t)},deleteCompHandler:function(e,t,n){O.registerDeleteCompHandler(t,n)},editModeChangeHandler:function(e,t,n){O.registerEditModeChangeHandler(t,n)},deviceTypeChangeHandler:function(e,t,n){O.registerDeviceTypeChangeHandler(t,n)},themeChangeHandler:U,windowPlacementChangedHandler:function(e,t,n){O.registerWindowPlacementChangedHandler(t,n)},settingsUpdatedHandler:function(e,t,n){O.registerSettingsUpdatedHandler(t,n)},registerPublicDataChangedHandler:function(e,t,n,o){O.registerPublicDataChangedHandler(t,n,o)},sitePublishedHandler:function(e,t,n){O.registerSitePublishedHandler(t,n)},siteSavedHandler:function(e,t,n){O.registerSiteSavedHandler(t,n)}},trigger:{editorEvent:function(e,t){O.triggerEditorEvent(t)},windowPlacement:function(e,t){O.triggerOnWindowPlacementChanged(t)},settingsUpdated:function(e,t,n,o){l.settingsUpdated(e,t,n,o)}}},getComponentDefinition:function(e,t){return h.getComponentDefinition(t)},getSettingsModalParams:function(e,t,n){return T.getSettingsModalParams(e,t,n)},pending:{add:P.addPendingDashboardApp,dismiss:P.dismiss,getPendingApps:P.getPendingAppsFromSiteMetaData},getPendingApps:P.getPendingApps,getPremiumPendingApps:P.getPremiumPendingApps,appMarket:{getData:E.getAppMarketData,getDataForPage:E.getAppMarketDataForPage,getDataAsync:E.getAppMarketDataAsync,getUrl:E.getAppMarketUrl,getInfoUrl:E.getAppMarketInfoUrl,getAppReviewsUrl:E.getAppReviewsUrl,getPermissionsUrl:E.getAppMarketPermissionsUrl,getRelatedApps:E.getRelatedApps,getPackages:E.getPackages},billing:{getPremiumApps:E.getPremiumApps,getSiteUpgradeUrl:w.getSiteUpgradeUrl,getAppUpgradeUrl:w.getAppUpgradeUrl},style:{setParamOldSDK:function(e,t,n){U(e,n,(function(t){l.postBackThemeData(e,n,t)}))},setStyleParam:R.setStyleParam,mapWixParamsToCssValues:R.mapWixParamsToCssValues,get:function(e,t){return R.getStyleDataToPassIntoApp(e,t)},postBackThemeData:l.postBackThemeData,getNameToFontsKeyMap:function(){return i.common.styleUtils.getNameToFontsKeyMap()},getTpaColorsToSiteColors:R.getTpaColorsToSiteColors},provision:{provisionAppDemoSave:l.provisionAppDemoSave,refreshAppSpecMap:y.refreshSpecMap},constants:A,bi:{errors:D,sendBIEvent:function(e,t,n){_.sendBIEvent(e,t,n)}},comp:{resize:function(e,t,n,r,i){if(s.isHorizontallyStretchedToScreen(e,t))i({onError:"component is already set to full width"});else{var c=a.layout.get(e,t);s.updateCompLayout(e,t,o.defaults({width:n,height:r},{width:c.width,height:c.height})),e.siteAPI.forceUpdate(),i({width:(c=a.layout.get(e,t)).width,height:c.height})}},setExternalId:function(e,t,n,o,r){l.setExternalId(e,t,n,o,r)},getExternalId:function(e,t){return l.getExternalId(e,t)},postMessageBackToApp:l.postMessageBackToApp,isInstalled:m.isAppComponentInstalled,add:p.addComponent,provisionComp:p.provisionComp},data:{set:M.set,app:{get:M.getAppValue,getMulti:M.getAppValues},comp:{get:M.getComponentValue,getMulti:M.getComponentValues},getPublicData:M.getPublicData,remove:M.remove,SCOPE:M.SCOPE,get:M.get,getMulti:M.getMulti},__privates:{fixEcomIfNeeded:function(e,t){var n=v.getAppsData(e),r="1380b703-ce81-ff05-f115-39571d94dfcd",i=o.find(n,{appDefinitionId:r});if(i&&m.isAppInstalledBy(e,r)){var a,s,c=e.pointers.data.getDataItemsWithPredicate({tpaApplicationId:i.applicationId},"masterPage").map(e.dal.get),u=v.getAppSections(void 0,i),p=o(u).map("appPage").map("id").value(),g=o.map(c,"tpaPageId"),f=v.getMainSectionWidgetData(void 0,i).appPage.id,E=o.some(c,(function(e){return o.startsWith(e.tpaPageId,f)}));if(E){s=o.reject(p,(function(e){return o.startsWith(e,f)}));var y=o.reject(g,(function(e){return o.startsWith(e,f)}));a=o.intersection(s,y)}E?o.isEqual(a,s)||d.addHiddenPages(e,i):o.isEqual(a,s)&&0!==o.size(c)||l.provisionSection(e,t,r)}},areDocumentServicesHandlersReady:function(){return B},fixProGallery:function(e){var t=v.getAppsData(e),n=o.find(t,{appDefinitionId:"14271d6f-ba62-d045-549b-ab972ae1f70e"});n&&m.isAppInstalledBy(e,"14271d6f-ba62-d045-549b-ab972ae1f70e")&&(e.pointers.data.getDataItemWithPredicate({tpaApplicationId:n.applicationId},"masterPage")||d.addHiddenPages(e,n))}}})},function(e,t,n){var o,r;e.exports=(o=n(0),r=[],{init:function(e){r=e},getTitle:function(e,t){var n=o.find(r,{appDefinitionId:e});if(n){var i=o.find(n.widgets,{widgetId:t});return o.get(i,"title","")}return""}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(33),o=n(28),r=n(21),i=n(125),a=n(16),s=n(10),c=n(4),u=function(t,n,o,r,i,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,p=n.applicationId,d={w:980,h:500},g={componentType:"mobile.core.components.Page",type:"Page",styleId:"p2",skin:"skins.core.InlineSkin",layout:{x:0,y:0,width:d.w,height:d.h,anchors:[]},data:{type:"Page",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:c,hidePage:e.isBoolean(i)?i:void 0,mobileHidePage:null,underConstruction:!1,tpaApplicationId:p,indexable:!e.isBoolean(a)||a,tpaPageId:r,pageBackgrounds:l(t,n),isLandingPage:!!e.isBoolean(s.desktop)&&s.desktop,isMobileLandingPage:!!e.isBoolean(s.mobile)&&s.mobile},components:[]};return u&&(g.data.pageSecurity={requireLogin:!0,dialogLanguage:"en"}),g},l=function(t,n){return e.get(n,"appPage.hideFromMenu")?i.getBlankBackground():e.get(r.getPageDataWithoutIds(t,t.siteAPI.getPrimaryPageId()),"pageBackgrounds")};function p(t){return{desktop:t.appPage.fullPage||e.get(t,"componentFields.fullPageDesktopOnly"),mobile:t.appPage.landingPageInMobile}}return{getSectionStructure:u,getWidgetStructure:function(e,t,n,r,i){return{layout:{width:r&&r.width,height:r&&r.height,x:r&&r.x,y:r&&r.y,anchors:[]},data:{widgetId:n,applicationId:e.toString(),appDefinitionId:t,type:o.DATA_TYPE.TPA_WIDGET,metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},type:"Component",skin:o.SKINS.TPA_WIDGET,componentType:o.COMP_TYPES.TPA_WIDGET,style:i||o.STYLE.TPA_WIDGET}},getGluedWidgetStructure:function(e,t,n,r,i){return{layout:{width:r&&r.width||300,height:r&&r.height||200,x:r&&r.x||300,y:r&&r.y||120,anchors:[],fixedPosition:!0},data:{widgetId:n.widgetId,applicationId:e.toString(),appDefinitionId:t,type:o.DATA_TYPE.TPA_WIDGET,metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},type:"Component",skin:o.SKINS.TPA_WIDGET,componentType:o.COMP_TYPES.TPA_GLUED_WIDGET,style:i||o.STYLE.TPA_GLUED_WIDGET,props:{placement:n.gluedOptions.placement,verticalMargin:n.gluedOptions.verticalMargin,horizontalMargin:n.gluedOptions.horizontalMargin,type:"TPAGluedProperties",metaData:{schemaVersion:"1.0"}}}},getSubSectionStructure:function(e,t,n,o,r,i){var s=p(t),c=a.computeHidePage(t,i,!0),l=u(e,t,n,t.appPage.id,c,t.appPage.indexable,s,o,r);return l.data.title=t.appPage.name,l},getMultiSectionStructure:function(e,n,o,r,i,s){var c=p(n),l=n.appPage.id+t.common.utils.Constants.MULTI_SECTION_DELIMITER+o,d=a.computeHidePage(n,s,!1);return u(e,n,o,l,d,n.appPage.indexable,c,r,i)},convertStyleIdToStyleDef:function(t,n){var o=n.style;if(e.isString(o)){var r=s.styles.getAllFromAllPages(t)[o];if(!r){var i=c.getDefinition(t,n.componentType);return void(n.style=e(i.styles).keys().head())}"custom"===r.styleType&&(n.style=e.omit(r,["id"]))}}}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P;e.exports=(o=n(0),r=n(18),i=n(4),a=n(16),s=n(31),c=n(28),u=n(7),l=n(74),p=n(36),g=function(e,t,n){var r=d(e,n),i=function(e,t,n){var r=s.getWidgetsByAppId(e,t);return o.reject(r,(function(e){return o.includes(n,e.pageId)}))}(e,t,n),a=o.union(r,i);return f(e,a)},m=function(e,t,n){var i=o.map(s.getInstalledDependentAppsData(e,t),"applicationId");n&&(i=o.union([t],i));var a=s.getPagesByApplicationIds(e,i);return o.forEach(i,(function(t){var n=o(a).filter({tpaApplicationId:t}).map("id").value();!function(e,t,n){var i=g(e,t,n);o.forEach(i,(function(t){E(e,t.compPointer,t.applicationId)})),o.forEach(n,(function(t){r.validatePageRemovalInternal(e,t)}))}(e,t,n)})),{appsPagesToDelete:a,appIdsToDelete:i}},v=function(e,t,n,r){var i=o.filter(e,{widgetId:I(t,n)});return i&&1===i.length&&i[0].id===r.id},E=function(e,t,n,a){var c=s.getWidgetsByAppId(e,n);v(c,e,n,t)&&(function(e,t){var n=s.getHiddenSections(e,t);o.forEach(n,(function(t){r.validatePageRemovalInternal(e,t.pageId)}))}(e,n),y(e,n,c),m(e,n)),i.validateRemovalInternal(e,t,a)},y=function(e,t,n){var r=o.reject(n,{widgetId:I(e,t)});o.forEach(r,(function(t){var n=u.getComponentById(e,t.id,t.pageId);i.validateRemovalInternal(e,n)}))},I=function(e,t){var n=a.getAppData(e,t);if(n){var r=o.find(n.widgets,{default:!0});return o.get(r,"widgetId")}},S=function(e,t,n){var c=t.appsPagesToDelete,l=t.appIdsToDelete;if(!c){var d=o.map(s.getInstalledDependentAppsData(e,n),"applicationId");c=s.getPagesByApplicationIds(e,d),l=d}var f=[];return o.forEach(l,(function(t){var n=o.filter(c,{tpaApplicationId:t});f.push(function(e,t,n){var i=o.map(n,"id"),s=g(e,t,i);return o.forEach(s,(function(t){h(e,t.compPointer,t.applicationId)})),o.forEach(i,(function(t){r.remove(e,t)})),a.hasEditorPlatformPart(a.getAppData(e,t))?p.remove(e,t):Promise.resolve()}(e,t,n))})),Promise.all(f).then((function(){var t=s.getWidgetsByAppId(e,n);o.forEach(t,(function(t){var n=u.getComponentById(e,t.id,t.pageId);e.dal.isExist(n)&&i.deleteComponent(e,n)}))}))},h=function(e,t,n){var a=s.getWidgetsByAppId(e,n);v(a,e,n,t)&&(function(e,t){var n=s.getHiddenSections(e,t);o.forEach(n,(function(t){r.remove(e,t.pageId)}))}(e,n),P(e,n,a),S(e,{},n)),e.dal.isExist(t)&&i.deleteComponent(e,t)},P=function(e,t,n){var r=o.reject(n,{widgetId:I(e,t)});o.forEach(r,(function(t){var n=u.getComponentById(e,t.id,t.pageId);i.deleteComponent(e,n)}))},{notifyAppsToDelete:m,actualDeleteApps:S,notifyWidgetAboutToDelete:E,deleteWidget:h,deleteTpaCompleteCallback:function(e,t){o.forEach(t,(function(t){if(!s.isApplicationIdExists(e,t)){var n=a.getAppData(e,t);l.invokeDeleteAppCallbacks(n.appDefinitionId)}}))},getWidgetCompsToDeleteMap:f=function(e,t){return o.map(t,(function(t){var n=r.getPage(e,t.pageId);return{compPointer:e.pointers.components.getComponent(t.id,n),applicationId:t.applicationId}}))},getWidgetsOnPagesToDelete:d=function(e,t){return o.reduce(t,(function(t,n){var r=s.getAllTpaCompsOnPage(e,n),i=o.filter(r,{type:c.DATA_TYPE.TPA_WIDGET});return o.union(t,i)}),[])},isLastInstalledMainWidget:v})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A,T;e.exports=(o=n(0),r=n(1),i=n(3),a=n(4),s=n(31),c=n(16),u=n(55),p=function(e){var t=e.tpaData;return t&&(t.content=t.content?JSON.parse(t.content):{}),t},d=function(e,t,n,o,r,i,a){var s=t?t.id:"tpaData-"+i;t||(t={type:"TPAGlobalData",id:s,content:{}}),t.appDefinitionId=a;var c=A(e,s,t,"masterPage",n,o,1e3);c?(r&&r(c),g(e,l.APP,i,null,c)):y(r,"Your app has exceeded the provided ".concat(1e3," bytes storage space"))},g=function(e,t,n,o,r){t===l.APP?u.callPublicDataChangedCallbackForAllAppRegisteredComps(n,r):u.callPublicDataChangedCallback(o,n,r)},f=function(e,t,n,i,s,u,p){var d=e.pointers.components.getPageOfComponent(i).id,f=a.data.get(e,i,null,!0),m=n?n.id:r.guidUtils.getUniqueId("tpaData-"),v=c.getAppData(e,f.applicationId),E=400;o.get(v,"isWixTPA")&&(E=2e3),n||(n={type:"TPAData",id:m,content:{}});var I=A(e,m,n,d,s,u,E);I?(f.tpaData="#".concat(m),a.data.update(e,i,f,!0),p&&p(I),g(e,l.COMPONENT,f.applicationId,i.id,I)):y(p,"Your app has exceeded the provided ".concat(E," chars storage space"))},m=function(e,t,n,r){var i=t?o.pick(t.content,e):null;o.isEmpty(i)?y(n,"key ".concat(e," not found in ").concat(r," scope")):n(i)},v=function(e,t,n,r,a,s,c,u){if(h(t,n)){var l=o.pick(t.content,n);t.content=JSON.stringify(o.omit(t.content,n)),i.addSerializedDataItemToPage(e,r,t,t.id),a(l),g(e,s,c,u,l)}else y(a,"key ".concat(n," not found in ").concat(s," scope"))},E=function(e,t,n,r){var i=o.map(e,(function(e){return"".concat(e)}));if(!o.isEmpty(t)&&o(t).keys().isEqual(i))n(t);else{var a=o.keys(t),s=o(a).xor(e).intersection(e).value();y(n,"keys ".concat(s," not found in ").concat(r," scope"))}},y=function(e,t){e({error:{message:t}})},I=function(e){return e===l.APP},S=function(e){return!!(o.isBoolean(e)||o.isString(e)||o.isNumber(e)||o.isPlainObject(e))},h=function(e,t){return!!e&&o(e.content).keys().includes(t.toString())},P=function(e,t){var n="tpaData-"+t,o=e.pointers.data.getDataItem(n,"masterPage"),r=e.dal.get(o);return r&&(r.content=r.content?JSON.parse(r.content):{}),r},A=function(e,t,n,r,a,s,c){n.content[a]=s;var u=n.content,l=JSON.stringify(n.content);return function(e,t){try{return!(e.length>t)}catch(e){return!1}}(l,c)?(n.content=l,i.addSerializedDataItemToPage(e,r,n,n.id,!0),o.pick(u,a)):null},T=function(e,t){e.dal.remove(e.pointers.data.getDataItem(t,"masterPage"))},{set:function(e,t,n,o,r,i){if(S(o)){var s=a.data.get(e,t,null,!0),c=p(s),u=P(e,s.applicationId);I(r)?d(e,u,n,o,i,s.applicationId,s.appDefinitionId):f(e,u,c,t,n,o,i)}else y(i,"Invalid value: value should be of type: string, boolean, number or Json")},getAppValue:function(e,t,n,o){var r=P(e,t);m(n,r,o,l.APP)},getAppValues:function(e,t,n,r){n=o.uniq(n);var i=P(e,t),a=i?o.pick(i.content,n):null;E(n,a,r,l.APP)},getPublicData:function(e,t,n,r){r({APP:o.get(P(e,t),"content"),COMPONENT:o.get(p(a.data.get(e,n,null,!0)),"content")})},get:function(e,t,n,r,i){var s,c=a.data.get(e,t,null,!0);if(I(r)){var u=P(e,c.applicationId);s=u?o.pick(u.content,n):null}else{var l=p(c);s=l?o.pick(l.content,n):null}o.isEmpty(s)?y(i,"key ".concat(n," not found in ").concat(r," scope")):i(s)},getMulti:function(e,t,n,r,i){var s,c=a.data.get(e,t,null,!0);if(n=o.uniq(n),I(r)){var u=P(e,c.applicationId);s=u?o.pick(u.content,n):null}else{var l=p(c);s=l?o.pick(l.content,n):null}var d=o.map(n,(function(e){return"".concat(e)}));if(!o.isEmpty(s)&&o(s).keys().isEqual(d))i(s);else{var g=o.keys(s),f=o(g).xor(n).intersection(n).value();y(i,"keys ".concat(f," not found in ").concat(r," scope"))}},remove:function(e,t,n,o,r){var i=a.data.get(e,t,null,!0);if(I(o)){var s=P(e,i.applicationId);v(e,s,n,"masterPage",r,o,i.applicationId,t.id)}else{var c=e.pointers.components.getPageOfComponent(t).id,u=p(i);v(e,u,n,c,r,o,i.applicationId,t.id)}},getComponentValue:function(e,t,n,o){var r=a.data.get(e,t,null,!0),i=p(r);m(n,i,o,l.COMPONENT)},getComponentValues:function(e,t,n,r){var i=a.data.get(e,t,null,!0);n=o.uniq(n);var s=p(i),c=s?o.pick(s.content,n):null;E(n,c,r,l.COMPONENT)},runGarbageCollection:function(e){var t=function(e){var t=s.getDeletedAppsIds(e);return o(t).map((function(e){return"tpaData-"+e})).filter((function(t){return function(e,t){var n=e.pointers.data.getDataItem(t,"masterPage");return!!e.dal.isExist(n)}(e,t)})).value()}(e);if(!o.isEmpty(t)){var n=e.dal.get(e.pointers.general.getOrphanPermanentDataNodes());n=n.concat(t),e.dal.set(e.pointers.general.getOrphanPermanentDataNodes(),n),o.forEach(t,T.bind(null,e))}},SCOPE:l={APP:"APP",COMPONENT:"COMPONENT"}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I;e.exports=(o=n(0),r=n(18),i=n(4),a=n(74),s=n(31),c=n(16),u=n(111),l=n(112),p=n(145),d=n(143),g=n(144),f=n(28),m=function(e,t,n){var r={name:t.appDefinitionName};return o.forEach(t.widgets,(function(i){if(i.appPage&&i.appPage.name&&!i.appPage.hidden){r=o.clone(i.appPage);var a=n||i.appPage.name;r.name=n||d.getTitle(t.appDefinitionId,i.widgetId)||r.name,r.pageUriSEO=l.getPageUriSEO(e,a),r=o.merge(r,i)}})),r},E=function(e,t,n,r){var a=c.widgetsToAutoAddToSite(e,t);o.forEach(a,(function(o){var a=i.getComponentToAddRef(e,n);u.addWidgetAfterProvision(e,a,{widgetId:o.widgetId,componentOptions:r},t)}))},y=function(e,t){var n=s.isMultiSectionInstalled(e,o.get(t,"tpaApplicationId")),r=c.isPageMarkedAsAutoAddToSite(e,t),i=c.isPageMarkedAsShouldDeleteAppWhenDeleted(e,t);return!n&&(!(!1===r)||i)},I=function(e,t){return!s.isMainSectionInstalled(e,t.applicationId)},{addSectionAfterProvision:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=(arguments.length>4&&arguments[4],arguments.length>5?arguments[5]:void 0);if(I(e,r)){var u=n.sectionId,p=o.find(r.widgets,{default:!0});l.addSectionComponentOptionsIfNeeded(o.get(p,"appPage.id"),n);var d=m(e,r,n.title),y={desktop:d.fullPage||o.get(p,"componentFields.fullPageDesktopOnly"),mobile:d.landingPageInMobile},S=c.computeHidePage(d,n.isHidden,!1),h=g.getSectionStructure(e,r,u,d.id,S,d.indexable,y,d.pageUriSEO,n.requireLogin),P=!s.isApplicationIdExists(e,r.applicationId),A=l.addPageAndSection(e,t,u,r.applicationId,r.appDefinitionId,d,h,d.widgetId||null,f.COMP_TYPES.TPA_SECTION,f.DATA_TYPE.TPA_SECTION,n);l.addHiddenPages(e,r,n.componentOptions),E(e,r,t,n.componentOptions),P&&a.invokeAddAppCallbacks(r.appDefinitionId),l.setPrefetchPageBehaviorIfNeeded(e,A,r),e.setOperationsQueue.executeAfterCurrentOperationDone((function(){l.addPlatformAppIfNeeded(e,r,n).then(o.partial(v,n,t,u,!0)).catch(o.partial(v,n,t,u,!1))}))}else i(e,new Error("section already installed"))},addMultiSection:function(e,t,n){l.addSectionComponentOptionsIfNeeded(n.widgetData.appPage.id,n);var r=n.widgetData,i=n.sectionId,a=n.appDefinitionId,s=n.applicationId,c=n.title,u=n.requireLogin,p=n.isHidden;r.applicationId=s,r.name=c||d.getTitle(a,r.widgetId)||r.appPage.name;var m=l.getPageUriSEO(e,c||o.get(n,"widgetData.appPage.name","")),E=g.getMultiSectionStructure(e,r,i,m,u,p);l.addPageAndSection(e,t,i,s,a,r,E,r.widgetId||null,f.COMP_TYPES.TPA_SECTION,f.DATA_TYPE.TPA_SECTION,n),e.setOperationsQueue.executeAfterCurrentOperationDone((function(){v(n,t,i,!0)}))},notifyDeleteSection:function(e,t){var n,i=r.data.get(e,t),a=i.tpaApplicationId;if(y(e,i))n=p.notifyAppsToDelete(e,a,!0);else{n={appsPagesToDelete:[i],appIdsToDelete:[i.tpaApplicationId]};var s=p.getWidgetCompsToDeleteMap(e,p.getWidgetsOnPagesToDelete(e,[t]));o.forEach(s,(function(t){p.notifyWidgetAboutToDelete(e,t.compPointer,t.applicationId)})),r.validatePageRemovalInternal(e,t)}e.setOperationsQueue.asyncPreDataManipulationComplete(n)},actualDeleteSection:function(e,t,n){var i=t.appsPagesToDelete,a=t.appIdsToDelete,s=r.data.get(e,n),c=s.tpaApplicationId;if(y(e,s))p.actualDeleteApps(e,{appsPagesToDelete:i,appIdsToDelete:a},c);else{var u=p.getWidgetCompsToDeleteMap(e,p.getWidgetsOnPagesToDelete(e,[n]));o.forEach(u,(function(t){p.deleteWidget(e,t.compPointer,t.applicationId)})),r.remove(e,n)}p.deleteTpaCompleteCallback(e,a)},alreadyInstalled:function(e,t){return s.isAppInstalledBy(e,t)},invokeSectionCallback:v=function(e,t,n,o){e.callback&&e.callback({page:t,sectionId:n,success:o})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(14),o=n(2),r=n(6),i=n(1),a=n(5),s=n(17);function c(e,t,n){var o=e.pointers.general.getRenderFlag(t);e.dal.set(o,n)}function u(e,t){var n=e.pointers.general.getRenderFlag(t);return e.dal.get(n)}function l(e,t,n){!function(e){if("boolean"!=typeof e)throw new Error("param ".concat(e," is not valid. Should be boolean"))}(n),n?e.siteAPI.enableAction(t):e.siteAPI.disableAction(t)}function p(e){e.siteAPI.resetRuntimeData()}return{isMobileView:t.isMobileView,getViewMode:t.getViewMode,setViewMode:function(n,i){var a=e.values(o.VIEW_MODES);if(!e.includes(a,i))throw new Error("view mode not valid. valid viewModes are: ".concat(a));if(t.getViewMode(n)!==i){var c=i===o.VIEW_MODES.MOBILE;c&&s.setMobileViewMode(n,r),p(n),n.siteAPI.setMobileView(c),r.executeHook(r.HOOKS.SWITCH_VIEW_MODE.AFTER)}},runtime:{reset:p},setComponentVisibility:function(e,t,n){var o=u(e,"componentVisibility")||{};o[t]=n,c(e,"componentVisibility",o)},setComponentViewMode:function(e,t){r.executeHook(r.HOOKS.CHANGE_COMPONENT_VIEW_MODE.BEFORE,"componentViewMode",[e,t]),c(e,"componentViewMode",t)},enablePlaying:function(e,t){c(e,"isPlayingAllowed",t)},enablePageProtection:function(e,t){c(e,"isPageProtectionEnabled",t)},enableZoom:function(e,t){c(e,"isZoomAllowed",t)},enableTransFormScaleOnSite:function(e,t){c(e,"siteTransformScale",t)},getSiteTransformScale:function(e){var t=e.pointers.general.getRenderFlag("siteTransformScale");return e.dal.get(t)},enableSocialInteraction:function(e,t){c(e,"isSocialInteractionAllowed",t)},enableExternalNavigation:function(e,t){c(e,"isExternalNavigationAllowed",t)},enableBackToTopButton:function(e,t){c(e,"isBackToTopButtonAllowed",t)},enableWixAds:function(e,t){c(e,"isWixAdsAllowed",t)},enableSlideShowGalleryClick:function(e,t){c(e,"isSlideShowGalleryClickAllowed",t)},enableShouldUpdateJsonFromMeasureMap:function(e,t){c(e,"shouldUpdateJsonFromMeasureMap",t)},enableTinyMenuOpening:function(e,t){c(e,"isTinyMenuOpenAllowed",t)},enableResetGalleryToOriginalState:function(e,t){c(e,"shouldResetGalleryToOriginalState",t)},enableResetComponent:function(e,t){c(e,"shouldResetComponent",t)},allowSiteMembersDialogsOpening:function(e,t){c(e,"isSiteMembersDialogsOpenAllowed",t)},resetBehaviorsRegistration:function(e,t){t&&e.siteAPI.resetBehaviorsRegistration()},enableAction:l,enablePageTransitions:function(e,t){l(e,"pageTransition",t)},enableComponentTransitions:function(e,t){c(e,"isComponentTransitionAllowed",t)},enableRenderTPAsIframe:function(e,t){c(e,"shouldRenderTPAsIframe",t)},enableStubifyComponents:function(e,t){c(e,"shouldStubifyComponents",t)},enableFetchDynamicPageInnerRoutes:function(e,t){c(e,"shouldFetchDynamicPageInnerRoutes",t)},enableBgVideoAutoplay:e.noop,enableRenderFixedPositionContainers:function(e,t){c(e,"renderFixedPositionContainers",t)},setOnboardingViewportMode:function(e,t){c(e,"onboardingViewportMode",t)},enableRenderFixedPositionBackgrounds:function(e,t){c(e,"renderFixedPositionBackgrounds",t)},setExtraSiteHeight:function(e,t){c(e,"extraSiteHeight",t)},allowSiteOverflow:function(e,t){c(e,"allowSiteOverflow",t)},allowShowingFixedComponents:function(e,t){c(e,"allowShowingFixedComponents",t)},showHiddenComponents:function(e,t){c(e,"showHiddenComponents",t)},isHiddenComponentsEnabled:function(e){return u(e,"showHiddenComponents")},isFetchDynamicPageInnerRoutesEnabled:function(e){return u(e,"shouldFetchDynamicPageInnerRoutes")},isShowingFixedComponentsEnabled:function(e){return u(e,"allowShowingFixedComponents")},ignoreComponentsHiddenProperty:function(e,t){c(e,"ignoreComponentsHiddenProperty",t)},ignoreComponentsCollapsedProperty:function(e,t){c(e,"ignoreComponentsCollapsedProperty",t)},setComponentPreviewState:function(e,t,n){var o=u(e,"componentPreviewStates")||{};o[t]=n,c(e,"componentPreviewStates",o)},getComponentPreviewState:function(e){return u(e,"componentPreviewStates")},checkComponentsHiddenProperty:function(e,t){var n=u(e,"ignoreComponentsHiddenProperty")||[];return i.objectUtils.isDifferent(t,n)},checkComponentsCollapsedProperty:function(e,t){var n=u(e,"ignoreComponentsCollapsedProperty")||[];return i.objectUtils.isDifferent(t,n)},showControllers:function(e,t){c(e,"showControllers",t)},isControllersVisibilityEnabled:function(e){return u(e,"showControllers")},allowWixCodeInitialization:function(e,t){c(e,"initWixCode",t)},isContactFormMigrationMode:function(){return a.isOpen("sv_contactFormFinalMigrationEditor")},setShouldKeepChildrenInPlace:function(e,t){c(e,"enforceShouldKeepChildrenInPlace",t)},setPreserveCompLayoutOnReparent:function(e,t){c(e,"preserveCompLayoutOnReparent",t)},updateAnimationsViewMode:function(e,t){e.siteDataAPI.siteData.animations.updateViewMode(t)},enableNativeComponentsForPreview:function(e,t){a.isOpen("sv_editorNativeComponents")&&(c(e,"shouldModifyTpaStructure",t),t&&p(e))}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(2),i=function(e){return e.pointers.getInnerPointer(e.pointers.data.getDataItemFromMaster("masterPage"),"styleSettings")},{isSiteMigrated:function(e){var t=e.dal.get(i(e));return o.get(t,"stylesPerPage")===r.STYLES.STYLES_PER_PAGE_VER},markSiteAsMigrated:function(e){return e.dal.set(i(e),{stylesPerPage:r.STYLES.STYLES_PER_PAGE_VER})},resetMigratedSiteFlag:function(e){return e.dal.set(i(e),{})}})},function(e,t){var n;e.exports=(n="comp",{executeBehavior:function(e,t,o,r,i){var a={type:n,targetId:t.id,name:o,params:r};e.siteAPI.handleBehavior(a,{group:n,callback:i})},getRuntimeState:function(e,t){return e.siteAPI.getRuntimeDal().getCompState(t.id)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(4),o=n(11),r=n(8),i=n(235),a=n(2);function s(t){var n,o,r,i,a,s,c,u;return n=r=a=c=Number.MAX_VALUE,o=i=u=s=-Number.MAX_VALUE,e.forEach(t,(function(e){n=Math.min(n,e.x),o=Math.max(o,e.x+e.width),r=Math.min(r,e.y),i=Math.max(i,e.y+e.height),c=Math.min(c,e.bounding.x),s=Math.max(s,e.bounding.x+e.bounding.width),a=Math.min(a,e.bounding.y),u=Math.max(u,e.bounding.y+e.bounding.height)})),{bounding:{x:c,y:a,width:s-c,height:u-a},x:c,y:a,width:s-c,height:u-a,rotationInDegrees:0}}function c(n,o,r,i){if(!r)return!1;var a=t.layout.get(o,r).bounding[n];return!e.isUndefined(a)&&(i=i||t.getSiblings(o,r),e.every(i,(function(i){if(r.id===i.id)return!0;var s=t.layout.get(o,i).bounding[n];return!!e.isUndefined(s)||a<=s})))}function u(t,n){if(n&&0!==n.length)return s(e.map(n,(function(e){return o.isHorizontallyStretchedToScreen(t,e)?function(e,t){var n=o.getCompLayoutRelativeToScreen(e,t),r=o.getCompLayoutRelativeToScreen(e,e.pointers.components.getPagesContainer(a.VIEW_MODES.DESKTOP));return{x:r.x,width:r.width,y:n.y,height:n.height,bounding:{x:r.x,width:r.width,y:n.y,height:n.height}}}(t,e):o.getCompLayoutRelativeToScreen(t,e)})))}function l(n,r,i,s,c){e.forEach(r,(function(r){var u=o.getCompLayoutRelativeToScreen(n,r,!0),l=t.getContainer(n,r),p=o.getCompLayoutRelativeToScreen(n,l,!0),g={};switch(s){case a.COMP_ALIGNMENT_OPTIONS.LEFT:g.x=0;break;case a.COMP_ALIGNMENT_OPTIONS.RIGHT:g.x=i.width-u.bounding.width;break;case a.COMP_ALIGNMENT_OPTIONS.TOP:g.y=0;break;case a.COMP_ALIGNMENT_OPTIONS.BOTTOM:g.y=i.height-u.bounding.height;break;case a.COMP_ALIGNMENT_OPTIONS.CENTER:g.x=.5*(i.width-u.bounding.width);break;case a.COMP_ALIGNMENT_OPTIONS.MIDDLE:g.y=.5*(i.height-u.bounding.height)}c||(void 0!==g.x&&(g.x+=i.x-p.x),void 0!==g.y&&(g.y+=i.y-p.y));var f=e.keys(g);e.forEach(f,(function(e){g[e]=d(u,e,g[e])})),o.updateCompLayout(n,r,g)}))}function p(e,t,n,i){var a=r.public.resizeOnlyProportionally(e,i),s=o.getProportionStructure(e,i),c={};c[t]=n,a?o.updateAndPreserveProportions(e,c,s,!0):o.updateCompLayout(e,i,c)}function d(e,t,n){return e[t]+n-e.bounding[t]}return{getSnugPositionAndSize:function(t,n){if(n&&0!==n.length)return function(t){var n,o,r,i;return n=r=Number.MAX_VALUE,o=i=-Number.MAX_VALUE,e.forEach(t,(function(e){n=Math.min(n,e.x),o=Math.max(o,e.x+e.width),r=Math.min(r,e.y),i=Math.max(i,e.y+e.height)})),{x:n,y:r,width:o-n,height:i-r}}(e.map(n,(function(e){return o.getPositionAndSize(t,e)})))},getSnugLayout:function(n,o){if(o&&0!==o.length)return s(e.map(o,(function(e){return t.layout.get(n,e)})))},getSnugLayoutRelativeToStructure:function(t,n){if(n&&0!==n.length)return s(e.map(n,(function(e){return o.getCompLayoutRelativeToStructure(t,e)})))},getSnugLayoutRelativeToScreen:function(t,n){if(n&&0!==n.length)return s(e.map(n,(function(e){return o.getCompLayoutRelativeToScreen(t,e)})))},getSnugLayoutRelativeToScreenConsideringScroll:function(t,n,r){if(n&&0!==n.length)return s(e.map(n,(function(e){return o.getCompLayoutRelativeToScreenConsideringScroll(t,e,r)})))},isTopMost:e.partial(c,"y"),isLeftMost:e.partial(c,"x"),alignComponentsToOuterLayout:l,sortComponentsByZOrder:function(n,o,r){if(0===o.length)return[];var i=t.getContainer(n,o[0]),a=t.getChildren(n,i),s=function(t,n){return e.some(o,n)&&t.push(n),t};return r?e.reduceRight(a,s,[]):e.reduce(a,s,[])},distribute:function(n,r,a){var c,u;if(i.canDistribute(n,r,a)){var l,p,g=i.getFilteredComponentsToApplyAction(n,r,a),f=e.map(g,(function(e){var r=t.getContainer(n,e);return{compPointer:e,layoutRelativeToScreen:o.getCompLayoutRelativeToScreen(n,e,!0),compContainerLayoutRelativeToScreen:o.getCompLayoutRelativeToScreen(n,r,!0)}}));if("horizontal"===a||"verticalAndHorizontal"===a){c=e.map(f,"layoutRelativeToScreen"),u=s(c);var m=e.sumBy(c,"bounding.width");l=(u.width-m)/(c.length-1);var v=0;p=e.sortBy(f,"layoutRelativeToScreen.bounding.x"),e.forEach(p,(function(e){var t=v+(u.x-e.compContainerLayoutRelativeToScreen.x);v+=e.layoutRelativeToScreen.bounding.width+l;var r=d(e.layoutRelativeToScreen,"x",t);o.updateCompLayout(n,e.compPointer,{x:r})}))}if("vertical"===a||"verticalAndHorizontal"===a){c=e.map(f,"layoutRelativeToScreen"),u=s(c);var E=e.sumBy(f,"layoutRelativeToScreen.bounding.height");l=(u.height-E)/(c.length-1);var y=0;p=e.sortBy(f,"layoutRelativeToScreen.bounding.y"),e.forEach(p,(function(e){var t=y+(u.y-e.compContainerLayoutRelativeToScreen.y);y+=e.layoutRelativeToScreen.bounding.height+l;var r=d(e.layoutRelativeToScreen,"y",t);o.updateCompLayout(n,e.compPointer,{y:r})}))}}},matchSize:function(n,o,r){if(i.canMatchSize(n,o,r)){var a=i.getFilteredComponentsToApplyAction(n,o,r),s=e.map(a,(function(e){return t.layout.get(n,e)})),c=e.sumBy(s,"width")/s.length,u=e.sumBy(s,"height")/s.length;!c||"width"!==r&&"heightAndWidth"!==r||e.forEach(a,p.bind(this,n,"width",c)),!u||"height"!==r&&"heightAndWidth"!==r||e.forEach(a,p.bind(this,n,"height",u))}},align:function(e,t,n){i.canAlign(e,t,n)&&l(e,i.getFilteredComponentsToApplyAction(e,t,n),u(e,t),n,!1)}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(1),(i={})[r.blogAppPartNames.FEED]=["MasonryPage","MediaBottomPage","MediaLeftPage","MediaRightPage","MediaTopPage","MediaZigzagPage"],i[r.blogAppPartNames.CUSTOM_FEED]=["Masonry","MediaBottom","MediaLeft","MediaRight","MediaTop","MediaZigzag"],{getBlogPaginationCustomizationsByAppPartName:function(e){return o.map(i[e],(function(e){return{type:"AppPartCustomization",forType:"Array",format:"*",view:e,fieldId:"vars",key:"pageNavigationType",value:"pagination"}}))}})},function(e,t){e.exports={GEO:{path:["rendererModel","geo"],revertible:!1},LANGUAGE_CODE:{path:["rendererModel","languageCode"],revertible:!0},SITE_META_DATA:{path:["rendererModel","siteMetaData"],revertible:!0},SE_INDEXABLE:{path:["documentServicesModel","metaSiteData","indexable"],revertible:!0},SOCIAL_THUMBNAIL:{path:["documentServicesModel","metaSiteData","thumbnail"],revertible:!0},FAVICON:{path:["documentServicesModel","metaSiteData","favicon"],revertible:!0},SUPPRESS_COOKIES:{path:["documentServicesModel","metaSiteData","suppressTrackingCookies"],revertible:!0},META_TAGS:{path:["documentServicesModel","metaSiteData","metaTags"],revertible:!0},EXTERNAL_URI_MAPPINGS:{path:["documentServicesModel","metaSiteData","externalUriMappings"],revertible:!0},USE_ONBOARDING:{path:["documentServicesModel","metaSiteData","useOnboarding"],revertible:!0,optional:!0},ORIGINAL_TEMPLATE_ID:{path:["documentServicesModel","originalTemplateId"],revertible:!1},CUSTOM_HEAD_TAGS:{path:["documentServicesModel","customHeadTags"],revertible:!1},SEO_TITLE:{path:["documentServicesModel","metaSiteData","title"],revertible:!0},SITE_ID:{path:["rendererModel","siteInfo","siteId"],revertible:!0},META_SITE_ID:{path:["rendererModel","metaSiteId"],revertible:!0},USER_ID:{path:["rendererModel","userId"],revertible:!0},EDITOR_SESSION_ID:{path:["documentServicesModel","editorSessionId"],revertible:!1},META_SITE_DATA:{path:["documentServicesModel","metaSiteData"],revertible:!1},USER_INFO:{path:["documentServicesModel","userInfo"],revertible:!1},SITE_NAME:{path:["documentServicesModel","siteName"],revertible:!1},SITE_REVISION:{path:["documentServicesModel","revision"],revertible:!1},SITE_VERSION:{path:["documentServicesModel","version"],revertible:!1},NEVER_SAVED:{path:["documentServicesModel","neverSaved"],revertible:!1},IS_PUBLISHED:{path:["documentServicesModel","isPublished"],revertible:!1},PUBLIC_URL:{path:["documentServicesModel","publicUrl"],revertible:!1},USED_META_SITE_NAMES:{path:["documentServicesModel","usedMetaSiteNames"],revertible:!1},CLIENT_SPEC_MAP:{path:["rendererModel","clientSpecMap"],revertible:!1},APPLICATION_TYPE:{path:["rendererModel","siteInfo","applicationType"],revertible:!1},DOCUMENT_TYPE:{path:["rendererModel","siteInfo","documentType"],revertible:!1},PREMIUM_FEATURES:{path:["rendererModel","premiumFeatures"],revertible:!1},PENDING_APPS:{path:["documentServicesModel","pendingApps"],revertible:!1},PASSWORD_PROTECTED_PAGES:{path:["rendererModel","passwordProtectedPages"],revertible:!1},SESSION_PAGES_TO_HASH_PASSWORD:{path:["rendererModel","pageToHashedPassword"],revertible:!1},PERMISSIONS:{path:["documentServicesModel","permissionsInfo","permissions"],revertible:!1},IS_OWNER:{path:["documentServicesModel","permissionsInfo","isOwner"],revertible:!1},IS_HTTPS_ENABLED:{path:["documentServicesModel","isHttpsEnabled"],revertible:!1},SITE_TOKEN:{path:["documentServicesModel","permissionsInfo","siteToken"],revertible:!1,optional:!0},MEDIA_SITE_UPLOAD_TOKEN:{path:["documentServicesModel","mediaManagerInfo","siteUploadToken"],revertible:!1,optional:!0},MEDIA_USER_UPLOAD_TOKEN:{path:["documentServicesModel","mediaManagerInfo","userUploadToken"],revertible:!1,optional:!0},CURRENT_LANGUAGE_CODE:{path:["multilingual","currentLanguageCode"],revertible:!1,optional:!0},MULTILINGUAL:{path:["rendererModel","sitePropertiesInfo","multilingualInfo"],revertible:!1,optional:!0},IS_MULTILINGUAL:{path:["rendererModel","sitePropertiesInfo","multilingualInfo","isEnabled"],revertible:!1,optional:!0},ORIGINAL_LANGUAGE:{path:["rendererModel","sitePropertiesInfo","multilingualInfo","originalLanguage"],revertible:!1,optional:!0},TRANSLATION_LANGUAGES:{path:["rendererModel","sitePropertiesInfo","multilingualInfo","translationLanguages"],revertible:!1,optional:!0},CURRENCY:{path:["rendererModel","sitePropertiesInfo","currency"],revertible:!1,optional:!0},TIME_ZONE:{path:["rendererModel","sitePropertiesInfo","timeZone"],revertible:!1,optional:!0},LOCALE:{path:["rendererModel","sitePropertiesInfo","locale"],revertible:!1,optional:!0}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(42),r=t.ajaxLibrary,i={SE_ENABLE_INDEX_PARAM_IS_NOT_BOOLEN:"SE_ENABLE_INDEX_PARAM_IS_NOT_BOOLEN",TEXT_IS_NOT_STRING:"TEXT_IS_NOT_STRING",TEXT_TOO_LONG:"TEXT_TOO_LONG",TEXT_INVALID_CHARS:"TEXT_INVALID_CHARS",KEYWORDS_INVALID_CHARS:"KEYWORDS_INVALID_CHARS",METATAGS_INVALID_FORMAT:"METATAGS_INVALID_FORMAT",METATAGS_INVALID_CHARS:"METATAGS_INVALID_CHARS",METATAGS_SERVER_INVALID_CODE:"METATAGS_SERVER_INVALID_CODE",METATAGS_SERVER_INVALID_TAG:"METATAGS_SERVER_INVALID_TAG",REDIRECT_INVALID_CHARS:"REDIRECT_INVALID_CHARS",REDIRECT_URI_MAPPING_IS_NOT_OBJECT:"REDIRECT_URI_MAPPING_IS_NOT_OBJECT",REDIRECT_FROM_URIS_IS_NOT_ARRAY:"REDIRECT_FROM_URIS_IS_NOT_ARRAY",REDIRECT_MAPPING_INVALID_FORMAT:"REDIRECT_MAPPING_INVALID_FORMAT",REDIRECT_MAPPING_URIS_NOT_STRING:"REDIRECT_MAPPING_URIS_NOT_STRING",SERVER_VALIDATION_TIMEOUT:"SERVER_VALIDATION_TIMEOUT"},a={TITLE_MAX_LENGTH:70,DESCRIPTION_MAX_LENGTH:320,KEYWORDS_MAX_LENGTH:250,METATAGS_MAX_LENGTH:2e3,REDIRECT_MAX_LENGTH:149},s={HTML_CHARS:/[<>]/g,KEYWORD_CHARS:/[!#$%^&()+=\]\[}{";:\/><~]/g,META_TAG:/^\s*((((<meta|<link)\s[^>]*>*[\s\n]*)*>)|[\s\n]*(<!--[^<>]*-->)[\s\n]*)*[\s\n]*$/i,URI_CHARS:/[^.,';()%@!?$&*+~a-zA-Z0-9\[\]_:\/\"\n=-]/gi};function c(t,n){if(!e.isString(n))return{success:!1,errorCode:i.TEXT_IS_NOT_STRING};if(n.length>a.TITLE_MAX_LENGTH)return{success:!1,errorCode:i.TEXT_TOO_LONG,validLength:a.TITLE_MAX_LENGTH};var o=v(n);return o&&o.length?{success:!1,errorCode:i.TEXT_INVALID_CHARS,errorContent:o}:{success:!0}}function u(t,n){if(!e.isString(n))return{success:!1,errorCode:i.TEXT_IS_NOT_STRING};if(n.length>a.DESCRIPTION_MAX_LENGTH)return{success:!1,errorCode:i.TEXT_TOO_LONG,validLength:a.DESCRIPTION_MAX_LENGTH};var o=v(n);return o&&o.length?{success:!1,errorCode:i.TEXT_INVALID_CHARS,errorContent:o}:{success:!0}}function l(t,n){if(!e.isString(n))return{success:!1,errorCode:i.TEXT_IS_NOT_STRING};if(n.length>a.KEYWORDS_MAX_LENGTH)return{success:!1,errorCode:i.TEXT_TOO_LONG,validLength:a.KEYWORDS_MAX_LENGTH};var o,r=(o=n,e.uniq(o.match(s.KEYWORD_CHARS)));return r&&r.length?{success:!1,errorCode:i.KEYWORDS_INVALID_CHARS,errorContent:r}:{success:!0}}function p(t,n,o,r){return e.isString(n)?(e.isEmpty(n)&&o({success:!0}),n.length>a.METATAGS_MAX_LENGTH?(r({success:!1,errorCode:i.TEXT_TOO_LONG,validLength:a.METATAGS_MAX_LENGTH}),!1):(c=n,e.isEmpty(c)||!s.META_TAG.test(c)?(r({success:!1,errorCode:i.METATAGS_INVALID_FORMAT}),!1):!e.includes(n,"")||(r({success:!1,errorCode:i.METATAGS_INVALID_CHARS}),!1))):(r({success:!1,errorCode:i.TEXT_IS_NOT_STRING}),!1);var c}function d(e,t,n,o){p(0,t,n,o)&&function(e,t,n){r.ajax({type:"POST",url:"//editor.wix.com/html/head-tags/validate",contentType:"text/plain; charset=utf-8",data:e,success:g.bind(null,t,n),error:f.bind(null,n)})}(t,n,o)}function g(t,n,o){if(o.success)t({success:!0});else{var r,a=o.errorCode,s=o.errorDescription,c="";if(0===a)c=i.SERVER_VALIDATION_TIMEOUT;else{var u=s.match(/'(.*)' tags are not allowed/),l=u&&e.size(u)>=1?u[1]:"";switch(l){case"":case"#text":c=i.METATAGS_SERVER_INVALID_CODE;break;default:c=i.METATAGS_SERVER_INVALID_TAG,r=l}}n({success:!1,errorCode:c,errorContent:r})}}function f(e){e({success:!1})}function m(t,n){if(!e.isObject(n))return{success:!1,errorCode:i.REDIRECT_URI_MAPPING_IS_NOT_OBJECT};var o=null;return e.forEach(n,(function(t,n){if(e.isString(n)&&e.isString(t))if(n.length>a.REDIRECT_MAX_LENGTH)o=o||{success:!1,errorCode:i.TEXT_TOO_LONG,validLength:a.REDIRECT_MAX_LENGTH};else{var r,c=(r=n,e.uniq(r.match(s.URI_CHARS)));c&&c.length&&(o=o||{success:!1,errorCode:i.REDIRECT_INVALID_CHARS,errorContent:c})}else o=o||{success:!1,errorCode:i.REDIRECT_MAPPING_URIS_NOT_STRING}})),o||{success:!0}}function v(t){return e.uniq(t.match(s.HTML_CHARS))}function E(t,n,r){var i=o.getProperty(t,o.PROPERTY_NAMES.META_TAGS),a=e.find(i,{name:n});a||(a=function(e){return{name:e,value:"",isProperty:!1}}(n),i.push(a)),a.value=r,o.setProperty(t,o.PROPERTY_NAMES.META_TAGS,i)}return{ERRORS:i,indexing:{enable:function(t,n){if(!e.isBoolean(n))throw new Error(i.SE_ENABLE_INDEX_PARAM_IS_NOT_BOOLEN);o.setProperty(t,o.PROPERTY_NAMES.SE_INDEXABLE,n)},isEnabled:function(e){return o.getProperty(e,o.PROPERTY_NAMES.SE_INDEXABLE)}},title:{set:function(e,t){var n=c(0,t);if(!n.success)throw new Error(n.errorCode);o.setProperty(e,o.PROPERTY_NAMES.SEO_TITLE,t)},get:function(e){return o.getProperty(e,o.PROPERTY_NAMES.SEO_TITLE)},validate:c},description:{set:function(e,t){var n=u(0,t);if(!n.success)throw new Error(n.errorCode);E(e,"description",t)},get:function(t){var n=o.getProperty(t,o.PROPERTY_NAMES.META_TAGS),r=e.find(n,{name:"description"});return r&&r.value||""},validate:u},keywords:{set:function(e,t){var n=l(0,t);if(!n.success)throw new Error(n.errorCode);E(e,"keywords",t)},get:function(t){var n=o.getProperty(t,o.PROPERTY_NAMES.META_TAGS),r=e.find(n,{name:"keywords"});return r&&r.value||""},validate:l},headTags:{set:function(e,t,n,r){d(0,t,(function(){o.setProperty(e,o.PROPERTY_NAMES.CUSTOM_HEAD_TAGS,t),n()}),(function(e){r(e.errorCode)}))},get:function(e){return o.getProperty(e,o.PROPERTY_NAMES.CUSTOM_HEAD_TAGS)},validate:d,clientSideValidation:function(e,t,n,o){return p(e,t,n,o)}},redirectUrls:{update:function(t,n){var r=m(0,n);if(!r.success)throw new Error(r.errorCode);var i=o.getProperty(t,o.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS),a={};e.forEach(i,(function(e){var t=e.fromExternalUri,n=e.toWixUri;a[t]=n}));var s=e.mergeWith(a,n,(function(t,n){return e.isEmpty(n)?t:n})),c=e.map(s,(function(e,t){return{fromExternalUri:t,toWixUri:e}}));o.setProperty(t,o.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS,c)},remove:function(t,n){if(!e.isArray(n))throw new Error(i.REDIRECT_FROM_URIS_IS_NOT_ARRAY);var r=o.getProperty(t,o.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS),a=e.filter(r,(function(t){var o=t.fromExternalUri;return!e.includes(n,o)}));return o.setProperty(t,o.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS,a),!0},get:function(t){var n=o.getProperty(t,o.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS),r={};return e.forEach(n,(function(e){r[e.fromExternalUri]=e.toWixUri})),r},validate:m}}}()},function(e,t,n){function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i,a,s,c,u,l;e.exports=(i=n(0),a=function(e){return e[1]-e[0]+1},c=function(e,t){var n=o(t,2),r=n[0],i=n[1];return e>=r&&e<=i},u=function(e,t){return e<o(t,1)[0]},l=function(e){return o(e,2)[1]},{swapGroups:function(e,t,n){var o=t[0],i=t[1],a=n[0],s=n[1];return[].concat(r(e.slice(0,o)),r(e.slice(a,s+1)),r(e.slice(i+1,a)),r(e.slice(o,i+1)),r(e.slice(s+1)))},moveGroupToIndex:s=function(e,t,n){var o=i.clone(e);return o.splice.apply(o,[n,0].concat(r(o.splice(t[0],a(t))))),o},moveGroupToEndOfArray:function(e,t){return s(e,t,e.length-a(t))},moveGroupToStartOfArray:function(e,t){return s(e,t,0)},findNearestValidIndex:function(e,t,n){n=i.isEmpty(n)?[[0,e.length-1]]:n;var r,a=i.sortBy(n,(function(e){return o(e,1)[0]}));for(r=0;r<a.length;r++){var s=a[r];if(c(t,s))return t;if(u(t,s)){if(0===r)return o(s,1)[0];var p=a[r-1];return l(p)}}return l(i.last(a))},findNext:function(e,t,n){return i.findIndex(e,t,n+1)},findPrev:function(e,t,n){var o=n-1;return-1===o?o:i.findLastIndex(e,t,o)}})},function(e,t,n){var o,r,i,a;e.exports=(o=n(1),r=n(8),i=function(e,t){var n=e.pointers.getInnerPointer(t,"layout.fixedPosition");return!!e.dal.get(n)},{isCompArrangeable:a=function(e,t){if(e.pointers.components.isPage(t))return!1;if(function(e,t){return"platform.components.AppController"===r.getComponentType(e,t)}(e,t))return!1;var n=e.pointers.components.getParent(t),i=o.displayedOnlyStructureUtil.isRepeatedComponent(t.id),a=n&&o.displayedOnlyStructureUtil.isRepeatedComponent(n.id);return!(o.displayedOnlyStructureUtil.isRefPointer(t)||i&&!a)},canSwapComponents:function(e,t,n){return a(e,n)&&i(e,t)===i(e,n)}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A,T,_,O,C,D,w,M,b,R,N,x,L,B,F,k,U,H,V,G,W,Y,z,K,j,q,Q,X,Z,J,$,ee,te,ne,oe,re,ie,ae,se,ce,ue,le,pe,de,ge,fe,me,ve,Ee,ye,Ie,Se,he,Pe,Ae,Te,_e,Oe,Ce,De,we,Me,be,Re,Ne,xe,Le,Be,Fe,ke,Ue,He,Ve,Ge,We,Ye,ze,Ke,je,qe,Qe,Xe,Ze,Je,$e,et,tt,nt,ot,rt,it,at,st,ct,ut,lt,pt,dt,gt,ft,mt,vt,Et,yt,It,St;e.exports=(o=n(0),r=n(5),i=n(266),a=n(267),s=n(269),c=n(270),u=n(271),l=n(272),p=n(273),d=n(274),g=n(275),f=n(276),m=n(277),v=n(278),E=n(279),y=n(280),I=n(281),S=n(282),h=n(283),P=n(284),A=n(285),T=n(286),_=n(287),O=n(288),C=n(289),D=n(290),w=n(291),M=n(292),b=n(293),R=n(294),N=n(295),x=n(296),L=n(297),B=n(298),F=n(299),k=n(300),U=n(301),H=n(302),V=n(303),G=n(304),W=n(305),Y=n(306),z=n(307),K=n(308),j=n(309),q=n(310),Q=n(158),X=n(311),Z=n(312),J=n(313),$=n(314),ee=n(315),te=n(316),ne=n(317),oe=n(318),re=n(319),ie=n(320),ae=n(321),se=n(322),ce=n(324),ue=n(325),le=n(326),pe=n(327),de=n(328),ge=n(161),fe=n(329),me=n(330),ve=n(331),Ee=n(332),ye=n(333),Ie=n(334),Se=n(335),he=n(336),Pe=n(337),Ae=n(338),Te=n(339),_e=n(340),Oe=n(341),Ce=n(342),De=n(343),we=n(344),Me=n(345),be=n(346),Re=n(347),Ne=n(348),xe=n(349),Le=n(350),Be=n(351),Fe=n(352),ke=n(353),Ue=n(354),He=n(355),Ve=n(356),Ge=n(357),We=n(358),Ye=n(359),ze=n(360),Ke=n(361),je=n(362),qe=n(363),Qe=n(364),Xe=n(365),Ze=n(366),Je=n(367),$e=n(368),et=n(369),tt=n(370),nt=n(371),ot=n(372),rt=n(373),it=n(374),at=n(375),st=n(376),ct=n(377),ut=n(378),lt=n(379),pt=n(380),dt=n(381),gt=n(382),ft=n(383),mt=n(384),vt=n(164),Et=n(385),yt=n(386),It=n(387),St=n(388),o.defaults({"wysiwyg.viewer.components.HeaderContainer":m,"wysiwyg.viewer.components.EbayItemsBySeller":i,"wysiwyg.viewer.components.FooterContainer":v,"wysiwyg.viewer.components.AdminLoginButton":s,"wysiwyg.viewer.components.LoginButton":S,"wysiwyg.viewer.components.BgImageStrip":c,"wysiwyg.viewer.components.ContactForm":u,"wysiwyg.viewer.components.DynamicContactForm":u,"wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox":l,"wysiwyg.viewer.components.WFacebookLike":p,"wysiwyg.viewer.components.FacebookShare":d,"wysiwyg.viewer.components.FiveGridLine":g,"wysiwyg.viewer.components.FlickrBadgeWidget":f,"wysiwyg.common.components.imagebutton.viewer.ImageButton":E,"wysiwyg.viewer.components.ItunesButton":y,"wysiwyg.viewer.components.LinkBar":I,"wysiwyg.viewer.components.LoginSocialBar":h,"wysiwyg.common.components.onlineclock.viewer.OnlineClock":P,"wysiwyg.viewer.components.PageGroup":A,"mobile.core.components.Page":T,"wysiwyg.viewer.components.Group":_,"wysiwyg.viewer.components.FlashComponent":O,"wysiwyg.viewer.components.PagesContainer":C,"wysiwyg.viewer.components.PayPalButton":D,"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":w,"wysiwyg.viewer.components.PinterestFollow":M,"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":b,"wysiwyg.common.components.rssbutton.viewer.RSSButton":R,"wysiwyg.viewer.components.ScreenWidthContainer":N,"wysiwyg.viewer.components.StripContainer":x,"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":L,"wysiwyg.viewer.components.SiteButton":B,"wysiwyg.viewer.components.SiteSegmentContainer":F,"wysiwyg.viewer.components.SiteRegionContainer":k,"wysiwyg.viewer.components.WSiteStructure":U,"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":H,"wysiwyg.viewer.components.SlideShowGallery":V,"tpa.viewer.components.Thumbnails":G,"tpa.viewer.components.Accordion":W,"wysiwyg.viewer.components.HtmlComponent":Y,"wysiwyg.viewer.components.GoogleMap":z,"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":K,"wysiwyg.common.components.subscribeform.viewer.SubscribeForm":j,"wysiwyg.viewer.components.svgshape.SvgShape":q,"wysiwyg.viewer.components.VectorImage":Q,"wysiwyg.viewer.components.mobile.TinyMenu":X,"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton":Z,"wysiwyg.viewer.components.BackToTopButton":J,"wysiwyg.viewer.components.VerticalLine":$,"wysiwyg.viewer.components.VKShareButton":ee,"wysiwyg.common.components.weather.viewer.Weather":te,"wysiwyg.viewer.components.WFacebookComment":ne,"wysiwyg.common.components.disquscomments.viewer.DisqusComments":oe,"wysiwyg.viewer.components.WGooglePlusOne":ae,"wysiwyg.viewer.components.WPhoto":se,"wysiwyg.viewer.components.ClipArt":ke,"wysiwyg.viewer.components.WTwitterFollow":ce,"wysiwyg.viewer.components.WTwitterTweet":ue,"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":le,"wysiwyg.viewer.components.tpapps.TPAWidget":pe,"tpa.viewer.components.tpapps.TPAWidget":pe,"wysiwyg.viewer.components.tpapps.TPASection":ge,"wysiwyg.viewer.components.tpapps.TPAGluedWidget":de,"tpa.viewer.components.tpapps.TPAGluedWidget":de,"wysiwyg.viewer.components.tpapps.TPAMultiSection":ge,"wixapps.integration.components.AppPage":fe,"wixapps.integration.components.AppPart":me,"wixapps.integration.components.AppPart2":ve,"wysiwyg.common.components.anchor.viewer.Anchor":Ee,"tpa.viewer.components.StripSlideshow":Se,"tpa.viewer.components.StripShowcase":he,"tpa.viewer.components.Collage":Pe,"tpa.viewer.components.Masonry":ye,"tpa.viewer.components.Freestyle":Ie,"wysiwyg.viewer.components.tpapps.TPA3DCarousel":Ae,"wysiwyg.viewer.components.Video":Te,"wysiwyg.viewer.components.MatrixGallery":_e,"wysiwyg.viewer.components.documentmedia.DocumentMedia":Oe,"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":Ce,"wysiwyg.viewer.components.SoundCloudWidget":De,"wysiwyg.viewer.components.WRichText":we,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":Me,"wysiwyg.viewer.components.ExpandableMenu":be,"wysiwyg.viewer.components.menus.DropDownMenu":Re,"wysiwyg.viewer.components.SliderGallery":Ne,"wysiwyg.viewer.components.PaginatedGridGallery":xe,"mobile.core.components.Container":Le,"wysiwyg.viewer.components.PopupContainer":Be,"wysiwyg.viewer.components.PopupCloseTextButton":B,"wysiwyg.viewer.components.AudioPlayer":Fe,"wysiwyg.viewer.components.BoxSlideShowSlide":Ue,"wysiwyg.viewer.components.BoxSlideShow":He,"wysiwyg.viewer.components.StateBoxState":Ve,"wysiwyg.viewer.components.StateBoxFormState":Ge,"wysiwyg.viewer.components.StateBox":We,"wysiwyg.viewer.components.StateStripState":Ye,"wysiwyg.viewer.components.StateStrip":ze,"wysiwyg.viewer.components.StripContainerSlideShowSlide":Ke,"wysiwyg.viewer.components.QuickActionBar":je,"wysiwyg.viewer.components.QuickActionBarItem":qe,"wysiwyg.viewer.components.StripContainerSlideShow":Qe,"wysiwyg.viewer.components.StripColumnsContainer":Xe,"wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu":a,"wysiwyg.viewer.components.inputs.TextInput":Ze,"wysiwyg.viewer.components.inputs.TextAreaInput":Je,"wysiwyg.viewer.components.inputs.FileUploader":$e,"wysiwyg.viewer.components.inputs.ComboBoxInput":Ze,"wysiwyg.viewer.components.inputs.Checkbox":et,"wysiwyg.viewer.components.inputs.DatePicker":tt,"wysiwyg.viewer.components.Column":nt,"wysiwyg.viewer.components.MediaControls":rt,"wysiwyg.viewer.components.MediaOverlayControls":it,"wysiwyg.viewer.components.MediaPlayer":ot,"platform.components.AppController":at,"wysiwyg.viewer.components.ImageButtonWithText":st,"wysiwyg.viewer.components.inputs.RadioButton":Ze,"wysiwyg.viewer.components.HoverBox":ct,"wysiwyg.viewer.components.Popover":ut,"wysiwyg.viewer.components.inputs.RadioGroup":re,"wysiwyg.viewer.components.Repeater":lt,"wysiwyg.viewer.components.MediaContainer":pt,"wysiwyg.viewer.components.Grid":dt,"wysiwyg.viewer.components.LanguageSelector":gt,"wysiwyg.viewer.components.FormContainer":ft,"wysiwyg.viewer.components.inputs.CheckboxGroup":ie,"wysiwyg.viewer.components.InlinePopupToggle":vt,"wysiwyg.viewer.components.MenuToggle":Et,"wysiwyg.viewer.components.MenuContainer":yt,"platform.components.AppWidget":mt,"responsive.components.Section":It},r.isOpen("registerComponentsDynamically")?{}:St))},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(9),i=n(2),a=n(159),{mobileConversionConfig:{category:"graphic",isSuitableForProportionGrouping:!0},rotatable:!0,flippable:!0,resizableSides:function(e,t){return r.isMaintainSvgAspectRatio(e,t)?[]:[i.RESIZE_SIDES.TOP,i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.BOTTOM,i.RESIZE_SIDES.RIGHT]},layoutLimits:function(e,t){var n=r.isMaintainSvgAspectRatio(e,t)?a.getOriginalAspectRatio(e,t):null,i=function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"styleId")),r=e.pointers.components.getPageOfComponent(t).id,i=e.dal.get(e.pointers.data.getThemeItem(n,r)),s=parseInt(o.get(i,["style","properties","strokewidth"],0),10),c=Math.max(s+1,5),u=Math.max(s+1,5),l=a.getOriginalAspectRatio(e,t);return l&&(l>1?c=(u=s+1)*l:u=(c=s+1)/l),{minWidth:Math.ceil(c),minHeight:Math.ceil(u)}}(e,t);return{aspectRatio:n||void 0,minWidth:i.minWidth,minHeight:i.minHeight,maxHeight:2e3}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(88),o=n(1),r=t.requestsUtil,i=t.svgUtils,a=i.SVG_STORES,s=i.EMPTY_SHAPE,c=i.svgIdToUrl,u=o.svg.svgStringToStoreData,l={method:"GET",headers:{"content-type":"text/plain"},mode:"cors"};function p(t,n,o){var r=t.pointers.svgShapes.getSvgShapePointer(n),i=t.pointers.getInnerPointer(r,a.CONTENT),s=t.dal.get(i);return e.isFunction(o)&&o(s),s}return{cacheSvgString:function(e,t){!function(e,t,n){var o=p(e,t);o?n(o):function(e,t,n){var o=function(e,t){var n=e.pointers.general.getServiceTopology(),o=e.pointers.getInnerPointer(n,"mediaRootUrl"),r=e.dal.get(o);return c(r,t,{rendererModel:e.siteDataAPI.siteData.rendererModel})}(e,t);r.fetch(o,l).then((function(e){return e.text()})).then((function(o){!function(e,t,n){var o=e.pointers.svgShapes.getSvgShapePointer(t),r=u(n||s);e.dal.set(o,r)}(e,t,o),n(o)}))}(e,t,n)}(e,t,(function(){e.setOperationsQueue.asyncPreDataManipulationComplete()}))},getSvgFromCache:p,getSvgInfoFromCache:function(e,t){var n=e.pointers.svgShapes.getSvgShapePointer(t),o=e.pointers.getInnerPointer(n,a.INFO);return e.dal.get(o)},getOriginalAspectRatio:function(t,n){var o=t.dal.get(n),r=t.pointers.components.getPageOfComponent(n),i=t.pointers.data.getDataItem(o.dataQuery.replace("#",""),r.id),s=t.dal.get(i),c=e.get(s,["svgId"]),u=t.pointers.svgShapes.getSvgShapePointer(c),l=t.pointers.getInnerPointer(u,a.BOX_BOUNDARIES),p=t.dal.get(l);return e.isEmpty(p)?0:p.width/p.height}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),o={"142bb34d-3439-576a-7118-683e690a1e0d":"gallery","14517f3f-ffc5-eced-f592-980aaa0bbb5c":"wixChat"};function r(t,n){if(!e.has(n,"applicationId")||!e.has(n,"widgetId"))return{};var o=t.pointers.general.getClientSpecMap(),r=t.dal.get(o);return e.get(r,[n.applicationId,"widgets",n.widgetId])||{}}return{isRepeatable:!1,getWidgetData:r,nickname:function(n,i){var a=r(n,t.getDataItem(n,i)),s="",c=e.get(a,"widgetId");return s=o.hasOwnProperty(c)?o[c]:e.camelCase(a.tpaWidgetId),s}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),o=n(9);function r(t,n){if(!e.has(n,"applicationId"))return{};var o=t.pointers.general.getClientSpecMap(),r=t.dal.get(o),i=e.get(r,n.applicationId);return e.get(i,["widgets",n.widgetId])}function i(e,t,n){var o=e.dataQuery.replace("#",""),r=t.pointers.data.getDataItem(o,n);return t.dal.get(r)}return{isRepeatable:!1,mobileConversionConfig:{convertFixedPositionToAbsolute:!0,stretchHorizontally:function(t,n,o){var a=r(t,i(n,t,o));return!0===e.get(a,"shouldBeStretchedByDefaultMobile")},minHeight:function(t,n,o){var a=r(t,i(n,t,o));return e.get(a,"componentFields.minHeightInMobile")}},removable:!1,duplicatable:!1,crossSiteDuplicatable:!1,containable:!1,canBeFixedPosition:!1,canBeStretched:function(n,o){var i=r(n,t.getDataItem(n,o));return!0===e.get(i,"canBeStretched")},getWidgetData:r,nickname:function(n,i){var a=r(n,t.getDataItem(n,i));if(a){var s=e.get(a,"appPage.id");return e.camelCase(s)}return o.getComponentNickname(n,i)}}}()},function(e,t,n){e.exports=function(){var e=n(0);function t(e,t){return e.siteAPI.getWixappsPackageDescriptor(t)}function o(n,o,r){var i=t(n,o),a=e.get(i,"parts");return e.find(a,{id:r})}return{getDescriptor:t,getPackageName:function(e,t){var n=e.pointers.general.getClientSpecMap(),o=e.pointers.getInnerPointer(n,[t,"packageName"]);return e.dal.get(o)},getAppPartRole:function(t,n,r){var i=o(t,n,r);return e.get(i,"role")},getAppPartDefinition:o}}()},function(e,t,n){var o;e.exports=(o=n(24),{wasPartLoadedSuccessfully:function(e,t){var n=e.dal.getByPath(o.getAppPart2MetadataPath(t));return n&&!1===n.loading&&!n.error},wasRepoLoadedSuccessfully:function(e){var t=e.dal.getByPath(o.getAppbuilderMetadataPath());return t&&!1===t.loading&&!t.error}})},function(e,t){e.exports={layoutLimits:{minWidth:26,minHeight:26}}},function(e,t){e.exports={MINIMAL_CHILDREN_NUMBER:"minimalChildrenNumber",MAXIMUM_CHILDREN_NUMBER:"maximumChildrenNumber",ANCHORS:"anchors",CONTAINABLE:"containable",CONTAINABLE_BY_STRUCTURE:"containableByStructure",CAN_CONTAIN:"canContain",CAN_CONTAIN_BY_STRUCTURE:"canContainByStructure",CAN_REPARENT:"canReparent",SHOULD_KEEP_CHILDREN_IN_PLACE:"shouldKeepChildrenInPlace",IS_REPEATER:"isRepeater",IS_REPEATABLE:"isRepeatable",IS_CONTAIN_CHECK_RECURSIVE:"isContainCheckRecursive",IS_EXTERNAL:"isExternal",GROUPABLE:"groupable",ENFORCE_CONTAINER_CHILD_LIMITS_BY_WIDTH:"enforceContainerChildLimitsByWidth",ENFORCE_CONTAINER_CHILD_LIMITS_BY_HEIGHT:"enforceContainerChildLimitsByHeight",CONTAINER:"container",MOVE_DIRECTIONS:"moveDirections",RESIZABLE_SIDES:"resizableSides",ROTATABLE:"rotatable",FLIPPABLE:"flippable",FIXED_POSITION:"canBeFixedPosition",MODAL:"modal",MOBILE_ONLY:"mobileOnly",CAN_BE_STRETCHED:"canBeStretched",REMOVABLE:"removable",DUPLICATABLE:"duplicatable",CROSS_SITE_DUPLICATABLE:"crossSiteDuplicatable",HIDDENABLE:"hiddenable",COLLAPSIBLE:"collapsible",DOCKABLE:"dockable",LAYOUT_LIMITS:"layoutLimits",FULL_WIDTH:"fullWidth",FULL_WIDTH_BY_STRUCTURE:"fullWidthByStructure",STYLE_CAN_BE_APPLIED:"styleCanBeApplied",NICKNAME:"nickname",ALIGNABLE:"alignable",DISABLEABLE:"disableable",RESIZE_ONLY_PROPORTIONALLY:"resizeOnlyProportionally",ENFORCE_RESIZABLE_CORNERS:"enforceResizableCorners",IS_PROPORTIONALLY_RESIZABLE:"isProportionallyResizable",IGNORE_CHILDREN_ON_PROPORTINAL_RESIZE:"ignoreChildrenOnProportionalResize",ENFORCE_MAX_DIM_ON_PROPORTIONAL_RESIZE:"enforceMaxDimensionsOnProportionalResize",USING_LEGACY_APP_PART_SCHEMA:"usingLegacyAppPartSchema",DEFAULT_MOBILE_PROPERTIES:"defaultMobileProperties",VISIBLE:"isVisible",MOBILE_CONVERSION_CONFIG:"mobileConversionConfig",SHOULD_GENERATE_NICKNAME:"shouldGenerateNickname",FORCE_MAINTAIN_IDS_ON_SERIALIZE:"forceMaintainIDsOnSerialize",HEIGHT_AUTO:"heightAuto",WIDTH_AUTO:"widthAuto"}},function(e,t){e.exports=I},function(e,t,n){var o;e.exports=(o=n(1),{getStyleIdToAdd:function(e,t,n,r,i){return i||o.guidUtils.getUniqueId("style","-")}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(25),o=n(169),r=n(44),i=(n(2),n(399)),a=n(3),s=n(14),c=n(117),u=n(170),l=n(27),p=n(20),d=n(1),g={"wysiwyg.viewer.components.HeaderContainer":!0,"wysiwyg.viewer.components.FooterContainer":!0,"wysiwyg.viewer.components.mobile.TinyMenu":!0,"wysiwyg.viewer.components.MenuToggle":!0};function f(e,t,n){var o=e.pointers.getInnerPointer(t,["layout",n]);return e.dal.get(o)||0}function m(t,n){return t.pointers.components.isPage(n)?{x:0,y:0}:e.pick(r.getPositionAndSize(t,n),["x","y"])}function v(e,t){return{x:e.x+t.x,y:e.y+t.y}}function E(e,t){var n=e.pointers.getInnerPointer(t,["layout","fixedPosition"]);return e.dal.get(n)}function y(e,n){if(!E(e,n))return!1;var o=e.pointers.general.getRenderFlag("renderFixedPositionContainers");if(e.dal.get(o))return!0;var r=t.getType(e,n);return!g[r]}function I(e,t){if(y(e,t))return function(e,t){var n=m(e,t);return"MOBILE"===s.getViewMode(e)?n:(n.x-=C(e),n)}(e,t);var n=e.pointers.components.getParent(t),o=m(e,t);return n?v(o,I(e,n)):e.pointers.components.isInMasterPage(t)?o:v(o,function(e,t,n){var o=e.pointers.components.getPagesContainer(t);return{x:f(e,o,"x"),y:l.isPopup(e,n)?0:f(e,o,"y")}}(e,e.pointers.components.getViewMode(t),t.id))}function S(t,n){var o=I(t,n),i=t.dal.get(t.pointers.getInnerPointer(n,"layout")),a=r.getPositionAndSize(t,n,i);i=e.defaults(i,a);var s=e.assign(i,o);return s.bounding=r.getBoundingLayout(t,s),s}function h(t,n,r){var i,s,c,u,l=t.pointers.getInnerPointer(n,"layout"),p=t.dal.get(l),d=t.siteAPI.getScreenSize(),g=t.siteAPI.getSiteMeasureMap(),f=function(e,t){var n=e.pointers.getInnerPointer(t,"layout");return{data:a.getDataItem(e,t),props:a.getPropertiesItem(e,t),layout:e.dal.get(n)}}(t,n),m=o.getFixedComponentMeasurements(r,f,d,g.siteMarginBottom);return i=m,s=d.width,c=d.height,u=g.siteMarginBottom,m={y:e.isNumber(i.top)?i.top:c-i.height-u,x:e.isNumber(i.left)?i.left:s-i.width},e.assign(p,m)}function P(n,s,c){var l,g=t.getType(n,s),f=o.getMeasuringByType(g);if(f)l=h(n,s,f);else if(l=S(n,s),d.displayedOnlyStructureUtil.isRefPointer(s)&&(l=function(t,n,o){var r={},i=t.siteAPI.getSiteMeasureMap();return r.y=i.absoluteTop[n.id],r.height=i.height[n.id],r.width=i.width[n.id],e.defaults(r,o)}(n,s,l)),l.x=function(e,t,n,o){return!_(e,t)||e.siteAPI.isMobileView()?n.x+C(e):A(e,t,o)}(n,s,l,c),!c){var m=n.siteAPI.getSiteMeasureMap(),v=e.get(m,["relativeToScreenOverrides",s.id]);v&&e.assign(l,v);var E=i.getPlugin(n,s);if(E){var y=a.getPropertiesItem(n,s),I=p.skin.getComponentSkinExports(n,s);e.assign(l,E(n.siteAPI,l,y,s,I))}}return function(e,t,n){var o=u.getTotalScrolls(e,t),r=o.x,i=o.y;n.x-=r,n.y-=i}(n,s,l),l.bounding=r.getBoundingLayout(n,l),l}var A=function t(n,o,r){if(!o)return 0;var i=n.siteAPI.getSiteMeasureMap(),a=e.get(i,["relativeToScreenOverrides",o.id,"x"]);return e.isNumber(a)?a:m(n,o).x+t(n,n.pointers.components.getParent(o),r)};function T(e,t){return r.isHorizontallyDocked(e.dal.get(e.pointers.getInnerPointer(t,["layout"])))}var _=function e(t,n){return!!n&&(T(t,n)&&!y(t,n)||e(t,t.pointers.components.getParent(n)))};function O(e,t){var n=t;do{if(!(n=e.pointers.components.getParent(n)))return!1}while(!y(e,n));return!0}function C(e){var t=e.siteAPI.getSiteWidth(),n=e.siteAPI.getSiteMeasureMap();return n.clientWidth>t?.5*(n.clientWidth-t):0}function D(e,t){return y(e,t)||O(e,t)}return{getCompLayoutRelativeToStructure:S,getCompLayoutRelativeToScreen:P,getCompLayoutRelativeToScreenConsideringScroll:function(e,t,n){var o=P(e,t,n);if(!D(e,t)){var r=c.getScroll(e).y;o.y-=r,o.bounding.y-=r}return o},isRenderedInFixedPosition:y,isShowOnFixedPosition:D,isFixedPosition:E,isAncestorRenderedInFixedPosition:O,getClosestAncestorRenderedInFixedPosition:function(e,t){var n=t;do{if(!(n=e.pointers.components.getParent(n)))return!1}while(!y(e,n));return n},isHorizontallyDocked:T,getSiteX:C}}()},function(e,t,n){var o,r;e.exports=(o=n(0),r={},{getFixedComponentMeasurements:function(e,t,n,o){var r,i=t.layout;return e?{top:(r=e(t,n.width,n.height,o||0)).top,left:r.left,height:i.height,width:i.width}:null},setMeasuringForType:function(e,t){o.isArray(e)||(e=[e]),o.forEach(e,(function(e){r[e]=t}))},getMeasuringByType:function(e){return r[e]}})},function(e,t){e.exports={scroll:function(e,t,n,o,r){return e.siteAPI.scroll(t.id,n,o,r)},scrollBy:function(e,t,n,o,r){return e.siteAPI.scrollBy(t.id,n,o,r)},getTotalScrolls:function(e,t){return e.siteAPI.getTotalScroll(t.id)}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(21),o=n(27),r=n(10),i=n(172),a=n(118),s=n(2),c=n(8),u=n(410),l=n(15),p=n(1),d=n(12),g=n(19),f=n(17),m=g.services.schemasService,v={COMPONENT_DOES_NOT_EXIST:"component param does not exist",COMPONENT_DOES_NOT_HAVE_TYPE:"component does not have type",INVALID_COMPONENT_STRUCTURE:"invalid component structure",INVALID_CONTAINER_STRUCTURE:"invalid container structure",INVALID_CONTAINER_POINTER:"invalid container pointer",MAXIMUM_CHILDREN_NUMBER_REACHED:"maximum number of child components reached",CANNOT_ADD_COMPONENT_TO_MOBILE_PATH:"cannot add component to mobile path",CANNOT_DELETE_MASTER_PAGE:"cannot delete master page",SITE_MUST_HAVE_AT_LEAST_ONE_PAGE:"site must have at least one page",CANNOT_DELETE_MOBILE_COMPONENT:"cannot delete mobile component",CUSTOM_ID_MUST_BE_STRING:"customId must be a string",COMPONENT_IS_NOT_CONTAINER:"component is not a container",LAYOUT_PARAM_IS_INVALID:"layout param is invalid",LAYOUT_PARAM_IS_NOT_ALLOWED:"layout param is not allowed",LAYOUT_PARAM_MUST_BE_NUMERIC:"layout param must be numeric",LAYOUT_PARAM_MUST_BE_BOOLEAN:"layout param must be boolean",LAYOUT_PARAM_ROTATATION_INVALID_RANGE:"rotationInDegrees must be a valid range (0-360)",LAYOUT_PARAM_CANNOT_BE_NEGATIVE:"layout param cannot be a negative value",CANNOT_DELETE_HEADER_COMPONENT:"cannot delete a header component",CANNOT_DELETE_FOOTER_COMPONENT:"cannot delete a footer component",CANNOT_DELETE_NON_EXISTING_COMPONENT:"cannot delete a non existing component",CANNOT_DELETE_NON_DISPLAYED_COMPONENT:"cannot delete a non displayed component",SKIN_PARAM_MUST_BE_STRING:"skin name param must be a string",CANNOT_SET_BOTH_SKIN_AND_STYLE:"skin cannot be set if style already exists",STYLE_ID_PARAM_MUST_BE_STRING:"style id param must be a string",STYLE_ID_PARAM_DOES_NOT_EXIST:"style id param does not exist and cannot be set",STYLE_ID_PARAM_ALREADY_EXISTS:"style id param already exists and cannot be overridden with custom style",STYLE_PROPERTIES_PARAM_MUST_BE_OBJECT:"style properties param must be an object",COMPONENT_IS_DEPRECATED:"cannot add because component was deprecated",INVALID_COMPONENT_CONNECTION_ROLE:"invalid connection role - cannot be *"},E=["wysiwyg.viewer.components.mobile.TinyMenu","wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton","wysiwyg.viewer.components.BackToTopButton","wysiwyg.viewer.components.mobile.ExitMobileModeButton","wysiwyg.viewer.components.QuickActionBar","wysiwyg.viewer.components.QuickActionBarItem","wysiwyg.viewer.components.MenuToggle","wysiwyg.viewer.components.MenuContainer","wysiwyg.viewer.components.ExpandableMenu"],y=["x","y","width","height","scale","rotationInDegrees","fixedPosition","docked","aspectRatio"];function I(e,t,n){return!(!e.dal.isExist(n)&&!e.dal.full.isExist(n))&&!!c.public.isContainableByStructure(e,t,n)}function S(e,t){var n=null;if(e&&t){var o=e.pointers.getInnerPointer(t,"styleId");n=e.dal.get(o)}return n}function h(e,n){if(function(e){return"masterPage"===e.id}(n))return T(v.CANNOT_DELETE_MASTER_PAGE),{success:!1,error:v.CANNOT_DELETE_MASTER_PAGE};var r=l.getComponentType(e,n),i=e.dal.get(e.pointers.getInnerPointer(n,"type"))||e.dal.full.get(e.pointers.getInnerPointer(n,"type"));return r?function(e){return"Page"===e}(i)?o.isPopup(e,n.id)?{success:!0}:function(e){return 1===t.getNumberOfPages(e)}(e)?(T(v.SITE_MUST_HAVE_AT_LEAST_ONE_PAGE,{componentPointer:n}),{success:!1,error:v.SITE_MUST_HAVE_AT_LEAST_ONE_PAGE}):{success:!0}:function(e){return!!e&&e===s.COMP_TYPES.HEADER}(r)?(T(v.CANNOT_DELETE_HEADER_COMPONENT,{componentPointer:n,compType:r}),{success:!1,error:v.CANNOT_DELETE_HEADER_COMPONENT}):r===s.COMP_TYPES.FOOTER?(T(v.CANNOT_DELETE_FOOTER_COMPONENT,{componentPointer:n,compType:r}),{success:!1,error:v.CANNOT_DELETE_FOOTER_COMPONENT}):{success:!0}:(T(v.COMPONENT_DOES_NOT_HAVE_TYPE,{componentPointer:n}),{success:!1,error:v.COMPONENT_DOES_NOT_HAVE_TYPE})}function P(t){return function(t){return e.isObject(t)&&t.componentType&&!!m.getDefinition(t.componentType)}(t)&&function(e){return!!e.skin||!!e.style}(t)&&A(t.componentType,t.data)&&function(e){var t=e.componentType,n=e.props;try{return i.validateProperties(t,n),!0}catch(e){return!1}}(t)&&function(e){try{return a.validateMobileHintsBySchema(e.mobileHints),!0}catch(e){return!1}}(t)}function A(t,n){var o=m.getDefinition(t);if(e.isObject(n)&&!n.type)return!1;var r=e.get(n,"type",n||""),i=o.dataTypes||[""];return"RepeatedData"===r?function(t,n){return A(t,n.original)&&e.every(n.overrides,e.partial(A,t))}(t,n):e.includes(i,r)}function T(e,t){d.integrations.ravenUtils.breadcrumb(e,t)}return{validateComponentToSet:function(t,n,o,r,i,a){return e.isNil(r)||(s=r,e.isString(s))?function(t,n){if(!P(n))return!1;return!function(t){return e.some(t,(function(e){return!P(e)}))}(function(t,n){var o=[];if(n.children&&!e.isEmpty(n.children))return n.children;n.components&&!e.isEmpty(n.components)&&(o=o.concat(n.components));return o.concat(f.getChildComponent(t,n))}(t,n))}(t,o)?a||i&&I(t,o,i)?{success:!0}:(T(v.INVALID_CONTAINER_POINTER,{id:o.id,componentType:o.componentType}),{success:!1,error:v.INVALID_CONTAINER_POINTER}):(T(v.INVALID_COMPONENT_STRUCTURE,{id:o.id,componentType:o.componentType}),{success:!1,error:v.INVALID_COMPONENT_STRUCTURE}):(T(v.CUSTOM_ID_MUST_BE_STRING,{id:o.id,componentType:o.componentType}),{success:!1,error:v.CUSTOM_ID_MUST_BE_STRING});var s},validateComponentToAdd:function(t,n,o,r,i){if(u.isComponentDeprecated(o.componentType))return T(u.getDeprecationMessage(o.componentType),{id:o.id,componentType:o.componentType}),{success:!1,error:u.getDeprecationMessage(o.componentType)};if(u.shouldWarnForDeprecation(o.componentType)){if(t.runtimeConfig.shouldThrowOnDeprecation)return T(u.getDeprecationMessage(o.componentType),{id:o.id,componentType:o.componentType}),{success:!1,error:u.getDeprecationMessage(o.componentType)};p.log.warnDeprecation(u.getDeprecationMessage(o.componentType))}return t.pointers.components.isMobile(n)&&!e.includes(E,o.componentType)?(T(v.CANNOT_ADD_COMPONENT_TO_MOBILE_PATH,{id:o.id,componentType:o.componentType}),{success:!1,error:v.CANNOT_ADD_COMPONENT_TO_MOBILE_PATH}):I(t,o,r)&&function(t,n,o){if(!e.isNumber(o))return!0;var r=t.pointers.components.getChildren(n);if(!e.isFinite(o)||o<0||o>r.length)return!1;return!0}(t,r,i)?function(e,t){return c.public.allowedToContainMoreChildren(e,t)}(t,r)?{success:!0}:(T(v.MAXIMUM_CHILDREN_NUMBER_REACHED,{id:o.id,componentType:o.componentType}),{success:!1,error:v.MAXIMUM_CHILDREN_NUMBER_REACHED}):(T(v.INVALID_CONTAINER_POINTER,{id:o.id,componentType:o.componentType}),{success:!1,error:v.INVALID_CONTAINER_POINTER})},validateComponentTypeToDelete:h,validateComponentToDelete:function(e,t,n){var o=h(e,t);return o.success?function(e,t,n){return n||e.dal.isExist(t)?{success:!0}:e.dal.full.isExist(t)?(T(v.CANNOT_DELETE_NON_DISPLAYED_COMPONENT,{componentPointer:t}),{success:!1,error:v.CANNOT_DELETE_NON_DISPLAYED_COMPONENT}):(T(v.CANNOT_DELETE_NON_EXISTING_COMPONENT,{componentPointer:t}),{success:!1,error:v.CANNOT_DELETE_NON_EXISTING_COMPONENT})}(e,t,n):o},validateComponentExistOnFull:function(e,t){return e.dal.full.isExist(t)?{success:!0}:(T(v.COMPONENT_DOES_NOT_EXIST,{componentPointer:t}),{success:!1,error:v.COMPONENT_DOES_NOT_EXIST})},validateLayoutParam:function(t,n){if(!e.includes(y,t))return T(v.LAYOUT_PARAM_IS_NOT_ALLOWED,{param:t,value:n}),{success:!1,error:v.LAYOUT_PARAM_IS_NOT_ALLOWED};if("fixedPosition"===t&&e.isBoolean(n))return{success:!0};if("docked"===t)return{success:!0};if(!e.isNumber(n))return T(v.LAYOUT_PARAM_MUST_BE_NUMERIC,{param:t,value:n}),{success:!1,error:v.LAYOUT_PARAM_MUST_BE_NUMERIC};var o=e.without(y,"x","y");return e.includes(o,t)&&n<0?(T(v.LAYOUT_PARAM_CANNOT_BE_NEGATIVE,{param:t,value:n}),{success:!1,error:v.LAYOUT_PARAM_CANNOT_BE_NEGATIVE}):"rotationInDegrees"===t&&n>360?(T(v.LAYOUT_PARAM_ROTATATION_INVALID_RANGE,{param:t,value:n}),{success:!1,error:v.LAYOUT_PARAM_ROTATATION_INVALID_RANGE}):{success:!0}},validateSetSkinParams:function(t,n,o){return e.isString(o)?S(t,n)?(T(v.SKIN_PARAM_MUST_BE_STRING,{styleId:S(t,n)}),{success:!1,error:v.CANNOT_SET_BOTH_SKIN_AND_STYLE}):{success:!0}:(T(v.SKIN_PARAM_MUST_BE_STRING,{skinName:o}),{success:!1,error:v.SKIN_PARAM_MUST_BE_STRING})},validateSetStyleIdParams:function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.MASTER_PAGE_ID;return e.isString(n)?r.styles.get(t,n,o)?{success:!0}:(T(v.STYLE_ID_PARAM_MUST_BE_STRING,{pageId:o,styleId:n}),{success:!1,error:v.STYLE_ID_PARAM_DOES_NOT_EXIST}):(T(v.STYLE_ID_PARAM_MUST_BE_STRING,{styleId:n}),{success:!1,error:v.STYLE_ID_PARAM_MUST_BE_STRING})},validateExistingComponent:function(e,t){return(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e.dal.full.isExist(t):e.dal.isExist(t))?{success:!0}:(T(v.COMPONENT_DOES_NOT_EXIST,{componentPointer:t}),{success:!1,error:v.COMPONENT_DOES_NOT_EXIST})},validateComponentCustomStyleParams:function(t,n,o){function r(t){return!e.isNil(t)}return r(n)&&!e.isString(n)?(T(v.SKIN_PARAM_MUST_BE_STRING,{optionalSkinName:n}),{success:!1,error:v.SKIN_PARAM_MUST_BE_STRING}):!r(o)||e.isObject(o)&&!e.isArray(o)?{success:!0}:(T(v.STYLE_PROPERTIES_PARAM_MUST_BE_OBJECT,{optionalStyleProperties:o}),{success:!1,error:v.STYLE_PROPERTIES_PARAM_MUST_BE_OBJECT})},validateComponentConnection:function(e){return"*"===e.role?(T(v.INVALID_COMPONENT_CONNECTION_ROLE,{role:e.role}),{success:!1,error:v.INVALID_COMPONENT_CONNECTION_ROLE}):{success:!0}},ALLOWED_LAYOUT_PARAMS:y,ERRORS:v}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(3),r=n(19),i=r.services.schemasService;function a(n,o){var a=i.getDefinition(n);if(!a)throw new Error("".concat(n," has no component definition."));if(a.propertyTypes||a.propertyType||o){var s=a.propertyTypes?a.propertyTypes:[a.propertyType||t.constants.BASE_PROPS_SCHEMA_TYPE];if(!(e.includes(s,"")||e.isString(o)&&e.includes(s,o))){var c="".concat(n," must get a compProps of one of the types [").concat(s,"]");if(!o)throw new Error(c);if(!e.includes(s,o.type))throw new Error("".concat(c," but got ").concat(o.type));r.services.dataValidators.validateDataBySchema(o,"props")}}}return{validateProperties:a,validateCompProps:function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"componentType")),r=o.getPropertyItemPointer(e,t);a(n,r&&e.dal.get(r))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(8),r=n(44),i=n(168),a=n(419),s=n(25),c=n(62),u=n(85),l="wysiwyg.viewer.components.Group",p={VERTICAL:"vertical",HORIZONTAL:"horizontal"},d={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};function g(e,t){var n=e.pointers.getInnerPointer(t,"layout");return e.dal.get(n)}function f(t,n){var o=g(t,n),i=r.getPositionAndSize(t,n,o);return r.getBoundingLayout(t,e.merge(i,e.pick(o,["rotationInDegrees"])))}function m(n,o,r,i){var a={dockedToEdge:[],nonDockedToEdge:[]},s=o===p.VERTICAL?t.layoutUtils.isVerticallyStretched:t.layoutUtils.isHorizontallyStretched;return e.forEach(i,(function(e){var o=g(n,e),i=f(n,e);s(o)||(t.layoutUtils.isDockedToDirection(o,r)?a.dockedToEdge.push(i):a.nonDockedToEdge.push(i))})),a}function v(t,n,o,r){var i=m(t,p.HORIZONTAL,d.LEFT,r),a=e.map(i.nonDockedToEdge,(function(e){return n.width-e.x})),s=e.map(i.dockedToEdge,(function(e){return e.x+e.width})),c=e.max(a.concat(s));if(c>n.width)n.x&&(o.x=n.x),o.width=n.width;else if(o.width<c){var u=c-o.width;o.x&&(o.x-=u),o.width+=u}}function E(t,n,o,r){var i=m(t,p.HORIZONTAL,d.RIGHT,r),a=e.map(i.nonDockedToEdge,(function(e){return e.x+e.width})),s=e.map(i.dockedToEdge,(function(e){return n.width-e.x})),c=e.max(a.concat(s));if(c>n.width)o.width=n.width;else if(o.width<c){var u=c-o.width;o.width+=u}}function y(t,n,o,r){var i=m(t,p.VERTICAL,d.TOP,r),a=e.map(i.nonDockedToEdge,(function(e){return n.height-e.y})),s=e.map(i.dockedToEdge,(function(e){return e.y+e.height})),c=e.max(a.concat(s));if(c>n.height)n.y&&(o.y=n.y),o.height=n.height;else if(o.height<c){var u=c-o.height;o.y&&(o.y-=u),o.height+=u}}function I(t,n,o,r){var i=m(t,p.VERTICAL,d.BOTTOM,r),a=e.map(i.nonDockedToEdge,(function(e){return e.y+e.height})),s=e.map(i.dockedToEdge,(function(e){return n.height-e.y})),c=e.max(a.concat(s));if(c>n.height)o.height=n.height;else if(o.height<c){var u=c-o.height;o.height+=u}}function S(e,t){return o.getComponentType(e,t)===l}var h=function(e,t){return{minLeft:e.x-t.x,minTop:e.y-t.y,maxRight:e.x+e.width-t.x,maxBottom:e.y+e.height-t.y}};function P(e,t){var n=u.getPrimaryConnection(e,t);return n&&"platform.components.AppWidget"===s.getType(e,n.controllerRef)?n.controllerRef:null}var A=function(e,t){for(var n=e.pointers.full.components.getParent(t);n&&!b(e,n);)n=e.pointers.full.components.getParent(n);return b(e,n)?n:null};function T(e,t,n){"width"===e?t.height=t.width/n:"height"===e&&(t.width=t.height*n)}function _(e,t,n,o,r){var i=n===p.HORIZONTAL?"x":"y",a=n===p.HORIZONTAL?"width":"height",s=e[a];o=Math.min(t[i],o);var c=e[a]!==t[a];if(e[i]<o){if(c){var u=t[a]-e[a]==e[i]-t[i],l=o-e[i];e[a]=u?e[a]-l:e[a]}e[i]=o}e[a]!==s&&r&&T(a,e,r)}function O(e,t,n,o,r,i){var a=n===p.HORIZONTAL?"x":"y",s=n===p.HORIZONTAL?"width":"height",c=e[s],u=o;r=r+(o=Math.max(t[a]+t[s],o))-u;var l=e[a]!==t[a],d=e[s]!==t[s];e[a]+e[s]>o&&(l&&!d?e[a]=o-e[s]:!l&&d?e[s]=o-e[a]:l&&d&&(e[s]=e[s]>r?r:e[s],e[a]=o-e[s])),e[s]!==c&&i&&T(s,e,i)}var C=function(e,t,n,o){return _(e,t,p.HORIZONTAL,n.minLeft,o)},D=function(e,t,n,o){return _(e,t,p.VERTICAL,n.minTop,o)},w=function(e,t,n,o){return O(e,t,p.HORIZONTAL,n.maxRight,n.maxRight-n.minLeft,o)},M=function(e,t,n,o){return O(e,t,p.VERTICAL,n.maxBottom,n.maxBottom-n.minTop,o)};var b=function(e,t){return"platform.components.AppWidget"===s.getType(e,t)},R=function(t,n){var o=s.getPage(t,n),r=c.isWidgetPage(t,o.id),i=t.pointers.components.getChildren(o)[0];return r&&!e.isEqual(i,n)?i:null};function N(t,n,r,a,s){var c=t.pointers.components.getParent(n);if(!b(t,n)&&!b(t,c)&&c){var u=function(t,n){var r=o.public.isContainer(t,n),i=P(t,n);if(!r||i&&r)return i;if(!A(t,n))return null;var a=t.pointers.full.components.getChildrenRecursively(n);return e(a).map((function(e){return P(t,e)})).find((function(t){return!e.isNil(t)}))}(t,n)||R(t,n);if(u){var l=i.getCompLayoutRelativeToScreen(t,u),p=i.getCompLayoutRelativeToScreen(t,c);!function(e,t,n,o){C(e,t,n,o),D(e,t,n,o),w(e,t,n,o),M(e,t,n,o)}(r,a,h(l,p),s?o.public.getLayoutLimits(t,n).aspectRatio:null)}}}return{addCompMinLayout:function t(n,i,a){var s=o.public.isIgnoreChildrenOnProportionalResize(n,i.component),c=i.children;e.isArray(s)&&(c=r.getChildrenToPreserveProportionsByType(n,o,c,s)),!0===s||e.isEmpty(c)||e.forEach(c,(function(e){t(n,e)}));var u=i.component,l=function(t,n){var i=o.public.getLayoutLimits(t,n),a=r.getComponentLayout(t,n),s=o.public.isHorizontallyResizable(t,n),c=o.public.isVerticallyResizable(t,n),u=o.public.isProportionallyResizable(t,n),l=e.pick(a,["width","height"]);return(u||s||S(t,n))&&(l.width=i.minWidth),(u||c||S(t,n))&&(l.height=i.minHeight),l}(n,u);s||function(t,n,o){var i=r.getComponentLayout(t,n.component);e.forEach(n.children,(function(n){var a=r.getBoundingLayout(t,n.minLayout),s=r.getComponentLayout(t,n.component);if(function(e,t){return e.x<0||e.x+e.width>t.width||e.y<0||e.y+e.height>t.height}(s=r.getBoundingLayout(t,s),i))return o.width=i.width,o.height=i.height,!1;var c=a.width/(1-n.proportions.x),u=a.height/(1-n.proportions.y);o.width=e.max([c,o.width]),o.height=e.max([u,o.height])}))}(n,i,l),!!a&&(l=function(e,t,n,o){var i=r.getComponentLayout(e,n);t=function(e,t){var n=function(e){return e.width/e.height}(e),o=t.width/n,r=t.height*n;return o>t.height?t.height=o:t.width=r,t}(i,t);var a=i.height-t.height,s=i.width-t.width;return-1===o.y&&(t.y=i.y+a),-1===o.x&&(t.x=i.x+s),0!==o.x&&0===o.y&&(t.y=i.y+a/2),0!==o.y&&0===o.x&&(t.x=i.x+s/2),t}(n,l,u,a)),l=e.pick(l,["x","y","width","height","rotationInDegrees"]),i.minLayout=l},constrainByChildrenLayout:function(t,n,o,r,i){var a=t.pointers.components.getChildren(n);if(!e.isEmpty(a)){var s=f(t,n),c=e.assign({},s,o);if(!(c.width>=s.width&&c.height>=s.height)){var u=c.width<s.width,l=u&&(c.docked&&o.docked.right||c.x>s.x),p=l&&s.width-c.width>c.x-s.x;u&&!r&&(p?(v(t,s,o,a),E(t,s,o,a)):l?v(t,s,o,a):E(t,s,o,a));var d=c.height<s.height,g=d&&(c.docked&&o.docked.bottom||c.y>s.y),m=t.dal.get(t.pointers.general.getRenderFlag("enforceShouldKeepChildrenInPlace")),S=g&&m&&s.height-c.height>c.y-s.y;d&&!i&&(S?(y(t,s,o,a),I(t,s,o,a)):g&&m?y(t,s,o,a):I(t,s,o,a))}}},constrainByDimensionsLimits:function(t,n,i){var a=g(t,n),s=o.public.getLayoutLimits(t,n,i);if(!e.isUndefined(i.width)&&i.width!==a.width){var c=r.ensureWithinLimits(i.width,s.minWidth,s.maxWidth);e.isUndefined(i.x)||i.x===a.x||(i.x-=c-i.width),i.width=c}if(!e.isUndefined(i.height)&&i.height!==a.height){var u=r.ensureWithinLimits(i.height,s.minHeight,s.maxHeight);e.isUndefined(i.y)||i.y===a.y||(i.y-=u-i.height),i.height=u}},constrainByDockingLimits:function(n){t.dockUtils.isHorizontalDockToScreen(n)&&e.forEach(["left","right"],(function(t){var o=n.docked[t];e.has(o,"px")&&(o.px=Math.max(o.px,0)),o.vw=Math.max(o.vw,0)}))},constrainProportionalResize:function(t,n,i,a,s){if(a){if(s){var c=o.public.getLayoutLimits(t,n.component),u=r.getComponentLayout(t,n.component);i.width>c.maxWidth?(i.width=c.maxWidth,i.height=i.width/(u.width/u.height)):i.height>c.maxHeight&&(i.height=c.maxHeight,i.width=i.height*(u.width/u.height))}if(function(e,t){return e.minLayout.width>t.width||e.minLayout.height>t.height}(n,i)&&e.assign(i,n.minLayout),o.public.resizeOnlyProportionally(t,n.component))!function(e,t){if(e.height)e.width=e.height*t;else{if(!e.width)throw new Error("maintainCompAspectRatio must get at least height or width values in the layout parameter");e.height=e.width/t}}(i,o.public.getLayoutLimits(t,n.component).aspectRatio)}else i.width=e.max([n.minLayout.width,i.width]),i.height=e.max([n.minLayout.height,i.height])},constrainBySpecificType:function(t,n,o){var r=s.getType(t,n),i=a[r];if(!i)return o;var c=i(t,n,o);e.assign(o,c)},constrainsByContainer:function(e,t,n,o,r){N(e,t,n,o,r)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(8),r=n(87),i=["x","y","width","height","rotationInDegrees","scale","fixedPosition","anchors","docked","aspectRatio"];function a(t,n,o,r){e(r).pick(t).forEach((function(e,t){if(!n(e))throw new Error("".concat(t," is not a ").concat(o))}))}var s=e.partial(a,["x","y","width","height","rotationInDegrees","scale"],(function(e){return!isNaN(e)}),"number"),c=e.partial(a,["fixedPosition"],(function(e){return"boolean"==typeof e}),"boolean"),u=e.partial(a,["docked"],e.isPlainObject,"object"),l=e.partial(a,["anchors"],e.isArray,"array");function p(n){n&&(s(n),c(n),u(n),l(n),function(t){var n=e.omit(t,i);if(!e.isEmpty(n))throw new Error("Properties are not supported in layout:".concat(e.keys(n)))}(n)),e.isUndefined(n.rotationInDegrees)||(n.rotationInDegrees=t.math.parseDegrees(n.rotationInDegrees))}function d(t,n){return e.reduce(n,(function(o,r,i){return e.isPlainObject(n[i])?o[i]=d(t,n[i]):e.isEqual(n[i],t[i])||(o[i]=r),o}),{})}var g=e.template("The following layout changes were ignored for comp {id: <%= id %>, componentType: <%= componentType %>}, due to failure of layout validations: \n<%= layoutChanges %>"),f={WIDTH:"width",HEIGHT:"height",X:"x",Y:"y",ROTATION:"rotationInDegrees",FIXED_POSITION:"fixedPosition"};function m(e,t,n){return"".concat(n," change: ").concat(e[n]," -> ").concat(t[n])}function v(n,r,i,a){var s=d(a,i),c=[];e.isUndefined(s.width)||o.public.isHorizontallyResizable(n,r)||(delete i.width,c.push(f.WIDTH)),e.isUndefined(s.height)||o.public.isVerticallyResizable(n,r)||(delete i.height,c.push(f.HEIGHT)),e.isUndefined(s.x)||o.public.isHorizontallyMovable(n,r)||(delete i.x,c.push(f.X)),e.isUndefined(s.y)||o.public.isVerticallyMovable(n,r)||e.isUndefined(s.isFixedPosition)&&(delete i.y,c.push(f.Y)),e.isUndefined(s.rotationInDegrees)||o.public.isRotatable(n,r)||(delete i.rotationInDegrees,c.push(f.ROTATION)),e.isUndefined(s.fixedPosition)||o.public.canBeFixedPosition(n,r)||(delete i.fixedPosition,c.push(f.FIXED_POSITION)),c.length&&function(n,o,r,i,a){var s=e.curry(m)(i,a);t.log.warnVerbose(g({id:o.id,componentType:n.dal.get(n.pointers.getInnerPointer(o,"componentType")),layoutChanges:e(r).map(s).join(", ")}))}(n,r,c,a,s)}return{getValidLayoutToUpdate:function(n,o,a){var s=n.pointers.getInnerPointer(o,"layout"),c=n.dal.get(s),u=e.pick(a,i);!function(e){if(e.docked){if(e.docked.hCenter&&(e.docked.left||e.docked.right))throw new Error("cannot set both hCenter and left OR right");if(e.docked.vCenter&&(e.docked.top||e.docked.bottom))throw new Error("cannot set both vCenter and top OR bottom")}}(a),u.docked&&(u.docked=function(t,n){if(t)return e.merge({},t,n);return n}(c.docked,a.docked)),p(u),v(n,o,u,c);var l=d(c,a),g=e.assign({},c,u);return function(e,n,o){n.docked&&(t.layoutUtils.isHorizontallyDocked(e)&&(n.docked.hCenter?(delete e.docked.left,delete e.docked.right):(n.docked.left||n.docked.right)&&delete e.docked.hCenter,e.width=o.width),t.layoutUtils.isVerticallyDocked(e)&&(n.docked.vCenter?(delete e.docked.top,delete e.docked.bottom):(n.docked.top||n.docked.bottom)&&delete e.docked.vCenter,e.height=o.height))}(g,l,r.getPositionAndSize(n,o,g)),function(e){if(t.layoutUtils.isDockToScreen(e)&&e.fixedPosition)throw new Error("Dock to screen component cannot be fixed position")}(g),g},validateLayout:function(e,t){p(e.dal.get(e.pointers.getInnerPointer(t,"layout")))}}}()},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(12),r=n(1),i=n(423),a=n(176),s=n(19),c=r.loggingUtils.fedopsLogger.INTERACTIONS,{registerComponent:function(e,t){var n=t.componentType,u=t.componentDefinition,l=t.hooks,p=t.metaData,d=t.dataSchema,g=t.propertiesSchema;r.loggingUtils.fedopsLogger.interactionStarted(c.REGISTER_COMPONENT_TYPE),n?(p&&(o.integrations.ravenUtils.breadcrumb("registering metaData for component of type ".concat(n)),i.registerExternalMetaData(n,p)),l&&(o.integrations.ravenUtils.breadcrumb("registering hooks for component of type ".concat(n)),a.registerExternalHooks(n,l)),s.services.schemasService.registerComponentDefinitionAndSchemas(n,{componentDefinition:u,dataSchemas:d,propertiesSchemas:g}),r.loggingUtils.fedopsLogger.interactionEnded(c.REGISTER_COMPONENT_TYPE)):o.integrations.ravenUtils.captureError(new Error("Could not dynamically register a component without componentType"),{tags:{dsComponentRegistration:!0}})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(12),o=n(5),r=n(6),i=n(424),a=n(425),s=n(426),c=n(427),u=n(444),l=n(445),p=n(446),d=n(179),g=n(459),f=n(460),m=n(461),v=n(462),E=n(463),y=n(464),I=n(465),S=n(187),h=n(466),P=n(467),A=n(468),T=n(469),_=n(470),O=n(471),C=n(481),D=n(522),w=n(524),M=n(226),b=n(525),R=n(526),N=n(527),x=n(528),L=n(529),B=n(530),F=n(531),k=n(532),U=n(533),H=n(535),V=n(536),G=n(537),W=n(538),Y=n(17);!function(){r.registerHook(r.HOOKS.DATA.UPDATE_BEFORE,f.removeMobileCropOverrideIfNeeded,"wysiwyg.viewer.components.WPhoto"),r.registerHook(r.HOOKS.ADD.BEFORE,i,"wysiwyg.common.components.anchor.viewer.Anchor"),r.registerHook(r.HOOKS.SERIALIZE.SET_CUSTOM,u.setLinksCustomData,"wysiwyg.viewer.components.WRichText"),r.registerHook(r.HOOKS.ADD.AFTER,M.afterAdd,"wysiwyg.viewer.components.Repeater"),r.registerHook(r.HOOKS.SERIALIZE.CHILDREN_BEFORE,M.addRepeatedDataItems,"wysiwyg.viewer.components.Repeater"),r.registerHook(r.HOOKS.DATA.UPDATE_BEFORE,M.beforeUpdateRepeaterData,"wysiwyg.viewer.components.Repeater"),r.registerHook(r.HOOKS.DATA.UPDATE_AFTER,M.afterUpdateRepeaterData,"wysiwyg.viewer.components.Repeater"),r.registerHook(r.HOOKS.PROPERTIES.UPDATE_AFTER,M.afterUpdateRepeaterProperties,"wysiwyg.viewer.components.Repeater"),r.registerHook(r.HOOKS.ADD.AFTER,u.duplicateLinksDataItems,"wysiwyg.viewer.components.WRichText"),["wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStrip","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"].forEach((function(e){return r.registerHook(r.HOOKS.ADD.BEFORE,c.verifySlideShowStructureOnAdd,e)})),["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StateBox"].forEach((function(e){return r.registerHook(r.HOOKS.COMPONENT.STYLE_UPDATE_AFTER,c.updateSlidesStyle,e)})),["wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateBoxFormState","wysiwyg.viewer.components.StateStripState","wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.StripContainerSlideShowSlide"].forEach((function(e){return r.registerHook(r.HOOKS.REMOVE.BEFORE,c.verifySlideShowStructureOnDelete,e)})),r.registerHook(r.HOOKS.ADD.AFTER,_.replaceFullScreenPropertyWithDocking,"wysiwyg.viewer.components.FiveGridLine"),r.registerHook(r.HOOKS.ADD.BEFORE,a.beforeAdd,"wysiwyg.viewer.components.svgshape.SvgShape"),r.registerHook(r.HOOKS.ADD.BEFORE,s.beforeAdd,"wysiwyg.viewer.components.ClipArt"),r.registerHook(r.HOOKS.ADD.AFTER,m.setPlayerIdAfterAddHook,"wysiwyg.viewer.components.MediaOverlayControls"),r.registerHook(r.HOOKS.ADD.AFTER,m.setPlayerIdAfterAddHook,"wysiwyg.viewer.components.MediaControls"),r.registerHook(r.HOOKS.MOBILE_CONVERSION.AFTER,m.layoutChildrenOnMobileConversion),r.registerHook(r.HOOKS.MOBILE_CONVERSION.AFTER,k.copyRootComponentDockedLayout),r.registerHook(r.HOOKS.DESIGN.UPDATE_AFTER,m.layoutPlayerChildren,"wysiwyg.viewer.components.MediaPlayer"),r.registerHook(r.HOOKS.REMOVE.BEFORE,v.handleColumnDeletion,"wysiwyg.viewer.components.Column"),r.registerHook(r.HOOKS.REMOVE.AFTER,v.deleteContainerIfHasNoMoreColumns,"wysiwyg.viewer.components.Column"),r.registerHook(r.HOOKS.ADD_ROOT.BEFORE,v.handleSplitToColumns,"wysiwyg.viewer.components.Column"),r.registerHook(r.HOOKS.PROPERTIES.UPDATE_BEFORE,v.handleFullWidthPropertyChange,"wysiwyg.viewer.components.StripColumnsContainer"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,b.handleHeaderLayoutChange,"wysiwyg.viewer.components.HeaderContainer"),r.registerHook(r.HOOKS.ADD.BEFORE,E,"wysiwyg.viewer.components.StripColumnsContainer"),r.registerHook(r.HOOKS.ADD.BEFORE,y,"wysiwyg.viewer.components.SiteRegionContainer"),r.registerHook(r.HOOKS.ADD.BEFORE,D.beforeAdd,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"),r.registerHook(r.HOOKS.ADD.AFTER,I,"wysiwyg.viewer.components.WFacebookLike"),r.registerHook(r.HOOKS.ADD.AFTER,S,"wysiwyg.viewer.components.WFacebookComment"),r.registerHook(r.HOOKS.ADD.AFTER,h,"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),r.registerHook(r.HOOKS.ADD.AFTER,P,"wysiwyg.viewer.components.VKShareButton"),r.registerHook(r.HOOKS.ADD.AFTER,A,"wysiwyg.viewer.components.FacebookShare"),r.registerHook(r.HOOKS.ADD.BEFORE,d.removeNicknameFromSerializedComponentIfInvalid),r.registerHook(r.HOOKS.ADD.BEFORE,R.updateSerializedConnectionsData),r.registerHook(r.HOOKS.ADD.AFTER,d.generateNicknamesForComponent),r.registerHook(r.HOOKS.ADD.AFTER,O.handleControllerAddition,"platform.components.AppController"),r.registerHook(r.HOOKS.ADD.AFTER,x.handleAppWidgetAddition,"platform.components.AppWidget"),r.registerHook(r.HOOKS.CHANGE_PARENT.BEFORE,d.deleteNicknameFromComponentIfInvalid),r.registerHook(r.HOOKS.CHANGE_PARENT.BEFORE,R.removeInvalidConnections),r.registerHook(r.HOOKS.CHANGE_PARENT.AFTER,d.generateNicknamesForComponent),r.registerHook(r.HOOKS.CHANGE_PARENT.BEFORE,O.handleControllerParentChange,"platform.components.AppController"),r.registerHook(r.HOOKS.CHANGE_PARENT.BEFORE,x.handleAppWidgetParentChange,"platform.components.AppWidget"),r.registerHook(r.HOOKS.MOBILE_CONVERSION.AFTER,d.generateNicknamesForPages),r.registerHook(r.HOOKS.SERIALIZE.SET_CUSTOM,O.handleControllerSerialization,"platform.components.AppController"),r.registerHook(r.HOOKS.SERIALIZE.SET_CUSTOM,x.handleAppWidgetSerialization,"platform.components.AppWidget"),r.registerHook(r.HOOKS.SERIALIZE.SET_CUSTOM,d.setOriginalContextToSerializedComponent),r.registerHook(r.HOOKS.REMOVE.BEFORE,O.handleControllerDeletion,"platform.components.AppController"),r.registerHook(r.HOOKS.REMOVE.BEFORE,x.handleAppWidgetDeletion,"platform.components.AppWidget"),r.registerHook(r.HOOKS.ADD.BEFORE,x.beforeAddHook,"platform.components.AppWidget"),r.registerHook(r.HOOKS.ADD_ROOT.GET_CONTAINER_TO_ADD_TO,T.getContainerToAddTo,"mobile.core.components.Page"),r.registerHook(r.HOOKS.REMOVE.AFTER,T.removeDeadBehaviors,"mobile.core.components.Page"),r.registerHook(r.HOOKS.ADD.AFTER,T.removeBehaviorsFromAddedPage,"mobile.core.components.Page"),r.registerHook(r.HOOKS.DUPLICATE_ROOT.BEFORE,C.addOriginCompIdToWidgetsOnPage,"mobile.core.components.Page"),r.registerHook(r.HOOKS.ADD.AFTER,R.updateSerializedConnectionsDataForPage,"mobile.core.components.Page"),r.registerHook(r.HOOKS.DUPLICATE_ROOT.AFTER,C.fixDuplicatedPageCodeBehaviors,"mobile.core.components.Page"),r.registerHook(r.HOOKS.DUPLICATE_ROOT.AFTER,C.duplicatePageCodeIfRequired,"mobile.core.components.Page"),r.registerHook(r.HOOKS.ADD_PAGE.AFTER,Y.page.initMobileComponents),r.registerHook(r.HOOKS.REMOVE.AFTER,C.removePageFromPlatformApps,"mobile.core.components.Page"),r.registerHook(r.HOOKS.REMOVE.BEFORE,C.beforePageRemoveHook,"mobile.core.components.Page"),r.registerHook(r.HOOKS.RELAYOUT_MOBILE_PAGE.AFTER,w.setMobileMediaSizing),r.registerHook(r.HOOKS.ADD_PAGE.AFTER,w.setMobileMediaSizingByPointer),r.registerHook(r.HOOKS.SITE_BACKGROUND_UPDATE.AFTER,w.setMediaSizingForDevice),N.initContactFromHooks(r),r.registerHook(r.HOOKS.MOBILE_CONVERSION.BEFORE,g.activatePageMobileHoverModes),r.registerHook(r.HOOKS.ADD.AFTER,l.addedGluedWidget,"wysiwyg.viewer.components.tpapps.TPAGluedWidget"),r.registerHook(r.HOOKS.REMOVE.BEFORE,l.willRemoveGluedWidget,"wysiwyg.viewer.components.tpapps.TPAGluedWidget"),r.registerHook(r.HOOKS.DATA.UPDATE_BEFORE,p.enforceIconLimitations,"wysiwyg.viewer.components.QuickActionBarItem"),r.registerHook(r.HOOKS.DATA.UPDATE_AFTER,M.syncRepeaterTemplateDataWithFirstItem),r.registerHook(r.HOOKS.DESIGN.UPDATE_AFTER,M.syncRepeaterTemplateDesignWithFirstItem),r.registerHook(r.HOOKS.REMOVE_COMP_MODE.BEFORE,H.removeOverridesPointingToMode,"wysiwyg.viewer.components.WSiteStructure"),r.registerHook(r.HOOKS.REMOVE.AFTER,L.removeComponentHook),r.registerHook(r.HOOKS.REMOVE.AFTER,B.setMobileComponentAsDead),o.isOpen("registerComponentsDynamically")||(r.registerExternalHook(r.HOOKS.PROPERTIES.UPDATE_BEFORE,W.beforeUpdateProperties),r.registerExternalHook(r.HOOKS.DATA.UPDATE_BEFORE,W.beforeUpdateData),r.registerExternalHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,W.beforeUpdateLayout));r.registerHook(r.HOOKS.DESERIALIZE.BEFORE,G.beforeDeserialize),r.registerHook(r.HOOKS.REMOVE.AFTER,G.removeRefCompWhenItsRootIsDeleted),r.registerHook(r.HOOKS.DATA.UPDATE_BEFORE,F.beforeUpdateCheckboxData,"wysiwyg.viewer.components.inputs.Checkbox"),r.registerHook(r.HOOKS.DATA.UPDATE_AFTER,F.afterUpdateCheckboxData,"wysiwyg.viewer.components.inputs.Checkbox"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,U.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.TextInput"),r.registerHook(r.HOOKS.DATA.UPDATE_BEFORE,U.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.TextInput"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,U.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.TextAreaInput"),r.registerHook(r.HOOKS.DATA.UPDATE_BEFORE,U.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.TextAreaInput"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,U.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.DatePicker"),r.registerHook(r.HOOKS.DATA.UPDATE_BEFORE,U.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.DatePicker"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,U.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.ComboBoxInput"),r.registerHook(r.HOOKS.DATA.UPDATE_BEFORE,U.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.ComboBoxInput"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,U.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.FileUploader"),r.registerHook(r.HOOKS.DATA.UPDATE_BEFORE,U.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.FileUploader"),o.isOpen("sv_updatePlaceholder")&&e.forEach(["wysiwyg.viewer.components.inputs.TextInput","wixapps.integration.components.inputs.TextArea","wysiwyg.viewer.components.inputs.TextAreaInput","wysiwyg.viewer.components.inputs.ComboBoxInput","wysiwyg.viewer.components.inputs.DatePicker"],(function(e){return r.registerHook(r.HOOKS.ADD.AFTER,V.afterAddInput,e)}))}();var z=function(e,n,o){var i=W.createHookDefinition(e,n),a=i.hookName,s=i.hook;a&&s?r.registerExternalHook(a,s,o):function(e,n){t.integrations.ravenUtils.captureError(new Error('Could not register hook "'.concat(e,'" for component "').concat(n,'"')),{tags:{hooksRegistration:!0},extra:{componentType:n,hookName:e}})}(a,o)};return{registerExternalHooks:function(t,n){e.forEach(n,(function(e,n){return z(n,e,t)}))}}}()},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(3),r=n(59),i=n(19),a=n(1).constants.DATA_TYPES.data,s=i.services.schemasService,{getA11ySchema:function(e,t){var n=o.getDataItem(e,t),i=n?n.type:o.getFirstValidDataType(e,t),c=s.getSchema(a,i),u=r.getPropertyDefinition(c,"a11y",a);if(u){var l=u.refTypes[0],p=s.getSchema(a,l);return p?{properties:p.properties,type:l}:null}return null}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),o=n(70),r=n(121);function i(n,o){var r=e(t.getDataSchemaByType(n,"QuickActions").configuration.properties).omit("quickActionsMenuEnabled").keys().map((function(e){return/(\w*)Enabled/.exec(e)[1]})).value(),i=e.difference(o,r);if(e.some(i))throw new Error("[".concat(i,"] are unsupported."))}function a(e,t){if(o.hasQuickActionBar(e))throw new Error('"'.concat(t,'" is allowed only for actionBar version 1'))}return{QUICK_ACTIONS_PROPS:{NAVIGATION_MENU:{type:"boolean",id:"navigationMenu"},PHONE:{type:"string",id:"phone"},EMAIL:{type:"string",id:"email"},WHATSAPP:{type:"string",id:"whatsapp"},ADDRESS:{type:"string",id:"address"},SOCIAL_LINKS:{type:"object",id:"socialLinks"}},SOCIAL_LINKS_IDS:["facebook","twitter","pinterest","google_plus","tumblr","blogger","linkedin","youtube","vimeo","flickr"],enable:function(t,n){var i=r.getSiteMetaData(t);i.quickActions.configuration.quickActionsMenuEnabled=n,r.setSiteMetaData(t,i);var a=e(t.siteAPI.getClientSpecMap()).values().find({appDefinitionId:"14517e1a-3ff0-af98-408e-2bd6953c36a2"}),s=!e.isUndefined(a)&&!e.get(a,"permissions.revoked");!n&&s&&o.addQuickActionBar(t),n&&e(o.getActions(t)).reject("isDynamic").isEmpty()&&o.removeQuickActionBar(t)},isEnabled:function(e){return r.getSiteMetaData(e).quickActions.configuration.quickActionsMenuEnabled},colorScheme:{set:function(e,t){a(e,"actionBar.colorScheme.set");var n=r.getSiteMetaData(e);n.quickActions.colorScheme=t,r.setSiteMetaData(e,n)},get:function(e){return r.getSiteMetaData(e).quickActions.colorScheme}},actions:{enable:function(t,n){a(t,"actionBar.actions.enable"),function(t,n){var o=e(n).pickBy((function(e){return!!e})).keys().value();i(t,o);var a=r.getSiteMetaData(t),s=e.filter(o,(function(t){return e.includes(["phone","email","address"],t)&&!a.contactInfo[t]||"socialLinks"===t&&e.isEmpty(a.quickActions.socialLinks)}));if(e.some(s))throw new Error("Actions [".concat(s,"] has a missing value and thus cannot be enabled"))}(t,n);var o=r.getSiteMetaData(t);e.assign(o.quickActions.configuration,e.transform(n,(function(e,t,n){e["".concat(n,"Enabled")]=t}),{})),r.setSiteMetaData(t,o)},getEnabled:function(t){var n=e.omit(r.getSiteMetaData(t).quickActions.configuration,"quickActionsMenuEnabled");return e.transform(n,(function(e,t,n){e[/(\w*)Enabled/.exec(n)[1]]=t}),{})},update:function(t,n){a(t,"actionBar.actions.update"),i(t,e.keys(n));var o=r.getSiteMetaData(t);e.forEach(n,(function(t,n){switch(n){case"phone":case"email":case"address":o.contactInfo[n]=t;break;case"socialLinks":o.quickActions.socialLinks=e(o.quickActions.socialLinks).reject((function(n){return e.includes(e.keys(t),n.id)})).concat(e.map(t,(function(e,t){return{id:t,url:e}}))).reject((function(t){return e.isEmpty(t.url)})).value()}})),r.setSiteMetaData(t,o)},get:function(n){var o=r.getSiteMetaData(n),i=e.pick(o.contactInfo,["phone","email","address"]),a=t.getDataSchemaByType(n,"SocialLink").id.enum,s=e.transform(a,(function(e,t){e[t]=""}),{}),c=e.transform(o.quickActions.socialLinks,(function(e,t){e[t.id]=t.url}),{});return e.assign(i,{socialLinks:e.assign(s,c)})}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(71),o=n(4),r=(n(7),n(75));function i(e,n){if(t.isProvisioned(e)){var i=o.isPageComponent(e,n)?n:o.getPage(e,n),a=e.pointers.components.getViewMode(i);r.generateNicknamesForPages(e,[i.id],a)}}return{generateNicknamesForPages:function(t,n){e.forEach(n,e.partial(i,t))},generateNicknamesForComponent:i,removeNicknameFromSerializedComponentIfInvalid:function(e,n,o,i){t.isProvisioned(e)&&"Page"!==i.type&&i.connections&&r.removeNicknameFromSerializedComponentIfInvalid(e,n,o,i)},deleteNicknameFromComponentIfInvalid:function(e,n,i){t.isProvisioned(e)&&"Page"!==o.getType(e,n)&&r.removeNicknameFromComponentIfInvalid(e,n,i)},updateNicknameContextByNewContainer:function(e,n,o,i){t.isProvisioned(e)&&"Page"!==o.type&&r.updateNicknameContextByNewContainer(e,n,o,i)},setOriginalContextToSerializedComponent:function(e,t,n){r.setOriginalContextToSerializedComponent(e,t,n)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3);function o(e,t){return e.pointers.components.getViewMode(t).toLowerCase()}return{getPageProperties:function(n,r){return e.get(t.getPropertiesItem(n,r),o(n,r))},updatePageProperties:function(n,r,i){var a=function(n,r,i){var a,s=t.getPropertiesItem(n,r)||t.createPropertiesItemByType(n,"PageProperties"),c=o(n,r);if(e.isPlainObject(i)){var u=e.get(s,c,{});a=e.assign(u,i)}else a=i;return e.set(s,c,a),s}(n,r,i);t.updatePropertiesItem(n,r,a)}}}()},function(e,t,n){var o,r,i,a,s,c,u;e.exports=(o=n(0),r=n(1),i=n(33),a=n(13),s=n(16),c=o.template("<%= premiumStateAPIUrl %>?siteGuid=<%= metasiteId %>"),{getPremiumApps:function(e,t,n,i){var a=function(e){var t=e.pointers.general.getServiceTopology(),n=e.pointers.getInnerPointer(t,"premiumStateApiUrl");return e.dal.get(n)}(e),s=c({premiumStateAPIUrl:a,metasiteId:t});r.ajaxLibrary.ajax({type:"POST",url:s,data:{},dataType:"json",success:function(e){o.isFunction(n)&&n(e.payload)},error:i})},extractYearlyPremiumApps:function(e){var t=[],n=e.tpaPackages;return o.isArray(n)?o.forEach(n,(function(e){u(e)&&t.push(e.appDefinitionId)})):o.isObject(n)&&u(n)&&t.push(n.appDefinitionId),t},isYearly:u=function(e){return 6===e.cycle},getSiteUpgradeUrl:function(e,t){var n=e.dal.get(e.pointers.general.getServiceTopology()),o="".concat(n.premiumServerUrl,"/wix/api/premiumStart"),r=a.generalInfo.getMetaSiteId(e);return(t=t||{}).siteGuid=r,new i.common.TPABaseUrlBuilder(o).addMultipleQueryParams(t).build()},getAppUpgradeUrl:function(e,t,n,o,r){var c=e.dal.get(e.pointers.general.getServiceTopology()),u="".concat(c.premiumServerUrl,"/wix/api/tpaStartPurchase"),l=s.getAppData(e,t),p=a.generalInfo.getMetaSiteId(e);r=r||{};var d={applicationId:t,vendorProductId:n,paymentCycle:o||"MONTHLY",appDefinitionId:l.appDefinitionId,metaSiteId:p,pp_type:r.pp_type,referralAdditionalInfo:r.referralAdditionalInfo};return r.premiumIntent&&(d.premiumIntent=r.premiumIntent),new i.common.TPABaseUrlBuilder(u).addMultipleQueryParams(d).build()}})},function(e,t,n){var o;e.exports=(o={EVENT_TYPE_NOT_SUPPORTED:{errorCode:28004,desc:"tpa event type is not supported",severity:"error"},ECOM_HIDDEN_PAGES_MISSING:{errorCode:28005,desc:"ecom pages are missing after save",severity:"error"},FAIL_TO_GET_APP_MARKET_DATA:{errorCode:28006,desc:"failure while trying to get app market data",severity:"error"}},n(23).register("documentServices","error",o),o)},function(e,t,n){e.exports=function(){var e=n(0),t=n(40),o=n(56),r=n(47),i=n(127),a=n(72),s=n(30),c=n(64),u=n(184);function l(e,t){return o.setWixCodeModel(e,{gridAppId:t.gridAppId}),t}function p(e){var t=e.pointers.general.getMetaSiteId();return e.dal.get(t)}function d(e){return s.isFirstSave(e)}function g(n,s){var c=r.trace(n,{action:"cloneApp"});return function(n){var r={baseUrl:i.getBaseUrlFromPS(n),gridAppId:o.getGridAppId(n),metasiteId:p(n),signedInstance:t.getExistingWixCodeAppFromPS(n).instance,isFirstSave:d(n)};return i.clone(r).then(e.partial(l,n)).then((function(e){return f(n),e}))}(n).then((function(e){c({appId:o.getGridAppId(n),message:e})})).catch((function(t){return function(e){return-409===a.safeGetErrorCode(e)}(t)?(f(n),c({level:r.levels.WARN,message:t}),u.runUsingPS(n).then(e.partial(m,n)).then(e.partial(g,n,s))):0===s?(c({level:r.levels.ERROR,message:t}),Promise.reject(t)):(c({level:r.levels.WARN,message:t,params:{retriesLeft:s}}),g(n,s-1))}))}function f(e){var t=e.pointers.wixCode.getIsAppReadOnly();e.dal.set(t,!1)}function m(e){var t=e.pointers.wixCode.getIsAppReadOnly();e.dal.set(t,!0)}function v(e){return c.runFunctionInSaveQueue((function(){return function(e){return function(e){var t=e.pointers.wixCode.getIsAppReadOnly();return!e.dal.get(t)}(e)?Promise.resolve():g(e,2)}(e)}))}return{ensureAppIsWriteable:v,setAppWriteable:f,handleAppIsReadOnlyServerError:function(e){var t=e.pointers.wixCode.getIsAppReadOnly();return e.dal.set(t,!0),v(e)},createNewWriteableApp:function(n){return c.runFunctionInSaveQueue((function(){return function(n){var a=r.trace(n,{action:"createApp"}),s={baseUrl:i.getBaseUrlFromPS(n),metasiteId:p(n),signedInstance:t.getExistingWixCodeAppFromPS(n).instance};return i.create(s).then(e.partial(l,n)).then((function(e){return f(n),e})).then((function(e){a({appId:o.getGridAppId(n),message:e})})).catch((function(e){return a({level:r.levels.WARN,message:e}),Promise.reject(e)}))}(n)}))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(46),o=n(72),r=n(127),i=n(47),a=n(56),s=n(40),c=n(22);function u(e){var t=e.traceFunc,n=e.isAppReadOnly,a=e.wixCodeApp,s=e.baseUrl,c=e.metasiteId,u=e.gridAppId,l=t({action:"markAppImmutable"});if(n)return l({message:"no changes"}),Promise.resolve();if(!a)return Promise.reject(new Error("no wix code app"));var p={baseUrl:s,metasiteId:c,gridAppId:u,signedInstance:a.instance};return r.save(p).then((function(){l()})).catch((function(e){if(!function(e){return-409===o.safeGetErrorCode(e)}(e))throw l({level:i.levels.ERROR,message:e}),e;l({level:i.levels.WARN,message:"The grid app was already saved on server"})}))}return{runUsingPS:function(t){return u({traceFunc:e.partial(i.trace,t),isAppReadOnly:function(e){var t=e.pointers.wixCode.getIsAppReadOnly();return e.dal.get(t)}(t),wixCodeApp:s.getExistingWixCodeAppFromPS(t),baseUrl:r.getBaseUrlFromPS(t),metasiteId:function(e){var t=e.pointers.general.getMetaSiteId();return e.dal.get(t)}(t),gridAppId:a.getGridAppId(t)})},runUsingSnapshot:function(n){return u({traceFunc:e.partial(i.traceWithSnapshot,n),isAppReadOnly:n.getIn(c.paths.IS_APP_READ_ONLY),wixCodeApp:s.getExistingWixCodeAppFromSnapshot(n),baseUrl:t.extractFromSnapshot(n,["serviceTopology",c.WIX_CODE_SERVICE_URL_KEY]),metasiteId:function(e){return t.extractFromSnapshot(e,["rendererModel","metaSiteId"])}(n),gridAppId:t.extractFromSnapshot(n,c.paths.GRID_APP_ID)})}}}()},function(e,t,n){e.exports=n(458).createRegistrar()},function(e,t,n){e.exports=function(){var e=n(0),t=n(11),o=n(15),r={"wysiwyg.viewer.components.MediaOverlayControls":function(e,n,o,r){u(o,r),t.updateCompLayout(e,n,o,!0)},"wysiwyg.viewer.components.MediaControls":function(e,n,o,r){l(o,r,p(e,n)),t.updateCompLayout(e,n,o,!0)}},i={vertical:2,horizontal:2},a=.65;function s(t,n){var o=e.get(n,["cssStyle","cssBorderRadius"]),r=function(t,n){if(!e.isEmpty(n)){var o=Math.max(n.topLeft.value+n.topRight.value,n.bottomLeft.value+n.bottomRight.value),r=Math.max(n.topLeft.value+n.bottomLeft.value,n.topRight.value+n.bottomRight.value),i=t.width/o,a=t.height/r,s=Math.min(i,a);return s<1?s:1}return 1}(t,o),i=e.get(o,["bottomLeft","value"],0)*r;return{left:.8*i,width:.8*(i+e.get(o,["bottomRight","value"],0)*r)}}function c(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"propertyQuery")),r=e.pointers.components.getPageOfComponent(t),i=e.dal.get(e.pointers.data.getPropertyItem(o.stripHashIfExists(n),r.id)).playerId;return e.pointers.components.getComponent(i,r)}function u(e,t){var n=Math.min(t.width,t.height)*a;(e.width>n||e.height>n)&&(e.width=n,e.height=n),e.y=(t.height-e.height)/2,e.x=(t.width-e.width)/2}function l(e,t,n){var o=s(t,n);e.y=t.height-e.height-i.vertical,e.x=i.horizontal+o.left,e.width=t.width-o.width-2*i.horizontal}function p(e,t){var n=c(e,t),o=e.dal.get(e.pointers.getInnerPointer(n,"designQuery")),r=e.pointers.components.getPageOfComponent(t),i=e.pointers.data.getDesignItem(o.replace("#",""),r.id);return e.dal.get(i)}return{layoutPlayerChildren:function(t,n,o){var i=t.pointers.components.getChildren(n);e.forEach(i,(function(e){var n=t.dal.get(t.pointers.getInnerPointer(e,"componentType"));if(r[n]){var i=t.dal.get(t.pointers.getInnerPointer(e,"layout"));r[n](t,e,i,o)}}))},positionBigPlay:function(e,t,n,o,r){if(!r){var i=c(e,t);if(e.pointers.components.isDescendant(t,i))u(n,e.dal.get(e.pointers.getInnerPointer(i,"layout")))}},positionControlsBar:function(e,t,n,o,r){if(!r){var i=c(e,t);if(e.pointers.components.isDescendant(t,i))l(n,e.dal.get(e.pointers.getInnerPointer(i,"layout")),p(e,t))}}}}()},function(e,t,n){var o;e.exports=(o=n(76),function(e,t){o.upgradeUrl(e,t,"facebook.comments")})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(4),i=n(3),a=n(36),s=n(43),{removePlatformApplicationFromPageIfLastController:function(e,t){var n=r.getPage(e,t),o=i.getDataItem(e,t).applicationId,s=e.pointers.data.getDataItemsWithPredicate({applicationId:o},n.id);a.updatePagePlatformApp(e,n,o,s.length>1)},removeControllerFromStateMap:function(e,t){var n=e.pointers.platform.getControllerStatePointer(t.id);e.dal.isExist(n)&&e.dal.remove(n)},addControllerStateToSerializedStructure:function(e,t,n){var o=e.dal.get(e.pointers.platform.getControllerStatePointer(t.id));void 0!==o&&(n.state=o)},setControllerStateFromSerializedStructure:function(e,t,n){o.has(n,"custom.state")&&s.setState(e,o.set({},o.get(n,"custom.state"),[t]))},addPlatformAppToPageIfFirstController:function(e,t,n,o){o=o||r.getPage(e,t),a.updatePagePlatformApp(e,o,n,!0)}})},function(e,t,n){e.exports=function(){var e,t=n(0),o=n(472),r=n(190),i=n(474),a=n(475),s=n(32),c=n(13),u=n(14),l=n(100),p=n(191),d=n(31),g={},f=[],m={},v=!1,E=!1,y={},I=!1;var S=function(e){var n=e.data.applicationId;y[n]=!0,t.forEach(m[n],A),delete m[n];var o=t.get(g,[s.MessageTypes.ADD_APP_COMPLETED,n]);t.isFunction(o)&&o(e.data)},h=function(e){if(!0===e.data.success){E=!0;var n=t.get(g,[s.MessageTypes.ADD_ALL_APPS_COMPLETED]);t.forEach(n,(function(e){e()}))}};function P(n,o){if(function(t){return t.source===e.contentWindow}(o))switch(o.data.type){case s.MessageTypes.SDK_READY:v=!0,t.forEach(f,A),f.length=0;break;case s.MessageTypes.SET_MANIFEST:var r=t.get(l.getAppDataByApplicationId(n,o.data.applicationId),"appDefinitionId");l.setManifest(n,r,o.data.manifest);break;case s.MessageTypes.SET_APP_PUBLIC_API:l.setAppPublicAPI(n,o.data.appDefinitionId,o.data.apiName);break;case s.MessageTypes.ADD_APP_COMPLETED:S(o);break;case s.MessageTypes.ADD_ALL_APPS_COMPLETED:h(o);break;case s.MessageTypes.APP_UPDATE_COMPLETED:var i=t.get(g,[s.MessageTypes.APP_UPDATE_COMPLETED,o.data.applicationId]);t.isFunction(i)&&i(o.data);break;case s.MessageTypes.MIGRATE_COMPLETED:var a=t.get(g,[s.MessageTypes.MIGRATE_COMPLETED,o.data.applicationId]);t.isFunction(a)&&a(o.data);break;case s.MessageTypes.REMOVE_APP_COMPLETED:var c=t.get(g,[s.MessageTypes.REMOVE_APP_COMPLETED,o.data.applicationId]);t.isFunction(c)&&c(o.data);break;case s.MessageTypes.GET_INSTALLED_APPS:var u=n.siteAPI.getClientSpecMap(),p=n.dal.get(n.pointers.routers.getRoutersConfigMapPointer()),m=n.dal.full.immutable.getByPath(["pagesData"]),E=d.getAllAppIdsInstalledOnPages(m,u,p);o.ports&&o.ports[0]&&t.isFunction(o.ports[0].postMessage)&&o.ports[0].postMessage(E);break;case s.MessageTypes.GET_IS_PLATFORM_APP_INSTALLED:var y=l.isPlatformAppInstalled(n,o.data.appDefinitionId);o.ports&&o.ports[0]&&o.ports[0].postMessage({isAppInstalled:y})}}function A(t){e.contentWindow.postMessage(t,"*")}function T(e){v?A(e):f.push(e)}function _(e,t){v&&y[t]?A(e):(m[t]=m[t]||[],m[t].push(e))}var O=function(e){return{languageCode:c.getProperty(e,c.PROPERTY_NAMES.LANGUAGE_CODE)||"en",viewMode:u.getViewMode(e),metaSiteId:c.getProperty(e,c.PROPERTY_NAMES.META_SITE_ID),userId:c.getProperty(e,c.PROPERTY_NAMES.USER_ID),editorSessionId:c.getProperty(e,c.PROPERTY_NAMES.EDITOR_SESSION_ID)}};return{init:function(t,n,a){e?(e.remove(),f.length=0,g={},m={},y={},v=!1):o.api.set(s.AppIds.EDITOR,r.getAPIForSDK(n),{onApiCall:p.reportAPICallBI.bind(null,t)}),i.addWorkerHandler(P.bind(this,t)),I=!0;var c=i.getAppsContainerUrl(t,a);e=i.createWorkerIframe("workerIframe",c)},triggerEvent:function(e,t){_(a.triggerEvent(e,t),e)},addApp:function(e,n,o){o&&t.set(g,[s.MessageTypes.ADD_APP_COMPLETED,n.applicationId],o),y[n.applicationId]=!1,T(a.addApp(n,O(e)))},addApps:function(e,n){t.forEach(n,(function(e){var t=e.applicationId;y[t]=!1})),T(a.addApps(n,O(e)))},notifyAppUpdated:function(e,n,o){o&&t.set(g,[s.MessageTypes.APP_UPDATE_COMPLETED,e],o),_(a.notifyAppUpdated(e,n),e)},notifyRemoveApp:function(e){return new Promise((function(n){t.set(g,[s.MessageTypes.REMOVE_APP_COMPLETED,e],n),_(a.notifyRemoveApp(e),e)}))},notifyMigrate:function(e,n){return new Promise((function(o){t.set(g,[s.MessageTypes.MIGRATE_COMPLETED,e],o),_(a.notifyMigrate(e,n),e)}))},getAppsContainer:function(){return e},isInitiated:function(){return I},registerToAppsCompleted:function(e){E&&e();var n=t.get(g,[s.MessageTypes.ADD_ALL_APPS_COMPLETED]);n?n.push(e):t.set(g,[s.MessageTypes.ADD_ALL_APPS_COMPLETED],[e])},getEditorSdkUrl:function(e){return i.getEditorSdkUrl(e)}}}()},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(473),{getAPIForSDK:function(e){var t=function e(t,n){return o.isFunction(t)?o.partial(t,n):o.isObject(t)?o.mapValues(t,(function(t){return e(t,n)})):t}({document:r},window.documentServices);return e=e||{},o.merge(t.document,e),o(t).merge(e).merge(e.editor).reduce((function(e,t,n,r){return o.assign(e,function e(t,n){return o.reduce(o.get(n,t),(function(r,i,a){var s=t.concat([a]);return o.isFunction(i)||!o.isObject(i)?(r[s.join(".")]=i,r):o.merge(r,e(s,n))}),{})}([n],r))}),{})}})},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(5),i=n(23),a=n(37),{reportAPICallBI:function(e,t){if(r.isOpen("platformSdkApiCallBI")){var n=t.call.split("."),s=n.slice(0,-1).join("."),c=o.last(n),u=t.args.map(JSON.stringify).join(",");i.event(e,a.PLATFORM_API_CALL,{app_name:t.args[0].appDefinitionId,module:s,function:c,arguments:u,pageId:e.siteAPI.getPrimaryPageId()})}}})},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(0),r=n(18),i=n(32),a=n(128),s=n(1),c=a.linkUtils,{navigateTo:function(e,t,n){var i=e.dal.get(e.pointers.routers.getRoutersConfigMapPointer()),a=s.siteStructureUtils.getRouterPrefixes({configMap:i}),u=function(e){var t=r.getPagesDataItems(e),n=e.dal.get(e.pointers.routers.getRoutersPointer()),i=e.dal.get(e.pointers.general.getClientSpecMap()),a=r.popupPages.isPopup.bind(r.popupPages,e),c=e.pointers.data.getDataItemFromMaster(s.siteConstants.MASTER_PAGE_ID),u=e.dal.get(c),l=o.get(u,["mainPage","id"])||o.get(u,"mainPageId")||"mainPage";return s.siteStructureUtils.getPages(t,a,l,n,i)}(e),l=c.convertUrlToLinkObject(a,t,null,u);l.hasOwnProperty("pageId")&&(l.pageId="#"===l.pageId?l.pageId:l.pageId.replace("#","")),r.navigateTo(e,l,n)},setState:function(e,t){var n=e.pointers.platform.getAppStatePointer();o.forEach(t,(function(t,r){o.forEach(t,(function(t){e.dal.full.set(e.pointers.getInnerPointer(n,t.id),r)}))}))},getState:function(e,t){var n=e.pointers.platform.getAppStatePointer();return e.dal.get(e.pointers.getInnerPointer(n,t.id))||i.Page.DEFAULT_STATE}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(6),o=n(479),r=n(480),i=n(1),a=n(194),s=n(5);function c(t,n,o){if(s.isOpen("sv_livePreview")&&(n.apps=e.intersection(n.apps,r.getAllowedApps(t)),n.apps=r.addDependantApps(t,n.apps),!e.isEmpty(n.apps))){var c=function(t,n,o){if(!n||!n.apps)return n;return n.apps.reduce((function(a,s){var c=e.get(r.optionsModifiers,s,e.noop)(t,n,o);return c&&i.wSpy.log("livepreview",["options changed by app",s,c,n]),e.assign(a,c)}),n)}(t,n,o);a.action("refresh livepreview",(function(){return t.siteAPI.refreshAppsInCurrentPage(c)}))()}}function u(t,n,o,r){e.isEmpty(n)||c(t,{apps:n,source:o},r)}function l(t,n){c(t,e.assign(n,{apps:r.getAllowedApps(t)}))}return{init:function(e){l(e,{immediate:!0})},debouncedRefresh:c,isActive:function(){return s.isOpen("sv_livePreview")},autoRun:function(e){t.registerHook(t.HOOKS.DATA.UPDATE_AFTER,(function(t,n,r){return u(e,o.appsOfComp(e,r,n),"DATA.UPDATE_AFTER",n)})),t.registerHook(t.HOOKS.PROPERTIES.UPDATE_AFTER,(function(t,n,r){return u(e,o.appsOfComp(e,r,n),"PROPERTIES.UPDATE_AFTER",n)})),t.registerHook(t.HOOKS.DATA.SET_BY_POINTER_AFTER,(function(t,n,r){return u(e,o.appsOfComp(e,r,n),"SET_BY_POINTER_AFTER")})),t.registerHook(t.HOOKS.ADD_ROOT.AFTER,(function(t,n){return u(e,o.appsOfComp(e,null,n),"ADD_ROOT.AFTER")})),t.registerHook(t.HOOKS.DATA.AFTER_UPDATE_CONNECTIONS,(function(t,n,r){return u(e,o.appsOfComp(e,n,r),"AFTER_UPDATE_CONNECTIONS",r)})),t.registerHook(t.HOOKS.CHANGE_COMPONENT_VIEW_MODE.BEFORE,(function(t,n){"editor"===n&&l(e,{forceWorkerRestart:!0,source:"CHANGE_COMPONENT_VIEW_MODE"})})),t.registerHook(t.HOOKS.CHANGE_PARENT.AFTER,(function(e,t){return function(e,t,n){e.dal.get(t)?u(e,o.appsOfComp(e,null,t),n):l(e,{forceWorkerRestart:!0,source:n})}(e,t,"CHANGE_PARENT")})),t.registerHook(t.HOOKS.PAGE.AFTER_NAVIGATE_TO_PAGE,(function(){return l(e,{forceWorkerRestart:!0,source:"AFTER_NAVIGATE_TO_PAGE"})})),t.registerHook(t.HOOKS.MULTILINGUAL.AFTER_CHANGE_LANGUAGE,(function(){return l(e,{forceWorkerRestart:!0,source:"AFTER_CHANGE_LANGUAGE"})})),t.registerHook(t.HOOKS.CONNECTION.AFTER_DISCONNECT,(function(){return l(e,{forceWorkerRestart:!0,resetRuntimeOverrides:!0,srouce:"AFTER_DISCONNECT"})})),t.registerHook(t.HOOKS.UNDO_REDO.AFTER_APPLY_SNAPSHOT,(function(){return l(e,{forceWorkerRestart:!0,resetRuntimeOverrides:!0,source:"UNDO_REDO.AFTER_APPLY_SNAPSHOT"})})),t.registerHook(t.HOOKS.PLATFORM.APP_UPDATED,(function(){return l(e,{forceWorkerRestart:!0,resetRuntimeOverrides:!0,source:"PLATFORM.APP_UPDATED"})})),t.registerHook(t.HOOKS.PLATFORM.APP_PROVISIONED,(function(){return l(e,{forceWorkerRestart:!0,resetRuntimeOverrides:!0,source:"PLATFORM.APP_PROVISIONED"})})),t.registerHook(t.HOOKS.SWITCH_VIEW_MODE.AFTER,(function(){return l(e,{forceWorkerRestart:!0,resetRuntimeOverrides:!0,source:"SWITCH_VIEW_MODE"})}))}}}()},function(e,t){e.exports=S},function(e,t,n){e.exports=function(){var e=n(0),t=n(104),o=n(1);function r(e,t,n){return e.dal.isExist(t)?e.dal.get(t):n}return{isUndoableFile:function(e){return t.isSchemaFile(e)},assembleUndoableFile:function(n,o,r,i){if(e.isUndefined(o))throw new Error("Cannot read undoable file which has not been loaded [".concat(n,"]"));if(t.isSchemaFile(n))return t.assembleSchema(o,r,i)},setUndoableContent:function(e,t,n){var i=e.pointers.wixCode.getFilePathId(t),a=r(e,i,null);null===a&&(a=function(e){return o.guidUtils.getUniqueId(e,"-")}(t),e.dal.set(i,a));var s=e.pointers.wixCode.getUndoableModifiedFileContent(a);e.dal.set(s,n)},getUndoableContent:function(e,t){var n=e.pointers.wixCode.getFilePathId(t),o=r(e,n,null);if(null===o)return null;var i=e.pointers.wixCode.getUndoableModifiedFileContent(o);return r(e,i,null)},getUndoableContentByPath:function(t,n){return e.mapValues(n,(function(e){return t[e]}))}}}()},function(e,t){e.exports={getTaskName:function(){return"saveCode"},getSnapshotTags:function(e){switch(e){case"autosave":return["autosave"];default:return["primary"]}}}},function(e,t,n){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r,i,a,s,c,u,l,p,d,g,f;e.exports=(i=n(1),a=n(486),s=n(487),c=n(72),u=a.errorTypes,l=function(e){return p(e),s.default(a)},p=function(e){var t=e.signedInstance,n=e.instanceId,o=e.appId;a.baseUrl="//".concat(n,".dev.wix-code.com/preview"),a.queryParameters=i.urlUtils.toQueryString({instance:t,gridAppId:o}),a.options={headers:{"X-XSRF-TOKEN":i.cookieUtils.getCookie("XSRF-TOKEN")}}},d=c.errorTypes,o(r={},u.ABORT,d.ABORT),o(r,u.TIMEOUT,d.TIMEOUT),o(r,u.PARSE,d.PARSE),g=r,f=function(e){return e.catch((function(e){return e.xhr?Promise.reject(c.build({xhr:e.xhr,errorType:g[e.errorType]})):Promise.reject(e)}))},{list:function(e){return f(l(e).list())},get:function(e,t){return f(l(e).get(t))},save:function(e,t,n){return f(l(e).save(t,n,{returnUpdated:!0}))},remove:function(e,t){return f(l(e).remove(t,{returnUpdated:!0}))}})},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r;e.exports=(r=n(0),{getWidgetDisplayName:function(e,t){if(!e||!e.api)return null;var n=e.api,i=r.assign({},r.assign.apply(r,[{}].concat(o(n))));return r.has(i,t)?r.get(i[t],"widgetDisplayName")||t:null}})},function(e,t){e.exports=h},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I;e.exports=(o=n(0),r=n(64),i=n(491),a=n(30),s=n(23),c=n(50),u=n(78),l=n(2),p=n(12),d=n(5),g=n(207),f=n(6),m=n(21),v=n(194),E=n(1),y="Editor1.4",I="onboarding",function(e){function t(e,t){e.config.origin===y&&a.setUseOnBoarding(e,t)}function n(e){return{event:o.partial(s.event,e),error:o.partial(s.error,e)}}function S(t,o,i){t.setOperationsQueue.flushQueueAndExecute(v.action((function(){var a=[e.getSaveTasksConfig(t),t.dal,o,i,n(t)];r.runSaveAsTemplate.apply(r,a)})))}function h(e){return-10104===o.get(e,["document","errorCode"])}function P(e){var t=e.pointers.general.getPublishSaveInnerPointer(),n=e.pointers.general.getSilentSaveInnerPointer();e.dal.get(t)?e.dal.remove(t):e.dal.get(n)&&e.dal.remove(n)}function A(e,t,n){if(h(n)){var o=e.pointers.general.getSaveInvalidationCount(),r=e.dal.get(o)||0;e.dal.set(o,++r)}if(P(e),t){for(var i=arguments.length,a=new Array(i>3?i-3:0),s=3;s<i;s++)a[s-3]=arguments[s];t.apply(void 0,[n].concat(a))}}function T(e,t,n){var o=e.pointers.general.getSaveInvalidationCount();if(e.dal.set(o,0),P(e),g.setSaveProgress(!1),f.executeHook(f.HOOKS.SAVE.SITE_SAVED,null,[t]),n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];n.apply(void 0,i)}}function _(e,t,n){if(g.setSaveProgress(!1),P(e),t){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];t.apply(void 0,[n].concat(i))}if(h(n)){var s=o.get(e,["config","origin"])===I;s&&p.integrations.ravenUtils.captureError(new Error("Site validation error - ADI"),{tags:{adiSaveError:s},extra:{errorDescription:n}}),f.executeHook(f.HOOKS.SAVE.VALIDATION_ERROR)}}var O=function(e){return{extraPayload:e.runtimeConfig.firstSaveExtraPayload}},C=function(e){e({documentServices:{errorCode:-1,errorType:u.save.SAVE_DISABLED_IN_DOCUMENT_SERVICES,errorDescription:"DocumentServices was created with parameter disableSave=true, so save is disabled."}})},D=function(e){e({documentServices:{errorCode:-1,errorType:u.save.SAVE_IN_PROGRESS,errorDescription:"Save is already in progress. The last save request is being ignored."}})},w=function(e){return function(t,n,o){if(g.canSave()){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return e.apply(void 0,[t,n,o].concat(i))}return g.isEnabled()?g.isSaveInProgress()?D(o):void 0:C(o)}},M={initMethod:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{disableSave:!1,firstSaveExtraPayload:null,settleInServer:!0},n=t.disableSave,o=void 0!==n&&n,r=t.firstSaveExtraPayload,i=void 0===r?null:r,a=t.settleInServer,s=void 0===a||a;o&&g.setSaveAllowed(!1),i&&(e.runtimeConfig.firstSaveExtraPayload=i),e.runtimeConfig.settleInServer=s},save:w((function(a,l,f,m,y){t(a,!1),a.setOperationsQueue.flushQueueAndExecute(v.action((function(){var v=!function(e){return!e.dal.get(e.pointers.general.getNeverSaved())}(a);try{p.integrations.ravenUtils.breadcrumb("preSaveOperation on save started."),E.loggingUtils.fedopsLogger.interactionStarted(E.loggingUtils.fedopsLogger.INTERACTIONS.SAVE.PRESAVE_OPERATIONS),i.save(a,y),E.loggingUtils.fedopsLogger.interactionEnded(E.loggingUtils.fedopsLogger.INTERACTIONS.SAVE.PRESAVE_OPERATIONS)}catch(e){return p.integrations.ravenUtils.breadcrumb("preSaveOperation on save failed."),f&&f({preSaveOperation:e}),s.error(a,c.SAVE_FAILED_DUE_TO_PRE_SAVE_OPERATION,{stack:e.stack}),p.integrations.ravenUtils.captureError(e,{tags:{preSaveOperationError:!0,isFullSave:m}}),void E.log.error("Save has failed due to a preSaveOperation, and no request has been sent to the server - please see the failure details below:",e)}p.integrations.ravenUtils.breadcrumb("preSaveOperation on save finished.");var I,S,h=n(a),P=o.partial(T,a,v,l),C=o.partial(_,a,f);if(y&&(y.isPublish?(S=(I=a).pointers.general.getPublishSaveInnerPointer(),I.dal.set(S,!0)):y.isSilent&&function(e){var t=e.pointers.general.getSilentSaveInnerPointer();e.dal.set(t,!0)}(a),o.isUndefined(y.onBoarding)||t(a,y.onBoarding)),g.setSaveProgress(!0),v){var D=O(a);r.runFirstSaveTasks(e.getSaveTasksConfig(a),a.dal,P,C,h,D)}else if(m)r.runFullSaveTasks(e.getSaveTasksConfig(a),a.dal,P,C,h);else{if(function(e){var t=e.dal.get(e.pointers.general.getSaveInvalidationCount());return d.isOpen("block_after_third_invalid_save")&&t>=3}(a))return C({documentServices:{errorCode:-1,errorType:u.save.SAVE_BLOCKED_BY_DOCUMENT_SERVICES,errorDescription:"Save has failed 3 times due to invalidation error (-10104). This site is corrupt (in client!).\nPlease refresh the frame to reload to the last failed saved state."}}),void s.error(a,c.SAVE_BLOCKED_BY_DOCUMENT_SERVICES);r.runPartialSaveTasks(e.getSaveTasksConfig(a),a.dal,P,o.partial(A,a,C),h)}})))})),autosave:w((function(t,o,a){var u=n(t);t.setOperationsQueue.flushQueueAndExecute(v.action((function(){if(!d.isOpen("sv_autoSaveNoMobileMerge")){var n;E.loggingUtils.fedopsLogger.interactionStarted(E.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.PRESAVE_OPERATIONS),E.loggingUtils.performance.start(E.loggingUtils.performanceMetrics.AUTOSAVE.PRESAVE_OPERATIONS);try{i.autosave(t),E.loggingUtils.fedopsLogger.interactionEnded(E.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.PRESAVE_OPERATIONS)}catch(e){if(n=e,a)return a({preAutosaveOperation:n}),s.error(t,c.AUTOSAVE_FAILED_DUE_TO_PRE_SAVE_OPERATION,{stack:n.stack}),void E.log.error("Autosave has failed due to a pre Autosave operation, and no request has been sent to the server - please see the failure details below:",n)}finally{E.loggingUtils.performance.finish(E.loggingUtils.performanceMetrics.AUTOSAVE.PRESAVE_OPERATIONS,{report:!0,additionalData:{success:(!n).toString(),pagesCount:m.getNumberOfPages(t)}})}}r.runAutosaveTasks(e.getSaveTasksConfig(t),t.dal,o,a,u)})))})),saveAsTemplate:w((function(e,t,n){try{i.saveAsTemplate(e)}catch(e){if(n)return void n({preSaveAsTemplateOperation:e})}M.save(e,(function(){M.publish(e,S.bind(null,e,t,n),n)}),n,!1)})),publish:w((function(t,o,i,a){var s,c,u=e.getSaveTasksConfig(t),l=[u,t.dal,o,i,n(t),a];s=u,c=t.dal,d.isOpen("ds_saveChangesBeforePublish")&&r.shouldSaveBeforePublish(s,c)?(p.integrations.ravenUtils.breadcrumb("shouldSaveBeforePublish - saving before publishing",{ds_saveChangesBeforePublish:d.isOpen("ds_saveChangesBeforePublish")}),E.loggingUtils.fedopsLogger.interactionStarted(E.loggingUtils.fedopsLogger.INTERACTIONS.SAVE_BEFORE_PUBLISH),M.save(t,(function(){E.loggingUtils.fedopsLogger.interactionEnded(E.loggingUtils.fedopsLogger.INTERACTIONS.SAVE_BEFORE_PUBLISH),r.runPublishTasks.apply(r,l)}),i,!1,a)):(p.integrations.ravenUtils.breadcrumb("shouldSaveBeforePublish - no need to save, only publishing"),t.setOperationsQueue.flushQueueAndExecute(v.action((function(){r.runPublishTasks.apply(r,l)}))))})),canUserPublish:function(e){if(!g.isEnabled())return!1;if(!a.isFirstSave(e)&&!a.isOwner(e)){var t=a.getUserPermissions(e);return o.includes(t,l.PERMISSIONS.PUBLISH)}return!0},saveState:g};return M})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r={targetComponent:"PAGES_CONTAINER",type:"BOTTOM_TOP"},i=function e(t,n){return s(t,n)&&o.every(t.pointers.components.getChildren(n),o.partial(e,t))},a=function(e,t){return e.dal.full.get(e.pointers.getInnerPointer(t,["layout","anchors"]))},s=function(e,t){return o.isEmpty(a(e,t))},function(e,t){var n;if(!s(e,t)){var c=a(e,t);if(!function(e){return"masterPage"===e.id}(t)||o.size(c)>1||(n=o.head(c),!o.isEqual(r,o.pick(n,["targetComponent","type"]))))return!1}return o.every(e.pointers.components.getChildren(t),o.partial(i,e))})},function(e,t,n){var o;e.exports=(o=n(39),function(e){e.siteAPI.isMobileView()||o.runPartialConversionAllPages(e,!1)})},function(e,t){e.exports=P},function(e,t){e.exports=A},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(203),i=n(136).getSavePaths(),a={documentServicesModel:!0,rendererModel:!0,serviceTopology:!0,origin:!0},{extendSavableSnapshotWithFullSnapshot:function(e,t){return e.merge(t.filter((function(e,t){return a[t]})))},getSaveableSnapshot:function(e){return o.reduce(i,(function(t,n){return e.hasIn(n)?t.setIn(n,e.getIn(n)):t}),r.fromJS({}))}})},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(33).common.TPABaseUrlBuilder,(i=function(e){r.call(this,e)}).prototype=o.assign(new r,{addMetaSiteId:function(e){return this.addQueryParam("metaSiteId",e)},addEditorSessionId:function(e){return this.addQueryParam("editorSessionId",e)},addAcceptJson:function(){return this.addQueryParam("accept","json")},addAppVersionAndSiteRevision:function(e,t){return e?this.addQueryParam("appVersion",e).addQueryParam("siteRevision",t):this}}),i)},function(e,t){var n;e.exports=(n={isSaveInProgress:!1,isSaveAllowedByDSconfig:!0},{setSaveProgress:function(e){n.isSaveInProgress=e},isSaveInProgress:function(){return n.isSaveInProgress},canSave:function(){return n.isSaveAllowedByDSconfig&&!n.isSaveInProgress},isEnabled:function(){return n.isSaveAllowedByDSconfig},setSaveAllowed:function(e){n.isSaveAllowedByDSconfig=e}})},function(e,t){e.exports=T},function(e,t){e.exports={incNumberSuffix:function(e,t){t=t||" ";var n=parseInt(e.split(t).pop(),10);return isNaN(n)?"".concat(e+t,"2"):e.split(t).slice(0,-1).concat(n+1).join(t)}}},function(e,t,n){var o,r,i,a,s,c,u;e.exports=(o=n(0),r=n(1),i=n(21),a=n(35),s=n(110),c=n(89),u=["primary"],{create:function(e){var t=function(t,r){var u,l=a.getAppDataByAppDefinitionId(e,"61f33d50-3002-4882-ae86-d319c1a249ab");if(l){var p=(u=e,o.some(i.getPagesList(u),o.partial(c.isBlogPage,u))),d="Deleted"===l.state;p&&d?s.restoreWixappOnServer(e,l.appDefinitionId,n("restore",t,r),r):p||d?!p&&d?t():p&&!d&&t():s.disableWixappOnServer(e,l.appDefinitionId,n("disable",t,r),r)}else t()},n=function(t,n,o){return function(i){i&&i.success?(function(e,t){a.registerAppData(e,t)}(e,i.payload),n()):(r.log.error('wixapps blog "'.concat(t,'" operation failed on MetaSite, errorCode: ').concat(i.errorCode,", errorDecription: ").concat(i.errorDescription)),o())}};return{partialSave:function(e,n,o,r){t(o,r)},fullSave:function(e,n,o,r){t(o,r)},firstSave:function(e,t,n){n()},saveAsTemplate:function(e,t,n){n()},autosave:function(e,t,n){n()},publish:function(e,t){t()},getTaskName:function(){return"wixappsSavePermissionsPlugin"},getSnapshotTags:function(){return u}}}})},function(e,t,n){var o,r;e.exports=(o=n(0),r={isEcomPagesMissingExperimentOn:o.noop},{setExperiments:function(e){o.merge(r,e)},getExperiments:function(){return r}})},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(140),r=n(71),i=n(47),a=n(46),s=n(48),{partialSave:c=o((function(e,t,n,o){var c,u=(c=t,a.extractFromSnapshot(c,["rendererModel","clientSpecMap"],!0));if(s.wixCodeWidgetService.getWixCodeSpec(u)){var l=i.traceWithSnapshot(t,{action:"saveWixCodeInMetasite"});r.save(t,(function(e){!function(e,t){t?t.success?e({message:t.payload.clientSpecMap}):e({message:t,level:i.levels.ERROR}):e({message:"no wix code apps to save"})}(l,e),n(e)}),(function(e){l({message:e,level:i.levels.ERROR}),o(e)}))}else n()})),fullSave:c,firstSave:c,saveAsTemplate:c,publish:function(e,t){t()},autosave:function(e,t,n){n()},getTaskName:function(){return"saveWixCodeTask"},getSnapshotTags:function(e){switch(e){case"autosave":return["autosave"];default:return["primary"]}}})},function(e,t,n){e.exports=function(){var e=n(22),t=n(40),o=n(184);function r(n,r,i,a){t.getExistingWixCodeAppFromSnapshot(r)?o.runUsingSnapshot(r).then((function(){r.getIn(e.paths.IS_APP_READ_ONLY)?i():i({changes:[{path:e.paths.IS_APP_READ_ONLY,value:!0}]})})).catch((function(e){a(e)})):i()}return{partialSave:r,fullSave:r,firstSave:r,saveAsTemplate:r,autosave:function(e,t,n){n()},publish:function(e,t){t()},getTaskName:function(){return"markAppImmutable"},getSnapshotTags:function(e){switch(e){case"autosave":return["autosave"];default:return["primary"]}}}}()},function(e,t,n){var o;e.exports=(o=n(110),{partialSave:function(e,t,n){n()},fullSave:function(e,t,n){n()},firstSave:n(140)((function(e,t,n,r){!function(e,t,n){var r=e.getIn(["rendererModel","metaSiteId"]),i=e.getIn(["documentServicesModel","editorSessionId"]),a=e.getIn(["rendererModel","clientSpecMap"]).toJS(),s=e.getIn(["serviceTopology","appStoreUrl"]);o.completeProvisionAppsAfterSave(s,r,i,a,t,n)}(t,n,r)})),saveAsTemplate:function(e,t,n){n()},autosave:function(e,t,n){n()},publish:function(e,t){t()},getTaskName:function(){return"unProvisionedApps"},getSnapshotTags:function(){return["primary"]}})},function(e,t,n){e.exports=function(){var e=n(73),t=n(66),o=n(140);function r(){e.onSave()}var i=function(e,n,o,i,a){var s=function(e){i(e),r()};setTimeout((function(){o?t.settleOnFirstSave(e,n,s,a):t.settleOnSave(e,n,s,a)}),200)},a=o((function(e,t,n,o){i(e,t,!1,n,o)})),s=function(e,t,n,o,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=s.settleInServer;c?(r(),n()):a(e,t,n,o)};return{saveAsTemplate:function(e,t,n){n()},publish:function(e,t){t()},getTaskName:function(){return"unProvisionedAppsAppFlows"},getSnapshotTags:function(){return["primary"]},firstSave:o((function(e,t,n,o){i(e,t,!0,n,o)})),partialSave:s,fullSave:s,autosave:s}}()},function(e,t,n){var o,r;e.exports=(o=n(55),r=function(){o.siteSaved()},{partialSave:function(e,t,n){n(),r()},fullSave:function(e,t,n){n(),r()},firstSave:function(e,t,n){n(),r()},saveAsTemplate:function(e,t,n){n()},publish:function(e,t){t()},autosave:function(e,t,n){o.siteSaved(),n()},getTaskName:function(){return"saveEventDispatcher"},getSnapshotTags:function(){return["primary"]}})},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(1),r=(n(5),n(3)),i=n(6),a=(n(2),n(218)),s=n(68),c=n(82),u=n(21),l=n(27),p=n(142),d=t.multilingual.PointerOperation;f();var g="CUSTOM_MAIN_MENU";function f(){i.registerHook(i.HOOKS.REMOVE.AFTER,S,"mobile.core.components.Page"),i.registerHook(i.HOOKS.REMOVE.AFTER,S,"wixapps.integration.components.AppPage"),i.registerHook(i.HOOKS.ADD.BEFORE,v,"wysiwyg.viewer.components.menus.DropDownMenu"),i.registerHook(i.HOOKS.ADD.BEFORE,v,"wysiwyg.viewer.components.ExpandableMenu"),i.registerHook(i.HOOKS.ADD.BEFORE,v,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"),c.registerPageDataChangedCallback(E),c.registerPageAddedCallback(y)}function m(t,n,o){if(!e.isString(n)||"#"!==n[0])return!1;var i=r.getDataItemById(t,n.replace("#",""),o);return"CustomMenu"===e.get(i,"type")}function v(t,n,o,r){var i=e.get(r,"data.menuRef"),a=t.pointers.components.getPageOfComponent(o).id;i?m(t,i,a)||(r.data.menuRef="#CUSTOM_MAIN_MENU"):(i=r.dataQuery,r.data={menuRef:m(t,i,a)?i:"#CUSTOM_MAIN_MENU",type:"CustomMenuDataRef"},delete r.dataQuery)}function E(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!l.isPopup(t,n)){for(var a,c=!1,p=t.pointers.data.getDataItemsWithPredicate({type:"PageLink",pageId:"#".concat(n)}),g=0;g<p.length;g++)if(a=t.pointers.data.getDataItemWithPredicate({type:"BasicMenuItem",link:"#".concat(p[g].id)})){c=!0;break}c&&function(t,n,o){var i,a,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=t.dal.full.get(n),p=e.reduce(o,(function(n,o,r){switch(r){case"title":n.label=o;break;case"hidePage":i=s.getLinkItemByMenuItemId(t,l.id),a=u.getPageData(t,s.sanitizeHash(i.pageId)),n.isVisible=!o,e.isNil(a.mobileHidePage)&&(n.isVisibleMobile=!o);break;case"mobileHidePage":n.isVisibleMobile=!o}return n}),{});n.multilingual=d.SET,n.useOriginalLanguage=c,r.setDataItemByPointer(t,n,e.assign(l,p),"data")}(t,a,o,i)}}function y(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!l.isPopup(e,t)&&n&&function(e,t){var n=e.pointers.data.getDataItemFromMaster(t);n.useOriginalLanguage=!0;var o=e.dal.get(n);A(e,"#".concat(o.id),o.title,o.hidePage,o.mobileHidePage)}(e,t)}function I(e,t,n){var r=s.getMenuDataItemPointer(e,t),i=e.dal.get(r).items,a=s.getMenuDataItemPointer(e,n),c=e.dal.get(a),u=c.items,l=u.indexOf("#".concat(t));u.splice(l,1),i&&u.splice.apply(u,[l,0].concat(o(i))),a.useOriginalLanguage=!0,e.dal.set(a,c),e.dal.remove(r)}function S(t,n){var o=r.getDataItemById(t,"CUSTOM_MENUS").menus;return e.forEach(o,(function(o){!function(t,n,o){var i=o.id,a=s.getItemIdAndParent(e.pick(n,["items","id"]),{type:"PageLink",pageId:"#".concat(i)});if(a){I(t,a.itemId,a.parentId);var c=r.getDataItemById(t,n.id,void 0,void 0,!0);s.updateTranslatedMenuItems(t,c)}}(t,o,n)})),{success:!0}}function h(t,n,o,i,a,c,u,l){s.validateParent(t,a,n,l),function(t,n,o,i,a,s){var c=r.createDataItemByType(t,"BasicMenuItem"),u=t.pointers.data.getDataItemFromMaster(n);r.setDataItemByPointer(t,u,e.assign(c,{id:n,label:o,isVisible:!a,isVisibleMobile:!("boolean"==typeof s?s:a),link:i?"#".concat(i):void 0}),"data")}(t,n,o,i,c,u);var p=s.getMenuDataItemPointer(t,a),d=t.pointers.getInnerPointer(p,"items");d.useOriginalLanguage=!0,t.dal.isExist(d)?t.dal.push(d,"#".concat(n)):t.dal.set(d,["#".concat(n)])}function P(t,n,o,i,a,s,c,u){var l=function(t,n){var o=r.generateNewDataItemId(),i=t.pointers.data.getDataItemFromMaster(o);return r.setDataItemByPointer(t,i,e.assign(n,{id:o}),"data"),o}(t,o);h(t,n,i,l,a,s,c,u)}function A(t,n,o,i,a){var s=r.createDataItemByType(t,"PageLink");P(t,r.generateNewDataItemId(),e.assign(s,{pageId:n}),o,g,i,a)}return{addHeaderItem:function(e,t,n,o,r,i){return h(e,t,n,null,o||g,r,i,g)},addLinkItem:function(e,t,n,o,r,i,s){return function(e,t){if(a.isPageLink(e,t))throw new Error('Explicitly adding a LinkItem of type "PageLink" is not allowed')}(e,n),P(e,t,n,o,r||g,i,s,g)},addPageItem:A,deleteItem:function(e,t){!function(e,t){t=s.sanitizeHash(t);var n=s.getLinkItemByMenuItemId(e,t);if(n){var o=n.pageId?s.sanitizeHash(n.pageId):null,r=l.isPopup(e,o);if("PageLink"===n.type&&!r)throw new Error("Explicitly deleting a page link item is not allowed")}}(e,t),function(e,t){var n=s.getSiteMenu(e);I(e,t,s.getParentItemId({items:n,id:g},t))}(e,t)},getMenu:function(t,n){var o=s.getSiteMenu(t);return n?e.filter(o,(function(n){return!function(t,n){var o=e.get(n,"pageId");if(o&&"PageLink"===e.get(n,"type")){o=o.replace("#","");var i=r.getDataItemById(t,o),a=e.get(i,"tpaApplicationId"),s=e.get(i,"tpaPageId");return p.isPageMarkedAsHideFromMenu(t,a,s)}return!1}(t,n.link)})):o},initialize:f,moveItem:function(e,t,n,o){t=s.sanitizeHash(t);var r=s.getSiteMenu(e),i=s.getParentItemId({items:r},t)||"CUSTOM_MAIN_MENU";n=n||"CUSTOM_MAIN_MENU",s.validateParent(e,n,t,"CUSTOM_MAIN_MENU");var a=s.getIndexOfItemInParent(e,i,t),c=s.getMenuDataItemPointer(e,i),u=e.dal.get(c);u.items.splice(a,1),e.dal.set(c,u);var l=s.getMenuDataItemPointer(e,n),p=e.dal.get(l);p.items=p.items||[],p.items.splice(o,0,"#".concat(t)),e.dal.set(l,p)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),o=n(3),r=n(68),i=n(27);function a(t,n,i){var a=r.getMenuDataItemPointer(t,n),s=t.dal.get(a);if(!s)throw new Error('Cannot update item with "'.concat(n,'", it does not exist'));o.setDataItemByPointer(t,a,e.assign(s,i),"data")}function s(e,t){var n=t.pageId&&t.pageId.replace("#","");return"PageLink"===t.type&&!i.isPopup(e,n)}function c(e,n){var o=r.getLinkIdByMenuItemId(e,n);if(!o)return t.MENU_ITEM_TYPES.HEADER;var i=r.getMenuDataItemPointer(e,o);return"PageLink"===e.dal.get(e.pointers.getInnerPointer(i,"type"))?t.MENU_ITEM_TYPES.PAGE:t.MENU_ITEM_TYPES.LINK}return{setItemVisibility:function(e,t,n,o){a(e,t,{isVisible:!n,isVisibleMobile:!o})},isItemRemovable:function(e,n){return c(e,n)!==t.MENU_ITEM_TYPES.PAGE},setItemLabel:function(e,t,n){a(e,t,{label:n})},getItemType:c,updateLinkItem:function(t,n,i){if(s(t,i))throw new Error('Explicitly setting a LinkItem of type "PageLink" is not allowed');var a=r.getLinkIdByMenuItemId(t,n);if(!a)throw new Error('Cannot update item with "'.concat(n,'", link does not exist'));var c=r.getMenuDataItemPointer(t,a),u=o.generateNewDataItemId();o.setDataItemByPointer(t,c,e.assign(i,{id:u}),"data")},isPageLink:s}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A,T,_,O,C,D;e.exports=(o=n(0),r=n(79),i=n(33),a=n(1),n(10),s=n(4),c=n(20),u=n(7),l=n(18),p=n(16),d=n(66),g=n(111),f=n(147),m=n(73),v=n(31),E=n(99),n(34),y=n(28),I=n(55),S=n(221),h=n(112),P=n(6),T=function(e,t,n,o,r,i,a){p.registerAppData(e,r);try{_(n)(e,t,o,r,i,a)}catch(e){a&&a(e)}},_=function(e){return{TPAWidget:g.addWidgetAfterProvision,TPASection:f.addSectionAfterProvision}[e]},O=function(e,t){var n={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i}[t||"all"];return n&&n.test(e)},D=function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0;if(n&&!n.dontAdd){var u=a.callback;a.callback=function(){P.executeHook(P.HOOKS.ADD_TPA.AFTER,null,[t,n]),u&&u.apply(void 0,arguments)},T(t,r,e,a,n,s,o.get(a,"onError")||c)}},{provisionApp:A=function(e,t,n,r,i,a,s){i=i||{};var c=p.getAppDataByAppDefinitionId(e,r);E.requestAppMarketDataToBeCached(e,r),!i.sourceTemplateId||c?c?(m.isPending(e,c)&&m.add(c),a(c)):d.preSaveAddApp(e,r,a,s,o.get(i,"appVersion")):d.provisionAppFromSourceTemplate(e,r,i.sourceTemplateId,a,s)},provisionWidget:function(e,t,n,o){var r=function(t,n){e.setOperationsQueue.asyncPreDataManipulationComplete(t,n)};A(e,0,y.TYPE.TPA_WIDGET,n,o,r,(function(){o.onError&&o.onError(),r(null,new Error("addWidget - provision failed"))}))},provisionSection:function(e,t,n,r,i){var s="".concat(y.TYPE.TPA_SECTION,"_").concat(a.guidUtils.getUniqueId());return(r=r||{}).sectionId=s,A(e,0,y.TYPE.TPA_SECTION,n,r,(function(t,n){(t=t||{}).additionalOptions=r,e.setOperationsQueue.asyncPreDataManipulationComplete(t,n)}),(function(){i&&i(),e.setOperationsQueue.asyncPreDataManipulationComplete(null,new Error("addSection - provision failed"))})),o.assign(t,{sectionId:s})},provisionMultiSection:function(e,t,n,r){if(f.alreadyInstalled(e,n)){var i="".concat(y.TYPE.TPA_SECTION,"_").concat(a.guidUtils.getUniqueId());r.sectionId=i;var s=p.getWidgetDataFromTPAPageId(e,n,r.pageId),c=p.getAppDataByAppDefinitionId(e,n);return s&&p.isMultiSectionInstanceEnabled(c,s.widgetId)?(r.applicationId=c.applicationId,r.appDefinitionId=c.appDefinitionId,r.widgetData=s,e.setOperationsQueue.asyncPreDataManipulationComplete(c),o.assign(t,{sectionId:i})):e.setOperationsQueue.asyncPreDataManipulationComplete(null,new Error("Creating this section is not allowed"))}return e.setOperationsQueue.asyncPreDataManipulationComplete(null,new Error("Main section is not installed"))},provisionAppDemoSave:function(e,t,n,o){var r=p.getAppData(e,t)||{};d.preSaveAddApp(e,r.appDefinitionId,e.setOperationsQueue.asyncPreDataManipulationComplete.bind(e.setOperationsQueue),(function(t){o&&o(),e.setOperationsQueue.asyncPreDataManipulationComplete(null,t)}))},addApp:T,addAppWrapper:D,addSection:function(e,t,n,r,i,a){i=o.merge(i,o.get(t,"additionalOptions")),t=o.omit(t,"additionalOptions"),D(y.TYPE.TPA_SECTION,e,t,n,r,i,o.noop,a)},addMultiSection:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};p.registerAppData(e,t);var i=r.callback;r.callback=function(){P.executeHook(P.HOOKS.ADD_TPA.AFTER,null,[e,t]),i&&i.apply(void 0,arguments)},f.addMultiSection(e,n,r)},addSubSection:function(e,t,n,r){r=r||{};var i=p.getAppDataByAppDefinitionId(e,n);if(i){var a=o.find(i.widgets,["appPage.id",r.pageId]);if(a){var s=h.addSubSection(e,t,a,i,r);o.assign(t,{sectionId:s}),e.setOperationsQueue.isRunningSetOperation()?e.setOperationsQueue.executeAfterCurrentOperationDone((function(){f.invokeSectionCallback(r,t,s,!0),P.executeHook(P.HOOKS.ADD_TPA.AFTER,null,[e])})):(f.invokeSectionCallback(r,t,s,!0),P.executeHook(P.HOOKS.ADD_TPA.AFTER,null,[e]))}}},settingsUpdated:function(e,t,n,r){if("*"===n){var i=v.getAllAppCompsByAppId(e,t);o.forEach(i,(function(e){I.callSettingsUpdateCallback(e.id,r)}))}else I.callSettingsUpdateCallback(n,r)},refreshApp:function(e,t,n){n=o.merge(n||{},{cacheKiller:"".concat(o.now())}),o.forEach(t,(function(t){var r=o.get(t,"id");if(r){var i=e.siteAPI.getTpaCompPreviewData(r)||{};e.siteAPI.setTpaCompPreviewData(r,o.defaults({queryParams:n},i))}}))},getSectionRefByPageId:function(e,t){var n=l.getPage(e,t),r=s.getTpaChildren(e,n);return o.find(r,(function(t){return function(e,t){var n=s.getType(e,t);return n===y.COMP_TYPES.TPA_SECTION||n===y.TPA_COMP_TYPES.TPA_SECTION}(e,t)}))},setExternalId:function(e,t,n,r,i){O(n)?(o.invoke(e.siteAPI,"updatePreventRefreshState",t.id,{preventRefresh:Boolean(i)}),s.data.update(e,t,{referenceId:n},!0),r("ExternalId: ".concat(n," will be saved when the site will be saved"))):r({onError:"The given externalId: ".concat(n," is not a valid UUID.")})},getExternalId:function(e,t){var n=s.data.get(e,t,null,!0);return n&&n.referenceId},postBackThemeData:function(e,t,n){var o=c.style.getId(e,u.getComponentById(e,t));if("STYLE"!==n.type||"STYLE"===n.type&&o===n.values){var r=S.getStyleDataToPassIntoApp(e,t);C(t,"THEME_CHANGE",r)}},postMessageBackToApp:C=function(e,t,n){var o=r("#".concat(e)).find("iframe")[0];try{i.common.tpaPostMessageCommon.callPostMessage(o,{intent:"addEventListener",eventType:t,params:n})}catch(e){}},getDefaultLayout:function(e,t,n){var r=p.getWidgetData(e,t,n);return{height:o.get(r,"defaultHeight")||500,width:o.get(r,"defaultWidth")||980,x:0}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(126),o=n(6),r=n(35),i=n(515),a=n(189),s=n(16),c=n(66),u=n(32);function l(t,n,i,c,l){var d=e.get(c,"reportProgress");d&&d({step:"clientSpecMap"}),function(e,t){var n=t.appDefinitionId,o=t.version,r=s.getAppDataByAppDefinitionId(e,n);return r&&r.version===o}(t,l)||(l.pendingAction=u.APP_ACTION_TYPES.UPDATE,r.registerAppData(t,l)),a.notifyAppUpdated(l.applicationId,c,(function(e){var r=l.appDefinitionId,a=l.version;p(e,t,r,a).then((function(){o.executeHook(o.HOOKS.PLATFORM.APP_UPDATED,"",[t,l]),n(l)}),(function(){o.executeHook(o.HOOKS.PLATFORM.APP_UPDATED,"",[t,l]),i(l)}))}))}var p=function(t,n,o,r){return e.get(t,"success")?i.installCollections(n,o,r):Promise.reject()};function d(n,i,c,l,d){var g=e.get(d,"appDefinitionId"),f=s.getAppDataByAppDefinitionId(n,g);s.isAppActive(f)||(d.notProvisioned=!0,r.registerAppData(n,d));d.firstInstall=!0,d.origin=e.get(l,"origin");var m=n.dal.get(n.pointers.general.getServiceTopology()),v=t.specMapUtils.resolveEditorScriptUrl(d,{clientSpec:d,serviceTopology:m});a.addApp(n,v,(function(t){var a=e.assign(v,t||{}),s=e.get(d,"version");p(a,n,g,s).then((function(){o.executeHook(o.HOOKS.PLATFORM.APP_PROVISIONED,"",[n]),i(a)}),(function(){r.registerAppData(n,e.defaults({pendingAction:u.APP_ACTION_TYPES.REMOVE},d)),o.executeHook(o.HOOKS.PLATFORM.APP_PROVISIONED,"",[n]),c(e.defaults({success:!1},a))}))}))}return{provision:function(t,n,o){return new Promise((function(r,i){a.isInitiated()?function(t,n,o,r,i){var a=s.getAppDataByAppDefinitionId(t,n);s.isAppActive(a)?d(t,r,i,o,a):c.preSaveAddApp(t,n,e.partial(d,t,r,i,o),i,e.get(o,"appVersion"))}(t,n,o,r,i):i()}))},update:function(t,n,o,r){return new Promise((function(i,u){a.isInitiated()?function(t,n,o,r,i,a){var u=s.getAppData(t,n);u?o!==u.version?c.preSaveAddApp(t,u.appDefinitionId,e.partial(l,t,i,a,r),a,o):l(t,i,a,r,u):a("Application with the given applicationId is not installed. Please provision before updating")}(t,n,o,r,i,u):u(new Error("workerService is not initiated"))}))}}}()},function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r,i,a,s,c,u,l,p,d,g,f,m,v,E;e.exports=(r=n(0),i=n(33),a=n(20),s=n(7),c=n(4),u=n(10),l=n(30),p=function(e,t){r.isArray(t)?r.forEach(t,(function(t){d(e,t)})):d(e,t)},d=function(e,t){var n=t.key;switch(t.type){case"color":v(e,n="param_color_"+n,t);break;case"font":E(e,n="param_font_"+n,t);break;case"number":m(e,n="param_number_"+n,t);break;case"boolean":f(e,n="param_boolean_"+n,t)}},g=function(e,t){var n=function(e,t){return a.style.get(e,t)}(e,t);return r.defaults(n,{style:{groups:{},properties:{},propertiesSource:{}}}),n&&(n.styleType="custom"),n},f=function(e,t,n){var o=n.param.value;e.style.properties[t]=o,e.style.propertiesSource=r.get(e,"style.propertiesSource",{}),e.style.propertiesSource[t]="value"},m=function(e,t,n){var o=n.param.value;e.style.properties[t]=o,e.style.propertiesSource=r.get(e,"style.propertiesSource",{}),e.style.propertiesSource[t]="value"},v=function(e,t,n){var i=n.param.value.color&&"object"===o(n.param.value.color),a=i?n.param.value.color.name:n.param.value.rgba||n.param.value.cssColor;e.style.properties[t]=a,e.style.propertiesSource=r.get(e,"style.propertiesSource",{}),e.style.propertiesSource[t]=i?"theme":"value",n.param.value.hasOwnProperty("opacity")&&(e.style.properties["alpha-".concat(t)]=n.param.value.opacity)},E=function(e,t,n){var o=n.param.value;e&&e.style&&(e.style.properties[t]=JSON.stringify(o),e.style.propertiesSource=r.get(e,"style.propertiesSource",{}),e.style.propertiesSource[t]="value")},{setStyleParam:function(e,t,n,o){var r=s.getComponentById(e,t),i=g(e,r);p(i,n),a.style.update(e,r,i,(function(e){o(e)}))},mapWixParamsToCssValues:function(e,t,n){i.tpaStyleUtils.getValueForWixParams(u.styles.getAll(e,"masterPage").THEME_DATA,t,n)},getTpaColorsToSiteColors:function(){var e=r.reduce(["white/black","black/white","primery-1","primery-2","primery-3"],(function(e,t,n){return e[t]="".concat("color","_").concat(++n),e}),{}),t=r.range(1,26);return r.reduce(t,(function(e,t){return e["".concat("color","-").concat(t)]="".concat("color","_").concat(t+10),e}),e)},getStyleDataToPassIntoApp:function(e,t){var n=function(e,t){var n=s.getComponentById(e,t),o=c.data.get(e,n),i=r.get(o,"origCompId"),a=r.isUndefined(i)?n:s.getComponentById(e,i);return a?e.dal.get(e.pointers.getInnerPointer(a,"styleId")):null}(e,t),o=u.styles.getAll(e),a=l.getDocumentType(e),p=u.fonts.getCharacterSet(e),d=e.dal.get(e.pointers.general.getServiceTopology());return i.common.styleUtils.getStyleDataToPassIntoApp(n,o,!1,a,p,d,!1)}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d;e.exports=(o=n(0),n(33),n(5),r=n(223),i=n(16),a=n(55),s=n(34),c=n(520),u=n(138),l=function(e){return"editor"===e.originFrame},p=function(e,t,n){var a=c.fixOldPingPongMessageType(t.type);if(function(e,t){var n=o.get(u,"documentServicesHandlersThatOverridesViewerHandlers"),a={openSettingsDialog:!0,isApplicationInstalled:!0,onReady:!0}[t.type],s={isSupported:!0,registerEventListener:!0,getInstalledInstance:!0,resizeComponent:!0,revalidateSession:!0}[t.type],c=n[t.type],p=l(t),d=e.pointers.general.getRenderFlag("componentViewMode"),g=e.dal.get(d),f={setValue:!0,removeValue:!0,addApplication:!0}[t.type]&&"editor"===g,m=!{getInstalledInstance:!0,addApplication:!0}[t.type]||i.isSuperAppByCompId(e,t.compId);return(c||s||a||p||f)&&m&&r[t.type]}(e,t)&&(r[a].apply(this,[e,t,n]),d(t))){var p=l(t)?"editor":"preview";s.sendBIEvent(e,t,p)}},d=function(e){return"registerEventListener"!==e.type||o.includes(a.supportedEvents,e.data.eventKey)},{init:function(e){"undefined"!=typeof window&&(window.addEventListener("message",c.handleTPAMessage.bind(this,e,null,p),!1),e.siteAPI.flushDsBeforeLoadMessagesQueue((function(t){return c.handleTPAMessage.call(null,e,null,p,t)})))},callHandler:p})},function(e,t,n){e.exports=function(){n(79);var e,t=n(0),o=n(12),r=n(33),i=(n(34),n(18)),a=n(82),s=n(7),c=n(4),u=n(13),l=n(154),p=n(146),d=n(55),g=n(11),f=n(31),m=n(28),v=n(61),E=n(36),y=n(224),I=y.addCallback,S=function(e,n){var o=e.siteAPI.getModalCompData();return n===t.get(o,"modalStructure.id")?o.modalData:null},h=function(e,n){var o=e.siteAPI.getPopupsCompData(),r=t.find(o,["structure.id",n]);return r?r.popupData:null},P=function(e,n){var o=s.getComponentById(e,n);return c.data.get(e,o)||S(e,n)||h(e,n)||function(e,n){var o=e.siteAPI.getComponentsToRender(),r=t.find(o,["structure.id",n]);return t.get(r,"props.compData")}(e,n)},A=function(e,n){var o=P(e,n);return parseInt(t.get(o,"applicationId"),10)},T=function(e,n){var o=i.getPagesDataItems(e);return t.filter(o,{tpaApplicationId:n})},_=function(e,t){var n=A(e,t);return T(e,n)},O=function(e){return t.find(e,{hidePage:!1})},C=function(e,n){return t.find(e,{tpaPageId:n})},D=function(e,t,n){var r=u.generalInfo.getPublicUrl(e);return o.wixUrlParser.getUrl(e.siteDataAPI.siteData,{pageId:t.id,title:t.pageUriSEO,tpaInnerRoute:n},!1,!0,r)},w=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=l.title.get(e)||"",i=t.title||"",s=o.pageUtils.extractPageTitleFromOriginalTitle(t.pageTitleSEO,n,r),c=e.siteAPI.getCurrentUrlPageId(),u=a.isHomepage(e,c);return s?r=s:u||(r=n?"".concat(r," | ").concat(i):i),r},M=function(e,t){var n=u.generalInfo.getPublicUrl(e);return o.wixUrlParser.getUrl(e.siteDataAPI.siteData,{pageId:t.id,title:t.pageUriSEO},!1,!0,n)},b=function(n,o){var r;if(t.isArray(o.data.compIds))r=function(e,n){var o=[];return t.forEach(n,(function(t){var n=s.getComponentById(e,t);n&&o.push(n)})),o}(n,o.data.compIds);else{var i=A(n,o.compId);r=e.app.getRenderedReactCompsByApplicationId(n,i)}e.app.refreshApp(n,r,o.data.queryParams),n.siteAPI.forceUpdate()},R=function(t,n,o){var r=n.compId,i=s.getComponentById(t,r);e.comp.resize(t,i,n.data.width,n.data.height,o)},N=function(e,n){var o=S(e,n)||h(e,n),r=t.get(o,"origCompId");return r?s.getComponentById(e,r):null},x=function(e){e({error:{message:"comp not found"}})},L=function(e,t){var n=c.data.get(e,t);return{id:n.compId,title:n.name}},B=function(e,t){var n=c.getType(e,t);return n===m.COMP_TYPES.TPA_SECTION||n===m.COMP_TYPES.TPA_MULTI_SECTION};return{registerEventListener:function(t,n){var o=n.data.eventKey,r=n.compId;switch(o){case"EDITOR_EVENT":e.change.register.editorEventHandler(t,n.compId,(function(t){e.comp.postMessageBackToApp(r,o,t)}));break;case"COMPONENT_DELETED":e.change.register.deleteCompHandler(t,n.compId,(function(){e.comp.postMessageBackToApp(r,o,{})}));break;case"EDIT_MODE_CHANGE":e.change.register.editModeChangeHandler(t,n.compId,(function(t){e.comp.postMessageBackToApp(r,o,{editMode:t})}));break;case"SITE_PUBLISHED":e.change.register.sitePublishedHandler(t,n.compId,(function(){e.comp.postMessageBackToApp(r,o,{})}));break;case"SETTINGS_UPDATED":e.change.register.settingsUpdatedHandler(t,n.compId,(function(t){e.comp.postMessageBackToApp(r,o,t)}));break;case"WINDOW_PLACEMENT_CHANGED":e.change.register.windowPlacementChangedHandler(t,n.compId,(function(t){e.comp.postMessageBackToApp(r,o,t)}));break;case"THEME_CHANGE":e.change.register.themeChangeHandler(t,r,(function(n){e.style.postBackThemeData(t,r,n)}));break;case"DEVICE_TYPE_CHANGED":e.change.register.deviceTypeChangeHandler(t,n.compId,(function(t){e.comp.postMessageBackToApp(r,o,{deviceType:t})}));break;case"STYLE_PARAMS_CHANGE":break;case"SITE_SAVED":e.change.register.siteSavedHandler(t,n.compId,(function(){e.comp.postMessageBackToApp(r,o)}));break;case"ON_MESSAGE_RESPONSE":t.siteAPI.reportBI(e.bi.errors.EVENT_TYPE_NOT_SUPPORTED);break;case"PUBLIC_DATA_CHANGED":var i=A(t,r);e.change.register.registerPublicDataChangedHandler(t,n.compId,i,(function(t){e.comp.postMessageBackToApp(r,o,t)}))}},siteInfo:function(e,t,n){var a={},s=i.data.get(e,e.siteAPI.getCurrentUrlPageId());if(s.siteTitle=w(e,s),r.common.utils.sdkVersionIsAtLeast(t.version,"1.42.0")?a.pageTitle=s.siteTitle||"":(a.siteTitle=s.siteTitle||"",a.pageTitle=s.title||""),a.pageTitleOnly=w(e,s,!1),a.siteDescription=l.description.get(e),a.siteKeywords=l.keywords.get(e),u.generalInfo.isFirstSave(e))a.baseUrl="";else{var c=u.generalInfo.getPublicUrl(e)||"",p=c&&o.urlUtils.parseUrl(c)||"";a.baseUrl=c&&"".concat(p.protocol,"//").concat(p.host).concat(p.path)||"baseUrl is not available - site is saved but not published"}var d=e.siteAPI.getCurrentUrl();a.url=r.common.utils.appendProtocolToUrlIfNeeded(d.host,d),a.referer=window.document.referrer,n(a)},getSitePages:function(e,t,n){e.siteAPI.handleDsTpaHandler({msg:t,addCallback:I,ps:e,callback:n,siteMetadata:u})},getSiteMap:function(e,t,n){e.siteAPI.handleDsTpaHandler({msg:t,addCallback:I,ps:e,callback:n,siteMetadata:u})},refreshApp:b,refreshAppByCompIds:b,getSectionUrl:function(e,t,n){if(!u.generalInfo.isFirstSave(e)){var o=t.data.sectionIdentifier,r=_(e,t.compId),i=C(r,o)||O(r);n(i?{url:M(e,i)}:{error:{message:"This app does not have any pages."}})}else n({error:{message:"Page was not found."}})},openSettingsDialog:function(n,o,r){var i,a=A(n,o.compId),s=e.app.getAllCompsByApplicationId(n,a);if(o.data&&o.data.compId){if(i=t.find(s,{id:o.data.compId}),t.isUndefined(i))return void r({onError:"comp not found"})}else i=t.find(s,{id:o.compId});var c={pageId:i.pageId,compId:i.id};y.doPostMessage("openSettingsDialog",c,o.compId)},isSupported:function(e,t,n){n(!0)},navigateToPage:function(e,n,o){var a=e.siteAPI.getPrimaryPageId(),u=i.getPageIdList(e,!1,!0);r.services.tpaNavigationService.navigateToPage({scrollToAnchor:e.siteAPI.scrollToAnchor.bind(e.siteAPI),registerNavigationComplete:e.siteAPI.registerNavigationComplete.bind(e.siteAPI),navigateToPage:e.siteAPI.navigateToPage.bind(e.siteAPI)},n,a,u,(function(t){var n=r.common.utils.Constants.TOP_PAGE_ANCHOR_PREFIX+t;return i.getPageAnchors(e,t,n)}),(function(n){var o=s.getComponentById(e,n),r=c.data.get(e,o);return t.get(r,"id")}),o),y.doPostMessage("deselectComponent")},getExternalId:function(t,n,o){o(e.comp.getExternalId(t,s.getComponentById(t,n.compId)))},getInstalledInstance:function(n,o,r){var i={},a=e.app.getDataByAppDefId(n,o.data.appDefinitionId);t.isEmpty(a)?i={onError:!0}:i=e.app.isInstalled(n,o.data.appDefinitionId,!1)?{instanceId:a.instanceId}:{onError:!0};r(i)},revalidateSession:function(t,n,o){var r=A(t,n.compId),i=t.dal.get(t.pointers.general.getMetaSiteId());e.provision.refreshAppSpecMap(t,r,i,(function(e){o({instance:e.instance})}),(function(e){o({onError:!0,error:{errorCode:e.status,errorText:e.statusText,error:JSON.parse(e.response)}})}))},resizeComponent:R,settingsResizeComponent:function(e,t,n){R(e,t,n)},getValue:function(t,n,o){var r=n.compId;if(n.data.scope===e.data.SCOPE.APP){var i=A(t,r);i?e.data.app.get(t,i,n.data.key,o):x(o)}else{var a=s.getComponentById(t,r)||N(t,r);a?e.data.comp.get(t,a,n.data.key,o):x(o)}},getValues:function(t,n,o){var r=n.compId;if(n.data.scope===e.data.SCOPE.APP){var i=A(t,r);i?e.data.app.getMulti(t,i,n.data.keys,o):x(o)}else{var a=s.getComponentById(t,r)||N(t,r);a?e.data.comp.getMulti(t,a,n.data.keys,o):x(o)}},getPublicData:function(t,n,o){var r=n.compId,i=A(t,r),a=s.getComponentById(t,r)||N(t,r);i&&a?e.data.getPublicData(t,i,a,o):x(o)},setValue:function(e,t,n){var o=s.getComponentById(e,t.compId);o?p.set(e,o,t.data.key,t.data.value,t.data.scope,n):x(n)},removeValue:function(t,n,o){var r=s.getComponentById(t,n.compId);r?e.data.remove(t,r,n.data.key,n.data.scope,o):x(o)},getCurrentPageAnchors:function(e,n,a){var c=e.siteAPI.getPrimaryPageId(),u=i.getPage(e,c),l=s.getComponentByType(e,"wysiwyg.common.components.anchor.viewer.Anchor",u),p=t.map(l,(function(t){return L(e,t)})),d=r.common.utils.Constants.TOP_PAGE_ANCHOR_PREFIX+c,g=o.scrollAnchors.getPageTopAnchor(c,d),f={id:g.compId,title:g.name};p.push(f),a(p)},getComponentInfo:function(n,o,r){var i=s.getComponentById(n,o.compId),a=c.data.get(n,i),u=a.applicationId,l=e.app.getData(n,u),p=g.isShowOnAllPages(n,i),d=l.widgets[a.widgetId];r({compId:o.compId,showOnAllPages:p,pageId:p?"":n.pointers.components.getPageOfComponent(i).id,tpaWidgetId:t.get(d,"tpaWidgetId",""),appPageId:t.get(d,"appPage.id","")})},settpads:function(t){e=t},navigateToSectionPage:function(t,n,o){y.doPostMessage("deselectComponent"),t.siteAPI.handleDsTpaHandler({msg:n,ps:t,addCallback:I,callback:o,tpads:e,installedTpaAppsOnSiteService:f,componentDetectorAPI:s,isPageComp:B,routersGetters:v,structure:g,getApplicationId:A})},getStateUrl:function(e,t,n){if(!u.generalInfo.isFirstSave(e)){var o=t.data.sectionId,r=_(e,t.compId),i=C(r,o);if(i){if(v.getRouterDataForPageIfExist(e,i.id))return void n({error:{message:"Can't retrieve url for a dynamic page. Please use the platform app API instead."}});n({url:D(e,i,t.data.state)})}else{var a=O(r);if(a){if(v.getRouterDataForPageIfExist(e,a.id))return void n({error:{message:"Can't retrieve url for a dynamic page. Please use the platform app API instead."}});n({url:M(e,a)})}else n({error:{message:"This app does not have any pages."}})}}else n({error:{message:"Page was not found."}})},addApplication:function(e,t,n){y.doPostMessage("editorAddApplication",t.data,t.compId,n)},applicationLoaded:function(e,t){var n=s.getComponentById(e,t.compId);d.callCompLoaded(n)},isApplicationInstalled:function(e,t,n){y.doPostMessage("editorIsApplicationInstalled",t.data,t.compId,n)},isAppSectionInstalled:function(n,o,r){var i,a=t.get(o,["data","appDefinitionId"]);if(a){var s=e.app.getDataByAppDefId(n,a);i=t.get(s,"applicationId")}else i=A(n,o.compId);var c=T(n,i);r(t.some(c,{tpaPageId:t.get(o,["data","sectionId"])}))},getAppVendorProductId:function(n,o,r){var i=t.get(o,["data","appDefinitionId"]),a=e.app.getDataByAppDefId(n,i);if(a){var s=E.getAppDataByApplicationId(n,a.applicationId);r(t.get(s,"vendorProductId")||null)}else r(null)},smCurrentMember:function(e,t,n){e.siteAPI.getMemberDetailsInPreview((function(e){n(e||null)}))},refreshCurrentMember:function(e){e.siteAPI.getMemberDetailsInPreview(null,null,!0)},onReady:function(e,t,n){y.doPostMessage("onReady",t.data,t.compId,n)}}}()},function(e,t){var n,o,r,i;e.exports=(n=[],o=1,r=function(e,t,r,i){var a={intent:"TPA_PREVIEW",callId:o++,type:e,compId:r,data:t};return i&&(n[a.callId]=i),a},i=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}switch(t.intent){case"TPA_RESPONSE":case"TPA_PREVIEW":case"TPA_PREVIEW_RESPONSE":t.callId&&n[t.callId]&&(n[t.callId](t.res),delete n[t.callId])}},{addCallback:function(e,t){n[e]=t},init:function(){"undefined"!=typeof window&&window.addEventListener("message",i,!1)},doPostMessage:function(e,t,n,o){var i,a=r(e,t,n,o);window.parent.postMessage?i=window.parent:window.parent.document.postMessage&&(i=window.parent.document),i&&void 0!==i&&i.postMessage(JSON.stringify(a),"*")}})},function(e,t){var n,o;e.exports=(o=(n=["routers"]).concat("configMap"),{paths:{ROUTERS_PATH:n,ROUTERS_CONFIG_MAP:o},routerPrefixPath:"prefix",routerPagesPath:"pages",InvalidPrefixReason:{PREFIX_CAN_NOT_BE_EMPTY:1,PREFIX_IS_TOO_LONG:2,PREFIX_IS_DUPLICATE_OF_URI_SEO:3,PREFIX_CONTAINS_INVALID_CHARACTERS:4,PREFIX_IS_FORBIDDEN_WORD:5,PREFIX_IS_IN_USE_BY_ANOTHER_APPLICATION:6}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(11),r=n(3),i=n(69),a=n(25),s=n(15),c=n(2),u="wysiwyg.viewer.components.Repeater",l=c.DATA_TYPES;var p={dataQuery:{add:r.addSerializedDataItemToPage,get:function(e,t){var n=r.getDataItemPointer(e,t);return r.serializeDataItem(e,l.data,n,!0)},getItemById:r.getDataItemById,delete:r.deleteDataItem},designQuery:{add:r.addSerializedDesignItemToPage,get:function(e,t){var n=r.getDesignItemPointer(e,t);return r.serializeDataItem(e,l.design,n,!0)},getItemById:r.getDesignItemById,delete:r.deleteDesignItem}};function d(n,o,r,i){e.forEach(p,(function(e,a){var s=n.dal.get(n.pointers.getInnerPointer(i,a));if(s){s=s.replace("#","");var c=t.displayedOnlyStructureUtil.getRepeaterTemplateId(s),u=p[a],l=u.get(n,i);u.add(n,o.id,l,t.displayedOnlyStructureUtil.getUniqueDisplayedId(c,r))}}))}function g(t,n){e.forEach(p,(function(e){e.delete(t,n)}))}function f(n,o,r,i,a){var s=n.dal.get(n.pointers.getInnerPointer(r,a));if(s){s=s.replace("#","");var c,u,l=(c=p[a].getItemById(n,s,o,!0),u=s,c?e.assign(c,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(u)}):c);if(l){var d=n.dal.full.get(n.pointers.getInnerPointer(i,a)).replace("#","");p[a].delete(n,i),p[a].add(n,o,l,d)}}}function m(n,o,r){var i=n.pointers.components.getPageOfComponent(o),a=t.displayedOnlyStructureUtil.getRepeaterTemplateId(o.id),s=n.pointers.full.components.getComponent(a,i);e.forEach(r,(function(e){f(n,i.id,o,s,e)}))}function v(n,o){if(t.displayedOnlyStructureUtil.isRepeatedComponent(o.id)){var r=a.getAncestorByPredicate(n,o,(function(e){return s.getComponentType(n,e)===u}));if(r&&function(n,o,r){var i=n.pointers.components.getChildren(o);if(e.size(i)>0){var a=i[0];return t.displayedOnlyStructureUtil.getRepeaterItemId(a.id)===t.displayedOnlyStructureUtil.getRepeaterItemId(r.id)}return!1}(n,r,o))return!0}return!1}function E(e,t,n){v(t,n)&&m(t,n,[e])}function y(t,n){var o=t.pointers.components.getChildren(n);if(e.size(o)>0){var r=t.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(o[0]);e.forEach(r,(function(e){m(t,e,["dataQuery","designQuery"])}))}}return{afterAdd:function(e,t){!function(e,t){e.siteAPI.createDisplayedNode(t)}(e,t),y(e,t)},addRepeatedDataItems:function(e,t){t.repeatedItemIds=e.data.items},afterLayoutChanged:function(t,n,r,i,a,s){if(r.width!==s.width){var c=e.head(t.pointers.components.getChildren(n)),u=t.dal.get(t.pointers.getInnerPointer(c,["layout"]));o.updateCompLayout(t,c,u,!0)}},beforeUpdateRepeaterData:function(t,n,o){var i=t.pointers.components.getPageOfComponent(n)||t.pointers.full.components.getPageOfComponent(n),a=e.get(r.getDataItem(t,n),"items"),s=e.filter(o.items,(function(t){return!e.includes(a,t)})),c=e.filter(a,(function(t){return!e.includes(o.items,t)})),u=t.pointers.components.getChildren(n);e.forEach(s,(function(n){var r=function(t,n,o){for(var r=Math.max(e.indexOf(t,o),0);r>0;){r--;var i=e.indexOf(n,t[r]);if(i>=0)return i}return 0}(o.items,a,n),s=u[r],c=[s].concat(t.pointers.components.getChildrenRecursively(s));e.forEach(c,e.partial(d,t,i,n))})),e.forEach(a,(function(n,r){if(!e.includes(o.items,n)){var i=u[r],a=[i].concat(t.pointers.components.getChildrenRecursively(i));e.forEach(a,e.partial(g,t))}}));var l=t.pointers.displayedOnlyComponents.getComponentTemplateId(n.id);!e.isEmpty(c)&&e.includes(c,t.dal.get(l))&&t.dal.set(l,e.head(o.items))},afterUpdateRepeaterData:function(e,t){e.siteDataAPI.createDisplayedNode(t),y(e,t)},syncRepeaterTemplateDataWithFirstItem:E.bind(this,"dataQuery"),syncRepeaterTemplateDesignWithFirstItem:E.bind(this,"designQuery"),afterUpdateRepeaterProperties:function(e,t){e.siteDataAPI.updateDisplayedNodesLayout(t),i.updateAnchorsForCompChildren(e,t)}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(539),i=n(540),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.overrides,s=n.read,c=void 0===s||s,u=n.write,l=void 0!==u&&u;return o.merge({},l&&i(e,t),c&&r(e,t),a)})},function(e,t,n){e.exports=function(){var e,t,o=n(0),r=n(1),i=(n(5),n(78)),a=n(6),s=n(107),c=n(30),u=n(21),l={AUTOSAVE_ACTION_COUNT:2,SAVE_AFTER_AUTOSAVE_COUNT:3,DEBOUNCE_WAIT:2,AUTOSAVE_TIMEOUT:10},p={},d={SHOULD_AUTOSAVE:"shouldAutoSave",ACTIONS_COUNT:"actionsCount",AUTOSAVES_COUNT:"autosaveCount",AUTO_FULL_SAVE_FLAG:"autoFullSaveFlag",REPORTING_INFO:"reportingInfo"},g={INCREASE:"increase",DECREASE:"decrease",RESET:"reset"},f=i.save,m=a.HOOKS,v={};function E(n){R(n)&&(e=e||o.debounce(y,1e3*p.DEBOUNCE_WAIT),function(n){T(),t=setTimeout((function(){e(n,o.noop,o.noop,"idle")}),1e3*p.AUTOSAVE_TIMEOUT)}(n),O(n,d.ACTIONS_COUNT)>=p.AUTOSAVE_ACTION_COUNT&&e(n,o.noop,o.noop,"num of actions"))}function y(e,t,n,r){var i=O(e,d.AUTOSAVES_COUNT);if(D(e),i<p.SAVE_AFTER_AUTOSAVE_COUNT){var a=I(e,r,t),c=I(e,r,n),l=M(e,d.REPORTING_INFO);e.dal.set(l,{actionsPerAutosave:p.AUTOSAVE_ACTION_COUNT,autosavesPerFull:p.SAVE_AFTER_AUTOSAVE_COUNT,pagesCount:u.getNumberOfPages(e),trigger:r}),o.invoke(p,"onDiffSaveStarted",r),s.autosave(e,a,c)}else{var g=S(e,r,t),f=S(e,r,n),m=M(e,d.AUTO_FULL_SAVE_FLAG);e.dal.set(m,!0),o.invoke(p,"onPartialSaveStarted",r),s.save(e,g,f,!1)}}function I(e,t,n){return function(r){var i=M(e,d.REPORTING_INFO);e.dal.remove(i),function(e){return o.includes([f.CONCURRENT_AUTO_SAVE,f.SITE_STALE_STATE_FROM_AUTO_SAVE],A(e))}(r)&&function(e,t){_(e,t,g.DECREASE)}(e,d.AUTOSAVES_COUNT),o.isFunction(p.onDiffSaveFinished)&&o.invoke(p,"onDiffSaveFinished",r,t),o.isFunction(n)&&n(r,t),(function(e){return o.includes([f.NOT_LOGGED_IN,f.SESSION_EXPIRED,f.USER_NOT_AUTHORIZED_FOR_SITE],A(e))}(r)||function(e){return f.SAVE_PUBLISH_DISABLED_ON_SERVER===A(e)}(r))&&P(e)}}function S(e,t,n){return function(r){var i=M(e,d.AUTO_FULL_SAVE_FLAG);e.dal.remove(i),o.invoke(p,"onPartialSaveFinished",r,t),C(e,d.AUTOSAVES_COUNT),o.isFunction(n)&&n(r,t)}}function h(e){b(e)||function(e){var t=e.pointers.general.getSiteVersion(),n=e.pointers.general.getServiceTopology(),o=e.pointers.getInnerPointer(n,"autoSaveUrl"),i=e.dal.get(o),a="".concat(i,"delete_diffs"),s={siteId:e.siteAPI.getSiteId(),siteVersion:e.dal.get(t)};r.ajaxLibrary.ajax({url:a,type:"POST",dataType:"json",data:s})}(e),P(e)}function P(e){x(e,{enabled:!1})}function A(e){return o.get(e,"document.errorType")}function T(){t&&(clearTimeout(t),t=null),e&&e.cancel()}function _(e,t,n){var o,r=M(e,t),i=e.dal.get(r)||0;switch(n){case g.INCREASE:o=i+1;break;case g.DECREASE:o=i-1;break;case g.RESET:o=0}return e.dal.set(r,o),o}function O(e,t){return _(e,t,g.INCREASE)}function C(e,t){return _(e,t,g.RESET)}function D(e){T(),C(e,d.ACTIONS_COUNT)}function w(e){D(e),C(e,d.AUTOSAVES_COUNT)}function M(e,t){return e.pointers.general.getAutoSaveInnerPointer(t)}function b(e){var t=e.pointers.general.getNeverSaved();return e.dal.get(t)}function R(e){var t=N(e);return!1!==p.enabled&&!(!t||!t.shouldAutoSave||b(e)||!p.allowOnBoarding&&function(e){return c.isSiteFromOnBoarding(e)}(e)||!s.saveState.canSave())}function N(e){var t=e.pointers.general.getAutosaveInfo();return e.dal.get(t)}function x(e,t){return t?(p=o.defaults(o.clone(t),l),o.forEach(v,(function(e,t){return a.unregisterHook(t,e)})),v={},T(),!(!0!==t.enabled||!s.saveState.isEnabled())&&(function(e){v[m.AUTOSAVE.ACTION]=a.registerHook(m.AUTOSAVE.ACTION,o.partial(E,e)),v[m.SAVE.SITE_SAVED]=a.registerHook(m.SAVE.SITE_SAVED,o.partial(w,e)),v[m.SAVE.VALIDATION_ERROR]=a.registerHook(m.SAVE.VALIDATION_ERROR,o.partial(h,e))}(e),!0)):(r.log.error(new Error("Missing autosave config object")),!1)}return{init:x,autosave:function(e,t,n,o){if(!R(e))return n({document:"Autosave not available"});y(e,t,n,o)},canAutosave:R,getAutoSaveInfo:N,clearAll:w,handleValidationError:h}}()},function(e,t,n){e.exports=function(){var e=n(0),t=/~1/g,o=/~0/g;function r(e){return e.replace(t,"/").replace(o,"~")}function i(t){return e(t).split("/").compact().map(r).value()}var a={add:function(t,n){var o=i(n.path),r=o.length>1?e.initial(o):o,a=t.getByPathInHostModel(r),s=e.last(o);e.isArray(a)?(s=Number(e.last(o)),t.pushByPathToHostModel(r,n.value,s)):(e.isUndefined(a)||a[s]!==n.value)&&t.setByPathToHostModel(o,n.value)},remove:function(e,t){e.removeByPathInHostModel(i(t.path))},replace:function(t,n){var o,r,a=i(n.path),s=e.last(a);if(a.length>1&&!function(t,n){var o=e.initial(n);return t.isPathExistInHostModel(o)&&e.isArray(t.getByPathInHostModel(o))}(t,a)?(r=t.getKeysByPathInHostModel(e.initial(a)),o=e.includes(r,s)):o=t.isPathExistInHostModel(a),!o){var c=new Error("replace operation in nonexisting path");throw c.patch=n,c}t.setByPathToHostModel(a,n.value)},move:function(e,t){var n=i(t.from),o=i(t.path),r=e.getByPathInHostModel(n);e.removeByPathInHostModel(n),e.setByPathToHostModel(o,r)},copy:function(e,t){var n=i(t.from),o=i(t.path),r=e.getByPathInHostModel(n);e.setByPathToHostModel(o,r)},test:function(t,n){var o=i(n.path);if(!e.isEqual(t.getByPathInHostModel(o),n.value)){var r=new Error("test operation failed");throw r.patch=n,r}}};function s(e,t){if(!t||!a[t.op]){var n=new Error("Patch not properly formatted");throw n.patch=t,n}a[t.op](e,t)}return{applyPatchList:function(e,t){t&&t.length&&t.forEach(s.bind(null,e))},getPathArray:i}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A,T,_,O,C,D;e.exports=(o=n(0),r=n(546),i=n(547),a=n(548),s=n(549),c=n(550),u=n(551),l=n(552),p=n(553),d=n(554),g=n(556),f=n(557),m=n(558),v=n(559),E=n(566),y=n(231),I=n(568),S=n(569),h=n(570),P=n(571),A=n(578),T=n(579),_=n(17),O=n(1),C=O.loggingUtils.fedopsLogger.INTERACTIONS.DOCUMENT_SERVICES_DATA_FIXERS,D=[{fixer:r,config:{fixMobileOnly:!1,fedopsTag:C.BADLY_DUPLICATED_PAGES}},{fixer:a,config:{fixMobileOnly:!1,fedopsTag:C.FIVE_GRID_LINE_FULL_WIDTH}},{fixer:i,config:{fixMobileOnly:!1,fedopsTag:C.ADI_GROUP}},{fixer:s,config:{fixMobileOnly:!1,fedopsTag:C.BROKEN_ANCHORS}},{fixer:c,config:{fixMobileOnly:!1,fedopsTag:C.DESIGN_DUPLICATED_IDS}},{fixer:u,config:{fixMobileOnly:!1,fedopsTag:C.ORPHAN_SLIDER}},{fixer:l,config:{fixMobileOnly:!1,fedopsTag:C.EMPTY_MOBILE_STRIP_COLUMN_CONTAINER}},{fixer:p,config:{fixMobileOnly:!1,fedopsTag:C.SITE_MEMBERS}},{fixer:d,config:{fixMobileOnly:!1,fedopsTag:C.TEXT_COMPONENET}},{fixer:g,config:{fixMobileOnly:!1,fedopsTag:C.VECTOR_IMAGE}},{fixer:f,config:{fixMobileOnly:!1,fedopsTag:C.VISUAL_FOCUS}},{fixer:m,config:{fixMobileOnly:!0,fedopsTag:C.MOBILE_ANIMATION}},{fixer:v,config:{fixMobileOnly:!1,fedopsTag:C.STYLES}},{fixer:E,config:{fixMobileOnly:!1,fedopsTag:C.DUPLICATE_ITEMS_REF_IN_MENU}},{fixer:y,config:{fixMobileOnly:!1,fedopsTag:C.SOAP_ORDER}},{fixer:I,config:{fixMobileOnly:!1,fedopsTag:C.MESH_LAYOUT_READY_SITE}},{fixer:S,config:{fixMobileOnly:!1,fedopsTag:C.ROUTERS}},{fixer:h,config:{fixMobileOnly:!1,fedopsTag:C.SOSP}},{fixer:P,config:{fixMobileOnly:!1,fedopsTag:C.COMPONENT_SKIN}},{fixer:A,config:{fixMobileOnly:!0,fedopsTag:C.MENU_CONTAINER}},{fixer:T,config:{fixMobileOnly:!1,fedopsTag:C.ADD_MISSING_PAGE_STYLE}}],{fix:function(e){O.loggingUtils.fedopsLogger.interactionStarted(C.ALL),o.forEach(D,(function(t){if(_.isMobileSupported(e)||!o.get(t,["config","fixMobileOnly"])){var n=o.get(t,["config","fedopsTag"]);O.loggingUtils.fedopsLogger.interactionStarted(n),t.fixer.exec(e),O.loggingUtils.fedopsLogger.interactionEnded(n)}})),O.loggingUtils.fedopsLogger.interactionEnded(C.ALL)}})},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A,T,_,O,C,D;e.exports=(r=n(0),i=n(57),a=n(5),s=n(2),c=n(11),u=n(1),l=n(232),p=n(201),d=function(e){return e.map((function(e){return e.id})).join(",")},g=function(e,t,n,o,r){return e.siteAPI.reportBI(i.SOAP_ORDER_FIXER,function(e,t,n,o){return{is_changed:e,soap_order_before:e?d(t):"",soap_order_after:e?d(n):"",components_attached_to_header:e?d(o):""}}(t,n,o,r))},f=function(e,t){return e.pointers.full.components.getPagesContainer(t)},m=function(e,t){return e.dal.full.get(e.pointers.getInnerPointer(t,["layout"]))},v=function(e,t){return r.get(m(e,t),"fixedPosition",!1)},E=function(e){return e.pointers.data.getDataItemFromMaster("masterPage")},y=function(e){return function(e){return e.dal.full.get(e.pointers.getInnerPointer(E(e),"layoutSettings"))||{}}(e).soapCompsAroundPagesContainer},I=function(e,t){return r.includes(u.masterPageLayoutUtils.MASTER_PAGES_SECTIONS[t.type],function(e,t){return e.dal.full.get(e.pointers.getInnerPointer(t,"componentType"))}(e,t))},S=function(e,t){return r.reject(t,(function(t){return I(e,t)&&!function(e,t){return e.pointers.isSamePointer(t,f(e,t.type))}(e,t)||v(e,t)}))},h=function(e,t){return e.pointers.full.components.getChildren(t)},P=function(e,t,n){return r.findIndex(t,(function(t){return e.pointers.isSamePointer(t,n)}))},A=function(e,t,n,o){return P(e,t,n)<P(e,t,o)},T=function(e,t,n){r.isEmpty(t)||(_(e,t,n),function(e,t,n){var r=e.pointers.full.components.getChildrenContainer(t),i=e.dal.full.get(r),a=i.length-n,s=[].concat(o(i.slice(a,i.length)),o(i.slice(0,a)));e.dal.full.set(r,s)}(e,n,t.length))},_=function(e,t,n){return r.forEach(t,(function(t){return c.setContainer(e,t,t,n)}))},O=function(e,t){return function(e,t){return r.filter(t,(function(t){return!I(e,t)}))}(e,h(e,e.pointers.full.components.getMasterPage(t)))},C=function(e,t,n,o){var i=function(e,t){return e.pointers.full.components.getHeader(t)}(e,t),a=function(t){return function(e,t){return m(e,t).y}(e,t)<function(e,t){var n=m(e,t);return n.y+n.height}(e,i)};if(!i||v(e,i))return[];var s=O(e,t),u=r.filter(s,(function(t){return!v(e,t)&&function(e,t,n){return c.canSetContainer(e,t,n)}(e,t,i)&&a(t)})),l=r.reduce(u,(function(t,r){var a=A(e,n,r,i),s=A(e,o,r,i);return a&&!s?t.attachToBack.push(r):!a&&s&&t.attachToFront.push(r),t}),{attachToBack:[],attachToFront:[]}),p=l.attachToBack,d=l.attachToFront;return T(e,p,i),_(e,d,i),p.concat(d)},D=function(e){var t=s.VIEW_MODES.DESKTOP,n=e.pointers.full.components.getMasterPage(t),i=h(e,n),a=function(e,t){var n=h(e,t),i=r.filter(n,(function(t){return I(e,t)||v(e,t)})),a=P(e,i,f(e,t.type));return[].concat(o(i.slice(0,a)),o(S(e,n)),o(i.slice(a+1,i.length)))}(e,n);if(r.isEqual(i,a))g(e,!1);else{var c=C(e,t,i,a);!function(e,t,n){var o=e.pointers.full.components.getChildrenContainer(t),i=e.dal.full.get(o),a=r.sortBy(i,(function(e){var t=e.id;return r.findIndex(n,{id:t})}));e.dal.full.set(o,a)}(e,n,a),g(e,!0,i,a,c)}},{exec:function(e){if(!function(e){return a.isOpen("sv_soapReorderFixer")&&!y(e)}(e)||!function(e){return p(e,e.pointers.full.components.getMasterPage(s.VIEW_MODES.DESKTOP))}(e))return!1;l(e),D(e),function(e){var t=E(e),n=e.dal.full.get(t);e.dal.full.set(t,r.merge({},n,{layoutSettings:{soapCompsAroundPagesContainer:!0}}))}(e),e.siteAPI.createPageAnchors("masterPage")}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E;e.exports=(o=n(0),r=n(567),i=n(57),a=n(2),s=n(11),c=n(44),u={SITE_HEADER:"HEADER",PAGES_CONTAINER:"PAGES",SITE_FOOTER:"FOOTER"},l=function(e,t){return t.top-e.bottom},p=function(e){return o.omitBy(e,(function(e){return!e}))},d=function(e,t,n){var o=e.pointers.getInnerPointer(t,"layout"),r=e.dal.get(o);r.y+=n,e.dal.set(o,r)},g=function(e){return!!u[e.id]},f=function(e,t,n){var r=n.top,a=n.pointer;if(!n.isFixed){var c=o(t).filter((function(e){return e.bottom>r})).map("pointer").value();o.forEach(c,function(e,t){return function(n){e.siteAPI.reportBI(i.SECTION_LAYOUT_MIGRATION_REPARENT,{component_id:n.id,new_container_id:t.id})}}(e,a)),o.forEach(c,function(e,t){return function(n){return s.setContainer(e,n,n,t)}}(e,a))}},m=function(e,t,n){if(e.config.closeSectionGaps)return{};var r,i=function(e,t,n){if(!n.pagesToFooterGap)return n;var r,i={top:t.bottom,bottom:t.bottom+n.pagesToFooterGap};return n.pagesToFooterGap<=20&&!o.some(e,(r=i,function(e){return!(e.top>r.bottom||e.bottom<r.top)}))?o.assign({},n,{pagesToFooterGap:0}):n}(t,n.PAGES,n.gaps);return r=i,o.pickBy(r,(function(e){return e>0}))},v=function(e,t,n){var i=n.SITE_HEADER,a=n.SITE_FOOTER,s=function(e,t){return o.get(function(e,t){return e.dal.get(e.pointers.getInnerPointer(t,"layout"))}(e,t),"anchors.0.distance",0)}(e,t)+r.boundingLayout.getBoundingY(i)+r.boundingLayout.getBoundingHeight(i);return{PAGES_CONTAINER:{y:s,height:a.y-s}}},E=function(e){var t=a.VIEW_MODES.DESKTOP,n=e.pointers.components.getMasterPage(t),r=e.pointers.components.getChildren(n),i=function(e,t){return o.reduce(t,(function(t,n){return t[n.id]=c.getComponentLayout(e,n),t}),{})}(e,r),s=e.siteAPI.isPageLandingPage(e.siteAPI.getPrimaryPageId())?v(e,n,i):{};return o.map(r,(function(e,t){return o.assign({i:t,pointer:e},function(e,t,n){var r=o.assign({},e[t],n[t]);return{top:r.y,bottom:r.y+r.height,isFixed:!!r.fixedPosition}}(i,e.id,s))}))},function(e){if(!function(e){return function(e){return e.dal.get(e.pointers.getInnerPointer(e.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"))||{}}(e).useDesktopSectionsLayout}(e)){var t=E(e),n=function(e){var t=o(e).filter((function(e){var t=e.pointer;return g(t)})).reduce((function(e,t){return e[u[t.pointer.id]]=t,e}),{}),n=t.HEADER,r=t.PAGES,i=t.FOOTER;return{PAGES:r,FOOTER:i,gaps:p({headerToPagesGap:l(n,r),pagesToFooterGap:l(r,i)})}}(t),r=o.filter(t,o.conforms({isFixed:function(e){return!e},pointer:function(e){return!g(e)}}));f(e,r,n.FOOTER),function(e,t){var n=t.gaps,o=t.PAGES,r=t.FOOTER;n.headerToPagesGap&&n.headerToPagesGap<0&&d(e,o.pointer,-1*n.headerToPagesGap),n.pagesToFooterGap&&n.pagesToFooterGap<0&&d(e,r.pointer,-1*n.pagesToFooterGap)}(e,n);var a=m(e,r,n);!function(e,t){var n=e.pointers.getInnerPointer(e.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),r=e.dal.get(n);e.dal.set(n,o.merge({},r,{useDesktopSectionsLayout:!0},t))}(e,a),function(e,t,n){e.siteAPI.reportBI(i.SECTION_LAYOUT_MIGRATION_RUN),o.forEach(t,(function(t,r){e.siteAPI.reportBI(i.SECTION_LAYOUT_MIGRATION_CLOSE_GAP,{gap_size:t,gap_type:r,is_closed:!o.has(n,r)})}))}(e,n.gaps,a),e.siteAPI.createPageAnchors("masterPage")}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(174),o=n(572),r=n(573),i=n(172),a=n(575),s=n(576),c=n(118),u=n(20),l=n(7),p=n(3);function d(e,t){var n=e.dal.get(t),o=e.pointers.components.getPageOfComponent(t),r=p.getDataItem(e,t);return{id:t.id,pageId:o&&o.id,componentType:n.componentType||n.documentType,skin:u.skin.get(e,t),dataType:r&&r.type}}var g={mobileHints:c.validateComponentMobileHints,data:a.validateCompData,properties:i.validateCompProps,layout:t.validateLayout,skin:r.validateComponentSkin,style:o.validateComponentStyle,json:s.validateCompJSONpaths};function f(t,n,o){return e.reduce((r=n,e.isArray(r)?r:[r]),(function(n,r){var i=e(o).mapValues((function(e){try{e(t,r)}catch(e){return e.message||e.toString()}return null})).omitBy(e.isNull).value();return e.isEmpty(i)||n.push({comp:d(t,r),invalidations:i}),n}),[]);var r}function m(e,t,n,o){var r=l.getAllComponents(e,n,(function(t){return!e.pointers.components.isMasterPage(t)}),o);return f(e,r,t)}return{initialize:function(e){c.initialize(e)},validateComponentData:g.data,validateComponentProperties:g.properties,validateComponentLayout:g.layout,validateComponentSkin:g.skin,validateStyle:g.style,validateMobileHints:g.mobileHints,validateComponents:function(e,t){return f(e,t,g)},validateAllComponents:function(e){return m(e,g)},validateAllComponentsWithValidators:m,validateAllMobileHints:function(t){var n=e.map(t.pointers.page.getNonDeletedPagesPointers(!0),"id");try{c.validateMobileHintsOnPages(t,n)}catch(e){return e}return null}}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f;e.exports=(o=n(0),r=n(2),i=n(77),a=n(133),s=n(131),c=n(638),u=n(102),l=n(639)(void 0,{encodeWhenSerializing:!0}).serialize,p=function(e,t){var n=t.code,o=t.document,r=t.codeIntelligence,i=function(e){var t=e.socketAPI;if(!t)throw new Error("Cannot save to local server - no socket!");return t}(e),a=!!i.updateCodeIntelligence,s=o?i.updateDocument(o):Promise.resolve(),c=n?i.updateCodeFiles(n):Promise.resolve(),u=r&&a?i.updateCodeIntelligence(r):Promise.resolve();return Promise.all([s,c,u])},d=function(e,t){return function(n){var o=n.fileId,r=n.content,i=function(e){return u.isPageFile(e)},a=function(n){var o=["pagesData","masterPage","data","document_data",u.getPageId(n)],r=t&&t.getIn(o);return e.getIn(o,r)},c=s.getVirtualDescriptor(o,!1);if(i(c)&&!a(c))return null;var l=function(e){if(i(e)){var t=a(e);return{pageId:u.getPageId(e),title:t.get("title"),isPopup:t.get("isPopup")}}return{}}(c);return{path:c.location,content:r,metaData:l}}},g=function(e,t){var n=a.getChangesBetweenSnapshots(e,t),r=n.toSave,i=n.toCopy,s=n.toDelete,c=d(t,e);return{modifiedFiles:o.compact(r.map((function(e){return c(e)}))),copiedFiles:i.map((function(e){var t=e.srcFileId,n=e.destFileId;return{source:c({fileId:t}),target:c({fileId:n})}})),deletedFiles:Object.keys(s).map((function(e){return c({fileId:e})}))}},f=function(e,t){var n=o.keys(t.pages);return{codeIntelligenceSchemaVersion:"1.0",elementsMap:{pages:c.getNicknameToTypeMap(e,n),site:{commonComponents:c.getNicknameToTypeMap(e,[r.MASTER_PAGE_ID])[r.MASTER_PAGE_ID]}}}},{save:function(e,t,n){var o=l(n.toJS()),r=g(t,n),i=f(e,o);return p(e,{code:r,document:o,codeIntelligence:i})},clone:function(e){return i.loadAllFilesFromGrid(e).then((function(t){var n=e.dal.full.immutable.getCurrentSnapshot(),r=l(n.toJS()),i=d(n),a=o.compact(t.map((function(e){return i({fileId:e.path,content:e.content})}))),s=f(e,r);return p(e,{code:{modifiedFiles:a},document:r,codeIntelligence:s})}))},saveCode:function(e,t,n){var o=g(t,n);return p(e,{code:o})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(11),o=n(8),r=n(2),i={};function a(n,o){return e.filter(o,(function(e){return!t.isHorizontallyStretchedToScreen(n,e)}))}function s(t,n){if(1===e.size(n))return e.filter(n,p.bind(this,t));var o=a(t,n);return 1===o.length&&(o=[]),o}function c(e,t,n){return l(n)?s(e,t):t}function u(t,n,o){return e.isFunction(i[o])?i[o](t,n,o):n}function l(t){return e.includes([r.COMP_ALIGNMENT_OPTIONS.LEFT,r.COMP_ALIGNMENT_OPTIONS.RIGHT,r.COMP_ALIGNMENT_OPTIONS.CENTER,r.COMP_DISTRIBUTION_OPTIONS.HORIZONTAL,r.COMP_DISTRIBUTION_OPTIONS.BOTH,r.COMP_MATCH_SIZE_OPTIONS.WIDTH,r.COMP_MATCH_SIZE_OPTIONS.BOTH],t)}function p(e,t){return o.public.isAlignable(e,t)}return i[r.COMP_MATCH_SIZE_OPTIONS.WIDTH]=a,i[r.COMP_MATCH_SIZE_OPTIONS.BOTH]=a,i[r.COMP_ALIGNMENT_OPTIONS.LEFT]=c,i[r.COMP_ALIGNMENT_OPTIONS.RIGHT]=c,i[r.COMP_ALIGNMENT_OPTIONS.CENTER]=c,i[r.COMP_ALIGNMENT_OPTIONS.TOP]=c,i[r.COMP_ALIGNMENT_OPTIONS.BOTTOM]=c,i[r.COMP_ALIGNMENT_OPTIONS.MIDDLE]=c,i[r.COMP_DISTRIBUTION_OPTIONS.HORIZONTAL]=a,i[r.COMP_DISTRIBUTION_OPTIONS.BOTH]=a,{canAlign:function(t,n,o){if(!o||!e.size(n))return!1;var r=u(t,n,o);return e.size(r)>0},canDistribute:function(t,n,o){return o&&e.size(u(t,n,o))>1},canMatchSize:function(t,n,o){return o&&e.size(u(t,n,o))>1},isHorizontalAxis:l,getFilteredComponentsToApplyAction:u}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(139),o=(n(24),n(67)),r=n(49),i=n(81),a=n(80),s=n(109),c="Only manual lists are supported",u="List does not exist",l="Type does not exist",p="List views do not exist",d="Data selector does not exist",g="Template's type definition is not valid",f="Template's view definitions are not valid",m="The template is missing an item view",v="New List";function E(e){throw new Error(e)}function y(t,n,o,r){var i=n?e.pick(o,n.itemIds):o;return function(e,t,n){var o=s.createSelector(e,t);return s.setManualSelector(e,o,n),o}(t,r,e.values(i))}return{generateTemplate:function(t,n){var r=o.getListDef(t,n)||E(u),i=o.getSelector(t,n)||E(d);if("ManualSelectedList"!==i.type)throw new Error(c);var s=o.getViews(t,n);e.isEmpty(s)&&E(p);var g,f=o.getType(t,n);return{type:f||E(l),views:e.values(s),items:(g=a.getAllItemsOfType(t,f.name),e.mapValues(g,(function(t){return e.omitBy(t,(function(t,n){return"_iid"!==n&&e.startsWith(n,"_")}))}))),dataSelector:i,displayName:r.displayName||v}},createListFromTemplate:function(t,n){if(e.isEmpty(n.type))throw new Error(g);if(e.isEmpty(n.views))throw new Error(f);var s=e.map(n.views,(function(t){return e.clone(t)})),c=r.createType(t,n.type);!function(t,n){e.forEach(t,(function(e){e.forType="Array"===e.forType?"Array":n}))}(s,c);var u=function(e,t){var n=i.createViewsWithSameName(e,t);return i.getViewById(e,n[0]).name}(t,s),l=function(t,n,o){return e.transform(n,(function(e,n){var r=a.createItem(t,o,n);e[n._iid||r]=r}),{})}(t,n.items,c),p=y(t,n.dataSelector,l,c),d={displayName:n.displayName,dataSelector:p,type:c,viewName:u};return o.createList(t,d)},setItemViewFromTemplate:function(n,r,i){if(e.isEmpty(i.type))throw new Error(g);if(e.isEmpty(i.views))throw new Error(m);var a=o.getType(n,r)||E(l),s=e.filter(i.views,{forType:i.type.name}),c=t.viewsTemplatesUtils.getMatchingViewsForType(s,i.type,a);e.forEach(c,(function(e){o.replaceItemView(n,r,e)}))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(12),o=n(41),r=n(10),i=t.fonts,a={fontSize:{defaultValue:null,parsedStyleKey:"size"},fontFamily:{defaultValue:null,parsedStyleKey:"family"},bold:{defaultValue:!1,parsedStyleKey:"bold"},italic:{defaultValue:!1,parsedStyleKey:"italic"},underline:{defaultValue:!1,parsedStyleKey:"underline"},color:{defaultValue:null,parsedStyleKey:"color"},backgroundColor:{defaultValue:null,parsedStyleKey:null},lineHeight:{defaultValue:null,parsedStyleKey:"lineHeight"},lineThrough:{defaultValue:!1,parsedStyleKey:null}},s=["fontSize","lineHeight"],c='Cannot set "fontClass" together with additional attributes',u="Cannot set fontClass to null";function l(t){return e.forEach(s,(function(n){t[n]&&e.isString(t[n])&&(t[n]=parseInt(t[n],10))})),t}function p(t,n){if(n.fontClass){var o=function(t,n){var o=i.fontUtils.parseStyleFont(n,r.fonts.getAll(t),r.colors.getAll(t));return e.reduce(a,(function(t,n,r){var i=n.parsedStyleKey&&o[n.parsedStyleKey];return i&&(t[r]=e.isString(i)?i.replace(/[{}]/g,""):i),t}),{})}(t,n.fontClass),s=!1;e.forOwn(o,(function(e,t){n[t]=n[t]||e,s=s||n[t]!==e})),s&&(n.fontClass=null)}return n}return{convertFieldPropsToViewDefProps:function(t,n){if(!e.isUndefined(t.fontClass)&&(r=t,i=e.keys(r),s=e.keys(a),p=e.intersection(i,s),!e.isEmpty(p)))throw new Error(c);var r,i,s,p;if(null===t.fontClass)throw new Error(u);if(function(t,n){return e.isUndefined(t.fontClass)&&!e.isEmpty(t)&&n&&n.fontClass}(t,n))(t=e.defaults(t,n)).style=null;else if(t.fontClass){var d=e.mapValues(a,"defaultValue");(t=e.defaults({},d,t)).style=o.styleMapping.fontClassToStyle(t.fontClass)}return delete t.fontClass,l(t)},convertViewDefPropsToFieldProps:function(e,t){return t.fontClass=o.styleMapping.styleToFontClass(t.style)||null,delete t.style,t.fontClass&&(t=p(e,t)),l(t)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(41),o=n(139),r=n(4),i=n(11),a=t.viewsUtils;function s(e){return parseInt(e,10)}function c(t,n){var o=a.getCompProp("spacers",t);return"vertical"===n?e.sum([s(o["xax-before"]||0),s(o["xax-after"]||0)]):e.sum([s(o.before||0),s(o.after||0)])}function u(e){return"Field"===a.getCompProp("name",e)||"manual"===a.getCompProp("width-mode",e)?a.getCompProp("width",e):0}function l(t,n){var o=e.map(n,(function(e){return u(e)+c(e,t)}));return"vertical"===t?e.max(o):e.sum(o)}function p(t,n){var r=a.getCompProp("items",t);if(!r||0===r.length)return 0;var i=a.getCompProp("name",t);if("FieldBox"===i){var s=o.fieldBoxProxyUtils.getFieldBoxDef(a.getCompProp,n,t),c=a.getCompProp("css",s).width,u=a.getCompProp("orientation",t);return"auto"===c?l(u,a.getCompProp("items",s)):c}var d=function(e,t){switch(e){case"VBox":return"vertical";case"HBox":return"horizontal";default:return t}}(i,n),g=e.map(r,(function(e){return p(e,d)}));return"vertical"===d?e.max(g):e.sum(g)}return{getSpacers:c,getFieldMinWidth:u,getFieldBoxMinWidth:l,getAppPart2MinWidth:p,updateAppPart2MinWidth:function(t,n,o,a){if("DESKTOP"===n.type&&e.has(o,"hidden")){var s=p(a,null);s>r.layout.get(t,n).width&&i.updateCompLayout(t,n,{width:s})}}}}()},function(e,t,n){e.exports=function(){var e=n(41),t=n(10),o="wysiwyg.viewer.components.WRichText";function r(t){var n=t.comp.name;return e.proxyFactory.getProxyClass(n,!0)}return{getStyle:function(n,i){return r(i).componentType===o?i.comp.style:e.styleData.getSkinAndStyle(t.styles.getAll(n),i.comp.name,i.comp.styleNS,i.comp.style,i.comp.skin).styleId||null},getCompProxyClass:r}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(64),o=n(24),r=n(108),i=n(23),a={primaryTask:r,secondaryTasks:[]};function s(t){return{event:e.partial(i.event,t),error:e.partial(i.error,t)}}return{reload:function(t){t.dal.full.removeByPath(o.getAppbuilderPath());var n=[];e.forEach(o.getAppbuilderMetadataPath("requestedPartNames"),(function(e){var o="requestedPartNames"!==e?{}:[];n=n.concat(e),t.dal.full.setByPath(n,o)})),t.dal.takeSnapshot(r.getTaskName())},save:function(e,n,o,r){e.setOperationsQueue.flushQueueAndExecute((function(){var i=[a,e.dal,n,o,s(e)];r?t.runFullSaveTasks.apply(t,i):t.runPartialSaveTasks.apply(t,i)}))}}}()},function(e,t){e.exports=function(e){return{fieldId:"vars",forType:"Post",format:"*",key:"shouldUseNewSocialShareButtons",type:"AppPartCustomization",value:!0,view:e}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(35);function o(n){return e.head(t.filterAppsDataByType(n,"appbuilder"))}return{getInstanceId:function(e){return o(e).instanceId},getApplicationId:function(e){return o(e).applicationId}}}()},,,,,,,,,,function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A,T,_,O,C,D,w,M,b,R,N,x,L,B,F,k,U,H,V,G,W,Y,z,K,j,q,Q,X,Z,J,$,ee,te,ne,oe,re,ie,ae,se,ce,ue,le,pe,de,ge,fe,me,ve,Ee,ye,Ie,Se,he,Pe,Ae,Te,_e,Oe,Ce,De,we,Me,be,Re,Ne,xe,Le,Be,Fe,ke,Ue,He,Ve,Ge,We,Ye,ze,Ke,je,qe,Qe,Xe,Ze,Je,$e;e.exports=(o=n(2),r=n(50),i=n(23),a=n(57),s=n(37),c=n(153),u=n(13),l=n(25),p=n(29),d=n(421),g=n(542),f=n(543),m=n(544),v=n(545),E=n(230),y=n(580),I=n(202),S=n(582),h=n(228),P=n(87),A=n(11),T=n(148),_=n(3),O=n(69),C=n(18),D=n(232),w=n(583),M=n(584),b=n(63),R=n(60),N=n(136),x=n(15),L=n(138),B=n(6),n(585),n(607),F=n(78),k=n(167),U=n(609),H=n(177),V=n(38),G=n(43),W=n(610),Y=n(612),z=n(617),K=n(7),j=n(4),q=n(618),Q=n(20),X=n(75),Z=n(150),J=n(619),$=n(170),ee=n(123),te=n(8),ne=n(227),oe=n(65),re=n(620),ie=n(621),ae=n(622),se=n(623),ce=n(96),ue=n(624),le=n(159),pe=n(625),de=n(217),ge=n(626),fe=n(218),me=n(39),ve=n(627),Ee=n(178),ye=n(628),Ie=n(70),Se=n(54),he=n(119),Pe=n(124),Ae=n(21),Te=n(122),_e=n(36),Oe=n(220),Ce=n(192),De=n(630),we=n(631),Me=n(632),be=n(191),Re=n(193),Ne=n(32),xe=n(633),Le=n(141),Be=n(634),Fe=n(107),ke=n(635),Ue=n(640),He=n(641),Ve=n(642),Ge=n(151),We=n(235),Ye=n(643),ze=n(91),Ke=n(44),je=n(84),qe=n(644),Qe=n(10),Xe=n(142),Ze=n(645),Je=n(233),$e=n(101),{constants:o,biErrors:r,bi:i,biEvents:a,biEventTypes:s,siteMetadataPropertiesInfo:c,siteMetadata:u,componentStructureInfo:l,componentModes:p,componentsLoader:d,undoRedo:g,responsiveLayout:f,breakpoints:m,responsiveStyles:v,documentServicesDataFixer:E,dataFixersConfig:y,mobilePreSaveOperation:I,patchData:S,autosave:h,componentLayout:P,structure:A,documentMode:T,dataModel:_,anchors:O,page:C,sectionsLayoutMigrator:D,setOperationQueueUtils:w,dsQTrace:M,modesUtils:b,dataIds:R,jsonConfig:N,utils:x,contextAdapter:L,hooks:B,temp:{tmpErrors:F,idGenerator:k,visualFocusData:U,componentA11yAPI:H,actionsAndBehaviors:V,appControllerData:G,appStudioComponents:W,appStudio:Y,appStudioWidgets:z,componentDetectorAPI:K,component:j,stylableEditorAPI:q,componentStylesAndSkinsAPI:Q,componentCode:X,componentBehaviors:Z,wixVideoAPI:J,componentScroll:$,mobileActions:ee,componentsMetaData:te,createCompDriver:ne,connections:oe,feedback:re,fonts:ie,inlinePopup:ae,browserThemeColor:se,layouters:ce,globalImageQualityData:ue,vectorImageAPI:le,svgFiltersDefinitions:pe,mainMenu:de,menuAPI:ge,basicMenuItemMethods:fe,mobileConversionFacade:me,mobileSettings:ve,quickActions:Ee,quickActionsVersionUtils:ye,quickActionBarManager:Ie,mergeAggregator:Se,mobilePresetsHandler:he,menuContainer:Pe,pageData:Ae,pagesGroup:Te,platform:_e,provision:Oe,pages:Ce,serialization:De,sessionState:we,viewerInfoChangedEmitter:Me,apiCallBiService:be,livePreview:Re,platformConstants:Ne,renderPlugins:xe,routers:Le,routersPointers:Be,saveAPI:Fe,localMode:ke,siteMembers:Ue,siteSegments:He,smartBoxes:Ve,multiComponentsUtils:Ge,multiComponentsUtilsValidations:We,grouping:Ye,groupingUtils:ze,structureUtils:Ke,arrangement:je,meshMigrationUtil:qe,theme:Qe,tpa:Xe,tpaCore:Ze,validation:Je,wixCode:$e,wixapps:n(646)},wixCodeDS:$e,platform:_e,wixCodeConstants:n(22),wFacebookComment:n(187),component:j})},function(e){e.exports=JSON.parse('{"MOBILE_STRUCTURE_NOT_SAVED_DUE_TO_CORRUPTION":{"errorCode":21056,"desc":"mobile structure was not saved with site due to a corruption in site structure - missing header, footer or pages container","severity":"fatal"},"SAVE_FAILED_DUE_TO_PRE_SAVE_OPERATION":{"errorCode":55021,"severity":"fatal","params":{"p1":"stack"}},"SAVE_DOCUMENT_FAILED_ON_SERVER":{"errorCode":55666,"severity":"fatal","desc":"Save document failed due to a server error","params":{"p1":"serverErrorCode","p2":"origin","p3":"errorType"}},"SAVE_BLOCKED_BY_DOCUMENT_SERVICES":{"errorCode":55022,"severity":"fatal","desc":"save has been blocked in the client by documentServices, since it failed 3x *in a row* via -10104 validation error from server"},"AUTOSAVE_RESTORE_FAILED":{"errorCode":55023,"severity":"error","desc":"Failed to apply autosave diffs","params":{"p1":"errorMsg","p2":"op","p3":"path","p4":"value"}},"AUTOSAVE_FAILED_DUE_TO_PRE_SAVE_OPERATION":{"errorCode":55024,"severity":"error","params":{"p1":"stack"}},"PASSWORD_PROTECTION_HASH_GENERATION_FAILED":{"errorCode":55025,"severity":"error","params":{"p1":"serverErrorCode","p2":"errorDescription"}},"SYNC_DELETED_ITEMS_AFTER_SAVE_FAILED":{"errorCode":55026,"severity":"error","params":{"p1":"errorType","p2":"itemId","p3":"pagesIds"}},"MOBILE_STRUCTURE_MANDATORY_ELEMENT_MISSING":{"errorCode":55027,"severity":"error","params":{"p1":"missingComponents","p2":"stack"}},"DIRECT_PAGES_DATA_ACCESS_IN_GSD":{"errorCode":55028,"severity":"warning","params":{"p1":"path","p2":"stack"}},"ADD_COMPONENT_WITH_CUSTOM_STYLE_ID":{"errorCode":55778,"sampleRatio":10,"severity":"error","params":{"p1":"styleId","p2":"compType"}},"FAILED_TO_SEND_MOBILE_MENU_CONTAINER_CORRUPTION_MSG":{"errorName":"FAILED_TO_SEND_MOBILE_MENU_CONTAINER_CORRUPTION_MSG","errorCode":112003,"severity":"error","params":{"p1":"statusId","p2":"errorType","p3":"errorMessage"}}}')},function(e,t,n){e.exports=function(){var e=n(0),t=n(42),o={FB_USERNAME_IS_NOT_STRING:"FB_USERNAME_IS_NOT_STRING",FB_USERNAME_INVALID_CHARS:"FB_USERNAME_INVALID_CHARS",FB_USERNAME_TOO_LONG:"FB_USERNAME_TOO_LONG",FB_THUMBNAIL_IS_NOT_STRING:"FB_THUMBNAIL_IS_NOT_STRING"},r={FB_USERNAME_MAX_LENGTH:250};function i(t,n){if(!e.isString(n))return{success:!1,errorCode:o.FB_USERNAME_IS_NOT_STRING};if(n.length>r.FB_USERNAME_MAX_LENGTH)return{success:!1,errorCode:o.FB_USERNAME_TOO_LONG};var i,a=(i=n,e.uniq(i.match(/[^a-zA-Z0-9\.]/g)));return a&&a.length?{success:!1,errorCode:o.FB_USERNAME_INVALID_CHARS,errorContent:a}:{success:!0}}return{facebook:{setThumbnail:function(n,r){var i=function(t){if(!e.isString(t))return{success:!1,errorCode:o.FB_THUMBNAIL_IS_NOT_STRING};return{success:!0}}(r);if(!i.success)throw new Error(i.errorCode);t.setProperty(n,t.PROPERTY_NAMES.SOCIAL_THUMBNAIL,r||"")},getThumbnail:function(e){return t.getProperty(e,t.PROPERTY_NAMES.SOCIAL_THUMBNAIL)},setUsername:function(n,o){var r=i(n,o);if(!r.success)throw new Error(r.errorCode);var a=t.getProperty(n,t.PROPERTY_NAMES.META_TAGS);e.find(a,{name:"fb_admins_meta_tag"}).value=o||"",t.setProperty(n,t.PROPERTY_NAMES.META_TAGS,a)},getUsername:function(n){var o=t.getProperty(n,t.PROPERTY_NAMES.META_TAGS);return e.find(o,{name:"fb_admins_meta_tag"}).value},validateUsername:i,ERRORS:o}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(42),{get:function(e){return r.getProperty(e,r.PROPERTY_NAMES.FAVICON)},set:function(e,t){var n=function(e){return o.isString(e)?{success:!0}:{success:!1,errorCode:i.FAVICON_IS_NOT_STRING}}(t);if(!n.success)throw new Error(n.errorCode);r.setProperty(e,r.PROPERTY_NAMES.FAVICON,t||"")},ERRORS:i={FAVICON_IS_NOT_STRING:"FAVICON_IS_NOT_STRING"}})},function(e,t,n){var o;e.exports=(o=n(42),{getFeatures:function(e){return o.getProperty(e,o.PROPERTY_NAMES.PREMIUM_FEATURES)},setFeatures:function(e,t){o.setProperty(e,o.PROPERTY_NAMES.PREMIUM_FEATURES,t)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(42),o={SITE_NAME_IS_EMPTY:"SITE_NAME_IS_EMPTY",SITE_NAME_IS_NOT_STRING:"SITE_NAME_IS_NOT_STRING",SITE_NAME_INVALID_CHARS:"SITE_NAME_INVALID_CHARS",SITE_NAME_ENDS_WITH_HYPHEN:"SITE_NAME_ENDS_WITH_HYPHEN",SITE_NAME_TOO_SHORT:"SITE_NAME_TOO_SHORT",SITE_NAME_TOO_LONG:"SITE_NAME_TOO_LONG",SITE_NAME_ALREADY_EXISTS:"SITE_NAME_ALREADY_EXISTS"},r={MIN_LENGTH:4,MAX_LENGTH:20};function i(t,n){var r=a(n);return r.success?function(t,n){n=u(n);var o=e.without(c.call(this,t),s(t));return e.includes(e.invokeMap(o,"toLowerCase"),n)}(t,n)?{success:!1,errorCode:o.SITE_NAME_ALREADY_EXISTS}:{success:!0,extraInfo:u(n)}:r}function a(t){if(!e.isString(t))return{success:!1,errorCode:o.SITE_NAME_IS_NOT_STRING};if(e.isEmpty(t))return{success:!1,errorCode:o.SITE_NAME_IS_EMPTY};var n=function(t){return e.uniq(t.match(/[^a-zA-Z0-9\s\-]/g))}(t);return n&&n.length?{success:!1,errorCode:o.SITE_NAME_INVALID_CHARS,errorContent:n}:function(e){return"-"===e.slice(-1)}(t)?{success:!1,errorCode:o.SITE_NAME_ENDS_WITH_HYPHEN}:(t=u(t)).length<r.MIN_LENGTH?{success:!1,errorCode:o.SITE_NAME_TOO_SHORT}:t.length>r.MAX_LENGTH?{success:!1,errorCode:o.SITE_NAME_TOO_LONG}:{success:!0,extraInfo:u(t)}}function s(e){return t.getProperty(e,t.PROPERTY_NAMES.SITE_NAME)}function c(e){return t.getProperty(e,t.PROPERTY_NAMES.USED_META_SITE_NAMES)}function u(e){return e.replace(/([^\s\w\d_\-])/g,"").replace(/\s+/g,"-").replace(/-+$/g,"").toLowerCase()}return{set:function(n,o){var r=i(n,o);if(!r.success)throw new Error(r.errorCode);var l=s(n);t.setProperty(n,t.PROPERTY_NAMES.SITE_NAME,u(o)),a(l).success&&function(n,o){var r=c(n);r=e.without(r,o),t.setProperty(n,t.PROPERTY_NAMES.USED_META_SITE_NAMES,r)}(n,l)},get:s,sanitize:function(e,t){return u(t)},validate:i,getUsedSiteNames:c,markSiteNameAsUsed:function(e,n){var o=t.getProperty(e,t.PROPERTY_NAMES.USED_META_SITE_NAMES);o.push(n),t.setProperty(e,t.PROPERTY_NAMES.USED_META_SITE_NAMES,o)},ERRORS:o}}()},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(42),{cookies:{enable:function(e,t){if(!o.isBoolean(t))throw new Error("argument isEnabled must be boolean");r.setProperty(e,r.PROPERTY_NAMES.SUPPRESS_COOKIES,!t)},isEnabled:function(e){return!r.getProperty(e,r.PROPERTY_NAMES.SUPPRESS_COOKIES)}}})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(7),i=n(3),a=["news","menu","faq"],s="wixapps.integration.components.AppPart",{hasAppPage:function(e){var t=function(e){var t=e.pointers.page.getPageData("masterPage");return e.dal.get(t)}(e);return!!o.find(t,{type:"AppPage",appPageType:"AppBuilderPage"})},hasOldApp:function(e){var t=e.pointers.general.getClientSpecMap(),n=e.dal.get(t),c={};o.forEach(a,(function(e){var t=o.find(n,{type:"wixapps",packageName:e});if(t){var r=t.applicationId;c[r]=t}}));var u=o.find(n,{packageName:"ecommerce"});if(u&&(c[u.applicationId]=u),o.isEmpty(c))return!1;var l=r.getComponentByType(e,s);return o.some(l,(function(t){var n=i.getDataItem(e,t);return!!c[n.appInnerID]}))},hasNewBlog:function(e){var t=e.pointers.general.getClientSpecMap(),n=e.dal.get(t);return!!o.find(n,["appDefinitionName","Wix Blog"])}})},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(12),r=n(59),i=n(60),a=n(6),s=n(5),c=n(19).services,u=c.dataValidators,l=c.schemasService,p=t.constants.DATA_TYPES;function d(e,t,n,o,r,i){return function(e,t,n,o,r,i){var c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=[],l=s.isOpen("se_deserializePlugin")?a.executeHookAndUpdateValue(e,a.HOOKS.DESERIALIZE.BEFORE,void 0,[r,o],n):n,p=g(e,t,l,o,r,i,u,void 0,c),d=u.reverse();return function(e,t){for(var n=null,o=0;o<t.length;o++){var r=t[o],i=r.pointer;!n&&i.component&&(n=i.component),i.component=n,i.refPath=r.refPath;var a=r.item;e.dal.set(i,a)}}(e,d),p}(e,t,n,o,r,i,arguments.length>6&&void 0!==arguments[6]&&arguments[6])}function g(t,n,o,r,i,a,s,c){var l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=f(t,n,o,r,i,g,s,c=c||[],l);e.set(p,"metaData.isPreset",!1);var d=t.pointers.data.getItemWithOptional(i,p.id,n,a);return d.useOriginalLanguage=l,u.validateDataBySchema(p,i),s.push({pointer:d,item:p,refPath:c}),p.id}function f(t,n,o,a,s,c,u,p){var d=arguments.length>8&&void 0!==arguments[8]&&arguments[8],g=a||i.generateNewId(s),f={},m={id:g},v=t.pointers.data.getItem(s,g,n);t.dal.isExist(v)&&(f=t.dal.full.get(v)),o.type=o.type||e.get(f,"type");var E,y,I=o.type;if(!l.getSchema(s,I))throw new Error("missing schema (schemaType: ".concat(s," schemaName: ").concat(I,") for the given data item"));function S(e,o){return"#".concat(c?c(t,n,o,o.id,s,null,u,p.concat(e),d):o.id||i.generateNewId(s))}return e.forOwn(o,(function(t,n){e.isPlainObject(t)&&r.isOfType(s,I,n,"ref")?m[n]=S(n,t):r.isOfType(s,I,n,"refList")?m[n]=e.map(t,S.bind(null,n)):"id"!==n&&(m[n]=t)})),y=m,(E=f).type&&y.type&&!e.isEqual(E.type,y.type)||(m=e.assign(f,m)),function(t){t.metaData=e.assign({isPreset:!1,schemaVersion:"1.0",isHidden:!1},t.metaData)}(m),m}var m=function(n){return e.isString(n)&&t.stringUtils.startsWith(n,"#")&&n.replace("#","")};return{addSerializedItemToPage:function(e,t,n,o,r){return d(e,t,n,o,r)},addSerializedStyleItemToPage:function(e,t,n){var o;return d(e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"masterPage",(o=t,s.isOpen("sv_newResponsiveDataModels")&&o&&"StylesInBreakpoint"===o.type?{type:"RefArray",values:o.stylesInBreakpoints.map((function(e){return e.breakpoint?{type:"BreakpointRelation",breakpoint:e.breakpoint,ref:e}:e}))}:o),n,p.theme)},addSerializedDataItemToPage:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return d(e,t,n,o,p.data,void 0,r)},addSerializedPropertyItemToPage:function(e,t,n,o,r){return d(e,t,n,o,p.prop,r)},addSerializedDesignItemToPage:function(e,t,n,o,r){return d(e,t,n,o,p.design,r)},addSerializedBehaviorsItemToPage:function(e,t,n,o){return d(e,t,n,o,p.behaviors)},addSerializedLayoutItemToPage:function(e,t,n,r){return d(e,t,(i=n,s.isOpen("sv_newResponsiveDataModels")&&i&&"LayoutData"===i.type?{type:"RefArray",values:[].concat(o(i.itemLayouts||[]),o(i.componentLayouts||[]),o(i.containerLayouts||[])).map((function(e){return e.breakpoint?{type:"BreakpointRelation",breakpoint:e.breakpoint,ref:e}:e}))}:i),r,p.layout);var i},addSerializedBreakpointItemToPage:function(e,t,n,o){return d(e,t,n,o,p.breakpoints)},addSerializedConnectionsItemToPage:function(e,t,n,o){return d(e,t,n,o,p.connections)},addSerializedMobileHintsItemToPage:function(e,t,n,o,r){return d(e,t,n,o,p.mobileHints,r)},deserializeDataItem:function(e,t,n){return f(e,null,t,t.id,n)},serializeDataItem:function t(n,o,i,a){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(n.dal.full.isExist(i)){i=e.assign({},i,{useOriginalLanguage:!0});var c=n.dal.full.get(i),u=n.pointers.data.getPageIdOfData(i),l=c;if(!0!==s){var p=e.assign({},i,{useOriginalLanguage:!1}),d=n.dal.full.get(p);l=e.defaults(e.omitBy(d,e.isNil),c)}a&&delete l.id;var g=l.type;return e.forOwn(l,(function(t,n){var i,a=r.isOfType(o,g,n,"ref");if(t&&a)t=f(t);else{var s=r.isOfType(o,g,n,"refList");t&&s&&(i=t,t=e.compact(e.map(i,(function(e){return f(e)}))))}l[n]=t})),l}function f(r){var i=function(t,n,o,r){var i=e.isObject(n)?n.id:m(n);return t.pointers.data.getItem(r,i,o)}(n,r,u,o);return t(n,o,i,a,s)}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o={LAYOUT:{UPDATE_BEFORE:"before_layout_update",UPDATE_AFTER:"after_layout_update"},COMPONENT:{STYLE_UPDATE_AFTER:"after_style_update"},ADD:{BEFORE:"before_add",AFTER:"after_add",IS_OPERATION_ALLOWED:"isOperationAllowed_add"},DATA:{UPDATE_BEFORE:"data_update_before",UPDATE_AFTER:"data_update_after",SET_BY_POINTER_AFTER:"data_set_by_pointer_after",AFTER_GET:"after_get_data",AFTER_UPDATE_CONNECTIONS:"data_after_update_connections"},DESIGN:{UPDATE_BEFORE:"design_update_before",UPDATE_AFTER:"design_update_after"},MOBILE_HINTS:{UPDATE_BEFORE:"mobile_hints_update_before"},SITE_BACKGROUND_UPDATE:{AFTER:"after_site_background_update"},PROPERTIES:{UPDATE_BEFORE:"properties_update_before",UPDATE_AFTER:"properties_update_after"},ADD_ROOT:{BEFORE:"before_add_root",AFTER:"after_add_root",IS_OPERATION_ALLOWED:"isOperationAllowed_add_root",GET_CONTAINER_TO_ADD_TO:"get_container_to_add_to"},ADD_PAGE:{AFTER:"after_add_page"},DUPLICATE_ROOT:{BEFORE:"before_duplicate_root",AFTER:"after_duplicate_root"},REMOVE:{BEFORE:"before_remove",AFTER:"after_remove",IS_OPERATION_ALLOWED:"isOperationAllowed_remove"},DUPLICATE:{BEFORE:"before_duplicate",IS_OPERATION_ALLOWED:"isOperationAllowed_duplicate"},DESERIALIZE:{BEFORE:"before_deserialize"},SERIALIZE:{SET_CUSTOM:"set_custom_serialize",CHILDREN_BEFORE:"before_serialize_children"},CHANGE_PARENT:{BEFORE:"before_change_parent",AFTER:"after_change_parent"},CHANGE_COMPONENT_VIEW_MODE:{BEFORE:"before_change_component_view_mode"},SWITCH_VIEW_MODE:{AFTER:"after_switch_view_mode",MOBILE:"switch_to_mobile_view"},MOBILE_CONVERSION:{BEFORE:"before_mobile_conversion",AFTER:"after_mobile_conversion"},MOBILE_MERGE:{BEFORE:"before_mobile_merge"},RELAYOUT_MOBILE_PAGE:{AFTER:"after_relayout_page"},PUBLISH:{BEFORE:"before_site_publish"},AUTOSAVE:{ACTION:"autosave_action"},SAVE:{SITE_SAVED:"site_saved",VALIDATION_ERROR:"validation_error"},WIX_CODE:{FLUSH:"wixcode_flush",SET_NICKNAME_BEFORE:"wixcode_set_nickname_before"},METADATA:{MOVE_DIRECTIONS:"meta_data_move_directions",REMOVABLE:"meta_data_removable",DUPLICATABLE:"meta_data_duplicatable",CAN_REPARENT:"meta_data_can_reparent",RESIZABLE_SIDES:"meta_data_resizable_sides",ROTATABLE:"meta_data_rotatable",FIXED_POSITION:"meta_data_fixed_position",CONTAINABLE:"meta_data_containable",LAYOUT_LIMITS:"meta_data_layout_limits"},MULTILINGUAL:{AFTER_CHANGE_LANGUAGE:"after_change_language"},PLATFORM:{APP_PROVISIONED:"platform_app_provisioned",APP_UPDATED:"platform_app_updated",AFTER_CONTROLLERS_SET_STATE:"after_platform_controllers_set_state"},CONNECTION:{AFTER_DISCONNECT:"after_connection_disconnect"},ADD_TPA:{AFTER:"after_tpa_app_add"},PAGE:{AFTER_NAVIGATE_TO_PAGE:"after_navigate_to_page"},UNDO_REDO:{AFTER_APPLY_SNAPSHOT:"after_apply_snapshot"},REMOVE_COMP_MODE:{BEFORE:"before_remove_comp_mode"}},r=e(o).flatMap((function(t){return e.flatMap(t)})).reduce((function(e,t){return e[t]=!0,e}),Object.create(null));function i(e){if(!r[e])throw new Error("Invalid Hook Name ".concat(e))}return{createHandler:function(){var n=Object.create(null),r={isRunningRecursiveHooksAllowed:!0};function a(o){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.wSpy.logCallBackRegistration(i,"setHook",Array.prototype.slice.call(arguments),"at setHook"),i){var s=n[o];s||(n[o]=s=Object.create(null));var c=s[r];if(c){if(a&&e.find(c,"isExternal"))return}else s[r]=c=[];var u={func:i,isExternal:a};return e(c).map("func").some((function(e){return i===e}))||c.push(u),i}}function s(t,o,a){if(i(t),r.isRunningRecursiveHooksAllowed){var s=n[t];s&&(o&&e.forEach(s[o],a),e.forEach(s[""],a))}}function c(e,n){e.isExternal&&(r.isRunningRecursiveHooksAllowed=!1),t.wSpy.logCallBackExecution(e.func,"applyHook",Array.prototype.slice.call(arguments));var o=e.func.apply(this,n);return r.isRunningRecursiveHooksAllowed=!0,o}return{HOOKS:o,unregisterHooks:function(t){var o=e.isArray(t)?t:[t];e.forEach(o,(function(e){n[e]={}}))},unregisterComponentHook:function(e,t){n[e]&&n[e][t]&&(n[e][t]=[])},unregisterHook:function(t,o,r){if(r=r||"",n[t]&&n[t][r]){var i=n[t][r];e.remove(i,["func",o])}},registerHook:function(e,t,n){return i(e),a(e,n,t,!1)},registerExternalHook:function(e,t,n){i(e),a(e,n,t,!0)},executeHook:function(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.noop,i=!1;return s(t,n,(function(e){var t=c(e,o);if(i||r(t))return i=!0,!1})),!i},executeHooksAndCollectValues:function(t,n,o){var r=[];return s(t,n,(function(t){var n=c(t,o);e.isUndefined(n)||r.push(n)})),r},executeHookAndUpdateValue:function(t,n,o,r,i){var a=e.cloneDeep(i);return s(n,o,(function(e){a=c(e,[t,a].concat(r))})),a}}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(59),r=n(15),i=n(263),a=t.constants.DATA_TYPES,s={data:["MAIN_MENU","CUSTOM_MENUS","CUSTOM_MAIN_MENU"],props:[],style:[]};function c(e,t,n){if(!e||!t)return null;var o=e.pointers.getInnerPointer(t,n),r=(e.dal.isExist(o)?e.dal:e.dal.full).get(o);return r?r.replace("#",""):null}function u(t,n,r,i){if(t.dal.isExist(r)){var a,c,l=t.dal.get(r);if(l&&(a=n,c=r.id,!e.includes(s[a],c)))o.executeForDataItemRefs(n,l,(function(e){if(e){var o=t.pointers.data.getItem(n,e.replace("#",""),i);u(t,n,o,i)}})),t.dal.remove(r)}}function l(e,t){if(e.dal.isExist(t)&&!i.isDataItemPersistent(e,t)){var n=e.pointers.data.getPageIdOfData(t);u(e,a.data,t,n)}}function p(e,t){return(e.pointers.components.getPageOfComponent(t)||e.pointers.full.components.getPageOfComponent(t)).id}return{removeDataItemRecursively:l,removeDesignItemRecursively:function(e,t){if(e.dal.isExist(t)){var n=e.pointers.data.getPageIdOfData(t);u(e,a.design,t,n)}},removeConnectionsItem:function(e,t){var n=c(e,t,"connectionQuery");if(n){var o=p(e,t),r=e.pointers.data.getConnectionsItem(n,o);u(e,a.connections,r,o);var i=e.pointers.getInnerPointer(t,"connectionQuery");e.dal.full.remove(i)}},removeBehaviorsItem:function(e,t){var n=c(e,t,"behaviorQuery");if(n){var o=p(e,t),r=e.pointers.data.getBehaviorsItem(n,o);u(e,a.behaviors,r,o);var i=e.pointers.getInnerPointer(t,"behaviorQuery");e.dal.full.remove(i)}},removeMobileHintsItem:function(e,t){var n=c(e,t,"mobileHintsQuery");if(!n||e.pointers.page.is)return null;var o=p(e,t),r=e.pointers.data.getMobileHintsItem(n,o);l(e,r)},deleteDesignItem:function(e,t){if(e&&t){var n=c(e,t,"designQuery");if(!n)return null;var o=p(e,t),r=e.pointers.data.getDesignItem(n,o);u(e,a.design,r,o)}},deletePropertiesItem:function(e,t){if(e&&t){var n=c(e,t,"propertyQuery");if(!n)return null;var o=p(e,t),i=e.pointers.data.getPropertyItem(r.stripHashIfExists(n),o);u(e,a.prop,i,o)}},deleteDataItem:function(e,t){if(e&&t){var n=c(e,t,"dataQuery");if(!n)return null;var o=p(e,t),r=e.pointers.data.getDataItem(n,o);l(e,r)}}}}()},function(e,t,n){var o,r;e.exports=(o=n(0),r=["MAIN_MENU","CUSTOM_MENUS","CUSTOM_MAIN_MENU","IMAGE_QUALITY"],{isDataItemPersistent:function(e,t){var n=e.dal.get(t);return n&&o.includes(r,n.id)}})},function(e,t){e.exports=_},function(e,t){e.exports=O},function(e,t){e.exports={mobileConversionConfig:{hideByDefault:!0}}},function(e,t,n){var o;e.exports=(o=n(0),{isRepeatable:!1,styleCanBeApplied:!1,layoutLimits:function(e,t){var n=e.siteAPI.getSiteMeasureMap(),r=o.get(n,["custom",t.id],{});return{minHeight:r.minHeight,minWidth:r.minWidth}},containableByStructure:n(9).notContainableByPopup,mobileConversionConfig:{desktopOnly:!0}})},function(e,t,n){var o,r;e.exports=(o=n(2),r=n(3),{"wysiwyg.viewer.components.WSiteStructure":!0,"mobile.core.components.SiteStructure":!0,"wysiwyg.viewer.components.FooterContainer":!0,"wysiwyg.viewer.components.HeaderContainer":!0,"mobile.core.components.Page":!0,"core.components.Page":!0,"wixapps.integration.components.AppPage":!0,"wysiwyg.viewer.components.ScreenWidthContainer":!0,"wysiwyg.viewer.components.StripContainer":!0,"wysiwyg.viewer.components.StripContainerSlideShow":!0,"wysiwyg.viewer.components.StripContainerSlideShowSlide":!0,"wysiwyg.viewer.components.StripColumnsContainer":!0,"wysiwyg.viewer.components.Column":function(e,t){if(e.pointers.components.getViewMode(t)===o.VIEW_MODES.MOBILE)return!0;var n=0===e.pointers.components.getSiblings(t).length,i=e.pointers.components.getParent(t),a=r.getPropertiesItem(e,i);return n&&a.fullWidth}})},function(e,t,n){var o,r;e.exports=(o=n(1),r=n(0),{isRepeatable:!1,rotatable:!0,layoutLimits:function(e,t){var n=e.siteAPI.getSiteMeasureMap();return{minWidth:r.get(n,["minWidth",t.id],o.siteConstants.COMP_SIZE.MIN_WIDTH)}}})},function(e,t,n){e.exports=function(){n(9);var e=n(2);return{moveDirections:[e.MOVE_DIRECTIONS.VERTICAL],resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,styleCanBeApplied:!0,mobileConversionConfig:{isScreenWidth:!0,filterChildrenWhenHidden:!0,preserveAspectRatio:!1}}}()},function(e,t,n){var o;e.exports={resizableSides:[(o=n(2)).RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:180,maxWidth:980,minHeight:180,maxHeight:1024},styleCanBeApplied:!0}},function(e,t,n){var o,r;e.exports=(o=n(3),r=n(2),{isRepeatable:!1,resizableSides:function(e,t){var n=o.getDataItem(e,t).showStream?[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.BOTTOM,r.RESIZE_SIDES.RIGHT]:[r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT];return n},layoutLimits:{minWidth:280,minHeight:575,maxWidth:500}})},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={resizableSides:[]}},function(e,t,n){e.exports=function(){n(0),n(3);var e=n(2),t=n(1);function o(e,n){var o=e.pointers.getInnerPointer(n,"layout"),r=e.dal.get(o);return t.dockUtils.isStretched(r)}return{mobileConversionConfig:{category:"graphic"},styleCanBeApplied:!0,rotatable:function(e,t){return!o(e,t)},resizableSides:function(){return[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT]},moveDirections:function(t,n){return o(t,n)?[e.MOVE_DIRECTIONS.VERTICAL]:[e.MOVE_DIRECTIONS.HORIZONTAL,e.MOVE_DIRECTIONS.VERTICAL]},fullWidth:function(e,n){return function(e,n){var o=e.pointers.getInnerPointer(n,"layout"),r=e.dal.get(o);return t.dockUtils.isHorizontalDockToScreen(r)}(e,n)},fullWidthByStructure:function(e,n){return!!t.dockUtils.isHorizontalDockToScreen(n.layout)},canBeStretched:!0,heightAuto:!0}}()},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t,n){var o,r,i;e.exports=(o=n(2),r=n(86),i=n(5),{resizableSides:[o.RESIZE_SIDES.BOTTOM],moveDirections:function(e){if(i.isOpen("sv_zeroGapsThreshold"))return[o.MOVE_DIRECTIONS.VERTICAL];var t=r.getInitialGapMap(e);return t&&t.aboveHeader>=o.SITE_SEGMENTS_GAP_THRESHOLD?[o.MOVE_DIRECTIONS.VERTICAL]:[]},canBeFixedPosition:!0,removable:!1,duplicatable:!1,containable:!1,fullWidth:!0,enforceContainerChildLimitsByHeight:function(e,t){return!e.pointers.components.isMobile(t)},styleCanBeApplied:function(e){var t=e.pointers.general.getIsStudioUser();return e.dal.get(t)},hiddenable:!1,collapsible:!1,mobileConversionConfig:{preserveAspectRatio:!1,minHeight:90,topRightMargin:[90,90],descendantImageScaleFactor:.7,siteSegmentRole:"SITE_HEADER",category:"siteSegments"}})},function(e,t,n){var o,r,i;e.exports=(o=n(2),r=n(86),i=n(5),{resizableSides:[o.RESIZE_SIDES.BOTTOM],moveDirections:function(e){return e.siteAPI.getMasterPageLayoutSettings().useDesktopSectionsLayout?[]:i.isOpen("sv_zeroGapsThreshold")?[o.MOVE_DIRECTIONS.VERTICAL]:r.getInitialGapMap(e).aboveFooter>=o.SITE_SEGMENTS_GAP_THRESHOLD?[o.MOVE_DIRECTIONS.VERTICAL]:[]},canBeFixedPosition:function(e,t){return!e.pointers.components.isMobile(t)},removable:!1,duplicatable:!1,containable:!1,fullWidth:!0,styleCanBeApplied:function(e){var t=e.pointers.general.getIsStudioUser();return e.dal.get(t)},hiddenable:!1,collapsible:!1,mobileConversionConfig:{preserveAspectRatio:!1,siteSegmentRole:"SITE_FOOTER",category:"siteSegments"}})},function(e,t){e.exports={rotatable:!0}},function(e,t,n){var o;e.exports={resizableSides:[(o=n(2)).RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:110,maxWidth:400}}},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(3),i=n(15),{resizableSides:[],defaultMobileProperties:{iconSize:35,spacing:15},mobileConversionConfig:{fixedSize:function(e,t,n){var a=e.dal.get(e.pointers.data.getPropertyItem(i.stripHashIfExists(t.propertyQuery),n)),s=r.getDataItemById(e,i.stripHashIfExists(t.dataQuery),n),c=o.get(s,["items","length"],0),u=o.get(a,"iconSize",0),l=u*c+o.get(a,"spacing",0)*(c-1),p="HORIZ"===o.get(a,"orientation","HORIZ");return{width:p?l:u,height:p?u:l}}},heightAuto:!0,widthAuto:!0})},function(e,t){e.exports={isRepeatable:!1}},function(e,t,n){var o,r,i;e.exports=(o=n(1),r=n(0),i=n(2),{layoutLimits:function(e,t){var n=e.siteAPI.getSiteMeasureMap()||{},i=t.id;return{minWidth:r.get(n,["minWidth",i],o.siteConstants.COMP_SIZE.MIN_WIDTH),minHeight:r.get(n,["minHeight",i],o.siteConstants.COMP_SIZE.MIN_HEIGHT)}},mobileConversionConfig:{hideByDefault:function(e,t,n){var o=e.pointers.components.getMasterPage(i.VIEW_MODES.MOBILE),r=e.pointers.components.getComponent(i.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,o),a=e.dal.isExist(r);return"masterPage"===n&&!a}}})},function(e,t){e.exports={rotatable:!0,resizableSides:[]}},function(e,t,n){var o;e.exports={anchors:{to:{allow:!0,lock:(o=n(2)).ANCHORS.LOCK_CONDITION.THRESHOLD},from:{allow:!0,lock:o.ANCHORS.LOCK_CONDITION.ALWAYS}},resizableSides:[],moveDirections:[],removable:!1,duplicatable:!1,fullWidth:!0,collapsible:!1,hiddenable:!1}},function(e,t,n){var o,r;e.exports=(o=n(2),r=n(62),{anchors:{to:{allow:!0,lock:o.ANCHORS.LOCK_CONDITION.NEVER},from:!1},resizableSides:[],moveDirections:[],containable:!1,duplicatable:!1,removable:!1,fullWidth:!0,styleCanBeApplied:function(e,t){return!(e.siteAPI.getCurrentPopupId()===t.id)},hiddenable:!1,collapsible:!1,dockable:!1,mobileConversionConfig:{shouldApplyPreset:!1,marginX:20,category:"page"},maximumChildrenNumber:function(e,t){return t&&r.isWidgetPage(e,t.id)?1:Number.MAX_VALUE}})},function(e,t){e.exports={minimalChildrenNumber:2,resizableSides:[],canBeFixedPosition:!1,mobileConversionConfig:{category:"boxContainer",filterChildrenWhenHidden:!0,isTightContainer:!0,nestOverlayingSiblings:!1,marginX:0}}},function(e,t,n){var o,r,i;e.exports=(o=n(3),r=n(2),i=[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.BOTTOM,r.RESIZE_SIDES.RIGHT],{isRepeatable:!1,mobileConversionConfig:{hideByDefault:!0},resizableSides:function(e,t){return"original"===o.getPropertiesItem(e,t).displayMode?[]:i}})},function(e,t,n){var o,r,i;e.exports=(o=n(2),r=n(86),i=n(5),{anchors:{to:{allow:!0,allowBottomBottom:!1,lock:o.ANCHORS.LOCK_CONDITION.THRESHOLD},from:{allow:!0,lock:o.ANCHORS.LOCK_CONDITION.ALWAYS}},resizableSides:[],moveDirections:function(e){return e.siteAPI.getMasterPageLayoutSettings().useDesktopSectionsLayout?[]:i.isOpen("sv_zeroGapsThreshold")?[o.MOVE_DIRECTIONS.VERTICAL]:r.getInitialGapMap(e).abovePagesContainer>=o.SITE_SEGMENTS_GAP_THRESHOLD?[o.MOVE_DIRECTIONS.VERTICAL]:[]},removable:!1,duplicatable:!1,containable:!1,fullWidth:!1,hiddenable:!1,collapsible:!1,mobileConversionConfig:{marginX:20,siteSegmentRole:"PAGES_CONTAINER",category:"siteSegments"}})},function(e,t){e.exports={resizableSides:[]}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={rotatable:!0}},function(e,t,n){var o;e.exports={resizableSides:[(o=n(2)).RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM],moveDirections:[o.MOVE_DIRECTIONS.VERTICAL],fullWidth:!0,mobileConversionConfig:{isScreenWidth:!0,preserveAspectRatio:!1}}},function(e,t,n){var o,r;e.exports=(o=n(2),n(27),r=n(9),{resizableSides:[o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM],moveDirections:[o.MOVE_DIRECTIONS.VERTICAL],fullWidth:!0,fullWidthByStructure:!0,canBeFixedPosition:!1,containableByStructure:r.containableByFullWidthPopup,mobileConversionConfig:{hideWhenEmptyBackgroundContainer:!0,isScreenWidth:!0,filterChildrenWhenHidden:!0,minHeight:200,preserveAspectRatio:!1}})},function(e,t,n){var o;e.exports={styleCanBeApplied:!0,resizableSides:[(o=n(2)).RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:250}}},function(e,t,n){var o,r;e.exports=(o=n(1),r=n(0),{rotatable:!0,styleCanBeApplied:!0,layoutLimits:function(e,t,n){var i=e.siteAPI.getSiteMeasureMap(),a={minWidth:r.get(i,["minWidth",t.id],o.siteConstants.COMP_SIZE.MIN_WIDTH),minHeight:r.get(i,["minHeight",t.id],o.siteConstants.COMP_SIZE.MIN_HEIGHT)};if(n&&n.scale){var s=function(e,t){var n=e.pointers.getInnerPointer(t,"layout.scale");return e.dal.get(n)||1}(e,t);if(s!==n.scale){var c=n.scale/s;return r.mapValues(a,(function(e){return e*c}))}}return a},disableable:!0})},function(e,t,n){var o,r;e.exports=(o=n(2),r=n(2),{anchors:{to:{allow:!0,lock:o.ANCHORS.LOCK_CONDITION.THRESHOLD},from:{allow:!0,lock:o.ANCHORS.LOCK_CONDITION.ALWAYS}},resizableSides:[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.BOTTOM],containable:!1})},function(e,t,n){e.exports=function(){n(0),n(14);var e=n(9),t=n(2);function o(t,n,o){var r=e.getComponentType(t,o);return e.isSiteStructure(r)}return{canBeFixedPosition:!0,removable:!1,resizableSides:function(e,n){return n.type===t.VIEW_MODES.MOBILE?[t.RESIZE_SIDES.BOTTOM]:[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT,t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.BOTTOM]},moveDirections:function(e,n){return n.type===t.VIEW_MODES.MOBILE?[]:[t.MOVE_DIRECTIONS.VERTICAL,t.MOVE_DIRECTIONS.HORIZONTAL]},duplicatable:!1,containable:o,containableByStructure:o,fullWidth:function(e,n){return n.type===t.VIEW_MODES.MOBILE},enforceContainerChildLimitsByHeight:!0,styleCanBeApplied:!1,hiddenable:!0,collapsible:!0,mobileConversionConfig:{preserveAspectRatio:!1,siteSegmentRole:"SUBHEADER",category:"siteSegments",isTightContainer:!0,hasTightMarginBetweenChildren:!0}}}()},function(e,t,n){var o;e.exports={anchors:{to:{allow:!0,lock:(o=n(2)).ANCHORS.LOCK_CONDITION.ALWAYS,distance:0},from:{allow:!1,lock:o.ANCHORS.LOCK_CONDITION.NEVER}},resizableSides:[],moveDirections:[],removable:!1,duplicatable:!1,containable:!1,fullWidth:!0,collapsible:!1,hiddenable:!1}},function(e,t){e.exports={resizableSides:[]}},function(e,t,n){var o,r;e.exports=(o=n(3),r=n(2),{styleCanBeApplied:!0,canBeStretched:!0,resizableSides:function(e,t){return"flexibleHeight"===o.getPropertiesItem(e,t).imageMode?[r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT]:[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.BOTTOM,r.RESIZE_SIDES.RIGHT]},mobileConversionConfig:{minHeight:200}})},function(e,t){e.exports={isRepeatable:!1,canBeStretched:!0,defaultMobileProperties:{textMode:"noText"}}},function(e,t){e.exports={isRepeatable:!1,canBeStretched:!0}},function(e,t){e.exports={isRepeatable:!1}},function(e,t){e.exports={isRepeatable:!1,canBeStretched:!0,mobileConversionConfig:{fixedSize:{width:280,height:240}}}},function(e,t,n){var o,r;e.exports=(o=n(3),r=n(2),{isRepeatable:!1,resizableSides:function(e,t){return o.getPropertiesItem(e,t).uri?[r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT]:[]},mobileConversionConfig:{preserveAspectRatio:!1}})},function(e,t,n){var o,r,i;e.exports=(o=n(2),r={"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormBoxLayoutEnvelope":{minWidth:505,maxWidth:980,minHeight:126,maxHeight:1024},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormBoxLayoutFlat":{minWidth:505,maxWidth:980,minHeight:98,maxHeight:1024},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormBoxLayoutShiny":{minWidth:505,maxWidth:980,minHeight:98,maxHeight:1024},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutFlat":{minWidth:724,maxWidth:1e3,minHeight:85,maxHeight:300},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutTransparentWithIcon":{minWidth:800,maxWidth:1e3,minHeight:81,maxHeight:300},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormPlaceholderSkin":{minWidth:235,maxWidth:980,maxHeight:1024}},i={minWidth:235,maxWidth:980,minHeight:120,maxHeight:1024},{resizableSides:[o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT],styleCanBeApplied:!0,layoutLimits:function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"skin"));return r[n]||i}})},function(e,t,n){var o;e.exports=(o=n(0),{mobileConversionConfig:{category:"graphic",isSuitableForProportionGrouping:!0},rotatable:!0,layoutLimits:function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"styleId")),r=e.pointers.components.getPageOfComponent(t).id,i=e.dal.get(e.pointers.data.getThemeItem(n,r)),a=parseInt(o.get(i,"style.properties.strokewidth",0),0),s=a+1,c=a+1,u=o.get(i,"svgId"),l=e.pointers.svgShapes.getSvgShapePointer(u),p=e.pointers.getInnerPointer(l,"boxBoundaries"),d=e.dal.get(p),g=o.isEmpty(d)?0:d.width/d.height;return g&&(g>1?s=(c=a+1)*g:c=(s=a+1)/g),{minWidth:Math.ceil(s),minHeight:Math.ceil(c),maxHeight:2e3}}})},function(e,t,n){var o;e.exports=(o=n(0),{canBeFixedPosition:!0,layoutLimits:{minWidth:40,minHeight:40},containable:!1,modal:function(e,t){var n=e.pointers.general.getRenderFlag("componentPreviewStates"),r=e.dal.get(n,{});return"open"===o.get(r,t.id)},styleCanBeApplied:function(e){var t=e.pointers.general.getIsStudioUser();return e.dal.get(t)},mobileOnly:!0})},function(e,t){e.exports={mobileOnly:!0}},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(158),o.defaults({mobileOnly:!0,hiddenable:!1,moveDirections:[]},r))},function(e,t,n){var o;e.exports={mobileConversionConfig:{category:"graphic",isSuitableForProportionGrouping:!0,keepIfVerticalDivider:!0},rotatable:!0,styleCanBeApplied:!0,resizableSides:[(o=n(2)).RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM],widthAuto:!0}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={resizableSides:[]}},function(e,t,n){var o,r;e.exports=(o=n(14),r=n(2),{isRepeatable:!1,resizableSides:function(e){return"MOBILE"===o.getViewMode(e)?[]:[r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT]},layoutLimits:function(e){return"MOBILE"===o.getViewMode(e)?{}:{minWidth:400}},mobileConversionConfig:{stretchHorizontally:!0}})},function(e,t,n){var o;e.exports={resizableSides:[(o=n(2)).RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:500}}},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(3),i=n(2),a=n(52),s={defaultMobileProperties:{layout:"vertical"},layoutLimits:function(e,t){var n=r.getDataItem(e,t).options.length;return{minWidth:"vertical"===r.getPropertiesItem(e,t).layout?60:60*n}},resizableSides:[i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.RIGHT]},o.merge(s,a))},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(3),i=n(2),a=n(52),s={defaultMobileProperties:{layout:"vertical"},layoutLimits:function(e,t){var n=r.getDataItem(e,t).options.length;return{minWidth:"vertical"===r.getPropertiesItem(e,t).layout?60:60*n}},resizableSides:[i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.RIGHT]},o.assign(s,a))},function(e,t){e.exports={isRepeatable:!1,resizableSides:[],defaultMobileProperties:{size:"standard"}}},function(e,t,n){var o,r,i;e.exports=(o=n(9),r=n(2),i=n(323),{rotatable:!0,styleCanBeApplied:!0,resizableSides:function(e,t){var n=e.dal.get(t),i=e.pointers.components.getPageOfComponent(t);return o.isMaintainWPhotoAspectRatio(e,n,i.id)?[]:[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.BOTTOM,r.RESIZE_SIDES.RIGHT]},layoutLimits:function(e,t){var n=e.dal.get(t),r=e.pointers.components.getPageOfComponent(t);return{aspectRatio:o.isMaintainWPhotoAspectRatio(e,n,r.id)?i.getStageAspectRatio(e,t):null}},mobileConversionConfig:{isSuitableForProportionGrouping:!0,category:"photo",preserveAspectRatio:function(e,t,n){return o.isMaintainWPhotoAspectRatio(e,t,n)}}})},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(2),i=n(15),{getImageAspectRatio:function(e,t){var n=e.dal.get(t),a=e.pointers.components.getPageOfComponent(t),s=e.pointers.data.getDataItem(i.stripHashIfExists(n.dataQuery),a.id),c=e.dal.get(s),u={};if(t.type===r.VIEW_MODES.MOBILE){var l=e.pointers.data.getPropertyItem(i.stripHashIfExists(n.propertyQuery),a.id);u=e.dal.get(l)}return function(e,t){var n=e.width/e.height;return!o.isEmpty(e.crop)&&o.isEmpty(t.overrideCrop)?n=e.crop.width/e.crop.height:o.isEmpty(o.get(t,"overrideCrop"))||(n=t.overrideCrop.width/t.overrideCrop.height),n}(c,u)},getStageAspectRatio:function(e,t){var n=e.dal.get(t).layout;return n.width/n.height}})},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[],mobileConversionConfig:{preserveAspectRatio:!1}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),o=n(160);function r(e,t,n){var o=e.dataQuery.replace("#",""),r=t.pointers.data.getDataItem(o,n);return t.dal.get(r)}return{isRepeatable:!1,crossSiteDuplicatable:!1,mobileConversionConfig:{hideByDefault:function(t,n,i){var a=r(n,t,i),s=o.getWidgetData(t,a);return e.isEmpty(s.mobileUrl)},minHeight:function(t,n,i){var a=r(n,t,i),s=o.getWidgetData(t,a);return e.get(s,"componentFields.minHeightInMobile")},stretchHorizontally:function(t,n,i){var a=r(n,t,i),s=o.getWidgetData(t,a);return!0===e.get(s,"shouldBeStretchedByDefaultMobile")}},canBeStretched:function(n,r){var i=t.getDataItem(n,r),a=o.getWidgetData(n,i);return!0===e.get(a,"canBeStretched")},nickname:function(e,t){return o.nickname(e,t)}}}()},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(33),i=n(160),a=r.common.metaData.PERMITTED_GLUED_TPAS_IN_MOBILE,{isRepeatable:!1,resizableSides:[],moveDirections:[],containable:!1,fullWidth:!1,crossSiteDuplicatable:!1,mobileConversionConfig:{structuralItem:!0,convertFixedPositionToAbsolute:!0,nonLayoutComponent:!0,desktopOnly:function(e,t,n){var r=t.dataQuery,i=e.pointers.data.getDataItem(function(e){return o.isString(e)&&"#"===e[0]?e.slice(1):e}(r),n),s=e.dal.get(i);return!function(e,t){if(t){var n=e.pointers.general.getClientSpecMap(),r=e.dal.get(n)[t]||{};return o.includes(a,r.appDefinitionId)}return!1}(e,o.get(s,"applicationId"))},minHeight:function(e,t,n){var r=function(e,t,n){var o=e.dataQuery.replace("#",""),r=t.pointers.data.getDataItem(o,n);return t.dal.get(r)}(t,e,n),a=i.getWidgetData(e,r);return o.get(a,"componentFields.minHeightInMobile")}},nickname:function(e,t){return i.nickname(e,t)}})},function(e,t){e.exports={resizableSides:[],moveDirections:[],fullWidth:!0,containable:!1,duplicatable:!1,crossSiteDuplicatable:!1,removable:!1,mobileConversionConfig:{marginX:20}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),o=n(3),r=n(162),i=n(9),a=n(115),s=n(89),c=n(1).blogAppPartNames;function u(e,t){return e.pointers.components.isMasterPage(t)||e.pointers.components.isInMasterPage(t)}function l(t,n,i){var a=o.getDataItem(t,n),s=r.getPackageName(t,a.appInnerID);return"blog"===s&&e.includes(i,r.getAppPartRole(t,s,a.appPartName))}return{layoutLimits:function(e,n){return o.getDataItem(e,n).appPartName===c.HERO_IMAGE?{minHeight:t.HERO_IMAGE.MIN_HEIGHT}:{}},resizableSides:function(e,n){var i=[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT],s=o.getDataItem(e,n),c=r.getPackageName(e,s.appInnerID),u=r.getAppPartDefinition(e,c,s.appPartName);return a.descriptorUtils.doesAllowHeightResize(u,s.viewName)&&(i=i.concat([t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.BOTTOM])),i},containable:function(e,t,n){return n&&!(function(e,t,n){return u(e,t)!==u(e,n)}(e,t,n)&&function(e,t){return l(e,t,["BLOG_FEED","SINGLE_POST","RELATED_POSTS"])}(e,t))},containableByStructure:function(e,t,n){var o=!i.notContainableByPopup.apply(i,arguments),r=e.pointers.components.getPageOfComponent(n),a=s.isSinglePost(e,r.id);if("ea63bc0f-c09f-470c-ac9e-2a408b499f22"===t.data.appPartName){var u=t.data,l=u.type,p=u.appPartName;return a&&!e.pointers.data.getDataItemWithPredicate({type:l,appPartName:p},r.id)}var d=t.data.appPartName===c.RELATED_POSTS;return!(o||d&&!a)},canBeStretched:function(e,t){return l(e,t,["POST_GALLERY","BLOG_FEED","CUSTOM_FEED"].concat(["RELATED_POSTS"]))},mobileConversionConfig:{fixedSize:function(t,n,r){var i=o.getDataItemById(t,n.dataQuery.replace("#",""),r),a=e.get(i,"appPartName");return a===c.POSTS_GALLERY||a===c.RELATED_POSTS?{height:n.layout.height}:{}}}}}()},function(e,t,n){e.exports=function(){var e=n(2),t=n(3),o=n(163),r=n(14),i=n(9);function a(e,n){return!r.isMobileView(e)&&o.wasPartLoadedSuccessfully(e,function(e,n){var o=t.getDataItem(e,n);if(!o)throw new Error("Can't find data for component id ".concat(n.id));return o.appPartName}(e,n))}return{isRepeatable:!1,resizableSides:[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT],removable:!0,duplicatable:a,crossSiteDuplicatable:a,containableByStructure:i.notContainableByPopup,usingLegacyAppPartSchema:!0}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(9),o=n(2),r=n(27),i=["mobile.core.components.Page","core.components.Page","wixapps.integration.components.AppPage"];function a(n,o,a){if(a){var s=t.getComponentType(n,a),c=n.pointers.components.getPageOfComponent(a);return e.includes(i,s)&&!r.isPopup(n,c.id)}return!1}return{resizableSides:[],moveDirections:[o.MOVE_DIRECTIONS.VERTICAL],containable:a,containableByStructure:a,fullWidth:!0,fullWidthByStructure:!0,collapsible:!1,mobileConversionConfig:{isInvisible:!0}}}()},function(e,t,n){var o;e.exports={isRepeatable:!1,canBeStretched:!0,defaultMobileProperties:function(e,t,n){return{numCols:2,margin:n.margin<=3?n.margin:15,textMode:{titleAndDescription:"titleOnly",descriptionOnly:"noText"}[n.textMode]||n.textMode}},resizableSides:[(o=n(2)).RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT]}},function(e,t,n){var o,r;e.exports=(o=n(3),r=n(2),{isRepeatable:!1,resizableSides:function(e,t){var n=o.getPropertiesItem(e,t),i=[r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT];return"horizontal"===n.orientation?i.concat([r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.BOTTOM]):i}})},function(e,t,n){var o,r;e.exports=(o=n(2),r=n(9),{mobileConversionConfig:{isScreenWidth:!0},moveDirections:[o.MOVE_DIRECTIONS.VERTICAL],resizableSides:[o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,canBeFixedPosition:!1,containableByStructure:r.containableByFullWidthPopup})},function(e,t,n){var o,r;e.exports=(o=n(2),r=n(9),{isRepeatable:!1,mobileConversionConfig:{isScreenWidth:!0},moveDirections:[o.MOVE_DIRECTIONS.VERTICAL],resizableSides:[o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,canBeFixedPosition:!1,containableByStructure:r.containableByFullWidthPopup})},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),o=n(3),r=n(15);function i(e,t){return!!o.getPropertiesItem(e,t).fitToScreenWidth}return{isRepeatable:!1,mobileConversionConfig:{isScreenWidth:function(t,n,o){var i=t.dal.get(t.pointers.data.getPropertyItem(r.stripHashIfExists(n.propertyQuery),o));return e.get(i,"fitToScreenWidth",!1)}},moveDirections:function(e,n){return o=i(e,n),r=[t.MOVE_DIRECTIONS.VERTICAL],o||r.push(t.MOVE_DIRECTIONS.HORIZONTAL),r;var o,r},resizableSides:function(e,n){return i(e,n)?[]:[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT]},fullWidth:i,fullWidthByStructure:function(e,t){return!!t.props.fitToScreenWidth}}}()},function(e,t,n){var o;e.exports={isRepeatable:!1,resizableSides:[(o=n(2)).RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT]}},function(e,t,n){var o,r;e.exports=(o=n(3),r={DEFAULT:{minWidth:10,minHeight:10},VIMEO:{minWidth:100,minHeight:100},YOUTUBE:{minWidth:200,minHeight:200},DAILYMOTION:{minWidth:100,minHeight:100},FACEBOOK:{minWidth:100,minHeight:100}},{isRepeatable:!1,styleCanBeApplied:!0,layoutLimits:function(e,t){var n=o.getDataItem(e,t);return r[n.videoType]||r.DEFAULT},defaultMobileProperties:{autoplay:!1}})},function(e,t){e.exports={canBeStretched:!0,styleCanBeApplied:!0,layoutLimits:{minWidth:45,minHeight:70},defaultMobileProperties:function(e,t,n){return{margin:Math.min(20,n.margin),numCols:n.numCols>=2?2:1}},mobileConversionConfig:{preserveAspectRatio:!1}}},function(e,t,n){var o,r;e.exports=(o=n(1),r=n(0),{rotatable:!0,layoutLimits:function(e,t){var n=e.siteAPI.getSiteMeasureMap();return{minWidth:r.get(n,["minWidth",t.id],o.siteConstants.COMP_SIZE.MIN_WIDTH)}}})},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={isRepeatable:!1,layoutLimits:{minWidth:250,minHeight:50}}},function(e,t,n){var o;e.exports=(o=n(2),{layoutLimits:{minWidth:10},rotatable:!0,isProportionallyResizable:!0,resizableSides:function(e,t){return function(e,t){var n=e.pointers.getInnerPointer(t,"layout");return!!e.dal.get(n).rotationInDegrees}(e,t)?[o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT]:[o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT,o.RESIZE_SIDES.BOTTOM]},defaultMobileProperties:{packed:!1,minHeight:null},mobileConversionConfig:{isSuitableForProportionGrouping:!0,category:"text",preserveAspectRatio:!1,shouldEnlargeToFitWidth:!0},heightAuto:!0})},function(e,t,n){var o;e.exports=(o=n(0),{isRepeatable:!1,styleCanBeApplied:!0,mobileConversionConfig:{isScreenWidth:!0,desktopOnly:function(e,t,n){var r=t.dataQuery,i=e.pointers.data.getDataItem(function(e){return o.isString(e)&&"#"===e[0]?e.slice(1):e}(r),n);return"#CUSTOM_MAIN_MENU"===(e.dal.get(i)||{menuRef:"#CUSTOM_MAIN_MENU"}).menuRef},fixedSize:{height:48}}})},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(3),{isRepeatable:!1,layoutLimits:function(e,t){return{minHeight:25*function(e,t){var n=r.getDataItem(e,t),i=o.isString(n.menuRef)?n.menuRef.replace("#",""):n.menuRef.id,a=r.getDataItemById(e,i).items;return o.filter(a,"isVisible").length}(e,t),minWidth:100}}})},function(e,t){e.exports={isRepeatable:!1,canBeStretched:!0,styleCanBeApplied:!0,mobileConversionConfig:{desktopOnly:!0}}},function(e,t){e.exports={canBeStretched:!0,styleCanBeApplied:!0,mobileConversionConfig:{preserveAspectRatio:!1}}},function(e,t){e.exports={canBeStretched:!0,styleCanBeApplied:!0,defaultMobileProperties:function(e,t,n){return{margin:Math.min(20,n.margin),numCols:Math.min(2,n.numCols)}},mobileConversionConfig:{preserveAspectRatio:!1}}},function(e,t){e.exports={styleCanBeApplied:!0,mobileConversionConfig:{category:"boxContainer",minHeight:50,isSuitableForProportionGrouping:!0,filterChildrenWhenHidden:!0},heightAuto:!0}},function(e,t,n){var o,r,i;e.exports=(o=n(2),r=n(15),i={mobileConversionConfig:{createMobilePresets:!1},hiddenable:!1,styleCanBeApplied:!1,moveDirections:[],canBeFixedPosition:!1,duplicatable:!1,groupable:!1,removable:!0,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,layoutLimits:{minWidth:50,minHeight:50},resizableSides:function(e,t){var n=o.RESIZE_SIDES,i=n.LEFT,a=n.RIGHT,s=n.BOTTOM,c=n.TOP,u=e.dal.get(t),l=e.pointers.components.getPageOfComponent(t),p=l&&l.id,d=e.pointers.data.getPropertyItem(r.stripHashIfExists(u.propertyQuery),p),g=e.dal.get(d),f={left:{top:[s,a],center:[s,a],bottom:[c,a]},center:{top:[s,a,i],center:[c,s,a,i],bottom:[c,a,i]},right:{top:[s,i],center:[s,i],bottom:[c,i]}},m={left:[a],center:[a,i],right:[i]},v={top:[s],center:[c,s],bottom:[c]};return{nineGrid:function(){return f[g.horizontalAlignment][g.verticalAlignment]},fullHeight:function(){return m[g.horizontalAlignment]},fullWidth:function(){return v[g.verticalAlignment]}}[g.alignmentType]()},defaultMobileProperties:function(e,t,n){return{horizontalAlignment:"nineGrid"===n.alignmentType?"center":n.horizontalAlignment,horizontalOffset:0,verticalOffset:0}}},n(5).isOpen("sv_movePopup")&&delete i.moveDirections,i)},function(e,t){e.exports={styleCanBeApplied:!0}},function(e,t){e.exports={mobileConversionConfig:{category:"graphic",isSuitableForProportionGrouping:!0},rotatable:!0}},function(e,t,n){e.exports=function(){var e=n(9),t="wysiwyg.viewer.components.BoxSlideShow";function o(t,n,o,r){if(r){var i=t?r.componentType:e.getComponentType(n,r);return e.isComponentSuitableForNonRenderingState(i)}return!1}return{mobileConversionConfig:{nestOverlayingSiblings:!1,stackLayout:!0,structuralItem:!0},enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,containable:function(n,o,r){return e.getComponentType(n,r)===t},canContain:o.bind(null,!1),canContainByStructure:o.bind(null,!0)}}()},function(e,t){e.exports={isRepeatable:!1,minimalChildrenNumber:1,shouldKeepChildrenInPlace:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,defaultMobileProperties:{flexibleBoxHeight:!1,shouldHideOverflowContent:!0,navigationButtonMargin:22,navigationButtonSize:15,navigationDotsGap:15,navigationDotsMargin:24,navigationDotsSize:6},mobileConversionConfig:{structuralContainer:!0,nestOverlayingSiblings:!1,filterChildrenWhenHidden:!0,marginX:0}}},function(e,t,n){var o,r;e.exports=(o=n(9),r="wysiwyg.viewer.components.StateBox",{mobileConversionConfig:{nestOverlayingSiblings:!1,stackLayout:!0,structuralItem:!0},enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,containable:function(e,t,n){return o.getComponentType(e,n)===r}})},function(e,t,n){var o,r;e.exports=(o=n(9),r="wysiwyg.viewer.components.StateBox",{mobileConversionConfig:{nestOverlayingSiblings:!1,stackLayout:!0,structuralItem:!0},enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,containable:function(e,t,n){return o.getComponentType(e,n)===r}})},function(e,t){e.exports={minimalChildrenNumber:1,isRepeatable:!1,shouldKeepChildrenInPlace:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,mobileConversionConfig:{structuralContainer:!0,isTightContainer:!0,nestOverlayingSiblings:!1,filterChildrenWhenHidden:!0,marginX:0}}},function(e,t,n){e.exports=function(){var e=n(2),t=n(9),o="wysiwyg.viewer.components.StateStrip";function r(e,n,o,r){if(r){var i=e?r.componentType:t.getComponentType(n,r);return t.isComponentSuitableForNonRenderingState(i)}return!1}return{enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,moveDirections:[e.MOVE_DIRECTIONS.VERTICAL],resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,canContain:r.bind(null,!1),canContainByStructure:r.bind(null,!0),containable:function(e,n,r){return t.getComponentType(e,r)===o},mobileConversionConfig:{nestOverlayingSiblings:!1,structuralItem:!0,stackLayout:!0,isScreenWidth:!0,filterChildrenWhenHidden:!0,preserveAspectRatio:!1}}}()},function(e,t,n){var o,r;e.exports=(o=n(2),r=n(9),{isRepeatable:!1,isTightContainer:!0,minimalChildrenNumber:1,shouldKeepChildrenInPlace:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,moveDirections:[o.MOVE_DIRECTIONS.VERTICAL],resizableSides:[o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,containableByStructure:r.containableByFullWidthPopup,mobileConversionConfig:{structuralContainer:!0,nestOverlayingSiblings:!1,isScreenWidth:!0,filterChildrenWhenHidden:!0,marginX:0,preserveAspectRatio:!1}})},function(e,t,n){e.exports=function(){var e=n(2),t=n(9),o="wysiwyg.viewer.components.StripContainerSlideShow";function r(e,n,o,r){if(r){var i=e?r.componentType:t.getComponentType(n,r);return t.isComponentSuitableForNonRenderingState(i)}return!1}return{enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,moveDirections:[e.MOVE_DIRECTIONS.VERTICAL],resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,canContain:r.bind(null,!1),canContainByStructure:r.bind(null,!0),containable:function(e,n,r){return t.getComponentType(e,r)===o},mobileConversionConfig:{nestOverlayingSiblings:!1,structuralItem:!0,stackLayout:!0,isScreenWidth:!0,filterChildrenWhenHidden:!0,preserveAspectRatio:!1}}}()},function(e,t){e.exports={mobileOnly:!0,anchors:{to:!1,from:!1},moveDirections:[],resizableSides:[],dockable:!1,alignable:!1,groupable:!1,canContainByStructure:!0,hiddenable:!1}},function(e,t){e.exports={mobileOnly:!0,anchors:{to:!1,from:!1},moveDirections:[],resizableSides:[],dockable:!1,alignable:!1,groupable:!1,containableByStructure:!0,hiddenable:!1}},function(e,t,n){var o,r;e.exports=(o=n(2),r=n(9),{isRepeatable:!1,minimalChildrenNumber:1,shouldKeepChildrenInPlace:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,moveDirections:[o.MOVE_DIRECTIONS.VERTICAL],resizableSides:[o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,containableByStructure:r.containableByFullWidthPopup,defaultMobileProperties:{flexibleBoxHeight:!1,shouldHideOverflowContent:!0,navigationButtonMargin:22,navigationButtonSize:15,navigationDotsGap:15,navigationDotsMargin:24,navigationDotsSize:6},mobileConversionConfig:{structuralContainer:!0,nestOverlayingSiblings:!1,isScreenWidth:!0,filterChildrenWhenHidden:!0,marginX:0,preserveAspectRatio:!1}})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(2),r=n(9),i=n(27),a=n(3),s=["wysiwyg.viewer.components.PopupContainer"],{minimalChildrenNumber:1,canContain:function(e,t,n){return"wysiwyg.viewer.components.Column"===r.getComponentType(e,n)},canContainByStructure:function(e,t,n){return"wysiwyg.viewer.components.Column"===n.componentType},containable:function(e,t,n){if(!n)return!1;var o=r.getComponentType(e,n),a=e.siteAPI.getFocusedRootId(),c=i.isPopup(e,a),u=s.includes(o);return c?u:r.isHeaderOrFooterOrPageOrMasterPage(o)},containableByStructure:r.containableByFullWidthPopup,moveDirections:[o.MOVE_DIRECTIONS.VERTICAL],resizableSides:function(e,t){var n=1===e.pointers.components.getChildren(t).length;return e.pointers.components.isMobile(t)&&!n?[]:[o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM]},fullWidth:function(e,t){return a.getPropertiesItem(e,t).fullWidth},fullWidthByStructure:function(e,t){return t.props.fullWidth},canBeFixedPosition:!1,mobileConversionConfig:{nestOverlayingSiblings:!1,hideWhenEmptyBackgroundContainer:!0,filterChildrenWhenHidden:!0,isScreenWidth:!0,marginX:0,category:"columns"}})},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(52),o.assign({},r))},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(52),o.assign({},r))},function(e,t,n){e.exports=n(52)},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(0),r=n(3),i=n(2),a=n(52),s=function(e,t){return!!r.getDataItem(e,t).label},c={mobileConversionConfig:{category:"graphic",inlineWhenGrouped:!0},resizableSides:function(e,t){return s(e,t)?[i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.RIGHT]:[]},layoutLimits:function(e,t){var n={minWidth:60};return s(e,t)||o.assign(n,{minWidth:12,minHeight:12,aspectRatio:1}),n}},o.assign({},a,c))},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(1),i=n(52),a={layoutLimits:function(e,t){var n=e.siteAPI.getSiteMeasureMap()||{},i=t.id;return{minWidth:o.get(n,["minWidth",i],r.siteConstants.COMP_SIZE.MIN_WIDTH),minHeight:o.get(n,["minHeight",i],r.siteConstants.COMP_SIZE.MIN_HEIGHT)}}},o.merge(a,i))},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(2),i=n(3),{duplicatable:function(e,t,n){if(e.siteAPI.isMobileView())return!1;var o=e.pointers.isSamePointer(e.pointers.components.getParent(t),n),r=n&&e.pointers.components.getChildren(n).length;return o&&r<5},groupable:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!0,anchors:{to:{allow:!0,lock:r.ANCHORS.LOCK_CONDITION.NEVER},from:{allow:!1,lock:r.ANCHORS.LOCK_CONDITION.ALWAYS}},isContainCheckRecursive:!1,mobileConversionConfig:{structuralItem:!0,filterChildrenWhenHidden:!0,stretchHorizontally:!0,minHeight:200,category:"column",preserveAspectRatio:!1,hideWhenEmptyBackgroundContainer:!0,fixedSize:function(e,t,n){var r=t.designQuery&&i.getDesignItemById(e,t.designQuery.replace("#",""),n),a=o.get(r,["background","mediaRef"]);return(a=a&&(a.posterImageRef||a)||{}).height&&a.width?{width:320,height:320*a.height/a.width}:null}}})},function(e,t,n){var o,r,i,a,s,c,u,l;e.exports=(o=n(0),r=n(9),i=n(2),a=n(3),s=["wysiwyg.viewer.components.MediaControls","wysiwyg.viewer.components.MediaOverlayControls"],c=i.MEDIA_PLAYER_MOBILE_LAYOUT_LIMITS.minHeight,u=i.MEDIA_PLAYER_MOBILE_LAYOUT_LIMITS.maxWidth-40,l=function(e){return Math.round(Math.min(c,u/e))},{isRepeatable:!1,rotatable:!1,canContain:function(e,t,n){var i=r.getComponentType(e,n);return o.includes(s,i)},canContainByStructure:function(e,t,n){var r=n.componentType;return o.includes(s,r)},enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,enforceMaxDimensionsOnProportionalResize:!0,preserveAspectRatio:!0,ignoreChildrenOnProportionalResize:["wysiwyg.viewer.components.MediaControls"],resizableSides:function(e,t){var n=a.getDesignItem(e,t);return r.isMaintainVideoBoxAspectRatio(n)?[]:[i.RESIZE_SIDES.TOP,i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.BOTTOM,i.RESIZE_SIDES.RIGHT]},layoutLimits:function(e,t){var n=a.getDesignItem(e,t),s=r.getVideoBoxAspectRatio(n),c=r.isMaintainVideoBoxAspectRatio(n)?{aspectRatio:s}:{};return e.pointers.components.isMobile(t)?o.assign(c,i.MEDIA_PLAYER_MOBILE_LAYOUT_LIMITS,{minHeight:l(s)}):o.assign(c,i.MEDIA_PLAYER_LAYOUT_LIMITS)},mobileConversionConfig:{filterChildrenWhenHidden:!0,fixedSize:function(e,t,n){var o=a.getDesignItemById(e,t.designQuery.replace("#",""),n),i=r.getVideoBoxAspectRatio(o),s=r.isMaintainVideoBoxAspectRatio(o),c=u;return{width:c,height:s?Math.round(c/i):Math.max(t.layout.height*(c/t.layout.width),l(i))}}}})},function(e,t){e.exports={anchors:{to:!1,from:!1},dockable:!1,alignable:!1,removable:!1,groupable:!1,duplicatable:!1,canBeFixedPosition:!1,mobileConversionConfig:{minHeight:44}}},function(e,t){e.exports={anchors:{to:!1,from:!1},resizableSides:[],dockable:!1,alignable:!1,removable:!1,groupable:!1,duplicatable:!1,canBeFixedPosition:!1,enforceMaxDimensionsOnProportionalResize:!0,layoutLimits:function(){return{minWidth:50,minHeight:50,aspectRatio:1}},mobileConversionConfig:{preserveAspectRatio:!0,fixedSize:function(e,t){var n=e.pointers.components.getParent({id:t.id,type:"DESKTOP"}),o=e.dal.get(e.pointers.getInnerPointer(n,"layout")),r=t.layout.width*t.layout.height/(o.width*o.height),i=Math.max(o.height*(280/o.width),120),a=Math.max(Math.sqrt(280*r*i),50);return{width:a,height:a}}}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(9),r=n(43),i=n(3),a=["core.components.Page","mobile.core.components.Page","wixapps.integration.components.AppPage"];function s(t,n,r){var i=o.getComponentType(t,n);return r&&o.isHeaderOrFooterOrPageOrMasterPage(i)||e.includes(a,i)||o.isPopupPageOrPopupContainer(t,n)}function c(t,n,o,i){var a=r.getControllerStageData(t,n,o.controllerType,o.applicationId);return e.get(a,i)}return{containable:function(e,t,n){var o=i.getDataItem(e,t);return s(e,n,!1!==c(e,t.id,o,"enableShowOnAllPages")&&!1!==c(e,t.id,o,"toggleShowOnAllPagesEnabled"))},containableByStructure:function(e,t,n){return s(e,n,!0)},container:!1,canContain:!1,canContainByStructure:!1,resizableSides:[],alignable:!1,hiddenable:!1,collapsible:!1,fullWidth:!1,fullWidthByStructure:!1,canBeFixedPosition:!1,groupable:!1,mobileConversionConfig:{nonLayoutComponent:!0},removable:function(e,t){var n=i.getDataItem(e,t);return!1!==c(e,t.id,n,"removable")},duplicatable:function(e,t){var n=i.getDataItem(e,t);return!1!==c(e,t.id,n,"duplicatable")},crossSiteDuplicatable:!1,nickname:o.getControllerNickname,isVisible:function(e,n){var o=i.getDataItem(e,n),a=o.applicationId,s=o.controllerType,c=e.pointers.platform.getAppManifestPointer(o.applicationId),u=!!e.dal.get(c),l=r.getControllerStageData(e,n.id,s,a),p=e.pointers.general.getRenderFlag("showControllers"),d=e.dal.get(p);return t.appManifest.controllerStageData.isControllerVisible(l,u,d)}}}()},function(e,t){e.exports={containableByStructure:!1}},function(e,t,n){e.exports=function(){var e=n(0),t=(n(2),n(9));function o(e){return!t.isContainer(e)&&t.isComponentSuitableForNonRenderingState(e)}return{isRepeatable:!1,canContainByStructure:function(n,r,i){return function(n){if(!n.components)return o(n.componentType);var r=t.getChildrenTypesDeep([n]);return e.every(r,o)}(i)},canContain:function(n,r,i){return function(n,r){var i=n.pointers.components.getChildrenRecursively(r);return e.every(i.concat(r),(function(e){return o(t.getComponentType(n,e))}))}(n,i)},mobileConversionConfig:{nestOverlayingSiblings:!1,createMobilePresets:!1,filterChildrenWhenHidden:!0}}}()},function(e,t,n){e.exports=function(){var e=n(0);function t(t,n,o,r){return!(r.id===n.id&&function(t,n){var o=t.pointers.full.components.getChildren(n);return e.size(o)>0}(t,n))}return{isRepeatable:!1,defaultMobileProperties:{closeMethod:"outerClick"},canContain:t,canContainByStructure:t}}()},function(e,t,n){var o,r;e.exports=(o=n(0),{enforceContainerChildLimitsByWidth:!1,layoutLimits:function(e,t){var n=o.head(e.pointers.full.components.getChildren(t)),r=e.dal.full.get(e.pointers.getInnerPointer(n,["layout"]));return{minWidth:o.get(r,"width")}},canBeStretched:!0,isRepeater:!0,isRepeatable:!1,resizableSides:[(r=n(2)).RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT],mobileConversionConfig:{filterChildrenWhenHidden:!0,stretchHorizontally:!0}})},function(e,t,n){var o,r;e.exports=(o=n(2),r=n(9),{mobileConversionConfig:{stretchHorizontally:function(e,t,n){var i=e.pointers.components.getPage(n,o.VIEW_MODES.DESKTOP),a=e.pointers.full.components.getComponent(t.id,i),s=e.pointers.full.components.getParent(a);return"wysiwyg.viewer.components.Repeater"===(s?r.getComponentType(e,s):null)}}})},function(e,t,n){var o,r,i;e.exports=(o=n(2),r=n(15),i=Object.freeze({MANUAL:"manual",AUTO:"auto"}),{defaultMobileProperties:{columnLayout:"manual"},mobileConversionConfig:{fixedSize:function(e,t){return{height:t.layout.height}}},resizableSides:function(e,t){var n=[o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT],a=e.dal.get(t),s=e.pointers.components.getPageOfComponent(t),c=s&&s.id,u=e.pointers.data.getPropertyItem(r.stripHashIfExists(a.propertyQuery),c);return e.dal.get(u).heightLayout!==i.AUTO&&n.push(o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM),n}})},function(e,t,n){var o;e.exports=(o=n(2),{mobileConversionConfig:{hideByDefault:function(e){var t=e.pointers.components.getMasterPage(o.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(o.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,t);return!e.dal.isExist(n)},fixedSize:{width:40,height:26}},defaultMobileProperties:{itemFormat:"iconOnly"}})},function(e,t){e.exports={mobileConversionConfig:{category:"boxContainer",minHeight:50,isSuitableForProportionGrouping:!0,filterChildrenWhenHidden:!0}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(43),o=n(9),r=n(14),i=["wysiwyg.viewer.components.HoverBox","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.Repeater","wysiwyg.viewer.components.StripContainer","wysiwyg.viewer.components.StripColumnsContainer"];function a(n,o,r){return e.get(t.getControllerStageDataByControllerRef(n,r),["behavior",o])}return{groupable:!1,minimalChildrenNumber:1,maximumChildrenNumber:1,forceMaintainIDsOnSerialize:!0,container:!0,isRepeatable:!1,canContainByStructure:function(t,n,r,a){return!t.pointers.isSamePointer(n,a)||!e.includes(i,r.componentType)||!function(t){if(!t.components)return o.isComponentSuitableForNonRenderingState(t.componentType);var n=o.getChildrenTypesDeep([t]);return e.every(n,o.isComponentSuitableForNonRenderingState)}(t)},canContain:function(t,n,r){return function(t,n){var r=t.pointers.components.getChildrenRecursively(n);return e.every(r.concat(n),(function(e){var n=o.getComponentType(t,e);return o.isComponentSuitableForNonRenderingState(n)}))}(t,r)},canBeFixedPosition:function(e,t){return!1!==a(e,"pinnable",t)},containable:function(e,t,n){return!function(e,t,n){return e.pointers.components.isInMasterPage(t)&&!e.pointers.components.isInMasterPage(n)||!e.pointers.components.isInMasterPage(t)&&e.pointers.components.isInMasterPage(n)}(e,t,n)||!r.isMobileView(e)&&!1!==a(e,"toggleShowOnAllPagesEnabled",t)},duplicatable:function(e,t){return!1!==a(e,"duplicatable",t)},crossSiteDuplicatable:!1,nickname:o.getControllerNickname,mobileConversionConfig:{category:"appWidget",isTightContainer:!0,marginX:0,filterChildrenWhenHidden:!0}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(2),i=n(164),o.defaultsDeep({containable:function(e,t,n){var o=e.pointers.components.getMasterPage(r.VIEW_MODES.MOBILE),i=e.pointers.components.getComponent(r.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,o);return n&&!e.pointers.isSamePointer(n,i)&&e.pointers.components.isInMasterPage(n)},styleCanBeApplied:!0},i))},function(e,t){e.exports={removable:!1,hiddenable:!1,mobileConversionConfig:{isDockingAllowed:!0,isFixedPositionAllowed:!0,isAllowedToBeChildOfMasterPage:!0,isNonContainableFullWidth:!0}}},function(e,t){e.exports={styleCanBeApplied:!0,heightAuto:!0}},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(389),i=["disableable","rotatable","moveDirections","resizableSides","canBeFixedPosition","layoutLimits","mobileConversionConfig","defaultMobileProperties","isRepeatable","styleCanBeApplied","canBeStretched"],a={isExternal:!0},s={isRepeatable:!1},o.mapValues(r.default,(function(e){return o(e).pick(i).defaults(s).assign(a).value()})))},function(e,t){e.exports=C},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(391),i=n(392),o.merge(r,i))},function(e,t){e.exports=D},function(e,t){e.exports=w},function(e){e.exports=JSON.parse('[{"paletteName":"Lets Hear It For The Boys","paletteTags":["Super Load Movers"],"color_1":"#000000","color_2":"#FFFFFF","color_11":"#F0F0F0","color_12":"#C0C0C0","color_13":"#909090","color_14":"#606060","color_15":"#303030","color_16":"#B2BDE6","color_17":"#8896CD","color_18":"#3A54B4","color_19":"#273878","color_20":"#131C3C","color_21":"#FFF2D4","color_22":"#FEE6AA","color_23":"#BFAD7F","color_24":"#7F7355","color_25":"#40392A","color_26":"#FFC5BD","color_27":"#FF8B7B","color_28":"#BF685C","color_29":"#80463E","color_30":"#40231F","color_31":"#A8D5DE","color_32":"#78B2BE","color_33":"#2A8A9D","color_34":"#1C5C69","color_35":"#0E2E34"},{"paletteName":"I See Red","paletteTags":["Electronic Shop"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#D4D4D4","color_13":"#909090","color_14":"#606060","color_15":"#303030","color_16":"#D0DACC","color_17":"#A9B6A4","color_18":"#7D9174","color_19":"#53614D","color_20":"#2A3027","color_21":"#DCD4C8","color_22":"#B9AB98","color_23":"#8B8072","color_24":"#5D564C","color_25":"#2E2B26","color_26":"#DBCECF","color_27":"#B7A7A7","color_28":"#93797A","color_29":"#625151","color_30":"#312829","color_31":"#C4D0D5","color_32":"#99A6AB","color_33":"#6D7B81","color_34":"#3C4F57","color_35":"#1E282C"},{"paletteName":"Im a Bumble Bee","paletteTags":["the bakery"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#D4D4D4","color_13":"#909090","color_14":"#606060","color_15":"#000000","color_16":"#A0C2E8","color_17":"#709DD1","color_18":"#0D5EBA","color_19":"#093F7C","color_20":"#041F3E","color_21":"#F6CCB0","color_22":"#EEB188","color_23":"#E57022","color_24":"#994B17","color_25":"#4C250B","color_26":"#F1EEA7","color_27":"#E4DE7B","color_28":"#D6CC11","color_29":"#8F880B","color_30":"#474406","color_31":"#B2E0BB","color_32":"#86C091","color_33":"#3FA152","color_34":"#2A6B37","color_35":"#15361B"},{"paletteName":"Licorice Allsorts In Blue","paletteTags":["Real Estate"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#231111","color_12":"#452222","color_13":"#745656","color_14":"#B89C9C","color_15":"#E8DFDF","color_16":"#321F1F","color_17":"#653F3F","color_18":"#C97D7D","color_19":"#E0A2A2","color_20":"#E4B9B9","color_21":"#081F4E","color_22":"#0F3E9B","color_23":"#637EB4","color_24":"#8FA4CD","color_25":"#B2C3E6","color_26":"#1F373B","color_27":"#3F6F75","color_28":"#5EA6B0","color_29":"#9BC5CA","color_30":"#C1E0E5","color_31":"#353223","color_32":"#6A6447","color_33":"#9E966A","color_34":"#D3C88D","color_35":"#E9E3C2"},{"paletteName":"Pretty in Pink","paletteTags":["wedding 01"],"color_1":"#000000","color_2":"#FEFDFD","color_11":"#F0FAFF","color_12":"#CADDE6","color_13":"#9AAEB8","color_14":"#515E65","color_15":"#292F33","color_16":"#A4F7D5","color_17":"#77EEBE","color_18":"#00E689","color_19":"#00995B","color_20":"#004D2E","color_21":"#C7FCF2","color_22":"#91F9E6","color_23":"#6DBBAD","color_24":"#497D73","color_25":"#243E3A","color_26":"#C2E3D8","color_27":"#9CC6B9","color_28":"#61AA93","color_29":"#417162","color_30":"#203931","color_31":"#B6CDE1","color_32":"#91ABC2","color_33":"#6587A4","color_34":"#205685","color_35":"#102B43"},{"paletteName":"Tranquil Sea","paletteTags":["spa reesort"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#F3F2DC","color_12":"#C2C2B0","color_13":"#929184","color_14":"#616158","color_15":"#31302C","color_16":"#C0CBDE","color_17":"#96A4BE","color_18":"#5C739D","color_19":"#3D4D69","color_20":"#1F2634","color_21":"#F0E7CB","color_22":"#E0D19C","color_23":"#A89D75","color_24":"#70694E","color_25":"#383427","color_26":"#FCDDB5","color_27":"#F8CA90","color_28":"#F59A28","color_29":"#A3671B","color_30":"#52330D","color_31":"#BAD4D4","color_32":"#8EA9AA","color_33":"#607F80","color_34":"#2B5455","color_35":"#162A2A"},{"paletteName":"My Blue Sneakers","paletteTags":["amazing smile"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#0E1821","color_12":"#1C3142","color_13":"#516371","color_14":"#8293A1","color_15":"#C5D0D9","color_16":"#1E2A4B","color_17":"#3D5495","color_18":"#5B7EE0","color_19":"#A5B7EA","color_20":"#C4D1F5","color_21":"#053342","color_22":"#2B8FB3","color_23":"#50C4ED","color_24":"#86D2ED","color_25":"#ABE0F2","color_26":"#1D2932","color_27":"#395264","color_28":"#567B96","color_29":"#92A8B9","color_30":"#BDCFDC","color_31":"#3F3C1F","color_32":"#7D793E","color_33":"#BCB55D","color_34":"#FAF17C","color_35":"#FCF8BD"},{"paletteName":"Chefs Like Orange","paletteTags":["Papas"],"color_1":"#FDFDFE","color_2":"#000000","color_11":"#F2F2F2","color_12":"#B6B6B6","color_13":"#898989","color_14":"#5B5B5B","color_15":"#2E2E2E","color_16":"#FFE5D9","color_17":"#FFC1A3","color_18":"#FFAA81","color_19":"#7E5541","color_20":"#3F2B21","color_21":"#FFEFE8","color_22":"#F9DED3","color_23":"#DEC3B8","color_24":"#645954","color_25":"#322C2A","color_26":"#CCDBD9","color_27":"#A4B6B4","color_28":"#75928E","color_29":"#4E615F","color_30":"#27312F","color_31":"#BFC8D7","color_32":"#959EAE","color_33":"#697386","color_34":"#35435D","color_35":"#1B222F"},{"paletteName":"Corporate Blues","paletteTags":["James Consulting"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#222120","color_12":"#43423F","color_13":"#72716F","color_14":"#A1A09E","color_15":"#D0CFCD","color_16":"#2F261E","color_17":"#5E4D3D","color_18":"#BC9979","color_19":"#D4B9A1","color_20":"#E3D5C8","color_21":"#252D28","color_22":"#4B5A51","color_23":"#708779","color_24":"#A0AFA6","color_25":"#CBD7D0","color_26":"#4F3316","color_27":"#9E662C","color_28":"#ED9942","color_29":"#F3C89B","color_30":"#F9DCBD","color_31":"#282829","color_32":"#505052","color_33":"#78797C","color_34":"#A0A1A5","color_35":"#CFCFD2"},{"paletteName":"At The Car Wash Yeah","paletteTags":["moving company"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#CCCCCC","color_13":"#808080","color_14":"#555555","color_15":"#2A2A2A","color_16":"#FFEEBC","color_17":"#FFDE7A","color_18":"#FFC824","color_19":"#AA8924","color_20":"#554412","color_21":"#FFE0E3","color_22":"#FFC5C9","color_23":"#E68E94","color_24":"#A85258","color_25":"#6B1E23","color_26":"#FED1BF","color_27":"#FEBA9E","color_28":"#FD763F","color_29":"#A94F2A","color_30":"#542715","color_31":"#DFA3A6","color_32":"#C07275","color_33":"#A01F24","color_34":"#6B1518","color_35":"#350A0C"},{"paletteName":"Sleeping Beauty Wakes","paletteTags":["interiors and co"],"color_1":"#000000","color_2":"#FFFFFF","color_11":"#1C191C","color_12":"#494549","color_13":"#777377","color_14":"#A4A0A4","color_15":"#D2CDD2","color_16":"#552018","color_17":"#A94130","color_18":"#FE6148","color_19":"#FEB0A3","color_20":"#FFCAC2","color_21":"#141E3F","color_22":"#273C7D","color_23":"#67759E","color_24":"#929DBE","color_25":"#B8C2DF","color_26":"#1F3624","color_27":"#3D6C47","color_28":"#5CA26B","color_29":"#97C1A0","color_30":"#C0E0C7","color_31":"#243236","color_32":"#48656D","color_33":"#6B97A3","color_34":"#8FC9D9","color_35":"#C4E3EC"},{"paletteName":"Elephant Walks","paletteTags":["Coach"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#DBDBDB","color_13":"#B3B3B3","color_14":"#7A7A7A","color_15":"#333333","color_16":"#EDBFAF","color_17":"#EB9C81","color_18":"#E3815F","color_19":"#755144","color_20":"#332926","color_21":"#C5F0E7","color_22":"#96DBCD","color_23":"#71D4C0","color_24":"#52706A","color_25":"#293835","color_26":"#DEE8B7","color_27":"#D0E094","color_28":"#BBD16D","color_29":"#707857","color_30":"#2F312B","color_31":"#D5D9ED","color_32":"#AFB6E0","color_33":"#919AC7","color_34":"#6E77A8","color_35":"#252838"},{"paletteName":"Skin Tone Portrait","paletteTags":["interior design"],"color_1":"#000000","color_2":"#FFFFFF","color_11":"#323232","color_12":"#5B5B5B","color_13":"#848484","color_14":"#ADADAD","color_15":"#FFFFFF","color_16":"#3A3321","color_17":"#746743","color_18":"#AE9A64","color_19":"#C9BD9E","color_20":"#E4DBC4","color_21":"#282634","color_22":"#504B67","color_23":"#7D7A8D","color_24":"#A6A3B3","color_25":"#CDCAD9","color_26":"#36241C","color_27":"#6D4737","color_28":"#A36B53","color_29":"#C2A092","color_30":"#E0C7BC","color_31":"#282828","color_32":"#515151","color_33":"#797979","color_34":"#A1A1A1","color_35":"#D0D0D0"},{"paletteName":"Feelings Are Overrated","paletteTags":["The Soccer club"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#EFEFEF","color_12":"#BFBFBF","color_13":"#8F8F8F","color_14":"#606060","color_15":"#303030","color_16":"#ADC5D8","color_17":"#839CB1","color_18":"#54728A","color_19":"#154063","color_20":"#0A2032","color_21":"#FCDACB","color_22":"#FAB598","color_23":"#BC8872","color_24":"#7D5B4C","color_25":"#3F2D26","color_26":"#C1E5C5","color_27":"#9BCCA1","color_28":"#5DB267","color_29":"#3E7745","color_30":"#1F3B22","color_31":"#C3CBDA","color_32":"#9CA5B5","color_33":"#727C90","color_34":"#3E4E6B","color_35":"#1F2736"},{"paletteName":"Lolas Nature Trip","paletteTags":["Lifestyle Mentor"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#DBDBDB","color_13":"#8F8F8F","color_14":"#606060","color_15":"#303030","color_16":"#CCD2DB","color_17":"#A4ABB6","color_18":"#748092","color_19":"#4D5561","color_20":"#272B31","color_21":"#F1FFEB","color_22":"#DAF9CC","color_23":"#A3B59A","color_24":"#576452","color_25":"#2C3229","color_26":"#F2F2D0","color_27":"#E3E3A6","color_28":"#CFCF84","color_29":"#686842","color_30":"#343421","color_31":"#CED6D5","color_32":"#A3ACAB","color_33":"#758381","color_34":"#4E5756","color_35":"#272C2B"},{"paletteName":"Black & White","paletteTags":["Photography Studio"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#DBDBDB","color_13":"#8F8F8F","color_14":"#606060","color_15":"#303030","color_16":"#F5B8BC","color_17":"#EB9499","color_18":"#E13A44","color_19":"#96272D","color_20":"#4B1317","color_21":"#C1F3ED","color_22":"#88E6DC","color_23":"#28D9C7","color_24":"#44736E","color_25":"#0F4842","color_26":"#AFD7FA","color_27":"#86C1F5","color_28":"#178AF0","color_29":"#0F5CA0","color_30":"#082E50","color_31":"#D7D4D1","color_32":"#AFACA9","color_33":"#878380","color_34":"#5F5A55","color_35":"#302D2B"},{"paletteName":"Minimalist White","paletteTags":["Dawkins&Dodger"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#EDEBF2","color_12":"#BEBCC2","color_13":"#8E8D91","color_14":"#5F5E61","color_15":"#2F2F30","color_16":"#C7CDD0","color_17":"#979EA0","color_18":"#676E71","color_19":"#363E41","color_20":"#1B1F21","color_21":"#C6DFDC","color_22":"#9EB2B0","color_23":"#778684","color_24":"#4F5958","color_25":"#282D2C","color_26":"#F0DFD8","color_27":"#EBC9BC","color_28":"#DBAB97","color_29":"#A67560","color_30":"#5C4339","color_31":"#D7D3D2","color_32":"#AEAAA9","color_33":"#858180","color_34":"#5D5755","color_35":"#2F2C2B"},{"paletteName":"Hot Pink Bites","paletteTags":["Fashion Photographer"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#BEBCC2","color_13":"#8E8D91","color_14":"#5F5E61","color_15":"#2F2F30","color_16":"#FFEEBC","color_17":"#FFDC73","color_18":"#F2BD1E","color_19":"#AA8925","color_20":"#554412","color_21":"#E8E6C4","color_22":"#D2CE90","color_23":"#BBB546","color_24":"#7D792F","color_25":"#3E3C17","color_26":"#BEDED7","color_27":"#94BCB4","color_28":"#599B8D","color_29":"#3B675E","color_30":"#1E342F","color_31":"#C7CFD3","color_32":"#9AA3A8","color_33":"#6D777C","color_34":"#3D4A50","color_35":"#1F2528"},{"paletteName":"Business Edition","paletteTags":["success consulting"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#2F2E2E","color_12":"#595858","color_13":"#828181","color_14":"#ACABAB","color_15":"#F2F2F2","color_16":"#4D1916","color_17":"#9B312D","color_18":"#E84A43","color_19":"#F09E9A","color_20":"#F7BFBD","color_21":"#141A2D","color_22":"#293559","color_23":"#5F6883","color_24":"#8D95AC","color_25":"#B9C0D5","color_26":"#4F4B13","color_27":"#9E9625","color_28":"#EDE138","color_29":"#F3ED96","color_30":"#F9F5BA","color_31":"#283E23","color_32":"#517C45","color_33":"#78BA68","color_34":"#ACD1A3","color_35":"#D3E8CE"},{"paletteName":"White on Black","paletteTags":["Jack Banks Photography"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#BEBCC2","color_13":"#8E8D91","color_14":"#5F5E61","color_15":"#2F2F30","color_16":"#B2DED6","color_17":"#85BDB3","color_18":"#409C8C","color_19":"#2B685D","color_20":"#15342F","color_21":"#FFDBC6","color_22":"#FEB88D","color_23":"#BF8A6A","color_24":"#7F5C47","color_25":"#402E23","color_26":"#C0EEF5","color_27":"#9FE1EA","color_28":"#50CFE0","color_29":"#358A95","color_30":"#1B454B","color_31":"#BFC8D7","color_32":"#959EAE","color_33":"#697386","color_34":"#35435D","color_35":"#1B222F"}]')},function(e,t,n){function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A,T,_,O,C,D,w,M;e.exports=(r=n(0),i=n(156),a=n(155),s=n(1),c=n(8),u=s.masterPageLayoutUtils.MASTER_PAGES_SECTIONS,l=function(e,t,n){return e.pointers.components.getChildren(t)[n]},p=function(e,t){return e.pointers.components.getPagesContainer(t)},d=function(e){return"wysiwyg.viewer.components.PagesContainer"===e},g=function(e,t){return d(c.getComponentType(e,t))},f=function(e,t){var n=e.pointers.getInnerPointer(t,"layout.fixedPosition");return!!e.dal.get(n)},m=function(e,t,n){return!!i.canSwapComponents(e,t,n)&&(!(!f(e,t)||!f(e,n))||(h(e,t)?h(e,n):!h(e,n)||g(e,n)))},v=function(e,t,n,o){var i=e.dal.full,s=e.pointers.full.components.getChildrenContainer(t),c=i.get(s),u=r.sortBy([n,o],(function(e){return e[0]})),l=a.swapGroups(c,u[0],u[1]);i.set(s,l)},E=function(e,t,n,o){var r=e.dal.full,i=e.pointers.full.components.getChildrenContainer(t),s=r.get(i),c=a.moveGroupToIndex(s,n,o);r.set(i,c)},y=function(e,t){var n=e.pointers.full.components.getParent(t),o=e.pointers.full.components.getChildren(n),i=r.findIndex(o,{id:s.displayedOnlyStructureUtil.getRepeaterTemplateId(t.id)});return[i,i]},I=function(e,t){return g(e,t)?_(e,t):y(e,t)},S=function(e,t){return r.includes(u[t],e)},P=function(e,t,n){return 0===n?n:a.findPrev(t,(function(t){return h(e,t)||f(e,t)}),n)+1},A=function(e,t,n){var o=t.length-1;if(n===o)return n;var r=a.findNext(t,(function(t){return h(e,t)||f(e,t)}),n);return-1===r?o:r-1},T=function(e,t,n){var o=r.findIndex(n,{id:t.id});return[P(e,n,o),A(e,n,o)]},_=function(e,t){var n=e.pointers.full.components.getParent(t);return T(e,t,e.pointers.full.components.getChildren(n))},D=function(e,t){return[e,t]},w=function(e){return r.reject(e,(function(e){var t=o(e,2);return t[0]>t[1]}))},M=function(e,t,n){var i=n.type,a=e.pointers.full.components.getChildren(n),s=p(e,i),c=o(T(e,s,a),2),u=c[0],l=c[1];return S(t.componentType,i)&&!d(t.componentType)||function(e){return r.get(e,["layout","fixedPosition"],!1)}(t)?w([D(0,u),D(l+1,a.length)]):[D(u,l+1)]},{shouldUseMasterPageArrangement:function(e,t){return function(e,t){return e.pointers.isSamePointer(t,e.pointers.components.getMasterPage(s.constants.VIEW_MODES.DESKTOP))}(e,t)&&function(e){return r.get(function(e){return e.dal.get(e.pointers.getInnerPointer(function(e){return e.pointers.data.getDataItemFromMaster("masterPage")}(e),"layoutSettings"))}(e),"soapCompsAroundPagesContainer",!1)}(e)},isMasterPageSection:h=function(e,t){return S(c.getComponentType(e,t),t.type)},getPrevCompIndexInDisplayedJson:C=function(e,t){var n=e.pointers.components.getParent(t),o=e.pointers.components.getChildren(n),i=r.findIndex(o,{id:t.id});return a.findPrev(o,(function(n){return m(e,t,n)}),i)},getNextCompIndexInDisplayedJson:O=function(e,t){var n=e.pointers.components.getParent(t),o=e.pointers.components.getChildren(n),i=r.findIndex(o,{id:t.id});return a.findNext(o,(function(n){return m(e,t,n)}),i)},findValidIndexForNewChild:function(e,t,n){var o=M(e,t,n),r=e.pointers.full.components.getChildren(n);return a.findNearestValidIndex(r,r.length,o)},findValidIndexForChild:function(e,t,n,i){var s=e.pointers.full.components.getChildren(n),c=r.reject(s,(function(n){return e.pointers.isSamePointer(t,n)}));i=r.isUndefined(i)?c.length:i;var u=function(e,t,n){var i=e.pointers.full.components.getChildren(n),a=r.reject(i,(function(n){return e.pointers.isSamePointer(t,n)})),s=p(e,t.type),c=o(T(e,s,a),2),u=c[0],l=c[1];return h(e,t)&&!g(e,t)||f(e,t)?w([D(0,u),D(l+1,a.length)]):[D(u,l+1)]}(e,t,n);return a.findNearestValidIndex(c,i,u)},moveMasterPageSectionBackward:function(e,t){var n=C(e,t),o=e.pointers.components.getParent(t),r=l(e,o,n);v(e,o,I(e,t),I(e,r))},moveMasterPageSectionForward:function(e,t){var n=O(e,t),o=e.pointers.components.getParent(t),r=l(e,o,n);v(e,o,I(e,t),I(e,r))},moveMasterPageChildToFront:function(e,t){var n=e.pointers.components.getParent(t);if(h(e,t))!function(e,t,n){var o=e.dal.full,r=e.pointers.full.components.getChildrenContainer(t),i=o.get(r),s=a.moveGroupToEndOfArray(i,n);o.set(r,s)}(e,n,I(e,t));else{var o=e.pointers.full.components.getChildren(n),i=r.findIndex(o,{id:"PAGES_CONTAINER"}),s=A(e,o,i);E(e,n,y(e,t),s)}},moveMasterPageChildToBack:function(e,t){var n=e.pointers.components.getParent(t);if(h(e,t))!function(e,t,n){var o=e.dal.full,r=e.pointers.full.components.getChildrenContainer(t),i=o.get(r),s=a.moveGroupToStartOfArray(i,n);o.set(r,s)}(e,n,I(e,t));else{var o=e.pointers.full.components.getChildren(n),i=r.findIndex(o,{id:"PAGES_CONTAINER"}),s=P(e,o,i);E(e,n,y(e,t),s)}}})},function(e,t){var n,o,r,i,a,s;e.exports=(n=["entrance","animation","scrub"].concat(["mask","3d"]),o=["exit"],r=["animation","background"],i=["transition","pageTransition"],a=[],s={AllComponents:n.concat(o),PopupContainer:n.concat(o),WRichText:n.concat(["text"]).concat(o),WSiteStructure:i,Page:i,AppPage:i,Anchor:a,FlashComponent:a,PagesContainer:a,Header:a,Footer:n,TPAWidget:a,TPASection:a,TPAGluedWidget:a,TPAMultiSection:a,AppPart:a,AppPart2:a,Masonry:a,Accordion:a,Impress:a,Freestyle:a,Collage:a,Honeycomb:a,StripShowcase:a,StripSlideshow:a,Thumbnails:a,TPA3DGallery:a,TPA3DCarousel:a,FlickrBadgeWidget:a,GoogleMap:a,HtmlComponent:a,PinItPinWidget:a,PinterestPinIt:a,FacebookLikeBox:a,SkypeCallButton:a,SoundCloudWidget:a,SpotifyFollow:a,SpotifyPlayer:a,Video:a,VKShareButton:a,WTwitterTweet:a,WTwitterFollow:a,YouTubeSubscribeButton:a,MediaControls:a,MediaOverlayControls:a,StripContainer:r,StripContainerSlideShowSlide:r,StateBoxState:r,StateBoxFormState:r,StateStrip:r,StateStripState:r,Column:n.concat(r),StripColumnsContainer:n.concat(r),BoxSlideShowSlide:r},Object.freeze(s),{getSchema:function(){return s}})},function(e,t){var n;e.exports=(n={screenIn:{groups:["animation","entrance"]},inlinePopupIn:{groups:["animation","entrance"]},inlinePopupOut:{groups:["exit","animation"]},bgScrub:{groups:["animation","background"]},pageTransition:{groups:["transition","pageTransition"]},exit:{groups:["exit","animation"]},load:{groups:["transition","pageTransition"]},modeIn:{groups:["animation","entrance"]},modeOut:{groups:["animation","exit"]},modeChange:{groups:["animation","entrance"]},scrollScrub:{groups:["scrub"]},backToTopIn:{groups:["animation","entrance"]}},Object.freeze(n),{getSchema:function(){return n}})},function(e,t,n){var o,r,i,a,s,c,u;e.exports=(o=n(0),r=n(2),i={general:[{name:"Fade",groups:["animation"],params:{}},{name:"Position",groups:["animation"],params:{}},{name:"Rotate",groups:["animation"],params:{}},{name:"Scale",groups:["animation"],params:{}}],in:[{name:"ArcIn",groups:["3d","entrance","animation"],params:{direction:{type:"list",list:["right","left"]}}},{name:"DropIn",groups:["entrance","animation"],params:{power:{type:"list",list:["soft","medium","hard"]}}},{name:"DropClipIn",groups:["entrance","animation"]},{name:"ExpandIn",groups:["entrance","animation"],params:{power:{type:"list",list:["soft","medium","hard"]}}},{name:"FadeIn",groups:["entrance","animation"],params:{}},{name:"FlipIn",groups:["3d","entrance","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"FloatIn",groups:["entrance","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"FlyIn",groups:["entrance","animation"],params:{direction:{type:"list",list:["top","top left","top right","left","bottom","bottom left","bottom right","right"]}}},{name:"FoldIn",groups:["3d","entrance","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"Reveal",groups:["mask","entrance","animation"],params:{direction:{type:"list",list:["top","right","center","bottom","left"]}}},{name:"SlideIn",groups:["mask","entrance","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]},power:{type:"list",list:["soft","medium","hard"]}}},{name:"SpinIn",groups:["entrance","animation"],params:{cycles:{type:"number",min:.25,max:15,step:.25},direction:{type:"list",list:["cw","ccw"]},power:{type:"list",list:["soft","medium","hard"]}}},{name:"TurnIn",groups:["entrance","animation"],params:{direction:{type:"list",list:["right","left"]}}},{name:"BounceIn",groups:["entrance","animation"],params:{bounce:{type:"list",list:["soft","medium","hard"]},direction:{type:"list",list:["top left","top right","center","bottom right","bottom left"]}}},{name:"GlideIn",groups:["entrance","animation"],params:{angle:{type:"angle"},distance:{type:"number",min:0,max:300,step:1}}}],out:[{name:"ArcOut",groups:["3d","exit","animation"],params:{direction:{type:"list",list:["right","left"]}}},{name:"PopOut",groups:["exit","animation"],params:{power:{type:"list",list:["soft","medium","hard"]}}},{name:"CollapseOut",groups:["exit","animation"],params:{power:{type:"list",list:["soft","medium","hard"]}}},{name:"FadeOut",groups:["exit","animation"],params:{}},{name:"FlipOut",groups:["3d","exit","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"FloatOut",groups:["exit","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"FlyOut",groups:["exit","animation"],params:{direction:{type:"list",list:["top","top left","top right","left","bottom","bottom left","bottom right","right"]}}},{name:"FoldOut",groups:["3d","exit","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"Conceal",groups:["mask","exit","animation"],params:{direction:{type:"list",list:["top","right","center","bottom","left"]}}},{name:"SlideOut",groups:["mask","exit","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]},power:{type:"list",list:["soft","medium","hard"]}}},{name:"SpinOut",groups:["exit","animation"],params:{cycles:{type:"number",min:1,max:15,step:1},direction:{type:"list",list:["cw","ccw"]},power:{type:"list",list:["soft","medium","hard"]}}},{name:"TurnOut",groups:["exit","animation"],params:{direction:{type:"list",list:["right","left"]}}},{name:"BounceOut",groups:["exit","animation"],params:{bounce:{type:"list",list:["soft","medium","hard"]},direction:{type:"list",list:["top left","top right","center","bottom right","bottom left"]}}},{name:"GlideOut",groups:["exit","animation"],params:{angle:{type:"angle"},distance:{type:"number",min:0,max:300,step:1}}}],background:[{name:"ContainerFixedBg",groups:["animation","background"],params:{}},{name:"BackgroundReveal",groups:["animation","background"],params:{}},{name:"BackgroundParallax",groups:["animation","background"],params:{}},{name:"BackgroundZoom",groups:["animation","background"],params:{}},{name:"BackgroundFadeIn",groups:["animation","background"],params:{}},{name:"BackgroundBlurIn",groups:["animation","background"],params:{}},{name:"SiteBackgroundParallax",groups:["animation","background"],params:{}}],modes:[{name:"ModesMotion",groups:["entrance","animation"]}]},a={duration:{type:"number",min:0,max:4,step:.05},delay:{type:"number",min:0,max:8,step:.1}},s=[],o.forEach(i,(function(e){s=s.concat(o.map(e,(function(e){var t=o.cloneDeep(e);return t.type="animation",t.params=t.params||{},o.includes(t.groups,"animation")&&o.defaults(t.params,a),t})))})),c=s,u=[{type:"scrub",name:"AnimateAfterScroll",groups:["scrub"],viewMode:r.VIEW_MODES.DESKTOP,params:{animations:[]}},{type:"scrub",name:"ScrubAnimation",groups:["scrub"],viewMode:r.VIEW_MODES.MOBILE,params:{animations:[]}}],[].concat([{type:"widget",name:"runCode",params:{callbackId:"",compName:""}},{type:"widget",name:"runAppCode",params:{callbackId:"",compName:""}}],u,[{type:"site",name:"openPopup",params:{delay:2,openInDesktop:!0,openInMobile:!1}},{type:"site",name:"prefetchPages",params:{prefetchFilters:{}}}],c))},function(e,t){e.exports=[{name:"CrossFade",groups:["transition","pageTransition"],legacyName:"crossfade"},{NoTransition:"NoTransition",groups:["transition","pageTransition"],legacyName:"none"},{OutIn:"OutIn",groups:["transition","pageTransition"],legacyName:"outIn"},{name:"SlideHorizontal",groups:["transition","pageTransition"],legacyName:"swipeHorizontalFullScreen"},{name:"SlideVertical",groups:["transition","pageTransition"],legacyName:"swipeVerticalFullScreen"}]},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E;e.exports=(o=n(0),r=n(25),i=n(9),a=n(27),s=n(400),c=n(90),u=n(401),l=n(402),p=n(403),d=n(404),g=n(405),f=n(406),m=n(407),v=n(408),E={"wysiwyg.viewer.components.MatrixGallery":s,"wysiwyg.common.components.anchor.viewer.Anchor":p,"wysiwyg.viewer.components.WSiteStructure":l,"wysiwyg.viewer.components.Column":o.noop,"wysiwyg.viewer.components.StripColumnsContainer":o.noop,"wysiwyg.viewer.components.WRichText":d,"wysiwyg.viewer.components.FiveGridLine":f,"wysiwyg.viewer.components.VerticalLine":g,"wysiwyg.viewer.components.PopupContainer":m,"wysiwyg.viewer.components.QuickActionBar":v},{getPlugin:function(e,t){var n=r.getType(e,t),o=E[n];return!o&&i.isLegacyFullWidthContainer(e,t)&&(o=a.isPopup(e,t.id)?u:c),o}})},function(e,t,n){var o;e.exports=(o=n(0),function(e,t,n,r){var i=e.getSiteMeasureMap(),a=o.get(i.custom,[r.id,"itemsContainer","height"]),s=o.get(i.custom,[r.id,"showMore","height"]);return a&&s?{height:a+s}:{}})},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(90),function(e,t){return o.assign(r.call(this,e,t),{height:Math.max(t.height,e.getScreenHeight())})})},function(e,t,n){var o;e.exports=(o=n(2),function(e,t){var n=e.isMobileView();return{x:n?t.x:0,y:t.y,width:n?e.getSiteWidth():e.getSiteMeasureMap().clientWidth,height:e.getSiteMeasureMap().height[o.MASTER_PAGE_ID]}})},function(e,t){var n,o;e.exports=(n=141,o=68,function(e,t){var r=t.width,i=e.getSiteMeasureMap().clientWidth-(n+o);return e.isMobileView()&&(i=i-(e.getSiteMeasureMap().clientWidth-e.getSiteWidth())/2-13,r=140),{x:i,y:t.y,height:0,width:r}})},function(e,t){e.exports=function(e,t,n,o){return{height:e.getSiteMeasureMap().minHeight[o.id]}}},function(e,t){var n;e.exports=(n=25,function(e,t){var o={};return t.width<n&&(o.x=t.x-n/2,o.width=n),o})},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(90),i=25,function(e,t,n){var a={};return t.height<i&&(a.y=t.y-i/2,a.height=i),n&&n.fullScreenModeOn&&o.merge(a,r(e,t,n)),a})},function(e,t,n){var o;e.exports=(o=n(90),function(e,t,n){return"fullWidth"===n.alignmentType?o(e,t):{}})},function(e,t,n){e.exports=function(){var e=n(0),t=34;function o(t,n,o,r){return"right"===o.alignment&&e.has(r,"qab-right")?t.width.screen-n-r["qab-right"]:e.has(r,"qab-left")?r["qab-left"]:(t.width.screen-n)/2}function r(e,t,n){return e.clientHeight-t-n["qab-bottom"]}return function(e,n,i,a,s){var c=e.getSiteMeasureMap(),u=function(e,n,o,r,i){return!o.hideText&&i["text-overflow"]&&e.width["".concat(r.id,"maxTextWidth")]>0?n+t+e.width["".concat(r.id,"maxTextWidth")]:n}(c,n.width,i,a,s),l=c.height["".concat(a.id,"actionsContainer")];return{x:(c.clientWidth-c.width.screen)/2+o(c,u,i,s),y:r(c,l,s),width:u,height:l}}}()},function(e,t){e.exports=M},function(e,t,n){e.exports=function(){var e=n(0),t="warning";function o(){return{"wysiwyg.viewer.components.StripContainer":{deprecated:t,message:"This component will be deprecated"},"wysiwyg.viewer.components.ClipArt":{deprecated:t,message:"This component will be deprecated"}}}return{isComponentDeprecated:function(t){return"error"===e.get(o(),[t,"deprecated"])},shouldWarnForDeprecation:function(n){return e.get(o(),[n,"deprecated"])===t},getDeprecationMessage:function(t){return"".concat(t,"|").concat(e.get(o(),[t,"message"]))}}}()},function(e,t,n){var o,r;e.exports=(o=n(412),r=n(413),n(414),n(415),n(416),n(417),n(418),{initialize:function(e){r.initialize(e),o.initialize(e)}})},function(e,t,n){function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(88),r=n(45);function i(n,r,i,a){var s=a[r],c=s.getAttribute("data-svg-id"),u=s.querySelector("svg");if(c&&u){var l=n.pointers.svgShapes.getSvgShapePointer(c),p=n.pointers.getInnerPointer(l,t.svgUtils.SVG_STORES.BOX_BOUNDARIES);if(n.dal.get(l)&&e.isEmpty(n.dal.get(p))){var d="preserve"===s.getAttribute("data-preserve-viewbox"),g=function(e){var t=o(e.getAttribute("data-viewbox").split(" "),4);return{x:t[0],y:t[1],width:t[2],height:t[3]}}(s),f=d&&e.some(g)?g:function(e){var t=e.getBBox();return{x:t.x,y:t.y,width:t.width,height:t.height}}(u);e.some(f)&&n.dal.set(p,f)}}}var a=["wysiwyg.viewer.components.VectorImage","wysiwyg.viewer.components.svgshape.SvgShape","wysiwyg.viewer.components.PopupCloseIconButton","wysiwyg.viewer.components.MediaControls","wysiwyg.viewer.components.MediaOverlayControls","wysiwyg.viewer.components.mobile.TinyMenu","wysiwyg.viewer.components.LoginSocialBar","wysiwyg.viewer.components.BackToTopButton"];return{initialize:function(t){r.registerShapesMeasureFunction(a,e.partial(i,t))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(45);function o(t){var n=t.getBoundingClientRect(),o=e.toArray(t.children),r=n.left,i=n.top;return n=function t(n,o){o=o||{left:-Number.MAX_VALUE,right:Number.MAX_VALUE,top:-Number.MAX_VALUE,bottom:Number.MAX_VALUE};var r=window.document.createRange();o=e.reduce(n,(function(e,n){var o;return function(e){var t,n,o=e.childNodes,r="";for(t=0;t<o.length;t++)3===(n=o[t]).nodeType&&(r+=n.textContent.trim());return r}(n)?(r.selectNodeContents(n),(o=r.getBoundingClientRect()).width&&o.height&&(e.left=Math.min(e.left,o.left),e.top=Math.min(e.top,o.top),e.right=Math.max(e.right,o.right),e.bottom=Math.max(e.bottom,o.bottom))):e=t(n.children,e),e}),o);return o}(o,n={left:n.right,right:n.left,top:n.bottom,bottom:n.top}),{dx:Math.floor(n.left)-r,dy:Math.floor(n.top)-i,width:Math.ceil(n.right-n.left),height:Math.ceil(n.bottom-n.top)}}function r(t,n,r,i){var a=i[n],s=t.pointers.general.getTextRuntimeOverallBorders(),c=e.isUndefined(a.dataset.minHeight)?0:parseInt(a.dataset.minHeight,10),u=a.querySelector(".measurer");if(r.minHeight[n]=Math.max(c,e.get(u,"offsetTop",a.offsetHeight)),a.textContent.trim()&&!t.siteAPI.isMobileView()){var l=o(a);t.siteAPI.isMobileView()||t.dal.set(t.pointers.getInnerPointer(s,n),l)}}return{initialize:function(n){t.registerAdditionalMeasureFunction("wysiwyg.viewer.components.WRichText",e.partial(r,n))}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(45),i=n(1),r.registerMeasureChildrenFirst("wysiwyg.viewer.components.Group",!0),r.registerRequestToMeasureDom("wysiwyg.viewer.components.Group"),r.registerCustomMeasure("wysiwyg.viewer.components.Group",(function(e,t,n,r,a){var s=a.isMobileView,c=i.dataUtils.getChildrenData(r.structure,s()),u=function(e,t){var n,r,a,s;return n=a=Number.MAX_VALUE,r=s=-Number.MAX_VALUE,o.forEach(e,(function(e){var o=e.layout,c=t.left&&t.left[e.id]?t.left[e.id]:o.x,u=t.width&&t.width[e.id]?t.width[e.id]:o.width,l=t.top&&t.top[e.id]?t.top[e.id]:o.y,p=t.height&&t.height[e.id]?t.height[e.id]:o.height,d=i.boundingLayout.getBoundingLayout({x:c,y:l,width:u,height:p,rotationInDegrees:o.rotationInDegrees});n=Math.min(n,d.x),r=Math.max(r,d.x+d.width),a=Math.min(a,d.y),s=Math.max(s,d.y+d.height)})),{left:n,right:r,top:a,bottom:s}}(c,t);t.left[e]=r.layout.x,c.length>0&&(t.width[e]=u.right-u.left,t.height[e]=u.bottom-u.top,t.top[e]=r.layout.y+u.top,t.left[e]=r.layout.x+u.left,o.forEach(c,(function(e){t.top[e.id]=e.layout.y-u.top,t.left[e.id]=e.layout.x-u.left})))})),void r.registerPatcher("wysiwyg.viewer.components.Group",(function(e,t,n,r,a){t.css(e,{width:n.width[e],height:n.height[e],top:n.top[e],left:n.left[e]});var s=i.dataUtils.getChildrenData(r.structure,a.isMobileView());o.forEach(s,(function(e){t.css(e.id,{top:n.top[e.id],left:n.left[e.id]})}))})))},function(e,t,n){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),r=n(45);function i(n,r,i){var a=i[n],s=t.contentAreaUtil.getContentAreaMarkerForElement(a);s&&e.merge(r,{left:o({},n,0),width:o({},n,s.offsetWidth),relativeToScreenOverrides:o({},n,{x:a.offsetLeft,width:a.offsetWidth})})}r.registerAdditionalMeasureFunction("wysiwyg.viewer.components.StripColumnsContainer",(function(n,r,i){var a=i[n],s=a.getBoundingClientRect(),c=s.left,u=s.width,l=t.contentAreaUtil.getContentAreaMarkerChildOnNode(a);l&&e.merge(r,{left:o({},n,0),width:o({},n,l.offsetWidth),relativeToScreenOverrides:o({},n,{x:c,width:u})})})),r.registerAdditionalMeasureFunction("wysiwyg.viewer.components.StripContainerSlideShow",i),r.registerAdditionalMeasureFunction("wysiwyg.viewer.components.StripContainerSlideShowSlide",i),r.registerAdditionalMeasureFunction("wysiwyg.viewer.components.Column",(function(n,r,i,a){var s=i[n],c=s.getBoundingClientRect(),u=c.left,l=c.width,p=t.contentAreaUtil.getContentAreaMarkerChildOnNode(s);p&&e.merge(r,{left:o({},n,Math.floor(p.getBoundingClientRect().left+a.getSiteX())),width:o({},n,p.offsetWidth),relativeToScreenOverrides:o({},n,{x:u,width:l})})}))}()},function(e,t,n){e.exports=void n(45).registerAdditionalMeasureFunction("wysiwyg.viewer.components.VerticalLine",(function(e,t,n){var o=n[e];t.width[e]=parseInt(o.style.width,10),t.left[e]=parseInt(o.style.left,10)}))},function(e,t,n){function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r,i,a,s;e.exports=(r=n(0),i=n(1),a=n(45),s="platform.components.AppWidget",a.registerMeasureChildrenFirst(s,!0),a.registerRequestToMeasureDom(s),a.registerCustomMeasure(s,(function(e,t,n,a,s){var c=s.isMobileView,u=o(i.dataUtils.getChildrenData(a.structure,c()),1)[0];u&&(t.width[e]=r.get(t,["width",u.id],u.layout.width),t.height[e]=r.get(t,["height",u.id],u.layout.height))})),void a.registerPatcher(s,(function(e,t,n){t.css(e,{width:n.width[e],height:n.height[e]})})))},function(e,t,n){var o,r;e.exports=(o=n(45),r=n(1),void o.registerAdditionalMeasureFunction("mobile.core.components.Page",(function(e,t,n,o,i){t.pageBottomByComponents[e]=r.layoutUtils.getPageBottomChildEnd(t,n,o.isMobileView(),i)+t.containerHeightMargin[e]}),"pageBottomPlugin"))},function(e,t,n){var o,r;e.exports=(o=n(420),(r={})["wysiwyg.viewer.components.PopupContainer"]=o,r)},function(e,t,n){var o,r;e.exports=(o=n(1),r=n(25),function(e,t,n){var i={width:n.width,height:n.height},a=r.getPropertiesItem(e,t);i.x=o.compAlignmentUtils.getLeft(a,i.width,e.siteAPI.getScreenWidth(),e.siteAPI.getSiteWidth()),"fullWidth"===a.alignmentType&&(i.x=Math.max(i.x,0));var s=e.siteAPI.getSiteMeasureMap();return i.y=o.compAlignmentUtils.getTop(a,i.height,s.innerHeight.screen),i})},function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r,i,a,s,c,u;e.exports=(r=n(0),i=n(51),a=n(1),s=n(422),c=n(175),u=i.viewerCompsService,{loadExternalComponentsForDS:function(e,t){var n="".concat(requirejs.toUrl("wix-ui-santa"),"/"),i="ALL"===t;if(i||r.isArray(t))return(i?function(e){return s.loadAll(e)}(n):function(e,t){return Promise.all(r(t).filter(s.exists).map((function(t){return s.load(t,e)})).value())}(n,t)).then((function(t){r(t).flatMap().forEach((function(t){return c.registerComponent(e,t)}))})).catch((function(e){return a.log.error("Could not load external components from ".concat(n),e)}));if(t)throw new Error("componentsToLoad in DS config must be either the string 'ALL' or an array of component types. received ".concat(o(t)," instead"))},loadViewerComponents:function(e,t){return Promise.all(t.map((function(e){return u.loadAndRegister(e)}))).catch((function(e){a.log.error("Error loading viewer components during DS init: ".concat(t),e)}))}})},function(e,t){e.exports=b},function(e,t,n){var o,r,i,a,s,c,u,l,p,d;e.exports=(o=n(0),r=n(12),i=n(157),a=n(165),s=["disableable","rotatable","moveDirections","resizableSides","canBeFixedPosition","layoutLimits","mobileConversionConfig","defaultMobileProperties"],c={isRepeatable:!1},u={isExternal:!0},l=o.invert(a),p=function(e){return l[e]},d={registerMetaData:function(e,t){i[e]?function(e){var t=new Error('Unable to register a component metaData for type "'.concat(e,'" that is already registered'));r.integrations.ravenUtils.captureError(t,{tags:{metaDataRegistration:!0,failedMetaDataRegistration:!0},extra:{componentType:e}})}(e):i[e]=t},registerExternalMetaData:function(e,t){var n=function(e){return o(e).keys().reject(p).value()}(t);n.length&&function(e,t,n){var o=new Error('Unable to use illegal meta data key(s) "'.concat(e.join(", "),'" for component "').concat(t,'"'));r.integrations.ravenUtils.captureError(o,{tags:{metaDataRegistration:!0},extra:{illegalKeys:e,metaDataToRegister:n}})}(n,e,t=o.omit(t,n));var i=o(t).pick(s).defaults(c).assign(u).value();return d.registerMetaData(e,i)},unregisterExternalMetaData:function(e){(function(e){return o.get(i,[e,"isExternal"],!1)})(e)&&delete i[e]}})},function(e,t){e.exports=function(e,t,n,o){o.data.compId=t.id}},function(e,t,n){var o,r,i,a,s,c,u,l,p,d;e.exports=(o=n(0),r=n(1),i=n(10),a=r.vectorImageConversionUtils,s=a.vectorImageDefaults,c=a.convertStyleToDesignData,u=a.convertStyle,l=a.convertData,p=a.convertProperties,d=a.convertStructure,{beforeAdd:function(e,t,n,r){r.design=r.design||{type:"VectorImageDesignData"};var a=r.skin,g=(e.pointers.components.getPageOfComponent(n)||e.pointers.full.components.getPageOfComponent(n)).id,f=o.isString(r.style),m=f?i.styles.get(e,r.style,g):r.style,v=r.data,E=r.design,y=r.props;d(r,s),u(m,s),c(E,m,s),l(v,s,a),p(y,s),function(e){var t=o.get(e,["modes","overrides"]);o.forEach(t,(function(e){e.style&&(e.design={},c(e.design,e.style,s),o.unset(e,"style"))}))}(r),function(e){if("RepeatedData"===e.data.type){var t={type:"RepeatedData",original:e.design,overrides:{}};o.forEach(e.data.overrides,(function(n,r){t.overrides[r]=o.clone(e.design)})),e.design=t}}(r),f&&i.styles.update(e,r.style,m,g)}})},function(e,t){e.exports={beforeAdd:function(e,t,n,o){o.componentType="wysiwyg.viewer.components.WPhoto",o.props.displayMode="fill"}}},function(e,t,n){var o,r,i,a,s,c,u;e.exports=(o=n(0),r=n(114),i=n(4),a=n(96),s=n(20),c=["rd","brd","brw","alpha-brd"],u={"wysiwyg.viewer.components.BoxSlideShowSlide":"wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StateBoxState":"wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateBoxFormState":"wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStripState":"wysiwyg.viewer.components.StateStrip","wysiwyg.viewer.components.StripContainerSlideShowSlide":"wysiwyg.viewer.components.StripContainerSlideShow"},{updateSlidesStyle:function(e,t,n,r){var i=o.omitBy(r.style.properties,(function(e,t){return n.style.properties[t]===e}));if(!o(i).keys().intersection(c).isEmpty()){var u=a.getNonMasterChildren(e,t),l={style:{properties:{}}};o.forEach(c,(function(e){l.style.properties[e]=i[e]})),o.forEach(u,(function(t){var n,r,i,a,c;n=e,r=t,i=l,a=s.style.get(n,r),c=o.cloneDeep(a),c=o.merge(c,i),s.style.fork(n,r,c)}))}},verifySlideShowStructureOnAdd:function(e,t,n,i){var a=r.getSlidesFromChildrenByStructure(i.components),s=a.length>0,c=o.find(a,(function(e){return!o.includes(r.getMatchingChildSlideType(i.componentType),e.componentType)}));if(!s||c)throw new Error("Invalid slideShow structure definition")},verifySlideShowStructureOnDelete:function(e,t,n){if(!n&&!function(e,t){var n=e.pointers.components.getParent(t),o=i.getType(e,t);return i.getType(e,n)!==u[o]}(e,t)){var a=e.pointers.components.getParent(t),s=e.pointers.components.getChildren(a),c=o.map(s,(function(t){return{componentType:i.getType(e,t)}}));if(1===r.getSlidesFromChildrenByStructure(c).length)throw new Error("can't delete the last slide")}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(2),r=n(3),i=n(6),a=n(25),s=n(29),c=n(39),u=n(8),l=n(17),p=n(15),d=o.DATA_TYPES,g="custom",f=["dataQuery","designQuery"],m=p.stripHashIfExists;function v(e,t,n){return n||u.shouldForceMaintainIDsOnSerialize(e,t)}function E(n,r,s,u,p,d,m){d=e.defaults({maintainIdentifiers:v(n,r,d.maintainIdentifiers)},d),u=u||function(t){var n=t.pointers.general.getMobileStructuresPointer(),o=t.dal.get(n),r={};return e.forOwn(o,(function t(n){r[n.id]=e.omit(e.clone(n),"components");e.forEach(n.components,t)})),r}(n);var I=n.dal.full.get(r);if(!I)return null;var S=t.displayedOnlyStructureUtil.isRepeatedComponent(r.id);I=e.reduce(f,(function(e,o){return e[o]&&(d.itemId?e[o]=t.displayedOnlyStructureUtil.getUniqueDisplayedId(e[o],d.itemId):S&&(e[o]=n.dal.get(n.pointers.getInnerPointer(r,o)))),e}),I);var h=n.pointers.full.components.getPageOfComponent(r),P=h.id;if(y(n,I,s,d,P,p,m),d.ignoreChildren)delete I.components;else{var A=e.clone(d);S&&(A.itemId=t.displayedOnlyStructureUtil.getRepeaterItemId(r.id)),i.executeHook(i.HOOKS.SERIALIZE.CHILDREN_BEFORE,I.componentType,[I,A]),function(t,n,o,r,i,a,s,c){var u=t.pointers.full.components.getChildren(o);u.length&&(n.components=e.map(u,(function(e){return E(t,e,null,i,a,s,c)})))}(n,I,r,0,u,p,A,m),d.maintainIdentifiers&&l.serializeMobileChildren(n,I,P,A,u,p,m,E)}d.maintainIdentifiers||(delete I.mobileComponents,delete I.id);var T={},_=[n,r,T];return i.executeHook(i.HOOKS.SERIALIZE.SET_CUSTOM,I.componentType,_),e.isEmpty(T)||(I[g]=e.defaults(I[g]||{},T)),r.type===o.VIEW_MODES.DESKTOP&&l.serializeMobileStructure(n,r,I,P,u,p,d,y,E,{componentStructureInfo:a,mobileConversionFacade:c}),I}function y(t,n,o,i,a,s,c){s(n),function(t,n,o,r,i,a){var s=o.dataQuery;if(s){var c=n.repeatedItemIds,u=e.isArray(c)&&c.length>0;o.data=u?S(t,s,r,i,c,I):I(t,s,r,i,a),n.maintainIdentifiers&&o.data&&(o.data.id=m(s)),delete o.dataQuery}}(t,i,n,a,o,c),h(t,i.maintainIdentifiers,n,a),function(e,t,n,o){if(!n.mobileHintsQuery)return;var i=e.pointers.data.getMobileHintsItem(m(n.mobileHintsQuery),o);n.mobileHints=r.serializeDataItem(e,d.mobileHints,i,!0),t&&n.mobileHints&&(n.mobileHints.id=m(n.mobileHintsQuery));delete n.mobileHintsQuery}(t,i.maintainIdentifiers,n,a),function(e,t,n,o){if(!n.layoutQuery)return;var i=e.pointers.data.getItem(d.layout,m(n.layoutQuery),o);n.layoutResponsive=r.convertNewLayoutToOld(r.serializeDataItem(e,d.layout,i,!0)),t&&n.layoutResponsive&&(n.layoutResponsive.id=m(n.layoutResponsive));delete n.layoutQuery}(t,i.maintainIdentifiers,n,a),A(t,i,n,a),T(t,i.maintainIdentifiers,n,a),function(e,t,n,o){if(n.behaviorQuery){var i=e.pointers.data.getBehaviorsItem(m(n.behaviorQuery),o);n.behaviors=r.serializeDataItem(e,d.behaviors,i,!0),t&&n.behaviors&&(n.behaviors.id=n.behaviorQuery),delete n.behaviorQuery}}(t,i.maintainIdentifiers,n,a),function(e,t,n,o){if(n.connectionQuery){var i=e.pointers.data.getConnectionsItem(m(n.connectionQuery),o);n.connections=r.serializeDataItem(e,d.connections,i,!0),t&&n.connections&&(n.connections.id=n.connectionQuery),delete n.connectionQuery}}(t,i.maintainIdentifiers,n,a),function(e,t,n,o){if(n.breakpointsQuery){var i=e.pointers.data.getBreakpointsDataItem(m(n.breakpointsQuery),o);n.breakpoints=r.serializeDataItem(e,d.breakpoints,i,!0),t&&n.breakpoints&&(n.breakpoints.id=n.breakpointsQuery),delete n.breakpointsQuery}}(t,i.maintainIdentifiers,n,a),e.get(n,"modes.overrides")&&function(t,n,o,r,i){e.forEach(n,(function(e){i(e),T(t,o.maintainIdentifiers,e,r),A(t,o,e,r),h(t,o.maintainIdentifiers,e,r)}))}(t,n.modes.overrides,i,a,s)}function I(e,t,n,o,i){var a=o||e.pointers.data.getDataItem(m(t),n);return r.serializeDataItem(e,d.data,a,!0,i)}function S(n,o,i,a,s,c){var u=r.createDataItemByType(n,"RepeatedData");return u.original=c(n,o,i,a),u.overrides=e.zipObject(s,e.map(s,(function(e){var r=t.displayedOnlyStructureUtil.getUniqueDisplayedId(o,e);return c(n,r,i)}))),u}function h(e,t,n,o){if(n.propertyQuery){var i=m(n.propertyQuery),a=e.pointers.data.getPropertyItem(i,o);n.props=r.serializeDataItem(e,d.prop,a,!t),t&&n.props&&(n.props.id=i),delete n.propertyQuery}}function P(e,t,n,o){var i=o||e.pointers.data.getDesignItem(m(t),n);return r.serializeDataItem(e,d.design,i,!0)}function A(t,n,o,r){var i=o.designQuery;if(i){var a=n.repeatedItemIds,s=e.isArray(a)&&a.length>0,c=t.pointers.data.getDesignItem(m(i),r);o.design=s?S(t,i,r,c,a,P):P(t,i,r,c),n.maintainIdentifiers&&o.design&&(o.design.id=m(i)),delete o.designQuery}}function T(e,t,n,o){if(n.styleId){var i=e.pointers.data.getThemeItem(n.styleId,o),a=e.dal.get(e.pointers.getInnerPointer(i,"type")),s=e.dal.get(e.pointers.getInnerPointer(i,"styleType"));"RefArray"===a||"custom"===s?(n.style=r.convertNewResponsiveStyleToOld(r.serializeDataItem(e,d.theme,i,!0)),t&&(n.style.id=n.styleId)):n.style=n.styleId,delete n.styleId}}return{serializeComponent:function(t,n,o,r,i,a,u,l){var d=p.replaceRuntimeRefWithOriginal(t,n),g=E(t,d,o,a,u=u||e.noop,{shouldAddMobilePresets:c.shouldCreateMobilePreset(t,d),ignoreChildren:r,maintainIdentifiers:i},l);return g&&(g.activeModes=function(t,n){var o={},r=t.pointers.full.components.getParent(n);for(;r;){var i=s.getComponentActiveModeIds(t,r);e.merge(o,i),r=t.pointers.full.components.getParent(r)}return o}(t,d)),g}}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h,P,A;e.exports=(o=n(0),r=n(26),i=n(15),a=n(50),s=n(430),c=n(432),u=n(119),l=n(54),p=n(94),d=n(95),g=n(434),f=n(93),m=n(439),v=n(440),E=n(1),y=n(6),I=n(2),S=n(441),h=n(118),P=n(442),A=n(120),{mobileConversion:function(e){var t=e.ps,n=e.heuristicStrategy||t.dal.get(t.pointers.general.getMobileConversionHeuristicStrategy()),T=d.getConversionSettings({conversionType:"FULL",heuristicStrategy:n});function _(e){var n=o.map(e.updatedPageIds,(function(e){return t.pointers.components.getPage(e,I.VIEW_MODES.MOBILE)}));o.forEach(n,o.partial(m.convertModes,t)),y.executeHook(y.HOOKS.MOBILE_CONVERSION.AFTER,null,[t,n,e.commitConversionResults]),e.commitConversionResults&&l.commitResults(t),o.forEach(e.updatedPageIds,(function(e){return t.siteAPI.createPageAnchors(e,{forceMobileStructure:!0,applyGroupingAnchors:!0})}))}function O(e,n,o){var r=t.pointers.components.getPage(n,I.VIEW_MODES.MOBILE),i=t.pointers.getInnerPointer(r,"mobileComponents");t.dal.full.set(i,e),p.updateHiddenComponentsOnPage(t,n),p.markPageAsInitialized(t,n),n===I.MASTER_PAGE_ID&&(v.applyDataToTinyMenu(t),v.addAdditionalStyles(t)),o&&_({updatedPageIds:[n],commitConversionResults:o.commitConversionResults})}function C(e,t){o.forEach(e,(function(e,t){return O(e,t)})),t&&_({updatedPageIds:o.keys(e),commitConversionResults:t.commitConversionResults})}function D(e,a){var l=o.values(r.conversionUtils.getAllCompsInStructure(e)).concat(r.conversionUtils.isMasterPage(e)?[]:[e]),p=!a;if(e.mobileComponents=[],o.forEach(l,(function(n){var o=a&&r.conversionUtils.getComponentByIdFromStructure(n.id,a)||n,s=c.modifyComponentProperties(t,n,e.id,{override:p}),u=t.pointers.data.getPropertyItem(i.stripHashIfExists(o.propertyQuery),e.id),l=!p&&u&&t.dal.isExist(u)?o.propertyQuery:n.propertyQuery;n.propertyQuery=o.propertyQuery=s||l,g.createConversionData(t,n,e.id)})),a){var f=o.filter(r.conversionUtils.getAllCompsInStructure(a),(function(e){return A.isMobileOnlyComponentToBeMockedInDesktop(e)}));o.forEach(f,(function(n){return g.createConversionDataForMobileOnlyComp(t,n,e.id)}))}return S.reduceAllTextsData(t,l,e.id),function(e,i){return u.applyPresetsToConversionData(t,e,i.id),o.forEach(e,(function(e){var a=o.get(e,["conversionData","preset"]);if(a){var u=Math.random()<.1;a.conversionData.isCustomPreset&&u&&t.siteAPI.reportBI(s.events.CUSTOM_MOBILE_PRESET_APPLIED,{componentId:e.id,pageId:i.id});var l=d.getConversionSettings({conversionType:"MERGE_PRESET",heuristicStrategy:n});c.createPropertiesAccordingToPreset(t,a,i.id),r.conversion.mergeDesktopStructureWithMobile(e,a,l),o.set(e,["conversionData","preset"],a)}else o.has(e,["conversionData","mobileProps"])&&c.createPropertiesAccordingToConversionData(t,e,i.id)})),i}(l,o.set(e,"conversionData",o.get(e,"conversionData",{})))}function w(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=o.get(l.getAggregatedPages(t),"desktop");C(o.mapValues(n,(function(e){var t=D(E.objectUtils.cloneDeep(e)),n=P.extractNonLayoutComponentsFromPages(e,t),o=r.conversion.convertDesktopPageToMobile(t,r.conversionUtils.getChildren(t),T);return P.insertNonLayoutComponentsToPage(t,n),o})),{commitConversionResults:e})}var M=function(e,t){var n=o.get(e,I.MASTER_PAGE_ID,null);if(!n)return!1;var i=o.get(t,I.MASTER_PAGE_ID,null);if(!i)return!0;var a=r.conversionUtils.getChildren(n),s=r.conversionUtils.getChildren(i),c={id:"SOSP_CONTAINER_CUSTOM_ID"};return o.some(a,c)&&!o.some(s,c)};return{getComponentsOrder:function(e){var n=d.getConversionSettings({heuristicStrategy:"accessibility",conversionType:"FULL"}),i=function(e){return o.get(e,["conversionData","componentsOrder"],function(e){return o.map(e.components,"id")}(e))},a=t.pointers.page.getComponentsMapPointer(e,I.VIEW_MODES.DESKTOP),s=t.dal.get(a,!0),c=E.mobileUtils.buildDeepStructure(s[e],s);!function(e){e.mobileComponents=[];var n=o.values(r.conversionUtils.getAllCompsInStructure(e)).concat(r.conversionUtils.isMasterPage(e)?[]:[e]);o.forEach(n,(function(n){g.createConversionData(t,n,e.id)}))}(c),r.conversion.inspectStructure(c,r.conversionUtils.getChildren(c),n);var u=r.conversionUtils.getAllCompsInStructure(c),l=function(e){return"RESCALE_VIRTUAL_GROUP"===u[e].componentType};return o.reduce(u,(function(e,t){if(!o.has(t,"components")||l(t.id))return e;var n=o.reduce(i(t),(function(e,t){return e.concat(l(t)?i(u[t]):[t])}),[]);return o.set(e,t.id,n)}),{})},inspect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=t.dal.get(t.pointers.page.getAllPagesPointer()),i=o.mapValues(n,(function(e,n){return t.dal.get(t.pointers.page.getPagePointer(n))}));return o.transform(i,(function(t,n,i){var a=n.structure.DESKTOP,s=E.mobileUtils.buildDeepStructure(a[i],a);D(s),r.conversion.inspectStructure(s,r.conversionUtils.getChildren(s),e);var c=o.transform(r.conversionUtils.getAllCompsInStructure(s),(function(e,t){return o.isEmpty(o.get(t,["conversionData","componentsOrder"]))||(e[t.id]=t.conversionData.componentsOrder),e}),{});return t.reducedPages.push(s),t.componentsOrder.push(c),t}),{reducedPages:[],componentsOrder:[]})},executeConversion:function(e){return r.conversion.convertDesktopPageToMobile(e,r.conversionUtils.getChildren(e),T)},runMobileMergeOnAllPages:function(e){var i,s;if(E.loggingUtils.performance.start(E.loggingUtils.performanceMetrics.MOBILE.MERGE_ALL_PAGES),i=I.VIEW_MODES.DESKTOP,s=t.pointers.components,o.every([s.getFooter(i),s.getHeader(i),s.getPagesContainer(i)],t.dal.isExist))if(f.hasMobileStructure(t)){y.executeHook(y.HOOKS.MOBILE_MERGE.BEFORE,null,[t]);var c=l.getAggregatedPages(t);if(!o.isEmpty(c)){var u=c.desktop,p=c.mobile;!function(e,t){var n=o.difference(o.keys(e),o.keys(t));o.forEach(n,(function(n){var o=e[n],i=E.objectUtils.cloneDeep(o);t[n]=i,D(i);var a=P.extractNonLayoutComponentsFromPages(o,i);r.conversion.convertDesktopPageToMobile(i,[],T),P.insertNonLayoutComponentsToPage(i,a)}))}(u,p);var g={};o.forOwn(u,(function(e,t){var n=p[t];D(e,n),g[t]=P.extractNonLayoutComponentsFromPages(e,n),A.handleComponentsBeforeMobileAlgo(e,n)}));var m=d.getConversionSettings({conversionType:"MERGE_ALL_PAGES",heuristicStrategy:n});m.fixMasterPageStructureOrder=M(u,p);var v=r.conversion.mergeDesktopPagesWithMobile(u,p,m);o.forOwn(u,(function(e,t){var n=p[t];P.insertNonLayoutComponentsToPage(n,g[t]),A.handleComponentsAfterMobileAlgo(e,n)})),C(v,{commitConversionResults:e}),E.loggingUtils.performance.finish(E.loggingUtils.performanceMetrics.MOBILE.MERGE_ALL_PAGES)}}else w(e);else t.siteAPI.reportBI(a.MOBILE_STRUCTURE_NOT_SAVED_DUE_TO_CORRUPTION)},runMobileMergeOnPage:function(e,t,n){D(e,t);var o=P.extractNonLayoutComponentsFromPages(e,t);A.handleComponentsBeforeMobileAlgo(e,t);var i=r.conversion.mergeDesktopStructureWithMobile(e,t,n);P.insertNonLayoutComponentsToPage(t,o),A.handleComponentsAfterMobileAlgo(e,t),O(i,e.id,{commitConversionResults:!1})},runMobileConversionOnPage:function(e){E.loggingUtils.performance.start(E.loggingUtils.performanceMetrics.MOBILE.CONVERT_PAGE);var t=E.objectUtils.cloneDeep(e);D(t);var n=P.extractNonLayoutComponentsFromPages(e,t),o=r.conversionUtils.getChildren(t),i=r.conversion.convertDesktopPageToMobile(t,o,T);P.insertNonLayoutComponentsToPage(t,n),O(i,e.id,{commitConversionResults:!1}),E.loggingUtils.performance.finish(E.loggingUtils.performanceMetrics.MOBILE.CONVERT_PAGE)},runMobileConversionOnAllPages:w,syncMobileSite:function(){var e=l.getAggregatedPages(t);if(!o.isEmpty(e)){var n=o.difference(o.keys(e.desktop),o.keys(e.mobile));o.forEach(n,(function(t){var n=E.objectUtils.cloneDeep(e.desktop[t]);e.mobile[t]=n})),h.validateMobileHintsOnPages(t,o.keys(e.desktop));var i={};o.forOwn(e.desktop,(function(t,n){var o=e.mobile[n];D(t,o),i[n]=P.extractNonLayoutComponentsFromPages(t,o),A.handleComponentsBeforeMobileAlgo(t,o)}));var a=r.conversion.synchronizePages(e.desktop,e.mobile);o.forOwn(e.desktop,(function(t,n){var o=e.mobile[n];P.insertNonLayoutComponentsToPage(o,i[n]),A.handleComponentsAfterMobileAlgo(t,o)})),C(a,{commitConversionResults:!0})}},applyConvertedComponentsMap:C,applyConvertedComponentsToPage:O,prepareConversion:D}}})},function(e,t,n){e.exports={events:n(431).events}},function(e){e.exports=JSON.parse('{"CUSTOM_MOBILE_PRESET_APPLIED":{"endpoint":"editor","eventId":664,"src":38,"params":{"component_id":"componentId","page_id":"pageId"}}}')},function(e,t,n){e.exports=function(){var e=n(0),t=n(15),o=n(2),r=n(8),i=n(3),a=function(t,n){return e.get(i.getMobileHintsItem(t,n),"hidden",!1)};function s(n,o,r){var a=e.get(o,["conversionData","mobileProps"],{});if(e.isEmpty(a))return!1;var s=i.generateNewPropertiesItemId(),c=n.pointers.data.getPropertyItem(t.stripHashIfExists(s),r),u=e.set(a,"id",s);return n.dal.set(c,u),o.propertyQuery=s,!0}return{modifyComponentProperties:function(n,i,s,c){var u=i.propertyQuery,l=i.componentType;if(!u||!l)return null;var p=n.pointers.data.getPropertyItem(t.stripHashIfExists(u),s);if(!p)return null;var d=n.pointers.components.getPage(s,o.VIEW_MODES.DESKTOP),g=n.pointers.components.getComponent(i.id,d);if(a(n,g))return null;var f=n.dal.get(p);if(!f)return null;var m=r.public.getDefaultMobileProperties(n,i,f);if(!m)return null;var v=function(n){var r=t.stripHashIfExists(n);return(e.startsWith(r,o.DOM_ID_PREFIX.MOBILE)?"":o.DOM_ID_PREFIX.MOBILE)+r}(u),E=n.pointers.data.getPropertyItem(t.stripHashIfExists(v),s),y=n.dal.get(E)||{};return e.get(y,"metaData.autoGenerated",!0)||c.override?(e.mergeWith(y,f,{metaData:{autoGenerated:!0}},m,(function(t,n){if(e.isArray(n)&&e.isArray(t))return n})),y.id=v,n.dal.set(E,y),v):v},createPropertiesAccordingToPreset:function t(n,o,r){s(n,o,r)&&delete o.conversionData.mobileProps,o.components&&e.forEach(o.components,(function(e){return t(n,e,r)}))},createPropertiesAccordingToConversionData:s}}()},function(e,t,n){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e,t=n(0),i=n(6),a=n(54),s=n(26),c=n(1),u=n(3),l=n(2),p=n(29),d=n(92),g={STUDIO:"studio",DUPLICATE:"duplicate"},f={nestOverlayingSiblings:!1,keepIfVerticalDivider:!1,isSuitableForProportionGrouping:!1,hideByDefault:!1},m={GENERAL_HINTS_PROPERTIES:["id","metaData","type"],GENERAL_PRESET_DATA:["author"],SIZE_DATA:["recommendedHeight","recommendedWidth","recommendedScale","originalCompId"],OFFSET_DATA:["offsetX","offsetY","offsetOrigin","orderIndex"]},v=function(e,t,n){return e.pointers.components.getPage(t,n||l.VIEW_MODES.DESKTOP)},E=function(e){return function(e){return e&&t.some(m.SIZE_DATA,(function(n){return t.has(e,n)}))}(e)||function(e){return e&&t.some(m.OFFSET_DATA,(function(n){return t.has(e,n)}))}(e)},y=function(e,n,o){return t.get(u.getMobileHintsItemById(e,o.mobileHintsQuery,n),"orderIndex")};function I(e,n,o){var r=t.set({},o,p.getMobileActiveModesMap(e,o)),i=e.dal.full.get(n);return c.fullToDisplayedJson.getDisplayedJson(i,r,o).structure}function S(e,n){var o=e.pointers.components.getPageOfComponent(n),r=I(e,n,o.id);if(t.get(r,"mobileStructure")){var i=s.mobileHints.parseMobilePreset(r);!function(e,n,o){t.forEach(n,(function(n,r){var i=e.pointers.components.getComponent(r,o),a=I(e,i,o.id);t.has(a,["mobileStructure","props"])&&(n.props=a.mobileStructure.props),u.updateMobileHintsItem(e,i,n)}))}(e,i,o),function(e,n,o){t.forEach(n,(function(t){var n=e.pointers.full.components.getComponent(t,o),r=e.pointers.getInnerPointer(n,"mobileStructure");e.dal.full.remove(r)}))}(e,t.keys(i),o)}else{var a=e.pointers.components.getChildren(n);t.forEach(a,(function(t){return S(e,t)}))}}function h(e,n){var o=e.pointers.components.getChildren(n);t.forEach(o,h.bind(null,e));var r=u.getMobileHintsItem(e,n);t.get(r,"author")===g.DUPLICATE&&u.deleteMobileHintsItem(e,n)}function P(e,t,n){var o=e.pointers.components.getComponent(t,v(e,n,l.VIEW_MODES.MOBILE));if(!o||!e.dal.isExist(o))return null;if(!d.isMobileComponentPropertiesSplit(e,o))return null;var r=u.getPropertyItemPointer(e,o);return r&&e.dal.isExist(r)?e.dal.get(r):null}function A(e,n,o){if(!e.pointers.components.isMobile(n)){var i=u.getMobileHintsItem(e,n);if(E(i)){var a=t.omit(i,[].concat(r(o),r(m.GENERAL_HINTS_PROPERTIES)));u.deleteMobileHintsItem(e,n),t.isEmpty(a)||u.updateMobileHintsItem(e,n,a)}}}function T(e,n){var o=t.concat(m.OFFSET_DATA,m.SIZE_DATA,m.GENERAL_PRESET_DATA);A(e,n,o);var r=e.pointers.components.getChildren(n);t.forEach(r,(function(t){return T(e,t)}))}function _(e,t){A(e,t,m.OFFSET_DATA)}function O(e,n){var o=e.pointers.components.getChildren(n);t.forEach(o,(function(t){return _(e,t)})),C(e,n)}function C(e,t){A(e,t,["recommendedHeight"]);var n=e.pointers.components.getParent(t);n&&!e.pointers.components.isPage(n)&&C(e,n)}var D=(o(e={},i.HOOKS.CHANGE_PARENT.BEFORE,(function(e,t,n){if(!e.pointers.components.isMobile(t)){T(e,t),O(e,n);var o=e.pointers.components.getParent(t);O(e,o)}})),o(e,i.HOOKS.ADD_ROOT.BEFORE,(function(e,t,n){e.pointers.components.isMobile(t)||e.pointers.components.isPage(t)||(O(e,n),_(e,t),e.pointers.components.isPage(n)||T(e,t))})),o(e,i.HOOKS.REMOVE.BEFORE,(function(e,t,n){if(!(e.pointers.components.isMobile(t)||e.pointers.components.isPage(t)||n)){var o=e.pointers.components.getParent(t);O(e,o)}})),e);function w(e,n,o){return t.isEmpty(n)||t.every(n,(function(n){return t.isNumber(y(e,o,n))}))?t(n).reject(["conversionData.mobileHints.hidden",!0]).sortBy((function(t){return y(e,o,t)})).map("id").value():null}return{createDuplicateMobilePreset:function(e,n,o,r){var i=e.pointers.components.getMobilePointer(o);if(n&&i&&e.dal.isExist(i)){var s=e.siteAPI.isQaMode(),u=a.getCommittedMobileComponent(e,n,i);if(u&&(s||!E(r.mobileHints))){var l=P(e,i.id,n);t.set(r,"mobileStructure",{layout:c.objectUtils.cloneDeep(u.layout),props:l?t.omit(l,"id"):void 0,metaData:{originalCompId:i.id,author:g.DUPLICATE}})}}},removeAutomaticPresets:h,initialize:function(){i.registerHook(i.HOOKS.ADD_ROOT.AFTER,S),t.forEach(D,(function(e,t){return i.registerHook(t,e)})),i.registerHook(i.HOOKS.MOBILE_CONVERSION.AFTER,(function(e,n,o){o&&t.forEach(n,(function(t){return h(e,e.pointers.components.getPage(t.id,l.VIEW_MODES.DESKTOP))}))}))},applyPresetsToConversionData:function e(n,o,r){t.forEach(o,(function(o){var i=u.getMobileHintsItemById(n,o.mobileHintsQuery,r);if(e(n,o.components,r),E(i)){var a=P(n,i.originalCompId,r);t.assign(o.conversionData,{mobileScale:i.recommendedScale||o.conversionData.mobileScale,mobileProps:a||i.props||o.conversionData.mobileProps},f),t.assign(o.conversionData.mobileHints,t.pick(i,["recommendedHeight","recommendedWidth","offsetX","offsetY","offsetOrigin"]),{recommendedComponentsOrder:w(n,o.components,r)})}}))},testAPI:{getRecommendedComponentsOrder:w,handleMobileStructure:S,getMobilePropsIfForked:P,removePresetData:A,removeAllPresetDataRecursively:T,removeOffsetDataOfChildren:O,removeHeightOfParent:C}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(26),o=n(12),r=n(15),i=n(10),a=n(8),s=n(3),c=n(9),u=n(435);function l(e,t){var n=t.styleId;return n?i.styles.get(e,n):null}function p(t,n,o){return e.get(n.designQuery&&s.getDesignItemById(t,n.designQuery.replace("#",""),o),"background")}function d(t,n,o){var r=e.get(n,"mobileHintsQuery","");return e.get(r?s.getMobileHintsItemById(t,r,o):{},"hidden",!1)}function g(t,n,o){return e.has(p(t,n,o),"mediaRef")}function f(t,n){var o=e.get(t,"conversionData",{}),r=e.assign(o,n);e.assign(t,{conversionData:e.omitBy(r,e.isNull)})}return{createConversionData:function(n,i,s){var m=a.public.getMobileConversionConfig(n,i,s),v=e.assign({},e.clone(i),{conversionData:m}),E={},y=function(t,n){return+(""+e.get(l(t,n),["style","properties","brw"],"0")).match(/\d/g).join("")}(n,i);E.borderWidth=y||null,E.isSolidColorBackground=function(t,n,o){return"columns"===e.get(n,["conversionData","category"])?1===e.size(n.components)&&!g(t,n.components[0],o):("column"===e.get(n,["conversionData","category"])||"wysiwyg.viewer.components.StripContainer"===n.componentType)&&!g(t,n,o)}(n,v,s)||null;var I=function(t,n,o,r){if(r||"column"===e.get(n,["conversionData","category"]))return+e.get(p(t,n,o),"colorOpacity",1);if("mobile.core.components.Container"!==n.componentType)return 1;var i=l(t,n),a=e.get(i,"skin");return"wysiwyg.viewer.skins.area.RectangleArea"!==a&&"wysiwyg.viewer.skins.area.DefaultAreaSkin"!==a?1:+e.get(i,["style","properties","alpha-bg"],1)}(n,v,s,E.isSolidColorBackground);E.isSemiTransparentContainer=I<1,E.isTransparentContainer=!y&&0===I,E.backgroundColor=function(t,n,o){var r=n.designQuery?e.get(p(t,n,o),"color",null):e.get(l(t,n),["style","properties","bg"],null);return r?r.replace(/[{}]/g,""):null}(n,i,s),E.shouldApplyPreset=function(t,n,i){var a=e.get(n,["modes","definitions"]);if(e.isEmpty(a))return!0;var s=t.pointers.data.getPropertyItem(r.stripHashIfExists(n.propertyQuery),i);if(!s)return!0;var c=t.dal.get(s)||{},u=c.mobileDisplayedModeId&&e.find(a,"modeId",c.mobileDisplayedModeId);return e.get(u,"type")!==o.siteConstants.COMP_MODES_TYPES.DEFAULT}(n,i,s),E.mobileHints={hidden:d(n,i,s)};var S=u.getComponentSpecificConversionData(n,i,s);e.assign(E,S);var h=n.dal.get(n.pointers.general.getDockedRuntimeLayout());e.has(i,["layout","docked"])&&h[i.id]&&e.assign(i.layout.docked,h[i.id]),E.isScreenWidth=E.isScreenWidth||o.dockUtils.isHorizontalDockToScreen(i.layout)||o.dockUtils.isFullPageComponent(i.layout)||null,E.isNonContainableFullWidth=c.isNonContainableFullWidth(i.componentType),e.assign(E,m),f(i,E),function(n){e.defaults(n,{layout:{}}),delete n.layout.anchors,t.conversionUtils.isSiteSegmentOrPage(n)||t.conversionUtils.isMasterPage(n)?e.assign(n.layout,{fixedPosition:!1}):e.defaults(n.layout,{height:e.get(n,["conversionData","layoutLimits","minHeight"]),width:e.get(n,["conversionData","layoutLimits","minWidth"])},{height:o.siteConstants.COMP_SIZE.MIN_HEIGHT,width:o.siteConstants.COMP_SIZE.MIN_WIDTH,x:t.conversionConfig.COMPONENT_MOBILE_MARGIN_X,y:t.conversionConfig.COMPONENT_MOBILE_MARGIN_Y})}(i)},createConversionDataForMobileOnlyComp:function(e,t,n){f(t,a.public.getMobileConversionConfig(e,t,n)||{})}}}()},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(436),i=n(437),a=function(e,t){return i.getVectorImageConversionData(t)},s={"wysiwyg.viewer.components.SiteButton":r.getButtonConversionData,"wysiwyg.viewer.components.VectorImage":a,"wysiwyg.viewer.components.WPhoto":a,"wysiwyg.viewer.components.ClipArt":a},{getComponentSpecificConversionData:function(e,t,n){return o.get(s,t.componentType,o.noop)(e,t,n)||null}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g;e.exports=(o=n(0),r=n(26),i=n(1),a=n(10),s=14,c=10,u=24,l={breakPoints:[16,19,24],value:[42,48,54]},p={breakPoints:[7,14,20,30,100],value:[120,160,200,240,280]},d=function(e,t){var n=t.breakPoints,r=Math.min(e,o.last(n)),i=o.findIndex(n,(function(e){return r<=e}));return t.value[i]},g=function(e,t){return{height:d(e,l),width:d(t,p)}},{getButtonConversionData:function(e,t,n){var l=function(e,t,n){if(!t)return s;var r=a.styles.get(e,t,n),i=o.get(r,["style","properties","fnt"],""),c=o.get(i.match(/\d+px/),"0","".concat(s," + 'px'"));return+o.get(c.match(/\d+/),"0",s)}(e,t.styleId,n),p=function(e,t,n){if(!t)return c;var r=e.pointers.data.getDataItem(t.replace("#",""),n);return o.get(e.dal.get(r),"label","").length||c}(e,t.dataQuery,n),d=Math.min(r.textUtils.convertFontSizeByTextLength(l,p),u),f={};return f.fixedSize=g(d,p),f.mobileScale=function(e,t){return e/i.mobileUtils.convertFontSizeToMobile(t,1)}(d,l),f}})},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(0),r=n(438),i={upToSize:60,convert:r.roundToNearestDecade},a={upToSize:400,convert:r.scaleByFactor,paramsForConvert:[r.buildScaleFactorDataStructure(.7,60,r.roundToNearestDecade)]},s={upToSize:980,convert:o.constant(280)},c=function(e,t){var n=[r.buildRangeDataStructure(i.upToSize,i.convert),r.buildRangeDataStructure(a.upToSize,a.convert,a.paramsForConvert),r.buildRangeDataStructure(s.upToSize,s.convert)],o=r.scaleByRange(e,n);return{width:o,height:r.scaleProportionally(t,o,e)}},{getVectorImageConversionData:function(e){var t=o.get(e,["layout","width"],0),n=o.get(e,["layout","height"],0);return{fixedSize:c(t,n)}}})},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r;e.exports=(r=n(0),{roundToNearestDecade:function(e){return 10*Math.round(e/10)},buildRangeDataStructure:function(e,t,n){return{upToValue:e,valueHandler:t,additionalParamsForHandler:n||[]}},buildScaleFactorDataStructure:function(e,t,n){return{scaleFactor:e,minValueLimit:t,roundFunction:n||Math.round}},scaleByRange:function(e,t){var n=Math.min(e,r.last(t).upToValue),i=r.find(t,(function(e){return n<=e.upToValue})),a=i.valueHandler;return r.isFunction(a)?a.apply(void 0,[e].concat(o(i.additionalParamsForHandler))):a},scaleByFactor:function(e,t){var n=e*t.scaleFactor,o=t.roundFunction(n);return Math.max(t.minValueLimit,o)},scaleProportionally:function(e,t,n){var o=t&&n?t/n:1;return Math.round(e*o)}})},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(29),{convertModes:function(e,t){var n=e.pointers.components.getDesktopPointer(t),i=e.pointers.full.components.getChildrenRecursively(n),a=o(n).concat(i).flatMap((function(t){return r.getComponentModes(e,t)})).compact().filter((function(e){return"copyOverrides"===o.get(r.metaData,[e.type,"mobileConversionConfig"])})).map("modeId").value();if(!o.isEmpty(a)){var s=e.pointers.full.components.getChildrenRecursively(t);o.forEach(s,(function(t){var n=e.pointers.components.getDesktopPointer(t),r=e.dal.full.get(e.pointers.componentStructure.getModes(n));if(r){var i=o(r.overrides).map((function(e){return o.defaults({modeIds:o.intersection(e.modeIds,a)},e)})).filter((function(e){return o.size(e.modeIds)})).value();o.isEmpty(i)||e.dal.full.set(e.pointers.componentStructure.getModes(t),o.defaults({overrides:i},r))}}))}}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d;e.exports=(o=n(0),r=n(3),i=n(19),a=n(2),s=n(10),c=n(26),u="loginSocialBarRef",l="TinyMenu",p="TINY_MENU",d=function(e,t){return"wysiwyg.viewer.components.LoginSocialBar"===e.dal.get(e.pointers.getInnerPointer(t,"componentType"))},{applyDataToTinyMenu:function(e){var t=e.pointers.components.getPage(a.MASTER_PAGE_ID,a.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.TINY_MENU,t);if(n&&e.dal.isExist(n)){!function(e,t){var n=e.pointers.data.getDataItemFromMaster("TINY_MENU");if(!e.dal.isExist(n)){var a=e.pointers.getInnerPointer(t,"dataQuery");e.dal.set(a,"#".concat(p));var s=i.services.createDataItemByType(l),c=o.assign({id:p},s);r.setDataItemByPointer(e,n,c,"data")}}(e,n),function(e,t){var n=e.pointers.getInnerPointer(t,"connectionQuery");e.dal.isExist(n)||(e.dal.set(n,"TINY_MENU_CONNECTION"),r.updateConnectionsItem(e,t,[]))}(e,n);var s=function(e){var t=e.pointers.components.getHeader(a.VIEW_MODES.DESKTOP),n=e.pointers.components.getChildrenRecursively(t),r=e.pointers.components.getPage(a.MASTER_PAGE_ID,a.VIEW_MODES.DESKTOP),i=e.pointers.components.getChildrenRecursively(r),s=o.unionBy(n,i,(function(e){return e.id}));return o.find(s,(function(t){return d(e,t)}))}(e),c=e.pointers.getInnerPointer(e.pointers.data.getDataItemFromMaster("TINY_MENU"),u),g=r.getConnectionsItem(e,n),f=r.getPlatformAppConnections(e,n),m=o.reject(g,(function(e){var t=e.type,n=e.role;return o.find(f,{type:t,role:n})}));if(s){var v=e.dal.get(e.pointers.getInnerPointer(s,"dataQuery"));e.dal.set(c,v);var E=r.getPlatformAppConnections(e,s),y=o.union(m,E);r.updateConnectionsItem(e,n,y)}else e.dal.isExist(c)&&(e.dal.remove(c),r.updateConnectionsItem(e,n,m))}},addAdditionalStyles:function(e){o.forOwn(c.mobileOnlyComponents.getAdditionalStyles(),(function(t,n){if(!s.styles.get(e,n)){var r=o.assign({type:"TopLevelStyle",styleType:"system",id:n,metaData:{isHidden:!1,isPreset:!1}},t);s.styles.createAndAddStyleItem(e,r,n)}}))}})},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(10),t=n(0),r=n(3),i=n(26),a=n(1);function s(n,o){if(t.isEmpty(o))return null;if(/^#\w{3,6}$/.test(o))return o;var r=t.get(o.match(/^\{(color_\d+)\}$/),1,"");return r?e.colors.get(n,r):null}var c=function(e){return/^color_\d+$/.test(e)},u=function(e){return/^font_\d{1,10}$/.test(e)},l=function(e){return t.pickBy(e,t.identity)};function p(n,o){if(c(o))return l({textColor:e.colors.get(n,o)});if(!u(o))return{};var r=e.fonts.get(n,o),i=/^\w+\s\w+\s\w+\s(-?\d+(?:\.\d+)?)px\/[\w\-.]*\s('[^']*'|[\w#$%&'()*+,.:;?@^_`~-]*)\s({\w+}|#\w{3,6})?$/.exec(r),a=s(n,t.get(i,3,""));return l({fontSize:+t.get(i,1,0),fontName:t.get(i,2),textColor:a})}function d(e){return t.size(e)?(e=" ".concat(e),l({fontSize:+t.get(e.match(/font-size:\s?(\d+(\.\d+)?)px/i),1,0),textAlignment:t.get(e.match(/text-align:\s?(left|right|center)/i),1),textColor:t.get(e.match(/[^-]color:\s*(#[\da-f]{3,6}|[a-z]{3,20})/i),1)})):{}}function g(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{fontSize:0,fontName:"",textAlignment:"left",textColor:""},a={textLength:0,accumulatedFontSize:0,accumulatedNormalizedFontSize:0,textAlignments:[],textColors:[],fontNames:[]};if(t.get(n,"nodeType")===n.TEXT_NODE){var s=n.textContent.trim().length;return t.assign({textLength:s,accumulatedFontSize:s*r.fontSize,accumulatedNormalizedFontSize:s*i.textUtils.getFontSizeByFontName(r.fontName,r.fontSize)},s>0?{textAlignments:[r.textAlignment],fontNames:[r.fontName],textColors:[r.textColor]}:{textAlignments:[],textColors:[],fontNames:[]})}if(!n||!t.size(n.childNodes))return a;var c={};if(n.nodeType===n.ELEMENT_NODE){var u=n.getAttribute("class"),l=n.getAttribute("style");t.defaults(c,d(l),p(e,u))}return t.defaults(c,r),t.reduce(n.childNodes,(function(t,n){var r=g(e,n,c);return{fontNames:[].concat(o(t.fontNames),o(r.fontNames)),textColors:[].concat(o(t.textColors),o(r.textColors)),textAlignments:[].concat(o(t.textAlignments),o(r.textAlignments)),textLength:t.textLength+r.textLength,accumulatedFontSize:t.accumulatedFontSize+r.accumulatedFontSize,accumulatedNormalizedFontSize:t.accumulatedNormalizedFontSize+r.accumulatedNormalizedFontSize}}),a)}function f(e,n){var o=g(e,n),r=o.textLength,s=o.accumulatedNormalizedFontSize/r,c=function(e,t){return i.textUtils.convertFontSizeByTextLength(e,t)/a.mobileUtils.convertFontSizeToMobile(e,1)}(s,r),u=o.accumulatedFontSize/o.textLength,l=a.mobileUtils.convertFontSizeToMobile(u||0,1);return{fontNames:t.uniq(o.fontNames),textLength:r,actualTextWidth:"undefined"!=typeof window?n.clientWidth+1:void 0,textAlignments:t.uniq(o.textAlignments),textColors:t.uniq(o.textColors),averageFontSize:u,mobileAdjustedAverageFontSize:l,averageNormalizedFontSize:s,mobileScale:c}}return{reduceAllTextsData:function(e,n,o){var s=a.fragment.document.createElement("DIV"),c=t(n).filter(i.conversionUtils.isTextComponent).map((function(n){return function(e,n,o,i){var s=a.fragment.document.createElement("DIV");return s.innerHTML=n.dataQuery?t.get(r.getDataItemById(e,n.dataQuery.replace("#",""),o),"text",""):"",s.setAttribute("style","opacity: 0; max-width: none !important; white-space: nowrap; position: absolute"),i.appendChild(s),{htmlElement:s,component:n}}(e,n,o,s)})).value();window.document.body.appendChild(s),t.forEach(c,(function(n){return t.assign(n.component.conversionData,f(e,n.htmlElement))})),window.document.body.removeChild(s)},testAPI:{getTextColorValue:s,getFontDataByClassName:p,getFontDataByStyleAttribute:d,getAccumulatedTextStats:g}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(26);function o(n){var i=t.conversionUtils.getChildren(n),a=e.remove(i,r);return e.concat(a,e.flatMap(i,o))}function r(t){var n=e.get(t,["conversionData","desktopOnly"],!1),o=e.get(t,["conversionData","nonLayoutComponent"],!1);return!n&&o}return{extractNonLayoutComponentsFromPages:function(n,r){var i=o(n);return r&&!e.isEmpty(i)&&function n(o,r){var i=t.conversionUtils.getChildren(o);e.remove(i,(function(t){return e.some(r,["id",t.id])})),e.forEach(i,(function(e){return n(e,r)}))}(r,i),i},insertNonLayoutComponentsToPage:function(n,o){var r,i;!function(n,o){e.forEach(o,(function(t){return e.assign(t.layout,{width:0,height:0,x:0,y:0})})),t.conversionUtils.addComponentsTo(n,o)}((r=n,1===(i=t.conversionUtils.getChildren(r)).length&&"wysiwyg.viewer.components.PopupContainer"===i[0].componentType?i[0]:r),o)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(114),o=n(4),r=n(8),i=n(11);function a(n,o,i){return e.includes(t.getMatchingChildSlideType(o),r.getComponentType(n,i))}function s(t,n,r){return e.reject(o.getChildren(t,n),a.bind(null,t,r))}function c(t,n,r){return e.filter(o.getChildren(t,n),a.bind(null,t,r))}function u(t,n){var i=r.getComponentType(t,n),a=e.find(c(t,n,i),(function(e){return o.isRenderedOnSite(t,e)})),u=s(t,n,i);return a?[a].concat(u):u}function l(e,t,n){if(e.pointers.components.isPage(t))return null;for(var i=o.getContainer(e,t);i&&!e.pointers.components.isPage(i);){if(r.getComponentType(e,i)===n)return i;i=o.getContainer(e,i)}return null}function p(e,n,o){var i=r.getComponentType(e,n),a=t.getMatchingChildSlideType(o);return"MOBILE"!==n.type&&i!==a&&!!l(e,n,o)}return{getMasterChildren:s,getNonMasterChildren:c,getCurrentRenderedChildren:u,isMasterChild:function(e,n,o){var r=t.getMatchingChildSlideType(o);return p(e,n,o)&&!l(e,n,r)},canBeMasterChild:p,toggleMasterChild:function(n,o,a){var s,c=l(n,o,a),p=t.getMatchingChildSlideType(a);c&&r.getComponentType(n,o)!==p&&(s=l(n,o,p)?c:e.find(u(n,c),(function(e){return r.getComponentType(n,e)===p})),i.setContainer(n,void 0,o,s))},getParentCompWithOverflowHidden:function(e,t,n){var r=l(e,t,n);return o.properties.get(e,r).shouldHideOverflowContent?r:null}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(3),i=n(1),{setLinksCustomData:function(e,t,n){var i=r.getDataItem(e,t);return o.has(i,"linkList")&&i.linkList.length>0&&(n.linkList=i.linkList),{success:!0,description:"Added text links to the custom component structure"}},duplicateLinksDataItems:function(e,t,n){if(!n.custom)return{success:!0,description:"Duplicated text links data items"};var a=o.cloneDeep(n.custom.linkList),s=n.data.text;return o.forEach(a,(function(e){if(e.id){var t=i.guidUtils.getUniqueId("link","-");s=s.replace("#".concat(e.id),"#".concat(t)),e.id=t}})),function(e,t,n,o){var i=r.getDataItem(e,t);i.text=n,i.linkList=o,r.updateDataItem(e,t,i)}(e,t,s,a),{success:!0,description:"Duplicated text links data items"}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(70),o=n(178),r=n(4),i=n(28);function a(t,n){var o=r.data.get(t,n);return e.get(t.siteAPI.getClientSpecMap(),[o.applicationId,"appDefinitionId"])===i.APP_DEF_ID.CHAT}return{addedGluedWidget:function(e,n){a(e,n)&&!function(e){return o.isEnabled(e)}(e)&&t.addQuickActionBar(e)},willRemoveGluedWidget:function(n,o){a(n,o)&&e(t.getActions(n)).reject("isDynamic").isEmpty()&&t.removeQuickActionBar(n)}}}()},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(70),i=n(97),a=n(20),s=n(3),{enforceIconLimitations:function(e,t,n){var c=o.defaults({},n,s.getDataItem(e,t));r.validateActionItemData(c),o.assign(n,o.pick(c,["itemType","icon","text"]));var u=o.find(i.quickActionIconsData,{hash:c.icon}),l=a.style.get(e,t);l.style.properties.color=u.color,a.style.update(e,t,l)}})},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(1),(i=function(e){this.url=r.urlUtils.parseUrl(e),this.url.query={}}).prototype={addLangParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.lang=e),this},addOriginParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.eo=window.btoa(e)),this},addDevAppParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.appDefinitionId=e),this},addCompIdParam:function(){return this.url.query.compId="MarketPanel",this},addAppMarketTests:function(e){return e&&!o.isEmpty(e)&&(this.url.query.experiment=e),this},addMetaSiteIdParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.metaSiteId=e),this},addModalParams:function(e,t,n){return e&&(this.url.path+="/".concat(e,"/").concat(t,"/"),n&&(this.url.path+="".concat(n,"/"))),this},addSiteIdParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.siteId=e),this},addTagsParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.query=e),this},addOpenAppParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.openAppDefId=e),this},addAppMarketParams:function(e){return e&&(this.url.query.appMarketParams=e),this},addNewWixStores:function(e){return o.isUndefined(e)||(this.url.query.newWixStores="".concat(e)),this},addCategoryParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.categorySlug=e),this},addBiReferralInfoParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.referralInfo=e),this},addBiReferralInfoCategoryParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.referralInfoCategory=e),this},addBiSectionParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.section=e),this},addAddingMethodParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.addingMethod=e),this},addStateParam:function(e){return e&&!o.isEmpty(e)&&(this.url.query.state=e),this},build:function(){return r.urlUtils.buildFullUrl(this.url)}},i)},function(e,t,n){var o,r,i,a,s,c,u;e.exports=(o=n(0),r=n(3),i=n(6),a=n(26),s=n(54),c=n(39),u=n(95),{setComponentDisplayMode:function(e,t,n){var l=e.pointers.components.getDesktopPointer(t);if(!function(e,t){var n=e.dal.full.get(e.pointers.componentStructure.getModesDefinitions(t));return o.size(n)>1}(e,l))return null;var p=e.pointers.components.getPageOfComponent(t).id,d=e.pointers.page.getPagePointer(p);r.updatePropertiesItem(e,l,{mobileDisplayedModeId:n});var g=e.dal.get(e.pointers.getInnerPointer(d,"componentType"));i.executeHook(i.HOOKS.MOBILE_CONVERSION.BEFORE,g,[e,d]);var f=s.getPage(e,p),m=a.conversionUtils.extractMobilePage(f);!function e(t,n){var r=o.remove(t,n);return!o.isEmpty(r)||o.some(t,(function(t){return e(t.components,n)}))}(a.conversionUtils.getChildren(m),{id:t.id});var v=u.getConversionSettings({conversionType:"MERGE_DISPLAY_MODE"});c.runMobileMergeOnPage(e,f,m,v)}})},function(e,t,n){e.exports=function(){var e=n(11),t=n(8),o=n(4),r=n(26),i=n(0),a=function(e,n,o,r){return t.public.getMobileConversionConfigByName(e,e.dal.get(n),r,o)},s=function(e,t,n){return i.filter(n,(function(n){return u(o.layout.get(e,n))>t.y}))},c=function(t,n,r){return e.updateCompLayout(t,n,{y:o.layout.get(t,n).y+r})},u=function(e){return e.y+e.height},l=function(e){return[e.y,u(e)]},p=function(e,t,n){return i.filter(n,(function(n){return r.conversionUtils.getRangesOverlap(l(o.layout.get(e,n)),l(t))>0}))};function d(e,t,n){var r=p(e,t,n),a=function(e,t,n){if(i.isEmpty(n))return{overlappingSiblingsOffset:0,lowerSiblingsOffset:t.height};var r=i.minBy(n,(function(t){return o.layout.get(e,t).y})),a=o.layout.get(e,r).y-t.y,s=i.maxBy(n,(function(t){return u(o.layout.get(e,t))})),c=u(t)-u(o.layout.get(e,s));if(a>0&&c>0)return{overlappingSiblingsOffset:a,lowerSiblingsOffset:a+c};if(a>0&&c<=0)return{overlappingSiblingsOffset:a,lowerSiblingsOffset:a};if(a<=0&&c>0)return{overlappingSiblingsOffset:0,lowerSiblingsOffset:c};return{overlappingSiblingsOffset:0,lowerSiblingsOffset:0}}(e,t,r);a.overlappingSiblingsOffset>0&&i.forEach(r,(function(t){return c(e,t,-a.overlappingSiblingsOffset)}));var s=i.difference(n,r);return a.lowerSiblingsOffset>0&&i.forEach(s,(function(t){return c(e,t,-a.lowerSiblingsOffset)})),a.lowerSiblingsOffset}function g(e,t,n){return{freedRect:n=n||o.layout.get(e,t),parentPointer:o.getContainer(e,t),affectedComps:s(e,n,o.getSiblings(e,t))}}return{hideMobileComponent:function(t,n,r){if((arguments.length>3&&void 0!==arguments[3]?arguments[3]:{updateLayout:!0}).updateLayout){var s=g(t,n);o.deleteComponent(t,n,!1),function t(n,r,s){var c=d(n,r.freedRect,r.affectedComps);if(0!==c){var u=o.layout.get(n,r.parentPointer),l=a(n,r.parentPointer,s,"minHeight")||0,p=i.max([u.height-c,l]);if(e.updateCompLayout(n,r.parentPointer,{height:p}),o.getContainer(n,r.parentPointer)){var f=i.assign(u,{y:u.y+p,height:u.height-p});t(n,g(n,r.parentPointer,f),s)}}}(t,s,r)}else o.deleteComponent(t,n,!1)}}}()},function(e,t){e.exports={id:"MediaContainer0",style:{type:"ComponentStyle",styleType:"custom",compId:"",componentClassName:"wysiwyg.viewer.components.MenuContainer",pageId:"",skin:"wysiwyg.viewer.skins.inlinePopup.DefaultInlinePopup",style:{groups:{},properties:{bg:"color_15","alpha-bg":.6},propertiesSource:{bg:"theme","alpha-bg":"value"}},metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},type:"Container",components:[],skin:"wysiwyg.viewer.skins.inlinePopup.DefaultInlinePopup",layout:{width:260,height:200,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!0,docked:{top:{px:0},bottom:{px:0},right:{px:0}}},componentType:"wysiwyg.viewer.components.MenuContainer",behaviors:{type:"ObsoleteBehaviorsList",items:'[{"name":"FloatIn","delay":0,"duration":0.5,"params":{"direction":"right"},"action":"inlinePopupIn","targetId":"","viewMode":"MOBILE"},{"name":"Conceal","delay":0,"duration":0.5,"params":{"direction":"right"},"action":"inlinePopupOut","targetId":"","viewMode":"MOBILE"}]'},design:{type:"MediaContainerDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},background:{type:"BackgroundMedia",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},color:"{color_11}",colorOpacity:1,alignType:"center",fittingType:"fill",scrollType:"none",colorOverlay:"",colorOverlayOpacity:0,showOverlayForMediaType:"WixVideo",mediaRef:null,imageOverlay:null,filterEffect:null},charas:"design-jr0840d9",dataChangeBehaviors:[]}}},function(e,t){e.exports={type:"Component",skin:"wysiwyg.viewer.skins.inlinePopupToggle.inlinePopupToggleSkin4",layout:{width:50,height:50,x:261,y:19,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.MenuToggle",style:{type:"ComponentStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-bg":"0","alpha-bgOpen":"0",bg:"color_11",bgOpen:"color_11",bordercolor:"color_15",bordercolorOpen:"color_15","boxShadowToggleOn-shd":"false","boxShadowToggleOn-shdOpen":"false",lineColor:"color_15",lineColorOpen:"color_15",shd:"0px 1px 4px 0px rgba(0,0,0,0.6)",shdOpen:"0px 1px 4px 0px rgba(0,0,0,0.6)"},propertiesSource:{"alpha-bg":"value","alpha-bgOpen":"value",bg:"theme",bgOpen:"theme",bordercolor:"theme",bordercolorOpen:"theme","boxShadowToggleOn-shd":"value","boxShadowToggleOn-shdOpen":"value",lineColor:"theme",lineColorOpen:"theme",shd:"value",shdOpen:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.MenuToggle",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.inlinePopupToggle.inlinePopupToggleSkin4"},behaviors:{type:"ObsoleteBehaviorsList",items:'[{"action":{"sourceId":"MENU_AS_CONTAINER_TOGGLE","name":"click","type":"comp"},"behavior":{"targetId":"MENU_AS_CONTAINER","name":"toggle","type":"comp"}}]'},activeModes:{}}},function(e,t){e.exports={type:"Component",skin:"wysiwyg.viewer.skins.ExpandableMenuSkin",layout:{width:188,height:392,x:30,y:100,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.ExpandableMenu",data:{type:"CustomMenuDataRef",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},menuRef:"#CUSTOM_MAIN_MENU"},props:{type:"ExpandableMenuProperties",metaData:{schemaVersion:"1.0",autoGenerated:!1},itemsAlignment:"left",menuArrowDirection:"right",originalHeight:225,menuItemHeight:56},style:{type:"ComponentStyle",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{SKINS_fntSubmenu:"normal normal normal 16px/1.4em din-next-w01-light {color_14}",SKINS_submenuBR:"90px",SKINS_submenuMargin:"0","alpha-SKINS_bgSubmenu":"0","alpha-bg":"0","alpha-bgexpanded":"0","alpha-bgh":"1","alpha-bgs":"0","alpha-bgsSub":"0","alpha-brd":.2,arrowColor:"color_15",bg:"color_11",bgexpanded:"color_11",bgh:"#E6EAF5",bgs:"color_11",bgsSub:"color_11","boxShadowToggleOn-shd":"false",brd:"color_15",brw:"0px 0px 0px 0px",fnt:"font_7",fntSubMenu:"font_7",menuSpacing:"10",rd:"90px",separatorHeight:"15",sepw:"1",shd:"0px 1px 4px 0px rgba(0,0,0,0.6)",subMenuSpacing:25,textSpacing:"0",txt:"color_15",txtexpanded:"color_15",txts:"color_18",txtsSub:"color_18"},propertiesSource:{SKINS_fntSubmenu:"value",SKINS_submenuBR:"value",SKINS_submenuMargin:"value","alpha-SKINS_bgSubmenu":"value","alpha-bg":"value","alpha-bgexpanded":"value","alpha-bgh":"value","alpha-bgs":"value","alpha-bgsSub":"value","alpha-brd":"value",arrowColor:"theme",bg:"theme",bgexpanded:"theme",bgh:"value",bgs:"theme",bgsSub:"theme","boxShadowToggleOn-shd":"value",brd:"theme",brw:"value",fnt:"theme",fntSubMenu:"theme",menuSpacing:"value",rd:"value",separatorHeight:"value",sepw:"value",shd:"value",subMenuSpacing:"value",textSpacing:"value",txt:"theme",txtexpanded:"theme",txts:"theme",txtsSub:"theme"},groups:{}},componentClassName:"wysiwyg.viewer.components.ExpandableMenu",pageId:"",compId:"",skin:"wysiwyg.viewer.skins.ExpandableMenuSkin"},connections:{type:"ConnectionList",items:[{type:"WixCodeConnectionItem",role:"expandableMenu1"}]},activeModes:{}}},function(e,t,n){var o,r,i;e.exports=(o=n(0),r={color1:"color_11",color2:"color_15",color3:"color_13"},i={color1:"#000000",color2:"#FFFFFF"},{getBackToTopButtonDefinition:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{layout:{fixedPosition:!0,width:44,height:44,scale:1,rotationInDegrees:0,docked:o.defaults({},t,{bottom:{px:20},right:{px:20}}),y:522,x:262},componentType:"wysiwyg.viewer.components.BackToTopButton",type:"Component",skin:"skins.viewer.VectorImageSkin",data:{type:"VectorImage",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},svgId:e?"a3c153_64191a64b70a446fb44c9be3fce6df77.svg":"a3c153_8f424995247e4e4b9083564be3aa7c01.svg",link:{type:"AnchorLink",anchorDataId:"SCROLL_TO_TOP",pageId:"#masterPage",anchorName:"Top of Page",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}}},props:{type:"VectorImageProperties",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1,autoGenerated:!1},displayMode:"fit"},behaviors:{type:"ObsoleteBehaviorsList",items:'[{"name":"FadeIn","delay":0,"duration":0.5,"action":"backToTopIn","targetId":"","viewMode":"MOBILE","params":{}}]',metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},design:{type:"VectorImageDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},overrideColors:e?i:r,shapeStyle:{opacity:e?.6:1}},style:{type:"ComponentStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{groups:{},properties:{},propertiesSource:{}},componentClassName:"wysiwyg.viewer.components.VectorImage",pageId:"",compId:"",styleType:"custom",skin:"skins.viewer.VectorImageSkin"},connections:{type:"ConnectionList",items:[{type:"WixCodeConnectionItem",role:"backToTop"}],metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},activeModes:{}}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=(n(5),n(13)),r=n(23),i=n(50);function a(e){return o.getProperty(e,o.PROPERTY_NAMES.PASSWORD_PROTECTED_PAGES)||[]}function s(t,n,r){var i=a(t),s=r?e.union(i,[n]):e.difference(i,[n]);o.setProperty(t,o.PROPERTY_NAMES.PASSWORD_PROTECTED_PAGES,s)}function c(t,n){var o=a(t);return e.includes(o,n)}function u(n,r,i){var a=e.isObject(i)?i.value:i;if(e.isNull(a))return l(n,r,null);var u=n.dal.get(n.pointers.getInnerPointer(n.pointers.general.getServiceTopology(),["editorServerRoot"])),d=c(n,r);s(n,r,!0),t.ajaxLibrary.ajax({url:"".concat(u.replace("http://","https://"),"/api/page_protection/new"),type:"POST",dataType:"json",xhrFields:{withCredentials:!0},data:{siteId:o.getProperty(n,o.PROPERTY_NAMES.SITE_ID),metaSiteId:o.getProperty(n,o.PROPERTY_NAMES.META_SITE_ID),pageId:r,password:a},success:function(e){e.result?l(n,r,e.result):p(n,r,d,e.errorCode,e.errorDescription)},error:function(e,t){p(n,r,d,-1,t)}})}function l(e,t,n){var r=function(e){return o.getProperty(e,o.PROPERTY_NAMES.SESSION_PAGES_TO_HASH_PASSWORD)||{}}(e);r[t]=n,o.setProperty(e,o.PROPERTY_NAMES.SESSION_PAGES_TO_HASH_PASSWORD,r),s(e,t,n)}function p(e,t,n,o,a){!function(e,t,n){s(e,t,n)}(e,t,n),r.error(e,i.PASSWORD_PROTECTION_HASH_GENERATION_FAILED,{serverErrorCode:o,errorDescription:a})}return{getPasswordProtectedPages:a,isPageProtected:c,setPagePassword:u,setPageToNoRestriction:function(e,t){u(e,t,{value:null})},isPagesProtectionOnServerOn:function(){return!0}}}()},function(e,t,n){var o;e.exports=(o=n(0),{isPlatformAppInstalled:function(e,t){if(!t)return!1;var n=o.get(t,"appDefinitionId"),r=o.get(e,[n],{});return!o.isEmpty(r)}})},function(e,t,n){e.exports=n(457).create(!0)},function(e,t,n){var o;e.exports=(o=n(0),{create:function(e){var t={},n={},r=function(e){return t[e]};return{get:r,set:function(n,i){var a=r(n);return t[n]=a&&e?o.merge({},a,i):i,t[n]},lock:function(e){n[e]=1},unlock:function(e){delete n[e]},isLocked:function(e){return n[e]},keys:function(){return t&&o.keys(t)||[]},clear:function(){t={},n={}}}}})},function(e,t){e.exports={createRegistrar:function(){var e;return{setContextProvider:function(t){e=t},getNicknameContext:function(t,n){return e?e(t,n):null}}}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(29),o=n(1),r=n(17);function i(n,o){return!!function(n,o){var r=t.getComponentModes(n,o);return e.find(r,{type:"HOVER"})}(n,o)}return{activatePageMobileHoverModes:function(n,a){var s=n.pointers.components.getPage(a.id,o.constants.VIEW_MODES.DESKTOP),c=n.pointers.components.getChildrenRecursively(s);e(c).filter(i.bind(null,n)).forEach(r.prepareComponentStructureForMobileAlgorithm.bind(null,n,t))}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(3),r=n(17),i=n(4),{removeMobileCropOverrideIfNeeded:function(e,t,n){var a=o.getDataItem(e,t),s=n.uri&&a.uri!==n.uri;r.wPhoto.removeMobileCropOverrideIfNeeded(e,t,s,{dataModel:o,component:i})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),o=n(4),r=n(92),i=n(186);function a(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"layout"));i.layoutPlayerChildren(e,t,n)}return{setPlayerIdAfterAddHook:function(n,i,a,s,c,u){!function(n,i,a){if("wysiwyg.viewer.components.MediaPlayer"===o.getType(n,a)){var s=a.id,c=o.getType(n,i),u=r.getComponentPropertiesByType(n,c);e.get(u,["properties","playerId"])&&t.updatePropertiesItem(n,i,{playerId:s})}}(n,i,u)},layoutPlayerChildren:a,layoutChildrenOnMobileConversion:function(t,n){e.forEach(n,(function(n){var r=o.getChildren(t,n,!0),i=e.filter(r,(function(e){return"wysiwyg.viewer.components.MediaPlayer"===o.getType(t,e)}));e.forEach(i,(function(e){return a(t,e)}))}))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),o=n(4),r=n(8),i=n(11),a=n(15),s=n(92),c=n(2),u="wysiwyg.viewer.components.StripColumnsContainer";function l(t,n){var o=e.head(t.pointers.components.getChildren(n)),s=t.pointers.components.getChildren(o);e.forEach(s,(function(e){(a.getComponentType(t,e)===u||r.public.isFullWidth(t,e))&&i.reparentComponentToPage(t,e,!0)}))}return{handleFullWidthPropertyChange:function(n,o,r){var i=t.getPropertiesItem(n,o);i.fullWidth&&e.get(r,"fullWidth",i.fullWidth)!==i.fullWidth&&l(n,o)},handleSplitToColumns:function(e,t,n){1===e.pointers.components.getChildren(n).length&&l(e,n)},handleColumnDeletion:function(e,n,o){if(!o){var r=e.pointers.components.getParent(n);if(2===e.pointers.components.getChildren(r).length){!function(e,t){t.type!==c.VIEW_MODES.DESKTOP&&(s.isMobileComponentPropertiesSplit(e,t)||s.splitMobileComponentProperties(e,t))}(e,r),t.updatePropertiesItem(e,r,{rowMargin:0,columnsMargin:0,siteMargin:0,frameMargin:0})}}},deleteContainerIfHasNoMoreColumns:function(e,t,n,r,i,a,s){e.pointers.components.getChildren(s).length||n||o.deleteComponent(e,s)}}}()},function(e,t){e.exports=function(e,t,n,o){o.layout.x=0}},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(4),function(e,t,n,i){var a=e.pointers.components.getChildren(n);if(o.find(a,(function(t){return r.getType(e,t)===i.componentType})))throw new Error("Only one SiteRegionContainer allowed")})},function(e,t,n){var o,r;e.exports=(o=n(11),r=n(76),function(e,t,n,i,a,s){r.upgradeUrl(e,t,"facebook.likes",{forceMainPage:o.isShowOnAllPages(e,s)})})},function(e,t,n){var o;e.exports=(o=n(76),function(e,t){o.upgradeUrl(e,t,"pinterest")})},function(e,t,n){var o;e.exports=(o=n(76),function(e,t){o.upgradeUrl(e,t,"vk")})},function(e,t,n){var o,r;e.exports=(o=n(3),r=n(76),function(e,t){var n=o.getDataItem(e,t),i=n.urlChoice&&"site"===n.urlChoice.toLowerCase();r.upgradeUrl(e,t,"facebook.shares",{forceMainPage:i})})},function(e,t,n){var o,r,i;e.exports=(o=n(38),r=n(14),i=n(18),{getContainerToAddTo:function(e,t){return e.pointers.components.isPage(t)&&i.popupPages.isPopup(e,t.id)?i.popupPages.getCurrentMainContainer(e):t},removeDeadBehaviors:function(e,t){if(i.popupPages.isPopup(e,t.id)){var n=r.getViewMode(e);i.getPageIdList(e,!0).map((function(t){return e.pointers.components.getPage(t,n)})).forEach((function(n){o.removeComponentsBehaviorsWithFilter(e,n,{behavior:{targetId:t.id}})}))}},removeBehaviorsFromAddedPage:function(e,t){o.removeComponentsBehaviorsWithFilter(e,t,{behavior:{name:"openPopup"}})}})},function(e,t,n){var o,r;e.exports=(o=n(3),r=n(11),{replaceFullScreenPropertyWithDocking:function(e,t){var n=o.getPropertiesItem(e,t);n&&n.fullScreenModeOn&&(r.setDock(e,t,{left:{vw:0},right:{vw:0}}),o.updatePropertiesItem(e,t,{fullScreenModeOn:!1}))}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(65),r=n(4),i=n(3),a=n(7),s=n(188);function c(n,i,s,c,u){var l=function(t,n){return e(t).chain().get("custom.relatedConnections").transform((function(t,o,r){t[e.get(n,r,r)]=o}),{}).value()}(s,u),p=e.keys(l),d=r.getPage(n,i).id,g=d===t.siteConstants.MASTER_PAGE_ID?null:d;!function(t,n,r,i){e.forEach(t,(function(t){var a=e.get(n,t.id,[]);e.forEach(a,(function(e){o.connect(r,t,i,e.role,e.config,e.isPrimary)}))}))}(a.getAllComponents(n,g,(function(t){return e.includes(p,t.id)})),l,n,i)}return{handleControllerDeletion:function(t,n){!function(t,n){var r=o.getConnectedComponents(t,n);e.forEach(r,(function(e){o.disconnect(t,e,n)}))}(t,n),s.removePlatformApplicationFromPageIfLastController(t,n),s.removeControllerFromStateMap(t,n)},handleControllerSerialization:function(t,n,r){!function(t,n,r){var i=o.getConnectedComponents(t,n);if(!e.isEmpty(i)){var a=e.transform(i,(function(r,i){r[i.id]=e.filter(o.get(t,i),{controllerRef:n})}),{});e.set(r,"relatedConnections",a)}}(t,n,r),s.addControllerStateToSerializedStructure(t,n,r)},handleControllerAddition:function(e,t,n,o,r){c(e,t,n,0,r),s.setControllerStateFromSerializedStructure(e,t,n),s.addPlatformAppToPageIfFirstController(e,t,n.data.applicationId)},handleControllerParentChange:function(n,a,c){var u=i.getDataItem(n,a).applicationId;!function(n,i,a){var s=r.getPage(n,a).id;if(s!==t.siteConstants.MASTER_PAGE_ID){var c=o.getConnectedComponents(n,i);e(c).reject((function(e){return r.getPage(n,e).id===s})).forEach((function(e){o.disconnect(n,e,i)}))}}(n,a,c),s.removePlatformApplicationFromPageIfLastController(n,a),s.addPlatformAppToPageIfFirstController(n,a,u,r.getPage(n,c))}}}()},function(e,t){e.exports=R},function(e,t){e.exports=N},function(e,t,n){var o,r,i,a,s,c;e.exports=(r=n(0),i=n(1).urlUtils.joinURL,a=/\d+\.\d+\.\d+/,s=function(e,t,n,o,s){if(function(e){return/^https?\:\/\/localhost/.test(e)}(o))return o;var c,u=r.trimEnd(i(t,"services"),"/"),l=e.replace(u,r.trimEnd(n,"/"));return/^\d+\.\d+\.\d+$/.test(o)&&(c=o,l=l.replace(a,c)),"true"===s&&(l=l.replace(/^https:\/\//,"http://")),l},{createWorkerIframe:function(e,t){var n=window.document.createElement("iframe");return n.id=e,n.src=t,n.style.display="none",n=window.document.body.appendChild(n)},getEditorSdkUrl:c=function(e){var t=e.dal.get(e.pointers.general.getServiceTopology()),n=e.siteAPI.getCurrentUrl(),o=r.get(n,"query");return o.EditorSdkSource||o.editorSdkSource||i(r.get(t,["scriptsLocationMap","js-platform-editor-sdk"],""),"lib","editorSDK.min.js")},addWorkerHandler:function(e){o&&window.removeEventListener("message",o),o=e,window.addEventListener("message",o)},getAppsContainerUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dal.get(e.pointers.general.getServiceTopology()),o=n.scriptsLocationMap["santa-platform-apps-container"],a="https://editor.".concat(n.serverName,"/_partials/"),u=e.siteAPI.getCurrentUrl(),l=r.get(u,"query"),p=n.scriptsDomainUrl,d=s(o,p,a,l.PlatformContainerSource,l.PlatformContainerHttp),g=c(e),f=r.isEmpty(t.extraNamespaces)?void 0:r.join(t.extraNamespaces,","),m=f?"&extraNamespaces=".concat(f):"";return i(d,"index.html?sdkVersion=".concat(g).concat(m))}})},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(32),i=function(e,t){return{intent:r.Intents.PLATFORM_WORKER,type:r.MessageTypes.ADD_APPS,apps:o.map(e,(function(e){return o.pick(e,["applicationId","appFields.platform.editorScriptUrl","appDefinitionId","firstInstall","origin","instance","instanceId","appUrlQueryParams"])})),initData:t}},o.mapValues({triggerEvent:function(e,t){return{intent:r.Intents.PLATFORM_WORKER,type:r.MessageTypes.TRIGGER_EVENT,applicationId:e,args:t}},addApp:function(e,t){return i([e],t)},addApps:i,notifyAppUpdated:function(e,t){return{intent:r.Intents.PLATFORM_WORKER,type:r.MessageTypes.NOTIFY_APP_UPDATED,applicationId:e,payload:t}},notifyRemoveApp:function(e){return{intent:r.Intents.PLATFORM_WORKER,type:r.MessageTypes.REMOVE_APP,applicationId:e}},notifyMigrate:function(e,t){return{intent:r.Intents.PLATFORM_WORKER,type:r.MessageTypes.MIGRATE,applicationId:e,payload:t}}},(function(e){return o.flow(e,JSON.stringify)})))},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r={},i=[function(e){return o.debounce(e,10)},function(e){return o.throttle(e,1e3)}],a=function(e,t,n,o,r){t.forEach((function(t){return r(e,t,{eventType:n,eventPayload:o})}))},{notifyAppsOnCustomEvent:function(e,t,n,s){var c=function(e){return r[e]?Array.from(r[e]):null}(t);if(c)return o.flow(i)(a)(e,c,t,n,s)},registerAppToEvents:function(e,t){o.forEach(t,(function(t){r[t]||(r[t]=new Set),r[t].add(e)}))}})},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(129),r=n(43),i=n(65),a=n(100),s=n(3),c=n(4),u=n(7);function l(n,o,r,i,c,u,l,p,d){if(!e.isEmpty(d)){var g=e.reduce(d,(function(t,n){var r=s.getDataItem(o,n.controllerRef);if(r){var i=r.applicationId,c=e.get(a.getAppDataByAppDefId(o,i),"applicationId");c&&(t[c]=t[c]||[],t[c].push(n))}return t}),{});e.forEach(g,(function(e,i){n(o,i,t.factory.componentDeleted({componentRef:r,connections:e}),!0)}))}}function p(t,n,o,i,a){var s=r.getConnectedComponentStageData(t,o),c=e.get(s,["behavior",n]);return e.isUndefined(c)||e.isUndefined(a[c])?i:e.isFunction(a[c])?a[c](i):a[c]}function d(e,t,n,o,r){return!1!==o&&p(e,t,n,o,r)}function g(t,n,r){var a=[n].concat(o(t.pointers.full.components.getChildrenRecursively(n))),s=e(a).map((function(e){return i.getPrimaryConnection(t,e)})).compact().value(),l=e.filter(a,(function(e){return"platform.components.AppWidget"===c.getType(t,e)}));return e.some(s,(function(e){return function(e,t,n,o){return"platform.components.AppWidget"===c.getType(e,n.controllerRef)&&!u.isDescendantOfComp(e,o,n.controllerRef)&&!t.some((function(t){return e.pointers.isSamePointer(t,n.controllerRef)}))}(t,l,e,r)}))}return{getOnDeleteHook:function(t){return e.partial(l,t)},isDuplicatable:function(e,t,n){return d(e,"duplicatable",n,t,{false:!1,true:t})},canReparent:function(e,t,n){return d(e,"canReparent",n,t,{false:!1,true:t})},isRotatable:function(e,t,n){return d(e,"rotatable",n,t,{false:!1,true:t})},canBeFixedPosition:function(t,n,r){if(!1===n)return!1;var a=e.filter(c.getAncestors(t,r),(function(e){return"platform.components.AppWidget"===c.getType(t,e)})),s=[r].concat(o(t.pointers.full.components.getChildrenRecursively(r)));return!e.some(s,(function(n){return function(t,n,o){return n&&e.some(o,(function(e){return t.pointers.isSamePointer(e,n.controllerRef)}))}(t,i.getPrimaryConnection(t,n),a)}))&&d(t,"pinnable",r,n,{false:!1,true:n})},isResizableSides:function(e,t,n){return d(e,"resizable",n,t,{false:[],true:t})},layoutLimitsHook:function(t,n,o){return d(t,"resizable",o,n,{false:function(t){return t.aspectRatio?e.omit(t,"aspectRatio"):t},true:n})},isContainable:function(e,t,n,o){return!1!==t&&(!g(e,n,o)&&(function(e,t,n){return t&&(e.pointers.components.isInMasterPage(t)&&!e.pointers.components.isInMasterPage(n)||!e.pointers.components.isInMasterPage(t)&&e.pointers.components.isInMasterPage(n))}(e,o,n)?p(e,"toggleShowOnAllPagesEnabled",n,t,{false:!1,true:t}):t))}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(13),i=n(129),{notifyOnFirstSaved:function(e,t,n){var a=r.generalInfo.getMetaSiteId(e);o.forEach(t,(function(t){var o=t.applicationId,r=t.instance,s=t.instanceId;n(e,o,i.factory.siteWasFirstSaved({metaSiteId:a,instance:r,instanceId:s}))})),e.siteAPI.updateBiData({metaSiteId:a})},removeGhostStructureForApp:function(e,t){var n=t.appDefinitionId;e.siteDataAPI.siteData.removeGhostStructureData(n)}})},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(3),r=n(16),i=n(4);function a(t){return e.compact([e.get(t,"applicationId")])}function s(n,o){return e(e.get(o,"items")).reject((function(t){return e.isEqual(t.type,"WixCodeConnectionItem")})).map("controllerId").compact().flatMap((function(e){return a(t.getDataItemById(n,e))})).value()}return{appsOfComp:function(n,c,u){var l=[];return c&&"AppController"===c.type?l=function(n,o,r){if(e.has(o,"applicationId"))return a(o);return a(t.getDataItem(n,r))}(n,c,u):c&&"TPAWidget"===c.type?l=function(t,n){var o=e.get(n,"applicationId"),i=r.getWidgetData(t,o,e.get(n,"widgetId"));return e.has(i,"componentFields.componentUrl")?[n.appDefinitionId]:[]}(n,c):c&&"ConnectionList"===c.type?l=s(n,c):!c&&u&&(l=a(t.getDataItem(n,u))),e.isEmpty(l)&&u&&(l=e([].concat(o(i.getAncestorsFromFull(n,u)),[u])).flatMap((function(e){return t.getConnectionsItem(n,e)})).compact().reject((function(t){return e.isEqual(t.type,"WixCodeConnectionItem")})).flatMap((function(o){return a(t.getDataItem(n,e.get(o,"controllerRef")))})).uniq().value()),l},appsOfControllerStateMap:function(n,o){return e(e.get(o,"configured")).flatMap((function(e){return a(t.getDataItem(n,e))})).compact().sortedUniq().value()},appsOfConnectionItem:s}}()},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(0),r=n(4),i=n(16),a=n(5),s={},c={dataBinding:"dataBinding"},{getAllowedApps:function(e){var t=i.getAppsData(e);if(a.isOpen("sv_livePreview_all")){var n=o.values(s);return o(t).filter((function(e){return"Dashboard"!==e.appType})).map("appDefinitionId").difference(n).compact().value()}var r=o.values(c);return o(t).map("appDefinitionId").filter((function(e){return o.includes(r,e)})).compact().value()},addDependantApps:function(e,t){var n=i.getAppsData(e),r=o.filter(n,(function(e){return o.includes(t,e.appDefinitionId)}));if(o.includes(t,"dataBinding")||o.some(r,(function(e){return function(e){var t=o.values(o.get(e,"widgets",{}));return o.some(t,(function(e){return o.get(e,"componentFields.appStudioFields")}))}(e)}))){var a=o.find(n,{type:"siteextension"});!a||o.get(a,"permissions.revoked")||o.includes(t,a.appDefinitionId)||t.push(a.appDefinitionId)}return t},optionsModifiers:{dataBinding:function(e,t,n){if(r.getAncestorsFromFull(e,n).reduce((function(t,n){return t||"wysiwyg.viewer.components.Repeater"===r.getType(e,n)}),!1))return{resetRuntimeOverrides:!0}}}})},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(0),r=n(129),i=n(101),a=n(36),s=n(141),c=n(142),{beforePageRemoveHook:function(e,t){var n=s.getRouterRef.byPage(e,t);n&&(function(e,t,n){var i=s.get.byRef(e,t),c=a.getAppDataByAppDefId(e,i.appDefinitionId).applicationId,u=o.findKey(i.pages,(function(e){return e===n}));a.notifyApplication(e,c,r.factory.pageDeleted({pageRole:u}))}(e,n,t.id),s.pages.removePageFromRouter(e,n,t.id))},duplicatePageCodeIfRequired:function(e,t,n){(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&i.duplicatePageCode(e,t,n)},removePageFromPlatformApps:function(e,t){a.removePageFromPlatformApps(e,t)},addOriginCompIdToWidgetsOnPage:function(e,t){c.addOriginCompIdToWidgetsOnPage(e,t)},fixDuplicatedPageCodeBehaviors:function(e,t){var n=e.pointers.page.getPagePointer(t),r=e.pointers.getInnerPointer(n,"structure"),i=e.dal.full.get(r);!function e(t,n,r){if(n.behaviorQuery){var i,a=t.pointers.data.getBehaviorsItem(n.behaviorQuery,r),s=t.dal.get(a);try{i=JSON.parse(s.items)}catch(e){}var c=!1;o(i).filter(["action.type","comp"]).reject(["action.sourceId",n.id]).forEach((function(e){c=!0,e.action.sourceId=n.id,e.behavior.targetId=r,o.has(e,"behavior.params.compId")&&(e.behavior.params.compId=n.id)})),c&&(s.items=JSON.stringify(i),t.dal.set(a,s))}o.forEach(n.components,(function(n){e(t,n,r)}))}(e,i,t)}})},function(e,t,n){var o;e.exports=(o=n(0),n(483),{initPaths:function(e){var t=[e.pointers.wixCode.getRoot(),e.pointers.wixCode.getNonUndoableRoot(),e.pointers.wixCode.getUndoableRoot(),e.pointers.wixCode.getModifiedFileContentMap(),e.pointers.wixCode.getLoadedFileContentMap(),e.pointers.wixCode.getDuplicatedFilesInfoMap(),e.pointers.wixCode.getUndoableModifiedFileContentMap(),e.pointers.wixCode.getFilePathToIdMap(),e.pointers.wixCode.getBundleCacheKillerMap(),e.pointers.wixCode.getWixCodeModel(),e.pointers.wixCode.getWixCodeAppData(),e.pointers.wixCode.getAreChildrenLoadedMap(),e.pointers.wixCode.getLoadedChildrenMap(),e.pointers.wixCode.getDirectoryFlagByDeletedPathMap()];o.forEach(t,(function(t){e.dal.isExist(t)||e.dal.set(t,{})}))}})},function(e,t,n){e.exports=function(){var e=n(51),t=n(48),o=n(22),r="wixCode",i=e.pointerGeneratorsRegistry;i.registerPointerType(r,(function(){return null}),(function(){return!0}));var a={getRoot:function(e,t){return t.getPointer("wixCodeRoot",r,o.paths.BASE)},getNonUndoableRoot:function(e,t){return t.getPointer("wixCodeNonUndoableRoot",r,o.paths.NON_UNDOABLE_BASE_PATH)},getUndoableRoot:function(e,t){return t.getPointer("wixCodeUndoableRoot",r,o.paths.UNDOABLE_BASE_PATH)},getModifiedFileContentMap:function(e,t){return t.getPointer("modifiedFileContents",r,o.paths.MODIFIED_FILE_CONTENTS)},getModifiedFileContent:function(e,t,n){return t.getPointer("modifiedFileContents_".concat(n),r,o.paths.MODIFIED_FILE_CONTENTS.concat(n))},getLoadedFileContentMap:function(e,t){return t.getPointer("loadedFileContents",r,o.paths.LOADED_FILE_CONTENTS)},getLoadedFileContent:function(e,t,n){return t.getPointer("loadedFileContents_".concat(n),r,o.paths.LOADED_FILE_CONTENTS.concat(n))},getUndoableModifiedFileContentMap:function(e,t){return t.getPointer("undoableModifiedFileContents",r,o.paths.UNDOABLE_MODIFIED_FILE_CONTENTS)},getUndoableModifiedFileContent:function(e,t,n){return t.getPointer("undoableModifiedFileContents_".concat(n),r,o.paths.UNDOABLE_MODIFIED_FILE_CONTENTS.concat(n))},getFilePathToIdMap:function(e,t){return t.getPointer("filePathToIdMap",r,o.paths.FILE_PATH_TO_ID_MAP)},getFilePathId:function(e,t,n){return t.getPointer("filePathToIdMap_".concat(n),r,o.paths.FILE_PATH_TO_ID_MAP.concat(n))},getDuplicatedFilesInfoMap:function(e,t){return t.getPointer("duplicatedFilesInfo",r,o.paths.DUPLICATED_FILES_INFO)},getGlobalBundleCacheKiller:function(e,n){return n.getPointer("globalBundleCacheKiller",r,t.wixCodeUserScriptsService.paths.GLOBAL_CACHE_KILLER)},getBundleCacheKillerMap:function(e,n){return n.getPointer("bundleCacheKillers",r,t.wixCodeUserScriptsService.paths.CACHE_KILLERS_MAP)},getBundleCacheKiller:function(e,n,o){return n.getPointer("bundleCacheKillers_".concat(o),r,t.wixCodeUserScriptsService.paths.CACHE_KILLERS_MAP.concat(o))},getLoadedChildrenMap:function(e,t){return t.getPointer("loadedChildren",r,o.paths.LOADED_CHILDREN)},getLoadedChildren:function(e,t,n){return t.getPointer("loadedChildren_".concat(n),r,o.paths.LOADED_CHILDREN.concat(n))},getAreChildrenLoadedMap:function(e,t){return t.getPointer("areChildrenLoaded",r,o.paths.ARE_CHILDREN_LOADED)},getAreChildrenLoaded:function(e,t,n){return t.getPointer("areChildrenLoaded_".concat(n),r,o.paths.ARE_CHILDREN_LOADED.concat(n))},getWixCodeModel:function(e,t){return t.getPointer("wixCodeModel",r,o.paths.WIX_CODE_MODEL)},getWixCodeAppData:function(e,t){return t.getPointer("appData",r,o.paths.WIX_CODE_APP_DATA)},getGridAppId:function(e,t){return t.getPointer("gridAppId",r,o.paths.GRID_APP_ID)},getIsAppReadOnly:function(e,t){return t.getPointer("isAppReadOnly",r,o.paths.IS_APP_READ_ONLY)},getDirectoryFlagByDeletedPathMap:function(e,t){return t.getPointer("directoryFlagByDeletedPath",r,o.paths.DIRECTORY_FLAG_BY_DELETED_PATH)}};i.registerDataAccessPointersGenerator(r,a)}()},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(485),r=n(105),i=n(488),a=n(1),s=function(){try{i.setState(null),i.setAnotherSaveRequested(!1)}catch(e){a.log.error(e)}},{save:function(e,t){return function(e,t){var n=i.getState();return n?(i.setAnotherSaveRequested(!0),n):((n=new Promise((function(n,a){function s(){i.getAnotherSaveRequested()?(i.setAnotherSaveRequested(!1),o(e,r,t,s,c)):n()}function c(n){i.getAnotherSaveRequested()?(i.setAnotherSaveRequested(!1),o(e,r,t,s,c)):a(n)}o(e,r,t,s,c)}))).then(s,s),i.setState(n),n)}(e,t)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(64),o=n(23);function r(t){return{event:e.partial(o.event,t),error:e.partial(o.error,t)}}return function(e,n,o,i,a){var s=[{primaryTask:n,secondaryTasks:[]},e.dal,i,function(e){a(e.document)},r(e)];o?t.runFullSaveTasks.apply(t,s):t.runPartialSaveTasks.apply(t,s)}}()},function(e,t){e.exports=x},function(e,t){e.exports=L},function(e,t){var n,o;e.exports=(n=null,o=!1,{getState:function(){return n},setState:function(e){n=e},getAnotherSaveRequested:function(){return o},setAnotherSaveRequested:function(e){o=e}})},function(e,t,n){e.exports=function(){var e=n(36),t=n(77),o=n(22);function r(e,n){var r=t.getRoots(e).pages.location;return"".concat(r).concat(n).concat(o.JS_EXTENSION)}return{getFileId:r,hasCode:function(t,n){return e.pageHasPlatformApp(t,n,o.WIX_CODE_APP_ID)},readCode:function(e,n){var o=r(e,n),i=t.getVirtualDescriptor(e,o,!1);return t.readFile(e,i)}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(36),n(2),r=n(77),i=n(22),{duplicatePageCode:function(e,t,n){if(!o.pageHasPlatformApp(e,n,i.WIX_CODE_APP_ID))return Promise.resolve();var a=function(e,t){var n="public/pages/".concat(t,".js");return r.getVirtualDescriptor(e,n,!1)}(e,n),s=function(e){return r.getVirtualDescriptor(e,"public/pages",!0)}(e),c="".concat(t,".js");return r.copyFile(e,a,s,c)}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f;e.exports=(o=n(1),r=n(492),i=n(202),a=n(493),s=n(494),c=n(495),u=n(496),l=n(503),p=[s,c,i,u,l,r],d=[s,c,l],g=[s,c,a],f=i,{save:function(e){for(var t=e.runtimeConfig.supportMobile?o.functionUtils.runMultiple(p):o.functionUtils.runMultiple(d),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.apply(void 0,[e].concat(r))},saveAsTemplate:o.functionUtils.runMultiple(g),autosave:f})},function(e,t,n){e.exports=n(134).meshLayoutReadySiteDataPreSaveFixer},function(e,t,n){e.exports=function(){var e=n(0),t=n(18);function o(t,n,o){e.forEach(n,(function(e){e.metaData.isPreset=!0;var n=t.pointers.data.getDataItem(e.id,o);t.dal.set(n,e)}))}return function(n){var r=e(t.getPageIdList(n,!0)).transform((function(e,t){e[t]=n.pointers.page.getPageData(t)}),{}).mapValues(n.dal.get.bind(n.dal)).mapValues((function(t){return e.pickBy(t,"metaData")})).value();e.forEach(r,o.bind(null,n))}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(21);function r(e){return e>1}return function(n){var i=n.pointers.general.getUrlFormat();if(n.dal.get(i)!==t.siteConstants.URL_FORMATS.HASH_BANG){var a=o.getPagesList(n),s=e(a).map(o.getPageUriSEO.bind(null,n)).countBy().pickBy(r).value();if(!e.isEmpty(s))throw new Error("Found pages with duplicate url title: ".concat(JSON.stringify(s)))}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(1),i=n(21),function(e){var t=e.pointers.general.getUrlFormat();if(e.dal.get(t)!==r.siteConstants.URL_FORMATS.HASH_BANG){var n=i.getPagesList(e),a=i.getForbiddenPageUriSEOs(e),s=o.reduce(n,(function(t,n){var o=i.getPageUriSEO(e,n);return o&&a[o.toLowerCase()]&&t.push(o),t}),[]);if(!o.isEmpty(s))throw new Error("Found pages with forbidden url title: ".concat(JSON.stringify(s)))}})},function(e,t,n){e.exports=function(){var e=n(0),t=(n(12),n(497)),o=n(135);function r(e){var t=e.dal.full.immutable.getLastSnapshotByTagName("reordering")||e.dal.full.immutable.getInitialSnapshot();return e.dal.takeSnapshot("reordering"),[t,e.dal.full.immutable.getLastSnapshotByTagName("reordering")]}return function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!!e.isUndefined(i.shouldReorderDOM)||i.shouldReorderDOM;if(a){var s=r(n),c=o.getChangedPages(s[0],s[1]);t.reorderComponents(n,e.noop,e.noop,c)}}}()},function(e,t,n){e.exports=function(){var e=n(1),t=n(0),o=n(39),r=e.constants;function i(e){var n,o,r=(n=e,o=t.invert(n),function(e){var t=o[e.id];return t?Number(t):-1});return function(e,t){return r(e)-r(t)}}function a(e,t,n){var o=e.pointers.full.components.getChildrenContainer(t),r=e.dal.full.get(o);"wysiwyg.viewer.components.HoverBox"!==e.dal.get(t).componentType&&r.sort(i(n)),e.dal.full.set(o,r)}function s(e,n){return new Promise((function(o,r){t.delay((function(){var t;try{t=e(n),o(t)}catch(e){r(e)}}))}))}function c(e,t,n,o){var i=e.pointers.components.getPage(t,r.VIEW_MODES.DESKTOP),s=e.pointers.full.components.getComponent(n,i);s&&a(e,s,o)}function u(e,n){return i=[function(){return o.getComponentsOrder(e,n)},function(o){if("masterPage"!==n){var i=e.pointers.components.getPage(n,r.VIEW_MODES.DESKTOP);a(e,i,o[n])}return t.omit(o,n)},function(o){return function(e,n,o){return Promise.all(t.transform(o,(function(o,r,i){var a=s(t.partial(c,e,n,i,r));return o.push(a),o}),[]))}(e,n,o)}],t.reduce(i,(function(e,t){return e.then((function(e){return s(t,e)}))}),Promise.resolve());var i}return{reorderComponents:function(e,n,o,r){Promise.all(t.map(r,t.partial(u,e))).then(n).catch(o)}}}()},function(e,t){e.exports={UNKNOWN_SERVER_ERROR:"UNKNOWN_SERVER_ERROR",HTTP_REQUEST_ERROR:"HTTP_REQUEST_ERROR",SAVE_DISABLED_IN_DOCUMENT_SERVICES:"SAVE_DISABLED_IN_DOCUMENT_SERVICES",SAVE_BLOCKED_BY_DOCUMENT_SERVICES:"SAVE_BLOCKED_BY_DOCUMENT_SERVICES",SAVE_IN_PROGRESS:"SAVE_IN_PROGRESS",NOT_LOGGED_IN:"NOT_LOGGED_IN",SESSION_EXPIRED:"SESSION_EXPIRED",USER_NOT_AUTHORIZED_FOR_SITE:"USER_NOT_AUTHORIZED_FOR_SITE",CONCURRENT_SAVE:"CONCURRENT_SAVE_ERROR",SITE_NAME_TAKEN:"SITE_NAME_TAKEN_ERROR",DUPLICATE_COMPONENTS:"DUPLICATE_COMPONENTS",DATA_REFERENCE_MISMATCH:"DATA_REFERENCE_MISMATCH",MISSING_CONTAINERS:"MISSING_CONTAINERS",APP_CONTROLLER_REFERENCE_MISMATCH:"APP_CONTROLLER_REFERENCE_MISMATCH",DESIGN_REFERENCE_MISMATCHES:"DESIGN_REFERENCE_MISMATCHES",BEHAVIOR_REFERENCE_MISMATHCHES:"BEHAVIOR_REFERENCE_MISMATHCHES",PROPERTY_REFERENCE_MISMATCHES:"PROPERTY_REFERENCE_MISMATCHES",STYLE_REFERENCE_MISMATCHES:"STYLE_REFERENCE_MISMATCHES",CONNECTION_LIST_REFERENCE_MISMATCHES:"CONNECTION_LIST_REFERENCE_MISMATCHES",SITE_DESERIALIZATION_ERROR:"SITE_DESERIALIZATION_ERROR",SAVE_PUBLISH_DISABLED_ON_SERVER:"SAVE_PUBLISH_DISABLED_ON_SERVER",SAVE_PUBLISH_RC_FAILED_ON_SERVER:"SAVE_PUBLISH_RC_FAILED_ON_SERVER",CONCURRENT_AUTO_SAVE:"CONCURRENT_AUTO_SAVE",SITE_STALE_STATE_FROM_AUTO_SAVE:"SITE_STALE_STATE_FROM_AUTO_SAVE",AUTOSAVE_DISABLE_FROM_SERVER:"AUTOSAVE_DISABLE_FROM_SERVER"}},function(e,t){e.exports={INVALID_VERSION_TYPE:"INVALID_VERSION_TYPE",NO_GRID_APP_ID:"NO_GRID_APP_ID",NO_STUDIO_APP_APP_ID:"NO_STUDIO_APP_APP_ID",UNKNOWN_SERVER_ERROR:"UNKNOWN_SERVER_ERROR",USER_NOT_AUTHORIZED_FOR_APP:"USER_NOT_AUTHORIZED_FOR_APP"}},function(e,t,n){var o,r,i,a;e.exports=(o=n(501),r=n(502),i=n(1),a=[o,r],{fixData:function(e,t,n,o){return i.loggingUtils.performance.start(i.loggingUtils.performanceMetrics.SAVE.SAVE_DATA_FIXER),a.forEach((function(r){r.exec(e,t,n,o)})),i.loggingUtils.performance.start(i.loggingUtils.performanceMetrics.SAVE.SAVE_DATA_FIXER),e}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(3),r=n(57),i=t.constants,a=i.DATA_TYPES,s=i.PAGE_DATA_DATA_TYPES;function c(e,t,n,o){var r=n.getIn([e,"data",s[o],t]);return r&&r.toJS()}function u(t,n,o,r,i){var a=c(t,n.id,i,o);return!a||!e.isEqual(a[r],n[r])}function l(e,t,n,o,r,i){var a=function(e,t,n,o){return c(e,t.replace("#",""),n,o)}(e,t,o,i);a&&!r[a.id]&&(r[a.id]=a,p(e,a,i,n,o,!1,r))}function p(t,n,r,i,a,s,p){"Page"===n.type&&n.pageBackgrounds&&function(t,n,o,r,i,a){var s=c(t,n.id,r,o);e.forEach(["desktop","mobile"],(function(e){(!s||!s.pageBackgrounds||s.pageBackgrounds[e].ref!==n.pageBackgrounds[e].ref)&&l(t,n.pageBackgrounds[e].ref,r,i,a,o)}))}(t,n,r,i,a,p);var d=n.type;e.forEach(n,(function(g,f){if(g)if(!o.isOfType(r,d,f,"ref")||s&&!u(t,n,r,f,i)){if(o.isOfType(r,d,f,"refList")&&(!s||u(t,n,r,f,i))){var m=g,v=s&&c(t,n.id,i,r),E=v?e.difference(m,v[f]):m;e.forEach(E,(function(e){l(t,e,i,a,p,r)}))}}else l(t,g,i,a,p,r)}))}function d(t,n,o,i,a){var c={};e.forEach(t,(function(e){p(function(e,t,n){var o=["data",s[t],e.id],r=n.findEntry((function(e){return Boolean(e.getIn(o))}));return r&&r[0]}(e,n,i),e,n,o,i,!0,c)}));var u=function(t,n){return e.reduce(n,(function(n,o,r){return e.isEqual(o,t[r])||(n[r]=o),n}),{})}(t,c);e.isEmpty(u)||function(t,n,o){var i={dataType:n,dataItemType:e(t).map("type").uniq().value().toString()};o&&o.event&&o.event(r.DATA_ITEM_REFS_SAVE_DATAFIXER,i)}(u,n,a),e.assign(t,c)}return{exec:function(t,n,o,r){if(n){var i=t.dataDelta[s.data],c=t.dataDelta[s.design];e.isEmpty(i)||d(i,a.data,n.get("pagesData"),o.get("pagesData"),r),e.isEmpty(c)||d(c,a.design,n.get("pagesData"),o.get("pagesData"),r)}}}}()},function(e,t,n){var o;e.exports=(o=n(0),{exec:function(e,t,n){var r=e.pagesPlatformApplications;r&&(function(e,t){var n=t.getIn(["rendererModel","clientSpecMap"]).toJS();e[o.chain(n).find({type:"siteextension"}).get("appDefinitionId").value()]=o.assign({},e.wixCode),delete e.wixCode}(r,n),e.pagesPlatformApplications=o.transform(r,(function(e,t,n){o.forOwn(t,(function(t,o){e[o]=e[o]||[],e[o].push(n)}))}),{}))}})},function(e,t,n){var o,r,i,a,s,c,u;e.exports=(o=n(0),r=n(1),i=n(28),a=n(13),s=n(7),c={appPart:["wixapps.integration.components.AppPart"],appPart2:["wixapps.integration.components.AppPart2"],tpa:o.concat(o.values(i.COMP_TYPES),o.values(i.TPA_COMP_TYPES))},u=function(e){var t=e.pointers.data.getDataItemFromMaster(r.siteConstants.MASTER_PAGE_ID),n=e.pointers.getInnerPointer(t,"layoutSettings"),i=e.dal.get(n);return o.get(i,"mechanism")===r.siteConstants.LAYOUT_MECHANISMS.MESH},function(e){r.loggingUtils.fedopsLogger.interactionStarted(r.loggingUtils.fedopsLogger.INTERACTIONS.CALCULATE_SITE_META_DATA_RENDER_HINTS);var t=a.getProperty(e,a.PROPERTY_NAMES.SITE_META_DATA);t.renderHints=o.defaults({isMeshReady:u(e),containsAppPart:s.getComponentByType(e,c.appPart).length>0,containsAppPart2:s.getComponentByType(e,c.appPart2).length>0,containsTPA:s.getComponentByType(e,c.tpa).length>0},t.renderHints),a.setProperty(e,a.PROPERTY_NAMES.SITE_META_DATA,t),r.loggingUtils.fedopsLogger.interactionEnded(r.loggingUtils.fedopsLogger.INTERACTIONS.CALCULATE_SITE_META_DATA_RENDER_HINTS)})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g;e.exports=(o=n(135),r=n(108),i=n(210),a=n(212),s=n(514),c=n(105),u=n(213),l=n(214),p=n(215),d=n(216),g=n(5),{getSaveTasksConfig:function(e){var t=g.isOpen("atomicSaveCode");return{primaryTask:o,requiredTasks:t?[c]:[],secondaryTasks:[a,t?u:s,r,l,p,d,i.create(e)]}}})},function(e,t,n){var o;e.exports=(o=n(0),{getItemsDiff:function(e,t,n,r){var i=[],a=[];return e.forEach((function(e,s){e.forEach((function(e,c){var u=t.getIn([s,c]);if(u){var l=e.toJS(),p=u.toJS();if(!o.isEqual(o.omit(l,n),o.omit(p,n))){var d=r?r(l,p):p;i.push(d)}}else a.push(c)}))})),{created:t.reduce((function(t,n,o){var r=e.get(o),i=r?n.filterNot((function(e,t){return r.has(t)})):n;return t.concat(i.toList().toJS())}),[]),updated:i,deleted:a}}})},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(79),r=n(1),i=n(507),a=n(24),s=n(80),c=n(510);function u(e){return["".concat(r.urlUtils.origin(),"/apps/appBuilder/published/").concat(e.applicationInstanceId)]}function l(e){return["".concat(r.urlUtils.origin(),"/apps/appBuilder/saved/").concat(e.applicationInstanceId,"?checkConcurrentModification=true")]}function p(e){return new c(e.event,e.error)}function d(){var e,t,n=new Promise((function(n,o){e=n,t=o}));return{resolve:e,reject:t,promise:n}}function g(t,n){return e(t).filter("success").transform((function(t,o){var r=o.payload.id,i=e.find(n.created,{_iid:r});i&&t.push({path:a.getItemPath(i._type,r,"_state"),value:s.STATES.SAVED})}),[]).value()}return{saveRepo:function(n,o,i){var s=p(i);s.beforeSavingRepo(n);var c=d();if(o){e(o.dataSelectors).filter((function(t){return e.isUndefined(t.dataProviderId)})).forEach((function(e){e.dataProviderId="wixdb"}));var u={urls:l(n),data:e.assign({applicationInstanceVersion:n.applicationInstanceVersion,dataProviders:{wixdb:{type:"WixDb"}},tags:{},pages:{}},o)};r.requestsUtil.createAndSendRequest(u,(function(e,t){if(t||!e.success)c.reject({errorCode:t?e:e.errorCode,changes:null}),s.errorSavingRepo(n,e,t);else{s.successSavingRepo(n,e);var o=null;e.payload.applicationInstanceVersion&&(o=[{path:a.getApplicationInstanceVersionPath(),value:e.payload.applicationInstanceVersion}],n.applicationInstanceVersion=e.payload.applicationInstanceVersion),c.resolve({changes:o})}}),t.ajax)}else s.skippedSavingRepo(n),c.resolve(null);return c.promise},saveItems:function(n,o,c){var u=p(c);u.beforeSavingItems(n,o);var l=d();if(e.some(o,(function(e){return e.length>0}))){var f={urls:["".concat(r.urlUtils.origin(),"/apps/appBuilder/1/editor/Batch?checkConcurrentModification=true")],data:{operations:i.getSaveItemsOperations(n,o)}};r.requestsUtil.createAndSendRequest(f,(function(t,r){var i=e.get(t,"payload.results");if(r||!t.success){var c=i?function(t,n){return e(t).filter("success").transform((function(t,o){var r=o.payload.id,i=e.find(n.created,{_iid:r});if(i)return i._state=s.STATES.SAVED,void t.push({path:a.getItemPath(i._type,r),value:i});e.find(n.deleted,r)&&t.push({path:a.getItemPath(i._type,r),undefined:void 0})}),[]).value()}(i,o):null;l.reject({errorCode:r?t:t.errorCode,changes:c}),u.errorSavingItems(n,t,r)}else l.resolve({changes:g(i,o)}),u.successSavingItems(n,t)}),t.ajax)}else u.skippedSavingItems(n),l.resolve(null);return l.promise},saveRepoAndItems:function(t,n,r,i){var a=[];function s(e){e&&a.push.apply(a,o(e))}var c=d();return this.saveRepo(t,n,i).then(function(n){return s(e.get(n,"changes")),this.saveItems(t,r,i)}.bind(this)).catch((function(t){s(e.get(t,"changes"));var n={changes:a,errorCode:t.errorCode};c.reject(n)})).then((function(t){s(e.get(t,"changes")),c.resolve({changes:a})})).catch((function(t){s(e.get(t,"changes"));var n={changes:a,errorCode:t.errorCode};c.reject(n)})),c.promise},publish:function(e,n){var o=p(n),i=d(),a={urls:u(e),data:{}};return o.beforePublish(e),r.requestsUtil.createAndSendRequest(a,(function(t,n){n||!t.success?(i.reject({errorCode:n?t:t.errorCode}),o.errorPublish(e,t,n)):(i.resolve(t.payload),o.successPublish(e))}),t.ajax),i.promise}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=[i,a,s,function(e,t){var n=t.created;if(0===n.length)return[];return[{name:"CreateTypes",params:{applicationInstanceId:e.applicationInstanceId,applicationInstanceVersion:e.applicationInstanceVersion,types:n}}]}],o=[i,a,s],r=[function(e,t){if(0===t.length)return[];return[{name:"PublishItems",params:{applicationInstanceId:e.applicationInstanceId,applicationInstanceVersion:e.applicationInstanceVersion,itemIds:t}}]},function(e,t){if(0===t.length)return[];return[{name:"PublishTypes",params:{applicationInstanceId:e.applicationInstanceId,applicationInstanceVersion:e.applicationInstanceVersion,names:t}}]}];function i(t,n){return e.map(n.created,(function(e){return{name:"CreateItem",params:{applicationInstanceId:t.applicationInstanceId,applicationInstanceVersion:t.applicationInstanceVersion,item:e}}}))}function a(t,n){return e.map(n.updated,(function(e){return{name:"UpdateItem",params:{applicationInstanceId:t.applicationInstanceId,applicationInstanceVersion:t.applicationInstanceVersion,item:e}}}))}function s(t,n){return e.map(n.deleted,(function(e){return{name:"DeleteItem",params:{applicationInstanceId:t.applicationInstanceId,applicationInstanceVersion:t.applicationInstanceVersion,itemId:e}}}))}function c(t,n,o){return e(t).map((function(e){return e(n,o)})).flattenDeep().value()}return{getSaveOperations:function(e,n){return c(t,e,n)},getSaveItemsOperations:function(e,t){return c(o,e,t)},getPublishOperations:function(e,t){return c(r,e,t)}}}()},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(41),i=n(3),a=n(1).linkTypes,{convertWLinkToWixappsData:function(e){var t={linkId:e.id};switch(e.type){case a.PAGE_LINK:o.assign(t,{_type:"wix:PageLink",pageId:o.isPlainObject(e.pageId)?e.pageId.id:e.pageId});break;case a.DYNAMIC_PAGE_LINK:var n=o.isPlainObject(e.anchorDataId)?e.anchorDataId.id:e.anchorDataId;o.assign(t,{_type:"wix:DynamicPageLink",routerId:e.routerId,innerRoute:e.innerRoute,anchorDataId:n||""});break;case a.EXTERNAL_LINK:var r=e.url.split("://");1===r.length&&(r=["http"].concat(r)),o.assign(t,{_type:"wix:ExternalLink",target:e.target,protocol:r[0],address:r[1]});break;case a.DOCUMENT_LINK:o.assign(t,{_type:"wix:DocLink",docId:e.docId,docName:e.name});break;case a.PHONE_LINK:o.assign(t,{_type:"wix:PhoneLink",phoneNumber:e.phoneNumber});break;case a.EMAIL_LINK:o.assign(t,{_type:"wix:MailLink",email:e.recipient,subject:e.subject});break;case a.ANCHOR_LINK:o.assign(t,{_type:"wix:AnchorLink",anchorName:e.anchorName,anchorDataId:o.isPlainObject(e.anchorDataId)?e.anchorDataId.id:e.anchorDataId,pageId:o.isPlainObject(e.pageId)?e.pageId.id:e.pageId})}return t},convertWixappsDataToWLink:function(e,t){return r.linksConverter(t,(function(t,n){return t=o.isString(t)&&t.replace("#",""),n=o.isString(n)&&n.replace("#",""),i.getDataItemById(e,t,n)}))}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(24);function o(e,n){var o=t.getOffsetFromServerTimePath(),r=e.dal.getByPath(o);return new Date(n-r).toISOString()}return{getCurrentTime:function(t){return o(t,e.now())},normalizeDate:o}}()},function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r,i,a,s;e.exports=(r=n(0),i=n(511),a=n(512),s=n(1),function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventCallback=t,this._errorCallback=n}var t,n,c;return t=e,(n=[{key:"sendEvent",value:function(e,t){try{this._eventCallback(e,t)}catch(e){s.log.error("Error sending BI event",e)}}},{key:"sendError",value:function(e,t){try{this._errorCallback(e,t)}catch(e){s.log.error("Error sending BI error event",e)}}},{key:"beforeSavingItems",value:function(e,t){var n=e.applicationInstanceId,o=e.applicationInstanceVersion,a=t.created,s=t.updated,c=t.deleted;this.sendEvent(i.BEFORE_SAVING_ITEMS,{app_instance_id:n,app_instance_version:o,item_ids_to_create:r.map(a,"_iid").join(","),item_ids_to_update:r.map(s,"_iid").join(","),item_ids_to_delete:c.join(",")})}},{key:"successSavingItems",value:function(e,t){var n=e.applicationInstanceId,o=e.applicationInstanceVersion,a=[];if(r.get(t,"payload.results")){var s=r.isArray(t.payload.results)?r.map(t.payload.results,"payload"):[t.payload.results.payload];a=s&&r.map(s,"id")}this.sendEvent(i.SUCCESS_SAVING_ITEMS,{app_instance_id:n,app_instance_version:o,saved_item_ids:a.join(",")})}},{key:"skippedSavingItems",value:function(e){var t=e.applicationInstanceId,n=e.applicationInstanceVersion;this.sendEvent(i.SKIPPED_SAVING_ITEMS,{app_instance_id:t,app_instance_version:n})}},{key:"errorSavingItems",value:function(e,t,n){var o=e.applicationInstanceId,r=e.applicationInstanceVersion;this.sendError(a.LIST_BUILDER_ERROR_SAVING_ITEMS,{app_instance_id:o,app_instance_version:r,error_code:t?t.errorCode:n,error_description:t&&t.errorDescription})}},{key:"beforeSavingRepo",value:function(e){var t=e.applicationInstanceId,n=e.applicationInstanceVersion;this.sendEvent(i.BEFORE_SAVING_REPO,{app_instance_id:t,app_instance_version:n})}},{key:"successSavingRepo",value:function(e,t){var n=e.applicationInstanceId,o=e.applicationInstanceVersion;this.sendEvent(i.SUCCESS_SAVING_REPO,{app_instance_id:n,old_app_instance_version:o,new_app_instance_version:r.get(t,"payload.applicationInstanceVersion")})}},{key:"skippedSavingRepo",value:function(e){var t=e.applicationInstanceId,n=e.applicationInstanceVersion;this.sendEvent(i.SKIPPED_SAVING_REPO,{app_instance_id:t,app_instance_version:n})}},{key:"errorSavingRepo",value:function(e,t,n){var o=e.applicationInstanceId,r=e.applicationInstanceVersion;this.sendError(a.LIST_BUILDER_ERROR_SAVING_REPO,{app_instance_id:o,app_instance_version:r,error_code:t?t.errorCode:n,error_description:t&&t.errorDescription})}},{key:"beforePublish",value:function(e){var t=e.applicationInstanceId,n=e.applicationInstanceVersion;this.sendEvent(i.BEFORE_PUBLISH,{app_instance_id:t,app_instance_version:n})}},{key:"successPublish",value:function(e){var t=e.applicationInstanceId,n=e.applicationInstanceVersion;this.sendEvent(i.SUCCESS_PUBLISH,{app_instance_id:t,app_instance_version:n})}},{key:"errorPublish",value:function(e,t,n){var o=e.applicationInstanceId,r=e.applicationInstanceVersion;this.sendError(a.LIST_BUILDER_ERROR_PUBLISH,{app_instance_id:o,app_instance_version:r,error_code:t?t.errorCode:n,error_description:t&&t.errorDescription})}}])&&o(t.prototype,n),c&&o(t,c),e}())},function(e,t){e.exports={BEFORE_SAVING_ITEMS:{src:59,endpoint:"listim2",evid:201,fields:{app_instance_id:"string",app_instance_version:"string",item_ids_to_create:"string",item_ids_to_update:"string",item_ids_to_delete:"string"}},SUCCESS_SAVING_ITEMS:{src:59,endpoint:"listim2",evid:202,fields:{app_instance_id:"string",app_instance_version:"string",saved_item_ids:"string"}},SKIPPED_SAVING_ITEMS:{src:59,endpoint:"listim2",evid:203,fields:{app_instance_id:"string",app_instance_version:"string"}},BEFORE_SAVING_REPO:{src:59,endpoint:"listim2",evid:211,fields:{app_instance_id:"string",app_instance_version:"string"}},SUCCESS_SAVING_REPO:{src:59,endpoint:"listim2",evid:212,fields:{app_instance_id:"string",old_app_instance_version:"string",new_app_instance_version:"string"}},SKIPPED_SAVING_REPO:{src:59,endpoint:"listim2",evid:213,fields:{app_instance_id:"string",app_instance_version:"string"}},BEFORE_PUBLISH:{src:59,endpoint:"listim2",evid:221,fields:{app_instance_id:"string",app_instance_version:"string"}},SUCCESS_PUBLISH:{src:59,endpoint:"listim2",evid:222,fields:{app_instance_id:"string",app_instance_version:"string"}}}},function(e,t){e.exports={LIST_BUILDER_ERROR_SAVING_ITEMS:{src:40,endpoint:"trg",errorName:"list_builder_error_saving_items",errorCode:101,params:{p1:"app_instance_id",p2:"app_instance_version",p3:"error_code",p4:"error_description"}},LIST_BUILDER_ERROR_SAVING_REPO:{src:40,endpoint:"trg",errorName:"list_builder_error_saving_repo",errorCode:102,params:{p1:"app_instance_id",p2:"app_instance_version",p3:"error_code",p4:"error_description"}},LIST_BUILDER_ERROR_PUBLISH:{src:40,endpoint:"trg",errorName:"list_builder_error_publish",errorCode:103,params:{p1:"app_instance_id",p2:"app_instance_version",p3:"error_code",p4:"error_description"}}}},function(e,t){e.exports=function(){function e(e){return e.getIn(["wixapps","appbuilder","descriptor","applicationInstanceVersion"])}function t(e){var t=e.getIn(["rendererModel","clientSpecMap"]).find((function(e){return"appbuilder"===e.get("type")}));return t&&t.get("instanceId")}return{getAppInstance:function(n){return{applicationInstanceId:t(n),applicationInstanceVersion:e(n)}},getAppInstanceId:t,getAppVersion:e}}()},function(e,t,n){e.exports=function(){var e=n(105),t=n(213);function o(n,o,r,i){e.fullSave(n,o,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{changes:[]};t.fullSave(n,o,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{changes:[]};r({changes:e.changes.concat(t.changes)})}),i)}),i)}return{partialSave:o,fullSave:o,firstSave:o,saveAsTemplate:o,autosave:function(){return e.autosave.apply(e,arguments)},publish:function(e,t){t()},getTaskName:function(){return"saveCode"},getSnapshotTags:function(e){switch(e){case"autosave":return["autosave"];default:return["primary","autosave"]}}}}()},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(5),r=n(88),i=n(106),a=n(71),s=n(101),{installCollections:function(e,t,n){return o.isOpen("ds_provision_with_collections")?function(e,t){return r.requestsUtil.fetchJson("https://apps.wix.com/app-studio-server/getToken/".concat(e,"/").concat(t)).then((function(e){if(!e)throw new Error("bad response");return e.token}))}(t,n).then((function(t){if(t)return function(e){return new Promise((function(t,n){if(!a.isProvisioned(e))return s.provision(e,{onSuccess:t,onError:n});t()}))}(e).then((function(){return function(e,t){return a.ensureAppIsWriteable(e).then((function(){var n=i.getCodeAppInfoFromPS(e);return r.requestsUtil.fetchJson("https://www.wix.com/_api/cloud-data-packaging/v1/install-data",{mode:"cors",method:"POST",credentials:"include",headers:{Authorization:n.signedInstance},body:JSON.stringify({signedInstance:n.signedInstance,gridAppId:n.appId,packageToken:t})})}))}(e,t)}))})):Promise.resolve()}})},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(0),r=n(79),i=n(4),a=n(14),s=function(e,t){var n=r(window);return(n.height()-e.height)/2+n.scrollTop()-t.y},c=function(e){return null!==e&&!isNaN(e)},{getCompLayoutFrom:function(e,t,n){if(n&&c(n.x)&&c(n.y)){var r=n,u=r.x,l=r.y;return o.isNumber(u)||(u=parseInt(u,10)),o.isNumber(l)||(l=parseInt(l,10)),{width:n.width,height:n.height,x:u,y:l}}var p=a.getViewMode(e),d=e.pointers.components.getPagesContainer(p),g=i.layout.get(e,d);if(n=n||{},t.width=n.width||t.width,t.height=n.height||t.height,t.defaultPosition)switch(t.defaultPosition.region){case"header":var f=e.pointers.components.getHeader(p),m=i.layout.get(e,f);return function(e,t,n){var r={y:n.height/2-t.height/2,width:t.width,height:t.height};switch(e){case"LEFT":return o.merge(r,{x:0});case"RIGHT":return o.merge(r,{x:n.width-t.width});default:return o.merge(r,{x:n.width/2-t.width/2})}}(t.defaultPosition.placement,t,m);case"footer":var v=e.pointers.components.getFooter(p),E=i.layout.get(e,v);return function(e,t,n,r){var i={y:n.height+r.height/2-t.height/2,width:t.width,height:t.height};switch(e){case"LEFT":return o.merge(i,{x:0});case"RIGHT":return o.merge(i,{x:r.width-t.width});default:return o.merge(i,{x:r.width/2-t.width/2})}}(t.defaultPosition.placement,t,g,E);default:return function(e,t,n){var r={width:t.width,height:t.height};switch(e){case"TOP_LEFT":return o.merge(r,{x:0,y:0});case"TOP_CENTER":return o.merge(r,{x:n.width/2-t.width/2,y:0});case"TOP_RIGHT":return o.merge(r,{x:n.width-t.width,y:0});case"CENTER_LEFT":return o.merge(r,{x:0,y:s(t,n)});case"CENTER_RIGHT":return o.merge(r,{x:n.width-t.width,y:s(t,n)});case"BOTTOM_LEFT":return o.merge(r,{x:0,y:n.height-t.height});case"BOTTOM_CENTER":return o.merge(r,{x:n.width/2-t.width/2,y:n.height-t.height});case"BOTTOM_RIGHT":return o.merge(r,{x:n.width-t.width,y:n.height-t.height});default:return o.merge(r,{x:n.width/2-t.width/2,y:s(t,n)})}}(t.defaultPosition.placement,t,g)}return{width:t.width,height:t.height,x:g.width/2-t.width/2,y:s(t,g)}}})},function(e,t,n){e.exports=function(){var e=n(0),t=(n(79),n(10)),o=n(4),r=n(20),i=n(7),a=n(18),s=n(16),c=n(147),u=n(111),l=n(31),p=n(99),d=n(28),g=n(219),f="WIDGET",m="PAGE",v=function(n,o,a,s){var c;if(o)if(a)e.includes(t.styles.getAllIds(n),a)&&(c=a);else{var u=i.getComponentById(n,s);c=r.style.getId(n,u)}return c};function E(t,n,o,r){var i=t.siteAPI.getFocusedRootId(),a=e.get(o,"widget.wixPageId")||i,c=s.getWidgetDataFromTPAWidgetId(t,n.appDefinitionId,e.get(o,"widget.tpaWidgetId"));return{pageId:a,widgetId:e.get(c,"widgetId"),showOnAllPages:e.get(o,"widget.allPages"),styleId:v(t,o.copyStyle,o.styleId,r)}}var y=function(t,n,o,r,i){var a=t.siteAPI.getFocusedRootId(),c=e.get(i,"widget.wixPageId")||a;t.pointers.page.isExists(c)||i.widget.allPages?s.getWidgetDataFromTPAWidgetId(t,o.appDefinitionId,e.get(i,"widget.tpaWidgetId"))?function(t,n,o,r,i){e.assign(t,E(n,i,t,o)),g.provisionWidget(n,r,i.appDefinitionId,t)}(i,t,r,n,o):t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"No widget found."}):t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"pageId was not found."})},I=function(e,t,n,o,r){if(o)switch(r.componentType){case"WIDGET":y(e,t,o,n,r);break;case"PAGE":h(e,t,o,n,r);break;default:e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"componentType not supported."})}else e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"General Error."})},S=function(t,n,o){return{pageId:e.get(n,"page.pageId"),title:e.get(n,"page.title"),styleId:v(t,n.copyStyle,n.styleId,o),layout:P(n),isHidden:e.get(n,"page.isHidden"),requireLogin:e.get(n,"page.requireLogin")}};var h=function(t,n,o,r,i){var a=s.getWidgetDataFromTPAPageId(t,o.appDefinitionId,e.get(i,"page.pageId"));a?s.isMultiSectionInstanceEnabled(o,a.widgetId)?function(t,n,o,r,i){e.assign(o,S(t,o,i)),g.provisionMultiSection(t,n,r.appDefinitionId,o)}(t,n,i,o,r):l.isSectionInstalledByTpaPageId(t,o.applicationId,e.get(a,"appPage.id"))?t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"Page already installed."}):function(t,n,o,r){e.assign(n,S(t,n,o)),t.setOperationsQueue.asyncPreDataManipulationComplete(r)}(t,i,r,o):t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"No page found."})},P=function(t){var n={};return e.isNumber(t.x)&&(n.x=t.x),e.isNumber(t.y)&&(n.y=t.y),e.isNumber(t.width)&&(n.width=t.width),e.isNumber(t.height)&&(n.height=t.height),n},A=function(t,n,r){if("WIDGET"===r.componentType){var i=t.siteAPI.getPrimaryPageId(),s=t.pointers.page.getPagePointer(i);return o.getComponentToAddRef(t,s,r,e.get(r,"optionalCustomId"))}return a.getPageIdToAdd(t)},T=function(t,n,o,r){if(o){var i=l.getAllAppCompsByAppId(t,n.applicationId);return e.find(i,{widgetId:e.get(o,"widgetId")})||e.find(i,{widgetId:null})}return r({onError:"No widget found."}),null},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t?p.getAppMarketDataAsync(e,t).then((function(o){o&&!o.error?(n.componentType=o.hasSection?"PAGE":"WIDGET",n.componentToAddRef=A(e,0,n),n.componentType===f?(n.layout=O(n),n.pageId&&!e.pointers.page.isExists(n.pageId)&&delete n.pageId,g.provisionWidget(e,n.componentToAddRef,t,n)):n.componentType===m&&(c.alreadyInstalled(e,t)?e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"Section already installed"}):(n.layout=D(n),g.provisionSection(e,n.componentToAddRef,t,n,n.callback)))):e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"Application with ".concat(t," appDefinitionId do not exist.")})})):e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"appDefinitionId is mandatory."})},O=function(t){var n={};return t&&e.isNumber(t.x)&&e.isNumber(t.y)&&(n={x:t.x,y:t.y}),n},C=function(t){return"WIDGET"===e.get(t,"componentType")?O(t):D(t)},D=function(t){var n={};return t&&(e.isNumber(t.x)&&(n.x=t.x),e.isNumber(t.y)&&(n.y=t.y),e.isNumber(t.width)&&(n.width=t.width),e.isNumber(t.height)&&(n.height=t.height)),n};return{provisionComp:function(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.appDefinitionId;if(r)if(l.isAppInstalledBy(t,r))n=s.getAppDataByAppDefinitionId(t,r),o.componentToAddRef=A(t,0,o),I(t,o.componentToAddRef,o.compId,n,o);else{var i=e.clone(o);e.forEach(e.keys(o),(function(e){delete o[e]})),o.appFlow=!0,o.componentOptions=i,o.componentOptions.layout=C(i),o.callback=i.callback,_(t,r,o)}else t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"appDefinitionId is mandatory."})},addComponent:function t(n,o,r){if(o.onError)e.isFunction(r.callback)&&r.callback(o);else{if(r.appFlow){var a=r.callback||e.noop;r.callback=function(){var l=s.getAppDataByAppDefinitionId(n,r.componentOptions.appDefinitionId);if(function(t,n){var o=e.find(t.widgets,(function(t){return"WIDGET"===n.componentType?t.tpaWidgetId===n.widget.tpaWidgetId:"PAGE"===n.componentType?e.get(t,"appPage.id")===n.page.pageId:null}));return!!e.get(o,"autoAddToSite")}(l,r.componentOptions))!function(e,t,n,o){var r,a;if("WIDGET"===t.componentType){if(r=s.getWidgetDataFromTPAWidgetId(e,n.appDefinitionId,t.widget.tpaWidgetId),a=T(e,n,r,o)){var l=i.getComponentById(e,a.id);u.invokeWidgetCallback({callback:o},l,!0)}}else if("PAGE"===t.componentType&&(r=s.getWidgetDataFromTPAPageId(e,n.appDefinitionId,t.page.pageId),a=T(e,n,r,o))){var p=e.pointers.components.getPage(a.pageId,e.siteDataAPI.siteData.getViewMode());c.invokeSectionCallback({callback:o},p,a.id,!0)}}(n,r.componentOptions,l,a);else{var p={componentType:r.componentOptions.componentType,componentToAddRef:A(n,r.componentOptions.appDefinitionId,r.componentOptions),callback:a};p.componentType===f?e.assign(p,E(n,l,r.componentOptions,r.compId)):p.componentType===m&&e.assign(p,S(n,r.componentOptions,r.compId)),t(n,o,p)}}}switch(r.componentType){case"WIDGET":g.addAppWrapper(d.TYPE.TPA_WIDGET,n,o,r.componentToAddRef,o.appDefinitionId,r);break;case"PAGE":if(r.appFlow)g.addSection(n,o,r.componentToAddRef,o.appDefinitionId,r);else{var p=s.getWidgetDataFromTPAPageId(n,o.appDefinitionId,e.get(r,"pageId"));p&&(s.isMultiSectionInstanceEnabled(o,p.widgetId)?g.addMultiSection(n,o,r.componentToAddRef,o.appDefinitionId,r):l.isSectionInstalledByTpaPageId(n,o.applicationId,e.get(p,"appPage.id"))||g.addSubSection(n,r.componentToAddRef,o.appDefinitionId,r))}}}},provisionApp:_,addApp:function(t,n,o,r){if(n.onError)e.isFunction(r.callback)&&r.callback(n);else switch(r.componentType){case f:g.addAppWrapper(d.TYPE.TPA_WIDGET,t,n,r.componentToAddRef,o,r);break;case m:g.addSection(t,n,r.componentToAddRef,o,r)}}}}()},function(e,t){e.exports={getComponentDefinition:function(e){return{addHoneycomb:{layout:{rotationInDegrees:0,width:626,height:723,scale:1,x:130,y:32,fixedPosition:!1},componentType:"tpa.viewer.components.Honeycomb",type:"Component",skin:"wysiwyg.viewer.skins.TPAHoneycombSkin",data:{items:[{type:"Image",title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569}],type:"ImageList"},props:{numOfColumns:4,numOfHoles:2,imageShape:"hexagon",expandEnabled:!1,margin:1,font:"arial",imageScale:"x1",textMode:"titleAndDescription",alignText:"left",rolloverAnimation:"colorOnly",galleryImageOnClickAction:"zoomMode",type:"HoneycombProperties",layoutSeed:50},style:{componentClassName:"tpa.viewer.components.Honeycomb",pageId:"",compId:"i4skqikv",styleType:"custom",style:{propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},properties:{"alpha-color4":"0.7","alpha-color5":"1",color1:"color_18",color2:"color_1",color3:"color_15",color4:"color_11",color5:"color_11",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAHoneycombSkin"}}}[e&&e.compType]}}},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f;e.exports=(o=n(0),r=n(12),i=n(33),a=n(16),s=n(13),c=n(4),u=n(7),l=n(30),p=n(83),d=function(e){var t,n,r=p.current.get(e),i=p.original.get(e),a=p.getFull(e),s=l.getCurrency(e),c=l.getTimeZone(e);return r&&(o.get(i,"languageCode")===r?(t=i.locale,n="true"):(t=o.get(o.find(a,{languageCode:r}),"locale"),n="false")),{lang:r,dateNumberFormat:t,isPrimaryLanguage:n,currency:s,timeZone:c}},g=function(e,t,n){if(t.url){var r=a.getAppData(e,t.applicationId),l=s.getProperty(e,s.PROPERTY_NAMES.LANGUAGE_CODE)||"en",p=e.siteAPI.getCurrentUrl(),g=i.common.utils.appendProtocolToUrlIfNeeded(t.url,p),m=i.common.utils.getDebuggingParamsFromUrl(p),v=d(e),E=c.data.get(e,u.getComponentById(e,t.origCompId));return new i.common.TPAUrlBuilder(g).addLocale(l).addOrigCompId(t.origCompId).addCompId(n).addDeviceType(t.deviceType).addViewMode("editor").addInstance(r.instance).addOrigin(t.origin).addMultipleQueryParams(m).addQueryParamsFromFunc(f,o.get(t,"bi")).setHash(t.hash).addExternalId(o.get(E,"referenceId")).addLang(v.lang).addDateNumberFormat(v.dateNumberFormat).addIsPrimaryLanguage(v.isPrimaryLanguage).addCurrency(v.currency).addTimeZone(v.timeZone).build()}return null},f=function(e,t){if(o.isObject(t))try{t=JSON.stringify(t),e.build().length<2083-t.length&&e.addCbi(t)}catch(e){r.log.error("could not add CBI param to URL:",e)}},{getSettingsModalParams:function(e,t,n){var o=r.guidUtils.getUniqueId();return n.compId=o,n.url=g(e,t,o),n.title=n.title||"",n},getSettingsUrl:function(e,t,n,r,l){var p=a.getAppData(e,t),g=o.get(l,"isNewVersion",!1),m=p.settingsUrl,v=p.widgets&&p.widgets[n];if(v){var E=o.get(v,"settings");m=(g?o.get(E,"urlV2"):o.get(E,"url"))||m}var y=o.get(l,"width")?l.width:p.settingsWidth,I=s.getProperty(e,s.PROPERTY_NAMES.LANGUAGE_CODE)||"en",S=d(e),h=e.siteAPI.getCurrentUrl(),P=i.common.utils.getDebuggingParamsFromUrl(h),A=c.data.get(e,u.getComponentById(e,r)),T=new i.common.TPAUrlBuilder(m).addInstance(p.instance).addLocale(I).addOrigCompId(r).addWidth(o.toString(y)).addEndpointType("settings").addViewMode("editor").addCompId("tpaSettings").addMultipleQueryParams(P).addQueryParamsFromFunc(f,o.get(l,"bi")).addExternalId(o.get(A,"referenceId")).addLang(S.lang).addDateNumberFormat(S.dateNumberFormat).addIsPrimaryLanguage(S.isPrimaryLanguage).addCurrency(S.currency).addTimeZone(S.timeZone);return e.siteAPI.isMobileView()&&(T=T.addDeviceType("mobile")),T.build()},getSettingsModalUrl:g})},function(e,t){var n,o,r,i;e.exports=(r=function(e,t,r){return function(i){try{o(e,{intent:r||n.TPA_RESPONSE,callId:t.callId,type:t.type,res:i,status:!0})}catch(e){}}},{Intents:n={TPA_MESSAGE:"TPA",TPA_MESSAGE_PREVIEW:"TPA_PREVIEW",TPA_MESSAGE2:"TPA2",TPA_RESPONSE:"TPA_RESPONSE",TPA_PREVIEW_RESPONSE:"TPA_PREVIEW_RESPONSE",PINGPONG_PREFIX:"pingpong:"},callPostMessage:o=function(e,t,n){var o="";try{o=JSON.stringify(t)}catch(e){return}e.postMessage||(e=e.contentWindow),e.postMessage(o,n||"*")},generateResponseFunction:r,isTPAMessage:i=function(e){return e===n.TPA_MESSAGE||e===n.TPA_MESSAGE2},fixOldPingPongMessageType:function(e){return e.replace(n.PINGPONG_PREFIX,"")},handleTPAMessage:function(e,t,o,a){var s=function(e){var t;try{e.data?t=JSON.parse(e.data):e.originalEvent&&e.originalEvent.data&&(e=e.originalEvent,t=JSON.parse(e.data))}catch(e){}return t}(a);s&&i(s.intent)?o(e,s,r(a.source,s),a):s&&s.intent===n.TPA_MESSAGE_PREVIEW&&o(e,s,r(a.source,s,n.TPA_PREVIEW_RESPONSE),a)}})},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(1),{generateRouterId:function(e){for(var t=r.guidUtils.getUniqueId("routers","-");o(e).keys().includes(t);)t=r.guidUtils.getUniqueId("routers","-");return t}})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(1),i=n(523),a=n(3),s=n(10),{beforeAdd:function(e,t,n,c){if(!o.get(c,"props.menuItemHeight")&&o.get(c,"layout.height")){var u=c.layout.height,l=a.getDataItemById(e,c.data.menuRef.replace("#","")).items,p=o.filter(l,"isVisible").length,d=o.isString(c.style),g=e.pointers.components.getPageOfComponent(n).id,f=d?s.styles.get(e,c.style,g):c.style,m=parseInt(f.style.properties.sepw||f.style.properties.separatorHeight||0,10),v=i[c.skin],E=r.verticalMenuCalculations.getItemHeight(u,m,p,v);c.props.menuItemHeight=E}}})},function(e,t){e.exports=B},function(e,t,n){e.exports=function(){var e=n(0);function t(t,n){var o=t.pointers.data.getDataItem(n,n),r=e.get(t.dal.get(o),"pageBackgrounds",{}),i=r.mobile;i&&!i.mediaSizing&&(i.mediaSizing="viewport",t.dal.merge(o,{pageBackgrounds:r}))}return{setMobileMediaSizing:t,setMobileMediaSizingByPointer:function(e,n){t(e,n.id)},setMediaSizingForDevice:function(e,n,o){"mobile"===o&&t(e,n)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),o=n(38);function r(e){return e?t.VIEW_MODES.MOBILE:t.VIEW_MODES.DESKTOP}return{handleHeaderLayoutChange:function(t,n,i){var a=t.dal.get(n).layout;if(!e.isUndefined(i.fixedPosition)&&a.fixedPosition!==i.fixedPosition&&!1===i.fixedPosition){var s={type:"scrub",viewMode:r(t.siteAPI.isMobileView())};o.removeComponentsBehaviorsWithFilter(t,n,s)}}}}()},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(1),r=n(65),i=n(4),a=n(3),s=n(7),c=n(179),u="platform.components.AppController",l="platform.components.AppWidget";function p(t,n){return e.map(n,(function(n){var o=e.get(n,"controllerId");return t[o]?e.assign({},n,{controllerId:t[o]}):n}))}function d(t,n,o,r){return e(o).filter((function(o){return function(t,n,o,r){var i=e.get(r,"controllerId");return e(n).map((function(n){return e.get(a.getDataItem(t,n),"id")})).some((function(e){return i===e||e===o[i]}))}(t,n,r,o)})).thru(e.partial(p,r)).value()}function g(t,n,r,a,p,g){var f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};c.updateNicknameContextByNewContainer(t,n,a,r);var m=e.get(a,"connections.items"),v=e.reject(m,{type:"WixCodeConnectionItem"});if(!e.isEmpty(v)){var E=function(t,n,r,a){var c=n?r:t.pointers.full.components.getPageOfComponent(a).id,p=s.getAllComponents(t,c,(function(e){return i.getType(t,e)===u})),d=e.filter([a].concat(o(i.getAncestorsFromFull(t,a))),(function(e){return i.getType(t,e)===l}));return[].concat(o(p),o(d))}(t,g,a.id,r),y=d(t,E,v,f),I=e.difference(m,v);e.set(a,"connections.items",I.concat(y))}}return{updateSerializedConnectionsData:function(e,t,n,o,r,i,a){i||g.apply(void 0,arguments)},updateSerializedConnectionsDataForPage:function(e,t,n,o,r){var i=n.connections;g(e,null,null,n,o,!0,r),i&&a.addSerializedConnectionsItemToPage(e,t.id,i,o)},removeInvalidConnections:function(n,o,a){var s=i.getPage(n,o).id,c=i.getPage(n,a).id;if(s!==t.siteConstants.MASTER_PAGE_ID&&s!==c){var u=n.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(o);e.forEach(u,(function(t){var o=r.getPlatformAppConnections(n,t);e.forEach(o,(function(o){var a,s=e.get(o,"controllerRef");i.getPage(n,s).id===c||(a=s,e.some(u,(function(e){return n.pointers.isSamePointer(e,a)})))||r.disconnect(n,t,s)}))}))}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t="wysiwyg.viewer.components.ContactForm",o="ContactForm";function r(t,n){var o=t.dal.get(t.pointers.general.getContactFormsMetaData())[n.id];e.merge(n,o)}function i(t,n,o){if(o){var r=t.pointers.general.getContactFormsMetaData(),i=t.dal.get(r)[o.id],a=e.assign({},i,e.pick(o,e.keys(i))),s=t.pointers.getInnerPointer(r,o.id);t.dal.set(s,a)}}return{initContactFromHooks:function(e){e.registerHook(e.HOOKS.DATA.AFTER_GET,r,o),e.registerHook(e.HOOKS.DATA.UPDATE_BEFORE,i,t)}}}()},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(188),i=n(4),a=n(3),s=["width","height"],{beforeAddHook:function(e,t,n,r){!function(e){if(1!==o.size(e.components))throw new Error("Invalid app widget structure - must have single child")}(r),function(e){var t=e.components[0];o.merge(t,{layout:{x:0,y:0}}),o.forEach(s,(function(n){o.has(e,["layout",n])?t.layout[n]=e.layout[n]:o.has(t,["layout",n])&&o.set(e,["layout",n],t.layout[n])}))}(r)},handleAppWidgetAddition:function(e,t,n){r.setControllerStateFromSerializedStructure(e,t,n),r.addPlatformAppToPageIfFirstController(e,t,n.data.applicationId)},handleAppWidgetDeletion:function(e,t){r.removePlatformApplicationFromPageIfLastController(e,t),r.removeControllerFromStateMap(e,t)},handleAppWidgetSerialization:function(e,t,n){r.addControllerStateToSerializedStructure(e,t,n)},handleAppWidgetParentChange:function(e,t,n){var o=a.getDataItem(e,t).applicationId;r.removePlatformApplicationFromPageIfLastController(e,t),r.addPlatformAppToPageIfFirstController(e,t,o,i.getPage(e,n))}})},function(e,t,n){var o;e.exports=(o=n(148),{removeComponentHook:function(e,t){(o.getComponentPreviewState(e)||{})[t.id]&&o.setComponentPreviewState(e,t.id,null)}})},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(4),i=n(8),{setMobileComponentAsDead:function(e,t){if(!(e.pointers.components.isPage(t)||e.pointers.components.isMobile(t)||e.dal.full.isExist(t))){var n=e.pointers.full.components.getMobilePointer(t);if(e.dal.full.isExist(n)){var a=e.pointers.full.components.getParent(n);a&&function(e,t){var n=o.get(e.pointers.full.components.getPageOfComponent(t),"id",""),r=e.dal.full.get(t);return!i.public.getMobileConversionConfigByName(e,r,"nonLayoutComponent",n)}(e,n)&&function(e,t,n){var o=e.dal.full.get(t),i={id:"dead-".concat(o.id),type:"Container",componentType:"to.be.removed.by.MobileMerge",layout:o.layout,components:[]},a=e.pointers.full.components.getChildrenContainer(n),s=r.getComponentToAddRef(e,n,i,i.id);e.dal.full.push(a,i,s)}(e,n,a),e.dal.full.remove(n)}}}})},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(11),i=n(3),{beforeUpdateCheckboxData:function(e,t,n){if(!o.isEmpty(n.label)&&o.isEmpty(i.getDataItem(e,t).label)){var a=e.dal.get(t),s=i.getPropertiesItem(e,t),c=o.clamp(a.layout.height,12,100);i.setPropertiesItem(e,t,o.assign(s,{buttonSize:c})),r.updateCompLayoutAndAdjustLayout(e,t,{width:c+200},!0)}},afterUpdateCheckboxData:function(e,t,n){if(o.isEmpty(i.getDataItem(e,t).label)&&!o.isEmpty(n.label)){var a=i.getPropertiesItem(e,t).buttonSize||18;r.updateCompLayoutAndAdjustLayout(e,t,{width:a,height:a},!0)}}})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(11),i=n(4),a=n(62),s=n(17),{copyRootComponentDockedLayout:function(e,t){o.forEach(o.filter(t,(function(t){var n=t.id;return a.isWidgetPage(e,n)})),(function(t){var n=o.head(i.getChildren(e,e.pointers.components.getDesktopPointer(t))),a=r.getDock(e,n);o.isEmpty(a)||s.syncDockData(e,n,a,r)}))}})},function(e,t,n){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(3),r=n(534),i=n(5),a=r.labelUtils,s=a.minInputHeight,c=a.defaultInputHeight;function u(n,r,i,a){var c="DESKTOP"===a?"inputHeight":"inputHeightMobile",u=n.dal.get({type:a,id:r.id});if(u){var l=Math.max(u.layout.height,s);t.setPropertiesItem(n,r,e.assign(i,o({},c,l)))}}return{beforeUpdateInputLabelData:function(n,o,r){if(!e.isEmpty(r.label)&&e.isEmpty(t.getDataItem(n,o).label)){var a=t.getPropertiesItem(n,o),s=e.partial(u,n,o,a);s("DESKTOP"),i.isOpen("sv_inputElementsLabelMobileHooks")&&s("MOBILE")}},beforeUpdateInputLabelLayout:function(n,r,a){if(a.height){var u=i.isOpen("sv_inputElementsLabelMobileHooks")&&n.pointers.components.isMobile(r)?"inputHeightMobile":"inputHeight",l=n.dal.get(r),p=t.getPropertiesItem(n,r),d=!e.isEmpty(t.getDataItem(n,r).label),g=l.layout,f=(p[u]||c)+a.height-g.height,m=d?f:a.height,v=Math.max(s,m);t.setPropertiesItem(n,r,e.assign(p,o({},u,v)))}}}}()},function(e,t){e.exports=F},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(0),r=n(29),i=n(7),a=n(63),s=n(4),c="wysiwyg.viewer.components.SiteRegionContainer",{removeOverridesPointingToMode:function(e,t,n){var u=r.getComponentActiveModeIds(e,t),l=!o.includes(u,n);l&&r.activateComponentMode(e,t,n);var p=i.getComponentByType(e,c,t),d=a.getSOSPModes(e),g=o.map(d,"modeId");o.forEach(p,(function(i){var a=r.overrides.getAllOverrides(e,i);if(function(e,t){return o(e).flatMap("modeIds").includes(t)}(a,n)){var c=o.reduce(a,(function(e,t){var r=t.modeIds,i=o.cloneDeep(t);return i.modeIds=o.without(r,n),o.isEmpty(i.modeIds)||e.push(i),e}),[]),u=o.flatMap(c,"modeIds");o.isEmpty(c)||o.isEmpty(o.intersection(u,g))?s.remove(e,i):(l&&r.deactivateCompMode(e,t,n),r.overrides.updateComponentOverrides(e,i,c))}}))}})},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(23),i=n(57),{afterAddInput:function(e,t,n){o.isString(n.props.placeholder)&&n.data.placeholder!==n.props.placeholder&&r.event(e,i.INPUT_WRONG_PLACEHOLDER,{comp_id:t.id})}})},function(e,t,n){var o,r,i,a,s,c,u,l;e.exports=(o=n(0),r=n(12),i=n(1),a=n(59),s=n(4),c=n(8),u=r.constants.DATA_TYPES,l=function(e){return o(e).split("-").slice(0,-1).value().join("-")},{beforeDeserialize:function(e,t,n,r){if(r){var s=e.pointers.data.getItem(n,r);if(i.displayedOnlyStructureUtil.isRefPointer(s)){var c=function e(t,n,r,s){if(!o.isObject(s))return s;var c=t.pointers.data.getItem(r,s.id);i.displayedOnlyStructureUtil.isRefPointer(c)||(s.id=i.guidUtils.getUniqueId(n,"-"));var u=s.type;return o.forOwn(s,(function(i,c){o.isPlainObject(i)&&a.isOfType(r,u,c,"ref")?s[c]=e(t,n,r,i):a.isOfType(r,u,c,"refList")?s[c]=o.map(i,e.bind(null,t,n,r)):"id"!==c&&(s[c]=i)})),s}(e,l(r),n,t);return n===u.connections?function(e,t){return t.items=o.reject(t.items,(function(t){var n=t.controllerId;if(!t.isPrimary)return!1;var o=e.pointers.data.getItem(u.connections,n);return i.displayedOnlyStructureUtil.isRefPointer(o)})),t}(e,c):c}}return t},removeRefCompWhenItsRootIsDeleted:function(e,t,n,o,r,i,a){c.shouldBeRemovedByParent(e,t,a)&&s.deleteComponent(e,a)}})},function(e,t,n){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r,i,a,s,c,u,l,p;e.exports=(r=n(0),i=n(6),a=n(15),s=n(227),c=n(541).default,u={beforeUpdateProperties:{hookName:i.HOOKS.PROPERTIES.UPDATE_BEFORE,pluginDataType:"properties"},beforeUpdateData:{hookName:i.HOOKS.DATA.UPDATE_BEFORE,pluginDataType:"data"},beforeUpdateLayout:{hookName:i.HOOKS.LAYOUT.UPDATE_BEFORE,pluginDataType:"layout"}},l=function(e){return function(t){return r.merge(e,t)}},{createHookDefinition:function(e,t){var n=u[e],i=n.hookName,a=n.pluginDataType;if(i)return{hookName:i,hook:function(e,t){return function(n,i,a){if(r.isFunction(t)){var c=s(n,i,{overrides:o({},e,{update:l(a)}),read:!0,write:!0});t(c,r.cloneDeep(a))}}}(a,t)}},beforeUpdateData:(p=function(e,t){return function(n,i,u){var p=a.getComponentType(n,i),d=r.get(c,[p,e]);r.isFunction(d)&&d(s(n,i,{overrides:o({},t,{update:l(u)}),read:!0,write:!0}),r.cloneDeep(u))}})("beforeUpdateData","data"),beforeUpdateLayout:p("beforeUpdateLayout","layout"),beforeUpdateProperties:p("beforeUpdateProperties","properties")})},function(e,t,n){var o,r;e.exports=(o=n(4),r=n(3),function(e,t){return{layout:{get:function(){return o.layout.get(e,t)}},data:{get:function(){return r.getDataItem(e,t)}},properties:{get:function(){return o.properties.get(e,t)}},isMobile:function(){return e.pointers.components.isMobile(t)}}})},function(e,t,n){var o,r,i;e.exports=(o=n(4),r=n(11),i=n(3),function(e,t){var n=function(n){return function(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return n.apply(void 0,[e,t].concat(r))}};return{layout:{update:n(r.updateCompLayout)},data:{update:n(i.updateDataItem)},properties:{update:n(o.properties.update)}}})},function(e,t){e.exports=k},function(e,t,n){e.exports=function(){var e=n(0),t=n(204),o=n(208),r=n(1),i=n(6),a=n(228),s=n(229),c="initial state";function u(t){return e.isEqual(t,["runtime"])}function l(e,t,n){this.undoablePaths=S(t),this.nonUndoablePaths=S(n),this.undoStack=[],this.redoStack=[],g(e),p.call(this,e),this.add(c)}function p(e){this.undo=y.bind(this,e),this.redo=I.bind(this,e),this.add=A.bind(this,e),this.applyLatestSnapshot=d.bind(this,e)}function d(t){var n=e.last(this.undoStack);return n?(t.setOperationsQueue.runSetOperation(E,[n,t.dal,this.undoablePaths,this.nonUndoablePaths,t.siteAPI]),n.label):null}function g(e){e.runtimeConfig.nextHistorySnapshotId=r.guidUtils.getGUID()}function f(e,t){s.applyPatchList(e,t)}function m(n,r,i){return e.mapValues(r,(function(r){return function(n,r,i){var a,s;r.full.isPathExistInHostModel(n)&&(s=r.full.immutable.getByPath(n));var c=i.getIn(n),u=!1;return e.isUndefined(s)&&!e.isUndefined(c)?(u=!0,a=t(o.Map(),o.Map([[n[0],c]]))):!e.isUndefined(s)&&e.isUndefined(c)?(u=!0,a=t(o.Map([[n[0],s]]),o.Map())):a=t(s,c),e.map(a.toJS(),(function(t){return e.assign({},t,{path:u?n.join("/"):n.join("/").concat(t.path)})}))}(r,n,i)}))}function v(t,n,o,r){var i=function(t,n){return e(n).filter(t.full.isPathExist).transform((function(e,n){var o=n.join(".");u(n)?e[o]=function(e){return e.displayedJsonDal.jsonData.runtime}(t):e[o]=t.getByPath(n)}),{}).value()}(t,r),a=m(t,o,n),s=function(t){return t?e(t).map((function(e){return e.path.split("/")[1]})).uniq().value():[]}(a.pagesData);return t.transaction((function(){!function(t,n){e.forEach(n,e.partial(f,t))}(t.full,a)})),function(t,n){e.forEach(n,(function(e,n){var o=n.split(".");u(o)?function(e,t){e.displayedJsonDal.jsonData.runtime=t}(t,e):t.full.setByPath(o,e)}))}(t,i),s}function E(t,n,o,r,a){var s=function(t){var n=e.map(t,e.last);return e.zipObject(n,t)}(o),c=n.full.immutable.getSnapshotByTagAndIndex("undoRedo",t.historyIndex,s),u=v(n,c,s,r);e.forEach(u,(function(e){a.createDisplayedPage(e)})),e.isEmpty(u)||i.executeHook(i.HOOKS.UNDO_REDO.AFTER_APPLY_SNAPSHOT)}function y(t){if(!this.canUndo())return null;var n=this.undoStack.pop();this.redoStack.push(n);var o=e.last(this.undoStack);return t.setOperationsQueue.runSetOperation(E,[o,t.dal,this.undoablePaths,this.nonUndoablePaths,t.siteAPI]),T(t),o.label}function I(t){if(!this.canRedo())return null;var n=this.redoStack.pop();this.undoStack.push(n);var o=e.last(this.undoStack);return t.setOperationsQueue.runSetOperation(E,[o,t.dal,this.undoablePaths,this.nonUndoablePaths,t.siteAPI]),T(t),o.label}function S(t){return e.map(t,(function(t){return e.isString(t)?[t]:t}))}function h(){this.redoStack=[]}function P(){this.add(c),this.undoStack=e.takeRight(this.undoStack)}function A(t,n,o,r){h.call(this);var i,a,s={placeHolder:!0,params:o||null,label:n||""},u=this.canUndo()&&(i=r,(a=this.undoStack)[a.length-1].snapshotId===i);if(u){var l=this.undoStack.pop();s.params=e.assign({},l.params,o,{label:s.label})}else if(r===function(e){return e.runtimeConfig.nextHistorySnapshotId}(t))return;t.setOperationsQueue.flushQueueAndExecute((function(){u&&t.dal.removeLastSnapshot("undoRedo"),s.historyIndex=t.dal.takeSnapshot("undoRedo"),s.snapshotId=function(e){var t=e.runtimeConfig.nextHistorySnapshotId;return g(e),t}(t),s.placeHolder=!1})),this.undoStack.push(s),n!==c&&T(t)}function T(e){a.canAutosave(e)&&i.executeHook(i.HOOKS.AUTOSAVE.ACTION)}function _(t){return e.last(t)}function O(t){return e.isEmpty(t)?null:_(t).params}function C(t){return e.isEmpty(t)?null:_(t).label}function D(t){return e.isEmpty(t)?null:_(t).snapshotId}return l.prototype={clear:function(){P.call(this),h.call(this)},getUndoLastSnapshotParams:function(){return O(this.undoStack)},getRedoLastSnapshotParams:function(){return O(this.redoStack)},getUndoLastSnapshotLabel:function(){return C(this.undoStack)},getRedoLastSnapshotLabel:function(){return C(this.redoStack)},getUndoLastSnapshotId:function(){return D(this.undoStack)},getRedoLastSnapshotId:function(){return D(this.redoStack)},canUndo:function(){return this.undoStack.length>=2},canRedo:function(){return!e.isEmpty(this.redoStack)}},l}()},function(e,t,n){var o,r,i;e.exports=(o=n(3),r=n(11),i=function(e,t){var n=function(e){return"FixedItemLayout"===e.type};if(e&&e.itemLayouts.length>0){var o=e.itemLayouts,r=function(e){return"FixedItemLayout"!==e.type};if(t&&"fixed"===t?r=n:"FixedItemLayout"===o[0].type&&(r=n),!o.every(r))throw new Error("given layout contains both fixed and non-fixed layouts")}return!0},{init:function(){},get:function(e,t){return o.getComponentLayoutData(e,t)},update:function(e,t,n){i(n),o.updateComponentLayoutData(e,t,n)},measure:function(e,t){return e.siteAPI.responsive.getMeasuresByCompId(t.id)},detachLayout:function(e,t){var n=e.pointers.components.getParent(t);e.siteAPI.responsive.detach(t.id,n.id)},updateDetachedLayout:function(e,t,n){return e.siteAPI.responsive.updateDetached(t.id,n)},updateDetachedRotation:function(e,t,n){return e.siteAPI.responsive.updateDetachedRotation(t.id,n)},reattachLayout:function(e,t){e.siteAPI.responsive.clearDetached(t.id)},detachGridItem:function(e,t){var n=e.pointers.components.getParent(t);e.siteAPI.responsive.detachGridItem(t.id,n.id)},updateDetachedGridItem:function(e,t,n){return e.siteAPI.responsive.updateDetachedGridItem(t.id,n)},reattachGridItem:function(e,t){e.siteAPI.responsive.clearDetachedGridItem(t.id)},detachStackItem:function(e,t){var n=e.pointers.components.getParent(t);e.siteAPI.responsive.detachStackItem(t.id,n.id)},updateDetachedStackItem:function(e,t,n){return e.siteAPI.responsive.updateDetachedStackItem(t.id,n)},updateDetachedStackItemOrder:function(e,t,n){return e.siteAPI.responsive.updateDetachedStackItemOrder(t.id,n)},reattachStackItem:function(e,t){e.siteAPI.responsive.clearDetachedStackItem(t.id)},pin:function(e,t,n){return i(n,"fixed"),r.reparentComponentToPage(e,t,!1),o.updateComponentLayoutData(e,t,n)},unpin:function(e,t,n,a){return i(a,"not-fixed"),r.setContainer(e,null,t,n),o.updateComponentLayoutData(e,t,a)}})},function(e,t,n){var o;e.exports=(o=n(3),{init:function(){},update:function(e,t,n){o.updateComponentBreakpointsData(e,t,n)},get:function(e,t){return o.getComponentBreakpointsData(e,t)}})},function(e,t,n){var o;e.exports={init:function(){},update:(o=n(3)).updateComponentStylesData,get:o.getComponentStylesData}},function(e,t,n){var o,r,i,a,s,c,u;e.exports=(o=n(0),r=n(5),i=n(7),a=n(2),s=n(23),c=n(37),u=n(1),{exec:function(e){if(r.isOpen("removeBadlyDuplicatedPages")){var t=u.loggingUtils.performance;t.start("Remove badly duplicated pages");var n=e.dal.getKeys(e.pointers.page.getAllPagesPointer()),l=0;o.forEach(n,(function(t){var n=e.pointers.data.getDataItemFromMaster(t);if(!e.dal.get(n)){l++;var o=i.getComponentById(e,t,t,a.VIEW_MODES.DESKTOP),r=i.getComponentById(e,t,t,a.VIEW_MODES.MOBILE);e.dal.full.remove(e.pointers.page.getPagePointer(t)),e.dal.full.isExist(o)&&e.dal.full.remove(o),e.dal.full.isExist(r)&&e.dal.full.remove(r)}}));var p=Math.trunc(t.finish("Remove badly duplicated pages").duration);if(l>0){var d={errorReason:"succeed",duration:p,dsOrigin:e.config.origin,numberOfInvalidPages:l};s.event(e,c.REMOVE_BADLY_DUPLICATED_PAGES,d)}}}})},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),n(1),r=n(8),i=n(11),a=n(7),{exec:function(e){if(function(e){var t=e.siteAPI.getClientSpecMap(),n=o.find(t,{type:"onboarding"});return!!n&&!1===n.inUse}(e)){var t=a.getAllComponentsFromFull(e,null,(function(t){var n=e.dal.get(t);return n&&"wysiwyg.viewer.components.Group"===n.componentType}));o.forEach(t,(function(t){!function(e,t){var n=e.pointers.components.getChildren(t);o.forEach(n,(function(t){r.public.isGroupable(e,t)||i.reparentComponentToPage(e,t,!0)}))}(e,t)}))}}})},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(7),i=n(3),{exec:function(e){var t=r.getComponentByType(e,"wysiwyg.viewer.components.FiveGridLine");o.forEach(t,(function(t){var n=i.getPropertiesItem(e,t);n&&n.fullScreenModeOn&&function(e,t,n){var o=e.pointers.getInnerPointer(t,"layout"),r=e.dal.full.get(o);r.docked={left:{vw:0},right:{vw:0}},e.dal.full.set(o,r),n.fullScreenModeOn=!1,i.updatePropertiesItem(e,t,n)}(e,t,n)}))}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),o=n(5);var r=function(t,n){var o=[n].concat(t.pointers.components.getChildrenRecursively(n)),r=e.filter(o,(function(e){var n=t.pointers.getInnerPointer(e,"layout.anchors");return t.dal.isExist(n)})),i=e.map(r,"id");return e.filter(r,(function(n){var o=t.pointers.getInnerPointer(n,"layout.anchors"),r=t.dal.get(o);return e.some(r,(function(t){return"BOTTOM_PARENT"!==t.type&&!e.includes(i,t.targetComponent)}))}))};function i(n){var o=n.pointers.page.getNonDeletedPagesPointers(!1);return e(o).map((function(e){return function(e,n){return e.pointers.components.getPage(n.id,t.VIEW_MODES.DESKTOP)}(n,e)})).filter((function(t){return function(t,n){return function n(o){var r=t.pointers.getInnerPointer(o,"layout.anchors");if(!t.dal.isExist(r))return!0;var i=t.pointers.components.getChildren(o);return e.some(i,n)}(n)}(n,t)})).value()}return{exec:function(t){if(o.isOpen("sv_fixBrokenAnchors")){var n=i(t);e.forEach(n,(function(n){var o=r(t,n);e.isEmpty(o)||e.forEach(o,(function(e){var n=t.pointers.getInnerPointer(e,"layout.anchors");t.dal.full.remove(n)}))}))}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(60),o=n(15),r={MediaContainerDesignData:["background"],BackgroundMedia:["mediaRef","imageOverlay"],MediaTransforms:[],WixVideo:["posterImageRef"],Image:["link","originalImageDataRef"]},i="VALID",a="INVALID",s="ONLY_REFS_INVALID",c=o.stripHashIfExists;function u(n,o,u){var p=n.pointers.page.getPageDesignData(o),d=n.dal.full.getKeys(p),g=function(n,o,u,p){var d=function(t,n,o,r){return e.filter(o,(function(e){var o=t.pointers.data.getDesignItem(e,n),i=t.pointers.getInnerPointer(o,"type");return r[t.dal.full.get(i)]}))}(n,o,u,r),g={},f={};return e.forEach(d,(function(u){var d=u,m=function(n,o,u,p,d){var g=function(t,n,o,u){if(l(n,o,u))return a;return function(t,n,o,i){var a=t.pointers.data.getDesignItem(n,o),s=t.pointers.getInnerPointer(a,"type"),u=r[t.dal.full.get(s)];return e.some(u,(function(e){var n=t.pointers.getInnerPointer(a,e);return l(c(t.dal.full.get(n),!1),o,i)}))}(t,n,o,u)?s:i}(n,o,u,d);if(function(e,t,n){if(n.idToPageId[e]){if(n.idToPageId[e]!==t){var o=n.idToPageId[e],r=n.SKIPPED_PAGES_TO_FIX;r[o]=r[o]||{};var i=r[o][e];i||(i={id:e,isReferencedMoreThanOnce:!0},r[o][e]=i)}}else n.idToPageId[e]=t}(o,u,d),g===i)return null;var f=g===s,m=n.pointers.data.getDesignItem(o,u);return function(n,o,i,a){var s=n.dal.full.get(o);(function(n,o){var i=r[n.type];e.forEach(i,(function(r){var i=n[r];if(!e.isEmpty(i)){var a=c(i,!1),s=o[a]||t.generateNewDesignId();n[r]="#".concat(s),o[a]=s}}))})(s,i),a&&function(e,n){var o=c(e.id,!1),r=n[o]||t.generateNewDesignId();e.id=r,n[o]=r}(s,i);return s}(n,m,p,!f)}(n,u,o,g,p);m&&(f[d]=m)})),f}(n,o,d,u);e.forEach(g,(function(e,t){var r=n.pointers.data.getDesignItem(t,o);n.dal.full.remove(r);var i=n.pointers.data.getDesignItem(e.id,o);n.dal.full.set(i,e)}))}function l(t,n,o){var r=o.idToPageId;return r[t]&&r[t]!==n||e.get(o.SKIPPED_PAGES_TO_FIX,[n,t,"isReferencedMoreThanOnce"])}return{exec:function(t){var n=e.map(t.pointers.page.getNonDeletedPagesPointers(!0),"id");!function(t,n,o){e.forEach(n,(function(e){u(t,e,o)})),e.forEach(o.SKIPPED_PAGES_TO_FIX,(function(e,n){u(t,n,o)}))}(t,n,{idToPageId:{},SKIPPED_PAGES_TO_FIX:{}})}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(4),o=n(7);function r(n,r,i){var a=o.getComponentByType(n,i);e.forEach(a,(function(o){var i=n.dal.full.get(n.pointers.full.components.getParent(o));e.get(i,"componentType")!==r&&(n.dal.isExist(o)?t.remove(n,o):t.removeFromFull(n,o))}))}return{exec:function(e){r(e,"wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.StripContainerSlideShowSlide"),r(e,"wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.BoxSlideShowSlide")}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),o=n(3),r=n(17);function i(t,n){return e.get(o.getMobileHintsItem(t,n),"hidden",!1)}function a(t,n){var o=t.pointers.getInnerPointer(n,"componentType");return"wysiwyg.viewer.components.StripColumnsContainer"===t.dal.get(o)&&e.every(t.pointers.components.getChildren(n),i.bind(null,t))}function s(t,n){var o=t.pointers.components.getChildren(n),r=e.filter(o,a.bind(null,t)),i=e.flatMap(o,s.bind(null,t));return e.concat(r,i)}function c(e,t){r.removeComponentByDesktopComp(e,t,!1),o.updateMobileHintsItem(e,t,{hidden:!0})}function u(e,n){return e.pointers.components.getPage(n.id,t.VIEW_MODES.DESKTOP)}return{exec:function(t){var n=t.pointers.page.getNonDeletedPagesPointers(!0);e(n).map(u.bind(null,t)).flatMap(s.bind(null,t)).forEach(c.bind(null,t))}}}()},function(e,t,n){e.exports=function(){n(0);var e=n(1),t=(n(5),n(30));function o(t,n){var o=function(t){var n=t.pointers.data.getDataItemFromMaster(e.siteConstants.MASTER_PAGE_ID);return t.pointers.getInnerPointer(n,"smSettings")}(t);t.dal.isExist(o)?t.dal.merge(o,n):t.dal.set(o,n)}return{exec:function(e){t.isFirstSave(e)&&o(e,{socialLoginGoogleEnabled:!0,socialLoginFacebookEnabled:!0})}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(20),o=n(10),r=n(7),i=n(4),a=n(17),s=n(555),c="wysiwyg.viewer.skins.WRichTextNewSkin",u="txtNew",l="txt1",p="wysiwyg.viewer.skins.WRichTextSkin",d="wysiwyg.viewer.components.WRichText";function g(n,r,a,s){var c=function(e){var t=o.fonts.getAll(e);return function(e){return t[e]}}(n);e(r).filter((function(e){return i.isExist(n,e)})).forEach((function(e){return function(e,n,o,r,i){var a=t.style.getId(o,e),s=function(e,t){var n=e.pointers.getInnerPointer(t,"skin");return e.dal.get(n)}(o,e);try{a===u?(i?s===p&&f(e,n,o):r&&f(e,n,o),s===p&&v(e,o)):(t.style.connectToThemeStyle(o,e,u),s===p&&(v(e,o),f(e,n,o)))}catch(n){!function(e,n){t.style.connectToThemeStyle(n,e,l),m(e,p,n)}(e,o)}}(e,c,n,a,s)}))}function f(e,t,n){if(e){var o=i.data.get(n,e);o&&(o.text=s.utils.textComponentsUtils.applyTextStyleMigrationAdjustments(o.text,t),i.data.update(n,e,o))}}function m(e,t,n){var o=n.pointers.getInnerPointer(e,"skin");n.dal.set(o,t),a.syncMobileAndDesktopSkin(n,e,t)}function v(e,t){m(e,c,t)}return{exec:function(e){var n=r.getComponentByType(e,d),i=!1,a=!1,s=o.styles.get(e,u);s&&s.skin&&s.skin!==p||(s?(i=!0,s.skin||(a=!0)):a=!0,function(e,n){var r;if(n)n.skin=c,r=n;else{t.style.createSystemStyle(e,u,d);var i=o.styles.get(e,u);i&&i.metaData&&(i.metaData.isPreset=!0,r=i)}o.styles.update(e,u,r)}(e,s)),g(e,n,i,a)}}}()},function(e,t){e.exports=U},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(7),r=n(3),i=n(10),a=n(20),s=t.vectorImageConversionUtils.vectorImageDefaults;function c(e,n,o){var i=r.getDesignItem(e,n)||{};t.vectorImageConversionUtils.convertStyleToDesignData(i,o),r.updateDesignItem(e,n,i)}return{exec:function(n){var u=e.unionBy(function(e){return o.getAllComponentsFromFull(e,null,(function(t){return"wysiwyg.viewer.components.VectorImage"===e.dal.full.get(e.pointers.getInnerPointer(t,"componentType"))}))}(n),function(e){return o.getAllComponents(e,null,(function(t){return"wysiwyg.viewer.components.VectorImage"===e.dal.get(e.pointers.getInnerPointer(t,"componentType"))}))}(n),"id"),l=[];e.forEach(u,(function(o){var u=r.getComponentStylesData(n,o);if(u){var p=r.getDataItem(n,o);if(e.isEmpty(u.style.properties)){var d=e.pick(p,["overrideColors","shapeStyle"]);e.isEmpty(d)||(e.defaults(d,{overrideColors:null}),function(t,n,o){var i=e.assign(r.getDesignItem(t,n),{type:"VectorImageDesignData"},o),a=e.omit(r.getDataItem(t,n),e.keys(o));r.updateDesignItem(t,n,i),r.deleteDataItem(t,n),r.updateDataItem(t,n,a)}(n,o,d))}else{var g=n.pointers.full.components.getPageOfComponent(o).id;l.push({styleId:u.id,pageId:g}),c(n,o,u)}}else{var f={type:"TopLevelStyle",style:{properties:s.style,propertiesSource:{}}};t.vectorImageConversionUtils.convertStyle(f,s),a.style.internal.update(n,o,f,!0),c(n,o,f)}!function(n,o,a){var s=n.pointers.full.components.getPageOfComponent(o).id,c=n.pointers.componentStructure.getModesOverrides(o),u=n.dal.full.isExist(c)&&n.dal.full.get(c),l=!1;e.forEach(u,(function(o){if(o.styleId){var c=i.styles.get(n,o.styleId,s);if(!e.isEmpty(e.get(c,["style","properties"]))){var u=r.generateNewDesignItemId(),p={},d=n.pointers.data.getDesignItem(u,s);t.vectorImageConversionUtils.convertStyleToDesignData(p,c),p.id=u,o.designQuery="#".concat(u),n.dal.full.set(d,p),a.push({styleId:o.styleId,pageId:s}),e.unset(o,"styleId"),l=!0}}})),l&&n.dal.full.set(c,u)}(n,o,l)})),e.forEach(e.uniq(l),(function(e){var t=e.styleId,o=e.pageId,r=i.styles.get(n,t,o);r.style.properties={},r.style.propertiesSource={},i.styles.update(n,t,r,o)}))}}}()},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(5),i=n(1),{exec:function(e){var t=e.pointers.data.getDataItemFromMaster(i.siteConstants.MASTER_PAGE_ID),n=e.pointers.getInnerPointer(t,"accessibilitySettings");r.isOpen("sv_visualFocus")&&function(e,t){var n=o.get(e.dal.get(t),"visualFocusDisabled");return o.isUndefined(n)}(e,n)&&e.dal.set(n,{visualFocusDisabled:!1})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(30),r=n(38),i=n(7),a=n(3),s=n(2);function c(e){var n=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID);return e.pointers.getInnerPointer(n,"mobileSettings")}function u(t){return n=t,(!e.has(n,"action")||!e.has(n,"behavior"))&&"animation"===e.get(t,"type","animation");var n}function l(e,t){var n=c(e);e.dal.set(n,{animationsEnabled:t})}return{exec:function(t){var n=c(t);!function(e){return o.isFirstSave(e)}(t)?t.dal.isExist(n)||(l(t,!1),function(t){var n=i.getAllComponents(t);e.forEach(n,(function(n){var o=e.map(r.getBehaviors(t,n),(function(t){return u(t)&&!e.has(t,"viewMode")&&(t.viewMode=s.VIEW_MODES.DESKTOP),t}));if(o.length){var i=JSON.stringify(o);a.updateBehaviorsItem(t,n,i)}}))}(t)):l(t,!0)}}}()},function(e,t,n){var o,r,i,a,s,c,u,l;e.exports=(o=n(0),r=n(560),i=n(561),a=n(562),s=n(563),c=n(565),u=n(149),l=n(5),{exec:function(e){o.get(e.config,"runStylesGC")&&(c.exec(e),a.exec(e));var t=u.isSiteMigrated(e),n=!l.isOpen("revertStylesBackToMasterPage")&&e.runtimeConfig.stylesPerPage&&!t,p=l.isOpen("revertStylesBackToMasterPage")&&t;n&&r.exec(e),p&&i.exec(e),s.exec(e)}})},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i,a,s,c,u,l,p,d,g,f,m,v,E,y,I;e.exports=(i=n(0),a=n(7),s=n(20),c=n(10),u=n(29),l=n(23),p=n(2),d=n(53),g=n(37),f=n(1),m=n(149),v=n(17),E={},y=function(e,t,n,o,r,a,l,g){var f=t===p.VIEW_MODES.DESKTOP,m=l[t];d(o)||(f||n[a.id]!==o)&&(m[function(e,t,n,o,r){var a=c.styles.get(e,t,n),l=c.styles.internal.fork(e,a,n,!0),p=u.overrides.getAllOverrides(e,o),d=i.find(p,["styleId",t]);return d?(d.styleId=l,u.overrides.updateComponentOverrides(e,o,p)):s.style.internal.setId(e,o,l,null,!0),r[t]||(r[t]=t),E[n]++,l}(e,o,r,a,g)]=a.id)},I=function(e,t,n,o){var r=p.VIEW_MODES.DESKTOP,c=a.getAllComponentsFromFull(e,null,function(e){return function(t){var n=s.style.internal.get(e,t,!0),o=n&&"custom"===n.styleType,r=i.some(u.overrides.getAllOverrides(e,t),(function(e){return d(e.styleId)}));return o||r}}(e),t),l=i.invert(n[r]),g=i.uniqBy(c,"id");i.forEach(g,(function(r){var a=e.pointers.full.components.getPageOfComponent(r).id,s=e.pointers.getInnerPointer(r,"styleId"),c=e.dal.full.get(s),p=u.overrides.getAllOverrides(e,r),d=i.compact(i.map(p,"styleId"));i.includes(d,c)||d.push(c),i.forEach(d,(function(i){y(e,t,l,i,a,r,n,o)}))}))},{exec:function(e){var t,n,a=f.loggingUtils.performance;a.start("Move Custom style fixer "),m.markSiteAsMigrated(e);var s=c.styles.getAllIds(e,p.MASTER_PAGE_ID).length;!function(e){i(e.pointers.page.getAllPagesPointer()).thru(e.dal.getKeys).reduce((function(e,t){return E[t]=0,e}),{})}(e);var u=e.pointers.general.getOrphanPermanentDataNodes(),d=e.dal.get(u),y={},S=(r(t={},p.VIEW_MODES.DESKTOP,{}),r(t,p.VIEW_MODES.MOBILE,{}),t);v.getSupportedViewModes(e).forEach((function(t){return I(e,t,S,y)})),d=(n=d).concat.apply(n,o(i.keys(y))),function(e,t){i.forEach(i.keys(t),(function(t){return c.styles.remove(e,t,"masterPage")}))}(e,y),e.dal.set(u,d);var h=Math.trunc(a.finish("Move Custom style fixer ").duration);!function(e,t,n){E[p.MASTER_PAGE_ID]=c.styles.getAllIds(e,"masterPage").length;for(var o=e.dal.getKeys(e.pointers.page.getAllPagesPointer()),r=o.splice(0,100),a=e.config.origin;r.length;){var s=i.reduce(r,(function(e,t){return e[t]=E[t],e}),{}),u={mp_styles_before:t,mp_styles_after:E[p.MASTER_PAGE_ID],page_styles_after:JSON.stringify(s),errorReason:"succeed",duration:n,dsOrigin:a};l.event(e,g.MOVE_STYLE_TO_PAGES_MIGRATION,u),r=o.splice(0,100)}}(e,s,h)}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v;e.exports=(r=n(0),i=n(7),a=n(20),s=n(10),c=n(29),u=n(2),l=n(53),p=n(1),d=n(149),g=n(17),f=function(e,t){var n=r.pick(s.styles.get(e,t),["skin","style"]),i=p.hashUtils.SHA256.b64_sha256(JSON.stringify(n));o[i]=t},m=function(e,t,n,i,d){var g,m,v,E=e.pointers.getInnerPointer(d,"styleId");if(!l(n)){var y=n,I=s.styles.get(e,n,i);I.type!==u.STYLES.TOP_LEVEL_STYLE&&(d.id,g=I,m=r.pick(g,["skin","style"]),v=p.hashUtils.SHA256.b64_sha256(JSON.stringify(m)),(y=o[v])||(y=function(e,t,n,o){if(e.dal.full.isExist(t)){var r=e.pointers.data.getThemeItem(n,o),i=e.dal.full.get(r),a=s.styles.internal.fork(e,i,u.MASTER_PAGE_ID,!0);return e.dal.full.remove(r),f(e,a),a}}(e,E,n,i))),function(e,t,n,o){var i=c.overrides.getAllOverrides(e,o),s=r.find(i,["styleId",t]);s?(s.styleId=n,c.overrides.updateComponentOverrides(e,o,i)):a.style.internal.setId(e,o,n,null,!0)}(e,n,y,d)}},v=function(e,t){var n=i.getAllComponentsFromFull(e,null,function(e){return function(t){var n=a.style.internal.get(e,t,!0),o=n&&"custom"===n.styleType,i=r.some(c.overrides.getAllOverrides(e,t),(function(e){return l(e.styleId)}));return o||i}}(e),t),o=r.uniqBy(n,"id");r.forEach(o,(function(t){var n=e.pointers.full.components.getPageOfComponent(t).id,o=e.pointers.getInnerPointer(t,"styleId"),i=e.dal.full.get(o),a=c.overrides.getAllOverrides(e,t),s=r.compact(r.map(a,"styleId"));r.includes(s,i)||s.push(i),r.forEach(s,(function(o){m(e,0,o,n,t)}))}))},{exec:function(e){d.resetMigratedSiteFlag(e),e.runtimeConfig.stylesPerPage=!1,o={},g.getSupportedViewModes(e).forEach((function(t){return v(e,t)}))}})},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(10),i=n(53),a=n(2),{exec:function(e){var t=e.pointers.page.getAllPagesPointer(),n=e.dal.getKeys(t),s=o.reduce(n,(function(t,n){var o=e.pointers.page.getPagePointer(n);return t[n]=e.dal.full.get(o),t}),{}),c=e.siteAPI.collectUsedStylesFromAllPages(s),u=e.dal.get(e.pointers.general.getOrphanPermanentDataNodes()),l={};o.forEach(n,(function(t){var n,s=(n=r.styles.getAllIds(e,t),o.reject(o.without(n,a.STYLES.THEME_DATA_ID),(function(e){return i(e)}))),p=o.difference(s,o.keys(c));u=u.concat(p),p&&(l[t]=p)})),e.dal.set(e.pointers.general.getOrphanPermanentDataNodes(),u),o.forEach(l,(function(t,n){return o.forEach(t,(function(t){return r.styles.remove(e,t,n)}))}))}})},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(166),i=n(564),a=function(e){if(0!==e.indexOf("#")){var t=0===e.indexOf("r")?e:"rgba(".concat(e,")");return new r(t).hexString()}return e},{exec:function(e){var t=e.pointers.data.getThemeItem("THEME_DATA",i.MASTER_PAGE_ID),n=e.pointers.getInnerPointer(t,"color"),r=e.dal.full.get(n),s=o.map(r,a);e.dal.full.set(n,s)}})},function(e){e.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(10),i=n(2),a=n(53),{exec:function(e){var t=o(e).thru((function(){return r.styles.getAllIds(e,i.MASTER_PAGE_ID)})).without(i.STYLES.THEME_DATA_ID).map((function(t){return o.merge(r.styles.get(e,t,i.MASTER_PAGE_ID),{id:t})})).filter((function(e){return e.styleType===i.STYLES.TYPES.SYSTEM&&!a(e.id)})).value();return o.forEach(t,(function(t){t.styleType=i.STYLES.TYPES.CUSTOM,t.type=e.runtimeConfig.stylesPerPage?i.STYLES.COMPONENT_STYLE:i.STYLES.TOP_LEVEL_STYLE,e.dal.set(e.pointers.data.getThemeItem(t.id,i.MASTER_PAGE_ID),t)})),o.size(t)}})},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(68),{exec:function(e){var t=e.pointers.data.getDataItemsWithPredicate({type:"BasicMenuItem"});o.forEach(t,(function(t){!function(e,t){var n=e.dal.full.get(t);o.forEach(n.items,(function(t){var n=t.replace("#",""),i=r.getMenuDataItemPointer(e,n),a=e.dal.get(i);if(a.items.length>0){var s=o.cloneDeep(a);s.items.length=0,e.dal.set(i,s)}}))}(e,t)}))}})},function(e,t){e.exports=H},function(e,t,n){e.exports={exec:n(134).meshLayoutReadySiteDataFixer}},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(141),i=n(18),{exec:function(e){!function(e){var t=i.getPageIdList(e),n=r.get.all(e);o.forEach(n,(function(n){var i=r.getRouterRef.byPrefix(e,n.prefix);o.forEach(n.pages,(function(n){o.includes(t,n)||r.pages.removePageFromRouter(e,i,n)}))}))}(e)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(122),o=n(63),r=n(116),i=n(7),a=n(4),s=n(14),c=n(29),u="wysiwyg.viewer.components.SiteRegionContainer";function l(t){var n=t.pointers.components.getMasterPage(s.getViewMode(t)),r=i.getComponentByType(t,u,n),l=e.map(o.getSOSPModes(t),"modeId");e(r).filter((function(n){return function(t,n,o){var r=c.overrides.getAllOverrides(t,o);return e(r).flatMap("modeIds").every((function(t){return!e.includes(n,t)}))}(t,l,n)})).forEach((function(e){c.overrides.applyCurrentToAllModes(t,e),a.remove(t,e)}))}return{exec:function(n){!function(n){var o=t.getAll(n);e(o).filter((function(o){return e.isEmpty(t.serializePagesGroup(n,o).pages)})).forEach((function(e){t.removePagesGroup(n,e)}))}(n),function(n){var i=e.keyBy(t.getAll(n),"id"),a=o.getSOSPModes(n);e(a).filter((function(t){var n=e.get(t,"settings.pagesGroupId");return!n||!i[n.replace(/^#/,"")]})).forEach((function(e){r.removeSOSPMode(n,e.modeId)}))}(n),l(n)}}}()},function(e,t,n){var o,r,i,a,s,c,u,l,p;e.exports=(o=n(0),r=n(233),i=n(2),a=n(19),s=n(1),c=n(5),u="report",l="reportAndFix",p=function(e,t){var n=r.validateAllComponentsWithValidators(e,{skin:r.validateComponentSkin},null,t);return o.map(n,(function(e){var n=e.comp;return{componentType:n.componentType,skin:n.skin,compId:n.id,pageId:n.pageId,viewMode:t}}))},{exec:function(e){var t=c.getValue("ds_componentSkinDataFixer");if(t===u||t===l){s.loggingUtils.fedopsLogger.interactionStarted(s.loggingUtils.fedopsLogger.INTERACTIONS.COMPONENT_SKIN_DATA_FIXER);try{o(p(e,i.VIEW_MODES.DESKTOP)).concat(p(e,i.VIEW_MODES.MOBILE)).forEach((function(e){var t=e.componentType,n=e.skin,r=e.compId,i=e.pageId,c=e.viewMode,u=a.services.schemasService.getDefinition(t),l=o.head(u.skins);!function(e,t,n,o,r,i,a){s.integrations.ravenUtils.captureError(new Error("Component Skin Mismatch"),{tags:{compSkinMismatch:"".concat(e,"|").concat(t)},extra:{componentType:e,skin:t,compId:n,pageId:o,viewMode:r,defaultStyle:i,defaultSkin:a}})}(t,n,r,i,c,o(u.styles).keys().head(),l)}))}catch(e){s.integrations.ravenUtils.captureError(e)}s.loggingUtils.fedopsLogger.interactionEnded(s.loggingUtils.fedopsLogger.INTERACTIONS.COMPONENT_SKIN_DATA_FIXER)}}})},function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;e.exports=(r=n(20),{validateComponentStyle:function(e,t){!function(e,t){if(e){if(!t)throw new Error("There is no existing style for styleId [".concat(e,"]"));if("object"!==o(t))throw new Error("The given style for for styleId [".concat(e,"] is not an object"));if(!t.skin)throw new Error("The given style for for styleId [".concat(e,"] does not contain a skin"));if(!t.type)throw new Error("The given style for for styleId [".concat(e,"] does not contain a type"))}}(r.style.getId(e,t),r.style.get(e,t))}})},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(0),r=n(20),i=n(574),a=n(19),s={"wysiwyg.viewer.components.svgshape.SvgShape":!0,"wysiwyg.viewer.components.PopupCloseIconButton":!0},c={"wysiwyg.viewer.components.StripContainerSlideShowSlide":{"wysiwyg.common.components.boxSlideShowSlide.viewer.skins.boxSlideShowSlideSkin":!0}},{validateComponentSkin:function(e,t){var n=r.skin.get(e,t),u=e.dal.get(e.pointers.getInnerPointer(t,"componentType")),l=function(e){var t=a.schemas.componentTypeAliases.getAlias(e),n=a.services.getComponentSkins(t)||[],o=i[t]||[];return n.concat(o)}(u);if(!(s[u]||o.get(c,[u,n],!1)||o.includes(l,n)))throw new Error("The skin [".concat(n,"] is not valid for component type [").concat(u,"]"))}})},function(e,t){e.exports={"core.components.Container":["wysiwyg.viewer.skins.area.ForkedRightRibbon","wysiwyg.viewer.skins.area.CustomRibbonArea","wysiwyg.viewer.skins.area.LinesAreaSkin","wysiwyg.viewer.skins.area.RoundArea","wysiwyg.viewer.skins.area.RoundShadowArea","wysiwyg.viewer.skins.area.BlankAreaSkin","wysiwyg.viewer.skins.area.TransparentArea","wysiwyg.viewer.skins.area.BubbleAreaLeft","wysiwyg.viewer.skins.area.LeftTriangleArea","wysiwyg.viewer.skins.area.RightTriangleArea","wysiwyg.viewer.skins.area.BubbleAreaRight","wysiwyg.viewer.skins.area.IronBox","wysiwyg.viewer.skins.area.PhotoArea"],"wysiwyg.viewer.components.WPhoto":["wysiwyg.viewer.skins.photo.DoubleBorderCirclePhoto","wysiwyg.viewer.skins.photo.VintagePhoto","wysiwyg.viewer.skins.photo.DefaultPhoto","wysiwyg.viewer.skins.photo.RoundShadowPhoto","wysiwyg.viewer.skins.photo.ScotchTapePhoto","wysiwyg.viewer.skins.photo.PaperclipPhoto","wysiwyg.viewer.skins.photo.ScotchDoubleHorizontal","wysiwyg.viewer.skins.photo.ScotchDoubleVertical","wysiwyg.viewer.skins.photo.ScotchTopPhoto","wysiwyg.viewer.skins.photo.IronPhoto","wysiwyg.viewer.skins.photo.GlowLinePhoto","wysiwyg.viewer.skins.photo.NewPolaroidPhoto"],"wysiwyg.viewer.components.mobile.TinyMenu":["wysiwyg.viewer.skins.mobile.TinyMenuSkin","wysiwyg.viewer.skins.mobile.TinyMenuPullFromTopSkin"],"wysiwyg.viewer.components.HorizontalMenu":["wysiwyg.viewer.skins.menu.SeparateArrowDownMenuSkin","wysiwyg.viewer.skins.menu.ArrowsMenuSkin","wysiwyg.viewer.skins.menu.SeparatedArrowsMenuSkin","wysiwyg.viewer.skins.menu.CirclesMenuSkin","wysiwyg.viewer.skins.horizontalmenu.BevelMenu","wysiwyg.viewer.skins.horizontalmenu.ArrowsMenu","wysiwyg.viewer.skins.horizontalmenu.DefaultMenu","wysiwyg.viewer.skins.horizontalmenu.AppleMenu","wysiwyg.viewer.skins.horizontalmenu.RectangleMenu","wysiwyg.viewer.skins.horizontalmenu.TabsMenu","wysiwyg.viewer.skins.horizontalmenu.OverlinesMenu","wysiwyg.viewer.skins.horizontalmenu.Overlines2Menu","wysiwyg.viewer.skins.horizontalmenu.PillMenu","wysiwyg.viewer.skins.horizontalmenu.BaseMenu","wysiwyg.viewer.skins.horizontalmenu.BevelMenu","wysiwyg.viewer.skins.horizontalmenu.CirclesMenu","wysiwyg.viewer.skins.horizontalmenu.Lines2Menu","wysiwyg.viewer.skins.horizontalmenu.LinesMenu","wysiwyg.viewer.skins.horizontalmenu.PointerMenu","wysiwyg.viewer.skins.horizontalmenu.RibbonsMenu","wysiwyg.viewer.skins.horizontalmenu.Ribbons2Menu","wysiwyg.viewer.skins.horizontalmenu.TextOnlyMenu"],"wysiwyg.viewer.components.ScreenWidthContainer":["wysiwyg.viewer.skins.screenwidthcontainer.GridScreen","wysiwyg.viewer.skins.screenwidthcontainer.TransparentHalfScreen","wysiwyg.viewer.skins.screenwidthcontainer.TwoColorScreen","wysiwyg.viewer.skins.screenwidthcontainer.LineBottomScreen","wysiwyg.viewer.skins.screenwidthcontainer.ShadowScreen"],"wysiwyg.viewer.components.HeaderContainer":["wysiwyg.viewer.skins.screenwidthcontainer.IronScreen","wysiwyg.viewer.skins.screenwidthcontainer.BoxScreen","wysiwyg.viewer.skins.screenwidthcontainer.BlankScreen","wysiwyg.viewer.skins.screenwidthcontainer.SolidScreen","wysiwyg.viewer.skins.screenwidthcontainer.NoiseScreen","wysiwyg.viewer.skins.screenwidthcontainer.LineBottomScreen"],"wysiwyg.viewer.components.FooterContainer":["wysiwyg.viewer.skins.screenwidthcontainer.IronScreen","wysiwyg.viewer.skins.screenwidthcontainer.BoxScreen","wysiwyg.viewer.skins.screenwidthcontainer.BlankScreen","wysiwyg.viewer.skins.screenwidthcontainer.SolidScreen","wysiwyg.viewer.skins.screenwidthcontainer.NoiseScreen","wysiwyg.viewer.skins.screenwidthcontainer.LineTopScreen"],"wysiwyg.viewer.components.PagesContainer":["wysiwyg.viewer.skins.screenwidthcontainer.DefaultScreen","wysiwyg.viewer.skins.screenwidthcontainer.BevelScreen","wysiwyg.viewer.skins.screenwidthcontainer.BoxScreen","wysiwyg.viewer.skins.screenwidthcontainer.LiftedShadowScreen","wysiwyg.viewer.skins.screenwidthcontainer.AppleScreen","wysiwyg.viewer.skins.screenwidthcontainer.BlankScreen","wysiwyg.viewer.skins.screenwidthcontainer.GridScreen","wysiwyg.viewer.skins.screenwidthcontainer.TransparentHalfScreen","wysiwyg.viewer.skins.screenwidthcontainer.TwoColorScreen","wysiwyg.viewer.skins.screenwidthcontainer.LineBottomScreen","wysiwyg.viewer.skins.screenwidthcontainer.ShadowScreen"],"wysiwyg.viewer.components.FiveGridLine":["wysiwyg.viewer.skins.line.FadeLine","wysiwyg.viewer.skins.line.DoubleLine2","wysiwyg.viewer.skins.line.DoubleLine3"],"wysiwyg.viewer.components.VerticalLine":["wysiwyg.viewer.skins.VerticalLineSkin"],"wysiwyg.viewer.components.SiteButton":["wysiwyg.viewer.skins.button.ButtonDoubleArrowLeft","wysiwyg.viewer.skins.button.ButtonDoubleArrowRight","wysiwyg.viewer.skins.button.ButtonSandclock","wysiwyg.viewer.skins.button.ButtonForkedRight","wysiwyg.viewer.skins.button.ButtonForkedLeft","wysiwyg.viewer.skins.button.IronButton","wysiwyg.viewer.skins.button.ShineButton","wysiwyg.viewer.skins.button.BorderButton","wysiwyg.viewer.skins.button.PillButton","wysiwyg.viewer.skins.button.ShinyPillButton","wysiwyg.viewer.skins.button.ShinyGradientButton","wysiwyg.viewer.skins.button.SiteButtonSkin","wysiwyg.viewer.skins.button.PlasticButton"],"wysiwyg.viewer.components.MatrixGallery":["wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryTextBelowSkin","wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryPolaroidSkin","wysiwyg.viewer.skins.gallery.CircleMatrixGallery","wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryVintage"],"wysiwyg.viewer.components.SlideShowGallery":["wysiwyg.viewer.skins.gallery.SlideShowGallerySimple","wysiwyg.viewer.skins.gallery.RibbonsSlideShow","wysiwyg.viewer.skins.gallery.FrameShowGallery","wysiwyg.viewer.skins.gallery.RoundSlideShowGallery"],"wysiwyg.viewer.components.SliderGallery":["wysiwyg.viewer.skins.gallery.SliderGalleryMinimal","wysiwyg.viewer.skins.gallery.SliderGalleryBorder","wysiwyg.viewer.skins.galleryslider.SliderGalleryVintageSkin"],"wysiwyg.viewer.components.AudioPlayer":["wysiwyg.viewer.skins.AudioPlayerMinimalSkin"],"core.components.Page":["wysiwyg.viewer.skins.area.RectangleArea","skins.core.VerySimpleSkin"]}},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(3),i=n(19),a=i.services.schemasService,{validateCompData:function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"componentType")),s=r.getDataItemPointer(e,t),c=s&&e.dal.get(s);if(!function(e,t){var n=a.getDefinition(e);return o.isArray(n.dataTypes)?o.isPlainObject(t)?t.type&&o.includes(n.dataTypes,t.type):o.isString(t)?o.includes(n.dataTypes,t):o.includes(n.dataTypes,""):!t}(n,c))throw new Error("".concat(c.type,"] is not valid for component type [").concat(n,"]"));c&&i.services.dataValidators.validateDataBySchema(c,"data")}})},function(e,t,n){e.exports=function(){var e=n(577);function t(e){return e.replace(/^#/,"")}function o(t,n,o,r,i){if(!t.dal.full.isPathExistInHostModel(["pagesData",n,"data",r,i]))throw new e.DataPathError({pageId:n,query:i,type:r,compId:o})}return{validateCompJSONpaths:function(e,n){var r=e.dal.full.get(n),i=e.pointers.components.getPageOfComponent(n).id;!function(e,n,r){n.dataQuery&&o(e,r,n.id,"document_data",t(n.dataQuery))}(e,r,i),function(e,n,r){n.propertyQuery&&o(e,r,n.id,"component_properties",t(n.propertyQuery))}(e,r,i),function(e,n,r){n.designQuery&&o(e,r,n.id,"design_data",t(n.designQuery))}(e,r,i),function(e,n,r){n.connectionQuery&&o(e,r,n.id,"connections_data",t(n.connectionQuery))}(e,r,i)}}}()},function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){var t="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return a(e,arguments,c(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),s(o,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&s(r,n.prototype),r}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u;e.exports=(u=n(0).template("Expected comp {id: <%= compId %>} to have {id: <%= query %>} in the <%= type %> map, in page <%= pageId %>"),{DataPathError:function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=r(this,c(t).call(this))).name="DataPathError",n.message=u(e),n.stack=(new Error).stack,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),t}(i(Error))})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(11),r=n(124),i=n(2),a=function(e,t){var n=e.pointers.components.getHeader(i.VIEW_MODES.MOBILE);o.addCompToContainer(e,t,n)},s=function(e,t){e.dal.remove(t),r.upgrade(e)},{exec:function(e){var t=i.VIEW_MODES.MOBILE,n=e.pointers.components.getMasterPage(t),o=r.get(e),c=r.toggle.get(e);o&&e.pointers.isSamePointer(e.pointers.components.getParent(o),n)?a(e,o):c&&!o&&s(e,c)}})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d;e.exports=(o=n(0),r=n(20),i=n(10),a=n(2),s=n(17),c=n(19),u=n(5),l=c.services.schemasService.getDefinition("mobile.core.components.Page").styles,p=function(e,t){var n=o.keys(l).sort()[0],s=e.pointers.data.getThemeItem(n,a.MASTER_PAGE_ID);if(!e.dal.isExist(s)){var c=l[n];i.styles.createAndAddStyleItem(e,{styleType:a.STYLES.TYPES.SYSTEM,skin:c},n,a.MASTER_PAGE_ID)}r.style.setId(e,t,n)},d=function(e,t,n){return e.dal.isExist(e.pointers.data.getThemeItem(t,n))||e.dal.isExist(e.pointers.data.getThemeItem(t,a.MASTER_PAGE_ID))},{exec:function(e){if(u.isOpen("enableAddMissingStyleFixer")){var t=e.dal.getKeys(e.pointers.page.getAllPagesPointer()),n=s.getSupportedViewModes(e);o.forEach(t,(function(t){o.forEach(n,(function(n){var o=e.pointers.components.getPage(t,n),i=r.style.getId(e,o);i&&!d(e,i,t)&&p(e,o)}))}))}}})},function(e,t,n){e.exports={classicDocument:n(230),responsiveDocument:n(581)}},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(1),i=r.loggingUtils.fedopsLogger.INTERACTIONS.DOCUMENT_SERVICES_DATA_FIXERS,a=[],{fix:function(e){r.loggingUtils.fedopsLogger.interactionStarted(i.ALL),o.forEach(a,(function(t){var n=o.get(t,["config","fedopsTag"]);r.loggingUtils.fedopsLogger.interactionStarted(n),t.fixer.exec(e),r.loggingUtils.fedopsLogger.interactionEnded(n)})),r.loggingUtils.fedopsLogger.interactionEnded(i.ALL)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(12),o=n(13),r=n(229),i=n(21),a=n(135),s=n(1),c=n(2),u=s.loggingUtils,l=u.performance,p=u.performanceMetrics,d=s.ajaxLibrary;function g(n,o,r,i){var a=n.dal.getLastSnapshotByTagName("before-autosave-apply");!function(t,n,o){e.forEach(o,(function(o){var r=o.split(".");t.dal.full.setByPathToHostModel(r,e.get(n,r))}))}(n,a,i.autosavePaths),s.log.error(o,o.patch),t.integrations.ravenUtils.breadcrumb("LOAD & APPLY ERROR",r),l.finish(p.AUTOSAVE.LOAD_APPLY,{additionalData:r,report:!0})}return{applyPatchIfExists:function(t,n,u,f){var m,v;(v=(m=t).dal.get(m.pointers.general.getAutosaveInfo()))&&v.shouldRestoreDiffs&&"false"!==s.urlUtils.getParameterByName("autosaveRestore")?function(e,t,n){var r=e.pointers.general.getServiceTopology(),i=e.pointers.getInnerPointer(r,"autoSaveUrl"),a=e.dal.get(i),c="".concat(a,"get_diffs/"),u=o.getProperty(e,"SITE_ID"),g=o.getProperty(e,"META_SITE_ID"),f=o.getProperty(e,"SITE_VERSION"),m="".concat(c+u,"?metaSiteId=").concat(g,"&siteVersion=").concat(f);s.loggingUtils.fedopsLogger.interactionStarted(s.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.LOAD_AJAX),l.start(p.AUTOSAVE.LOAD_AJAX),d.ajax({type:"GET",dataType:"json",url:m,success:function(e){e.success?t(e.payload):n(new Error("Failed to fetch diffs. error code: ".concat(e.errorCode)))},error:function(e){n(new Error("Error while fetching diffs. status code: ".concat(e.status)))}})}(t,(function(o){var d=e(o.diffPayloads).map("payload").map(JSON.parse).value(),m=d.length,v={patches:m,patchesSize:e.sumBy(d,"length"),pagesCount:i.getNumberOfPages(t)};s.loggingUtils.fedopsLogger.interactionEnded(s.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.LOAD_AJAX),l.finish(p.AUTOSAVE.LOAD_AJAX,{additionalData:v,report:!0}),s.loggingUtils.fedopsLogger.interactionStarted(s.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.LOAD_APPLY),l.start(p.AUTOSAVE.LOAD_APPLY),d=e.flatten(d),t.dal.takeSnapshot("before-autosave-apply"),t.dal.takeSnapshot(c.SNAPSHOT_TAGS.MOBILE_MERGE);try{t.dal.transaction((function(){r.applyPatchList(t.dal.full,d)}));var E=t.dal.full.immutable.getLastSnapshotByTagName("before-autosave-apply");t.dal.takeSnapshot("autosave-apply-validate");var y=t.dal.full.immutable.getLastSnapshotByTagName("autosave-apply-validate"),I=null,S={error:function(e,t){I=t}};a.validateSite(E,y,(function(){try{var e=t.pointers.general.getAutoSaveInnerPointer("previousDiffId");t.dal.set(e,o.latestDiffId);var r=t.pointers.general.getAutoSaveInnerPointer("autosaveCount");t.dal.set(r,m),v.success="true",u(null,{changesApplied:!0}),s.loggingUtils.fedopsLogger.interactionEnded(s.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.LOAD_APPLY),l.finish(p.AUTOSAVE.LOAD_APPLY,{additionalData:v,report:!0})}catch(e){v.success="false",g(t,e,v,n),f(e)}}),(function(o){v.success="false",g(t,o,v,n),f(e.merge(o,I))}),S)}catch(e){v.success="false",g(t,e,v,n),f(e)}}),f):u(null,{changesApplied:!1})}}}()},function(e,t,n){e.exports=function(){var e=n(0),t={START:"start",ON:"on",END:"end"},o={YES:"yes",NO:"no",DONT_CARE:"don't care"},r={NONE:"NONE",INNER:"INNER",FULL:"FULL",DONT_CARE:"DONT_CARE"};function i(e){switch(e){case o.YES:return r.NONE;case o.NO:return r.FULL;default:return r.DONT_CARE}}function a(e,n){return e===t.ON?n:r.NONE}function s(t,n,o){if(n&&(e.isFunction(o.singleComp)?o.singleComp(t,n):o.singleComp)){if(e.isArray(n)&&1===n.length&&(n=n[0]),n.id)return n.id;if(e.isString(n))return n}return!1}function c(e,t,n){var o=n[1];return s.bind(null,e,o,t)}function u(e,n,r,i){return i!==t.END?o.NO:l(e,n.updatingAnchorsAfterContinuous,r)}function l(t,n,r){var i=r[1],a=e.isFunction(n)?n(t,i,r):n;return e.isString(a)?a:a?o.YES:o.NO}return{CONTINUOUS_ACTION_TYPES:t,IS_UPDATING_ANCHORS:o,ENFORCE_TYPES:r,getDataManipulationParams:function(e,t,n,o){var r,a,s,u=l(e,t.isUpdatingAnchors,o);return{methodName:n,isContinuousAction:!1,asyncPreDataManipulation:t.asyncPreDataManipulation,noRefresh:t.noRefresh,noBatching:t.noBatching,noBatchingAfter:t.noBatchingAfter,shouldExecOp:t.shouldExecOp,isAsyncOperation:t.isAsyncOperation,waitingForTransition:t.waitingForTransition,lockedComp:(r=t,a=o,s=a[1],r.shouldLockComp&&s?s.id:null),singleComp:c(e,t,o),isUpdatingAnchors:u,enforceType:i(u)}},getContinuousActionParams:function(e,t,n,o,i){return{methodName:n,isContinuousAction:!0,continuousActionType:o,enforceType:a(o,t.enforceTypeDuringContinuous),singleComp:c(e,t,i),withOriginalValues:t.enforceTypeDuringContinuous!==r.NONE,isUpdatingAnchors:u(e,t,i,o)}}}}()},function(e,t,n){var o,r,i,a,s,c,u;e.exports=(o=n(0),r=n(5),i=n(1),a=n(13),{initialize:function(e){var t=e.siteAPI.getQueryParam("dsQTrace"),n=r.isOpen("ds_recordActionsToCompareWithRC");(t||n)&&s(e)},startTrace:s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shouldLogConsoleTraces:!1},n=t.shouldLogConsoleTraces,o=void 0!==n&&n;e.runtimeConfig.trace.isTracing=!0,e.runtimeConfig.trace.shouldLogConsoleTraces=o},endTrace:function(e){e.runtimeConfig.trace.isTracing=!1},get:c=function(e,t){return t?e.runtimeConfig.trace.readLog:e.runtimeConfig.trace.log},logReadTrace:function(e,t){if(u(e)){var n=window.performance?window.performance.now():o.now();e.runtimeConfig.trace.readLog.push(o.assign({type:"Q OPERATION READ",ts:n},t))}},logTrace:function(e,t,n){if(u(e)){var r=window.performance?window.performance.now():o.now();e.runtimeConfig.trace.log.push(o.merge({type:t,ts:r},n))}},shouldLogConsoleTrace:function(e){return e.runtimeConfig.trace.shouldLogConsoleTraces},isTracing:u=function(e){return e.runtimeConfig.trace.isTracing},cleanTrace:function(e){e.runtimeConfig.trace.log=[],e.runtimeConfig.trace.readLog=[]},upload:function(e){return new Promise((function(t,n){var s=r.isOpen("ds_recordActionsToCompareWithRC_local")?"http://localhost:3000/api/public":"".concat(e.dal.get(e.pointers.getInnerPointer(e.pointers.general.getServiceTopology(),["basePublicUrl"])).replace("http://","https://"),"_api/autopilot"),u=c(e).filter((function(e){return"Q OPERATION ADDED"===e.type})).filter((function(t){return t.handle>e.runtimeConfig.trace.lastRecordedUploadedHandleIndex}));u.length>0?(i.ajaxLibrary.ajax({url:"".concat(s,"/recordings"),type:"POST",dataType:"json",data:{siteId:a.getProperty(e,a.PROPERTY_NAMES.SITE_ID),metaSiteId:a.getProperty(e,a.PROPERTY_NAMES.META_SITE_ID),initialSeed:i.guidUtils.getInitialSeed(),records:u.map((function(e){return{method:e.methodName,args:o.keys(e.args).sort().map((function(t){return e.args[t]}))}}))},success:function(e){i.guidUtils.setInitialSeed(Date.now()),t(e)},error:function(e){n(e)}}),e.runtimeConfig.trace.lastRecordedUploadedHandleIndex=o.get(o.last(u),"handle")||0):t()}))}})},function(e,t,n){e.exports=(n(586),n(176),n(603),{})},function(e,t,n){var o,r,i,a,s,c,u,l,p,d,g,f,m,v,E,y,I,S,h;e.exports=(o=n(0),r=n(6),i=n(587),a=n(186),s=n(589),c=n(590),u=n(591),l=n(592),p=n(593),d=n(594),g=n(595),f=n(596),m=n(597),v=n(598),E=n(226),y=n(599),I=n(600),S=n(601),h=n(602),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,i,"wysiwyg.viewer.components.WPhoto"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,c,"wysiwyg.viewer.components.documentmedia.DocumentMedia"),o.forEach(["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"],(function(e){return r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,p,e)})),o.forEach(["wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStrip"],(function(e){return r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,d,e)})),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,f,"wysiwyg.viewer.components.StripColumnsContainer"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,g,"wysiwyg.viewer.components.mobile.TinyMenu"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,I,"wysiwyg.viewer.components.WRichText"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,u.before,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,S,"wysiwyg.viewer.components.PopupContainer"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,a.positionBigPlay,"wysiwyg.viewer.components.MediaOverlayControls"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,a.positionControlsBar,"wysiwyg.viewer.components.MediaControls"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,y.updateChildLayout,"wysiwyg.viewer.components.Popover"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_BEFORE,h.applyLayoutToWidgetRootOnLayoutUpdate,"platform.components.AppWidget"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_AFTER,E.afterLayoutChanged,"wysiwyg.viewer.components.Repeater"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_AFTER,s,"wysiwyg.viewer.components.WFacebookComment"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_AFTER,l.after,"wysiwyg.viewer.components.ExpandableMenu"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_AFTER,v,"wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu"),r.registerHook(r.HOOKS.LAYOUT.UPDATE_AFTER,m,"wysiwyg.viewer.components.Column"),void r.registerHook(r.HOOKS.LAYOUT.UPDATE_AFTER,a.layoutPlayerChildren,"wysiwyg.viewer.components.MediaPlayer"))},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(588),r=n(4),i=n(20);function a(e,t){var n=e.width-t.contentPaddingHorizontal,o=e.height-t.contentPaddingVertical;return{width:n>0?n:16,height:o>0?o:16}}return function(n,s,c){if(function(t,n,o){if(e.isUndefined(o.height)&&e.isUndefined(o.width))return!1;var r=t.pointers.getInnerPointer(n,"layout"),i=t.dal.get(r);return!e.isUndefined(o.height)&&o.height!==i.height||!e.isUndefined(o.width)&&o.width!==i.width}(n,s,c)){var u=r.properties.get(n,s),l=r.data.get(n,s),p=r.layout.get(n,s);if("fitWidth"===u.displayMode){var d={width:c.width?c.width:p.width,height:c.height?c.height:p.height},g={width:l.width,height:l.height},f=function(e,t,n){var o=parseInt(i.skin.getCompSkinParamValue(e,t,"contentPaddingLeft"),10)||0,r=parseInt(i.skin.getCompSkinParamValue(e,t,"contentPaddingRight"),10)||0,a=parseInt(i.skin.getCompSkinParamValue(e,t,"contentPaddingTop"),10)||0,s=parseInt(i.skin.getCompSkinParamValue(e,t,"contentPaddingBottom"),10)||0,c={},u=o+parseInt(n.contentPaddingLeft||0,10),l=r+parseInt(n.contentPaddingRight||0,10),p=a+parseInt(n.contentPaddingTop||0,10),d=s+parseInt(n.contentPaddingBottom||0,10);return c.contentPaddingHorizontal=u+l,c.contentPaddingVertical=p+d,c}(n,s,i.skin.getComponentSkinExports);if(c.height){var m=t.imageUtils.getContainerSize(o,a(d,f),g,o.fittingTypes.LEGACY_FIT_HEIGHT);c.width=m.width+f.contentPaddingHorizontal}else{var v=t.imageUtils.getContainerSize(o,a(d,f),g,o.fittingTypes.LEGACY_FIT_WIDTH);c.height=v.height+f.contentPaddingVertical}}}}}()},function(e,t){e.exports=V},function(e,t,n){var o,r;e.exports=(o=n(4),r=n(14),function(e,t,n){n.width&&!r.isMobileView(e)&&o.properties.update(e,t,{width:Math.max(n.width,400)})})},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(4),function(e,t,n){o.isUndefined(n.height)||r.properties.update(e,t,{height:n.height})})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(1),i=n(3),a=n(20),s=n(4),{before:function(e,t,n){if(!o.isUndefined(n.height)){var c=s.layout.get(e,t),u=o.get(c,"height");if(!o.isEqual(u,n.height)){var l=i.getDataItem(e,t),p=o.isString(l.menuRef)?l.menuRef.replace("#",""):l.menuRef.id,d=i.getDataItemById(e,p).items,g=o.filter(d,"isVisible").length;if(!(n.height<3*g)){var f=a.skin.getComponentSkinExports(e,t),m=parseInt(a.skin.getCompSkinParamValue(e,t,"sepw")||a.skin.getCompSkinParamValue(e,t,"separatorHeight"),10)||0,v=Math.max(r.verticalMenuCalculations.getItemHeight(n.height,m,g,f),1);s.properties.update(e,t,{menuItemHeight:v})}}}}})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(1),i=n(3),a=n(20),s=n(4),{after:function(e,t,n,c,u,l){if(!o.isUndefined(n.height)&&l.height!==n.height){var p=i.getDataItem(e,t),d=o.isString(p.menuRef)?p.menuRef.replace("#",""):p.menuRef.id,g=i.getDataItemById(e,d).items,f=o.filter(g,"isVisible").length,m=a.skin.getComponentSkinExports(e,t),v=a.skin.getCompSkinParamValue(e,t,"brw"),E=parseInt(v,10)||0,y=Math.max(r.verticalMenuCalculations.getItemHeight(n.height,E,f,m),25);s.properties.update(e,t,{menuItemHeight:y})}}})},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(4),i=n(96),a=n(113),function(e,t,n,s){if(o.isFunction(s)){var c=r.layout.get(e,t);if(a.isCompResizing(c,n)){var u=i.getNonMasterChildren(e,t),l=o.pick(n,["width","height"]);o.forEach(u,(function(t){return s(e,t,l)}))}}})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(4),i=n(96),a=n(150),s=n(113),function(e,t,n,c){if(o.isFunction(c)){var u=r.layout.get(e,t);if(s.isCompResizing(u,n)){var l=i.getNonMasterChildren(e,t),p=a.getRuntimeState(e,t).currentIndex,d=o.pick(n,["width","height"]);c(e,l[p],d)}}})},function(e,t,n){var o;e.exports=(o=n(4),function(e,t){var n=o.properties.get(e,t)||{};n.metaData=n.metaData||{},n.metaData.schemaVersion="2.0",o.properties.update(e,t,n)})},function(e,t,n){e.exports=function(){var e=n(0),t=n(173),o=n(8),r=n(4);function i(e,t){return r.properties.get(e,t).rowMargin}function a(t,n){return e.isNumber(n.height)&&n.height<t.height}return function(n,s,c,u){var l=r.getChildren(n,s),p=r.layout.get(n,s),d=l.length>1;if(!(!(e.isNumber(c.height)&&c.height!==p.height)||d&&n.pointers.components.isMobile(s))){var g=a(p,c),f=function(t,n,o){var a=r.layout.get(t,n),s=i(t,n),c={height:o.height-2*s};return e.isNumber(o.y)&&(c.y=o.y-a.y+s),c}(n,s,c);f.y=e.isUndefined(f.y)?r.layout.get(n,l[0]).y:f.y,e.forEach(l,(function(e){var r=o.public.isEnforcingContainerChildLimitationsByWidth(n,e),i=o.public.isEnforcingContainerChildLimitationsByHeight(n,e);t.constrainByChildrenLayout(n,e,f,!r,!i)})),e.forEach(l,(function(t){if(u(n,t,f),g){var o=i(n,s);!function(t,n){return!!a(t,n)&&(!e.isNumber(n.y)||t.y===n.y)}(p,c)?u(n,t,{y:f.y-o}):u(n,t,{y:f.y+o})}}))}}}()},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(4),i=["layout","y"],a=["layout","height"],s=function(e,t,n){return e.dal.get(e.pointers.getInnerPointer(t,i))+n},function(e,t,n,i,c,u){if(!c&&o.isNumber(n.height)&&n.height!==u.height){var l=r.getContainer(e,t);if(e.pointers.components.isMobile(t)){var p=n.height-u.height,d=e.pointers.components.getChildren(l);o(d).takeRightWhile((function(e){return e.id!==t.id})).forEach((function(t){return i(e,t,{y:s(e,t,p)},i,!0)}));var g=o.reduce(d,(function(t,n){return function(e,t){return e.dal.get(e.pointers.getInnerPointer(t,a))}(e,n)+t}),0);e.dal.set(e.pointers.getInnerPointer(l,a),g)}else{var f=function(e,t){return r.properties.get(e,t).rowMargin}(e,l),m={height:n.height+2*f};i(e,l,m)}}})},function(e,t,n){var o;e.exports=(o=n(4),function(e,t,n){var r,i;n.docked?i=n.docked.right?"right":"left":(r=e.siteAPI.getSiteWidth()/2,i=n.x+n.width/2>r?"right":"left"),o.properties.update(e,t,{orientation:i})})},function(e,t,n){function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r,i;e.exports=(r=n(0),i=n(113),{updateChildLayout:function(e,t,n,a,s,c){var u=o(e.pointers.components.getChildren(t),1)[0];if(u&&i.isCompResizing(c,n)&&r.isFunction(a)){var l=r.isUndefined(n.x)?0:n.x-c.x,p=r.isUndefined(n.y)?0:n.y-c.y;a(e,u,r.defaults({x:l,y:p},n))}}})},function(e,t,n){var o,r,i;e.exports=(o=n(0),r=n(4),i=n(91),function(e,t,n){(function(e,t){if(e&&!o.isUndefined(e.height)&&t)return e.height!==t.height})(n,r.layout.get(e,t))&&!i.isGroupedComponent(e,t)&&r.properties.update(e,t,{minHeight:n.height,packed:0===n.height})})},function(e,t,n){e.exports=function(){var e=n(0),t=n(4),o={vertical:{names:["top","center","bottom"],offset:"verticalOffset",field:"verticalAlignment"},horizontal:{names:["left","center","right"],offset:"horizontalOffset",field:"horizontalAlignment"}};function r(t,n){var o=e.minBy(t,Math.abs),r=t.indexOf(o),i=n.names[r],a={};return a[n.field]=i,a[n.offset]=o,a}return function(n,i,a){var s=t.layout.get(n,i);if(a.width===s.width&&a.height===s.height){var c,u,l,p,d=t.properties.get(n,i),g=n.siteAPI.getScreenSize(),f=n.siteAPI.getSiteWidth();"nineGrid"!==d.alignmentType&&"fullWidth"!==d.alignmentType||e.assign(d,(c=a.y,u=a.height,l=g.height,p=c+u/2,r([Math.round(c),Math.round(p-l/2),Math.round(l-(c+u))],o.vertical))),"nineGrid"!==d.alignmentType&&"fullHeight"!==d.alignmentType||e.assign(d,function(e,t,n,i){var a=e+t/2,s=Math.round((i-n)/2);return r([Math.max(Math.round(e+s),0),Math.round(a-n/2),Math.max(Math.round(i-(e+t+s)),0)],o.horizontal)}(a.x,a.width,f,g.width)),t.properties.update(n,i,d)}}}()},function(e,t,n){function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r,i,a,s,c;e.exports=(r=n(0),i=n(4),a=n(113),s=n(11),c=function(e,t){return r.isUndefined(e)?0:e-t},{applyLayoutToWidgetRootOnLayoutUpdate:function(e,t,n,u,l,p){var d=a.isCompResizing(p,n)||a.isCompRescaling(p,n);if(r.isFunction(u)&&d){var g=o(i.getChildren(e,t),1)[0],f=s.isDocked(e,t),m=f?0:c(n.x,p.x),v=f?0:c(n.y,p.y);u(e,g,r.pickBy({x:m,y:v,width:n.width,height:n.height,scale:n.scale},r.isNumber))}}})},function(e,t,n){e.exports=function(){var e=n(6),t=n(604),o=n(605),r=n(606);e.registerHook(e.HOOKS.METADATA.MOVE_DIRECTIONS,t.setMovableSidesForRepeaterItems),e.registerHook(e.HOOKS.METADATA.REMOVABLE,t.disableRemovalForRepeaterItems),e.registerHook(e.HOOKS.METADATA.DUPLICATABLE,t.disableDuplicationOfRepeaterItem),e.registerHook(e.HOOKS.METADATA.RESIZABLE_SIDES,t.setResizableSidesForRepeaterItems);e.registerHook(e.HOOKS.METADATA.ROTATABLE,r.rotatable,"platform.components.AppWidget"),e.registerHook(e.HOOKS.METADATA.RESIZABLE_SIDES,r.resizableSides,"platform.components.AppWidget"),e.registerHook(e.HOOKS.METADATA.LAYOUT_LIMITS,r.layoutLimits,"platform.components.AppWidget"),e.registerHook(e.HOOKS.METADATA.CONTAINABLE,r.containable),e.registerHook(e.HOOKS.METADATA.MOVE_DIRECTIONS,o.disableForAllButRoot),e.registerHook(e.HOOKS.METADATA.REMOVABLE,o.disableForAllButRoot),e.registerHook(e.HOOKS.METADATA.DUPLICATABLE,o.disableForAllButRoot),e.registerHook(e.HOOKS.METADATA.CAN_REPARENT,o.disableForAllButRoot),e.registerHook(e.HOOKS.METADATA.FIXED_POSITION,o.disableForAllButRoot),e.registerHook(e.HOOKS.METADATA.CONTAINABLE,o.disableForAll),e.registerHook(e.HOOKS.METADATA.ROTATABLE,o.disableForAll),e.registerHook(e.HOOKS.METADATA.RESIZABLE_SIDES,o.disableForAll)}()},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(9),r=n(2),i=n(3),a=n(1),s="wysiwyg.viewer.components.Repeater",{setMovableSidesForRepeaterItems:function(e,t,n){var r=e.pointers.components.getParent(n);return r&&o.getComponentType(e,r)===s?[]:t},disableRemovalForRepeaterItems:function(e,t,n){var r=e.pointers.components.getParent(n);return(!r||o.getComponentType(e,r)!==s)&&t},disableDuplicationOfRepeaterItem:function(e,t,n){var r=e.pointers.components.getParent(n);return(!r||o.getComponentType(e,r)!==s)&&t},setResizableSidesForRepeaterItems:function(e,t,n){var c=e.pointers.components.getParent(n);if(c&&o.getComponentType(e,c)===s){var u=i.getPropertiesItem(e,c);return u&&u.alignment===a.constants.COMP_LAYOUT_OPTIONS.REPEATER.ALIGNMENTS.RIGHT?[r.RESIZE_SIDES.BOTTOM,r.RESIZE_SIDES.LEFT]:[r.RESIZE_SIDES.BOTTOM,r.RESIZE_SIDES.RIGHT]}return t}})},function(e,t,n){var o,r;e.exports=(o=n(1),r=n(4),{disableForAllButRoot:function(e,t,n){return!(o.displayedOnlyStructureUtil.isRefPointer(n)&&!function(e,t){var n=r.getContainer(e,t);return!o.displayedOnlyStructureUtil.isRefPointer(n)}(e,n))&&t},disableForAll:function(e,t,n){return!o.displayedOnlyStructureUtil.isRefPointer(n)&&t}})},function(e,t,n){function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(4),r=n(8),i=n(43);function a(e,n,r){return r(e,o(t.getChildren(e,n),1)[0])}function s(t,n,o){return e.get(i.getControllerStageDataByControllerRef(t,o),["behavior",n])}return{rotatable:function(e,t,n){return a(e,n,r.public.isRotatable)&&!1!==s(e,"rotatable",n)},resizableSides:function(t,n,o){return e.intersection(a(t,o,r.public.getResizableSides),!1===s(t,"resizable",o)?[]:n)},layoutLimits:function(e,t,n){var o=a(e,n,r.public.getLayoutLimits);return!1===s(e,"resizable",n)&&delete o.aspectRatio,o},containable:function(n,o,i,a){if(!1===o)return!1;var s=t.getContainer(n,i);return!!n.pointers.isSamePointer(s,a)||("platform.components.AppWidget"===t.getType(n,a)?r.public.isContainable(n,i,e.head(t.getChildren(n,a))):"platform.components.AppWidget"!==t.getType(n,s))}}}()},function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r,i,a;e.exports=(r=n(0),i=n(608).siteAspectsRegistry,a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.siteAPI=t,this.pageChangeCallbacks=[],this.siteAPI.registerToUrlPageChange(this.handlePageChange.bind(this)))}var t,n,i;return t=e,(n=[{key:"handlePageChange",value:function(e){r.forEach(this.pageChangeCallbacks,(function(t){t(e)})),this.pageChangeCallbacks=[]}},{key:"registerToUrlPageChange",value:function(e){this.pageChangeCallbacks.push(e)}}])&&o(t.prototype,n),i&&o(t,i),e}(),i.registerSiteAspect("DocumentServicesAspect",a),a)},function(e,t){e.exports=G},function(e,t,n){e.exports=function(){var e=n(1),t=n(0);function o(t){var n=t.pointers.data.getDataItemFromMaster(e.siteConstants.MASTER_PAGE_ID);return t.pointers.getInnerPointer(n,"accessibilitySettings")}return{get:function(e){var n=e.dal.get(o(e)),r=t.get(n,"visualFocusDisabled");return!t.isUndefined(r)&&!r},set:function(e,n){if(!t.isBoolean(n))throw new Error("visualFocus.set accepts only boolean value");var r=o(e),i=e.dal.get(r)||{};e.dal.set(r,t.assign(i,{visualFocusDisabled:!n}))}}}()},function(e,t,n){var o,r;e.exports=(o=n(611),r=n(175),{loadAndRegisterAppStudioComponents:function(e){if(e.siteAPI.isExperimentOpen("sv_appStudioWithBaseUI")){var t=o.loadAll("".concat(requirejs.toUrl("wix-ui-santa"),"/")).then((function(t){return t.forEach((function(t){return r.registerComponent(e,t)}))}));return Promise.all([t]).catch((function(e){return"Error: could not load base ui DS components. ".concat(e)}))}}})},function(e,t){e.exports=W},function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return s(e,arguments,u(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),c(o,e)})(e)}function s(e,t,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&c(r,n.prototype),r}).apply(null,arguments)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),o=n(78),s=n(18),d=n(4),g=n(75),f=n(185),m=n(7),v=n(125),E=n(60),y=n(3),I=n(64),S=n(207),h=n(10),P=n(62),A=n(613),T=n(614),_=n(6),O=n(21),C=n(2),D=n(19),w=n(615),M=n(36),b=n(106),R=n(88),N=n(5),x=t.constants.DATA_TYPES,L="AppStudioData",B="WidgetDescriptor",F="VariationDescriptor",k="Widget",U="Variation",H=D.services.dataValidators,V=t.ajaxLibrary,G=t.urlUtils,W=R.requestsUtil.fetchJson,Y=o.build,z=Y.INVALID_VERSION_TYPE,K=Y.NO_GRID_APP_ID,j=Y.NO_STUDIO_APP_APP_ID,q=Y.USER_NOT_AUTHORIZED_FOR_APP,Q=Y.UNKNOWN_SERVER_ERROR,X=o.save,Z=X.SAVE_DISABLED_IN_DOCUMENT_SERVICES,J=X.SESSION_EXPIRED,$=X.NOT_LOGGED_IN,ee=X.USER_NOT_AUTHORIZED_FOR_SITE;function te(t,n){var o=d.getPage(t,n);if(o&&P.isWidgetPage(t,o.id)&&!P.isVariationPage(t,o.id)){var r=Re(t,o.id),i=g.getNickname(t,n);if(i){var a=Ce(t,r);return e(a).map((function(n){var o=be(t,n.pointer),r=m.getAllComponents(t,o);return e.filter(r,(function(e){return g.getNickname(t,e)===i}))})).flatten().value()}}}function ne(t,n){if(t.pointers.components.getViewMode(n)===C.VIEW_MODES.DESKTOP){var o=te(t,n);e.forEach(o,(function(e){return d.remove(t,e)}))}}function oe(t,n,o){var r=te(t,n);e.forEach(r,(function(e){return g.setNickname(t,e,o)}))}var re=["isCollapsed","isHidden","isDisabled"];function ie(t,n,o){var r=te(t,n),i=e.pick(o,re);e.isEmpty(i)||e.forEach(r,(function(e){return y.updatePropertiesItem(t,e,i)}))}function ae(t,n){if("preview"===n){var o=Re(t,t.siteAPI.getFocusedRootId()),i=be(t,o),a=function(e,t){return l(d.getChildren(e,t),1)[0]}(t,s.getPage(t,i)),c=d.serialize(t,a),u=p({},T.APP_BUILDER_PREVIEW_APP_ID,p({},i,function(t,n){var o={},i=r(e.get(n,["components"],[]));for(;i.length>0;){var a=i.shift(),s=m.getComponentById(t,a.id),c=g.getNickname(t,s);c&&(a.id=e.uniqueId("ghost-"),o[c]=a,i.push.apply(i,r(a.components||[])),a.components&&(o[c].children=e(a.components).map((function(e){return g.getNickname(t,m.getComponentById(t,e))})).compact().value(),delete o[c].components))}return o}(t,c)));M.setGhostStructure(t,u)}}function se(e,t){if(t){var n=d.isPageComponent(e,t)?t:d.getPage(e,t);if(e.pointers.components.isMasterPage(n))return null;if(n)return l(d.getChildren(e,n),1)[0]}return null}function ce(e,n){var o=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID),r=e.dal.get(o);r.appStudioData=n,y.addSerializedDataItemToPage(e,t.siteConstants.MASTER_PAGE_ID,r,t.siteConstants.MASTER_PAGE_ID)}function ue(e,n){var o=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID),r=e.dal.get(o),i=P.getAppStudioData(e);i.widgets=n,r.appStudioData=i,y.addSerializedDataItemToPage(e,t.siteConstants.MASTER_PAGE_ID,r,t.siteConstants.MASTER_PAGE_ID)}function le(t,n){var o=P.getAppStudioData(t);e.isUndefined(o)&&(o=function(t,n){var o=y.createDataItemByType(t,L);o.id=de();var r=t.dal.getByPath(["documentServicesModel","metaSiteData","siteName"])||"MyProject1";return o.name=e.replace(r,"mysite","MyProject"),e.defaults(o,n)}(t,n),ce(t,o))}function pe(t,n){var o=P.getAppStudioData(t);if(e.isUndefined(o))throw new Error("appStudio: there is no app studio to update");var r=e.assign({},o,n);!function(t,n){if(e.isEmpty(n.name))throw new Error("appStudio: name is required")}(0,r),ce(t,r)}function de(){return E.generateNewId(x.data)}function ge(e){var t=de();return e.pointers.data.getDataItemFromMaster(t)}function fe(e,t){var n=P.getAppStudioData(e).widgets;n.push(t),ue(e,n)}function me(e,t,n){var o=function(e,t){var n=v.getBlankPageStructure(e,t.id,s.serializePage),o=v.getBlankBackground();return o.desktop.ref.color="#f0f3f5",o.mobile.ref.color="#f0f3f5",n.data.pageBackgrounds=o,delete n.styleId,n.style=h.styles.createStyleItemToAdd(e,{styleType:"custom",skin:"wysiwyg.viewer.skins.page.BasicPageSkin"}),n.style.style.properties.bg="#f0f3f5",n.data.isLandingPage=!0,n.data.isMobileLandingPage=!0,n}(e,n);s.add(e,n,t,o)}function ve(t,n,o,r){var i=y.createDataItemByType(t,B);return i.id=n,i.name=o,i.rootCompId="#".concat(e.get(r,"id")),i}function Ee(t,n){if(e.isEmpty(n))throw new Error("appStudio.widgets: name is required");if(e.includes(e.map(P.getAllWidgets(t),"name"),n))throw new Error("appStudio.widgets: widget name already exists")}function ye(t,n,o){if(e.isEmpty(n))throw new Error("appStudio.variations: name is required");if(e.includes(e.map(Ce(t,o),"name"),n))throw new Error("appStudio.variations: variation name already exists")}function Ie(t,n,o){var r=d.getComponentToAddRef(t,o);if(N.isOpen("se_appWidgetAsRoot")){var i=e.defaults({components:[n]},A);d.add(t,r,o,i),function(e,t,n){var o={type:n,behaviors:[]},r={controllerType:n,settings:JSON.stringify(o)};d.data.update(e,t,r)}(t,r,o.id)}else d.add(t,r,o,n)}function Se(t,n,o,r,i,a){if(o){var c=a||function(e,t,n){return _e(Ce(e,n),t)}(t,U,o);ye(t,c,o);var u=s.getPageIdToAdd(t),l=function(t,n,o,r){var i=y.createDataItemByType(t,F);return i.id=n.id,i.name=o,i.rootCompId="#".concat(e.get(r,"id")),t.dal.set(n,i),i}(t,n,c,u);!function(e,t,n){var o=e.dal.get(n);o&&(o.variations.push("#".concat(t.id)),e.dal.set(n,o))}(t,l,o),t.pointers.page.isExists(i)?(s.duplicate(t,u,i,void 0,!1),De(t,u.id,c)):(me(t,c,u),r&&Ie(t,r,u))}}function he(t){return e.forEach(t,(function(t){var n=t.params;n&&e.set(t,"params",e.map(n,(function(t){return function(t){return e.mapValues(t,(function(t){return e.isNil(t)?"":t}))}(t)})))}))}function Pe(e){return JSON.parse(JSON.stringify(e))}function Ae(t,n){var o=t.pointers.getInnerPointer(n,"widgetApi.propertiesSchemas");return e.map(t.dal.get(o),(function(t){return e.assign(t.structure,e.omit(t,["structure","type"]))}))}function Te(t,n,o,r){if("propertiesSchemas"===n){!function(t){if(!(e.uniqBy(t,(function(e){return w.getSchemaStructureKey(e)})).length===t.length))throw new Error("appStudio.widgets: property name is already in use for this widget")}(r);var i=P.getAppStudioData(t).customDefinitions||[];w.validatePropertyDefaultValue(i,r),r=e.map(r,(function(e){return{structure:e}}))}else!function(t){if(!e.every(t,"name"))throw new Error("appStudio.widgets: can not set widget API without a name");if(!(e.uniqBy(t,"name").length===t.length))throw new Error("appStudio.widgets: API name is already in use for this widget")}(r),r=he(r);var a=t.dal.get(o);!function(e,t,n,o,r){n.widgetApi[o]=r,H.validateDataBySchema(n,"data"),e.dal.set(t,n)}(t,o,a,n,r)}function _e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,o=e(t).map("name").filter((function(e){return function(e,t){return!!new RegExp("^".concat(t,"[0-9]*$")).exec(e)}(e,n)})).map((function(t){return e.replace(t,n,"")})).map(Number).sortBy().value(),r=e.last(o)||0;return n+(r+1)}function Oe(e,t){return _e(P.getAllWidgets(e),t)}function Ce(t,n){var o=t.dal.get(n)||{};return e.map(o.variations,(function(n){var o=t.pointers.data.getDataItemFromMaster(e.replace(n,"#","")),r=t.dal.get(o);return{pointer:o,name:e.get(r,"name")}}))}function De(e,t,n){var o=O.getPageData(e,t);o.title=n,O.setPageData(e,t,o)}function we(e,t,n){De(e,be(e,t),n)}function Me(e,t,n){var o=e.dal.get(t);o.name=n,e.dal.set(t,o)}function be(t,n){var o=t.dal.get(n);if(o&&o.rootCompId)return e.replace(o.rootCompId,"#","")}function Re(e,t){var n=P.findWidgetByPageId(e,t);return n&&n.pointer}function Ne(t,n,o){var r=t.dal.get(n),i=w.getSchemaStructureKey(o),a=P.getAppStudioData(t),s=a.customDefinitions||[];if(w.validateDefinitionHasProperties(o),r){var c=e.findIndex(s,["id",n.id]);w.getSchemaStructureKey(s[c].structure)!==i&&w.validateNewDefinitionName(s,i),s[c]=w.mergeExistingDefinitionWithDefinitionData(r,o),s[c].structure=w.setPropertiesOrder(s[c].structure)}else{w.validateNewDefinitionName(s,i),o=w.setPropertiesOrder(o);var u=w.createNewDefinitionWithData(t,y,o);s.push(u)}w.validateDefinitionDefaultValue(s,o),a.customDefinitions=s,pe(t,a),r&&function(t,n,o,r){var i=w.getDefinitionPropertiesDifference(o,r);if(!e.isEmpty(i.addedProperties)||!e.isEmpty(i.removedProperties)||!e.isEmpty(i.restrictedProperties)){var a=xe(t,n);e.forEach(a.definitions,(function(e){Ne(t,e.definition.pointer,w.updateDefinitionDefault(t,e,i))})),e.forEach(a.widgets,(function(e){Te(t,"propertiesSchemas",e.widget.pointer,w.updateWidgetPropertiesDefault(t,e,i,Ae))}))}}(t,n,r.structure,o)}function xe(t,n){var o=t.dal.get(n),r=w.getSchemaStructureKey(o.structure),i=e.get(o,["structure",r,"$id"]);return{widgets:w.getDefinitionUsagesInWidgets(t,Ae,i),definitions:w.getDefinitionUsagesInDefinitions(t,i)}}function Le(e,t){var n=xe(e,t);if(n.widgets.length>0||n.definitions.length>0)throw new Error("appStudio.definitions: definition is in use, cannot remove")}var Be=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,u(t).call(this,"Build Error"))).errorCode=e.errorCode,n.errorType=e.errorType,n.errorDescription=e.errorDescription,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),t}(a(Error));function Fe(t,n,o){return new Promise((function(r,i){if(S.canSave()){var a=t.dal.full.immutable.getCurrentSnapshot(),s=function(e,t){var n=e.getIn(["serviceTopology","editorServerRoot"]),o=e.getIn(["rendererModel","siteInfo","siteId"]),r=e.getIn(["rendererModel","metaSiteId"]),i=Ve(e),a=G.toQueryString({metaSiteId:r,editorSessionId:i,esi:i,versionType:t});return"".concat(n,"/api/build/").concat(o,"?").concat(a)}(a,n),c=function(t){var n=P.getAllWidgets(t);return e.reduce(n,(function(n,o){var r=be(t,o.pointer),i=e.map(o.variations,(function(n){var o=t.pointers.data.getDataItemFromMaster(e.replace(n,"#",""));return be(t,o)}));return n[r]=i,n}),{})}(t),u=b.getCodeAppInfoFromPS(t).signedInstance;!function(e,t,n,o,r,i,a){V.ajax({type:"POST",url:t,headers:{"X-Wix-Editor-Version":"new","X-Wix-DS-Origin":e.get("origin"),"X-Editor-Session-Id":Ve(e),Authorization:a},dataType:"json",data:{widgetsMap:n,appMarketingName:o,skipDataFor:[]},success:function(e){return e.success?r():i(He(e.errorCode,e.errorDescription))},error:function(e){return i(He(e.errorCode,e.errorDescription))}})}(a,s,c,o,r,i,u)}else i(He("-1","DocumentServices was created with parameter disableSave=true, so build is disabled.",Z))}))}var ke={minor:"minor",major:"major",build:"build"};var Ue={"-12":J,"-15":$,"-17":ee,"-10198":K,"-15053":j,"-15054":q},He=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q;return new Be({errorCode:e,errorDescription:t,errorType:Ue[e]||n})};function Ve(e){return e.getIn(["documentServicesModel","editorSessionId"])}return{initialize:function(e){e.dal.set(e.pointers.general.getMobileConversionHeuristicStrategy(),"appbuilder");var t=e.pointers.general.getAutosaveInfo(),n=e.dal.get(t)||{};n.shouldAutoSave=!1,e.dal.set(t,n),N.isOpen("se_appBuilderVariations")&&(_.registerHook(_.HOOKS.REMOVE.BEFORE,ne),_.registerHook(_.HOOKS.WIX_CODE.SET_NICKNAME_BEFORE,oe),_.registerHook(_.HOOKS.PROPERTIES.UPDATE_AFTER,ie),_.registerHook(_.HOOKS.CHANGE_PARENT.AFTER,ne),_.registerHook(_.HOOKS.CHANGE_COMPONENT_VIEW_MODE.BEFORE,ae)),N.isOpen("se_appWidgetAsRoot")&&f.setContextProvider(se)},getNewDataId:de,getNewDataItemPointer:ge,getAppStudioMetaData:P.getAppStudioMetaData,updateAppStudioMetaData:pe,build:function(t,n,o,r,i){!function(e){return!!ke[e]}(r)?o(He("-1",'Version type should be one of: "build", "minor" "major".',z)):I.runFunctionInSaveQueue(e.partial(Fe,t,r,i)).then(n).catch(o)},getDevSiteAppDefId:function(e){var t=e.pointers.general.getDevSiteAppDefIdPointer();return e.dal.get(t)},setWixDataToken:function(n,o,r,i,a,s){(function(e,t){var n=b.getCodeAppInfoFromPS(e);return W("https://www.wix.com/_api/cloud-data-packaging/v1/package-data",{mode:"cors",method:"POST",credentials:"include",headers:new Headers({Authorization:n.signedInstance}),body:JSON.stringify({signedInstance:n.signedInstance,gridAppId:n.appId,appMarketingName:t,skipDataFor:[]})}).then((function(e){return e&&e.packageToken}))})(n,i).then((function(e){return function(e,n,o,r){W("https://apps.wix.com/app-studio-server/setToken",{mode:"cors",method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json; charset=utf-8","X-XSRF-TOKEN":t.cookieUtils.getCookie("XSRF-TOKEN")}),body:JSON.stringify({token:o,appVersion:n,appDefId:e,appMarketingName:r})})}(r,o,e,i)})).then(a).catch((function(t){return t.json().then((function(t){e.get(t,"message","").contains("No collections to package")?a():s(t)}))}))},definitions:{getAllCustomDefinitions:P.getAllCustomDefinitions,getAllSerializedCustomDefinitions:P.getAllSerializedCustomDefinitions,getSerializedCustomDefinition:P.getSerializedCustomDefinition,setCustomDefinition:Ne,removeCustomDefinition:function(t,n){if(!t.dal.get(n))throw new Error("appStudio.definitions: cannot remove non existing definition");Le(t,n);var o=P.getAppStudioData(t);e.pullAt(o.customDefinitions,e.findIndex(o.customDefinitions,{id:n.id})),pe(t,o)},getAllDefinitionUsages:xe,validateDefinitionHasNoUsages:Le,validateNewDefinitionName:w.validateNewDefinitionName},widgets:{createWidget:function(t,n,o,r,i){o=o||Oe(t,k),le(t),Ee(t,o);var a=s.getPageIdToAdd(t),c=ve(t,n,o,a);fe(t,c),me(t,o,a),r&&Ie(t,r,a);var u=t.pointers.data.getDataItemFromMaster(c.id);return e.isFunction(i)&&i(u),u},getAllWidgets:P.getAllWidgets,getAllSerializedWidgets:P.getAllSerializedWidgets,getWidgetFunctions:function(e,t){var n=e.pointers.getInnerPointer(t,"widgetApi.functions");return e.dal.get(n)},getWidgetPropertiesSchema:Ae,getWidgetEvents:function(e,t){var n=e.pointers.getInnerPointer(t,"widgetApi.events");return e.dal.get(n)},setWidgetApiPart:Te,duplicateWidget:function(t,n,o){var r=t.dal.get(n);if(r){var i=Oe(t,r.name),a=de(),c=s.getPageIdToAdd(t),u=ve(t,a,i,c);u.widgetApi=e.cloneDeep(r.widgetApi),fe(t,u);var l=t.pointers.data.getDataItemFromMaster(u.id);return s.duplicate(t,c,e.replace(r.rootCompId,"#","")),we(t,l,i),function(t,n,o){e.forEach(n.variations,(function(n){var r=t.dal.get(t.pointers.data.getDataItemFromMaster(e.replace(n,"#",""))),i=ge(t);Se(t,i,o,null,e.replace(r.rootCompId,"#",""),r.name)}))}(t,r,l),e.isFunction(o)&&o(l),l}},setWidgetName:function(e,t,n){Ee(e,n),Me(e,t,n),we(e,t,n)},getWidgetName:function(t,n){var o=t.dal.get(n);return e.get(o,"name")},displayWidget:function(e,t,n){var o=be(e,t);o&&s.navigateTo(e,o,n)},removeWidget:function(t,n,o){var r=t.dal.get(n);if(r&&r.rootCompId){var i=P.getAppStudioData(t).widgets;e.pullAt(i,e.findIndex(i,{id:n.id})),ue(t,i),s.remove(t,r.rootCompId,o)}},isWidgetPage:P.isWidgetPage,getWidgetByRootCompId:Re,getRootCompIdByPointer:be,getWidgetById:P.getWidgetPointerByWidgetId,notifyPropertiesUpdateToWorker:function(t,n,o,r){if(!e.isEqual(o,r)){var i=be(t,n);t.siteAPI.triggerAppStudioWidgetOnPropsChanged(i,Pe(o),Pe(r))}},variations:{createVariation:Se,getVariationName:function(t,n){var o=t.dal.get(n);return e.get(o,"name")},setVariationName:function(e,t,n,o){ye(e,o,n),Me(e,t,o),we(e,t,o)},removeVariation:function(t,n,o){var r=t.dal.get(o);if(r){var i=r.variations;e.remove(i,(function(e){return e==="#".concat(n.id)})),r.variations=i,t.dal.set(o,r);var a=be(t,n);s.remove(t,a)}},isVariationPage:P.isVariationPage,getWidgetVariations:Ce,getVariationByRootCompId:function(t,n){var o=P.findVariationByPageId(t,n).variationId;return o&&t.pointers.data.getDataItemFromMaster(e.replace(o,"#",""))}}}}}()},function(e){e.exports=JSON.parse('{"layout":{"docked":{"top":{"px":45},"hCenter":{"px":0}},"x":0,"y":0,"width":600,"height":400},"componentType":"platform.components.AppWidget","type":"Container","components":[],"data":{"type":"AppController","name":"Widget1","applicationId":"46b2ad43-5720-41d2-8436-2058979cb53f","controllerType":"controllerType","id":"dataItem-placeholder","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false}},"mobileHints":{"type":"MobileHints","recommendedWidth":280,"recommendedHeight":187,"author":"studio","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"id":"mobileHints-jx4qjbak"},"style":"appWidget1","activeModes":{}}')},function(e,t){e.exports={APP_BUILDER_PREVIEW_APP_ID:"46b2ad43-5720-41d2-8436-2058979cb53f"}},function(e,t,n){function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),i=n(616),a=n(62),s=function(t){var n=c(t);return{name:n,data:e.get(t,[n]),default:e.get(t,[n,"default"]),properties:e.get(t,[n,"properties"])}},c=function(t){return e.head(e.keys(t))},u=function(t){return"array"===e.get(t,[c(t),"allOf",0,"type"])},l=function(t){return u(t)?e.get(t,[c(t),"allOf",0,"items","allOf",0,"$ref"]):e.get(t,[c(t),"allOf",0,"$ref"])},p=function(t){return e.pick(u(t)?e.get(t,[c(t),"allOf",0,"items","allOf",1]):e.get(t,[c(t),"allOf",1]),["minimum","maximum","multipleOf","minLength","maxLength"])},d=function(t,n){return e.reduce(t,(function(t,o){var r=c(o);return(u(o)?e.get(o,[r,"allOf",0,"items","allOf",0,"$ref"],""):e.get(o,[r,"allOf",0,"$ref"],""))===n&&t.push({property:o,name:r}),t}),[])},g=function(t,n,r,i,a){var s=e.mapValues(e.keyBy(a.addedProperties,"name"),"default"),c=e.map(a.removedProperties,"name");if(n)e.forEach(e.get(t,i,[]),(function(n,r){var u=e.get(t,[].concat(o(i),[r]),{});e.set(t,[].concat(o(i),[r]),e.assign(f(e.omit(u,c),a.restrictedProperties),s))}));else{var u=e.get(t,r,{});e.set(t,r,e.assign(f(e.omit(u,c),a.restrictedProperties),s))}return t},f=function(t,n){return e.forOwn(t,(function(o,r){var i=e.get(e.find(n,["name",r]),"restrictions");e.has(i,"minimum")||e.has(i,"maximum")||e.has(i,"multipleOf")?t[r]=m(o,i):(e.has(i,"minLength")||e.has(i,"maxLength"))&&(t[r]=v(o,i))})),t},m=function(t,n){var o=e.get(n,"minimum",Number.MIN_SAFE_INTEGER),r=e.get(n,"maximum",Number.MAX_SAFE_INTEGER),i=y(t,o,r);return e.has(n,"multipleOf")&&((i=E(i,n.multipleOf))>r?i-=n.multipleOf:i<o&&(i+=n.multipleOf),i=E(i,n.multipleOf)),i},v=function(t,n){var o=e.get(n,"maxLength",Number.MAX_SAFE_INTEGER);if(e.size(t)>o)return e.truncate(t,{length:o,omission:""});var r=e.get(n,"minLength",-1);return e.size(t)<r?e.padEnd(t,r,"?"):t},E=function(e,t){return Math.round(e/t)*t},y=function(e,t,n){return Math.min(Math.max(e,t),n)};function I(e,t,n){if(!i.createValidator(e,t).validate(n))throw new Error("app studio: Data validation failed")}return{getSchemaStructureKey:c,mergeExistingDefinitionWithDefinitionData:function(t,n){var o=c(t.structure),i=c(n),a=e.assign({},t.structure[o],n[i]),s=e.omit(t,"structure");return e.assign({},s,{structure:r({},i,a)})},createNewDefinitionWithData:function(n,o,r){return r[c(r)].$id=t.guidUtils.getUniqueId(),e.assign(o.createDataItemByType(n,"CustomDefinitionDescriptor"),{structure:r})},getDefinitionPropertiesDifference:function(t,n){var o=s(t),i=s(n),a=e(i.properties).keys().difference(e.keys(o.properties)).map((function(t){return{name:t,default:e.get(n,[i.name,"default",t])}})).value(),c=e(o.properties).keys().difference(e.keys(i.properties)).map((function(e){return{name:e}})).value(),d=[];return e.forOwn(i.properties,(function(t,s){if(!e.isUndefined(o.properties[s])){var g=l(r({},s,t))!==l(r({},s,o.properties[s])),f=u(r({},s,t))!==u(r({},s,o.properties[s]));(g||f)&&(a.push({name:s,default:e.get(n,[i.name,"default",s])}),c.push({name:s}));var m=p(r({},s,t)),v=p(r({},s,o.properties[s]));e.isEqual(m,v)||d.push({name:s,restrictions:m})}})),{addedProperties:a,removedProperties:c,restrictedProperties:d}},getDefinitionUsagesInWidgets:function(t,n,o){var r=a.getAllWidgets(t);return e.reduce(r,(function(e,r){var i=n(t,r.pointer),a=d(i,o);return a.length>0&&e.push({widget:r,dependantProperties:a}),e}),[])},getDefinitionUsagesInDefinitions:function(t,n){var o=a.getAllCustomDefinitions(t);return e.reduce(o,(function(o,i){var c=a.getSerializedCustomDefinition(t,i.pointer),u=s(c),l=e.map(e.keys(u.properties),(function(e){return r({},e,u.properties[e])})),p=d(l,n);return p.length>0&&o.push({definition:i,dependantProperties:p}),o}),[])},updateDefinitionDefault:function(t,n,o){var r=a.getSerializedCustomDefinition(t,n.definition.pointer);return e.forEach(n.dependantProperties,(function(e){var t=[n.definition.name,"default",e.name];r=g(r,u(e.property),t,t,o)})),r},updateWidgetPropertiesDefault:function(t,n,o,r){var i=r(t,n.widget.pointer);return e.forEach(n.dependantProperties,(function(t){var n=e.findIndex(i,(function(e){return c(e)===t.name})),r=i[n];if(r){var a=[t.name,"allOf",1,"default"],s=[t.name,"allOf",0,"default"];i[n]=g(r,u(r),a,s,o)}})),i},setPropertiesOrder:function(t){var n=c(t),o=e.keys(e.get(t,[n,"properties"],{})),r=e.get(t,[n,"propertiesOrder"],[]);return r=e(r).reject((function(t){return!e.includes(o,t)})).concat(e.difference(o,r)).uniq().value(),e.set(t,[n,"propertiesOrder"],r)},validatePropertyDefaultValue:function(t,n){var a=e.merge.apply(e,[{}].concat(o(e.map(t,"structure")))),s=e.merge.apply(e,[{}].concat(o(n))),c=i.createDriver(a);I(a,s,e.merge.apply(e,[{}].concat(o(e.map(n,(function(e){return c.set.schema(e),r({},c.get.name(),c.get.default())}))))))},validateDefinitionDefaultValue:function(t,n){var r=e.mapValues(n,"default");I(e.merge.apply(e,[{}].concat(o(e.map(t,"structure")))),n,r)},validateDefinitionHasProperties:function(t){var n=s(t);if(e.isEmpty(n.properties))throw new Error("app studio: Definition cannot be set without properties")},validateNewDefinitionName:function(t,n){var o=e.concat(e.map(t,(function(e){return c(e.structure)})),["text","number","boolean","image","url","dateTime","array","object","string","widget","props"]);if(e.includes(o,n))throw new Error("appStudio.definitions: definition name is already in use for this app")}}}()},function(e,t){e.exports=Y},function(e,t,n){var o,r,i,a;e.exports=(o=n(0),r=n(4),i=n(43),a=n(18),{changeVariation:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.noop;if("wysiwyg.viewer.components.RefComponent"===r.getType(e,t))return r.data.update(e,t,{variationId:n}),void s(t);var c=o.get(r.data.get(e,t),"applicationId");if(c){var u=i.getSettings(e,t),l=o.get(u,"devCenterWidgetId");if(l){r.remove(e,t);var p=r.layout.get(e,t),d=e.siteAPI.getPrimaryPageId(),g=a.getPage(e,d),f=r.getComponentToAddRef(e,g);return r.add(e,f,g,{componentType:"wysiwyg.viewer.components.RefComponent",layout:p,type:"RefComponent",style:"ref1",data:{type:"WidgetRef",appDefinitionId:c,widgetId:l,variationId:n}}),void s(f)}}throw new Error("Change variation is not available for this component")}})},function(e,t,n){var o;e.exports=(o=n(20),{getStylableEditorInstance:function(e){return e.siteAPI.getStylableEditorInstance()},update:function(e,t,n){o.style.update(e,t,n),e.siteAPI.revertQuickChanges(t.id)},setQuickChange:function(e,t,n,o){e.siteAPI.setQuickChanges(t.id,n,o)},revertQuickChange:function(e,t){e.siteAPI.revertQuickChanges(t.id)},forceState:function(e,t,n){e.siteAPI.forceState(t.id,n)},revertForceState:function(e,t){e.siteAPI.revertForceState(t.id)}})},function(e,t){e.exports=function(){function e(e,t){return t=t?"balatamedia".concat(t):"",e[0].id+(t||"")}return{play:function(t,n,o){var r=e(n,o);return t.siteAPI.bgVideo.play(r)},stop:function(t,n,o){var r=e(n,o);return t.siteAPI.bgVideo.stop(r)},isPlaying:function(t,n,o){var r=e(n,o);return t.siteAPI.bgVideo.isPlaying(r)},getReadyState:function(t,n,o){var r=e(n,o);return t.siteAPI.bgVideo.getReadyState(r)},registerToPlayingChange:function(t,n,o,r){var i=e(n,o);return t.siteAPI.bgVideo.registerToPlayingChange(i,r)},unregisterToPlayingChange:function(t,n,o){var r=e(n,o);return t.siteAPI.bgVideo.unregisterToPlayingChange(r)},registerToQualityReady:function(e,t,n){return e.siteAPI.bgVideo.registerToQualityReady(t,n)},unregisterToQualityReady:function(e,t,n){return e.siteAPI.bgVideo.unregisterToQualityReady(t,n)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t="http://wixfeedbackserver.appspot.com",o="http://localhost:8888",r="/markSiteShared",i="/markAsRead",a="/list",s="/append",c="/delete",u="https://api-ssl.bitly.com/v3/shorten?access_token=6e283dc921f56df2eff5951bd2bf5bab041d8ac2&longUrl=",l="&utm_campaign=vir_wixad_feedback",p=["happy","sad","noMood"],d=!1;function g(){return d?o:t}function f(e,t,n,o){if(this._useMockedData)m(o,"onSuccess")&&o.onSuccess("MOCKED");else{var r=window.XDomainRequest,i=new window.XMLHttpRequest;"withCredentials"in i?i.open(e,t,!0):void 0!==r?(i=new r).open(e,t):i=null,i&&("POST"===e&&i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.onload=function(){m(o,"onSuccess")&&o.onSuccess(i.responseText)},i.onerror=function(){m(o,"onError")&&o.onError({error:!0})},i.send(n||null))}}function m(t,n){return e.isFunction(e.get(t,n))}var v={enableMockedData:function(e){!0},disableMockedData:function(e){!1},enableLocalTestServer:function(e){d=!0},disableLocalTestServer:function(e){d=!1},getUnreadMockedComment:function(e,t){return{pageId:"mainPage",x:parseInt(500*Math.random(),10),y:parseInt(500*Math.random(),10),text:"title [".concat(Date.now(),"]"),submitter:t||"anonymous",time:Date.now(),face:p[parseInt(Math.random()*p.length,10)],unread:!0}},__sendCORSRequest:f};return e.merge({generateShareURL:function(t,n,o){var r=t.dal.getByPath(["rendererModel","siteInfo","siteId"]),i=t.dal.getByPath(["rendererModel","metaSiteId"]);n=n||"en",function(e,t,n){var o="//".concat(window.location.host);f("GET","http:".concat(o,"/html/editor/web/review/createToken/").concat(e,"?metaSiteId=").concat(t),null,{onSuccess:function(e){var t=JSON.parse(e);m(n,"onSuccess")&&n.onSuccess(t)},onError:function(){}})}(r,i,{onSuccess:function(t){var r=t.payload&&t.payload.url,i=e.includes(r,"?")?"&":"?";!function(e,t){f("GET",u+encodeURIComponent(e),null,{onSuccess:function(e){var n=JSON.parse(e);m(t,"onSuccess")&&t.onSuccess(n)},onError:function(){}})}("".concat(r+i,"feedback=true&lang=").concat(n).concat(l),{onSuccess:function(e){m(o,"onSuccess")&&o.onSuccess(e.data.url)},onError:function(){}})},onError:function(){}})},isSiteShared:function(e,t){var n=e.dal.getByPath(["rendererModel","siteInfo","siteId"]);f("GET","".concat(g()+r,"?siteId=").concat(n),{},t)},markSiteAsShared:function(e,t){var n=e.dal.getByPath(["rendererModel","siteInfo","siteId"]);f("POST",g()+r,JSON.stringify({siteId:n}),t)},comments:{create:function(e,t,n,o,r,i,a){return{pageId:t||"mainPage",x:n||"100px",y:o||"100px",text:r||"untitled",submitter:i||"anonymous",time:Date.now(),face:a||p[p.length-1],unread:!0}},add:function(e,t,n,o,r){var i=e.dal.getByPath(["rendererModel","siteInfo","siteId"]),a=e.dal.getByPath(["rendererModel","metaSiteId"]),c=e.dal.getByPath(["rendererModel","userId"]),u=e.dal.getByPath(["rendererModel","siteInfo","siteTitleSEO"]),l=JSON.stringify({siteId:i,data:t,generalComment:n,submitter:o,userGuid:c,metaSiteId:a,siteName:u});f("POST",g()+s,l,r)},get:function(t,n){var o=t.dal.getByPath(["rendererModel","siteInfo","siteId"]);f("GET","".concat(g()+a,"?siteId=").concat(o),null,{onSuccess:function(t){var o,r=(o=JSON.parse(t),e.forEach(o,(function(e){e.commentId=e.key.id,e.x=e.propertyMap.x.value,e.y=e.propertyMap.y.value,e.face=e.propertyMap.face.value,e.submitter=e.propertyMap.submitter.value,e.text=e.propertyMap.text.value.value,e.pageId=e.propertyMap.pageId,e.unread=e.propertyMap.unread,e.time=new Date(e.propertyMap.time)})),e.groupBy(o,"pageId"));m(n,"onSuccess")&&n.onSuccess(r)},onError:function(){}})},remove:function(e,t,n){f("POST",g()+c,JSON.stringify({commentId:t}),n)},markAsRead:function(e,t,n){f("POST",g()+i,JSON.stringify({commentId:t}),n)}}},v)}()},function(e,t,n){var o,r,i,a;e.exports=(o=n(12),r=n(10),i=n(30),a=o.fonts,{css:{getCssUrls:function(e){var t=i.getDocumentType(e),n=e.dal.get(e.pointers.general.getServiceTopology());return a.fontUtils.getCssUrls(t,n)}},getSiteFontsOptions:function(e){var t=i.getDocumentType(e),n=r.fonts.getCharacterSet(e);return a.fontUtils.getCurrentSelectablefontsWithParams(t,n)},getAllFontsOptions:function(e){var t=i.getDocumentType(e);return a.fontUtils.getCurrentSelectablefontsWithParams(t,["latin-ext","cyrillic","japanese","korean","arabic","hebrew","latin"])}})},function(e,t,n){var o,r,i,a,s,c;e.exports=(o=n(11),r="left",i="right",a="fullScreen",s=function(e,t){if(o.setDock(e,t,{top:{px:0},right:{px:0},bottom:{px:0}}),!function(e,t){var n=o.getDock(e,t);return n&&n.top&&n.bottom&&n.left}(e,t)){var n=e.siteAPI.getScreenWidth()-200;o.updateCompLayout(e,t,{width:200,x:n})}},c=function(e,t){o.setDock(e,t,{top:{px:0},left:{px:0},bottom:{px:0}}),function(e,t){var n=o.getDock(e,t);return n&&n.top&&n.bottom&&n.right}(e,t)||o.updateCompLayout(e,t,{width:200})},{setAlignment:function(e,t,n){switch(n){case a:!function(e,t){o.setDock(e,t,{top:{px:0},left:{px:0},right:{px:0},bottom:{px:0}})}(e,t);break;case r:c(e,t);break;case i:s(e,t)}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(13);function o(e){return t.getProperty(e,t.PROPERTY_NAMES.SITE_META_DATA)}function r(e){return o(e).browserThemeColor}function i(e,n){var r=o(e);r.browserThemeColor=n,t.setProperty(e,t.PROPERTY_NAMES.SITE_META_DATA,r)}return{getBrowserThemeColor:r,setBrowserThemeColor:function(e,t){!function(e){if(!/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e))throw new Error("invalid color, should be an hex code")}(t),i(e,t)},resetBrowserThemeColor:function(e){return i(e,null)},isBrowserThemeColorSet:function(t){return!e.isEmpty(r(t))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),o="IMAGE_QUALITY",r="GlobalImageQuality";function i(e){return e.pointers.data.getDataItem(o,"masterPage")}return{get:function(e){var t=i(e);return e.dal.get(t)},update:function(n,o){var a=i(n);if(!n.dal.isExist(a)){var s=t.createDataItemByType(n,r);t.setDataItemByPointer(n,a,s,"data")}!function(t){var n=e.get(t,"unsharpMask.radius");if(e.isNumber(n)&&n<.1&&(0!==t.unsharpMask.radius||0!==t.unsharpMask.amount||0!==t.unsharpMask.threshold))throw new Error("radius value must be in 0.1-500.0 range, unless all radius, amount and threshold values are 0")}(o);var c=n.dal.get(a);t.setDataItemByPointer(n,a,e.assign(c,o),"data")},reset:function(e){var n=i(e);if(e.dal.isExist(n)){var o=t.createDataItemByType(e,r);t.setDataItemByPointer(e,n,o,"data")}}}}()},function(e,t,n){var o,r;e.exports=(o=n(0),r=[{name:"kennedy"},{name:"darken"},{name:"blur"},{name:"lighten"},{name:"faded"},{name:"kerouac"},{name:"orca"},{name:"sangria"},{name:"gotham"},{name:"nightrain"},{name:"whistler"},{name:"feathered"},{name:"soledad"},{name:"goldie"},{name:"3d"},{name:"ink"},{name:"manhattan"},{name:"greenwash"},{name:"organic"},{name:"elmo"},{name:"neptune"},{name:"candyfloss"},{name:"neonsky"},{name:"hulk"},{name:"bauhaus"},{name:"seaweed"},{name:"midnight"},{name:"unicorn"},{name:"blueray"},{name:"malibu"},{name:"redrum"},{name:"flamingo"},{name:"hydra"},{name:"koolaid"},{name:"pinkrinse"},{name:"pixie"},{name:"yellowstreak"},{name:"lucille"}],{getNames:function(){return o.map(r,"name")},getDefinitions:function(){return r}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(7),o=n(25),r=n(3),i=n(68),a="CUSTOM_MAIN_MENU",s=["wysiwyg.viewer.components.menus.DropDownMenu","wysiwyg.common.components.verticalmenu.viewer.VerticalMenu","wysiwyg.viewer.components.mobile.TinyMenu"],c=e.template("Cannot link a menu data item to a component that is not one of: ".concat(s.join(", "),". Given component type was <%= compType %>."));function u(t){return t.items&&e.some(t.items,(function(e){return e.items&&e.items.length>0}))}var l="Currently, components do not support menus which are more than 2 levels deep.";function p(t){if(t.items&&e.some(t.items,u))throw new Error("You cannot add a menu which is more than 2 levels deep (a subitem cannot have subitems). ".concat(l))}function d(t){e.forEach(t.items,(function(t){!function t(n,o){e.forEach(n,(function(e){e(o)})),o.items&&e.forEach(o.items,(function(e){t(n,e)}))}([g,f,m],t)}))}var g=e.partialRight(e.unset,"id"),f=e.partialRight(e.unset,["link","id"]),m=e.partialRight(e.set,"type","BasicMenuItem");function v(e,t,n){p(n),E(e,t);r.addSerializedDataItemToPage(e,"masterPage",n,t,!0),i.updateTranslatedMenuItems(e,n)}function E(e,t){var n=e.pointers.data.getDataItemFromMaster(t);if(!t||!e.dal.full.isExist(n))throw new Error("Menu with id ".concat(t," does not exist."))}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.pointers.data.getDataItemFromMaster(t);return e.dal.isExist(o)?r.getDataItemById(e,t,void 0,void 0,n):null}function I(n,o){var i=t.getComponentByType(n,"wysiwyg.viewer.components.menus.DropDownMenu"),a=t.getComponentByType(n,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu");if(e.some(i.concat(a),function(e,t){return function(n){return r.getDataItem(e,n).menuRef==="#".concat(t)}}(n,o)))throw new Error("Cannot remove menu with id ".concat(o,", there are components connected to this menu. Please connect the other components to a differnt menu first."))}return{update:v,create:function(t,n,o){if(y(t,n))throw new Error("Menu with id ".concat(n," already exist."));var i=r.createDataItemByType(t,"CustomMenu");d(o=e.assign(i,o,{id:n})),p(o),r.addSerializedDataItemToPage(t,"masterPage",o,n);var a=t.pointers.getInnerPointer(t.pointers.data.getDataItem("CUSTOM_MENUS","masterPage"),"menus");return t.dal.push(a,"#".concat(n)),n},getMenuIdToCreate:function(e,t,n){return n||r.generateNewDataItemId()},getAll:function(e){return r.getDataItemById(e,"CUSTOM_MENUS","masterPage").menus},getById:y,remove:function(t,n){if(n===a)throw new Error("You cannot delete the CUSTOM_MAIN_MENU.");E(t,n),I(t,n);var o=t.pointers.data.getDataItemFromMaster("CUSTOM_MENUS"),i=t.dal.full.get(o);e.pull(i.menus,"#".concat(n)),t.dal.set(o,i),r.removeDataItemRecursively(t,t.pointers.data.getDataItemFromMaster(n))},connect:function(t,n,i){!function(t,n,r){var i=o.getType(t,n);if(!e.includes(s,i))throw new Error(c({compType:i}));E(t,r)}(t,n,i),r.updateDataItem(t,n,{menuRef:"#".concat(i),type:"CustomMenuDataRef"})},addItem:function(t,n,o,i){var a={items:[i]};p(a),d(a);var s=r.createDataItemByType(t,"BasicMenuItem");r.addSerializedDataItemToPage(t,"masterPage",e.assign(s,i,{id:n}),n);var c=t.pointers.data.getDataItemFromMaster(o),u=t.pointers.getInnerPointer(c,"items");t.dal.push(u,"#".concat(n))},removeItem:function(t,n,o,r){E(t,n);var i=y(t,n);i.items=e.reduce(i.items,(function(t,n){return n.id!==o?(n.items&&e.remove(n.items,{id:o}),t.push(n)):n.items&&r&&(t=t.concat(n.items)),t}),[]),v(t,n,i)},updateItem:function(t,n,o,i){E(t,n);var a=t.pointers.data.getDataItemFromMaster(o);if(!t.dal.isExist(a))throw new Error("Menu item with id ".concat(o," does not exist."));if(i.items&&i.items.length){var s=y(t,n);if(!e.find(s.items,{id:o}))throw new Error("Updating menu item with id ".concat(o," with items will cause the menu to be more than 2 levels deep. ").concat(l))}r.addSerializedDataItemToPage(t,t.pointers.data.getPageIdOfData(a),e.assign(i,{id:o,type:"BasicMenuItem"}),o)}}}()},function(e,t,n){var o,r;e.exports=(o=n(0),r=n(121),{initialize:function(e){r.setSiteMetaData(e,r.getSiteMetaData(e))},PRELOADER_PROPS:{COMPANEY_NAME:"companyName",LOGO_URL:"logoUrl"},enableOptimizedView:function(e,t){var n=r.getSiteMetaData(e);n.adaptiveMobileOn=t,r.setSiteMetaData(e,n)},isOptimized:function(e){return r.getSiteMetaData(e).adaptiveMobileOn},preloader:{enable:function(e,t){var n=r.getSiteMetaData(e);n.preloader.enabled=t,r.setSiteMetaData(e,n)},isEnabled:function(e){return r.getSiteMetaData(e).preloader.enabled},update:function(e,t){!function(e){var t=o.difference(o.keys(e),["companyName","logoUrl"]);if(o.some(t))throw new Error('"['.concat(t,']" are unsupported.'))}(t);var n=r.getSiteMetaData(e);n.contactInfo.companyName=o.get(t,"companyName",n.contactInfo.companyName),n.preloader.uri=o.get(t,"logoUrl",n.preloader.uri),r.setSiteMetaData(e,n)},get:function(e){var t=r.getSiteMetaData(e);return{companyName:t.contactInfo.companyName,logoUrl:t.preloader.uri}}}})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(70),i=n(121),a=n(629),s=n(97),{revert:function(e){r.removeQuickActionBar(e)},upgrade:function(e){var t=i.getSiteMetaData(e),n=a.createFromSiteMetaData(t);o.isEmpty(n)&&(n=s.defaultQuickActionItems),r.addQuickActionBar(e,s.defaultSerializedMAB,n)},getVersion:function(e){return r.hasQuickActionBar(e)?2:1}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(97),o=n(1).linkTypes;function r(n){return e.isEmpty(n.contactInfo.phone)?null:{itemType:"phone",link:{type:o.PHONE_LINK,phoneNumber:n.contactInfo.phone},text:"Phone",icon:e.get(t.quickActionIconsData,"phone.hash"),color:e.get(t.quickActionIconsData,"phone.color")}}function i(n){return e.isEmpty(n.contactInfo.email)?null:{itemType:"email",link:{type:o.EMAIL_LINK,recipient:n.contactInfo.email,subject:""},text:"Email",icon:e.get(t.quickActionIconsData,"email.hash"),color:e.get(t.quickActionIconsData,"email.color")}}function a(n){return e.isEmpty(n.contactInfo.address)?null:{itemType:"address",link:{type:o.EXTERNAL_LINK,target:"_blank",url:"http://www.google.co.il/maps/search/".concat(encodeURI(n.contactInfo.address))},text:"Address",icon:e.get(t.quickActionIconsData,"address.hash"),color:e.get(t.quickActionIconsData,"address.color")}}function s(n){return e(n.quickActions.socialLinks).filter((function(n){return e.includes(t.actionTypesMap,n.id)})).map((function(n){return{itemType:n.id,link:{type:o.EXTERNAL_LINK,target:"_blank",url:n.url},text:e.get(t.socialLinkTexts,n.id,n.id),icon:e.get(t.quickActionIconsData,"".concat(n.id,".hash")),color:e.get(t.quickActionIconsData,"".concat(n.id,".color"))}})).value()}return{createFromSiteMetaData:function(t){return e([r(t),i(t),a(t),s(t)]).flatten().compact().value()}}}()},function(e,t,n){var o;e.exports=(o=n(0),{setConnectedComponents:function(e,t,n){var r=o.cloneDeep(t);return o.isEmpty(n)?function(e){var t=o.omit(o.get(e,"custom"),"relatedConnections");return o.isEmpty(t)?o.omit(e,"custom"):o.assign({},e,{custom:t})}(r):(o.set(r,"custom.relatedConnections",n),r)},getConnectedComponents:function(e,t){return o.get(t,"custom.relatedConnections")}})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(15),i=n(7),a=n(32),s=new Set(a.SESSION_STATE_TYPES),{getSessionState:function(e,t){return e.dal.full.get(e.pointers.getInnerPointer(e.pointers.platform.getAppStatePointer(),[t.id]))},updateSessionState:function(e,t){o.forEach(t,(function(t,n){var o=i.getComponentById(e,n),a=r.getComponentType(e,o);if(!s.has(a))throw new Error("Component of type ".concat(a," does not support session state"));e.dal.full.set(e.pointers.getInnerPointer(e.pointers.platform.getAppStatePointer(),[n]),t)}))}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(32),o={};function r(e){return o[e.siteAPI.getSiteId()]||[]}return{register:function(t,n,i){var a=function(t,n,r){var i=t.siteAPI.getSiteId(),a={appId:n,callback:r};return o[i]=e.compact([a].concat(o[i])),a}(t,n,i);return function(){e.pull(r(t),a)}},emit:function(e,n){r(e).forEach((function(e){e.callback({eventType:t.MessageTypes.VIEWER_INFO_CHANGED,eventPayload:n})}))}}}()},function(e,t,n){e.exports=function(){var e=n(1);function t(e,t,n){var o=e.pointers.general.getRenderFlag(t);e.dal.set(o,n)}return{setCompsToShowWithOpacity:function(e,t,n){var o=e.pointers.general.getRenderRealtimeConfigItem("compsToShowWithOpacity");e.dal.set(o,{opacity:n,compIds:t})},setCompsToShowOnTop:function(e,t){var n=e.pointers.general.getRenderRealtimeConfigItem("compsToShowOnTop");e.dal.set(n,t)},checkCompsToShowOnTop:function(t,n){var o=t.pointers.general.getRenderRealtimeConfigItem("compsToShowOnTop");return e.objectUtils.isDifferent(n,t.dal.get(o))},hideComp:function(e,t){var n=e.pointers,o=e.dal,r=n.components.getViewMode(t),i=n.general.getIsCompHiddenPointer(t.id,r);o.set(i,!0)},showComp:function(e,t){var n=e.pointers,o=e.dal,r=n.components.getViewMode(t),i=n.general.getIsCompHiddenPointer(t.id,r);o.isExist(i)&&o.remove(i)},isCompHidden:function(e,t){var n=e.pointers;return!!e.dal.get(n.general.getIsCompHiddenPointer(t.id,n.components.getViewMode(t)))},setCompsToHide:function(e,t){var n=e.pointers.general.getRenderRealtimeConfigItem("compsToHide_deprecated"),o=t.length>0?t[0]:"";e.dal.set(n,o)},setHideTextComponent:function(e,t){var n=e.pointers.general.getRenderRealtimeConfigItem("hideTextComponent");e.dal.set(n,t)},checkHideTextComponent:function(t,n){var o=t.pointers.general.getRenderRealtimeConfigItem("hideTextComponent");return e.objectUtils.isDifferent(n,t.dal.get(o))},allowSiteOverflow:function(e,n){t(e,"allowSiteOverflow",n)},setExtraSiteHeight:function(e,n){t(e,"extraSiteHeight",n)},setPreviewTooltipCallback:function(e,t){e.siteAPI.setPreviewTooltipCallback(t)},setErrorPagesPopUp:function(e,t){e.siteAPI.setErrorPagesPopUp(t)},setBlockingLayer:function(e,n){t(e,"blockingLayer",n)},setBlockingPopupLayer:function(e,n){t(e,"blockingPopupLayer",n)},setPremiumNavigationHandler:function(e,t){e.siteAPI.setPremiumNavigationHandler(t)}}}()},function(e,t,n){e.exports=function(){var e=n(51),t=n(225),o="routers",r=e.pointerGeneratorsRegistry;r.registerPointerType(o,(function(){return null}),(function(){return!0}));var i={getRoutersPointer:function(e,n){return n.getPointer("routers",o,t.paths.ROUTERS_PATH)},getRoutersConfigMapPointer:function(e,n){return n.getPointer("routers_config_map",o,t.paths.ROUTERS_CONFIG_MAP)},getRouterPointer:function(e,n,r){return n.getPointer(r,o,t.paths.ROUTERS_CONFIG_MAP.concat(r))}};r.registerDataAccessPointersGenerator(o,i)}()},function(e,t,n){function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(6),o=n(23),i=n(1),c=n(64),u=n(200),l=n(107),p=n(636),d=n(77),g=n(183),f=n(234),m=n(104),v=i.integrations.ravenUtils,E=function(e){var t=e.pointers.general.getAutosaveInfo(),n=e.dal.get(t)||{};n.shouldAutoSave=!1,e.dal.set(t,n)};function y(e,t,n){var o=d.getVirtualDescriptor(e,t,!1);return d.writeFile(e,o,n)}function I(e,t){return Promise.all(t.map((function(t){var n=t.path,o=t.content;return y(e,n,o)})))}var S=function(e){return g.createNewWriteableApp(e)},h=u(p);var P=function(e,t){return I(e,t.filter((function(e){return m.isSchemaFile(e.path)})))},A=function(e,t){var n=t.modifiedFiles,o=t.deletedFiles,r=n.map((function(t){var n=t.path,o=t.content;return y(e,n,o)})),i=o.map((function(t){var n=t.path;return function(e,t){var n=d.getVirtualDescriptor(e,t,!1);return d.deleteItem(e,n)}(e,n)}));return Promise.all([].concat(a(r),a(i)))},T=function(e){throw v.captureError(e,{tags:{localMode:!0}}),console.error("".concat("[CORVID]",": ").concat(JSON.stringify({message:e.message,stack:e.stack,type:e.type}))),e};h.asyncInitMethod=function(n){return n.socketAPI.isCloneMode().then((function(t){return t?f.clone(n):function(t){return Promise.all([t.socketAPI.getCodeFiles(),S(t)]).then((function(t){return s(t,1)[0].filter((function(t){var n=t.content;return e.isString(n)&&""!==n}))})).then((function(e){return I(t,e).then((function(){return d.flush(t,{origin:d.FLUSH_ORIGINS.LOCAL_MODE_INIT_EDIT})})).then((function(){return P(t,e)})).then((function(){return d.flush(t,{origin:d.FLUSH_ORIGINS.LOCAL_MODE_INIT_EDIT})}))}))}(n)})).then((function(){t.registerHook(t.HOOKS.WIX_CODE.FLUSH,function(t){return function(){var n,r={primaryTask:p.getSaveTasksConfig(t).primaryTask,secondaryTasks:[]},i=e.noop,a=e.noop,s=[r,t.dal,i,a,(n=t,{event:e.partial(o.event,n),error:e.partial(o.error,n)})];c.runPartialSaveTasks.apply(c,s)}}(n)),n.socketAPI.registerToMessages((function(e){"LOCAL_CODE_UPDATED"===e.event&&A(n,e.data)}))})).catch(T)};var _=h.initMethod;h.initMethod=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_(e,r({},t,{settleInServer:!1})),E(e)};return h.localMode={push:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=function(){return h.save(e,t,n,!1,r)};if(o)return l.save(e,i,n,!0,r);var a=Object.assign(r,{fullPayload:!0});return l.save(e,i,n,!1,a)},publish:l.publish,registerToMessages:function(e,t){e.socketAPI.registerToMessages(function(e){return function(t){var n;n=t.event,["SOCKET_DISCONNECT","LOCAL_DOCUMENT_UPDATED","SOCKET_RECONNECTING","SOCKET_RECONNECTED"].includes(n)&&e(t)}}(t))},isConnected:function(e){return e.socketAPI.isConnected()}},h}()},function(e,t,n){var o,r,i,a,s,c,u,l,p;e.exports=(o=n(637),r=n(108),i=n(210),a=n(105),s=n(212),c=n(214),u=n(215),l=n(216),p=n(5),{getSaveTasksConfig:function(e){return{requiredTasks:p.isOpen("atomicSaveCode")?[a]:[],primaryTask:o(e),secondaryTasks:[s,r,c,u,l,i.create(e)]}}})},function(e,t,n){var o,r,i,a,s,c,u,l,p;e.exports=(o=n(12),r=n(234),i=n(205),a=i.getSaveableSnapshot,s=i.extendSavableSnapshotWithFullSnapshot,c=function(e){return a(e).set("wixCode",e.get("wixCode"))},u=function(e){return function(t,n){for(var o=arguments.length,r=new Array(o>2?o-2:0),i=2;i<o;i++)r[i-2]=arguments[i];return e.apply(void 0,[s(c(t),t),s(c(n),n)].concat(r))}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u((function(n,o,i,a){r.save(e,t?null:n,o).then(i).catch(a)}))},p=function(e,t,n){if("partialSave"===n){var r=c(e),i=!c(t).equals(r);return o.integrations.ravenUtils.breadcrumb("shouldRun",{didSnapShotsChangeFromLastSave:i}),i}return!0},function(e){return{partialSave:l(e),fullSave:l(e,!0),firstSave:function(e,t,n,o){o(new Error("no first save in local mode!"))},saveAsTemplate:function(e,t,n){n()},publish:function(e,t){t()},autosave:function(e,t,n){n()},getTaskName:function(){return"localSave"},shouldRun:p,getSnapshotTags:function(){return["primary"]}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(51),o=n(128),r=n(2),i=n(3),a=n(65),s=n(198),c=n(27),u=n(75),l=n(7),p=n(199),d=["dataBinding"];function g(n,r){var c=t.wixCode.componentsFetcher(n.siteDataAPI,r,r);return e.transform(c,(function(t,c,g){var f=l.getComponentById(n,g,r),m=u.getNickname(n,f);if(!t[m]){var v=c.componentType,E=c.dataQuery&&i.getDataItemById(n,c.dataQuery.replace("#","")),y=function(t){if(e.has(t,"applicationId")&&e.has(t,"widgetId"))return t.widgetId}(E),I=s.getWidgetDisplayName(p,y);if(a.isControllerType(v)){var S=e.get(E,"applicationId"),h=e.get(E,"controllerType");e.includes(d,S)&&(t[m]="$w.".concat(h))}else if(I)t[m]="$w.".concat(I);else{var P=o.typeUtils.getFullSdkType(v,y);t[m]=P}}}),{})}return{getNicknameToTypeMap:function(t,n){var o=e.transform(n,(function(e,n){e[n]=g(t,n)}),{}),i=g(t,r.MASTER_PAGE_ID);return e.transform(o,(function(n,o,a){a===r.MASTER_PAGE_ID?n[a]=i:c.isPopup(t,a)?n[a]=o:n[a]=e.merge({},o,i)}),{})}}}()},function(e,t){e.exports=z},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(13),r=n(35),i=n(3),a={google:"socialLoginGoogleEnabled",facebook:"socialLoginFacebookEnabled"},s={termsOfUse:"termsOfUse",privacyPolicy:"privacyPolicy",codeOfConduct:"codeOfConduct"},c="joinCommunityCheckedByDefault",u="customSignUpPageId",l="customNoPermissionsPageId";function p(e){var t=o.generalInfo.getMetaSiteId(e);return"/_api/wix-contacts-webapp/dashboard/metasites/".concat(t,"/settings")}function d(t){return e.head(r.filterAppsDataByType(t,"sitemembers"))}function g(e){var n=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID);return e.pointers.getInnerPointer(n,"smSettings")}function f(n,o){var r=n.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID),a=n.dal.get(r);a.smSettings=e.merge(a.smSettings,o),i.addSerializedDataItemToPage(n,"masterPage",a,"masterPage")}return{setAutoApproval:function(n,o,i,a){t.ajaxLibrary.ajax({type:"POST",url:p(n),dataType:"json",data:{autoApprove:o},success:function(){var t=d(n);t.collectionType=o?"Open":"ApplyForMembership",r.registerAppData(n,t),e.isFunction(i)&&i()},error:a||e.noop})},isAutoApproval:function(e){return"Open"===d(e).collectionType},setLoginDialogFirst:function(e,t){f(e,{smFirstDialogLogin:!!t})},isLoginDialogFirst:function(e){var t=e.dal.get(g(e));return!(!t||!t.smFirstDialogLogin)},setSocialLoginVendorStatus:function(t,n,o){var r=a[n];r&&f(t,e.set({},r,!!o))},isSocialLoginEnabled:function(t,n){var o=a[n],r=t.dal.get(g(t));return!!e.get(r,o)},setJoinCommunityStatus:function(t,n){f(t,e.set({},c,!!n))},isJoinCommunityEnabled:function(t){var n=t.dal.get(g(t));return!(!1===e.get(n,c))},isSignupPoliciesFieldEnabled:function(t,n){var o=s[n],r=t.dal.get(g(t));return!!e.get(r,[o,"enabled"])},setSignupPoliciesFieldStatus:function(t,n,o){var r=s[n];r&&f(t,e.set({},[r,"enabled"],!!o))},getSignupPoliciesLink:function(t,n){var o=s[n],r=t.dal.get(g(t));return e.get(r,[o,"link"],null)},setSignupPoliciesLink:function(t,n,o){var r=s[n];if(r){var a=i.addLink(t,o.type,o);f(t,e.set({},[r,"link"],"#".concat(a)))}},setCustomSignupPageId:function(t,n){f(t,e.set({},u,n))},getCustomSignupPageId:function(t){var n=t.dal.get(g(t));return e.get(n,u,null)},setCustomNoPermissionsPageId:function(t,n){f(t,e.set({},l,n))},getCustomNoPermissionsPageId:function(t){var n=t.dal.get(g(t));return e.get(n,l,null)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(14),o=n(2),r=n(17);function i(e,n){return r.getViewMode(e,n,t)}var a={pagesToFooterGap:0,headerToPagesGap:0},s=e.keys(a);function c(t,n){var o=function(t){return e(t).pick(s).defaults(a).value()}(t);return e(n).pick(s).mapValues((function(e,t){return Math.min(o[t],Math.max(e,0))})).defaults(o).pickBy(e.identity).value()}return{getGaps:function(t){var n=t.pointers.getInnerPointer(t.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),o=t.dal.get(n);return o?e.pick(o,s):{}},updateGaps:function(t,n){var o=t.pointers.getInnerPointer(t.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),r=t.dal.get(o);if(r){var i=c(r,n),a=e(r).omit(s).assign(i).value();t.dal.set(o,a),t.siteAPI.createPageAnchors("masterPage")}},isUsingSectionsLayout:function(t){var n=t.pointers.getInnerPointer(t.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),o=t.dal.get(n);return e.get(o,"useDesktopSectionsLayout",!1)},getFooter:function(e,t){return e.pointers.components.getFooter(i(e,t))},getHeader:function(e,t){return e.pointers.components.getHeader(i(e,t))},getPagesContainer:function(e,t){return e.pointers.components.getPagesContainer(i(e,t))},getSiteStructure:function(e,t){return e.pointers.components.getMasterPage(i(e,t))},getSiteStructureId:function(){return o.MASTER_PAGE_ID}}}()},function(e,t,n){e.exports=function(){n(0);var e=n(4),t=(n(11),n(151)),o=n(8),r=n(18);return{alignInContainer:function(n,i,a){if(!o.public.isAlignable(n,i))throw new Error("cannot align component");var s,c,u=e.getContainer(n,i);if(e.isPageComponent(n,u))c=r.getLayout(n,u.id),s=!0;else if("masterPage"!==u.id)c=e.layout.get(n,u),s=!0;else{var l=n.pointers.components.getViewMode(i),p=n.pointers.components.getPagesContainer(l);c=e.layout.get(n,p),s=!1}t.alignComponentsToOuterLayout(n,[i],c,a,s)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(6),r=n(4),i=n(11),a=n(151),s=n(91),c=n(123),u=n(84),l=["wysiwyg.viewer.components.HoverBox"];function p(e,t,n,o,i,a,c){n||(o&&o.isReplacingComp||c&&e.dal.isExist(c)&&s.isGroup(e,c)&&(r.getChildren(e,c).length>=2||d(e,r.getChildren(e,c),c)))}function d(t,n,o){var a=r.getContainer(t,o),s=e.findIndex(r.getChildren(t,a),{id:o.id});e.forEach(n,(function(e){i.setContainer(t,void 0,e,a)})),e.forEach(n.reverse(),(function(e){u.moveToIndex(t,e,s)})),t.pointers.components.isMobile(o)?c.hiddenComponents.hide(t,o):r.deleteComponent(t,o,!1)}return{initialize:function(){o.registerHook(o.HOOKS.REMOVE.AFTER,p)},groupComponents:function(t,n,o){if(o&&!(o.length<2)&&!e.some(o,s.isGroupedComponent.bind(this,t))){var c=e.clone(o);e.forEach(c,(function(n){if(s.isGroup(t,n)){var i=r.getChildren(t,n);o=o.concat(i),d(t,r.getChildren(t,n),n),o=e.reject(o,{id:n.id})}}));var u=a.getSnugLayout(t,o),p=function(t,n){var o=r.getContainer(t,e.head(n));for(;o&&e.includes(l,r.getType(t,o));)o=r.getContainer(t,o);return o}(t,o);!function(t,n,o,i){var a={type:"Container",components:[],skin:"wysiwyg.viewer.components.GroupSkin",layout:{width:void 0,height:void 0,x:void 0,y:void 0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:s.getGroupComponentType(),id:"i5zga2e4"};e.assign(a.layout,n),r.add(t,i,o,a)}(t,u,p,n),o=a.sortComponentsByZOrder(t,o),e.forEach(o,(function(e){i.setContainer(t,void 0,e,n)}))}},addToGroup:function(t,n,o){e.forEach(n,(function(e){i.setContainer(t,void 0,e,o)}))},ungroup:d,genGroupPointer:function(n,o){var i=r.generateNewComponentId(),a=n.pointers.components,s=t.displayedOnlyStructureUtil,c=e.head(o),u=a.getViewMode(c);if(s.isRepeatedComponent(c.id)){var l=s.getRepeaterItemId(c.id);return n.pointers.components.getUnattached(s.getUniqueDisplayedId(i,l),u)}return a.getUnattached(i,u)},getUngroupedComponents:function(e,t){return r.getChildren(e,t)}}}()},function(e,t,n){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),r=n(2),i=n(18),a=n(4),s=n(150),c=n(148),u=n(134),l=n(231),p=n(39),d=n(17),g=n(5),f=["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"],m={CANCELLED:"CANCELLED",DONE:"DONE",INIT:"INIT",RUNNING:"RUNNING"},v=m.INIT;function E(t,n,o){return function(e,t,n){return new Promise((function(o){s.executeBehavior(e,t,"moveToSlide",{slide:n},o)}))}(t,n,o.pop()).then((function(r){return e.isEmpty(o)?r:E(t,n,o)}))}function y(t,n){var o=n.slides;return e.isEmpty(o)?Promise.resolve():E(t,n.pointer,o)}var I=function(t,n,o){var r=t.pointers.components.getChildrenRecursively(n),i=o?r:r.filter(e.partial(A,t));return e.isEmpty(i)?[]:i.map((function(e){var n=S(t,e);return{pointer:e,hasSlides:n,slides:n?h(t,e):null}}))},S=function(t,n){return e.includes(f,a.getType(t,n))},h=function(t,n){var o=t.pointers.components.getChildren(n),r=e.map(o,e.partial(A,t));return P(r)},P=function(t){return e.reduce(t,(function(e,t,n){return t&&e.push(n),e}),[])},A=function t(n,o){var r=n.pointers.getInnerPointer(o,"layout"),i=n.dal.full.get(r);return!e.isEmpty(e.get(i,"anchors"))||e.some(n.pointers.components.getChildren(o),e.partial(t,n))},T=function(e,t){return Promise.all(t.map(y.bind(null,e)))},_=function(e){return new Promise((function(t){return e.setOperationsQueue.waitForChangesApplied(t)}))};var O=function(t){return e.filter(t,{hasSlides:!0})},C=function(){return new Promise((function(e,t){v===m.RUNNING?e():t(v)}))};function D(e,t){return e.setOperationsQueue.runSetOperation(i.navigateTo,[e,t],{methodName:"page.navigateTo",allowInReadOnly:!0,waitingForTransition:!0,noBatchingAfter:!0}),_(e)}function w(t,n,o,r){return c.setViewMode(t,n),_(t).then((function(){return C()})).then((function(){return r({status:"view-mode",viewMode:n})})).then((function(){return _(t)})).then((function(){return function(t,n,o){return e.isEmpty(n)?Promise.resolve():function r(i,a){return D(t,e.head(a)).then((function(){return T(t,O(n[e.head(a)]))})).then((function(){return o({status:"page-migrated",pageId:e.head(a)})})).then((function(){return _(t)})).then((function(){return a.shift()})).then((function(){return C()})).then((function(){return e.isEmpty(a)?Promise.resolve():r(i,a)}))}(e.size(n),e.keys(n))}(t,o,r)}))}function M(e,t){var n=t.pageId,o=t.viewMode;return c.setViewMode(e,o),_(e).then((function(){return D(e,n)}))}var b=function(e,t){return c.enableRenderTPAsIframe(e,t),_(e)},R=function(e,t){return c.enableComponentTransitions(e,t),c.enableStubifyComponents(e,t),c.enablePlaying(e,t),c.enablePageTransitions(e,t),_(e)},N=function(e,t){return c.enableFetchDynamicPageInnerRoutes(e,t),_(e)},x=function(n){return e.get(function(e){return e.dal.get(e.pointers.getInnerPointer(function(e){return e.pointers.data.getDataItemFromMaster("masterPage")}(e),"layoutSettings"))}(n),"mechanism")===t.constants.LAYOUT_MECHANISMS.MESH},L=function(e){return!x(e)},B=function(e){return function(e){return b(e,!0)}(e).then((function(){return function(e){return R(e,!0)}(e)})).then((function(){return function(e){return N(e,!0)}(e)}))},F=function(e,t,n,o){return M(e,t).then((function(){return B(e)})).then((function(){return o(n)}))},k=function(e){return{viewMode:r.VIEW_MODES.DESKTOP,pageId:e.siteAPI.getFocusedRootId()}},U=function(t){c.isMobileView(t)||(!function(t){var n=t.pointers.full.components.getMasterPage(r.VIEW_MODES.MOBILE),o=n&&t.pointers.full.components.getComponent(r.MOBILE_ONLY_COMPONENTS.TINY_MENU,n),i=o&&t.pointers.full.components.getParent(o),a=t.pointers.full.components.getHeader(r.VIEW_MODES.MOBILE);if(t.dal.full.isExist(o)&&i&&a&&!e.isEqual(i,a)){var s=t.pointers.full.components.getChildrenContainer(a),c=t.dal.full.get(o);t.dal.full.remove(o),t.dal.full.push(s,c,o)}}(t),p.runPartialConversionAllPages(t,!0))},H=function(n,a,s,c,p,f){v=m.RUNNING,t.loggingUtils.fedopsLogger.interactionStarted(t.loggingUtils.fedopsLogger.INTERACTIONS.MESH_SITE_MIGRATION);var E=function(t){var n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.reduce(i.getPageIdList(t,!1,!0),(function(n,o){return d.getSupportedViewModes(t).forEach((function(r){var i=t.pointers.components.getPage(o,r),s=I(t,i,a);e.isEmpty(s)||(n[r][o]=s)})),n}),(o(n={},r.VIEW_MODES.DESKTOP,{}),o(n,r.VIEW_MODES.MOBILE,{}),n))}(n,p);(function(e){return R(e,!1)})(n).then((function(){return function(e){return b(e,!1)}(n)})).then((function(){return function(e){return N(e,!1)}(n)})).then((function(){return function(t,n,o){return Promise.resolve().then((function(){return o({status:"init",maxValue:e.size(n[r.VIEW_MODES.DESKTOP])+e.size(n[r.VIEW_MODES.MOBILE]),value:0})})).then((function(){return w(t,r.VIEW_MODES.DESKTOP,n[r.VIEW_MODES.DESKTOP],o)})).then((function(){return w(t,r.VIEW_MODES.MOBILE,n[r.VIEW_MODES.MOBILE],o)})).then((function(){return _(t)}))}(n,E,f)})).then((function(){return M(n,a)})).then((function(){return function(e){return l.exec(e)}(n)})).then((function(){return U(n)})).then((function(){return B(n)})).then((function(){return function(e){return new Promise((function(t,n){u.meshLayoutReadySiteDataFixerAfterMeshWizard(e,t,n)}))}(n)})).then((function(){return function(e,t){t.forEach(e.siteAPI.createPageAnchors.bind(e.siteAPI))}(n,["masterPage",a.pageId])})).then((function(){return function(e){if(g.isOpen("sv_meshcors")&&!x(e))throw new Error("Failed to migrate to mesh")}(n)})).then((function(){return f({status:"done"})})).then((function(){return t.loggingUtils.fedopsLogger.interactionEnded(t.loggingUtils.fedopsLogger.INTERACTIONS.MESH_SITE_MIGRATION)})).then((function(){return v=m.DONE,s("migration finished successfully")})).catch((function(e){F(n,a,e,c)}))};return{migrateSiteToMesh:function(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.isMigrationForced,a=r.updateCallback,s=void 0===a?e.noop:a;if(v!==m.RUNNING){var c=k(t);try{L(t)||i?H(t,c,n,o,i,s):n("site is already mesh or mesh eligible")}catch(e){F(t,c,e,o)}}},cancel:function(){return v=m.CANCELLED,!0}}}()},function(e,t,n){e.exports=function(){n(51);var e=n(222),t=n(16),o=(n(34),n(211));return{handlers:function(t,n,o){e.callHandler(t,n,o)},initEditor:function(e,n,r){t.setIsInDevMode(n),o.setExperiments(r)}}}()},function(e,t,n){e.exports={items:n(80),types:n(49),lists:n(67),selection:n(109),listTemplates:n(236),fieldsLayout:n(648),appbuilder:n(240),classics:n(649),clientSpecMap:n(242),savePublish:n(108),listsLayout:n(652),metadata:n(163),initializer:n(653),repoFixer:n(657),migrationUtils:n(658),blogUtils:n(89)}},function(e,t){e.exports={LIST_VERSION:"2.0"}},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=(n(49),n(81)),r=n(67),i=n(237),a=n(238),s=n(239),c="View definition not found",u="Type definition not found",l="Field schema not found",p="Field not found in view",d="Given value is invalid",g=["name","displayName","type"],f="wysiwyg.viewer.components.WRichText";function m(e){throw new Error(e)}function v(e){return e.comp&&("Field"===e.comp.name||"TextField"===e.comp.name)}function E(t,n){var o=s.getCompProxyClass(t).getPropDefs(n),r="compProp"===n?t.comp:t;return e.mapValues(o,(function(e,t){return r[t]||e.defaultValue}))}function y(e){return t.objectUtils.resolvePath(e,["comp","items","0"])}function I(t){var n=E(t,"viewProp"),o=E(t,"compProp");return e.assign({},o,n)}function S(n,o){return e.head(t.objectUtils.filter(n,(function(e){return e&&e.data===o&&v(e)})))||m(p)}function h(t,n,o){var r=I(o),a=y(o),c=e.omit(I(a),"hidden"),u=e.pick(n,g),l=e.assign({},u,r,c,{componentType:s.getCompProxyClass(a).componentType,style:s.getStyle(t,a)});return l.componentType===f?i.convertViewDefPropsToFieldProps(t,l):l}function P(t,n,o){var r=s.getCompProxyClass(t),i=e.difference(e.keys(r.getPropDefs("viewProp")),o),a=e.difference(e.keys(r.getPropDefs("compProp")),o);e.assign(t,e.pick(n,i)),e.assign(t.comp,e.pick(n,a))}function A(t,n,o,i){var a=r.getItemView(t,n,i);return a?h(t,function(t,n,o){var i=r.getType(t,n)||m(u);return e.find(i.fields,{name:o})||m(l)}(t,n,o),S(a,o)):null}return{getField:A,getAll:function(n,o,i){var a=r.getItemView(n,o,i);if(!a)return null;var s=r.getType(n,o)||m(u),c=e.map(s.fields,"name"),l=t.objectUtils.filter(a,(function(t){return t&&e.includes(c,t.data)&&v(t)})),p=e.map(l,(function(t){var o=e.find(s.fields,{name:t.data});return h(n,o,t)}));return e.sortBy(p,(function(e){return c.indexOf(e.name)}))},set:function(n,s,l,p,g){var E=p.name||m(d),I=A(n,l,E,g),h=e.omitBy(p,(function(t,n){return e.isEqual(t,I[n])}));I.componentType===f&&(h=i.convertFieldPropsToViewDefProps(h,I));var T=r.getItemView(n,l,g)||m(c),_=S(T,E),O=r.getType(n,l)||m(u);P(_,h,["layout","style"]);var C=y(_);P(C,h,["hidden","style"]),e.isUndefined(h.style)||(C.comp.style=h.style);var D=function(e,n){return t.objectUtils.findPath(e,(function(e){return e&&e.data===n&&v(e)}))}(T,E);o.setValueInView(n,O.name,T.name,D,_,g),a.updateAppPart2MinWidth(n,s,h,T),r.markDataAsUpdated(n,l)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=n(41),r=n(115),i=n(3),a=n(2),s=n(35),c=n(13),u=n(110),l=n(650),p=n(152),d=n(137),g=n(241),f=n(7),m=n(4),v=n(18),E=n(21),y=n(6),I=n(651),S=n(162),h=n(89),P=n(10),A=n(5),T=o.FunctionLibrary,_=t.blogAppPartNames,O=o.expression;function C(t,n){var o=t.pointers.general.getClientSpecMap(),r=t.dal.get(o),i=e.findLast(r,{packageName:n});return i?"".concat(i.applicationId):null}function D(e,t,n,o){var r=Y.getApplicationId(e,t);r?o({applicationId:r}):M(e)?u.provisionAppAfterSave(e,n,o):u.provisionAppBeforeSave(e,n,o),V(e,"true")}function w(e,t,n,o,r,i){var a=Y.getApplicationId(e,t);a?r({applicationId:a}):M(e)?u.provisionAppFromSourceTemplate(e,n,o,r,i):i({success:!1}),V(e,"true")}function M(e){return!c.generalInfo.isFirstSave(e)}function b(t){t.setOperationsQueue.runSetOperation((function(){var n=function(t){var n=v.getPagesDataItems(t);return e(n).compact().reject({appPageType:"AppPage"}).value()}(t);e.forEach(n,(function(n){var o=v.getPage(t,n.id),r=f.getComponentByType(t,"wixapps.integration.components.AppPart",o);e(r).union(f.getComponentByType(t,"wysiwyg.common.components.rssbutton.viewer.RSSButton",o)).forEach((function(e){m.remove(t,e)}))}));var o=v.getPage(t,"masterPage"),r=f.getComponentByType(t,"wixapps.integration.components.AppPart",o);e(r).union(f.getComponentByType(t,"wysiwyg.common.components.rssbutton.viewer.RSSButton",o)).forEach((function(e){m.remove(t,e)})),V(t,"false")}))}function R(t,n){var o=i.getDataItem(t,n),r=[_.FEED,_.SINGLE_POST];if(A.isOpen("sv_blogHeroImage")&&r.push(_.HERO_IMAGE),A.isOpen("sv_blogStudioExperiment")&&e.pull(r,_.HERO_IMAGE),e.includes(r,o.appPartName))return!1}function N(t,n,o){var r=e.isString(n)?S.getDescriptor(t,n):n;return e.find(r.viewDescriptions,{id:o}).comps.filter((function(e){return void 0===e.experiment||e.experiment.value==={}[e.experiment.name]}))}function x(t,n,o){return t.views.filter((function(t){var r=e.isArray(t.name)?t.name:[t.name];return e.includes(r,n)&&e.includes([t.format||"","*"],o)}))}function L(t,n,o,r,i){var a=S.getDescriptor(t,n),s=e(x(a,o,r)).map((function(t){return e.map(t.customizations,(function(n){return e.merge({},n,{view:o,forType:n.forType||t.forType,format:n.format||r})}))})).flattenDeep().filter((function(e){return i?e.panelType===i:e})).value();return"design"!==i?s:s.concat(function(t,n,o,r){return e.flattenDeep(N(t,n,o).map((function(t){return t.hasNoStyleCustomization||!e.isUndefined(t.format)&&t.format!==r?[]:t.rules?e(t.rules).filter((function(t){return""===r||e.isUndefined(t.format)||t.format===r})).map((function(e){return{fieldId:e.fieldId,forType:e.forType,format:r,key:"comp.style",view:e.view}})).value():[{fieldId:t.compId||t.id,forType:"Post",format:r,key:"comp.style",view:o}]})))}(t,a,o,r))}function B(t){if(void 0===t||e.includes([t.view,t.forType,t.format,t.fieldId,t.key],void 0))throw new Error("illegal rule")}function F(t,n,o){return B(o),e.find(n,(function(t){return function(t,n){return(t.format===n.format||"*"===n.format&&e.isUndefined(t.format))&&["fieldId","forType","key","view"].every((function(e){return t[e]===n[e]}))}(t,o)}))}function k(t,n,o){var r=S.getDescriptor(t,n).customizations,i=F(0,r,o)||F(0,r,e.merge({},o,{format:"*"}));return i&&i.value}function U(t,n,o){var r;return x(S.getDescriptor(t,n),o.view,o.format).some((function(t){return"vars"===o.fieldId?void 0!==(r=t.vars&&t.vars[o.key]):void 0!==(r=function t(n,o){var r;return n.id===o.fieldId&&void 0!==(r=e.get(n,o.key))?r:void 0!==n.comp?(e([n.comp.items,e.values(n.comp.cases),e.values(n.comp.templates)]).flattenDeep().compact().some((function(e){return void 0!==(r=t(e,o))})),r):void 0}(t,o))})),r}function H(t,n,o){var r=L(t,n,o.view,o.format),i=e.find(r,{fieldId:o.fieldId,key:o.key});if(void 0!==i)return i.input.defaultVal}function V(t,n){for(var o=t.pointers.page.getPageData("masterPage"),r=["appVars_61f33d50-3002-4882-ae86-d319c1a249ab","vars","applicationActiveState"];!e.isEmpty(r);)o=t.pointers.getInnerPointer(o,r.splice(0,1)[0]),t.dal.isExist(o)||t.dal.set(o,{});t.dal.set(o,{type:"AppPartParam",value:n})}function G(e){return O.evaluate((function(){}),e,function(){W||(W=new T);return W}())}var W=null;var Y={blog:{addBlog:function(t,n,o,r,i){var a=function(n){var a=v.getPageIdToAdd(t),s=l.getBlogFeedPageJson(t,o,n.applicationId);s.data.pageUriSEO=E.getValidPageUriSEO(t,"",s.data.pageUriSEO);var c=l.getSinglePostPageJson(t,r,n.applicationId);c.data.pageUriSEO=E.getValidPageUriSEO(t,"",c.data.pageUriSEO),t.setOperationsQueue.runSetOperation(v.add,[t,a,"Blog",s],{isUpdatingAnchors:!0}),t.setOperationsQueue.runSetOperation(v.add,[t,v.getPageIdToAdd(t),"Single Post",c],{isUpdatingAnchors:!0}),e.isFunction(i)&&i(a.id)};n?w(t,"blog","61f33d50-3002-4882-ae86-d319c1a249ab",n,(function(){u.provisionAppAfterSave(t,"61f33d50-3002-4882-ae86-d319c1a249ab",a)})):D(t,"blog","61f33d50-3002-4882-ae86-d319c1a249ab",a)},deleteAllAppParts:b,getBlogSinglePostPageData:function(t){var n,o=v.getPageIdList(t);return e.forEach(o,(function(e){Y.blog.isSinglePost(t,e)&&(n=E.getPageData(t,e))})),n},isFeed:h.isFeed,isSinglePost:h.isSinglePost,replaceBlogPages:function(t,n,o,r){var i=t.pointers.page.getNonDeletedPagesPointers(),a=e(i).chain().find((function(e){return h.isSinglePost(t,e.id)})).thru(t.pointers.components.getDesktopPointer).value(),s=r||e(i).chain().find((function(e){return h.isFeed(t,e.id)})).thru(t.pointers.components.getDesktopPointer).value(),c=e(a.id).thru(t.pointers.data.getDataItem).thru(t.dal.get).get("appInnerID"),u=l.blogComponentBuilder(c);return p(a,o.map(u)),p(s,n.map(u));function p(e,n){var o=[];return t.pointers.components.getChildren(e).forEach((function(e){t.setOperationsQueue.runSetOperation(m.remove,[t,e],{isUpdatingAnchors:!0})})),n.forEach((function(n){var r=m.getComponentToAddRef(t,e,n);o.push(r),t.setOperationsQueue.runSetOperation(m.add,[t,r,e,n],{isUpdatingAnchors:!0})})),o}}},blogFeedOrCustomFeedHasPagination:I.blogFeedOrCustomFeedHasPagination,canDeleteComp:R,findCustomizationDefaultValueFromDescriptor:function(e,t,n){var o;return B(n),[k,U,H].some((function(r){return void 0!==(o=r(e,t,n))})),O.isExpression(o)?G(o.$expr):o},findCustomizationOverride:F,getAllAppPartComps:function(t,n){var o=n&&C(t,n);return e.isNull(o)?[]:f.getComponentByType(t,"wixapps.integration.components.AppPart").map((function(e){return i.getDataItem(t,e)})).filter((function(e){return e.appInnerID===o||!o}))},getApplicationId:C,getAppPartExtraData:function(e,t){var n=e.dal.get(t),o="".concat(n.dataQuery.replace("#",""),"_extraData"),r=d.getAppPartDataPath("blog",o);return e.dal.getByPath(r)},getAppPartRole:S.getAppPartRole,getAppPartViewFieldKeyValue:function(t,n,r,a,s,c){var u,l=i.getDataItem(t,n),p=S.getDescriptor(t,S.getPackageName(t,l.appInnerID)),d=o[A.isOpen("wixappsViewsCaching")?"memoizedViewsUtils":"viewsUtils"].findViewInDescriptorByNameTypeAndFormat(p,l.viewName,r,a),g=e.cloneDeep(d);g.name=l.viewName,o.viewsCustomizer.customizeView(g,p.customizations,l.appLogicCustomizations),"vars"===s?u=g.vars[c]:o.viewsUtils.traverseViews(g,(function(t){if(t.id===s)return u=e.get(t,c),!1}));var f=O.isExpression(u)?G(u.$expr):u;if(void 0!==f)return f.toString()},getAvailableCustomizations:L,getAvailableViewNames:function(e,t,n){return S.getAppPartDefinition(e,t,n).views},getBlogCategories:function(t,n){var o=d.getCategoriesPath("blog"),r=t.dal.getByPath(o)||[],i=[];return e.forEach(r,(function(t){i.push({name:t.name}),e.forEach(t.subcategories,(function(e){i.push({isSubcategory:!0,name:e.name})}))})),n&&!e.find(i,{name:n})&&i.unshift({name:n}),i},getBlogInstanceId:function(e){return function(e){return s.getAppData(e,C(e,"blog"))}(e).datastoreId},getBlogNewSocialShareButtonsCustomizationForView:function(e,t){return g(t)},getBlogPaginationCustomizationsByAppPartName:function(e,t){return p.getBlogPaginationCustomizationsByAppPartName(t)},getComponentTypeByProxyName:function(e,t){return r.componentTypeUtil.getComponentTypeByProxyName(t)},getDataStoreId:function(e,t){return s.getAppData(e,C(e,t)).datastoreId},getInnerComps:N,getPackageName:S.getPackageName,getSinglePostId:function(e,t){var n=d.getAppPartDataPath("blog",t),o=e.dal.getByPath(n);return o?o[1]:""},getStyleCustomizations:function(t,n,o,r){var i=S.getDescriptor(t,n);return e.filter(i.customizations,(function(e){return!("comp.style"!==e.key||void 0!==o&&e.fieldId!==o||void 0!==r&&e.view!==r)}))},getTagNames:function(e){var t=d.getBlogTagNamesPath();return e.dal.getByPath(t)},getUserId:function(){return""},invalidateComponentViewCache:function(e,t){e.setOperationsQueue.waitForChangesApplied((function(){r.viewCacheUtils.removeComponentViewDefs(t)}))},isBlogPage:h.isBlogPage,isRTLAllowed:function(e,t,n){return S.getAppPartDefinition(e,t,n).allowRtl},loadTagNames:function(){return[]},provision:D,provisionFromTemplate:w,registerHooks:function(){y.registerHook(y.HOOKS.REMOVE.AFTER,b,"wixapps.integration.components.AppPage"),y.registerHook(y.HOOKS.REMOVE.IS_OPERATION_ALLOWED,R,"wixapps.integration.components.AppPart"),y.registerHook(y.HOOKS.DUPLICATE.IS_OPERATION_ALLOWED,R,"wixapps.integration.components.AppPart")},reloadApp:function(t,n){if(e.size(Y.getAllAppPartComps(t,n))>0){var o=d.getPackageDescriptorPath(n),r=t.dal.getByPath(o),i=d.getPackagePath(n);t.dal.full.setByPath(i,{}),t.dal.full.setByPath(o,r),"blog"===n&&Y.loadTagNames(t)}},styleMapping:{fontClassToStyle:function(e,t){return o.styleMapping.fontClassToStyle(t)},styleToFontClass:function(e,t){return o.styleMapping.styleToFontClass(t)}},style:{createItemToFork:function(t,n){var o={styleType:a.STYLES.TYPES.CUSTOM,type:a.STYLES.TOP_LEVEL_STYLE},r=e(n).omit(["id"]).assign(o).value();return P.styles.createStyleItemToAdd(t,r)}}};return Y}()},function(e,t,n){e.exports=function(){var e=n(18),t=(n(152),n(12),n(0));return{getBlogFeedPageJson:function(t,n,r){var i=o(r);return{type:"Page",components:n.map(i),skin:"wysiwyg.viewer.skins.page.BasicPageSkin",layout:{width:980,height:968,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[],fixedPosition:!1},componentType:"wixapps.integration.components.AppPage",data:{type:"AppPage",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"Blog",hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"blog",hidePage:!1,underConstruction:!1,tpaApplicationId:0,pageSecurity:{requireLogin:!1},indexable:!0,isLandingPage:!1,pageBackgrounds:e.serializePage(t,t.siteAPI.getPrimaryPageId()).data.pageBackgrounds,appPageId:"79f391eb-7dfc-4adf-be6e-64434c4838d9",appPageType:"AppPage",appInnerID:r.toString(),repeaterPage:!1},style:"p2"}},getSinglePostPageJson:function(t,n,r){var i=o(r);return{type:"Page",components:n.map(i),skin:"wysiwyg.viewer.skins.page.BasicPageSkin",layout:{width:980,height:895,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[],fixedPosition:!1},componentType:"wixapps.integration.components.AppPage",data:{type:"AppPage",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"Single Post",hideTitle:!0,descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"single-post",hidePage:!0,mobileHidePage:!0,underConstruction:!1,tpaApplicationId:0,pageSecurity:{requireLogin:!1,passwordDigest:""},indexable:!0,isLandingPage:!1,pageBackgrounds:e.serializePage(t,t.siteAPI.getPrimaryPageId()).data.pageBackgrounds,appPageId:"7326bfbb-4b10-4a8e-84c1-73f776051e10",appPageType:"AppPage",appInnerID:r.toString(),repeaterPage:!0},style:"p2"}},blogComponentBuilder:o};function o(e){return function n(o){var r=function(n){if("wixapps.integration.components.AppPart"===n.componentType)return o=n,t.merge(o,{data:{appInnerID:e.toString()}});var o;return n}(o);return t.isArray(o.components)&&(r.components=o.components.map(n)),r}}}()},function(e,t,n){var o,r,i,a,s,c,u;e.exports=(o=n(3),r=n(137),i=n(0),a=n(1),s=n(115),c=a.blogAppPartNames,u=s.numberOfPostsPerPageGetter,{blogFeedOrCustomFeedHasPagination:function(e,t){var n=o.getDataItem(e,t);switch(n.appPartName){case c.FEED:return function(e,t){var n=r.getAppPartExtraDataPath("blog",t.id),o=e.dal.getByPath(n);return i.get(o,"totalCount")>10}(e,n);case c.CUSTOM_FEED:return function(e,t){var n=r.getAppPartDataPath("blog",t.id),o=e.dal.getByPath(n),a=u.getNumberOfPostsPerPage(t);return i.get(o,"length")>a}(e,n)}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),o=(n(49),n(81)),r=n(67),i=(n(10),n(41)),a=(n(237),n(238),n(239)),s=["comp","name"],c=["comp","hidden"],u=["comp","hidePagination"],l=["comp","itemsPerPage"],p=["comp","style"],d=["vars","itemSpacing"],g={itemSpacing:function(){return d},hidePagination:function(e){return f(e).concat(u)},itemsPerPage:function(e){return f(e).concat(l)},hideSeparator:function(e){return m(e).concat(c)},separatorStyle:function(e){return m(e).concat(p)}};function f(n){return t.objectUtils.findPath(n,(function(t){return"PaginatedList"===e.get(t,s)}))}function m(n){return t.objectUtils.findPath(n,(function(t){return"HorizontalLine"===e.get(t,s)}))}return{get:function(t,n,s){var c=r.getListDef(t,n).viewName,u=o.getView(t,"Array",c,s),l=m(u),p=e.get(u,l);return{itemSpacing:i.convertStringToPrimitive(e.get(u,g.itemSpacing(u))),hidePagination:i.convertStringToPrimitive(e.get(u,g.hidePagination(u))),itemsPerPage:i.convertStringToPrimitive(e.get(u,g.itemsPerPage(u))),hideSeparator:i.convertStringToPrimitive(e.get(u,g.hideSeparator(u)))||!1,separatorStyle:a.getStyle(t,p),separatorComponentType:a.getCompProxyClass(p).componentType}},set:function(t,n,i,a){var s=r.getListDef(t,n).viewName,c=o.getView(t,"Array",s,a);e(g).pick(e.keys(i)).forEach((function(e,n){o.setValueInView(t,"Array",s,e(c),i[n].toString(),a)})),r.markDataAsUpdated(t,n)}}}()},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(13),r=n(654),i=n(655),a=n(24),s=n(656),{initialize:function(e){a.initBasePaths(e),r.registerHooks(),i.switchOnBlogPaginationIfSiteIsNew(e),o.generalInfo.isFirstSave(e)&&s(e)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(24),o=n(6),r=n(3),i=n(236),a=n(67),s=n(242),c="wixapps.integration.components.AppPart2",u="template";function l(e,n,o){var a=i.createListFromTemplate(e,o.custom[u]),c=s.getApplicationId(e);return e.dal.full.pushByPath(t.getAppbuilderMetadataPath("requestedPartNames"),a),e.dal.full.setByPath(t.getAppPart2MetadataPath(a),{loading:!1}),r.updateDataItem(e,n,{appPartName:a,appInnerID:c}),{success:!0,description:"New list was added with id [".concat(a,"]")}}function p(t,n,o){var a=r.getDataItem(t,n);return e.isEmpty(a)?{success:!0,description:"compData is empty"}:(o[u]=i.generateTemplate(t,a.appPartName),{success:!0,description:"Added template to the custom component structure"})}function d(n,o,r,i,s,c){if("MOBILE"===o.type)return{success:!0,description:"Skipped deleting part views when deleting mobile component"};var u=c.appPartName,l=a.getListDef(n,u);if(!l)return{success:!0,description:"Missing Part definition: views were not deleted"};var p=n.dal.getByPath(t.getBaseViewsPath());return e(p).pickBy({name:l.viewName}).forEach((function(e,o){n.dal.full.removeByPath(t.getViewPath(o))})),{success:!0,description:"Deleted Part views"}}return{registerHooks:function(){o.registerHook(o.HOOKS.ADD.AFTER,l,c),o.registerHook(o.HOOKS.SERIALIZE.SET_CUSTOM,p,c),o.registerHook(o.HOOKS.REMOVE.AFTER,d,c)},afterDeleteList:d}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(7),o=n(3),r=n(13),i=n(152),a=n(1);return{switchOnBlogPaginationIfSiteIsNew:function(e){(function(e){return r.generalInfo.isFirstSave(e)})(e)&&(function(e){s(e,a.blogAppPartNames.FEED)}(e),function(e){s(e,a.blogAppPartNames.CUSTOM_FEED)}(e))}};function s(n,r){e.forEach(function(n,r){return e.filter(function(e){return t.getComponentByType(e,"wixapps.integration.components.AppPart")}(n),(function(e){return o.getDataItem(n,e).appPartName===r}))}(n,r),e.partial(c,n,r))}function c(e,t,n){var r=o.getDataItem(e,n);r.appLogicCustomizations=r.appLogicCustomizations.concat(i.getBlogPaginationCustomizationsByAppPartName(t)),o.updateDataItem(e,n,r)}}()},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(7),r=n(3),i=n(241),a=n(0),s=n(1),function(e){a(o.getComponentByType(e,"wixapps.integration.components.AppPart")).filter((function(t){return r.getDataItem(e,t).appPartName===s.blogAppPartNames.SINGLE_POST})).forEach((function(t){var n=r.getDataItem(e,t),o=i(n.viewName);n.appLogicCustomizations.push(o),r.updateDataItem(e,t,n)}))})},function(e,t,n){var o,r,i,a,s;e.exports=(o=n(0),r=n(4),i=n(7),a=n(24),s=n(240),{cleanRepoViews:function(e,t,n){var c=e.dal.full.getByPath(a.getRepoPath()),u=o(c.parts).pick(function(e){var t=i.getAllComponents(e,null,(function(t){return"wixapps.integration.components.AppPart2"===r.getType(e,t)}));return o.map(t,(function(t){return r.data.get(e,t).appPartName}))}(e)).map("viewName").transform((function(e,t){var n=o.pickBy(c.views,{name:t});return o.assign(e,n)}),{}).value();o.keys(u).length!==o.keys(c.views).length?(e.dal.full.removeByPath(a.getBaseViewsPath()),e.dal.full.setByPath(a.getBaseViewsPath(),u),s.save(e,t,n)):t&&t()}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(41),o=n(1),r=n(659),i=(n(24),n(80)),a=n(81),s=n(67),c={"wix:RichText":r};function u(n){var o={};return t.viewsUtils.traverseViews(n,(function(t){var n=e.get(t,"comp.name");"TextField"!==n&&"Field"!==n||(o[t.data]=t)})),o}function l(e,t){return o.objectUtils.findPath(e,(function(e){return e&&e.data===t}))}function p(t,n,o,r,i){var a=u(t),s=u(n),p=e(r).filter((function(t){return e.has(c,t.type)})).groupBy("type").value(),d=e.map(p,(function(t,n){return e.map(t,(function(t){var r=t.name,u=a[r],l=s[t.name],p=e.mapValues(o,(function(t){return e.pick(t,r)}));return{fieldName:r,result:c[n].migrate(u,l,p,i)}}))}));return e(d).flatten().reduce((function(t,n){var o=l(t.viewDef,n.fieldName),r=l(t.mobileViewDef,n.fieldName);return{viewDef:e.set(t.viewDef,o,n.result.viewDef),mobileViewDef:e.set(t.mobileViewDef,r,n.result.mobileViewDef),items:e.defaultsDeep(n.result.data,t.items)}}),{viewDef:t,mobileViewDef:n,items:o})}return{migrate:p,migrateList:function(e,t){var n=s.getItemView(e,t),o=s.getItemView(e,t,"Mobile"),r=s.getType(e,t),c=i.getAllItemsOfType(e,r.name),u=s.getVersion(e,t),l=p(n,o,c,r.fields,u);a.setValueInView(e,r.name,n.name,[],l.viewDef),a.setValueInView(e,r.name,n.name,[],l.mobileViewDef,"Mobile"),i.setAllItemsOfType(e,r.name,l.items)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(41),o=["color","backgroundColor","bold","italic","lineThrough","underline","fontSize","line-height","fontFamily"],r="comp.items.0.layout".split(".");function i(t){return function(t){var n=e.get(t,"comp.items[0].comp");e.forEach(o,(function(e){delete n[e]}))}(t),function(t){var n=e.get(t,r);n&&delete n["text-align"]}(t),t}return{compPropsToRemove:o,migrate:function(n,o,a,s){var c=e.get(n,r.concat("text-align")),u=c?"text-align:".concat(c):"";return{data:e.mapValues(a,(function(o){return e.mapValues(o,(function(o){var r=function(n,o,r,i){return t.richTextUtils.getDataWithDefaultStyleForRichText(e.partialRight(t.viewsUtils.getCompProp,n),o,void 0,r,i)}(e.get(n,"comp.items[0]"),o,s,u);return e.defaults({text:r},o)}))})),viewDef:i(n),mobileViewDef:i(o)}}}}()}])}));
//# sourceMappingURL=document-services-implementation.js.map