var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}define("panels/panelManager/panelManager",["lodash","stateManagement"],function(n,s){"use strict";return{create:function(a){return{openPanel:function(e,t,n){a.dispatch(s.editorPlugins.panels.actions.updateOrOpenPanel(e,t,n))},openComponentPanel:function(e,t){a.dispatch(s.editorPlugins.panels.actions.openComponentPanel(e,t))},replaceComponentPanel:function(e,t){a.dispatch(s.editorPlugins.panels.actions.openComponentPanel(e,n.assign({},t,{useLastPanelPosition:!0})))},closePanelByName:function(e,t){a.dispatch(s.editorPlugins.panels.actions.closePanelByName(e,t))},closeAllPanels:function(){a.dispatch(s.editorPlugins.panels.actions.closeOpenedPanels())},getOpenPanels:function(){return s.editorPlugins.panels.selectors.selectOpenPanels(a.getState())},registerPanelType:function(e,t,n){a.dispatch(s.editorPlugins.panels.actions.setPanelType(e,t,n))},getPanelsOfType:function(e){var t=s.editorPlugins.panels.selectors.selectOpenPanels(a.getState());return n.filter(t,{frameType:e})},closeAllPanelsOfType:function(e){a.dispatch(s.editorPlugins.panels.actions.closeAllPanelsOfType(e))},openHelpCenter:function(e,t,n){a.dispatch(s.editorPlugins.panels.actions.openHelpCenter(e,t,n))},openHelpCenterHome:function(e,t,n){a.dispatch(s.editorPlugins.panels.actions.openHelpCenterHome(e,t,n))},closeHelpCenter:function(){a.dispatch(s.editorPlugins.helpPanel.actions.closeHelpCenter())},notifyMouseDown:function(){a.dispatch(s.editorPlugins.panels.actions.stageMouseDown())},openPlatformPanel:function(e){a.dispatch(s.editorPlugins.panels.actions.openPlatformPanel(e))},openFirstTimePanel:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};a.dispatch(s.editorPlugins.panels.actions.openFirstTimePanel(e,t))},updatePanelProps:function(e,t){a.dispatch(s.editorPlugins.panels.actions.updatePanel(e,t))},findPlatformPanelByType:function(e){var t=s.editorPlugins.panels.selectors.selectOpenPanels(a.getState());return n.some(t,["props.type",e])}}}}}),define("panels/frames/leftPanelFrame.rt",["react","lodash","santa-editor-symbols","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"left-panel-frame panel-index-"+this.props.panelIndex+" "+this.props.panelClass+(0===this.props.panelIndex?" first-panel":""),style:this.getFrameStyle(),onWheel:this.props.blockOuterScroll,onContextMenu:function(e){this.props.onContextMenu&&this.props.onContextMenu(e)}.bind(this)},this.props.label?e.createElement(a.PanelHeader,{key:"header",className:"light",onClose:this.props.close,onHelp:this.props.openHelpCenter,noHelpBtn:!this.props.helpId&&!this.props.onHelpClicked},e.createElement("span",{},this.props.label)):null,e.createElement("div",{id:this.props.id,className:"left-panel-frame-content "+(this.props.className||"")},this.props.children))}}),define("panels/frames/leftPanelFrame",["create-react-class","lodash","prop-types","core","constants","stateManagement","panels/frames/leftPanelFrame.rt"],function(e,n,t,a,s,i,o){"use strict";var r=e({displayName:s.PANEL_TYPES.LEFT,mixins:[a.mixins.editorAPIMixin],PropTypes:{panelClass:t.string.isRequired,panelIndex:t.number.isRequired,label:t.string,onClose:function(e,t){if(e.title&&"function"!=typeof e[t])return new Error("onClose prop must be of type a function")},styleOverride:t.object,openPanelBiEvent:t.object,openPanelBiParams:t.object},getFrameStyle:function(){return this.props.styleOverride},componentWillMount:function(){var e=this.getEditorAPI().panelManager,t=n.filter(e.getOpenPanels(),{frameType:s.PANEL_TYPES.LEFT});1<n.size(t)&&e.closePanelByName(n.head(t).name)},render:o}),l=i.editorPlugins.panels.hoc.panelFrame(s.PANEL_TYPES.LEFT)(r);return l.pure=r,l}),define("panels/mixins/disableKeyboardShortcutsMixin",["lodash","util"],function(e,t){"use strict";var n=t.keyboardShortcuts,a=0,s=[];return{componentWillMount:function(){var e=!1;n.isEnabled()||(n.enable(),e=!0),s.push(n.getContext()),this.dynamicKeyboardContext=n.CONTEXTS.MODAL_PANEL+"_"+a++,n.registerContext(this.dynamicKeyboardContext,this.getPanelShortcuts()),n.setContext(this.dynamicKeyboardContext),e&&n.disable()},componentWillUnmount:function(){var e=!1;n.isEnabled()||(n.enable(),e=!0),n.unregisterContext(this.dynamicKeyboardContext);var t=s.pop();t!==this.dynamicKeyboardContext&&n.setContext(t),e&&n.disable()},getPanelShortcuts:function(){return this.props.keyboardShortcuts?this.props.shouldExtendDefaultShortcuts?e.assign(this.getDefaultShortcuts(),this.props.keyboardShortcuts):this.props.keyboardShortcuts:this.getDefaultShortcuts()},getDefaultShortcuts:function(){return{esc:this.props.isBareMode?e.noop:this.onCancel||this.onEscape||this.close||this.props.close}}}}),define("panels/frames/panelCloseOrigin",[],function(){"use strict";return{HEADER_CLOSE_BUTTON:"header_close_button",CLICK_OUTSIDE:"click_outside",OUT_OF_FOCUS:"out_of_focus",ESCAPE_PRESS:"escape_press",DONE_BUTTON:"done_button",CONFIRM_BUTTON:"confirm_button"}}),define("panels/frames/messagePanelFrame.rt",["react","lodash","baseUI","santa-editor-symbols","baseUILib","panels/frames/panelCloseOrigin"],function(a,s,i,e,o,r){"use strict";return function(){return a.createElement("div",{className:"panel-frame-container screen-centered-frame message-panel-frame-z-index"},a.createElement("div",{className:"dark-frame-overlay"}),a.createElement("div",(e={className:"message-panel-frame"},t=this.getPanelProps(),n=s.assign({},e,t),e.hasOwnProperty("style")&&(n.style=s.defaults(n.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(n.className=t.className+" "+e.className),n),a.createElement(o.PanelHeader,{className:"dark",onClose:this.onCancel(r.HEADER_CLOSE_BUTTON),noHelpBtn:!0},this.props.panelTitle?a.createElement("span",{key:"headerTitle"},this.props.panelTitle):null),a.createElement("div",{className:"content"},this.props.children),a.createElement("div",{className:"panel-footer"},this.props.footerText?a.createElement("div",{key:"footerText",className:"footer-text"},this.props.footerText):null,this.props.dontShowAgainKey&&this.props.userPrefType?a.createElement(o.Checkbox,{key:"dont-show-again-toggle",labelAfterSymbol:!0,className:"dont-show-again",label:"Notification_Box_Dont_Show_Again",value:this.props.dontShowAgain,onChange:this.onDontShowAgainChange}):null,this.props.cancelLabel?a.createElement(i.button,{key:"btn-confirm-secondary",className:"btn-confirm-secondary",onClick:this.onCancel(r.DONE_BUTTON),label:this.props.cancelLabel}):null,a.createElement(i.button,{className:"btn-confirm-primary",onClick:this.onConfirm,label:this.props.confirmLabel}))));var e,t,n}}),define("panels/frames/messagePanelFrame",["create-react-class","lodash","prop-types","util","constants","higherOrderComponents","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/panelCloseOrigin","stateManagement","panels/frames/messagePanelFrame.rt"],function(e,t,n,a,s,i,o,r,l,c){"use strict";var p=e({displayName:s.PANEL_TYPES.MESSAGE,mixins:[a.propTypesFilterMixin,o],propTypes:{panelName:n.string.isRequired,panelTitle:n.string,width:n.string,height:n.string,onConfirm:n.func,confirmLabel:n.string,keyboardShortcuts:n.object,shouldExtendDefaultShortcuts:n.bool,dontShowAgain:n.bool,toggleDontShowAgain:n.func.isRequired,showCancelBtn:n.bool,cancelLabel:n.string,onCancel:n.func,close:n.func,type:n.string,footerText:n.object},getInitialState:function(){return{buttonWasClicked:!1}},getDefaultProps:function(){return{confirmLabel:"messagePanelFrame_Confirm"}},getPanelProps:function(){return{style:{width:this.props.width,height:this.props.height},className:this.props.className}},_closeAndCall:function(e,t){this.state.buttonWasClicked||(this.setState({buttonWasClicked:!0}),this.props.close(t),e&&e())},onConfirm:function(){this._closeAndCall(this.props.onConfirm,r.CONFIRM_BUTTON)},onCancel:function(e){var t=this;return function(){return t._closeAndCall(t.props.onCancel,e)}},onDontShowAgainChange:function(e){this.props.onDontShowAgainChange(e),this.props.toggleDontShowAgain(e)},render:c}),u=i.linkUserPreferences()(l.editorPlugins.panels.hoc.panelFrame(s.PANEL_TYPES.MESSAGE)(p));return u.pure=p,u}),define("panels/frames/toolPanelFrame.rt",["react","lodash","baseUI","santa-editor-symbols","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container tool-panel-frame-container tool-panel-frame-z-index"+(this.props.isBlockingLayerFullScreen?" full-screen":"")+" "+(this.props.className||""),onWheel:this.blockOuterScrollIfNecessary,"data-aid":this.props.automationId,style:this.props.style},e.createElement("div",{className:"transparent-frame-overlay",onClick:this.onOverlayClick,ref:"closeButton"}),e.createElement("div",t.assign({},{ref:this.setContentWrapper},this.getContentWrapperProps()),this.props.headerTitle?e.createElement(s.PanelHeader,{ref:"header",key:"toolFrameHeader",onMouseDown:this.startContentDrag,className:"dragger "+(this.props.lightHeader?"light":"dark"),onClose:this.closePanel,onHelp:this.props.openHelpCenter,noHelpBtn:!this.props.helpId},this.props.headerTitle?e.createElement("span",{key:"headerTitle"},this.props.headerTitle):null):null,this.props.useScroll?e.createElement(s.CustomScroll,{key:"scrolled-content",heightRelativeToParent:"100%",keepAtBottom:!0},e.createElement("div",{className:"scrolled-content "+this.getContentClass()},this.renderChildren())):null,this.props.useScroll?null:e.createElement("div",{key:"content",className:this.getContentClass()},this.renderChildren())))}}),define("panels/frames/toolPanelFrame",["react","create-react-class","prop-types","lodash","reactDOM","constants","util","santa-editor-utils","baseUILib","zepto","stateManagement","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/toolPanelFrame.rt","panels/frames/panelCloseOrigin"],function(e,t,n,c,p,a,i,s,o,u,r,l,d,m){"use strict";var h=s.hoc.measuring;function g(e,t){if(/%$/.test(e)){var n=parseInt(e,10);return parseInt(t*(n/100),10)||0}return parseInt(e,10)||0}var f=t({displayName:a.PANEL_TYPES.TOOL,propTypes:{panelName:n.string.isRequired,selectedComponentType:n.string,headerTitle:n.string,width:n.string,height:n.string,helpId:n.string,top:n.oneOfType([n.string,n.number]),left:n.oneOfType([n.string,n.number]),isBlockingLayerFullScreen:n.bool,shouldBlockOuterScroll:n.bool,lightHeader:n.bool,contentClass:n.string,contentWrapperClass:n.string,onClose:n.func,openHelpCenter:n.func,contentStyle:n.object,style:n.object,close:n.func,onContentElementReady:n.func,reportMeasurements:n.func.isRequired,measurements:n.shape({contentHeight:n.number,contentWidth:n.number,stageLayout:n.object,editorContentLayout:n.object,initialPos:n.shape({top:n.number,left:n.number})}),automationId:n.string,className:n.string,stageLayout:n.object,editorContentLayout:n.object,renderContent:n.func,children:n.oneOfType([n.array,n.object]),useScroll:n.bool},mixins:[i.draggableMixin,l],componentDidMount:function(){this.props.onContentElementReady&&this.contentWrapper&&this.props.onContentElementReady(this.contentWrapper),this.measureContentElement()},componentDidUpdate:function(){this.measureContentElement()},measureContentElement:function(){var e=u(p.findDOMNode(this.getContentWrapperElement())),t=this.props.stageLayout,n=this.props.editorContentLayout,a=e.height()||0,s=e.width()||0,i={contentHeight:a,contentWidth:s,contentOffset:e.offset()||0,stageLayout:t,editorContentLayout:n},o=g(e.css("top"),t.height+t.top),r=g(e.css("left"),t.width+t.left),l=this.calcInitialContentPos(o,r,t,s,a,n);this.props.reportMeasurements(c.defaults({initialPos:l},i))},calcInitialContentPos:function(e,t,n,a,s,i){var o=(u(window).scrollTop()||0)+(i.bottom-s),r=n.right-a;return{top:Math.min(e,o),left:Math.min(Math.max(t,0),r)}},getContentWrapperProps:function(){return{style:this.getContentWrapperStyle(),className:"tool-panel-frame "+(c.isEmpty(this.props.measurements)?"hidden":"")+" "+this.props.contentWrapperClass}},getContentWrapperStyle:function(){return!this.state.isCustomPosition&&c.get(this.props,"measurements.initialPos")?c.defaults({},this.props.measurements.initialPos,this.props.contentStyle):this.props.contentStyle},getDragLimits:function(){if(c.isEmpty(this.props.measurements))return{x:[],y:[]};var e=this.props.measurements,t=e.stageLayout,n=e.contentHeight,a=e.contentWidth,s=e.editorContentLayout;return i.panelUtils.getPanelDragLimits(n,a,t,s)},getContentClass:function(){return"content "+(this.props.contentClass||"")},getContentWrapperElement:function(){return this.contentWrapper},setContentWrapper:function(e){this.contentWrapper=e},renderDefaultHeader:function(){var t=this;return e.createElement(o.PanelHeader,{ref:"header",key:"toolFrameHeader",onMouseDown:function(e){return t.startDrag(e,t.getDragLimits(),t.contentWrapper)},className:"dragger "+(this.props.lightHeader?"light":"dark"),onClose:this.closePanel,onHelp:this.props.openHelpCenter,noHelpBtn:!this.props.helpId},e.createElement("span",null,this.props.headerTitle))},blockOuterScrollIfNecessary:function(){this.props.shouldBlockOuterScroll&&this.blockOuterScroll.apply(this,arguments)},closePanel:function(e){this.props.onClose&&this.props.onClose(e),this.props.close()},onOverlayClick:function(){this.closePanel(m.CLICK_OUTSIDE)},onEscape:function(){this.closePanel(m.ESCAPE_PRESS)},startContentDrag:function(e){return this.startDrag(e,this.getDragLimits(this.contentWrapper),this.contentWrapper)},renderChildren:function(){return c.isFunction(this.props.renderContent)?this.props.renderContent(this.startContentDrag):this.props.children},render:d});return c.flowRight(r.editorPlugins.panels.hoc.panelFrame(a.PANEL_TYPES.TOOL),h)(f)}),define("panels/frames/focusPanelFrame.rt",["react","lodash","santa-editor-symbols","util","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container screen-centered-frame focus-panel-frame-z-index "+(this.props.frameClassName||""),onWheel:this.props.blockOuterScroll,onContextMenu:function(e){this.props.onContextMenu&&this.props.onContextMenu(e)}.bind(this),"data-aid":this.props.automationId},e.createElement("div",{className:this.getClassName("focus-panel-frame"),style:this.getWidthHeight()},this.shouldHideHeader()?null:e.createElement(s.PanelHeader,{className:this.getHeaderClassName()+" dark",key:"header",onClose:this.onXButtonClick,onHelp:this.props.openHelpCenter,noHelpBtn:this.props.shouldHideHelp},e.createElement("span",{},this.props.title)),e.createElement("div",{className:this.props.title?"focus-panel-frame-content":"focus-panel-frame-content-no-header",style:{backgroundColor:this.props.containerBackground}},this.props.children)),e.createElement("div",{className:"dark-frame-overlay",onClick:this.handleBlur,style:{backgroundColor:this.props.overlayBackground}}))}}),define("panels/frames/focusPanelFrame",["create-react-class","prop-types","lodash","constants","util","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/panelCloseOrigin","stateManagement","panels/frames/focusPanelFrame.rt"],function(e,t,n,a,s,i,o,r,l){"use strict";var c={OUT_OF_FOCUS:o.OUT_OF_FOCUS,X_BUTTON:"x_button"};function p(e){var t=Number(e);return t==e?t:e}var u=e({mixins:[i],displayName:a.PANEL_TYPES.FOCUS,propTypes:{automationId:t.string,blockOuterScroll:t.func.isRequired,close:t.func.isRequired,openHelpCenter:t.func.isRequired,panelName:t.string.isRequired,width:t.string,height:t.string,title:t.string,headerClassName:t.string,frameClassName:t.string,shouldHideHeader:t.bool,shouldHideHelp:t.bool,shouldNotCloseOnBlur:t.bool,keyboardShortcuts:t.object,shouldExtendDefaultShortcuts:t.bool},getHeaderClassName:function(){return this.props.headerClassName||"panel-header"},getFrameProps:function(){return{style:{width:this.props.width,height:this.props.height}}},shouldHideHeader:function(){return this.props.shouldHideHeader},shouldCloseFrame:function(e){return!this.props.onClose||!0===this.props.onClose(e)},onXButtonClick:function(){this.closeFrameIfNeeded(c.X_BUTTON)},closeFrameIfNeeded:function(e){this.shouldCloseFrame(e)&&this.props.close()},handleBlur:function(){this.props.shouldNotCloseOnBlur||this.closeFrameIfNeeded(c.OUT_OF_FOCUS)},getClassName:function(e){return s.inheritClassName(this.props,e)},getWidthHeight:function(){var e={};return this.props.width&&(e.width=p(this.props.width)),this.props.height&&(e.height=p(this.props.height)),e},render:l}),d=r.editorPlugins.panels.hoc.panelFrame(a.PANEL_TYPES.FOCUS)(u);return d.pure=u,d}),define("panels/frames/helpPanelFrame.rt",["react","lodash","santa-editor-symbols","baseUI","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return e.createElement("div",{className:"help-panel-frame"},e.createElement(s.PanelHeader,{ref:"header",onMouseDown:function(e){this.startDrag(e,this.getDragLimits())}.bind(this),className:"dragger dark help-panel-frame-drag-handle",onClose:this.closeHelpCenter,noHelpBtn:!0}),e.createElement("iframe",{id:this.props.id,className:this.props.className||"",src:this.getIframeSrc(),ref:"helpIframe"}),e.createElement(a.preloader,{className:t({hidden:!this.state.showLoader}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")}))}}),define("panels/frames/helpPanelFrame",["lodash","reactDOM","create-react-class","prop-types","util","core","constants","panels/frames/helpPanelFrame.rt","helpIds","stateManagement"],function(n,e,t,a,s,i,o,r,l,c){"use strict";var p=c.domMeasurements.selectors.getViewPort;var u=t({displayName:o.PANEL_TYPES.HELP,mixins:[s.draggableMixin,i.mixins.editorAPIMixin],PropTypes:{helpUrl:a.string.isRequired,closePanelBiEvent:a.object,closePanelBiParams:a.object,openPanelBiEvent:a.object,openPanelBiParams:a.object,isMobileEditor:a.bool},getInitialState:function(){return{showLoader:!0}},componentDidMount:function(){this.props.openPanelBiEvent&&this.props.openPanelBiParams&&this.getEditorAPI().bi.event(this.props.openPanelBiEvent,this.props.openPanelBiParams),e.findDOMNode(this.refs.helpIframe).addEventListener("load",this.hideLoader)},componentWillReceiveProps:function(e){e.isMobileEditor!==this.props.isMobileEditor&&this.closeHelpCenter()},getDragLimits:function(){var e=this.getEditorAPI(),t=p(e.store.getState());return{y:[t&&t.minY||e.editorConfig.topBarHeight]}},componentWillUnmount:function(){this.props.closePanelBiEvent&&this.props.closePanelBiParams&&this.getEditorAPI().bi.event(this.props.closePanelBiEvent,this.props.closePanelBiParams)},closeHelpCenter:function(){this.getEditorAPI().panelManager.closeHelpCenter()},onCancel:function(){this.closeHelpCenter()},hideLoader:function(){this.setState({showLoader:!1})},getIframeSrc:function(){return e=this.props.helpUrl,t=n.startsWith(e,"?")?e:"article/"+e,"https://wix.wixanswers.com/apps/widget/v1/wix/"+l.HELP_CENTER.NEW_HELP_WIDGET_ID+"/view/"+s.languages.getLanguageCode()+"/"+t;var e,t},render:r}),d=c.editorPlugins.panels.hoc.panelFrame(o.PANEL_TYPES.HELP)(u);return d.pure=u,d}),define("panels/frames/confirmationPanelFrame.rt",["react","lodash","santa-editor-symbols","baseUILib","util"],function(a,s,e,i,o){"use strict";return function(){return a.createElement("div",{className:"panel-frame-container screen-centered-frame confirmation-panel-frame-z-index"},a.createElement("div",(e={className:"confirmation-panel-frame "+this.props.type+"-confirmation"},t=this.getPanelProps(),n=s.assign({},e,t),e.hasOwnProperty("style")&&(n.style=s.defaults(n.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(n.className=t.className+" "+e.className),n),this.shouldHideHeader()?null:a.createElement(i.PanelHeader,{className:"dark",automationId:"confirmation-panel-header",key:"header",onClose:this.onClose,noHelpBtn:!0,noCloseBtn:this.props.shouldHideCloseButton},this.props.panelTitle?a.createElement("span",{key:"headerTitle"},this.props.panelTitle):null),a.createElement("div",{className:"content"},this.props.children),this.props.shouldHideFooter?null:a.createElement("footer",{key:"footer"},this.props.shouldHideCancelButton?null:a.createElement(i.Button,{key:"cancelButton",automationId:"cancelButton",className:this.getSecondaryButtonClass(),onClick:this.onCancel},a.createElement("span",{},o.translate(this.props.cancelLabel))),a.createElement(i.Button,{automationId:"confirmationButton",className:this.getConfirmButtonClass(),onClick:this.onConfirm},a.createElement("span",{},o.translate(this.props.confirmLabel))))),a.createElement("div",{className:"dark-frame-overlay"}));var e,t,n}}),define("panels/frames/confirmationPanelFrame",["create-react-class","prop-types","lodash","util","constants","panels/mixins/disableKeyboardShortcutsMixin","stateManagement","panels/frames/confirmationPanelFrame.rt"],function(e,t,n,a,s,i,o,r){"use strict";var l=e({displayName:s.PANEL_TYPES.CONFIRMATION,mixins:[a.propTypesFilterMixin,i],propTypes:{panelName:t.string.isRequired,panelTitle:t.string,width:t.string,height:t.string,onConfirm:t.func,shouldCloseByDefaultOnConfirm:t.bool,onCancel:t.func,onClose:t.func,confirmLabel:t.string,cancelLabel:t.string,shouldHideHeader:t.bool,shouldHideFooter:t.bool,shouldHideCancelButton:t.bool,shouldHideCloseButton:t.bool,type:t.oneOf(["important","normal"])},getDefaultProps:function(){return{type:"normal",confirmLabel:"confirmationPanelFrame_Confirm",cancelLabel:"confirmationPanelFrame_Cancel",shouldCloseByDefaultOnConfirm:!0}},getPanelProps:function(){return{style:{width:this.props.width,height:this.props.height},className:this.props.className}},onConfirm:function(){this.props.shouldCloseByDefaultOnConfirm&&this.props.close(),this.props.onConfirm&&this.props.onConfirm()},onCancel:function(){this.props.close(),this.props.onCancel&&this.props.onCancel()},onClose:function(){this.props.onClose?(this.props.close(),this.props.onClose()):this.onCancel()},getConfirmLabel:function(){return this.props.confirmLabel},getCancelLabel:function(){return this.props.cancelLabel},getConfirmButtonClass:function(){return("important"===this.props.type?"btn-danger-primary":"btn-confirm-primary")+" btn-md"},getSecondaryButtonClass:function(){return("important"===this.props.type?"btn-danger-secondary":"btn-confirm-secondary")+" btn-md"},shouldHideHeader:function(){return this.props.shouldHideHeader},shouldHideFooter:function(){return this.props.shouldHideFooter},render:r}),c=o.editorPlugins.panels.hoc.panelFrame(s.PANEL_TYPES.CONFIRMATION)(l);return c.pure=l,c}),define("panels/frames/bgSubPanelFrame.rt",["react","lodash","baseUI","santa-editor-symbols","util","baseUILib"],function(a,s,e,t,i,o){"use strict";return function(){return a.createElement("div",(e={className:"background-sub-panel-frame"},t=this.getPanelProps(),n=s.assign({},e,t),e.hasOwnProperty("style")&&(n.style=s.defaults(n.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(n.className=t.className+" "+e.className),n),this.props.label?a.createElement(o.PanelHeader,{ref:"header",key:"header",onMouseDown:function(e){this.startDrag(e,this.props.getPanelDragLimits())}.bind(this),className:"dragger dark",onClose:this.props.close,onHelp:this.props.openHelpCenter},this.props.label?a.createElement("span",{key:"label"},i.translate(this.props.label)):null):null,a.createElement("div",{className:"content"+(this.props.contentClass?" "+this.props.contentClass:"")},this.props.children));var e,t,n}}),define("panels/frames/bgSubPanelFrame",["create-react-class","lodash","prop-types","constants","util","stateManagement","panels/frames/bgSubPanelFrame.rt"],function(e,n,t,a,s,i,o){"use strict";var r=i.editorPlugins.panels.hoc,l=r.panelDragLimits,c=r.panelFrame,p=e({displayName:a.PANEL_TYPES.BG_SUB_PANEL,mixins:[s.draggableMixin],propTypes:{panelName:t.string.isRequired,title:t.string,width:t.number,height:t.number,top:t.number,left:t.number,getPanelDragLimits:t.func.isRequired,contentClass:t.string},getPanelProps:function(){var t={};n.forEach(["width","height","top","left"],n.bind(function(e){this.props[e]&&(t[e]=this.props[e])},this));var e=this.props.className;return{style:t,className:e}},render:o}),u=n.flow(c(a.PANEL_TYPES.BG_SUB_PANEL),l())(p);return u.pure=p,u}),define("panels/frames/backgroundPanelFrame.rt",["react","lodash","santa-editor-symbols","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"background-panel-frame"},this.props.label?e.createElement(a.PanelHeader,{key:"header",className:"dragger dark",onMouseDown:function(e){this.startDrag(e,this.props.getPanelDragLimits())}.bind(this),onClose:this.props.close,onHelp:this.props.openHelpCenter,noHelpBtn:!this.props.helpId&&!this.props.onHelpClicked},e.createElement("span",{},this.props.label)):null,e.createElement("div",{id:this.props.id,className:this.props.className||""},this.props.children))}}),define("panels/frames/backgroundPanelFrame",["create-react-class","lodash","prop-types","stateManagement","constants","util","panels/frames/backgroundPanelFrame.rt"],function(e,t,n,a,s,i,o){"use strict";var r=a.editorPlugins.panels.hoc,l=r.panelFrame,c=r.panelDragLimits,p=e({displayName:s.PANEL_TYPES.BG_PANEL,mixins:[i.draggableMixin],PropTypes:{label:n.string,onClose:function(e,t){if(e.title&&"function"!=typeof e[t])return new Error("onClose prop must be of type a function")},openPanelBiEvent:n.object,getPanelDragLimits:n.func.isRequired,openPanelBiParams:n.object},render:o}),u=t.flow(l(s.PANEL_TYPES.BG_PANEL),c())(p);return u.pure=p,u}),define("panels/frames/tpaSettingsPanelFrame.rt",["react","lodash","santa-editor-symbols","baseUI","baseUILib"],function(a,s,e,t,i){"use strict";return function(){return a.createElement("div",(e={className:"tpa-settings-panel-frame"},t=this.getPanelProps(),n=s.assign({},e,t),e.hasOwnProperty("style")&&(n.style=s.defaults(n.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(n.className=t.className+" "+e.className),n),a.createElement(i.PanelHeader,{className:"dragger dark",onMouseDown:function(e){this.startDrag(e,this.props.getPanelDragLimits())}.bind(this),onHelp:this.props.openHelpCenter,onClose:this.props.close},a.createElement("span",{},this.props.title)),this.props.shouldAddScroll?a.createElement(i.CustomScroll,{key:"scroll"},a.createElement("div",{className:"content",style:this.getContentStyle()},this.props.children)):null,this.props.shouldAddScroll?null:a.createElement("div",{key:"noScroll",className:"content",style:this.getContentStyle()},this.props.children));var e,t,n}}),define("panels/frames/tpaSettingsPanelFrame",["lodash","create-react-class","prop-types","core","util","constants","stateManagement","panels/frames/tpaSettingsPanelFrame.rt"],function(a,e,t,n,s,i,o,r){"use strict";var l=o.editorPlugins.panels.hoc,c=l.panelDragLimits,p=l.panelFrame,u=["width","top","left"],d=e({displayName:i.PANEL_TYPES.TPA_SETTINGS,mixins:[s.draggableMixin,n.mixins.editorAPIMixin],propTypes:{panelName:t.string.isRequired,title:t.string.isRequired,width:t.number,height:t.number,top:t.string,left:t.string,onHelpClicked:t.func,getPanelDragLimits:t.func.isRequired,shouldAddScroll:t.bool.isRequired},getInitialState:function(){return{showHelp:!1}},getPanelProps:function(){var t=this,e=a.filter(u,function(e){return t.props[e]}),n=a.pick(this.props,e);return a.defaults({style:n},a.pick(this.props,["className","style"]))},toggleHelp:function(){var e=!this.state.showHelp;this.setState({showHelp:e})},getContentStyle:function(){return{height:a.isNumber(this.props.height)?this.props.height+"px":"100%"}},render:r});return a.flow(p(i.PANEL_TYPES.TPA_SETTINGS),c())(d)}),define("panels/frames/dangerMessagePanelFrame.rt",["react","lodash","baseUI","santa-editor-symbols","baseUILib","panels/frames/panelCloseOrigin"],function(t,n,e,a,s,i){"use strict";return function(){var e=this;return t.createElement("div",{className:"panel-frame-container screen-centered-frame general-panel-frame-z-index danger-message-panel-frame",id:"danger-message-panel-frame"},t.createElement(s.Composites.PopupSmallSize,{className:this.getClasses()},t.createElement(s.PanelHeader,{noHelpBtn:!this.props.onHelpHeader,onHelp:this.props.onHelpHeader,onClose:function(){this.close(i.HEADER_CLOSE_BUTTON)}.bind(this)},t.createElement(s.TextLabel,{type:"T11",value:this.props.title})),t.createElement(s.Composites.PanelContent,{},t.createElement(s.Composites.RichTextWithIllustration,{},t.createElement(s.Illustration,{},t.createElement(a.symbol,{name:this.props.iconName})),this.props.contentLabel?t.createElement(s.Composites.RichTextLabeled,{key:"danger-message-content-labeled"},t.createElement(s.TextLabel,{type:"T11",value:this.props.contentLabel}),t.createElement(s.RichText,{type:"T01",className:"danger-message-content"},this.props.children)):null,this.props.contentLabel?null:t.createElement(s.Composites.RichText,{key:"danger-message-content",automationId:"dangerMessagePanelMessage"},t.createElement(s.RichText,{className:"danger-message-content",type:"T01"},this.props.children)))),t.createElement(s.Composites.ActionSetHorizontal,{className:"action-set-danger-message"},this.props.cancelLabel&&!this.props.isLoading?t.createElement(s.Button,{key:"cancelLabel",automationId:"cancelButton",className:"secondary btn-md",onClick:function(){return e.props.close(i.DONE_BUTTON)}},t.createElement(s.TextLabel,{automationId:"danger-message-secondary-button",value:this.props.cancelLabel})):null,t.createElement(s.Button,{className:n.concat("primary btn-md danger-confirm-Button",this.props.isLoading?"hidden":"").join(" "),automationId:"confirmButton",onClick:function(){return e.closeAndCall(i.CONFIRM_BUTTON,!1,e.props.callWithoutClosing)}},t.createElement(s.TextLabel,{className:"confirm-button-label",automationId:"danger-message-primary-button",value:this.props.confirmLabel}),this.props.isLoading?t.createElement(s.Composites.Preloader,{key:"confirmButtonLoading"},t.createElement(s.Preloader,{className:"small light button-on-load"})):null))),t.createElement("div",{className:"dark-frame-overlay"}))}}),define("panels/frames/dangerMessagePanelFrame",["create-react-class","lodash","prop-types","util","constants","panels/mixins/disableKeyboardShortcutsMixin","stateManagement","panels/frames/dangerMessagePanelFrame.rt"],function(e,t,n,a,s,i,o,r){"use strict";var l=e({displayName:s.PANEL_TYPES.DANGER,mixins:[a.propTypesFilterMixin,i],propsTypes:{panelName:n.string.isRequired,close:n.func.isRequired,onConfirm:n.func,title:n.string.isRequired,contentLabel:n.string,confirmLabel:n.string.isRequired,cancelLabel:n.string,iconName:n.string.isRequired,onHelpHeader:n.func.isRequired,closeWithoutCalling:n.bool,callWithoutClosing:n.bool,validationError:n.bool,isLoading:n.bool},close:function(e){this.props.isLoading||this.closeAndCall(e,this.props.closeWithoutCalling)},closeAndCall:function(e,t,n){n||this.props.close(e),this.props.onConfirm&&!t&&this.props.onConfirm()},getClasses:function(){return this.props.validationError?"popup-small-size-danger danger validationErrorPanel":"popup-small-size-danger danger"},render:r}),c=o.editorPlugins.panels.hoc.panelFrame(s.PANEL_TYPES.DANGER)(l);return c.pure=l,c}),define("panels/frames/emptyPanelFrame.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",this.getHtmlProps(),e.createElement("div",{className:"content"},this.props.children))}}),define("panels/frames/emptyPanelFrame",["create-react-class","prop-types","lodash","constants","stateManagement","panels/frames/emptyPanelFrame.rt"],function(e,t,n,a,s,i){"use strict";var o=e({displayName:a.PANEL_TYPES.EMPTY,propTypes:{panelName:t.string.isRequired},getHtmlProps:function(){return n.pick(this.props,["style","className"])},render:i}),r=s.editorPlugins.panels.hoc.panelFrame(a.PANEL_TYPES.EMPTY)(o);return r.pure=o,r}),define("panels/frames/frames",["panels/frames/leftPanelFrame","panels/frames/messagePanelFrame","panels/frames/toolPanelFrame","panels/frames/focusPanelFrame","panels/frames/helpPanelFrame","panels/frames/confirmationPanelFrame","panels/frames/bgSubPanelFrame","panels/frames/backgroundPanelFrame","panels/frames/tpaSettingsPanelFrame","panels/frames/dangerMessagePanelFrame","panels/frames/emptyPanelFrame"],function(e,t,n,a,s,i,o,r,l,c,p){"use strict";return{leftPanelFrame:e,messagePanelFrame:t,toolPanelFrame:n,focusPanelFrame:a,helpPanelFrame:s,confirmationPanelFrame:i,bgSubPanelFrame:o,backgroundPanelFrame:r,tpaSettingsPanelFrame:l,dangerMessagePanelFrame:c,emptyPanelFrame:p}}),define("panels/mixins/statefulKeyboardContextMixin",["lodash","util"],function(e,t){"use strict";var n=t.keyboardShortcuts,a=0,s=[];return{componentWillMount:function(){s.push(n.getContext()),this.myKeyboardContextName=(this.keyboardShortcutsContextNamePrefix||"")+n.CONTEXTS.AUTOMATIC+"_"+a++,n.registerContext(this.myKeyboardContextName,this.getCustomKeyboardShortcuts()),n.setContext(this.myKeyboardContextName)},componentWillUnmount:function(){if(n.unregisterContext(this.myKeyboardContextName),this.myKeyboardContextName===n.getContext()){var e=s.pop();n.setContext(e)}s.splice(s.indexOf(this.myKeyboardContextName),1)},getCustomKeyboardShortcuts:function(){return this.getKeyboardShortcuts?this.getKeyboardShortcuts():this.getDefaultShortcuts()},getDefaultShortcuts:function(){return{}}}}),define("panels/mixins/reportBiEventOnUiChangeMixin",["prop-types","lodash","util","coreUtilsLib"],function(e,o,r,l){"use strict";var c="There is no BI event for the control [%s], in [%s] panel.\n\tDear developer, Please add the control mapping to core/bi/controlsToEvents and the event to core/bi/events.json .";function t(e,t,n){(function(e,t,n){var a=r.uiControlsBIUtil.getEventDefinition(e);if(a){var s=r.uiControlsBIUtil.getParams(e,n),i=o.merge({panel_name:this.constructor.displayName,control_name:t},s);this.getEditorAPI().selectedComponent.sendSelectedComponentBI(a,i)}else l.log.warn(c,e,this.constructor.displayName)}).call(this,e,t,n)}return{childContextTypes:{reportUIChange:e.func},componentDidMount:function(){if(!o.isFunction(this.getEditorAPI))throw new Error("You must use editorAPIMixin to use the reportBiEventOnUiChangeMixin")},getChildContext:function(){return{reportUIChange:t.bind(this)}}}}),define("panels/focusPanels/focusPanelMixin",["lodash"],function(e){"use strict";var a=void 0;return{componentDidMount:function(){a=Date.now()},startNow:function(){this.sendPanelClosedBIEvent("startNow"),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.onVideoClosed()},getContentClass:function(){return"only-new"},sendBIEventWhenClosedByX:function(){this.sendPanelClosedBIEvent("xButton"),this.onVideoClosed()},sendBIEventWhenClosedByESC:function(){this.sendPanelClosedBIEvent("ESC"),this.onVideoClosed()},onVideoClosed:function(){e.isFunction(this.openTooltip)&&this.openTooltip()},sendPanelClosedBIEvent:function(e){var t=this.getEditorAPI(),n={site_id:t.dsRead.generalInfo.getSiteId(),duration:Date.now()-a,origin:e,video_url:this.props.linkedVideoData,panel_name:this.constructor.displayName};t.bi.event(this.getBIEvent(),n)}}}),define("panels/mixins/mixins",["panels/mixins/disableKeyboardShortcutsMixin","panels/mixins/statefulKeyboardContextMixin","panels/mixins/reportBiEventOnUiChangeMixin","panels/focusPanels/focusPanelMixin"],function(e,t,n,a){"use strict";return{disableKeyboardShortcutsMixin:e,statefulKeyboardContextMixin:t,reportBiEventOnUiChangeMixin:n,focusPanelMixin:a}}),define("panels/helpPanels/helpPanel.rt",["react","lodash","panels/frames/helpPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,helpUrl:this.props.helpUrl})}}),define("panels/helpPanels/helpPanel",["create-react-class","lodash","util","panels/helpPanels/helpPanel.rt"],function(e,t,n,a){"use strict";return e({displayName:"exampleHelpPanel",PropTypes:{helpUrl:function(e,t){if(!n.validate.url(e[t]))return new Error("helpUrl prop must be a string representing a valid url")}},render:a})}),define("panels/helpPanels/helpPanels",["panels/helpPanels/helpPanel"],function(e){"use strict";return{helpPanel:e}}),define("panels/errorPages/constants",[],function(){"use strict";return{404:{panelName:"404-errorPanel",title:"DYNAMIC_PAGES_404_ERROR_TITLE",symbol:"404_Error_message_illustration",errorBodyTop:"DYNAMIC_Pages_404_Error_Body_1",routerAddress:"https://www.wix.com/error-pages-samples/error404",errorBodyBottom:"DYNAMIC_Pages_404_Error_Body_2",btnViewErrorPage:"DYNAMIC_Pages_Error_View_Error_Page_Button",btnClose:"DYNAMIC_Pages_Error_Close_Button"},500:{panelName:"500-errorPanel",title:"DYNAMIC_PAGES_500_ERROR_TITLE",symbol:"500_Error_message_illustration",errorBodyTop:"DYNAMIC_Pages_500_Error_Body_1",routerAddress:"https://www.wix.com/error-pages-samples/error500",errorBodyBottom:"DYNAMIC_Pages_500_Error_Body_2",btnViewErrorPage:"DYNAMIC_Pages_Error_View_Error_Page_Button",btnClose:"DYNAMIC_Pages_Error_Close_Button"},403:{panelName:"403-errorPanel",title:"DYNAMIC_PAGES_403_ERROR_TITLE",symbol:"403_page_forbidden_message_illustration",errorBodyTop:"DYNAMIC_Pages_403_Error_Body_1",routerAddress:"https://www.wix.com/error-pages-samples/error403",errorBodyBottom:"DYNAMIC_Pages_403_Error_Body_2",btnViewErrorPage:"DYNAMIC_Pages_Error_View_Error_Page_Button",btnClose:"DYNAMIC_Pages_Error_Close_Button"},other:{panelName:"other-errorPanel",title:"DYNAMIC_PAGES_GENERAL_ERROR_TITLE",symbol:"general_error_message_illustration",errorBodyTop:"DYNAMIC_Pages_General_Error_Body_1",routerAddress:"https://www.wix.com/error-pages-samples/error",errorBodyBottom:"DYNAMIC_Pages_General_Error_Body_2",btnViewErrorPage:"DYNAMIC_Pages_Error_View_Error_Page_Button",btnClose:"DYNAMIC_Pages_Error_Close_Button"}}}),define("panels/errorPages/errorPanel.rt",["react","lodash","baseUI","santa-editor-symbols","util","baseUILib"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement("div",{className:"panel-frame-container screen-centered-frame error-page-panel-frame-z-index"},e.createElement("div",{className:"confirmation-panel-frame info-error-page error-page-panel"},e.createElement(i.PanelHeader,{className:"dark",key:"header",onClose:this.onClose,noHelpBtn:!0},e.createElement("span",{key:"headerTitle"},this.getConstants().title)),e.createElement("div",{className:"content-wrapper"},e.createElement("div",{className:"error-logo"},e.createElement(n.symbol,{name:this.getConstants().symbol})),e.createElement("div",{className:"description-wrapper"},e.createElement("span",{className:"description-line"},s.translate(this.getConstants().errorBodyTop)),e.createElement("br",{}),e.createElement("span",{className:"description-line"},e.createElement("b",{},this.props.routerAddress)),e.createElement("br",{}),e.createElement("span",{className:"description-line"},s.translate(this.getConstants().errorBodyBottom)))),e.createElement("footer",{},e.createElement(n.button,{key:"cancelButton",className:"btn-confirm-secondary  btn-md",onClick:this.openErrorPageInNewTab,label:this.getConstants().btnViewErrorPage}),e.createElement(n.button,{className:"btn-confirm-primary  btn-md",onClick:this.onClose,label:this.getConstants().btnClose}))),e.createElement("div",{className:"dark-frame-overlay"}))}}),define("panels/errorPages/errorPanel",["create-react-class","lodash","core","util","panels/errorPages/constants","panels/errorPages/errorPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"404_errorPopup",propTypes:{},mixins:[a.translationMixin,n.mixins.editorAPIMixin],openErrorPageInNewTab:function(){window.open(this.getConstants().routerAddress)},getConstants:function(){if(this.constants)return this.constants;var e=s[this.props.errorInfo.statusCode];return(e=t.clone(e)).title=e?a.translate(e.title):(e=s.other,a.translate(e.title).replace("{error_code}",this.props.errorInfo.statusCode)),this.constants=e},onClose:function(){this.getEditorAPI().panelManager.closePanelByName("panels.errorPages.errorPagePanel")},render:i})}),define("panels/errorPages/errorPagesPanels",["panels/errorPages/errorPanel"],function(e){"use strict";return{errorPagePanel:e}}),define("panels/focusPanels/welcomeVideoPanel.rt",["react","lodash","panels/frames/focusPanelFrame","util","santa-editor-symbols"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,isBareMode:!0,className:"welcome-screen-panel "+(this.props.className||""),onClose:this.handleShouldCloseOnBlur,keyboardShortcuts:this.getKeyboardShortcuts(),shouldNotCloseOnBlur:this.props.shouldNotCloseOnBlur},e.createElement("header",{className:"panel-header dark",key:"header"},e.createElement("button",{className:"close",onClick:function(){this.closeByX()}.bind(this)},e.createElement(s.symbol,{name:"headerCloseButton"})),e.createElement("div",{className:"welcome-panel-header-title"},this.props.title),e.createElement("div",{className:"welcome-panel-header-subtitle"},this.props.subtitle),e.createElement("div",{className:"videoInput-wrapper"},e.createElement("iframe",{src:this.props.linkedVideoData,frameBorder:"0",allowFullScreen:!0}),e.createElement("div",{className:"video-pixel-cover"}))),e.createElement("div",{className:"content "+this.getContentClass()},e.createElement("p",{},this.getContent("line1")," ",this.getContent("link")),e.createElement("p",{},this.getContent("line2"))),"\n    ",this.props.children,"\n\n")}}),define("panels/focusPanels/welcomeVideoPanel",["create-react-class","prop-types","lodash","core","util","coreBi","panels/focusPanels/welcomeVideoPanel.rt"],function(e,t,n,a,s,i,o){"use strict";var r=i;return e({displayName:"welcomeScreenPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{title:t.string,subtitle:t.string,linkedVideoData:t.string,content:t.object,contentClass:t.string,className:t.string,panelName:t.string,onCloseByX:t.func,onCloseByESC:t.func},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},closeByX:function(){n.isFunction(this.props.onCloseByX)&&this.props.onCloseByX(),this.close()},getKeyboardShortcuts:function(){return{esc:this.closeByESC}},closeByESC:function(){n.isFunction(this.props.onCloseByESC)?this.props.onCloseByESC():this.getEditorAPI().bi.event(r.events.welcomeVideoPanel.WELCOME_SCREEN_CLOSED,{panel_name:this.props.panelName,origin:"ESC"}),this.close()},handleShouldCloseOnBlur:function(){return this.getEditorAPI().bi.event(r.events.welcomeVideoPanel.WELCOME_SCREEN_CLOSED,{panel_name:this.props.panelName,origin:"outerClick"}),!0},getContent:function(e){var t=this.props.content;return t?s.translate(t[e]):""},getContentClass:function(){return this.props.contentClass||""},render:o})}),define("panels/focusPanels/exampleFocusPanel.rt",["react","lodash","panels/frames/focusPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{title:"Example Focus Panel",panelName:this.props.panelName,className:"example-focus-panel"},e.createElement("iframe",{className:"content-iframe",src:"http://www.w3schools.com"}))}}),define("panels/focusPanels/exampleFocusPanel",["create-react-class","panels/focusPanels/exampleFocusPanel.rt"],function(e,t){"use strict";return e({displayName:"exampleFocusPanel",render:t})}),define("panels/focusPanels/blogManagerPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"blog-manager-panel"},e.createElement(a,{panelName:this.props.panelName,className:"blog-manager-panel",shouldHideHeader:!0},e.createElement("iframe",{id:"blogManager",ref:"iframe",width:"100%",height:"100%",src:this.state.src,frameBorder:"0",allowFullScreen:!0})))}}),define("panels/focusPanels/blogManagerPanel",["reactDOM","create-react-class","prop-types","lodash","util","core","panels/focusPanels/blogManagerPanel.rt"],function(n,e,t,a,s,i,o){"use strict";return e({displayName:"blogManagerDialog",mixins:[s.postMessageMixin,i.mixins.editorAPIMixin],propTypes:{blogManagerAppPathType:t.string,api:t.object},getInitialState:function(){return{src:this.props.api.frameUrl}},componentWillMount:function(){this.setPostMessageHandler(null,this.onMessageFromDialog)},onMessageFromDialog:function(e){switch(e.type){case"ready":this.onReady();break;case"anchors":e.payload.pageId&&this.onAnchorsRequest(e.payload.pageId);break;case"cancel":void 0!==e.payload&&e.payload.postsUnchanged||this.props.api.reloadAppPartsMethod(),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}},onAnchorsRequest:function(e){var t=JSON.stringify({type:"anchors",payload:{anchorsData:this.props.api.getAnchorsByPage(e),pageId:e}});n.findDOMNode(this.refs.iframe).contentWindow.postMessage(t,"*")},onReady:function(){var e=JSON.stringify({type:"settings",payload:{isOpenFromSantaEditor:!0,themeData:this.props.api.themeData,themeDataSchema:this.props.api.themeDataSchema,WIXAPPS_EDITOR_STYLES:this.props.api.WIXAPPS_EDITOR_STYLES,CK_EDITOR_FONT_STYLES:this.props.api.CK_EDITOR_FONT_STYLES,CustomUsedFontsUrl:this.props.api.CustomUsedFontsUrl,FontsCssUrls:this.props.api.FontsCssUrls,FontsData:this.props.api.FontsData,FontsMetadata:this.props.api.FontsMetadata,pagesData:this.props.api.pagesData,currentPageId:this.props.api.currentPageId,charSet:this.props.api.charSet,siteUrl:this.props.api.siteUrl,isSitePublished:this.props.api.isSitePublished,imageOrganizerUrl:this.props.api.imageOrganizerUrl,urlFormat:this.props.api.urlFormat,blogPageTitle:this.props.api.blogPageTitle,singlePostLayout:this.props.api.singlePostLayout,siteTitle:this.props.api.siteTitle,isHeroImageEnabled:this.props.api.isHeroImageEnabled,isHttpsEnabled:this.props.api.isHttpsEnabled}});n.findDOMNode(this.refs.iframe).contentWindow.postMessage(e,"*")},render:o})}),define("panels/focusPanels/shoutOutTemplatesPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"shoutout-templates-panel"},e.createElement(a,{panelName:"panels.focusPanels.shoutOutTemplatesPanel",className:"shoutout-templates-panel",shouldHideHeader:!0,onClose:this.onClose},e.createElement("iframe",{id:"shoutOutTemplates",ref:"iframe",width:"100%",height:"100%",src:this.props.frameUrl,frameBorder:"0",allowFullScreen:!0})))}}),define("panels/focusPanels/shoutOutTemplatesPanel",["create-react-class","prop-types","lodash","core","util","panels/focusPanels/shoutOutTemplatesPanel.rt"],function(e,t,n,a,s,i){"use strict";var o={evid:91,src:36,endpoint:"shout",sampleRatio:0,fields:{is_first:"bool",msid:"guid",referral_info:"string"}};return e({displayName:"shoutOutDialog",mixins:[a.mixins.editorAPIMixin,s.postMessageMixin],propTypes:{frameUrl:t.object},onClose:function(){return this.getEditorAPI().bi.event(o,{is_first:!0,referral_info:"editor panel"}),!0},componentWillMount:function(){this.setPostMessageHandler(null,this._onMessageFromDialog)},_onMessageFromDialog:function(e){"cancel"===e.type&&this.getEditorAPI().panelManager.closePanelByName("panels.focusPanels.shoutOutTemplatesPanel")},render:i})}),define("panels/focusPanels/aviaryPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame","util"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,shouldHideHelp:!0,title:s.translate("AVIARY_PANEL_TITLE"),className:"aviary-panel",onClose:this.onCloseFrame},e.createElement("div",{className:"aviary-dialog"},e.createElement("div",{ref:"content",id:"aviary_dialog_editor_content_wrapper"}),e.createElement("div",{id:"message",className:t({hidden:!this.state.showMessage}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement("div",{className:"message-bg"},e.createElement("span",{className:t({hidden:null==this.state.counter}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),id:"progress"},e.createElement("span",{id:"counter"},this.state.counter,"%")),e.createElement("span",{id:"messageContent"},this.state.messageText),e.createElement("span",{id:"cancel-button",className:t({hidden:!this.state.showCancelButton}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onClick:this.onCancelClicked},s.translate("AVIARY_CANCEL_UPLOAD"))))))}}),define("panels/focusPanels/aviaryPanel",["reactDOM","create-react-class","prop-types","lodash","zepto","core","util","panels/focusPanels/aviaryPanel.rt","coreUtilsLib"],function(s,e,t,c,n,a,o,i,r){"use strict";var l=o.translate,p=o.serviceTopology.htmlEditorRootUrl;p=p?p.replace(/html\/editor\/?/,""):"http://editor.wix.com/";var u=o.serviceTopology.mediaServerRoot,d="//editor."+u,m="//0.static."+u+"/api/add_file",h="edited image",g={AVIARY_MISSING_ID_IN_SKIN:{errorCode:21030,desc:"Missing an id on this._skinParts.content, it is required for Aviary to work"},AVIARY_DIALOG_WRONG_DATA_TYPE:{errorCode:21031,desc:"Data is missing or Data Type is not an Image Data"},AVIARY_NOT_LOADED:{errorCode:21032,desc:"Aviary.js was not loaded after 5000ms"},AVIARY_FORCE_CLOSED:{errorCode:21033,desc:"Aviary dialog was not closed on first try, forced it to close on second try"},AVIARY_UPLOAD_GET_TICKET_FAILED:{errorCode:21034,params:{c1:"error message"},desc:"Failed on getting ticket for upload."},AVIARY_UPLOAD_TO_STATIC_FAILED:{errorCode:21035,params:{c1:"error message"},desc:"Uploading image to statics failed."},AVIARY_UPLOAD_UPDATE_MEDIA_FAILED:{errorCode:21036,params:{c1:"error message"},desc:"Updating private media with uploaded file failed."},AVIARY_RETURNED_AN_ERROR:{errorCode:21037,params:{c1:"error message",i1:"error code"},desc:"Aviary editor failed on external script error."},AVIARY_REACHED_INNER_SAVE_FUNCTION:{errorCode:21038,desc:"Aviary somehow called its inner save function, this does not supposed to happen."}},f=void 0;function P(e){var t={},n=e.imageLink.value,a=n.uri,s=/(^https?)|(^data)/.test(a)?"":"/static/media/",i=/(jpg$)|(jpeg$)/i.test(a)?"image/jpeg":"image/png";return(1500<n.width||1500<n.height)&&(a+="_1500"),t.tmpImageSrc=p+s+a,t.tmpImageType=i,t}function _(e,t,n,a,s,i){e=e||"GET";var o=new window.XMLHttpRequest;o.open(e,t,!0),o.onreadystatechange=function(){4===o.readyState&&(200===o.status||304===o.status?s(o):a(o))},o.setRequestHeader("Content-type",i||"text/plain"),o.send(n)}function b(n,a){var e,s,t;e=d+"/media/tickets/get",s=function(e){var t=e.responseValue;if(!t)return T("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+g.AVIARY_UPLOAD_GET_TICKET_FAILED.errorCode),S.call(this,!0),!1;(function(e,t,n){var a=y,s=function(){var e=this.responseXML||this.responseText;n(a(e))},i={datauri:t,ut:e,s:"media"},o=[],r=void 0;for(r in i)i.hasOwnProperty(r)&&o.push(r+"="+i[r]);o=o.join("&");var l={onLoad:s,onError:s,onTimeout:s,onUploadProgress:function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);this.setState({counter:t})}}.bind(this),onAbort:this.onAbort};(function(e,t,n,a,s,i){e=e||"GET",a=a||{};var o=!0,r="undefined"!=typeof XDomainRequest;r?(this._xhrObject=new window.XDomainRequest,o=void 0):this._xhrObject=new window.XMLHttpRequest;var l=this._xhrObject;l.open(e,t,o),l.timeout=3e5,l.onload=a.onLoad||c.noop,l.onerror=a.onError||c.noop,l.ontimeout=a.onTimeout||c.noop,l.onprogress=a.onProgress||c.noop,l.upload&&l.upload.addEventListener("progress",a.onUploadProgress||c.noop,!1);r||(l.onabort=a.onAbort||c.noop,l.setRequestHeader("Content-type",s||"text/plain"),l.withCredentials=Boolean(i));l.send(n)}).call(this,"POST",m,o,l,"application/x-www-form-urlencoded",!1)}).call(this,t,n,a)}.bind(this),_("GET",e+"?accept=json",null,t=function(t){try{t=JSON.parse(t.responseText)}catch(e){t.status="error",t.errorDescription="Parse error: ticket returned unexpected response"}s(t)},t,"text/plain")}function E(){var e=this.getEditorAPI(),t=e.selection.getSelectedComponents(),n=e.components.layout.get(t);return n.width+":"+n.height}function y(e){var t=void 0,n=void 0,a=void 0;if("string"==typeof e?(a=new window.Element("div")).innerHTML=e:a=e,n=a?(t=a.querySelector("upload")).getAttribute("success"):!(t={getAttribute:function(){return"No Response Error"}}),o.stringUtils.isTrue(n)){var s=a.querySelector("properties"),i=a.querySelector("sys_meta");return{status:t.getAttribute("errorDescription"),originalName:i.getAttribute("original_file"),mimeType:i.getAttribute("mime_type"),fileUrl:i.getAttribute("file_url"),iconUrl:i.getAttribute("icon_url"),fileSize:i.getAttribute("file_size"),width:i.getAttribute("width"),height:i.getAttribute("height"),ver:i.getAttribute("ver"),fileName:s.getAttribute("file_name")}}return{status:"error",origin:t.getAttribute("origin"),errorCode:t.getAttribute("errorCode"),errorDescription:t.getAttribute("errorDescription")}}function C(e){if("error"===(e=e||{}).status||"timeout"===e.status)return S.call(this,!1),T("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+g.AVIARY_UPLOAD_TO_STATIC_FAILED.errorCode),!1;var t=new Date,n=[t.getFullYear(),t.getMonth()+1,t.getDate(),[t.getHours(),t.getMinutes(),t.getSeconds()].join(":")].join("-");this._newImageUri=e.fileName,e.originalName=(this.props.imageLink.value.title||"Edited Image")+" "+n,function(e){var t=(s=e,i="<mediaItemList>",i+="<mediaItem",i+=' mediaType="picture',i+='" componentType="photo',i+='" fileName="'+s.fileName,i+='" originalFileName="'+s.originalName,i+='" fileSize="'+s.fileSize,i+='" width="'+s.width,i+='" height="'+s.height,i+='" mimeType="'+s.mimeType,i+='" iconURL="'+s.iconUrl,i+='" version="'+s.ver,i+='" tags="'+h,i+='" />\n',i+="</mediaItemList>"),n=d+"/media/private/add",a=function(){(function(){(function(){if(!this._newImageSize||!this._newImageUri)return;var e=this.props.imageLink.value.originalImageDataRef;e||delete(e=c.cloneDeep(this.props.imageLink.value)).originalImageDataRef;this.props.imageLink.requestChange({height:this._newImageSize.height,width:this._newImageSize.width,uri:this._newImageUri,originalImageDataRef:e}),this._newImageSize=null,this._newImageUri=null}).call(this),function(){this.setState({disableCloseButton:!1})}.call(this),v.call(this,{result:"OK"})}).call(this)}.bind(this);var s,i;_("POST",n,t,function(){return T("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+g.AVIARY_UPLOAD_UPDATE_MEDIA_FAILED.errorCode),!1},a,"application/xml")}.call(this,e)}function v(e){e=e||{},this.state.disableCloseButton||(this._aviaryCloseCause=e.result||"CANCEL",f.close(),this._forceClose||this.setTimeoutNamed("close",function(){this._forceClose=!0}.bind(this),2e3))}function I(e,t){var n=void 0;n=e?{messageText:e,showMessage:!0}:{showMessage:!1},t?(n.showCancelButton=!0,window.XDomainRequest||(n.counter=0)):c.merge(n,{showCancelButton:!1,counter:null}),this.setState(n)}function S(e,t,n){f&&window.AV&&window.AV.paintWidgetInstance&&(e?(f.disableControls(),f.showWaitIndicator(),this.setState({disableCloseButton:!0}),I.call(this,t,n)):(f.enableControls(),f.hideWaitIndicator(),this.setState({disableCloseButton:!1,showMessage:!1})))}function T(e,t,n){var a=t&&l(t);(window&&window.confirm||function(){})(a,n)}var N={reactFunctions:{},onLoad:A("onLoad"),onAviarySave:A("onAviarySave"),onAviaryClose:A("onAviaryClose"),onAviaryReady:A("onAviaryReady"),onAviarySaveButtonClick:A("onAviarySaveButtonClick"),onError:A("onError")};function A(e){return function(){N.reactFunctions[e]&&N.reactFunctions[e]()}}return e({displayName:"aviaryPanel",mixins:[o.postMessageMixin,r.timersMixins.timeoutsMixin,a.mixins.editorAPIMixin],propTypes:{imageLink:t.object,onDialogResult:t.func,editorAPI:t.object.isRequired},getInitialState:function(){var e=P(this.props);return c.merge(e,{tmpImageId:"some_random_id_"+Date.now(),disableCloseButton:!0,showMessage:!0,messageText:null,showCancelButton:!1,counter:null}),e},componentWillReceiveProps:function(e){this.setState(P(e))},componentDidMount:function(){(function(){var e;N.reactFunctions={onLoad:this.onLoad,onAviarySave:this.onAviarySave,onAviaryClose:this.onAviaryClose,onAviaryReady:this.onAviaryReady,onAviarySaveButtonClick:this.onAviarySaveButtonClick,onError:this.onError},f?N.onLoad():f=new window.Aviary.Feather({apiKey:"57b23071b",apiVersion:3,tools:"crop,orientation,enhance,effects,frames,brightness,contrast,saturation,warmth,focus,sharpness,draw,redeye,whiten,blemish,stickers,text",maxSize:1500,theme:"minimum",noCloseButton:!0,displayImageSize:!0,onLoad:N.onLoad,onSave:N.onAviarySave,onClose:N.onAviaryClose,onReady:N.onAviaryReady,onSaveButtonClicked:N.onAviarySaveButtonClick,onError:N.onError,appendTo:"aviary_dialog_editor_content_wrapper",language:(e=o.languages.getLanguageCode(),e?e.toLowerCase():"en"),launchDelay:0})}).call(this),this.setTimeoutNamed("aviaryIsDeadTimer",function(){this.setState({disableCloseButton:!1})}.bind(this),1e4),I.call(this,l("AVIARY_LOAD_MESSAGE","Loading Image Editor..."),!1)},componentWillMount:function(){var e=n("<img/>",{id:this.state.tmpImageId,src:this.state.tmpImageSrc,type:this.state.tmpImageType,crossOrigin:""});this.image=e.get(0)},launchAviary:function(){var e=l("AVIARY_ORIGINAL_ASPECT");f.launch({image:this.state.tmpImageId,cropPresetDefault:e,cropPresets:[[e,E.call(this)],"Custom"]})},onLoad:function(){var e=l("AVIARY_ORIGINAL_ASPECT");f.launch({image:this.image,cropPresetDefault:e,cropPresets:[[e,E.call(this)],"Custom"]})},onAviarySave:function(){return!1},onAviaryClose:function(){this.clearTimeoutNamed("close"),this._forceClose=!1,this.props.onDialogResult&&this.props.onDialogResult(this._aviaryCloseCause)},onAviaryReady:function(){this.clearTimeoutNamed("aviaryIsDeadTimer"),this.setState({showMessage:!1,disableCloseButton:!1})},onAviarySaveButtonClick:function(){var e=JSON.parse(f.getActionList()),t=1<c.get(e,"actionlist.length",0),n=s.findDOMNode(this.refs.content).querySelector("#avpw_canvas_element"),a="";return t?(S.call(this,!0,l("AVIARY_WAIT_MESSAGE","Uploading image, please wait..."),!0),a=encodeURIComponent(n.toDataURL(this.state.tmpImageType)),this._newImageSize={width:n.width,height:n.height},b.call(this,a,C.bind(this))):v.call(this,{result:"CANCEL"}),!1},onProgress:function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);this.setState({counter:t})}},onAbort:function(){return S.call(this,!1),this._xhrObject=null,!1},onError:function(e){return T(0,"ERROR_AVIARY_GENERAL_MESSAGE","Codes: "+g.AVIARY_RETURNED_AN_ERROR.errorCode+", "+e.code),!1},onCloseFrame:function(){v.call(this)},componentWillUnmount:function(){v.call(this)},onCancelClicked:function(){this._xhrObject?(this._xhrObject.abort(),window.XDomainRequest&&this.onAbort()):S.call(this,!1)},render:function(){return i.call(this)}})}),define("panels/focusPanels/organizeImagesPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame","util","santa-editor-symbols"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,helpId:this.state.helpId,className:"organize-images-panel",shouldNotCloseOnBlur:!0,shouldHideHeader:!0,onClose:this.onPanelClose,width:Math.round(.8*window.innerWidth).toString(),height:Math.round(.8*window.innerHeight).toString()},e.createElement("iframe",{id:"organizeImages",ref:"iframe",className:t({hidden:!this.state.show,transition:!0}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onLoad:this.onLoad,width:"100%",height:"100%",src:this.getFrameUrl(),frameBorder:"0",allowTransparency:!0}),e.createElement(n.preloader,{ref:"preloader",className:t({hidden:this.state.show,transition:!0}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")}))}}),define("panels/focusPanels/organizeImagesPanel",["reactDOM","create-react-class","prop-types","lodash","util","panels/focusPanels/organizeImagesPanel.rt","pms","core","helpIds","coreUtilsLib","coreBi","constants","stateManagement"],function(e,t,n,p,u,a,s,i,o,r,l,c,d){"use strict";var m={ICON_SOCIAL:"social_icons",IMAGE:"gallery_image"},h="socialIcons",g=l.events.organizeImages,f=u.hoc,P=f.connect,_=f.STORES.EDITOR_API;function b(){this.getEditorAPI().bi.event(g.ORGIMAGES_DIALOG_LOADED,{c1:"new Organize Images"}),this._isReady=!0;var e=function(){return{images:this.props.imageDatas,translation:u.imageOrganizerUtils.getTranslation(this.props.galleryType),topology:u.serviceTopology,isPreset:this.props.isPreset,userSets:this.userSets}}.call(this);this._pms.send("set",e)}function E(e){var t=e.data&&e.data.helpId;if(t){var n={panel_name:this.props.panelName,origin:c.BI.HELP.ORIGIN.PANEL,component:this.getEditorAPI().selection.getSelectedComponentType()};this.getEditorAPI().panelManager.openHelpCenter(t,null,null,n)}}function y(){var e=C.call(this),t=void 0,n=void 0;t=this.props.galleryType===h?(n="6377d68a-a81f-4fd7-a675-f5a79f7e7ea9",u.translate("ORGANIZE_ICONS_DIALOG_TITLE")):(n=o.EXTERNAL.ORGANIZE_IMAGES,u.translate("OrganizeImages_IMAGES_DIALOG_TITLE")),this.setState({helpId:n,title:t,show:!0}),e.contentWindow.focus()}function C(){return e.findDOMNode(this.refs.iframe)}function v(e){var t=this.props.createImageDataItem();return p.merge(t,e),t}function I(e){var t=e.data,o=this.props.imageDatas,r=void 0,n=p.map(t,p.bind(function(e){var t,n,a,s,i;return r=p.includes(e.id,"new_")?v.call(this,e.data):(t=o,n=e,a=void 0,(s=p.find(t,{id:n.id}))&&(a=p.merge(s.data,n.data)),a),i=r,100<p.get(i,"title.length",0)&&(i.title=i.title.substring(0,100)),r},this));this.props.imagesChanged(n)}function S(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}function T(e){var t=this.getEditorAPI(),n=e.data,a=t.bi.event;r.log.info("bi events",e),p.forOwn(n,function(e,t){a(g[t],n[t])})}function N(e){var t=this.getEditorAPI(),n=e.data,a=n.params||{};r.log.info("bi events",e),t.bi.event(g[n.name],a)}function A(t){t=t.data;var n=this.getEditorAPI();n.openLinkPanel({defaultLinkType:"ExternalLink",link:t.data.link,callback:function(e){e&&e.type||(e=null),this._pms.send("setLink",{link:e,linkText:e?u.link.getLinkValueAsString(n,e,!0):"",imgData:t,id:t.id})}.bind(this)})}function k(e,n,t){var a=this,s=void 0,i={title:"ORGANIZE_IMAGES_MEDIA_MNGR_TITLE",submit:"ORGANIZE_IMAGES_MEDIA_MNGR_SUBMIT"},o=this.getEditorAPI().mediaServices,r=o.mediaManager;switch(this.props.galleryType){case h:p.forEach(i,function(e,t){i[t]=e.replace("IMAGES","ICONS")}),s=r.categories.ICON_SOCIAL;break;default:s=r.categories.IMAGE}var l=e?"_MANY":"_ONE",c=m[s];r.open(s,c,{multiSelect:e,translation:{title:u.translate(i.title+l),submitButton:t?u.translate("MMGR_submitbutton_gallery_uploads_choose"):u.translate("MMGR_submitbutton_gallery_uploads_add")},callback:function(e,t){n.call(a,e,t),o.setFocusToEditor()}})}var L=0;function D(){return"new_"+L++}var M=t({displayName:"organizeImagesPanel",mixins:[u.postMessageMixin,i.mixins.editorAPIMixin],propTypes:{imageDatas:n.arrayOf(n.object).isRequired,isPreset:n.bool.isRequired,galleryType:n.oneOf(["images",h]).isRequired,imagesChanged:n.func.isRequired,createImageDataItem:n.func.isRequired},getInitialState:function(){return this.userSets=d.editorPlugins.userPreferences.selectors.getGlobalUserPreferences("OrganizeImages")(this.getEditorAPI().store.getState()),this._pms=new s({connectionID:"OrganizeImages"}),this._pms.on("ready",b,this),this._pms.on("setup",y,this),this._pms.on("closed",S,this),this._pms.on("openLinkDialog",A,this),this._pms.on("save",I,this),this._pms.on("bi",N,this),this._pms.on("biChanges",T,this),this._pms.on("openHelpCenter",E,this),this._pms.on("openMediaGallery",this.openMediaGallery,this),this._pms.on("openMediaGalleryForReplace",this.openMediaGalleryForReplace,this),{show:!1}},openMediaGallery:function(){k.call(this,!0,function(e){if(e){var n=[];p.forEach(e,p.bind(function(e){var t=v.call(this,{uri:e.fileName,height:e.height,width:e.width,title:e.title||e.fileName});n.push({id:D(),data:t,linkText:""})},this)),this._pms.send("add",n)}},!1)},openMediaGalleryForReplace:function(e){var t=e.data.position;k.call(this,!1,function(e){if(e){var n=[];p.forEach(e,p.bind(function(e){var t=v.call(this,{uri:e.fileName,height:e.height,width:e.width,title:e.title||e.fileName});n.push({id:D(),data:t,linkText:""})},this)),n.length<=0||this._pms.send("replace",{position:t,data:n[0]})}},!0)},getFrameUrl:function(){return u.imageOrganizerUtils.getFrameUrl(this.props.galleryType)},componentDidMount:function(){this._pms.setTargetWindow(C.call(this).contentWindow),C.call(this).addEventListener("load",this.onFrameLoad)},onFrameLoad:function(){this._pms.on("setUserSets",this.setUserSettings,this)},setUserSettings:function(e){var t=this.userSets=e.data;this.getEditorAPI().store.dispatch(d.editorPlugins.userPreferences.actions.setGlobalUserPreferences("OrganizeImages",p.assign(t,{saveNow:!0}))).catch(p.noop)},onPanelClose:function(){var e=this.getEditorAPI();return!this._isReady||(this._pms.send("saveAndClose"),e.bi.event(g.ORGIMAGES_CLICK_CLOSE),!1)},render:a});var O=P(_,function(e){var t,n,a=e.editorAPI,s=a.selection.getSelectedComponents(),i=a.components.data.get(p.head(s));return{imageDatas:(t=i,n=a,p.map(t.items,function(e){var t=e.link;return{id:D(),data:e,linkText:t?u.link.getLinkValueAsString(n,t,!0):""}}))}})(M);return O.pure=M,O}),define("panels/focusPanels/popupTemplateMapper",["lodash"],function(a){"use strict";return function(e,t){var n=e.editorAPI;return{close:a.partial(n.panelManager.closePanelByName,t.panelName),openHelpCenter:n.panelManager.openHelpCenter,selectedComponentType:n.selection.getSelectedComponentType(),sendBi:n.bi.event}}}),define("panels/focusPanels/popupTemplate.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","baseUILib","santa-editor-symbols","util"],function(a,t,n,s,i,o,r){"use strict";return function(){return function(){var e=r.translate;return a.createElement(n,{shouldHideHeader:!0,isSingleInstance:this.props.isSingleInstance,panelName:this.props.panelName,shouldNotCloseOnBlur:this.props.shouldNotCloseOnBlur},a.createElement("div",{className:"popup-template-panel "+(this.props.className||"")},a.createElement("div",{className:"panel-header dark"},a.createElement("button",{className:"close",onClick:this.props.close},a.createElement(o.symbol,{name:"headerCloseButton"})),this.props.h1text?a.createElement("h1",{key:"h1text"},e(this.props.h1text)):null,this.props.h2text?a.createElement("h2",{key:"h2text"},e(this.props.h2text)):null,a.createElement("div",{className:"image "+(this.props.imageClassName||"")},this.props.symbolName?a.createElement(s.symbol,{key:"symbol",name:this.props.symbolName,className:"popup-symbol"}):null)),a.createElement("div",{className:"content"},a.createElement("div",{className:"panel-text"},a.createElement("span",{},e(this.props.bodyText)+" "),this.props.helpId?a.createElement("span",{key:"learnMoreLink",className:"learn-more-link",onClick:this.openLearnMore},e("Notification_Box_Learn_More")):null),a.createElement("div",{className:"bottom-controls"},this.props.hideDontShowCheckbox?null:a.createElement(i.Checkbox,{value:this.props.dontShowAgain,onChange:this.handleDontShowAgainClick,key:"dont-show-again-checkbox",labelAfterSymbol:!0,className:"dont-show-again",label:"Notification_Box_Dont_Show_Again"}),this.hasCustomButtons()?null:a.createElement(s.button,{key:"hasNoCustomButtons",className:"btn-ok btn-md",onClick:this.props.close,label:this.props.btnText||"Notification_Box_Got_It"}),this.hasCustomButtons()?a.createElement.apply(this,["span",{key:"hasCustomButtons"},t.map(this.props.buttons,function(e,t,n){return a.createElement(i.Button,{key:n,className:t.className,onClick:this.handleBtnClick.bind(this,t),automationId:t.automationId},t.icon?a.createElement(o.symbol,{key:"symbol-"+t.icon,className:t.label?"symbol-with-label":"",name:t.icon}):null,a.createElement("span",{"data-hint-id":t.hintId},"\n                            ",e(t.label),"\n                        "))}.bind(this,e))]):null))))}.apply(this,[])}}),define("panels/focusPanels/popupTemplate",["create-react-class","prop-types","lodash","coreBi","util","higherOrderComponents","panels/focusPanels/popupTemplateMapper","constants","panels/focusPanels/popupTemplate.rt"],function(e,t,s,n,a,i,o,r,l){"use strict";var c=a.hoc,p=c.connect,u=c.renderWhenMutated,d=c.STORES.EDITOR_API;function m(e,t,n){var a="Warning: Failed propType: ";return!e.symbolName^!e.imageClassName?e[t]&&!s.isString(e[t])?new Error(a+"Invalid prop `"+t+"` of type `"+_typeof(e[t])+"` supplied to `"+n+"`, expected `string`."):void 0:new Error(a+n+" must have either symbolName or imageClassName but not both.")}var h=e({displayName:"popupTemplate",propTypes:{close:t.func.isRequired,openHelpCenter:t.func.isRequired,sendBi:t.func.isRequired,panelName:t.string.isRequired,h1text:t.string,h2text:t.string,symbolName:m,imageClassName:m,bodyText:t.string,btnText:t.string,buttons:t.arrayOf(t.object),helpId:t.string,selectedComponentType:t.string,dontShowAgain:t.bool,toggleDontShowAgain:t.func.isRequired,hideDontShowCheckbox:t.bool,shouldNotCloseOnBlur:t.bool},openLearnMore:function(){var e={component:this.props.selectedComponentType,panel_name:this.props.panelName,origin:r.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.props.openHelpCenter(this.props.helpId,null,e)},handleBtnClick:function(e){s.isFunction(e.onClick)&&e.onClick(),this.props.close()},hasCustomButtons:function(){return this.props.buttons&&this.props.buttons.length},handleDontShowAgainClick:function(){this.props.toggleDontShowAgain(),this.props.sendBi(n.events.commonControls.dont_show_again_click,{panel_name:this.props.panelName,toggle:this.props.dontShowAgain})},render:l}),g=p(d,o)(u(h)),f=i.linkUserPreferences()(g);return f.pure=h,f}),define("panels/focusPanels/outOfGridMobilePanel.rt",["react","lodash","constants","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:"Notification_Box_Out_Grid_Mobile_Title",h2text:"Notification_Box_Out_Grid_Mobile_Subtitle",symbolName:"outOfGridMobile",bodyText:"Notification_Box_Out_Grid_Mobile_Text",helpId:"769b8807-30b7-4ee4-8a7b-93674099732f",dontShowAgainKey:n.USER_PREFS.OUT_OF_GRID.MOBILE.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}}),define("panels/focusPanels/outOfGridMobilePanel",["create-react-class","core","panels/focusPanels/outOfGridMobilePanel.rt"],function(e,t,n){"use strict";return e({displayName:"outOfGridMobilePanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/outOfGridDesktopPanel.rt",["react","lodash","constants","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,className:"out-of-grid-desktop-panel",h1text:"Notification_Box_Out_Page_Gridlines_Title",imageClassName:"page-out-of-grid",bodyText:"Notification_Box_Out_Page_Gridlines_Text",helpId:"b712fa83-f939-4ec4-ab68-b7f968d90fab",dontShowAgainKey:n.USER_PREFS.OUT_OF_GRID.DESKTOP.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}}),define("panels/focusPanels/outOfGridDesktopPanel",["create-react-class","core","panels/focusPanels/outOfGridDesktopPanel.rt"],function(e,t,n){"use strict";return e({displayName:"outOfGridDesktopPanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/outOfContainerGridPanel.rt",["react","lodash","constants","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:"Notification_Box_Out_Strip_Gridlines_Title",imageClassName:"container-out-of-grid",bodyText:"Notification_Box_Out_Strip_Gridlines_Text",helpId:"b712fa83-f939-4ec4-ab68-b7f968d90fab",dontShowAgainKey:n.USER_PREFS.OUT_OF_GRID.CONTAINER.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}}),define("panels/focusPanels/outOfContainerGridPanel",["create-react-class","core","panels/focusPanels/outOfContainerGridPanel.rt"],function(e,t,n){"use strict";return e({displayName:"outOfContainerGridPanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/dragToHeaderPanel.rt",["react","lodash","constants","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:"Notification_Box_Header_Added_Title",h2text:"Notification_Box_Header_Added_Subtitle",symbolName:"showOnAllPages",bodyText:"Notification_Box_Header_Added_Text",helpId:"db639aa7-f012-4526-9390-ef466c95f19d",dontShowAgainKey:n.USER_PREFS.DRAG_TO_HEADER.DONT_SHOW_AGAIN,userPrefType:n.USER_PREFS.TYPES.SITE})}}),define("panels/focusPanels/dragToHeaderPanel",["create-react-class","core","panels/focusPanels/dragToHeaderPanel.rt"],function(e,t,n){"use strict";return e({displayName:"dragToHeaderPanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/attachToSOSPPanelMapper",["constants","stateManagement"],function(n,a){"use strict";var s=function(e,t,n){return n.editorAPI};return{mapStateToProps:function(e){var t=e.editorAPI;return{doNotShowAgain:!!a.editorPlugins.userPreferences.selectors.getSiteUserPreferences(n.USER_PREFS.SOSP.PANELS.ATTACH_DO_NOT_SHOW_AGAIN)(t.store.getState())}},mapDispatchToProps:function(e){var t=e(s);return{closePanel:t.panelManager.closePanelByName,openHelpCenter:t.panelManager.openHelpCenter,setDoNotShowAgain:function(){e(a.editorPlugins.userPreferences.actions.setSiteUserPreferences(n.USER_PREFS.SOSP.PANELS.ATTACH_DO_NOT_SHOW_AGAIN,!0))}}}}}),define("panels/focusPanels/attachToSOSPPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib","santa-editor-symbols","util"],function(t,e,n,a,s,i){"use strict";return function(){return function(){var e=i.translate;return t.createElement(n,{ref:"panelFrame",className:"popup-medium attach-to-sosp-panel",shouldHideHeader:!0,keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},t.createElement(a.Composites.BigPanelHeader,{},t.createElement(a.PanelHeaderCenteredText,{title:"Notification_Box_MembersBar_Added_Title",subtitle:"Notification_Box_MembersBar_Added_Subtitle",titleType:"T16",onClose:this.onClose}),t.createElement(a.PanelHeaderIllustration,{blueStripHeight:92},t.createElement("img",{className:"illustration",src:this.getIllustrationSrc()}))),t.createElement(a.Composites.PanelContent,{},t.createElement(a.Composites.RichText,{},t.createElement(a.RichText,{type:"T06"},t.createElement("p",{},e("Notification_Box_MembersBar_Added_Text"),"\n                    ",t.createElement("a",{onClick:this.onLearnMoreClick}," ",e("Notification_Box_Learn_More")))))),t.createElement(a.Composites.ActionSetHorizontal,{},t.createElement(a.Checkbox,{value:this.state.doNotShowAgain,label:"Notification_Box_Dont_Show_Again",labelAfterSymbol:!0,onChange:this.onDoNotShowAgainClick}),t.createElement(a.Button,{className:"btn-md",onClick:this.onClose},t.createElement("span",{},e("Notification_Box_Got_It")))))}.apply(this,[])}}),define("panels/focusPanels/attachToSOSPPanel",["create-react-class","prop-types","util","helpIds","panels/focusPanels/attachToSOSPPanelMapper","panels/focusPanels/attachToSOSPPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=n.hoc,r=o.connect,l=o.renderWhenMutated,c=o.STORES.EDITOR_API,p=e({displayName:"AttachDetachSOSPPanel",propTypes:{panelName:t.string.isRequired,closePanel:t.func.isRequired,openHelpCenter:t.func.isRequired,doNotShowAgain:t.bool.isRequired,setDoNotShowAgain:t.func.isRequired},getInitialState:function(){return{doNotShowAgain:this.props.doNotShowAgain}},getKeyboardShortcuts:function(){return{esc:this.onClose}},getIllustrationSrc:function(){var e=2===n.browserUtil.getDevicePixelRatio()?"panels/focusPanels/addRemoveFromBarRetina.gif":"panels/focusPanels/addRemoveFromBar.gif";return n.media.getMediaUrl(e)},onClose:function(){this.state.doNotShowAgain&&this.props.setDoNotShowAgain(),this.props.closePanel(this.props.panelName)},onLearnMoreClick:function(){this.props.openHelpCenter(a.LEARN_MORE.SOSP_ATTACH_PANEL)},onDoNotShowAgainClick:function(){this.setState({doNotShowAgain:!this.state.doNotShowAgain})},render:i});return r(c,s.mapStateToProps,s.mapDispatchToProps)(l(p))}),define("panels/focusPanels/detachedFromSOSPPanelMapper",["constants","stateManagement"],function(n,a){"use strict";var s=function(e,t,n){return n.editorAPI};return{mapStateToProps:function(e){var t=e.editorAPI;return{doNotShowAgain:!!a.editorPlugins.userPreferences.selectors.getSiteUserPreferences(n.USER_PREFS.SOSP.PANELS.DETACH_DO_NOT_SHOW_AGAIN)(t.store.getState())}},mapDispatchToProps:function(e){var t=e(s);return{closePanel:t.panelManager.closePanelByName,openHelpCenter:t.panelManager.openHelpCenter,setDoNotShowAgain:function(){e(a.editorPlugins.userPreferences.actions.setSiteUserPreferences(n.USER_PREFS.SOSP.PANELS.DETACH_DO_NOT_SHOW_AGAIN,!0))}}}}}),define("panels/focusPanels/detachedFromSOSPPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib","santa-editor-symbols","util"],function(t,e,n,a,s,i){"use strict";return function(){return function(){var e=i.translate;return t.createElement(n,{ref:"panelFrame",className:"popup-medium detached-from-sosp-panel",shouldHideHeader:!0,keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},t.createElement(a.Composites.BigPanelHeader,{},t.createElement(a.PanelHeaderCenteredText,{title:"Notification_Box_MemberSidebar_Move_Element_Title",subtitle:"Notification_Box_Membersidebar_Move_Element_Subtitle",titleType:"T16",onClose:this.onClose}),t.createElement(a.PanelHeaderIllustration,{blueStripHeight:92},t.createElement("img",{className:"illustration",src:this.getIllustrationSrc()}))),t.createElement(a.Composites.PanelContent,{},t.createElement(a.Composites.RichText,{},t.createElement(a.RichText,{type:"T06"},t.createElement("p",{},e("Notification_Box_Membersidebar_Move_Body"),"\n                    ",t.createElement("a",{onClick:this.onLearnMoreClick},e("Notification_Box_Membersidebar_Move_Link")))))),t.createElement(a.Composites.ActionSetHorizontal,{},t.createElement(a.Checkbox,{value:this.state.doNotShowAgain,label:"Notification_Box_Dont_Show_Again",labelAfterSymbol:!0,onChange:this.onDoNotShowAgainClick}),t.createElement(a.Button,{className:"btn-md",onClick:this.onClose},t.createElement("span",{},e("Notification_Box_Membersidebar_Move_Close")))))}.apply(this,[])}}),define("panels/focusPanels/detachedFromSOSPPanel",["create-react-class","prop-types","util","helpIds","panels/focusPanels/detachedFromSOSPPanelMapper","panels/focusPanels/detachedFromSOSPPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=n.hoc,r=o.connect,l=o.renderWhenMutated,c=o.STORES.EDITOR_API,p=e({displayName:"DetachedFromSOSPPanel",propTypes:{panelName:t.string.isRequired,closePanel:t.func.isRequired,openHelpCenter:t.func.isRequired,doNotShowAgain:t.bool.isRequired,setDoNotShowAgain:t.func.isRequired},getInitialState:function(){return{doNotShowAgain:this.props.doNotShowAgain}},getKeyboardShortcuts:function(){return{esc:this.onClose}},getIllustrationSrc:function(){var e=2===n.browserUtil.getDevicePixelRatio()?"panels/focusPanels/addRemoveFromBarRetina.gif":"panels/focusPanels/addRemoveFromBar.gif";return n.media.getMediaUrl(e)},onClose:function(){this.state.doNotShowAgain&&this.props.setDoNotShowAgain(),this.props.closePanel(this.props.panelName)},onLearnMoreClick:function(){this.props.openHelpCenter(a.LEARN_MORE.SOSP_DETACH_PANEL)},onDoNotShowAgainClick:function(){this.setState({doNotShowAgain:!this.state.doNotShowAgain})},render:i});return r(c,s.mapStateToProps,s.mapDispatchToProps)(l(p))}),define("panels/focusPanels/spotifySearchFocusPanel.rt",["react","lodash","panels/frames/focusPanelFrame","helpIds"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{ref:"focusPanelFrame",title:this.translateIfNeeded("Spotify_Player_Settings_Search"),panelName:this.props.panelName,selectedComponentType:this.props.selectedComponentType,className:"spotify-search-panel",helpId:a.EXTERNAL.SEARCH_SPOTIFY},e.createElement("iframe",{className:"content-iframe",src:this.props.iframeSrc}))}}),define("panels/focusPanels/spotifySearchFocusPanel",["create-react-class","lodash","core","util","panels/focusPanels/spotifySearchFocusPanel.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"spotifySearch",mixins:[n.mixins.editorAPIMixin,a.translationMixin,a.postMessageMixin],render:s,componentDidMount:function(){this.setPostMessageHandlerNamed("spotifySearch",this.props.id,this.onMessageFromDialog)},onMessageFromDialog:function(e){t.isFunction(this.props.callback)&&this.props.callback(e),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}})}),define("panels/focusPanels/iTunsLinkMaker.rt",["react","lodash","panels/frames/focusPanelFrame","helpIds"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{title:this.translateIfNeeded("iTunes_Link_Maker_Title"),panelName:this.props.panelName,helpId:a.EXTERNAL.SEARCH_ITUNES,className:"itunes-link-maker"},e.createElement("iframe",{className:"content-iframe",src:"https://linkmaker.itunes.apple.com"}))}}),define("panels/focusPanels/iTunsLinkMaker",["create-react-class","lodash","util","panels/focusPanels/iTunsLinkMaker.rt"],function(e,t,n,a){"use strict";return e({displayName:"iTunesLinkMaker",mixins:[n.translationMixin],render:a})}),define("panels/focusPanels/pageAppInstallingPanelMapper",[],function(){"use strict";return function(e){var t=e.editorAPI;return{closePanel:t.panelManager.closePanelByName,openHelpCenter:t.panelManager.openHelpCenter}}}),define("panels/focusPanels/userMessageMediumPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib","santa-editor-symbols"],function(n,e,t,a,s){"use strict";return function(){return n.createElement(t,{ref:"panelFrame",shouldHideHeader:!0,className:"member-area-added-panel popup-medium",shouldNotCloseOnBlur:this.shouldNotCloseOnBlur(),keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},n.createElement(a.Composites.BigPanelHeader,{},n.createElement(a.PanelHeaderCenteredText,{title:this.getTitleText(),subtitle:this.getSubtitleText(),shouldTranslate:!1,onClose:this.onClose}),n.createElement(a.PanelHeaderIllustration,{blueStripHeight:92},this.getIllustrationSrc()?n.createElement("img",{className:"illustration",src:this.getIllustrationSrc(),alt:this.getIllustrationAlt(),key:"illustrationImg"}):null,!this.getIllustrationSrc()&&this.illustrationSymbol()?n.createElement(s.symbol,{name:this.illustrationSymbol(),key:"illustrationSymbol"}):null)),n.createElement.apply(this,[a.Composites.PanelContent,{},e.map(this.getBodyTexts(),function(e,t){return n.createElement(a.Composites.RichText,{},n.createElement(a.RichText,{type:"T06"},n.createElement("p",{},e)))}.bind(this))]),n.createElement(a.Composites.ActionSetHorizontal,{},n.createElement(a.Button,{onClick:this.onClose,disabled:this.isCloseButtonDisabled(),className:"btn-md"},n.createElement("span",{},this.getCloseButtonText()))))}}),define("panels/focusPanels/pageAppInstalling",["create-react-class","prop-types","util","panels/focusPanels/pageAppInstallingPanelMapper","panels/focusPanels/userMessageMediumPanel.rt"],function(e,t,n,a,s){"use strict";var i=n.hoc,o=i.connect,r=i.renderWhenMutated,l=i.STORES.EDITOR_API,c=e({displayName:"pageAppInstallingPanel",mixins:[n.translationMixin],propTypes:{closePanel:t.func.isRequired,isInstalling:t.bool.isRequired,appName:t.string.isRequired,panelName:t.string.isRequired},getTitleText:function(){var e={appName:this.props.appName};return this.translateTemplate("tpa_messages_new_page_added_popup_title",e)},getSubtitleText:function(){return this.translateTemplate("tpa_messages_new_page_added_popup_subtitle",{})},getBodyTexts:function(){var e={appName:this.props.appName};return[this.translateTemplate("tpa_messages_new_page_added_popup_body",e)]},getCloseButtonText:function(){return this.props.isInstalling?this.translateIfNeeded("tpa_messages_new_page_added_popup_button"):this.translateIfNeeded("tpa_messages_new_page_added_popup_button_getstarted")},getKeyboardShortcuts:function(){return{esc:function(){this.props.isInstalling&&this.onClose()}}},onClose:function(){this.props.closePanel(this.props.panelName)},shouldNotCloseOnBlur:function(){return this.props.isInstalling},getIllustrationSrc:function(){var e=void 0;return e=this.props.isInstalling?2===n.browserUtil.getDevicePixelRatio()?"panels/focusPanels/appLoaderRetina.v2.gif":"panels/focusPanels/appLoader.v2.gif":2===n.browserUtil.getDevicePixelRatio()?"panels/focusPanels/appLoaderSuccessRetina.v2.gif":"panels/focusPanels/appLoaderSuccess.v2.gif",n.media.getMediaUrl(e)},illustrationSymbol:function(){return null},isCloseButtonDisabled:function(){return this.props.isInstalling},getIllustrationAlt:function(){return"app installing illustration"},render:s});return o(l,a)(r(c))}),define("panels/focusPanels/howToVideoGalleryPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{ref:"panelFrame",frameClassName:"how-to-video-gallery-frame",className:"how-to-video-gallery-panel",shouldHideHeader:!0,keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},e.createElement("div",{className:"panel-content"},e.createElement(a.Composites.BigPanelHeader,{},e.createElement(a.PanelHeaderCenteredText,{title:"HowTo_Videos_Panel_Title",subtitle:"HowTo_Videos_Panel_Subtitle",onClose:this.onClose})),e.createElement("iframe",{className:"gallery-iframe",src:this.getIframeSrc()})))}}),define("panels/focusPanels/howToVideoGalleryPanel",["create-react-class","lodash","core","util","stateManagement","panels/focusPanels/howToVideoGalleryPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=s.editorPlugins.domMeasurements.selectors,r=o.getPreviewPosition,l=o.getStageLayout;function c(){return"https://apps."+a.serviceTopology.baseDomain}return e({displayName:"howToVideoGalleryPanel",mixins:[a.translationMixin,n.mixins.editorAPIMixin],componentDidMount:function(){window.addEventListener("message",this.iframeMessageHandler)},componentWillUnmount:function(){window.removeEventListener("message",this.iframeMessageHandler)},getStageWidth:function(){var e=this.getEditorAPI().store.getState();return l(e).width+r(e).left},iframeMessageHandler:function(e){(e.origin||e.originalEvent.origin)===c()&&"dealerButtonClick"===t.get(e,"data.event")&&this.getEditorAPI().panelManager.openPanel("panels.focusPanels.howToVideoPlayer",{videoId:e.data.details.clickType,origin:"TOP_BAR_HELP",withOverlay:!1,withShadow:!1},!0)},getIframeSrc:function(){var e,t=this.getEditorAPI().dsRead.generalInfo.getMetaSiteId(),n=this.getStageWidth();return c()+(e="/wix-dealer-webapp/api/lightboxViewer/EDITOR_VIDEO_GALLERY",e+=n<1290?"_SMALL/":"/")+t},getKeyboardShortcuts:function(){return{esc:this.onClose}},onClose:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render:i})}),define("panels/focusPanels/feedbackPanel.rt",["react","lodash","panels/frames/focusPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{ref:"panelFrame",panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,onClose:this.panelWillClose,isBareMode:!0},e.createElement("iframe",{className:"feedback-iframe",src:this.getIframeSrc(),width:"500",height:"743",ref:"iframe"}))}}),define("panels/focusPanels/feedbackPanel",["create-react-class","prop-types","lodash","core","util","constants","panels/focusPanels/feedbackPanel.rt"],function(e,t,i,n,o,s,a){"use strict";var r=["ReactSource","experiments","experimentsoff","editorexp","viewerexp"];function l(){return"//feedback."+o.serviceTopology.baseDomain}function c(){return window.location.protocol+l()}return e({propTypes:{panelName:t.string.isRequired},displayName:"feedbackPanel",mixins:[n.mixins.editorAPIMixin],getIframeSrc:function(){var e,t,n=this.getEditorAPI(),a=n.dsRead.generalInfo.getSiteId(),s=n.dsRead.generalInfo.getMetaSiteId();return c()+"/shareSite/"+a+"?metaSiteId="+s+(e=o.url.getParameterByName("feedbackVersion"),t=i(r).map(function(e){var t=o.url.getParameterByName(e);return t?"&"+e+"="+t:null}).compact().join(""),e&&(t+="&rc="+e),t)},componentDidMount:function(){window.addEventListener("message",this.iframeMessageHandler)},componentWillUnmount:function(){this.closeTimeout&&window.clearTimeout(this.closeTimeout),window.removeEventListener("message",this.iframeMessageHandler)},iframeMessageHandler:function(e){var t=this.getEditorAPI();if(e.origin.substring(e.origin.indexOf("//"))===l()){var n=e.data&&JSON.parse(e.data);switch(n.action){case"feedbackhelp":var a=function(e){switch(e){case"ShareHelpPro":return"4ca0f60b-3c8e-48c2-9259-8d70c8564101";case"ReadHelp":return"38fac604-38ba-4d83-97eb-3fbc8f702762";case"ReadHelpPro":return"4e1993e1-ece8-4478-b553-139926f66bfc";default:return"cb9a32fa-b217-4e31-b2e6-905dd8e2116c"}}(i.get(n,"helpType"));t.panelManager.openHelpCenter(a,null,{component:this.props.id,origin:s.BI.HELP.ORIGIN.PANEL,panel_name:"panels.focusPanels.feedbackPanel"});break;case"feedbackclose":this.getEditorAPI().panelManager.closePanelByName(this.props.panelName);break;case"opensitesettings":t.account.openSettings("authorization","feedback")}}},panelWillClose:function(){if(!this.closeTimeout)return this.closeTimeout=window.setTimeout(function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)}.bind(this),s.FEEDBACK.CLOSE_PANEL_TIMEOUT),i.get(this.refs,"iframe.contentWindow")&&this.refs.iframe.contentWindow.postMessage("panelClosed",c()),!1},render:a})}),define("panels/focusPanels/getTrafficPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",title:a.translate("Notification_Box_Get_Traffic_Title"),subtitle:a.translate("Notification_Box_Get_Traffic_Description"),linkedVideoData:this.linkedVideoData(),panelName:this.props.panelName,className:"getTrafficPanel",shouldNotCloseOnBlur:!0},e.createElement("div",{className:"get-traffic-description content"},e.createElement("span",{className:"text-before-link"},this.getDescription(0)),e.createElement("a",{className:"get-found-link",href:"#",onClick:function(){this.searchOnGoogle()}.bind(this)},this.getDescription(2)),e.createElement("span",{className:"text-after-link"},this.getDescription(1))),e.createElement("div",{className:"buttons"},e.createElement(s.button,{label:"Notification_Box_Get_Traffic_Submit_Website_Button_Label",onClick:function(){this.getFoundOnGoogle()}.bind(this)})))}}),define("panels/focusPanels/getTrafficPanel",["create-react-class","lodash","core","util","coreBi","panels/focusPanels/getTrafficPanel.rt"],function(e,s,t,n,a,i){"use strict";var o=a,r=n.translate("Notification_Box_Get_Traffic_Video_URL"),l=[];return e({propTypes:{},displayName:"getTrafficPanel",mixins:[t.mixins.editorAPIMixin,n.translationMixin],getFoundOnGoogle:function(){this.sendPanelGetFoundEvent("getFoundOnGoogle");var e=this.translateIfNeeded("Notification_Box_Get_Traffic_Submit_Website_Button_Link");window.open(e,"_blank")},getPublicUrl:function(){var e=this.getEditorAPI().dsRead.generalInfo.getPublicUrl();return e&&(e=e.replace(/.*?:\/\//g,"")),e},searchOnGoogle:function(){var e="https://www.google.co.il/?#q=site:",t=this.getPublicUrl(e),n=e+t;t&&window.open(n,"_blank"),this.sendSearchOnGoogleEvent(n)},getContentClass:function(){return"only-new"},linkedVideoData:function(){return r},getDescription:function(e){if(s.isEmpty(l)){var t="site:"+this.getPublicUrl(),n={domain_address:t},a=this.translateTemplate("Notification_Box_Get_Traffic_Bottom_Text",n,this.getEditorAPI());(l=a.split(t)).push(t)}return l.length>=e?l[e]:""},sendSearchOnGoogleEvent:function(e){var t=this.getEditorAPI(),n=o.events.getTrafficPanel.GET_TRAFFIC_SEARCH_GOOGLE_CLICK,a={site_id:t.dsRead.generalInfo.getSiteId(),url:e};t.bi.event(n,a)},sendPanelGetFoundEvent:function(e){var t=this.getEditorAPI(),n=o.events.getTrafficPanel.GET_TRAFFIC_GET_FOUND_ON_GOOGLE_CLICK,a={site_id:t.dsRead.generalInfo.getSiteId(),origin:e,video_url:r};t.bi.event(n,a)},render:i})}),define("panels/focusPanels/promotionModalPanel.rt",["react","lodash","panels/frames/focusPanelFrame","util","baseUI","santa-editor-symbols"],function(t,n,e,a,s,i){"use strict";return function(){return t.createElement(e,{panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,className:"promo-popup-panel "+this.props.className},function(){var e=this.getImageContainerClass();return t.createElement("header",{className:"panel-header dark"},t.createElement("button",{className:"close",onClick:function(e){this.close()}.bind(this,e)},t.createElement(i.symbol,{name:"headerCloseButton"})),t.createElement("div",{className:"title-line-1"},a.translate(this.props.headerFirstLineText)),this.props.headerSecondLineText?t.createElement("div",{className:"title-line-2",key:"headerSecondLine"},"\n            ",a.translate(this.props.headerSecondLineText),"\n        "):null,t.createElement(e,{className:"image-wrapper",onClick:this.props.isImageLinkActive?this.handleAction.bind(this,"image"):n.noop},t.createElement("img",{ref:"image",src:this.props.imageSrc}),t.createElement("div",{className:"overlay-box-1"}),t.createElement("div",{className:"overlay-box-2"}),t.createElement("div",{className:"overlay-box-3"}),t.createElement(e,{})))}.apply(this,[]),t.createElement("div",{className:"content"},t.createElement("p",{},a.translate(this.props.bodyText),this.props.bodyLinkText?t.createElement("a",{key:"link",onClick:function(){this.handleAction("date kink")}.bind(this)},a.translate(this.props.bodyLinkText)):null),this.props.bodyBottomText?t.createElement("p",{key:"bodyBottomText"},a.translate(this.props.bodyBottomText)):null,t.createElement(s.button,{label:this.props.actionText,onClick:function(){this.handleAction("submission button")}.bind(this)})))}}),define("panels/focusPanels/promotionModalPanel",["create-react-class","prop-types","lodash","core","util","panels/focusPanels/promotionModalPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"promotionModalPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{headerFirstLineText:t.string,headerSecondLineText:t.string,imageSrc:t.string,bodyText:t.string,bodyLinkText:t.string,isImageLinkActive:t.bool,actionText:t.string,actionUrl:t.string,biEvent:t.object},getDefaultProps:function(){return{isImageLinkActive:!0}},getImageContainerClass:function(){return this.props.isImageLinkActive?"a":"div"},handleAction:function(e){this.sendSubmitVideoClickedBI(e),window&&window.open(s.translate(this.props.actionUrl))},sendSubmitVideoClickedBI:function(e){var t={origin:e};this.getEditorAPI().bi.event(this.props.biEvent,t)},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render:i})}),define("panels/focusPanels/sizeRestrictionPanel.rt",["react","lodash","constants","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:this.props.title,symbolName:"bigtopin",bodyText:this.props.content,dontShowAgainKey:n.PANELS.PIN_TOO_BIG.PIN_TOO_BIG_DONT_SHOW_AGAIN,helpId:"7827a21e-04e0-4bdd-9ee0-b68677fa7a5a",userPrefType:"site"})}}),define("panels/focusPanels/sizeRestrictionPanel",["create-react-class","core","lodash","stateManagement","coreBi","panels/focusPanels/sizeRestrictionPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({mixins:[t.mixins.editorAPIMixin],displayName:"sizeRestrictionPanel",componentDidMount:function(){var e=this.getEditorAPI(),t=e.store;t.dispatch(a.editorPlugins.bi.actions.event(s.events.pinToScreen.NOTIFICATION_TOO_BIG,{state:this.props.state,component_type:a.editorPlugins.selection.selectors.getSelectedComponentType(t.getState(),e.dsRead)}))},render:i})}),define("panels/focusPanels/newEditorWelcomeScreenPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",title:a.translate("Notification_Box_New_Template_Title"),subtitle:a.translate("Notification_Box_New_Template_Subtitle"),linkedVideoData:this.linkedVideoData(),contentClass:this.getContentClass(),content:this.getContent(),panelName:this.props.panelName,shouldNotCloseOnBlur:!0},e.createElement("div",{className:"buttons"},this.props.isEligibleForSwitch?e.createElement(s.button,{label:"Notification_Box_Back_To_Old_Editor",onClick:function(){this.back()}.bind(this),key:"Notification_Box_Back_To_Old_Editor",className:"btn-confirm-secondary"}):null,e.createElement(s.button,{label:this.props.nextBtnLabel,onClick:function(){this.next()}.bind(this)})))}}),define("panels/focusPanels/newEditorWelcomeScreenPanel",["create-react-class","prop-types","lodash","core","util","coreBi","panels/focusPanels/newEditorWelcomeScreenPanel.rt"],function(e,t,n,a,s,i,o){"use strict";var r=i,l=void 0;return e({displayName:"newEditorWelcomeScreenPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{isEligibleForSwitch:t.bool,onNextClick:t.func.isRequired,nextBtnLabel:t.string.isRequired,onBackClick:t.func.isRequired},next:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onNextClick()},back:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onBackClick()},linkClick:function(){var e=this.props.isEligibleForSwitch?"LEARN_MORE_CLICK_WITH_BACK_OPTION":"LEARN_MORE_CLICK_WITHOUT_BACK_OPTION";this.sendBIEvent(e);var t=s.translate("SWITCH_EDITORS_LP_LINK");window&&window.open(t)},getContentClass:function(){return this.props.isEligibleForSwitch?"switch-to-old":"only-new"},getContent:function(){var e={};return this.props.isEligibleForSwitch?(e.line1="Notification_Box_Switch_Editor_Description",e.link="Notification_Box_Switch_Editor_Link",e.line2=""):(e.line1="Notification_Box_New_Template_Line1",e.link="Notification_Box_New_Template_Link",e.line2="Notification_Box_New_Template_Line2"),e},linkedVideoData:function(){return"//www.youtube.com/embed/"+s.translate("SWITCH_EDITORS_PR_VIDEO")},sendBIEvent:function(e){var t=this.getEditorAPI(),n=r.events.newEditorWelcomeScreens[e],a={site_id:t.dsRead.generalInfo.getSiteId()};n.fields.duration&&(a.duration=Date.now()-l),t.bi.event(n,a)},componentDidMount:function(){l=Date.now();var e=this.props.isEligibleForSwitch?"POP_UP_OPEN_WITH_BACK_OPTION":"POP_UP_OPEN_WITHOUT_BACK_OPTION";this.sendBIEvent(e)},render:o})}),define("panels/focusPanels/editorMigrationFailedPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame","util"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,shouldHideHelp:!0,shouldHideHeader:!0,shouldNotCloseOnBlur:!0,isBareMode:!0,className:"editor-compatibility-panel"},e.createElement("header",{className:"save-publish-panel-header header"},e.createElement("div",{className:"header-content"},e.createElement("span",{className:"title"},s.translate("Notification_Box_Wrong_Editor_Title")),e.createElement("div",{className:"subtitle"},s.translate("Notification_Box_Wrong_Editor_Subtitle")))),e.createElement(n.symbol,{name:"coffee",className:"coffee-img"}),e.createElement("div",{className:"content"},e.createElement("div",{},e.createElement("span",{},s.translate("Notification_Box_Wrong_Editor_Line1")),e.createElement("span",{},e.createElement("a",{target:"_blank",href:this.getHref()},s.translate("Notification_Box_Wrong_Editor_Link"))),e.createElement("span",{}," ",s.translate("Notification_Box_Wrong_Editor_Line2"))),e.createElement(n.button,{label:"Notification_Box_Wrong_Editor_Continue",onClick:this.onClick,className:"button"})))}}),define("panels/focusPanels/editorMigrationFailedPanel",["create-react-class","lodash","panels/focusPanels/editorMigrationFailedPanel.rt"],function(e,o,t){"use strict";return e({displayName:"editorMigrationFailedPanel",render:t,onClick:function(){var e,t,n,a,s,i=(e=window.document.location.href,t="forceEditorVersion",n="old",a=new RegExp("([?&])"+t+"=.*?(&|$)","i"),s=o.includes(e,"?")?"&":"?",e.match(a)?e.replace(a,"$1"+t+"="+n+"$2"):e+s+t+"="+n);window.location=i},getHref:function(){return"http://www.wix.com/website/templates/html/new/1"}})}),define("panels/focusPanels/welcomeScreenVideoPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",title:this.props.title,subtitle:this.props.subtitle,linkedVideoData:this.props.linkedVideoData,panelName:this.props.panelName,onCloseByX:this.sendBIEventWhenClosedByX,onCloseByESC:this.sendBIEventWhenClosedByESC,shouldNotCloseOnBlur:!0},e.createElement("div",{className:"buttons"},e.createElement(s.button,{label:this.props.buttonLabel,onClick:function(){this.startNow()}.bind(this)})))}}),define("panels/focusPanels/newUserIntroVideoPanel",["create-react-class","lodash","core","panels/focusPanels/focusPanelMixin","coreBi","panels/focusPanels/welcomeScreenVideoPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=s;return e({displayName:"newUserIntroVideoPanel",mixins:[n.mixins.editorAPIMixin,a],getBIEvent:function(){return o.events.newUserIntroVideoPanel.INTRO_VIDEO_CLOSE},render:i})}),define("panels/focusPanels/cameFromADIVideoPanel",["create-react-class","lodash","core","util","panels/focusPanels/focusPanelMixin","coreBi","panels/focusPanels/welcomeScreenVideoPanel.rt","stateManagement"],function(e,t,n,a,s,i,o,r){"use strict";var l=i;return e({displayName:"ADIVideoPanel",mixins:[n.mixins.editorAPIMixin,s],openTooltip:function(){this.getEditorAPI().store.dispatch(r.editorPlugins.topBarTooltip.actions.showBackToAdiTooltip()),this.sendTooltipOpenedBI()},getBIEvent:function(){return l.events.cameFromADIVideoPanel.CAME_FROM_ADI_INTRO_VIDEO_CLOSE},sendTooltipOpenedBI:function(){var e=this.getEditorAPI();e.bi.event(i.events.backToADIFromEditor.goingBackToWixADITooltipOpened,{esi:a.editorModel.editorSessionId,site_id:e.dsRead.generalInfo.getSiteId()})},render:o})}),define("panels/focusPanels/migratedToMeshSuccessPanel",["create-react-class","prop-types","util","panels/focusPanels/focusPanelMixin","panels/focusPanels/userMessageMediumPanel.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"migratedToMeshSuccessPanel",mixins:[a,n.translationMixin],propTypes:{title:t.string.isRequired,subTitle:t.string.isRequired,bodyText:t.oneOfType([t.string,t.arrayOf(t.string)]).isRequired,illustrationSrc:t.string,illustrationSymbol:t.string,closeButtonText:t.string.isRequired,closePanel:t.func.isRequired},getTitleText:function(){return this.translateIfNeeded(this.props.title)},getSubtitleText:function(){return this.translateIfNeeded(this.props.subTitle)},getBodyTexts:function(){return[].concat(this.props.bodyText).map(this.translateIfNeeded)},getCloseButtonText:function(){return this.translateIfNeeded(this.props.closeButtonText)},getIllustrationSrc:function(){return this.props.illustrationSrc?n.media.getMediaUrl(this.props.illustrationSrc):null},illustrationSymbol:function(){return this.props.illustrationSymbol},getIllustrationAlt:function(){return"Success illustration"},isCloseButtonDisabled:function(){return!1},onClose:function(){this.props.closePanel(this.props.panelName)},getKeyboardShortcuts:function(){return{esc:this.onClose}},shouldNotCloseOnBlur:function(){return!0},render:s})}),define("panels/focusPanels/howToVideoPlayer.rt",["react","lodash","baseUI","panels/frames/emptyPanelFrame"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:"howToVideoPlayer",className:"how-to-video-player panel-frame-container"},e.createElement("div",{key:"darkOverlay",className:t({"dark-overlay":this.props.withOverlay,"close-overlay":!this.props.withOverlay}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onClick:this.handleClickClose}),e.createElement("div",{className:t({"container-iframe":!0,"with-shadow":this.props.withShadow}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement("div",{className:"close",onClick:this.handleClickClose},e.createElement(n.symbol,{name:"close_video_icon_reg"})),e.createElement("iframe",{id:"how-to-video-player-iframe",src:this.getIframeSrcUrl()})))}}),define("panels/focusPanels/howToVideoPlayer",["create-react-class","prop-types","core","lodash","panels/focusPanels/howToVideoPlayer.rt","coreBi","panels/mixins/disableKeyboardShortcutsMixin"],function(e,t,n,a,s,i,o){"use strict";return e({displayName:"howToVideoPlayer",mixins:[o,n.mixins.editorAPIMixin],propTypes:{videoId:t.string.isRequired,origin:t.string.isRequired,withShadow:t.bool,withOverlay:t.bool},getDefaultProps:function(){return{withShadow:!0,withOverlay:!0}},componentDidMount:function(){var e={videoID:this.props.videoId,origin:this.props.origin};this.getEditorAPI().bi.event(i.events.videoPlayer.OPEN,e),this.startTime=Date.now(),window.focus();var t=function(){new window.YT.Player("how-to-video-player-iframe",{events:{onStateChange:function(e){e.data===window.YT.PlayerState.ENDED&&this.close({code:"VIDEO_ENDED"})}.bind(this)}})};if(window.YT)window.YT.Player&&window.YT.PlayerState&&t.call(this);else{window.onYouTubeIframeAPIReady=function(){t.call(this),delete window.onYouTubeIframeAPIReady}.bind(this);var n=window.document.createElement("script");n.type="text/javascript",n.src="//www.youtube.com/iframe_api",window.document.head.appendChild(n)}},getIframeSrcUrl:function(){return"https://www.youtube.com/embed/"+this.props.videoId+"?rel=0&autoplay=1&color=red&controls=1&showinfo=0&fs=0&enablejsapi=1&origin=http://editor.wix.com&modestbranding=1"},close:function(e){var t=this.getEditorAPI(),n={videoID:this.props.videoId,duration:Date.now()-this.startTime,origin:e.code};t.bi.event(i.events.videoPlayer.CLOSE,n),t.panelManager.closePanelByName(this.props.panelName)},handleClickClose:function(){this.close({code:"X_BUTTON"})},handleClickOverlay:function(){this.close({code:"CLOSE_OVERLAY"})},getKeyboardShortcuts:function(){return{esc:this.close}},render:s})}),define("panels/focusPanels/newEditorListWelcomeScreenPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","util","santa-editor-symbols"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(n,{ref:"frame",panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,isBareMode:!0,className:"new-editor-list-welcome-screen-panel"},e.createElement("header",{className:"panel-header dark",key:"header"},e.createElement("div",{className:"welcome-panel-header-title"},s.translate("list_migration_welcome_screen_title")),e.createElement(i.symbol,{name:"listWelcomeScreenAsset"})),e.createElement("div",{className:t({content:!0,"only-new":!this.props.isEligibleForSwitch,"switch-to-old":this.props.isEligibleForSwitch}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement("p",{},"\n            ",s.translate("list_migration_welcome_screen_text_paragraph_1_before_changes_link"),"\n            ",e.createElement("a",{href:this.getChangesPageUrl(),target:"_blank"},s.translate("list_migration_welcome_screen_text_paragraph_1_changes_link")),s.translate("list_migration_welcome_screen_text_paragraph_1_after_changes_link"),"\n        "),e.createElement("p",{},s.translate("list_migration_welcome_screen_text_paragraph_2"))),e.createElement("div",{className:"buttons"},this.props.isEligibleForSwitch?e.createElement(a.button,{label:"Notification_Box_Back_To_Old_Editor",onClick:function(){this.back()}.bind(this),key:"Notification_Box_Back_To_Old_Editor",className:"btn-confirm-secondary"}):null,e.createElement(a.button,{label:"Notification_Box_Start_Now",onClick:function(){this.next()}.bind(this)})))}}),define("panels/focusPanels/newEditorListWelcomeScreenPanel",["create-react-class","prop-types","lodash","util","panels/focusPanels/newEditorListWelcomeScreenPanel.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"newEditorListWelcomeScreen",propTypes:{isEligibleForSwitch:t.bool,onNextClick:t.func.isRequired,onBackClick:t.func.isRequired},next:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onNextClick()},back:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onBackClick()},getChangesPageUrl:function(){var e=a.languages.getLanguageCode();return"https://www.wix.com/support/html5/new-wix-editor-june-2015/list/kb/information-about-moving-to-the-new-editor-with-the-list-builder".replace("www.wix.com",("en"===e?"www":e)+".wix.com")},render:s})}),define("panels/focusPanels/migrateToMeshWelcomeScreenPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","util","santa-editor-symbols"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(n,{ref:"frame",panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,shouldNotCloseOnBlur:!0,isBareMode:!0,className:"migrate-to-mesh-welcome-screen-panel"},e.createElement("header",{className:"panel-header dark",key:"header"},e.createElement("div",{className:"welcome-panel-header-title"},s.translate("Mesh_Migration_Popup_Title")),e.createElement(i.symbol,{name:"mesh-welcome-modal"})),e.createElement("div",{className:"content"},e.createElement("p",{},s.translate("Mesh_Migration_Popup_Text1")),e.createElement("p",{},s.translate("Mesh_Migration_Popup_Text2"),e.createElement("a",{className:"learn-more",onClick:this.props.onHelp},s.translate("Mesh_Migration_Popup_Help_Link"))),e.createElement("p",{},s.translate("Mesh_Migration_Popup_Text3"))),e.createElement("div",{className:"buttons "+(this.props.canUserDecline?"":"single-button")},e.createElement(a.button,{label:"Mesh_Migration_Popup_Update_Button",shouldTranslate:!0,onClick:this.props.onConfirm}),this.props.canUserDecline?e.createElement(a.button,{key:"cancel-button",shouldTranslate:!0,label:"Mesh_Migration_Popup_Later_Link",className:"btn-text maybe-later-btn",onClick:this.props.onCancel}):null))}}),define("panels/focusPanels/migrateToMeshWelcomeScreenPanel",["create-react-class","prop-types","panels/focusPanels/migrateToMeshWelcomeScreenPanel.rt"],function(e,t,n){"use strict";return e({displayName:"migrateToMeshWelcomeScreen",propTypes:{canUserDecline:t.bool.isRequired,onConfirm:t.func.isRequired,onCancel:t.func.isRequired,onHelp:t.func.isRequired},render:n})}),define("panels/focusPanels/meshMigrationProgressPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib","util"],function(t,e,n,a,s){"use strict";return function(){var e=this;return t.createElement(n,{ref:"frame",panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,shouldNotCloseOnBlur:!0,isBareMode:!0,className:"mesh-migrate-progress-panel"},t.createElement(a.PanelHeader,{className:"dark",noCloseBtn:!0,noHelpBtn:!0},t.createElement("span",{},s.translate("Mesh_Migration_Loader_Title"))),t.createElement(a.Composites.ProgressBar,{},t.createElement(a.TextLabel,{type:"T02",value:!0,shouldTranslate:!1}),t.createElement(a.ProgressBar,{progress:this.state.isInProgress?this.props.value:0,progressMax:this.props.maxValue}),t.createElement(a.TextLabel,{type:"T02",value:this.getStepLabel(),shouldTranslate:!0})),this.props.canUserAbort?t.createElement(a.Button,{className:"btn-sm btn-light progress-cancel-btn",onClick:function(){return e.onCancel()},disabled:!this.state.isInProgress,key:"1118"},t.createElement("span",{},s.translate("Mesh_Migration_Loader_Cancel_Button"))):null)}}),define("panels/focusPanels/meshMigrationProgressPanel",["lodash","util","stateManagement","create-react-class","prop-types","panels/focusPanels/meshMigrationProgressPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=t.hoc.connect,r=n.editorPlugins.meshMigration.selectors,l={DESKTOP:"DESKTOP",MOBILE:"MOBILE"},c=a({displayName:"meshMigrationProgressPanel",propTypes:{onAbort:s.func.isRequired,canUserAbort:s.bool.isRequired,isDone:s.bool,value:s.number,maxValue:s.number,viewMode:s.oneOf(e.values(l))},getInitialState:function(){return{isInProgress:!0}},getDefaultProps:function(){return{viewMode:l.DESKTOP}},onCancel:function(){var e=this;this.setState({isInProgress:!1},function(){e.props.onAbort()})},getStepLabel:function(){return(this.props.viewMode||"").toUpperCase()===l.MOBILE?"Mesh_Migration_Loader_Text_Step2":"Mesh_Migration_Loader_Text_Step1"},render:i});return o(t.hoc.STORES.STATE_ONLY,function(e){var t=e.state;return{isDone:r.isDone(t),value:r.getValue(t),maxValue:r.getMaxValue(t),viewMode:r.getViewMode(t)}})(c)}),define("panels/focusPanels/failPanel.rt",["react","lodash","util","baseUI","baseUILib","panels/frames/focusPanelFrame"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(i,{ref:"frame",panelName:this.props.panelName,className:"fail-panel-general",shouldHideHeader:!1,shouldHideHelp:!0,shouldNotCloseOnBlur:!0,isBareMode:!0,title:n.translate(this.props.title),keyboardShortcuts:this.getKeyboardShortcuts()},e.createElement("div",{className:"content-wrapper"},e.createElement("div",{className:"icon"},e.createElement(a.symbol,{name:this.props.illustrationSymbol})),e.createElement(s.Composites.RichText,{className:"body-text"},e.createElement(s.RichText,{type:"T06"},e.createElement("span",{"data-aid":"error-message"},n.translate(this.props.bodyText)))),e.createElement(s.Button,{className:"primary close-button",onClick:this.onClose},e.createElement(s.TextLabel,{value:this.props.closeButtonText}))))}}),define("panels/focusPanels/failPanel",["create-react-class","prop-types","panels/focusPanels/focusPanelMixin","panels/focusPanels/failPanel.rt"],function(e,t,n,a){"use strict";return e({displayName:"failPanel",mixins:[n],propTypes:{title:t.string.isRequired,bodyText:t.string.isRequired,closeButtonText:t.string.isRequired,closePanel:t.func.isRequired,illustrationSymbol:t.string},getDefaultProps:function(){return{illustrationSymbol:"plaster"}},getKeyboardShortcuts:function(){return{esc:this.onClose}},onClose:function(){this.props.closePanel(this.props.panelName)},render:a})}),define("panels/focusPanels/createNewTextBoxPanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(e,t,n,a){"use strict";return function(){return e.createElement(a,{panelName:this.props.panelName,h1text:"text_box_too_much_text_error_message_title",symbolName:"createNewTextBox",bodyText:"text_box_too_much_text_error_message_text",hideDontShowCheckbox:!0,isSingleInstance:this.props.isSingleInstance})}}),define("panels/focusPanels/createNewTextBoxPanel",["create-react-class","core","panels/focusPanels/createNewTextBoxPanel.rt"],function(e,t,n){"use strict";return e({displayName:"createNewTextBoxPanel",mixins:[t.mixins.editorAPIMixin],render:n})}),define("panels/focusPanels/siteImageOptimizationPanel.rt",["react","lodash","baseUILib","core","baseUI","panels/frames/focusPanelFrame","util","helpIds"],function(e,t,n,a,s,i,o,r){"use strict";return function(){return e.createElement(i,{panelName:this.props.panelName,title:o.translate("SITE_IMAGE_QUALITY_SETTINGS_PANEL_HEADER_TITLE"),ref:"frame",helpId:r.SETTINGS.IMAGE_OPTIMIZATION,className:"site-image-optimisation-panel"},e.createElement(n.Composites.Thumbnails,{},e.createElement(n.TextLabel,{value:"SITE_IMAGE_QUALITY_SETTINGS_PANEL_DESCRIPTION",enableEllipsis:!1}),e.createElement(n.Thumbnails,{value:this.linkedQualityPresets().value,onChange:this.linkedQualityPresets().requestChange,maxThumbsPerRow:3,borderType:"thumbnailAndLabel",options:this.getImageQualityPresetsOptions()})),e.createElement(n.Divider,{long:!0}),e.createElement("div",{className:"action-buttons"},e.createElement(s.button2,{label:"SITE_IMAGE_QUALITY_SETTINGS_PANEL_CANCEL_BUTTON",onClick:this.closeImageQualityPanel,className:"default image-optimisation-cancel"}),e.createElement(s.button2,{label:"SITE_IMAGE_QUALITY_SETTINGS_PANEL_APPLY_BUTTON",disabled:this.isApplyDisabled(),onClick:this.handleApplyQuality,className:"default image-optimisation-done"})))}}),define("panels/focusPanels/siteImageOptimizationPanel",["core","react","santa-editor-symbols","baseUILib","create-react-class","prop-types","lodash","coreBi","panels/focusPanels/siteImageOptimizationPanel.rt"],function(e,t,n,a,s,i,o,r,l){"use strict";var c=["none","mild","regular","moderate","strong","maximum"],p=[{unsharpMask:{radius:0,amount:0,threshold:0},quality:90},{unsharpMask:{radius:.33,amount:1,threshold:0}},{unsharpMask:{radius:.66,amount:1,threshold:.01}},{unsharpMask:{radius:1.2,amount:1,threshold:.01}},{unsharpMask:{radius:2,amount:1,threshold:0}},{unsharpMask:{radius:4,amount:1,threshold:0}}],u=[{value:0,label:"IMAGE_QUALITY_NAME_NONE",illustration:t.createElement(a.Tooltip,{content:"IMAGE_QUALITY_NAME_NONE_TOOLTIP",alignment:"TOP",marginTop:23},t.createElement(n.symbol,{name:"image-quality-none"}))},{value:1,label:"IMAGE_QUALITY_NAME_GLOBAL_MILD",illustration:t.createElement(a.Tooltip,{content:"IMAGE_QUALITY_NAME_GLOBAL_MILD_TOOLTIP",alignment:"TOP",marginTop:23},t.createElement(n.symbol,{name:"image-quality-mild"}))},{value:2,label:"IMAGE_QUALITY_NAME_GLOBAL_REGULAR",illustration:t.createElement(a.Tooltip,{content:"IMAGE_QUALITY_NAME_GLOBAL_REGULAR_TOOLTIP",alignment:"TOP",marginTop:23},t.createElement(n.symbol,{name:"image-quality-regular"}))},{value:3,label:"IMAGE_QUALITY_NAME_GLOBAL_MODERATE",illustration:t.createElement(a.Tooltip,{content:"IMAGE_QUALITY_NAME_GLOBAL_MODERATE_TOOLTIP",alignment:"TOP",marginTop:23},t.createElement(n.symbol,{name:"image-quality-moderate"}))},{value:4,label:"IMAGE_QUALITY_NAME_GLOBAL_STRONG",illustration:t.createElement(a.Tooltip,{content:"IMAGE_QUALITY_NAME_GLOBAL_STRONG_TOOLTIP",alignment:"TOP",marginTop:23},t.createElement(n.symbol,{name:"image-quality-strong"}))},{value:5,label:"IMAGE_QUALITY_NAME_GLOBAL_MAXIMUM",illustration:t.createElement(a.Tooltip,{content:"IMAGE_QUALITY_NAME_GLOBAL_MAXIMUM_TOOLTIP",alignment:"TOP",marginTop:23},t.createElement(n.symbol,{name:"image-quality-maximum"}))}];return s({mixins:[e.mixins.editorAPIMixin],displayName:"siteImageOptimization",propTypes:{unsharpMask:i.shape({radius:i.number,amount:i.number,threshold:i.number})},getInitialState:function(){var t,e,n=this.getGlobalImageQualityData()||p[2];return{selectedIndex:(t=n,e=p,o.findIndex(e,function(e){return o.isEqual(e,t)})),selectedValue:n}},getImageQualityPresetsOptions:function(){return u},linkedQualityPresets:function(){return{value:this.state.selectedIndex,requestChange:function(e){this.setState({selectedValue:p[e],selectedIndex:e})}.bind(this)}},handleApplyQuality:function(){this.isApplyDisabled()||(this.updateGlobalImageQualityData(this.state.selectedValue),this.sendQualityApplyBI(this.state.selectedIndex),this.closeImageQualityPanel())},sendQualityApplyBI:function(e){var t=this.state.selectedValue;this.getEditorAPI().bi.event(r.events.siteImageQualitySettingsPanel.site_image_quality_settings_panel_apply,{origin:"global",preset:c[e]||"custom",unsharp_amount:100*t.unsharpMask.amount,unsharp_radius:100*t.unsharpMask.radius,unsharp_threshold:100*t.unsharpMask.threshold})},closeImageQualityPanel:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},isApplyDisabled:function(){var e=this.getGlobalImageQualityData();return-1===this.state.selectedIndex||!this.getGlobalImageQualityData()&&2===this.state.selectedIndex||o.isEqual(e,this.state.selectedValue)},getGlobalImageQualityData:function(){var e=this.getEditorAPI().dsRead.media.imageQuality.get();return o.isEmpty(e)?null:o.pick(e,["unsharpMask","quality"])},updateGlobalImageQualityData:function(e){var t=this.getEditorAPI();t.dsActions.media.imageQuality.reset(),t.dsActions.media.imageQuality.update(e),t.dsActions.wixapps.classics.reloadApp("blog"),this.getEditorAPI().history.add("site image quality panel - update quality")},render:l})}),define("panels/focusPanels/siteMembersSettingsNewPanel.rt",["react","lodash","baseUILib","baseUI","panels/frames/focusPanelFrame","util","helpIds"],function(s,i,o,r,n,a,e){"use strict";return function(){function t(e){var t=this.getTabValues();return s.createElement("div",{className:"member-settings-panel-content"},s.createElement(r.horizontalTabs,{shouldTranslate:!0,options:this.getTabs(),value:this.state.selectedTab,onChange:this.selectTab,className:"tabbed"}),s.createElement("div",{className:this.getTabContentClass()},s.createElement(o.Composites.RichText,{},s.createElement(o.RichText,{className:"light"},e("Pages_Member_Signup_Settings_Description"))),this.state.selectedTab===t.GENERAL?s.createElement("div",{className:"general-settings settings",key:"smSettingsTab"},s.createElement(o.CustomScroll,{heightRelativeToParent:"100%"},s.createElement(o.Divider,{}),s.createElement(o.Composites.RadioButtonsLabeled,{},s.createElement(o.InfoIcon,{shouldTranslate:!0,text:"Member_Login_Settings_General_Settings_Info_Tooltip"}),s.createElement(o.TextLabel,{value:"Pages_Member_Signup_Permission_Settings_Dropdown_Label"}),s.createElement(o.RadioButtons,{value:this.state.autoApproval,options:this.getAutoApprovalOptions(),onChange:i.partial(this.onRadioButtonsClick,"autoApproval")})),s.createElement(o.Divider,{}),s.createElement(o.Composites.RadioButtonsLabeled,{},s.createElement(o.TextLabel,{value:"Pages_Member_Signup_Display_Settings_Dropdown_Label"}),s.createElement(o.RadioButtons,{value:this.state.loginDialogFirst,options:this.getLoginFirstOptions(),onChange:i.partial(this.onRadioButtonsClick,"loginDialogFirst")})),this.isDeveloperModeEnabled()?s.createElement("div",{key:"customSignupSection"},s.createElement(o.Divider,{}),s.createElement(o.Composites.RichTextLabeled,{},s.createElement(o.TextLabel,{disabled:!0,value:"Pages_Member_Signup_Settings_Custom_Signup_Label",shouldTranslate:!0}),s.createElement(o.RichText,{},s.createElement("a",{onClick:this.openCustomSignupPanel},this.getCustomSignupLinkText())))):null)):null,this.state.selectedTab===t.SOCIAL?s.createElement("div",{className:"social-login-settings settings",key:"smSocialLoginSettingsSection"},s.createElement(o.CustomScroll,{heightRelativeToParent:"100%"},s.createElement(o.Divider,{long:!0}),s.createElement(o.SectionDivider,{},e("Pages_Member_Signup_Settings_Social_Label"),"\n                    "),s.createElement(o.Divider,{long:!0}),s.createElement("div",{className:"options"},s.createElement("section",{className:"social-option"},s.createElement(r.symbol,{name:"mba_social_panel_google_plus_new",className:"icon google"}),s.createElement(r.toggle,{name:"switch",valueLink:this.linkState("socialLoginGoogleEnabled"),label:"Member_Login_Settings_Social_Google"})),s.createElement(o.Divider,{long:!0}),s.createElement("section",{className:"social-option"},s.createElement(r.symbol,{name:"mba_social_panel_facebook",className:"icon facebook"}),s.createElement(r.toggle,{name:"switch",valueLink:this.linkState("socialLoginFacebookEnabled"),label:"Member_Login_Settings_Social_Facebook"}))),this.isSocialAppInstalled()?s.createElement("div",{key:"shouldDisplayCommunityToggle"},s.createElement(o.Divider,{long:!0}),s.createElement(o.Composites.SectionDividerWithInfoIcon,{},s.createElement(o.InfoIcon,{shouldTranslate:!0,text:"Member_Login_Settings_Community_Settings_Info_Tooltip"}),s.createElement(o.SectionDivider,{},"\n                                ",e("Member_Login_Settings_Settings_Community_Label"),"\n                            ")),s.createElement(o.Divider,{long:!0}),s.createElement("div",{className:"options"},s.createElement("section",{className:"social-option"},s.createElement(r.symbol,{name:"communityIcon",className:"icon community"}),s.createElement(r.toggle,{name:"switch",valueLink:this.linkState("joinCommunityEnabled"),label:"Member_Login_Settings_Community_Join"})))):null)):null,this.state.selectedTab===t.TERMS_AND_CONDITIONS?function(e,t){var n=this,a=this.getArticles();return s.createElement("div",{className:"signup-policies-settings settings",key:"smSignupPoliciesSection"},s.createElement(o.CustomScroll,{heightRelativeToParent:"100%"},s.createElement("div",{className:"policies-segment-header"},s.createElement(o.Divider,{long:!0}),s.createElement(o.Composites.SectionDividerWithInfoIcon,{},s.createElement(o.InfoIcon,{shouldTranslate:!0,linkText:"Pages_Member_Signup_Settings_Terms_Of_Use_Link_Label_",onLinkClick:function(){return n.openExamplePolicy(a.TERMS_OF_USE)},text:"Pages_Member_Signup_Settings_Terms_Of_Use_Info_Tooltip"}),s.createElement(o.SectionDivider,{},e("Pages_Member_Signup_Settings_Terms_Of_Use_Divider_Label"),"\n                            ")),s.createElement(o.Divider,{long:!0})),s.createElement("div",{className:"options"},s.createElement("section",{className:"option"},s.createElement(r.toggle,{name:"switch",value:this.state.termsOfUseLinkVisible,onChange:i.partial(this.toggleEditPoliciesVisibility,"termsOfUseLinkVisible"),label:"Pages_Member_Signup_Settings_Terms_Of_Use_Toggle_Label"}))),this.state.termsOfUseLinkVisible?s.createElement("div",{key:"ifTermsOfUseVisible",className:"policy-link-area"},s.createElement("div",{className:"policy-toggle-divider"},s.createElement(o.Divider,{})),s.createElement(o.Composites.ActionWithSymbolLabeled,{},s.createElement(o.TextLabel,{value:"Pages_Member_Signup_Settings_Policies_Link_Header",shouldTranslate:!0}),s.createElement(o.ActionWithSymbol,{action:i.partial(this.openLinkPanelFor,"termsOfUseLink")},s.createElement(o.TextLabel,{value:this.getLabelForPolicyPage("termsOfUseLink"),shouldTranslate:!1})))):null,s.createElement("div",{className:"policies-segment-header"},s.createElement(o.Divider,{long:!0}),s.createElement(o.Composites.SectionDividerWithInfoIcon,{},s.createElement(o.InfoIcon,{shouldTranslate:!0,linkText:"Pages_Member_Signup_Settings_Terms_Of_Use_Link_Label_",onLinkClick:function(){return n.openExamplePolicy(a.PRIVACY_POLICY)},text:"Pages_Member_Signup_Settings_Privacy_Policy_Tooltip"}),s.createElement(o.SectionDivider,{},e("Pages_Member_Signup_Settings_Privacy_Policy_Divider_Label"),"\n                            ")),s.createElement(o.Divider,{long:!0})),s.createElement("div",{className:"options"},s.createElement("section",{className:"option"},s.createElement(r.toggle,{name:"switch",value:this.state.privacyPolicyLinkVisible,onChange:i.partial(this.toggleEditPoliciesVisibility,"privacyPolicyLinkVisible"),label:"Pages_Member_Signup_Settings_Privacy_Policy_Toggle_Label"}))),this.state.privacyPolicyLinkVisible?s.createElement("div",{key:"ifPrivacyPolicyVisible",className:"policy-link-area"},s.createElement("div",{className:"policy-toggle-divider"},s.createElement(o.Divider,{})),s.createElement(o.Composites.ActionWithSymbolLabeled,{},s.createElement(o.TextLabel,{value:"Pages_Member_Signup_Settings_Policies_Link_Header",shouldTranslate:!0}),s.createElement(o.ActionWithSymbol,{action:i.partial(this.openLinkPanelFor,"privacyPolicyLink")},s.createElement(o.TextLabel,{value:this.getLabelForPolicyPage("privacyPolicyLink"),shouldTranslate:!1})))):null,this.isSocialAppInstalled()?s.createElement("div",{key:"shouldShowCodeOfConductSection"},s.createElement("div",{className:"policies-segment-header"},s.createElement(o.Divider,{long:!0}),s.createElement(o.Composites.SectionDividerWithInfoIcon,{},s.createElement(o.SectionDivider,{},"\n                                    ",e("Pages_Member_Signup_Settings_Code_Of_Conduct_Divider_Label"),"\n                                ")),s.createElement(o.Divider,{long:!0})),s.createElement("div",{className:"options"},s.createElement("section",{className:"option"},s.createElement(r.toggle,{name:"switch",value:this.state.codeOfConductLinkVisible,onChange:i.partial(this.toggleEditPoliciesVisibility,"codeOfConductLinkVisible"),label:"Pages_Member_Signup_Settings_Code_Of_Conduct_Toggle_Label"}))),this.state.codeOfConductLinkVisible?s.createElement("div",{key:"ifCodeOfConductVisible",className:"policy-link-area"},s.createElement("div",{className:"policy-toggle-divider"},s.createElement(o.Divider,{})),s.createElement(o.Composites.ActionWithSymbolLabeled,{},s.createElement(o.TextLabel,{value:"Pages_Member_Signup_Settings_Policies_Link_Header",shouldTranslate:!0}),s.createElement(o.ActionWithSymbol,{action:i.partial(this.openLinkPanelFor,"codeOfConductLink")},s.createElement(o.TextLabel,{value:this.getLabelForPolicyPage("codeOfConductLink"),shouldTranslate:!1})))):null):null))}.apply(this,[e,t]):null),s.createElement(o.Divider,{long:!0}),s.createElement("footer",{className:"actions"},s.createElement(r.button,{label:"Pages_Member_Signup_Settings_Done",onClick:this.applySettings,className:"btn-confirm-primary btn-md done-button"})))}return function(){var e=a.translate;return s.createElement(n,{panelName:this.props.panelName,title:e("Pages_Member_Signup_Settings_Title"),ref:"frame",helpId:this.getTabHelpId(),className:"site-members-settings-new-panel"},this.isCustomSignupEnabled()?s.createElement("div",{key:"isCustomSignupEnabled"},s.createElement(o.Composites.Banner,{},s.createElement(o.InfoIcon,{shouldTranslate:!0,text:"Pages_Member_Signup_Settings_Custom_Signup_Banner_Info_Tooltip_Content"}),s.createElement(o.SectionDivider,{},s.createElement(o.TextLabel,{value:"Pages_Member_Signup_Settings_Custom_Signup_Banner_Label",shouldTranslate:!0})))):null,t.apply(this,[e]))}.apply(this,[])}}),define("panels/focusPanels/siteMembersSettingsPanel",["react-addons-linked-state-mixin","react","create-react-class","lodash","core","helpIds","santa-editor-symbols","panels/focusPanels/siteMembersSettingsNewPanel.rt","pmrpc","coreBi","util"],function(e,t,n,r,a,s,i,o,l,c,p){"use strict";var u="google",d="facebook",m={TERMS_OF_USE:"termsOfUse",PRIVACY:"privacyPolicy",CODE_OF_CONDUCT:"codeOfConduct"},h={GENERAL:"general",SOCIAL:"social",TERMS_AND_CONDITIONS:"terms"},g={TERMS_OF_USE:s.SITE_MEMBERS.TERMS_OF_USE_EXAMPLE,PRIVACY_POLICY:s.SITE_MEMBERS.PRIVACY_POLICY_EXAMPLE};return n({displayName:"siteMembersSettingsPanel",mixins:[a.mixins.editorAPIMixin,e],getInitialState:function(){var e=this.getEditorAPI();return{selectedTab:h.GENERAL,autoApproval:e.siteMembers.isAutoApproval(),loginDialogFirst:e.siteMembers.isLoginDialogFirst(),socialLoginGoogleEnabled:e.siteMembers.isSocialLoginEnabled(u),socialLoginFacebookEnabled:e.siteMembers.isSocialLoginEnabled(d),termsOfUseLinkVisible:e.siteMembers.isSignupPoliciesFieldEnabled(m.TERMS_OF_USE),privacyPolicyLinkVisible:e.siteMembers.isSignupPoliciesFieldEnabled(m.PRIVACY),codeOfConductLinkVisible:e.siteMembers.isSignupPoliciesFieldEnabled(m.CODE_OF_CONDUCT),termsOfUseLink:e.siteMembers.getSignupPoliciesLink(m.TERMS_OF_USE),privacyPolicyLink:e.siteMembers.getSignupPoliciesLink(m.PRIVACY),codeOfConductLink:e.siteMembers.getSignupPoliciesLink(m.CODE_OF_CONDUCT),joinCommunityEnabled:!0,hasSocialPages:!1}},componentWillMount:function(){var e,t,n,a=this,s=this.getEditorAPI(),i=s.dsRead.tpa.app.getDataByAppDefId("14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9");i&&(e=s,t=i,n=function(e){return e.hasSocialPages().then(function(e){var t=s.siteMembers.isJoinCommunityEnabled();a.setState({hasSocialPages:e,joinCommunityEnabled:!r.isBoolean(t)||t})})},l.api.request(t.applicationId,{target:e.dsRead.platform.getAppsContainer()}).then(n).catch(function(){n({Error:"Application API not found."})}))},closePanel:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},getTabs:function(){return[{label:"Member_Login_Settings_General_Tab_Title",value:h.GENERAL},{label:"Member_Login_Settings_Social_Tab_Title",value:h.SOCIAL},{label:"Member_Login_Settings_Policies_Tab_Title",value:h.TERMS_AND_CONDITIONS}]},getLabelForPolicyPage:function(e){return this.state[e+"Item"]?p.link.getLinkValueAsString(this.getEditorAPI(),this.state[e+"Item"]):this.state[e]?p.link.getLinkValueAsString(this.getEditorAPI(),this.getEditorAPI().data.getById(this.state[e].replace("#",""))):p.translate("Pages_Member_Signup_Settings_Policies_Link_Label")},getTabValues:function(){return h},getArticles:function(){return g},selectTab:function(e){this.setState({selectedTab:e})},isSocialAppInstalled:function(){return this.state.hasSocialPages},toggleEditPoliciesVisibility:function(e){this.setState(_defineProperty({},e,!this.state[e]))},linkPanelCallback:function(e,t){r.isObject(t)&&this.setState(_defineProperty({},e+"Item",t)),r.isString(t)&&this.setState(_defineProperty({},""+e,t)),this.getEditorAPI().bi.event(c.events.topbar.pages.top_bar_PAGES_settings_signup_link_to_policy,{name:e,action:"set-link",type:r.isObject(t)?t.type:this.getEditorAPI().data.getById(t.replace("#",""))})},applySettings:function(){var s=this,i=this.getEditorAPI().siteMembers,e=this.state,t=e.autoApproval,n=e.loginDialogFirst,a=e.socialLoginGoogleEnabled,o=e.socialLoginFacebookEnabled;i.isAutoApproval()!==t&&i.setAutoApproval(t),i.isLoginDialogFirst()!==n&&(i.setLoginDialogFirst(n),this.getEditorAPI().bi.event(c.events.topbar.pages.top_bar_PAGES_settings_signup_settings,{name:"shown first",value:this.state.loginDialogFirst?"login":"signup"})),i.isSocialLoginEnabled(u)!==a&&(i.setSocialLoginVendorStatus(u,a),this.getEditorAPI().bi.event(c.events.topbar.pages.top_bar_PAGES_settings_google_login_changed,{googlePlus:a})),i.isSocialLoginEnabled(d)!==o&&(i.setSocialLoginVendorStatus(d,o),this.getEditorAPI().bi.event(c.events.topbar.pages.top_bar_PAGES_settings_facebook_login_changed,{facebook:o})),this.isSocialAppInstalled()&&this.state.hasSocialPages&&i.isJoinCommunityEnabled()!==this.state.joinCommunityEnabled&&(i.setJoinCommunityStatus(this.state.joinCommunityEnabled),this.getEditorAPI().bi.event(c.events.topbar.pages.top_bar_PAGES_settings_signup_settings,{name:"join the community",value:this.state.joinCommunityEnabled?"checked":"unchecked"})),r.forEach(r.values(m),function(e){var t,n,a;t=i,n=s.state,a=e,t.isSignupPoliciesFieldEnabled(a)!==n[a+"LinkVisible"]&&(n[a+"LinkItem"]||n[a+"Link"])&&(i.setSignupPoliciesFieldStatus(e,s.state[e+"LinkVisible"]),s.getEditorAPI().bi.event(c.events.topbar.pages.top_bar_PAGES_settings_signup_settings,{name:e,value:s.state[e+"LinkVisible"]?"on":"off"})),s.state[e+"LinkItem"]&&i.setSignupPoliciesLink(e,s.state[e+"LinkItem"])}),this.closePanel()},openHowToHelpCenter:function(){this.getEditorAPI().panelManager.openHelpCenter(s.SITE_MEMBERS.HOW_TO,{},{origin:this.props.panelName,panel_name:this.props.panelName})},openExamplePolicy:function(e){this.getEditorAPI().panelManager.openHelpCenter(e,{},{})},getAutoApprovalOptions:function(){return[{label:"Pages_Member_Signup_Permission_Settings_Dropdown_Automatic",value:!0},{label:"Pages_Member_Signup_Permission_Settings_Dropdown_Manual",value:!1}]},getLoginFirstOptions:function(){return[{label:"Pages_Member_Signup_Display_Settings_Dropdown_Signup",value:!1},{label:"Pages_Member_Signup_Display_Settings_Dropdown_Login",value:!0}]},onRadioButtonsClick:function(e,t){this.setState(_defineProperty({},e,t))},getGoogleSymbol:function(){return t.createElement(i.symbol,{name:"mba_social_panel_google_plus_new"})},getFacebookSymbol:function(){return t.createElement(i.symbol,{name:"mba_social_panel_facebook"})},openLinkPanelFor:function(e){var t,n,a,s=this.getEditorAPI();s.openLinkPanel({visibleSections:{PageLink:!0,AnchorLink:!0,NoLink:!1,PhoneLink:!1,WhatsAppLink:!1,ExternalLink:!1,EmailLink:!1,DocumentLink:!1,LoginToWixLink:!1,EdgeAnchorLinks:!1,PopupLink:!1},link:(t=s,n=this.state,a=e,n[a+"Item"]?n[a+"Item"]:n[a]?t.data.getById(n[a].replace("#","")):null),showAllPopups:!0,pageTabTitle:"LINK_PANEL_TAB_ANCHOR",pageTabPageDropDownTitle:"PLATFORM_LINK_MENU_PAGE_PAGE_OPTION",anchorTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_PAGELINK_LABEL",title:"Pages_Member_Signup_Settings_Policies_Link_Header",callback:r.partial(this.linkPanelCallback,e)}),this.getEditorAPI().bi.event(c.events.topbar.pages.top_bar_PAGES_settings_signup_link_to_policy,{name:e,action:"click",type:"none"})},isDeveloperModeEnabled:function(){return this.getEditorAPI().developerMode.isEnabled()},isCustomSignupEnabled:function(){return!!this.getEditorAPI().siteMembers.getCustomSignupPageId()},getCustomSignupLinkText:function(){return this.isCustomSignupEnabled()?p.translate("Pages_Member_Signup_Settings_Custom_Signup_Edit_Link"):p.translate("Pages_Member_Signup_Settings_Custom_Signup_Enable_Link")},getTabContentClass:function(){return"tab-content "+(this.isCustomSignupEnabled()?"with-banner":"")},openCustomSignupPanel:function(){this.getEditorAPI().panelManager.openPanel("panels.toolPanels.customSignupSettingsPanel",{panelName:"panels.toolPanels.customSignupSettingsPanel"},!0),this.getEditorAPI().bi.event(c.events.topbar.pages.custom_signup_enable)},getTabHelpId:function(){switch(this.state.selectedTab){case h.GENERAL:return s.SITE_MEMBERS.GENERAL;case h.SOCIAL:return s.SITE_MEMBERS.SOCIAL_AND_COMMUNITY;case h.TERMS_AND_CONDITIONS:return s.SITE_MEMBERS.POLICIES;default:return s.SITE_MEMBERS.SETTINGS}},render:function(){return o.apply(this)}})}),define("panels/focusPanels/newFeaturesVideoPanel",["create-react-class","lodash","core","panels/focusPanels/focusPanelMixin","coreBi","panels/focusPanels/welcomeScreenVideoPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=s;return e({displayName:"newFeaturesVideoPanel",mixins:[n.mixins.editorAPIMixin,a],getBIEvent:function(){return o.events.newFeaturesVideoPanel.NEW_FEATURES_INTRO_VIDEO_CLOSE},render:i})}),define("panels/commonControls/buttonWithSpinner/buttonWithSpinner.rt",["react","lodash","baseUI","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement(a.Button,{className:t(this.getButtonClasses()).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")+" "+(this.props.className||""),disabled:this.props.disabled,onClick:this.onClick},e.createElement("div",{className:"btn-content "+t({"hidden-content":!this.isStatus("initial")}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")}," ",this.props.children," "),e.createElement("div",{className:"intermidiate-states"},this.isStatus("pending")?e.createElement("div",{className:"spinner",key:"spinner"}):null,this.isStatus("success")?e.createElement("div",{className:"appearance-container",key:"success"},e.createElement(n.symbol,{name:"check",className:"success-icon"})):null,this.isStatus("error")?e.createElement("div",{className:"appearance-container",key:"error"},e.createElement("div",{className:"error-container"},"!")):null))}}),define("panels/commonControls/buttonWithSpinner/buttonWithSpinner",["create-react-class","prop-types","lodash","panels/commonControls/buttonWithSpinner/buttonWithSpinner.rt"],function(e,t,n,a){"use strict";return e({displayName:"ButtonWithSpinner",propTypes:{class:t.string,disabled:t.bool,onClick:t.func,fadeDuration:t.number,dontReturnToInitialState:t.bool,allowToClickAfterFail:t.bool},getInitialState:function(){return{status:"initial",hadFail:!1,clickCounter:0}},getButtonClasses:function(){return{"btn-with-spinner":!0,"success-status":"success"===this.state.status,"error-status":"error"===this.state.status}},onClick:function(e){var t=0===this.state.clickCounter&&this.props.dontReturnToInitialState,n=this.props.allowToClickAfterFail&&this.state.hadFail;(t||n)&&(this.setState({status:"pending"}),this.props.onClick(e,this.onSuccess,this.onError)),this.setState({clickCounter:this.state.clickCounter+1})},onSuccess:function(){this.changeStatusAndReturnToInitial("success")},onError:function(){this.changeStatusAndReturnToInitial("error"),this.setState({hadFail:!0})},changeStatusAndReturnToInitial:function(e){var t="error"===e&&this.props.allowToClickAfterFail;this.setState({status:e}),!t&&this.props.dontReturnToInitialState||window.setTimeout(function(){this.setState({status:"initial"})}.bind(this),this.props.fadeDuraion||2300)},isStatus:function(e){return e===this.state.status},render:a})}),define("panels/focusPanels/accessibilityPanel.rt",["react","lodash","baseUILib","baseUI","util","panels/frames/focusPanelFrame","panels/commonControls/buttonWithSpinner/buttonWithSpinner","helpIds","experiment"],function(e,t,n,a,s,i,o,r,l){"use strict";return function(){return e.createElement(i,{panelName:this.props.panelName,shouldHideHeader:!0,onClose:this.onPanelClose},e.createElement("div",{className:"accessibility-panel"},e.createElement(n.PanelHeaderCenteredText,{title:"SITE_ACCESSIBLITY_SETTINGS_PANEL_HEADER_TITLE",subtitle:"SITE_ACCESSIBLITY_SETTINGS_PANEL_SUB_TITLE",onHelp:this.openHeaderHelp,onClose:this.closeByXButton}),e.createElement("div",{className:"accessibility-panel-content"},e.createElement("div",{className:"accessibility-settings"},e.createElement("div",{className:"accessibility-settings-block"},e.createElement("div",{className:"accessibility-settings-block-icon"},e.createElement(a.symbol,{name:"visualFocus"})),e.createElement("div",{className:"accessibility-settings-block-info"},e.createElement("div",{className:"accessibility-settings-block-title"},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_FOCUS_TITLE")),e.createElement("div",{className:"accessibility-settings-block-description"},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_FOCUS_TEXT"))),e.createElement("div",{className:"accessibility-settings-block-control"},e.createElement(n.Tooltip,{content:"SITE_ACCESSIBLITY_SETTINGS_PANEL_FOCUS_TOOLTIP",isOpen:this.state.visualFocusTootlipOpen,disabled:this.state.visualFocusEnabled},e.createElement(n.ToggleSwitch,{value:this.state.visualFocusEnabled,onChange:this.toggleVisualFocus})))),e.createElement("div",{className:"accessibility-settings-block"},e.createElement("div",{className:"accessibility-settings-block-icon"},e.createElement(a.symbol,{name:"keyboardAccessibility"})),e.createElement("div",{className:"accessibility-settings-block-info"},e.createElement("div",{className:"accessibility-settings-block-title"},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_FOCUS2_TITLE")),e.createElement("div",{className:"accessibility-settings-block-description"},"\n                            ",s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_FOCUS2_TEXT"),"\n                            ",e.createElement("a",{onClick:this.openReorderToggleHelp,className:"accessibility-settings-block-link"},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_FOCUS2_LINK")))),e.createElement("div",{className:"accessibility-settings-block-control"},e.createElement(n.ToggleSwitch,{value:this.getDOMReorderActivated(),onChange:this.toggleDOMReorder}))),l.isOpen("se_advancedA11y")?e.createElement("div",{className:"accessibility-settings-block",key:"3047"},e.createElement("div",{className:"accessibility-settings-block-icon"},e.createElement(a.symbol,{name:"advancedSettings"})),e.createElement("div",{className:"accessibility-settings-block-info"},e.createElement("div",{className:"accessibility-settings-block-title"},"\n                            ",s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_ADVANCED_TITLE"),"\n                        "),e.createElement("div",{className:"accessibility-settings-block-description"},"\n                            ",s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_ADVANCED_TEXT"),"\n                            ",e.createElement("a",{onClick:this.openAdvancedA11yHelp,className:"accessibility-settings-block-link"},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_ADVANCED_LINK")))),e.createElement("div",{className:"accessibility-settings-block-control"},e.createElement(n.ToggleSwitch,{automationId:"toggle-advanced-a11y",value:this.isAdvancedA11yEnabled(),onChange:this.toggleAdvancedA11y}))):null)),e.createElement("div",{className:"accessibility-panel-footer"},e.createElement("div",{className:"accessibility-panel-footer-content"},e.createElement("div",{className:"accessibility-learn-more"},e.createElement("span",{className:"accessibility-learn-more-text"},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_LINK_TO_KB_TEXT")),e.createElement(n.Button,{className:"btn-text accessibility-learn-more-link",onClick:this.openLearnMoreLink},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_LINK_TO_KB"))),e.createElement(n.Button,{className:"accessibility-done-btn btn-confirm-secondary btn-md",onClick:this.closeByCloseButton},s.translate("SITE_ACCESSIBLITY_SETTINGS_PANEL_CLOSE_BUTTON"))))))}}),define("panels/focusPanels/accessibilityPanel",["create-react-class","lodash","stateManagement","core","helpIds","coreBi","constants","panels/focusPanels/accessibilityPanel.rt"],function(e,n,t,a,s,i,o,r){"use strict";var l=t.editorPlugins.userPreferences.actions,c=t.editorPlugins.userPreferences.selectors,p=t.editorPlugins.panels.actions.openHelpCenter;return e({propTypes:{},displayName:"accessibilityPanel",mixins:[a.mixins.editorAPIMixin],successStatusDuration:1e3,getInitialState:function(){return{visualFocusEnabled:this.getEditorAPI().accessibility.visualFocus.get(),visualFocusTootlipOpen:!1}},componentDidMount:function(){var e=this.getEditorAPI();e.bi.event(i.events.accessibilityPanel.opened,{visual_ind_toggle:e.accessibility.visualFocus.get()?"on":"off",automatically_order_dom_toggle:this.getDOMReorderActivated()?"on":"off",site_id:e.dsRead.generalInfo.getSiteId()})},openHelpLink:function(e){var t={learn_more:Boolean(e),panel_name:this.props.panelName,origin:o.BI.HELP.ORIGIN.PANEL};this.getEditorAPI().panelManager.openHelpCenter(s.EXTERNAL.ACCESSIBILITY_PANEL,{},t)},openHeaderHelp:function(){this.openHelpLink(!1)},openLearnMoreLink:function(){this.openHelpLink(!0)},close:function(e){var t=this.getEditorAPI();t.bi.event(i.events.accessibilityPanel.close,{automatically_order_dom_toggle:this.getDOMReorderActivated()?"on":"off",visual_ind_toggle:t.accessibility.visualFocus.get()?"on":"off",closeMethod:e,site_id:t.dsRead.generalInfo.getSiteId()}),t.panelManager.closePanelByName(this.props.panelName)},closeByXButton:function(){this.close("X")},closeByCloseButton:function(){this.close("close")},onPanelClose:function(e){this.close(e)},openReorderToggleHelp:function(){var e=this.getEditorAPI();e.bi.event(i.events.accessibilityPanel.click_learn_more_toggle_accessibility),e.panelManager.openHelpCenter("0bd07ac2-acaf-4521-a5e6-c7534e283972")},getDOMReorderActivated:function(){var e=this.getEditorAPI().pages.data.get("masterPage").autoDomReorder;return!!n.isUndefined(e)||e},toggleDOMReorder:function(){var e=this.getEditorAPI(),t=!this.getDOMReorderActivated();e.bi.event(i.events.accessibilityPanel.toggle_accessibility_reorder,{value:t?"on":"off"}),e.pages.data.update("masterPage",{autoDomReorder:t})},toggleVisualFocus:function(){var e=this.getEditorAPI(),t=!this.state.visualFocusEnabled;this.getEditorAPI().accessibility.visualFocus.set(t),this.setState({visualFocusEnabled:t,visualFocusTootlipOpen:!t}),e.bi.event(i.events.accessibilityPanel.click_enable_visual_indicator,{site_id:e.dsRead.generalInfo.getSiteId(),value:t?"ON":"OFF"}),n.delay(function(){this.setState({visualFocusTootlipOpen:!1})}.bind(this),4e3)},isAdvancedA11yEnabled:function(){var e=this.getEditorAPI().store.getState();return c.getSiteUserPreferences(o.USER_PREFS.ACCESSIBILITY.ADVANCED_SETTINGS)(e)},openAdvancedA11yHelp:function(){this.getEditorAPI().store.dispatch(p("6a4966fb-8ef4-45c7-8cb9-10dde659392e"))},toggleAdvancedA11y:function(){this.getEditorAPI().store.dispatch(l.setSiteUserPreferences(o.USER_PREFS.ACCESSIBILITY.ADVANCED_SETTINGS,!this.isAdvancedA11yEnabled()))},render:r})}),define("panels/focusPanels/mobileFriendlyPanel.rt",["react","lodash","baseUILib","baseUI","util","panels/frames/focusPanelFrame","helpIds","experiment"],function(e,t,n,a,s,i,o,r){"use strict";return function(){return e.createElement(i,{panelName:this.props.panelName,shouldHideHeader:!0},e.createElement("div",{className:"mobile-friendly-panel"},e.createElement(n.PanelHeaderCenteredText,{title:"Mobile_Friendly_Settings_Panel_Header_Title",subtitle:"Mobile_Friendly_Settings_Panel_Header_Sub_Title",onHelp:this.openHelpLink,onClose:this.close.bind(this,"X")}),e.createElement("div",{className:"mobile-friendly-panel-content"},e.createElement("div",{className:"mobile-friendly-settings"},e.createElement("div",{className:"mobile-friendly-settings-block"},e.createElement("div",{className:"mobile-friendly-settings-block-icon"},e.createElement(a.symbol,{name:"mobileFriendly"})),e.createElement("div",{className:"mobile-friendly-settings-block-info"},e.createElement("div",{className:"mobile-friendly-settings-block-title"},s.translate("Mobile_Friendly_Settings_Panel_Toogle_Label")),e.createElement("div",{className:"mobile-friendly-settings-block-description"},s.translate("Mobile_Friendly_Settings_Panel_Toogle_Text"))),e.createElement("div",{className:"mobile-friendly-settings-block-control"},e.createElement(n.ToggleSwitch,{className:"mobile-friendly-toggle",value:this.props.isMobileOptimizedSite,onChange:this.toggleMobileOptimized}))))),e.createElement("div",{className:"mobile-friendly-panel-footer"},e.createElement("div",{className:"mobile-friendly-panel-footer-content"},e.createElement("div",{className:"mobile-friendly-learn-more"},e.createElement("span",{className:"mobile-friendly-learn-more-text"},s.translate("Mobile_Friendly_Settings_Panel_Link_to_KB_text")),e.createElement(n.Button,{className:"btn-text mobile-friendly-learn-more-link",onClick:this.openHelpLink},s.translate("Mobile_Friendly_Settings_Panel_Link_to_KB_link"))),e.createElement(n.Button,{className:"mobile-friendly-done-btn btn-confirm-secondary btn-md",onClick:this.close.bind(this,"close")},"\n                    ",s.translate("Mobile_Friendly_SETTINGS_PANEL_CLOSE_BUTTON"),"\n                ")))))}}),define("panels/focusPanels/mobileFriendlyPanel",["create-react-class","lodash","core","helpIds","coreBi","constants","util","panels/focusPanels/mobileFriendlyPanel.rt","prop-types","stateManagement"],function(e,t,n,a,s,i,o,r,l,c){"use strict";var p=e({displayName:"mobileFriendlyPanel",mixins:[n.mixins.editorAPIMixin],propTypes:{setMobileOptimizedSite:l.func.isRequired,isMobileOptimizedSite:l.bool.isRequired},openHelpLink:function(){var e=this.getEditorAPI(),t={panel_name:this.props.panelName,origin:i.BI.HELP.ORIGIN.PANEL};e.panelManager.openHelpCenter(a.EXTERNAL.MOBILE_FRIENDLY,{},t)},close:function(e){var t=this.getEditorAPI();t.bi.event(s.events.panels.PANEL_CLOSED,{panel_name:this.props.panelName,origin:e}),t.panelManager.closePanelByName(this.props.panelName)},toggleMobileOptimized:function(){var e=this.getEditorAPI(),t=!this.props.isMobileOptimizedSite;this.props.setMobileOptimizedSite(t),e.bi.event(s.events.mobileFriendlyPanel.toggle_click,{origin:this.props.panelName,status:t})},render:r});return o.hoc.connect(o.hoc.STORES.DS_ONLY,function(e){return{isMobileOptimizedSite:e.dsRead.mobile.isOptimized()}},function(t){return{setMobileOptimizedSite:function(e){return t(c.editorPlugins.mobile.actions.setMobileOptimizedSite(e))}}})(p)}),define("panels/focusPanels/mobileEditorFirstTimeVideoPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",title:a.translate("Intro_video_mobile_user_dialog_title"),subtitle:a.translate("Intro_video_mobile_user_dialog_subtitle"),linkedVideoData:this.videoUrl,content:this.getContent(),panelName:this.props.panelName,shouldNotCloseOnBlur:!0,onCloseByX:this.sendBIEventWhenClosedByX,onCloseByESC:this.sendBIEventWhenClosedByESC},e.createElement("div",{className:"buttons"},e.createElement(s.button,{label:"Intro_video_mobile_user_dialog_button",onClick:function(){this.startNow()}.bind(this)})))}}),define("panels/focusPanels/mobileEditorFirstTimeVideoPanel",["create-react-class","lodash","core","panels/focusPanels/mobileEditorFirstTimeVideoPanel.rt","coreBi","prop-types"],function(e,t,n,a,s,i){"use strict";var o="www.youtube.com/embed/CCFWEJ6r3NA";return e({displayName:"mobileEditorFirstTimeVideoPanel",mixins:[n.mixins.editorAPIMixin],propTypes:{panelName:i.string.isRequired},videoUrl:"//"+o+"?modestbranding=1;rel=0&frameborder=0;allowfullscreen=0;autoplay=1;controls=1;autohide=1;showinfo=0",close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},startNow:function(){this.sendBIEvent("startNow"),this.close()},sendBIEventWhenClosedByX:function(){this.sendBIEvent("xButton"),this.close()},sendBIEventWhenClosedByESC:function(){this.sendBIEvent("ESC"),this.close()},getContent:function(){var e={line1:"Intro_video_mobile_user_dialog_text1",line2:"Intro_video_mobile_user_dialog_text2"};return e},sendBIEvent:function(e){var t=this.getEditorAPI(),n={origin:e,site_id:t.dsRead.generalInfo.getSiteId(),duration:Date.now()-this.displayTime,video_url:o,panel_name:this.constructor.displayName};t.bi.event(s.events.newUserIntroVideoPanel.INTRO_VIDEO_CLOSE,n)},componentDidMount:function(){this.displayTime=Date.now()},render:a})}),define("panels/focusPanels/mobileEditorFirstTimePanel.rt",["react","lodash","panels/focusPanels/popupTemplate","constants"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,className:"mobile-editor-first-time",h1text:"Notification_Box_Mobile_FirstTime_Title",imageClassName:"check-your-mobile-site-image",bodyText:"Notification_Box_Mobile_FirstTime_Text",dontShowAgainKey:a.USER_PREFS.MOBILE_EDITOR.FIRST_TIME_PANEL.DONT_SHOW_AGAIN,shouldNotCloseOnBlur:!0,userPrefType:"site"})}}),define("panels/focusPanels/mobileEditorFirstTimePanel",["create-react-class","prop-types","core","panels/focusPanels/mobileEditorFirstTimePanel.rt"],function(e,t,n,a){"use strict";return e({displayName:"mobileEditorFirstTimePanel",propTypes:{panelName:t.string.isRequired},mixins:[n.mixins.editorAPIMixin],render:a})}),define("panels/focusPanels/appInstallerPanel.rt",["react","lodash","panels/frames/focusPanelFrame","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{panelName:"appInstallerPanel",shouldHideHelp:!0,shouldHideHeader:!0,className:"appInstaller-panel"},e.createElement("div",{className:"appInstaller-panel-inner"},e.createElement("div",{className:"header"},"\n            ",a.translate("SITE_APPINSTALLER_PANEL_TITLE"),"\n        "),e.createElement("div",{className:"progress"},e.createElement("div",{className:"progress-bar"},e.createElement("div",{className:"filled",style:this.getProgressBarStyle()})),this.props.done?null:e.createElement("div",{key:"counter",className:"counter"},"\n                ",this.props.finishedCounter+1,"/",this.props.totalApps,"\n            "),this.props.done?e.createElement("div",{key:"checkmark",className:"checkmark"},e.createElement(s.symbol,{name:"check"})):null),this.props.done?null:e.createElement("div",{key:"description",className:"description"},"\n            ",a.translate("SITE_APPINSTALLER_PANEL_SUBTITLE"),"\n            "," ","\n            ",this.props.installingAppName,"\n        "),this.props.done?e.createElement("div",{key:"description",className:"description"},"\n            ",a.translate("SITE_APPINSTALLER_PANEL_DONE"),"\n        "):null))}}),define("panels/focusPanels/appInstallerPanel",["create-react-class","prop-types","lodash","stateManagement","util","panels/focusPanels/appInstallerPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=e({displayName:"AppInstallerPanel",propTypes:{installingAppName:t.string,finishedCounter:t.number,done:t.bool},getProgressBarStyle:function(){return this.props.done?{width:"100%",animation:"progressBarDone 0.8s"}:{width:"90%",animation:"progressBar "+this.props.totalApps*Number(this.props.progressBarPace)+"s"}},render:i});return s.hoc.connect(s.hoc.STORES.STATE_ONLY,function(e){var t=e.state;return a.appInstaller.selectors.getAppsInstallerPanelData(t)})(s.hoc.renderWhenMutated(o))}),define("panels/focusPanels/backToADIPanel.rt",["react","lodash","baseUILib","baseUI","util","panels/frames/focusPanelFrame"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(i,{key:"backToADIPanel",shouldHideHelp:!0,className:"back-to-adi-panel",onClose:this.onPanelClose,title:s.translate("TOPBAR_BacktoADI_MSG_TITLE"),panelName:"back-to-adi"},e.createElement("div",{className:"back-to-adi-panel-content"},e.createElement("div",{className:"svg-container"},e.createElement(a.symbol,{name:"BackToADIPopUp"})),e.createElement("div",{className:"description-container"},e.createElement("div",{className:"description-top"},e.createElement("span",{className:"description-text"},s.translate("TOPBAR_BacktoADI_MSG_BODY1"))),e.createElement("div",{className:"description-bottom"},e.createElement("span",{className:"description-text"},s.translate("TOPBAR_BacktoADI_MSG_BODY2")),e.createElement(n.Button,{className:"description-text btn-text description-link",onClick:this.openSiteHistory},s.translate("TOPBAR_BacktoADI_MSG_LINK")))),e.createElement("div",{className:"footer-buttons"},e.createElement(a.button,{onClick:this.backToEditorButton,className:"btn-confirm-secondary btn-md footer-button",label:"TOPBAR_BacktoADI_MSG_BUTTON2"}),e.createElement(a.button,{onClick:this.backToADI,className:"btn-confirm-primary btn-md footer-button",label:"TOPBAR_BacktoADI_MSG_BUTTON1"}))))}}),define("panels/focusPanels/backToADIPanel",["create-react-class","lodash","util","core","coreBi","panels/focusPanels/backToADIPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({propTypes:{},displayName:"backToADIPanel",mixins:[a.mixins.editorAPIMixin],openSiteHistory:function(){this.getEditorAPI().account.openSiteHistory(),this.sendBI("Site history")},close:function(){var e=this.getEditorAPI();this.sendBI("Stay in the editor"),e.panelManager.closePanelByName(this.props.panelName)},closeByXButton:function(){this.close("X")},backToEditorButton:function(){this.close("backToEditor")},redirectToADI:function(){var e=this;this.getEditorAPI().site.restoreToADI().then(function(){e.getEditorAPI().panelManager.closeAllPanels(),n.fedopsLogger.interactionEnded(n.fedopsLogger.INTERACTIONS.BACK_TO_ADI),window.location=n.editorModel.onboardingEditorUrl}).catch(function(e){n.ravenUtils.captureError(e,{tags:{backToADI:!0}})})},backToADI:function(){n.fedopsLogger.interactionStarted(n.fedopsLogger.INTERACTIONS.BACK_TO_ADI),this.sendBI("Back to Wix ADI"),this.redirectToADI()},onConfirm:function(){this.props.onButtonClick&&this.props.onButtonClick(!0)},sendBI:function(e){var t=this.getEditorAPI();t.bi.event(s.events.backToADIFromEditor.backToWixADIPanelClicked,{category:e,esi:n.editorModel.editorSessionId,site_id:t.dsRead.generalInfo.getSiteId()})},onPanelClose:function(e){this.close(e)},render:i})}),define("panels/focusPanels/packageAndUpdatePanel/sections/tasksProgressSection.rt",["react","lodash","baseUILib"],function(n,e,a){"use strict";return function(e,t){return n.createElement("div",{className:"tasks-section"},n.createElement(a.Composites.ProgressBar,{},n.createElement(a.TextLabel,{type:"T03",value:e.title}),n.createElement(a.ProgressBar,{automationId:"progress-bar-percentage",progress:e.tasksDone,progressMax:e.totalNumOfTasks}),n.createElement(a.TextLabel,{automationId:"task-name",type:"T02",value:e.taskDisplayName})))}}),define("panels/focusPanels/packageAndUpdatePanel/sections/tasksProgressSection",["prop-types","lodash","panels/focusPanels/packageAndUpdatePanel/sections/tasksProgressSection.rt"],function(e,t,n){"use strict";var a=function(e){return n(e)};return a.displayName="PackageTasksSection",a.propTypes={tasksDone:e.number.isRequired,taskDisplayName:e.string.isRequired,title:e.string.isRequired,totalNumOfTasks:e.number.isRequired},a}),define("panels/focusPanels/packageAndUpdatePanel/sections/firstSuccessSection.rt",["react","lodash","baseUILib","santa-editor-symbols"],function(n,e,a,s){"use strict";return function(e,t){return n.createElement("div",{"data-aid":"first-success-section"},n.createElement(a.Composites.PopupMediumSize,{className:"composite-full-height"},n.createElement(a.Composites.BigPanelHeaderWithIllustration,{},n.createElement(a.PanelHeaderCenteredText,{automationId:"first-success-header",title:e.content.header,subtitle:e.content.headerSubtitle,titleType:"T16",onHelp:e.onHelp,onClose:e.closePanel}),n.createElement(a.PanelHeaderIllustration,{blueStripHeight:85},n.createElement(s.symbol,{name:"successMessageIllustration"}))),n.createElement(a.Composites.PanelContent,{"class-name":"first-success-panel-content"},n.createElement(a.Composites.PromotionalList,{},n.createElement(a.PromotionalList,{items:e.content.items}))),n.createElement(a.Composites.ActionSetHorizontalSpaced,{key:"first-result-buttons"},n.createElement(a.Button,{className:"btn-text",onClick:function(){e.textButton.onClick()}.bind(this)},n.createElement(a.TextLabel,{value:e.textButton.label,automationId:"text-button-label"})),n.createElement(a.Button,{automationId:"primary-button-package-and-update-panel",className:"primary",onClick:function(){e.primaryButton.onClick()}.bind(this)},n.createElement(a.TextLabel,{value:e.primaryButton.label,automationId:"primary-button-label"})))))}}),define("panels/focusPanels/packageAndUpdatePanel/sections/firstSuccessSection",["prop-types","panels/focusPanels/packageAndUpdatePanel/sections/firstSuccessSection.rt"],function(e,t){"use strict";var n=function(e){return t(e)};return n.propTypes={content:e.shape({header:e.string.isRequired,headerSubtitle:e.string.isRequired,items:e.arrayOf(e.string).isRequired}).isRequired,closePanel:e.func.isRequired,onHelp:e.func.isRequired,primaryButton:e.shape({label:e.string.isRequired,onClick:e.func.isRequired}).isRequired,textButton:e.shape({label:e.string.isRequired,onClick:e.func.isRequired}).isRequired},n}),define("panels/focusPanels/packageAndUpdatePanel/sections/errorSection.rt",["react","lodash","baseUILib","baseUI","util"],function(n,e,a,s,t){"use strict";return function(e,t){return n.createElement("div",{className:"error-section"},n.createElement(a.Composites.PopupSmallSize,{className:"composite-full-height"},n.createElement(a.PanelHeader,{titleType:"T16",noHelpBtn:!0,onClose:e.closePanel,className:"dark"},n.createElement("span",{"data-aid":"header-title"},e.content.header)),n.createElement(a.Composites.PanelContent,{className:"package-panel-content"},n.createElement(a.Composites.RichTextWithIllustration,{},n.createElement(a.Illustration,{},n.createElement(s.symbol,{name:"plaster"})),n.createElement(a.Composites.RichText,{},n.createElement(a.RichText,{},n.createElement("span",{"data-aid":"error-message",type:"T03"},e.content.message))))),n.createElement(a.Composites.ActionSetHorizontal,{},n.createElement(a.Button,{automationId:"primary-button-package-and-update-panel",className:"primary",onClick:function(){e.primaryButton.onClick()}.bind(this)},n.createElement(a.TextLabel,{value:e.primaryButton.label,automationId:"primary-button-label"})))))}}),define("panels/focusPanels/packageAndUpdatePanel/sections/errorSection",["prop-types","lodash","panels/focusPanels/packageAndUpdatePanel/sections/errorSection.rt"],function(e,t,n){"use strict";var a=function(e){return n(e)};return a.propTypes={closePanel:e.func.isRequired,content:e.shape({header:e.string.isRequired,message:e.string.isRequired}).isRequired,onHelp:e.func,primaryButton:e.shape({label:e.string.isRequired,onClick:e.func.isRequired}).isRequired},a}),define("panels/focusPanels/packageAndUpdatePanel/packageAndUpdatePanel.rt",["react","lodash","baseUILib","util","panels/frames/focusPanelFrame","panels/focusPanels/packageAndUpdatePanel/sections/tasksProgressSection","panels/focusPanels/packageAndUpdatePanel/sections/firstSuccessSection","panels/focusPanels/packageAndUpdatePanel/sections/errorSection"],function(e,t,n,a,s,i,o,r){"use strict";return function(){return e.createElement(s,{automationId:"app-studio-package-and-update-panel",panelName:this.props.panelName,shouldHideHeader:!0,shouldNotCloseOnBlur:this.isProgressStep(),className:this.props.className,keyboardShortcuts:this.getKeyboardShortcuts()},this.isProgressStep()?e.createElement(i,{key:"tasksSection",tasksDone:this.props.tasksDone,taskDisplayName:this.props.taskDisplayName,totalNumOfTasks:this.props.totalNumOfTasks,title:this.props.tasksTitle}):null,this.isFirstResultStep()?e.createElement(o,{key:"secondSuccessStep",content:this.props.firstResultSectionContent,closePanel:this.props.closePanel,onHelp:this.props.firstSuccessOnHelp,primaryButton:this.props.firstResultPrimaryButton,textButton:this.props.firstResultTextButton}):null,this.isError()?e.createElement(r,{key:"errorSection",content:this.props.errorSectionContent,primaryButton:this.props.errorSectionPrimaryButton,closePanel:this.props.closePanel}):null)}}),define("panels/focusPanels/packageAndUpdatePanel/packageAndUpdatePanel",["react","prop-types","util","lodash","panels/focusPanels/packageAndUpdatePanel/packageAndUpdatePanel.rt","constants"],function(t,e,n,a,s,i){"use strict";var o=i.PACKAGE_UPDATE_PANEL_STEPS,r=o.TASKS,l=o.FIRST_SUCCESS,c=o.ERROR,p=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.isProgressStep=function(){return t.props.currStep===r},t.isFirstResultStep=function(){return t.props.currStep===l},t.isError=function(){return t.props.currStep===c},t.getKeyboardShortcuts=function(){return{esc:function(){t.isProgressStep()||t.props.closePanel()}}},t}return _inherits(n,t.Component),_createClass(n,[{key:"componentDidUpdate",value:function(){!this.props.isDone||this.isFirstResultStep()||this.isError()||this.props.closePanel()}},{key:"render",value:function(){return s.call(this)}}]),n}();return p.propTypes={className:e.string,closePanel:e.func.isRequired,currStep:e.string.isRequired,errorSectionContent:e.shape({header:e.string.isRequired,message:e.string.isRequired,fixSteps:e.arrayOf(e.string)}),errorSectionPrimaryButton:e.shape({label:e.string.isRequired,onClick:e.func.isRequired}),firstResultContent:e.shape({header:e.string.isRequired,headerSubtitle:e.string.isRequired,items:e.arrayOf(e.string).isRequired}),firstResultPrimaryButton:e.shape({label:e.string.isRequired,onClick:e.func.isRequired}),firstResultTextButton:e.shape({label:e.string.isRequired,onClick:e.func.isRequired}),firstSuccessOnHelp:e.func,isDone:e.bool,tasksDone:e.number,taskDisplayName:e.string,tasksTitle:e.string,totalNumOfTasks:e.number},n.hoc.renderWhenMutated(p)}),define("panels/focusPanels/menuContainerUpgradePanel.rt",["react","lodash","baseUILib","santa-editor-symbols","panels/frames/focusPanelFrame"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(s,{automationId:this.props.panelName,panelName:this.props.panelName,shouldHideHeader:!0},e.createElement(n.Composites.PopupLargeSize,{className:"composite-full-height"},e.createElement(n.Composites.BigPanelHeaderWithIllustration,{},e.createElement(n.PanelHeaderCenteredText,{title:this.props.content.header,subtitle:this.props.content.headerSubtitle,titleType:"T16",onHelp:this.onHelp,onClose:this.closePanel}),e.createElement(n.PanelHeaderIllustration,{blueStripHeight:this.getBlueStripHeight()},e.createElement("img",{className:"illustration",src:this.getIllustrationSrc()}))),e.createElement(n.Composites.PanelContent,{},e.createElement(n.Composites.PromotionalList,{},e.createElement(n.PromotionalList,{items:this.props.content.items}))),e.createElement(n.Composites.ActionSetHorizontal,{},e.createElement(n.Button,{className:"secondary",onClick:function(){this.closePanel()}.bind(this)},e.createElement(n.TextLabel,{value:this.props.content.buttons.cancel})),e.createElement(n.Button,{className:"primary",onClick:function(){this.onConfirm()}.bind(this)},e.createElement(n.TextLabel,{value:this.props.content.buttons.upgrade})))))}}),define("panels/focusPanels/menuContainerUpgradePanelMapper",["stateManagement","coreBi"],function(s,i){"use strict";var o=function(e,t,n){return n.editorAPI};return{mapDispatchToProps:function(e,t){var n=t.biEventOrigin,a=e(o);return{closePanel:a.panelManager.closePanelByName,openHelpCenter:a.panelManager.openHelpCenter,sendBiEventForMenuUpgrade:function(){if(n){var e=s.editorPlugins.bi.actions.event;a.store.dispatch(e(i.events.mobileEditor.menuContainer.UPGRADE,{origin:n}))}},upgradeToMenuContainer:function(){a.selection.deselectComponents(),a.closeRightClickMenu(),a.mobile.menuContainer.upgrade(),a.waitForChangesApplied(function(){a.store.dispatch(s.inlinePopup.actions.closeAll()),a.store.dispatch(s.selection.actions.selectComponents([a.mobile.menuContainer.toggle.get()])),a.openFirstTimePanel(a.mobile.menuContainer.toggle.get()),a.history.add("tinyMenu upgraded to menuContainer")})}}}}}),define("panels/focusPanels/menuContainerUpgradePanel",["create-react-class","prop-types","util","panels/focusPanels/menuContainerUpgradePanel.rt","panels/focusPanels/menuContainerUpgradePanelMapper"],function(e,t,n,a,s){"use strict";var i=n.hoc,o=i.connect,r=i.renderWhenMutated,l=i.STORES.EDITOR_API;function c(){return 2===n.browserUtil.getDevicePixelRatio()}var p=e({displayName:"menuContainerUpgradePanel",propTypes:{panelName:t.string,content:t.object,biEventOrigin:t.string,sendBiEventForMenuUpgrade:t.func.isRequired,upgradeToMenuContainer:t.func.isRequired,helpId:t.string},getDefaultProps:function(){return{panelName:"panels.focusPanels.menuContainerUpgradePanel",helpId:"bd3bb209-b7a6-4f94-9074-fb71a4bda45f",content:{header:"Mobile_Menu_Update_Popup_Title",headerSubtitle:"Mobile_Menu_Update_Popup_Subtitle",items:["Mobile_Menu_Update_Popup_Bullet1","Mobile_Menu_Update_Popup_Bullet2","Mobile_Menu_Update_Popup_Bullet3","Mobile_Menu_Update_Popup_Bullet4"],buttons:{cancel:"Mobile_Menu_Update_Popup_Cancel_Button",upgrade:"Mobile_Menu_Update_Popup_Start_Button"}}}},onConfirm:function(){this.props.sendBiEventForMenuUpgrade(),this.props.upgradeToMenuContainer(),this.props.closePanel(this.props.panelName)},closePanel:function(){this.props.closePanel(this.props.panelName)},onHelp:function(){this.props.openHelpCenter()},getIllustrationSrc:function(){var e=c()?"panels/focusPanels/menuContainerUpgradeRetina.gif":"panels/focusPanels/menuContainerUpgrade.gif";return n.media.getMediaUrl(e)},getBlueStripHeight:function(){return c()?194:97},render:a});return o(l,null,s.mapDispatchToProps)(r(p))}),define("panels/focusPanels/apiDefinitionPropertySchema/propertyTypes",["constants"],function(e){"use strict";var t,n=e.APP_STUDIO.PROP_TYPES;return{primitives:(_defineProperty(t={},n.TEXT,{value:n.TEXT,label:"AppStudio_WidgetAPI_PropertyType_Dropdown_Text",automationId:"property-default-string",title:"Bla",defaultValue:"",validations:["maxLength"],displayName:"AppStudio_WidgetAPI_DefaultValue_Label"}),_defineProperty(t,n.NUMBER,{value:n.NUMBER,label:"AppStudio_WidgetAPI_PropertyType_Dropdown_Number",automationId:"property-default-number",defaultValue:0,validations:["min","max","step"],displayName:"AppStudio_WidgetAPI_Number_DefaultValue_Label"}),_defineProperty(t,n.BOOLEAN,{value:n.BOOLEAN,label:"AppStudio_WidgetAPI_PropertyType_Dropdown_Boolean",automationId:"property-default-boolean",defaultValue:!1,displayName:"AppStudio_WidgetAPI_Boolean_DefaultValue_Label"}),_defineProperty(t,n.IMAGE,{value:n.IMAGE,label:"AppStudio_WidgetAPI_PropertyType_Dropdown_Image",automationId:"property-default-image",defaultValue:"",displayName:"AppStudio_WidgetAPI_Image_DefaultImage"}),_defineProperty(t,n.DATE_TIME,{value:n.DATE_TIME,label:"AppStudio_WidgetAPI_PropertyType_Dropdown_DateTime",automationId:"property-default-date",defaultValue:"",displayName:"AppStudio_WidgetAPI_URL_DefaultDate_Label"}),_defineProperty(t,n.URL,{value:n.URL,label:"AppStudio_WidgetAPI_PropertyType_Dropdown_URL",automationId:"property-default-url",defaultValue:"",displayName:"AppStudio_WidgetAPI_URL_DefaultURL_Label"}),_defineProperty(t,n.ARRAY,{value:n.ARRAY,label:"AppStudio_WidgetAPI_PropertyType_Dropdown_List",automationId:"property-default-list",defaultValue:[],displayName:"AppStudio_EditProperty_DefaultValues_Label"}),t)}}),define("panels/focusPanels/apiDefinitionPropertySchema/apiDefinitionPropertySchema.rt",["react","lodash","baseUILib","util","panels/frames/focusPanelFrame","santa-editor-symbols"],function(n,e,a,t,s,i){"use strict";return function(){return n.createElement(s,{panelName:"panels.focusPanels.apiDefinitionPropertySchema",onClose:this.closePanel,title:t.translate(this.props.title),helpId:"271799ea-a282-472d-8aa8-51720b23ed95",width:"474px",overlayBackground:this.getOverlayBackground(),className:"api-property-definition-panel-container",automationId:"api-definition-property"},n.createElement("div",{className:this.getPanelClass()},this.props.shouldHaveBackButton?n.createElement(a.Composites.ButtonLeft,{key:"panel-back-button"},n.createElement(a.BackButton,{onClick:this.closePanel,label:"AppStudio_Back_Button"})):null,n.createElement(a.Divider,{long:!0}),n.createElement(a.CustomScroll,{heightRelativeToParent:"100%"},n.createElement.apply(this,["div",{className:"api-definition-property-schema-panel-content"},n.createElement(a.Composites.TextInputLabeled,{},n.createElement(a.InfoIcon,{text:"AppStudio_WidgetAPI_NewProperty_Name_Tooltip"}),n.createElement(a.TextLabel,{value:"AppStudio_WidgetAPI_NewProperty_Name_label"}),n.createElement(a.TextInput,{value:this.state.name,automationId:"add-property-name",validator:this.isPropertyNameValid,allowInvalidChange:!0,validateInitialValue:!1,validateOnBlur:!0,invalidMessage:"AppStudio_WidgetAPI_NewProperty_Name_InvalidName_Error",autoSelect:!0,placeholder:"AppStudio_WidgetAPI_NewProperty_Name_Placeholder",onChange:function(e,t){this.setState({name:e,isValidName:t})}.bind(this)})),n.createElement(a.Divider,{long:!0}),n.createElement(a.Composites.TextInputLabeled,{},n.createElement(a.InfoIcon,{text:"AppStudio_WidgetAPI_DisplayName_Tooltip"}),n.createElement(a.TextLabel,{value:"AppStudio_WidgetAPI_DisplayName_Label"}),n.createElement(a.TextInput,{value:this.state.title,automationId:"add-property-display-name",placeholder:"AppStudio_WidgetAPI_DisplayName_Placeholder",onChange:function(e){this.setState({title:e})}.bind(this)})),n.createElement(a.Divider,{long:!0}),n.createElement(a.SectionDivider,{},n.createElement(a.TextLabel,{value:"AppStudio_CustomType_NewProperty_Divider"})),n.createElement(a.Divider,{long:!0}),n.createElement(a.Composites.DropDownLabeled,{},n.createElement(a.TextLabel,{value:"AppStudio_WidgetAPI_PropertyType_Title"}),n.createElement.apply(this,[a.DropDown,{value:this.state.selectedType,automationId:"add-property-type-selection",shouldTranslate:this.shouldTranslatePropertyLabel(this.state.selectedType),onChange:this.onPropertyTypeChanged},e.map(this.getBaseOptions(),function(e,t){return n.createElement(a.DropDownOption,{key:e.value,automationId:e.automationId,value:e.value,label:e.label})}.bind(this)),this.isCustomType()?n.createElement(a.SectionDivider,{key:"customTypeDivider"},n.createElement(a.TextLabel,{value:"AppStudio_NewProperty_CustomType_Divider_Label"})):null,this.isCustomType()?e.map(this.getCustomTypeOptions(),function(e,t){return n.createElement(a.DropDownOption,{key:e.value,value:e.value,automationId:"property-default-"+e.label,label:e.label,shouldTranslate:!1})}.bind(this)):null])),this.isArray()?n.createElement("div",{key:"arraySection"},this.isArray()?n.createElement(a.Divider,{long:!1,key:"customTypeDivider"}):null,this.isArray()?n.createElement(a.Composites.DropDownLabeled,{key:"listType"},n.createElement(a.TextLabel,{value:"AppStudio_NewProperty_List_ItemType_Label"}),n.createElement.apply(this,[a.DropDown,{value:this.state.selectedArrayType,automationId:"add-property-list-type-selection",shouldTranslate:this.shouldTranslatePropertyLabel(this.state.selectedArrayType),onChange:this.onListTypeChanged},e.map(this.getListTypeBaseOptions(),function(e,t){return n.createElement(a.DropDownOption,{automationId:e.automationId,key:e.value,value:e.value,label:e.label})}.bind(this)),this.isCustomType()?n.createElement(a.SectionDivider,{key:"customTypeDivider"},n.createElement(a.TextLabel,{value:"AppStudio_NewProperty_CustomType_Divider_Label"})):null,this.isCustomType()?e.map(this.getCustomTypeOptions(),function(e,t){return n.createElement(a.DropDownOption,{key:e.value,value:e.value,automationId:"property-default-"+e.label,shouldTranslate:!1,label:e.label})}.bind(this)):null])):null):null,n.createElement(a.Divider,{long:!1}),e.map(this.getValidatorsData(),function(e,t){return[n.createElement(a.Composites.ToggleSwitchWithSelectiveInput,{key:e.label},n.createElement(a.Composites.ToggleSwitch,{},n.createElement(a.ToggleSwitch,{value:e.toggleValue,label:e.label,automationId:e.toggleAutomationId,onChange:e.onToggle})),e.toggleValue?n.createElement(a.Composites.TextInput,{key:e.label},n.createElement(a.NumericInput,{value:e.inputValue||0,min:e.min,max:e.max,step:e.step,automationId:e.inputAutomationId,onChange:e.onChangeInput})):null),n.createElement(a.Divider,{key:"57092"})]}.bind(this)),"\n        ",this.getDefaultValueComponent(),"\n        ",n.createElement(a.Divider,{long:!0}),n.createElement(a.Composites.TextInputMultilineLabeled,{},n.createElement(a.InfoIcon,{text:"AppStudio_WidgetAPI_Description_Tooltip"}),n.createElement(a.TextLabel,{value:"AppStudio_WidgetAPI_Description_Label"}),n.createElement(a.TextInputMultiline,{value:this.state.description,automationId:"add-property-description",placeholder:"AppStudio_WidgetAPI_Description_Placeholder",onChange:function(e){this.setState({description:e})}.bind(this),onFocus:function(){this.setState({descriptionFocused:!0})}.bind(this),onBlur:function(){this.setState({descriptionFocused:!1})}.bind(this)}))]),this.state.descriptionFocused?n.createElement("div",{key:"description-spacer",className:"description-spacer"}):null),n.createElement(a.Divider,{long:!0}),n.createElement(a.Composites.ActionSetHorizontal,{},n.createElement(a.Button,{className:"btn-md",disabled:!this.isFormValid(),automationId:"add-property-main-button",onClick:this.handleClickAction},n.createElement(a.TextLabel,{value:this.props.mainActionLabel})))))}}),define("panels/focusPanels/apiDefinitionPropertySchema/apiDefinitionPropertySchema",["create-react-class","lodash","baseUI","util","stateManagement","constants","prop-types","panels/focusPanels/apiDefinitionPropertySchema/propertyTypes","panels/frames/panelCloseOrigin","wix-json-schema-utils","panels/focusPanels/apiDefinitionPropertySchema/apiDefinitionPropertySchema.rt"],function(e,u,n,p,c,t,a,s,i,d,o){"use strict";var r=p.hoc,l=r.connect,m=r.STORES.EDITOR_API,h=t.APP_STUDIO.PROP_TYPES,g=n.utils.propertySchemaValidationUtils.validateByProperty,f=e({displayName:"apiDefinitionPropertySchema",propTypes:{property:a.object,propertyName:a.string,propertyData:a.object,illegalPropertyNames:a.arrayOf(a.string),mainActionLabel:a.string.isRequired,close:a.func.isRequired,callBi:a.func,editCustomTypeValues:a.func.isRequired,onChange:a.func.isRequired,resolve:a.func.isRequired,openMediaManager:a.func.isRequired,shouldHaveBackButton:a.bool,shouldHideOverlay:a.bool,allowCustomTypes:a.bool,allowArrayType:a.bool},getDefaultProps:function(){return{allowCustomTypes:!0,allowArrayType:!0}},getArrayType:function(){return u.get(this.props.propertyData,["items","$id"])},getInitialState:function(){var e=function(e,t){return u.isUndefined(u.get(e,[t]))?u.get(e.items,[t]):e[t]},t=e(this.props.propertyData,"maxLength"),n=e(this.props.propertyData,"maximum"),a=e(this.props.propertyData,"minimum"),s=e(this.props.propertyData,"multipleOf"),i=this.props.propertyData.default;return{name:this.props.propertyName,isValidName:this.isPropertyNameValid(this.props.propertyName),title:this.props.propertyData.title,selectedType:this.getType(this.props.propertyData),selectedArrayType:this.getArrayType(),defaultValue:i,description:this.props.propertyData.description,propertyData:this.props.propertyData,isValidValue:g(this.props.propertyData,i,this.props.resolve),validateMaxLength:!u.isUndefined(t),validateMax:!u.isUndefined(n),validateMin:!u.isUndefined(a),validateStep:!u.isUndefined(s),descriptionFocused:!1,minimum:a,maximum:n,maxLength:t,multipleOf:s}},getType:function(e){return e.$id||h.ARRAY},getPrimitiveTypeData:function(e){return u.find(s.primitives,{value:e})},getCustomTypeOptions:function(){var t=this;return u.map(u.keys(this.props.definitions.custom),function(e){return{value:t.props.definitions.custom[e].$id,label:e}})},getBaseOptions:function(){var e=this.props.allowArrayType?[]:[h.ARRAY];return u.map(u.omit(s.primitives,e),function(e){return u.pick(e,["value","label","automationId"])})},getListTypeBaseOptions:function(){return u.reject(this.getBaseOptions(),{value:h.ARRAY})},shouldTranslatePropertyLabel:function(e){return!u.isUndefined(this.getPrimitiveTypeData(e))},isCustomType:function(){return this.props.allowCustomTypes&&!u.isEmpty(this.props.definitions.custom)},isArray:function(){return this.state.selectedType===h.ARRAY},getPropertyData:function(e,t){var n=this.props.definitions.base[e]||u.find(this.props.definitions.custom,{$id:e}),a=d.createPropertyTemplate(n,t),s=this.props.resolve(_defineProperty({},this.state.name,a));return this.addValidationsFromState(e,s[this.state.name],t)},addValidationsFromState:function(e,t,n){if(e===h.TEXT&&this.state.validateMaxLength)return this.addValidationsToData({maxLength:this.state.maxLength},t,n);if(e!==h.NUMBER)return t;var a=this.state,s=a.validateMax,i=a.validateMin,o=a.validateStep,r=a.minimum,l=a.maximum,c=a.multipleOf,p=u.assign(s?{maximum:l}:{},i?{minimum:r}:{},o?{multipleOf:c}:{});return u.isEmpty(p)?t:this.addValidationsToData(p,t,n)},onPropertyTypeChanged:function(e){var t=e===h.ARRAY,n=h.TEXT,a=t?n:e,s=this.getPropertyData(a,t),i=u.get(s,"default"),o=g(s,i,this.props.resolve);this.setState({propertyData:s,isValidValue:o,selectedType:e,defaultValue:i,selectedArrayType:n})},onListTypeChanged:function(e){var t=this.getPropertyData(e,!0);this.setState({selectedArrayType:e,propertyData:t,isValidValue:!0,defaultValue:[]})},getDefaultValueComponent:function(){var a=this,e=u.defaults({title:this.state.title},this.state.propertyData),t=_defineProperty({},this.state.name,e);return n.utils.generateUICompByPropertySchema(u.defaults({},t,{shouldTranslate:!0}),this.state.defaultValue,function(e,t,n){return a.setState({defaultValue:t,isValidValue:n})},{title:this.getDefaultComponentTitle(),openMediaManager:this.props.openMediaManager,automationId:"property-default-value",action:function(){return a.props.editCustomTypeValues(t,a.state.defaultValue,a.props.resolve,function(e){return a.setState({defaultValue:e})})}})},getDefaultComponentTitle:function(){var e=u.find(s.primitives,{value:this.state.selectedType}),t=u.get(e,"displayName")||"AppStudio_EditProperty_DefaultValues_Label";return p.translate(t)},closePanel:function(e){e===i.OUT_OF_FOCUS&&this.isFormValid()?this.handleClickAction():this.props.close()},handleClickAction:function(){var e=this.state.name,t=this.state.propertyData,n=u.defaults({},{default:this.state.defaultValue,title:this.state.title,description:this.state.description},t);this.props.onChange(_defineProperty({},e,n)),u.invoke(this.props,"callBi")},getValidatorsData:function(){var n=this,e={maxLength:{toggleValue:this.state.validateMaxLength,label:"AppStudio_WidgetAPI_MaxCharacters_Label",onToggle:function(e){var t=n.state.maxLength||100;n.updateSchemaValidation({maxLength:t},{validatorName:"validateMaxLength",shouldValidate:e})},step:1,min:0,max:9999,inputValue:this.state.maxLength,onChangeInput:function(e){n.updateSchemaValidation({maxLength:e},{validatorName:"validateMaxLength",shouldValidate:!0})},toggleAutomationId:"max-length-toggle",inputAutomationId:"max-length-input"},max:{toggleValue:this.state.validateMax,label:"AppStudio_WidgetAPI_Number_MaxValue_Label",onToggle:function(e){var t=n.state.maximum||0;n.updateSchemaValidation({maximum:t},{validatorName:"validateMax",shouldValidate:e})},step:.1,min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,inputValue:this.state.maximum,onChangeInput:function(e){n.updateSchemaValidation({maximum:e},{validatorName:"validateMax",shouldValidate:!0})},toggleAutomationId:"max-toggle",inputAutomationId:"max-input"},min:{toggleValue:this.state.validateMin,label:"AppStudio_WidgetAPI_Number_MinValue_Label",onToggle:function(e){var t=n.state.minimum||0;n.updateSchemaValidation({minimum:t},{validatorName:"validateMin",shouldValidate:e})},step:.1,min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,inputValue:this.state.minimum,onChangeInput:function(e){n.updateSchemaValidation({minimum:e},{validatorName:"validateMin",shouldValidate:!0})},toggleAutomationId:"min-toggle",inputAutomationId:"min-input"},step:{toggleValue:this.state.validateStep,label:"AppStudio_WidgetAPI_Number_StepValue_Label",onToggle:function(e){var t=n.state.multipleOf||.1;n.updateSchemaValidation({multipleOf:t},{validatorName:"validateStep",shouldValidate:e})},step:.1,min:.1,max:Number.MAX_SAFE_INTEGER,inputValue:this.state.multipleOf,onChangeInput:function(e){n.updateSchemaValidation({multipleOf:e},{validatorName:"validateStep",shouldValidate:!0})},toggleAutomationId:"step-toggle",inputAutomationId:"step-input"}},t=this.isArray()?this.state.selectedArrayType:this.state.selectedType,a=this.getPrimitiveTypeData(t);return u.pick(e,u.get(a,"validations"))},updateSchemaValidation:function(e,t){var n=t.validatorName,a=t.shouldValidate,s=void 0;s=a?this.addValidationsToData(e,this.state.propertyData,this.isArray()):this.removeValidationsFromData(e,this.state.propertyData,this.isArray());var i=g(s,this.state.defaultValue,this.props.resolve);this.setState(u.defaults({propertyData:s,isValidValue:i},e,_defineProperty({},n,a)))},addValidationsToData:function(e,t,n){if(n){var a=u.defaults({},e,t.items);return u.defaultsDeep({items:a},t)}return u.defaultsDeep({},e,t)},removeValidationsFromData:function(e,t,n){return n?u.omit(t,["items."+u.head(u.keys(e))]):u.omit(t,u.keys(e))},isPropertyNameValid:function(e){return p.validate.variableName(e)&&!u.includes(this.props.illegalPropertyNames,e)},isFormValid:function(){return this.state.isValidValue&&this.state.isValidName},getOverlayBackground:function(){if(!0===this.props.shouldHideOverlay)return"rgba(0, 0, 0, 0)"},getPanelClass:function(){return"api-property-definition-panel "+(this.props.shouldHaveBackButton?"with-back-button":"")},render:o}),P=function(l){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e,t,n){var a=n.editorAPI,s=a.mediaServices.mediaManager,i=a.mediaServices.mediaManager.categories.IMAGE,o=c.title,r=c.submitButton;s.open(i,{callback:l,translation:{title:p.translate(o||"AppStudio_WidgetAPI_Image_DefaultImage_Upload_MediaManager_Header"),submitButton:p.translate(r||"AppStudio_WidgetAPI_Image_DefaultImage_Upload_MediaManager_Set_Button")}})}};return u.flow(l(m,function(e,t){var n=e.dsRead,a={base:d.baseDefinitions,custom:u.assign.apply(u,[{}].concat(_toConsumableArray(n.appStudio.definitions.getAllSerialized())))},s=t.property;if(!s){var i=a.base.text;s={"":d.createPropertyTemplate(i,!1)}}var o=u.head(u.keys(s)),r=d.createResolver(a.base,a.custom),l=r.resolve(s)[o];return{definitions:a,propertyName:o,resolve:r.resolve,propertyData:l}},function(l){return{openMediaManager:function(e,t){l(P(e,t))},editCustomTypeValues:function(e,t,n,a){return l((s=e,i=t,o=n,r=a,function(n){var t="panels.focusPanels.customTypeValueEditPanel",e={property:s,initialValue:i,onChange:function(e){n(c.editorPlugins.panels.actions.closePanelByName(t)),r(e)},openMediaManager:function(e,t){return n(P(e,t))},resolveDefinition:o};n(c.editorPlugins.panels.actions.updateOrOpenPanel(t,e,!0))}));var s,i,o,r}}}),c.editorPlugins.panels.hoc.panelFrame(t.PANEL_TYPES.TOOL))(f)}),define("panels/focusPanels/customTypeValueEditPanel/objectPropertyEditor/objectPropertyEditor.rt",["react","lodash","baseUILib"],function(e,t,n){"use strict";return function(){return e.createElement("div",{"data-aid":this.props.automationId,className:"object-properties-editor"},e.createElement(n.CustomScroll,{flex:"1"},e.createElement("div",{},"\n            ",this.getPropertiesUIComponents(),"\n        ")))}}),define("panels/focusPanels/customTypeValueEditPanel/objectPropertyEditor/objectPropertyEditor",["create-react-class","lodash","prop-types","baseUI","panels/focusPanels/customTypeValueEditPanel/objectPropertyEditor/objectPropertyEditor.rt"],function(e,a,t,n,s){"use strict";return e({displayName:"objectPropertyEditor",propTypes:{propertyData:t.object.isRequired,value:t.object.isRequired,openMediaManager:t.func.isRequired,onChange:t.func.isRequired,resolveDefinition:t.func.isRequired,automationId:t.string},getSortedProperties:function(){var e=this.props.propertyData,t=e.propertiesOrder,n=e.properties;return t?a.map(t,function(e){return a.assign({propName:e},n[e])}):[]},getInitialState:function(){return{properties:this.getSortedProperties()}},getPropertiesUIComponents:function(){var t=this;return a(this.state.properties).map(function(e){return n.utils.generateUICompByPropertySchema(t.props.resolveDefinition(_defineProperty({},e.propName,e)),t.props.value[e.propName],t.onChange,{openMediaManager:t.props.openMediaManager})}).thru(n.utils.generateSeparatorBetweenComponents).value()},onChange:function(e,t){this.props.onChange(a.defaults(_defineProperty({},e,t),this.props.value))},render:s})}),define("panels/focusPanels/customTypeValueEditPanel/listPropertyEditor/listPropertyEditor.rt",["react","lodash","baseUILib","util","santa-editor-symbols","panels/focusPanels/customTypeValueEditPanel/objectPropertyEditor/objectPropertyEditor"],function(s,i,o,n,a,r){"use strict";return function(){function t(e){var t=this.getListClassName();return s.createElement("div",{className:"list-border "+t},s.createElement(o.CustomScroll,{heightRelativeToParent:"100%",keepAtBottom:!0},s.createElement.apply(this,[o.SortByDragList,i.assign({},{className:"drag-list "+t,itemMoved:this.handleItemMoved,itemChanged:this.handleItemChanged,selectItem:this.handleSelectItem,deleteItem:this.handleDeleteItem,menuActionsOverrides:this.getMenuActionsOverrides(),duplicateItem:this.handleDuplicateItem},this.getListProps()),i.map(this.props.value,function(e,t,n,a){return s.createElement(o.SortByDragListCustomItemRow,i.assign({},{automationId:"value-list-item"},this.getListItemProps(n,a)),this.getCustomActions(a))}.bind(this,e,t))])))}return function(){var e=0===this.props.value.length;return s.createElement("div",{className:"list-view "+this.getListClass()},e?null:[s.createElement("div",{className:"list-container",key:"4021"},t.apply(this,[e]),s.createElement(o.Composites.ButtonLeft,{className:"add-item-btn"},s.createElement(o.Button,{className:"btn-text add-item-btn",automationId:"add-item-btn",onClick:this.handleAddItem},"+ ",n.translate("Appstudio_CustomType_DefaultValues_AddItem_Link")))),this.shouldShowObjectEditor()?s.createElement("div",{className:"object-editor-container",key:"object-editor-container"},s.createElement(r,{automationId:"object-editor",value:this.getSelectedItem(),propertyData:this.getItemPropertyData(),resolveDefinition:this.props.resolveDefinition,onChange:this.handleObjectChange,openMediaManager:this.props.openMediaManager})):null],e?s.createElement("div",{key:"empty-state",className:"empty-state","data-aid":"empty-state"},s.createElement(o.CustomScroll,{heightRelativeToParent:"100%"},s.createElement(o.Composites.RichTextWithIllustrationVertical,{className:"content-width-xl rich-text-with-illustration-container"},s.createElement(o.Illustration,{},s.createElement(a.symbol,{name:"listEmptyState"})),s.createElement(o.Composites.RichTextLabeled,{className:"empty-state-rich-text-labeled"},s.createElement(o.TextLabel,{automationId:"empty-state-title",type:"T09",value:i.get(this.props.translations,"emptyStateTitle","AppStudio_CustomType_DefaultValues_EmptyState_Title"),enableEllipsis:!1}),s.createElement(o.RichText,{automationId:"empty-state-text"},s.createElement("p",{},n.translate(i.get(this.props.translations,"emptyStateText","AppStudio_CustomType_DefaultValues_EmptyState_Text")))))),s.createElement(o.Composites.ButtonMedium,{className:"add-property-btn-text-container"},s.createElement(o.Button,{automationId:"add-item-empty-state-btn",className:"btn-text add-property-btn-text",onClick:this.handleAddItem},s.createElement("span",{},"+ ",n.translate("AppStudio_CustomType_DefaultValues_EmptyState_CTA")))))):null)}.apply(this,[])}}),define("panels/focusPanels/customTypeValueEditPanel/listPropertyEditor/listPropertyEditor",["react","create-react-class","lodash","prop-types","util","platformUtils","baseUILib","baseUI","wix-json-schema-utils","panels/focusPanels/customTypeValueEditPanel/listPropertyEditor/listPropertyEditor.rt"],function(r,e,o,t,s,i,l,c,n,a){"use strict";var p=c.utils.propertySchemaValidationUtils,u=function(e){return r.createElement("span",{className:"symbol",key:e},r.createElement(c.symbol,{name:e,key:e,style:{fill:"#2b5672"}}))},d=u("edit_pencle_light_icon"),m=u("booleanTrue"),h=u("booleanFalse"),g={content:"Empty",className:"empty",label:""},f=o.mapValues(n.baseDefinitions,function(e,t){return t}),P="True",_="False",b={toggleEditLabel:{enable:!0,label:s.translate("AppStudio_CustomType_DefaultValues_Edit")}},E={toggleDefault:{enable:!1},duplicate:{enable:!0,label:s.translate("Appstudio_CustomType_DefaultValues_DuplicateItem")},toggleEditLabel:{enable:!1},toggleEditValue:{enable:!1},delete:{enable:!0,label:s.translate("Appstudio_CustomType_DefaultValues_DeleteItem")}},y={selectable:!0},C="large",v="narrow",I="wide",S=function(e){var t=e.onClick,n=e.symbol,a=e.title,s=e.key,i=e.priority,o=void 0===i?100:i;return r.createElement(l.ContextMenuAction,{onClick:t,priority:o,key:s},[n,a])},T=function(e){var t=o.assign({type:i.mediaItemUtils.types.IMAGE,mediaId:e.uri},o.pick(e,["width","height"]));return i.mediaSrcHandler.createMediaSrc(t).item};return e({displayName:"listPropertyEditor",propTypes:{value:t.array.isRequired,propertyData:t.object.isRequired,onChange:t.func.isRequired,resolveDefinition:t.func.isRequired,openMediaManager:t.func.isRequired,translations:t.shape({emptyStateTitle:t.string,emptyStateText:t.string}),propertyTitle:t.string},getInitialState:function(){return{selectedIndex:this.selectable()?0:-1}},getListProps:function(){var e=this.createListPropsByType();return o.assign({selectable:!1},e)},getListClass:function(){return this.props.propertyTitle?"with-title":""},createListPropsByType:function(){if(this.isListOfObject())return y;var e=this.getItemPropertyData();return{labelValidator:p.getValidatorByProp(e),labelInvalidMessage:p.getInvalidMessageByProp(e),labelPlaceholder:function(e){switch(e){case f.number:return"AppStudio_CustomType_DefaultValues_Number_Placeholder";case f.url:return"AppStudio_WidgetAPI_URL_DefaultURL_Placeholder";case f.dateTime:return"AppStudio_CustomType_DefaultValues_Date_Placeholder"}}(this.getItemType())}},getDefaultValueByPropertyData:function(){var e=this.getItemPropertyData();return this.getItemType()===f.number?function(e){var t=e.minimum,n=e.maximum,a=e.multipleOf,s=e.default;if(t&&(s=o.max([s,t])),n&&(s=o.min([s,n])),a){var i=s===n?o.floor(s/a)*a:o.ceil(s/a)*a;s=o.round(i,1)}return s}(e):e.default},getListItemProps:function(e,t){var n={id:t,key:String(t),isSelected:t===this.state.selectedIndex};return o.assign(n,this.getListItemPropsByType(e,t))},getListItemPropsByType:function(e,t){if(this.isListOfObject())return{label:s.translate("AppStudio_CustomType_Item_DefaultText")+" "+(t+1)};if(this.getItemType()===f.image)return{content:this.createMediaElement(e,t),className:C};var n,a=(n=e,this.getItemType()===f.boolean?n?P:_:String(n));return o.isEmpty(a)?g:{label:a}},getMenuActionsOverrides:function(){return o.defaultsDeep({},function(e){switch(e){case f.text:case f.number:case f.dateTime:case f.url:return b}}(this.getItemType()),E)},createNewValueAsync:function(){var e=this;return this.getItemType()===f.image?new Promise(function(t){e.props.openMediaManager(function(e){e&&t(o.map(e,T))},{submitButton:"AppStudio_MediaManager_AddItem_Button"})}):Promise.resolve(this.getDefaultValueByPropertyData())},selectable:function(){return this.isListOfObject()},selectItem:function(e){this.selectable()&&this.setState({selectedIndex:e})},handleAddItem:function(){var t=this;this.createNewValueAsync().then(function(e){t.props.onChange([].concat(_toConsumableArray(t.props.value),_toConsumableArray(o.castArray(e)))),t.selectItem(t.props.value.length-1)})},updateItem:function(e,t){var n=[].concat(_toConsumableArray(this.props.value));n[e]=t;var a=this.getItemPropertyData(),s=!1;this.getItemType()===f.number&&o.has(a,"multipleOf")&&(n[e]=this.roundByStep(t,a.multipleOf),s=!0),this.props.onChange(n),s&&this.forceUpdate()},roundByStep:function(e,t){return Math.round(e/t)*t},moveItem:function(e,t,n){var a=[].concat(_toConsumableArray(e));return a.splice(n,0,a.splice(t,1)[0]),a},handleItemMoved:function(e,t){this.props.onChange(this.moveItem(this.props.value,e,t)),this.selectItem(t)},handleItemChanged:function(e,t){var n;this.updateItem(t,(n=e.label,this.getItemType()===f.number?Number(n):n))},handleDuplicateItem:function(e,t){var n=this.props.value[t],a=[].concat(_toConsumableArray(this.props.value));a.splice(t,0,n),this.props.onChange(a),this.selectItem(t+1)},handleDeleteItem:function(e,n){this.state.selectedIndex===this.props.value.length-1&&this.selectItem(this.state.selectedIndex-1),this.props.onChange(this.props.value.filter(function(e,t){return t!==n}))},handleSelectItem:function(e,t){this.selectItem(t)},handleObjectChange:function(e){this.updateItem(this.state.selectedIndex,e)},createMediaElement:function(e,t){var n=this,a=i.mediaItemUtils.parseMediaItemUri(e),s=r.createElement(c.image,{imageData:{uri:a.mediaId,width:a.width,height:a.height},imageHeight:84,imageWidth:156});return r.createElement(l.SecondaryMediaImage,{automationId:"image-item",onClick:function(){return n.handleReplaceImage(t)}},s)},handleReplaceImage:function(n){var a=this;this.props.openMediaManager(function(e){if(e){var t=T(o.head(e));a.updateItem(n,t)}})},getCustomActions:function(e){var t=this;switch(this.getItemType()){case f.boolean:var n=this.props.value[e];return[S({onClick:function(){return t.updateItem(e,!n)},symbol:n?h:m,title:s.translate(n?"AppStudio_CustomType_DefaultValues_Boolean_ChangeToFalse":"AppStudio_CustomType_DefaultValues_Boolean_ChangeToTrue"),key:"toggleBoolValue"})];case f.image:return[S({onClick:function(){return t.handleReplaceImage(e)},symbol:d,title:s.translate("Appstudio_CustomType_DefaultValues_ReplaceItem"),key:"replaceImage"})]}},getListClassName:function(){return this.shouldShowObjectEditor()?v:I},shouldShowObjectEditor:function(){return this.isListOfObject()&&!o.isUndefined(this.getSelectedItem())},getSelectedItem:function(){return this.props.value[this.state.selectedIndex]},getItemPropertyData:function(){return this.props.propertyData.items},getItemType:function(){return this.getItemPropertyData().$id},getItemSystemType:function(){return this.getItemPropertyData().type},isListOfObject:function(){return"object"===this.getItemSystemType()},render:a})}),define("panels/focusPanels/customTypeValueEditPanel/customTypeValueEditPanel.rt",["react","lodash","baseUILib","util","panels/frames/focusPanelFrame"],function(t,e,n,a,s){"use strict";return function(){return t.createElement(s,{panelName:"panels.focusPanels.customTypeValueEditPanel",automationId:"property-value-panel",title:a.translate(e.get(this.props.translations,"panelTitle","AppStudio_CustomType_DefaultValues_Header")),className:"custom-type-value-edit-panel",width:"474px"},function(){var e=this.getPropertyData().title||this.getPropertyName();return t.createElement("div",{className:"property-value-panel "+this.props.className},e?t.createElement("div",{key:"prop-name-container",className:"prop-name-container"},t.createElement(n.TextLabel,{automationId:"prop-name-label",className:"prop-name-label",value:e,type:"T18",shouldTranslate:!1}),t.createElement(n.Divider,{long:!0})):null,"\n        ",this.getValueEditor(),"\n        ",t.createElement(n.Divider,{long:!0}),t.createElement(n.Composites.ActionSetHorizontal,{},t.createElement(n.Button,{automationId:"cancel-btn",onClick:this.handleCancel,className:"btn-confirm-secondary btn-md"},t.createElement(n.TextLabel,{value:"AppStudio_Cancel_Button"})),this.hasSave()?t.createElement(n.Button,{automationId:"save-btn",onClick:this.handleSave,disabled:!this.isValid(),className:"btn-md",key:"1267"},t.createElement(n.TextLabel,{value:"AppStudio_Apply_Button"})):null))}.apply(this,[]))}}),define("panels/focusPanels/customTypeValueEditPanel/customTypeValueEditPanel",["react","create-react-class","lodash","prop-types","baseUI","panels/focusPanels/customTypeValueEditPanel/objectPropertyEditor/objectPropertyEditor","panels/focusPanels/customTypeValueEditPanel/listPropertyEditor/listPropertyEditor","panels/focusPanels/customTypeValueEditPanel/customTypeValueEditPanel.rt"],function(s,e,t,n,a,i,o,r){"use strict";return e({displayName:"CustomTypeValueEditPanel",propTypes:{initialValue:n.oneOfType([n.object,n.array]).isRequired,property:n.object.isRequired,resolveDefinition:n.func.isRequired,onChange:n.func.isRequired,openMediaManager:n.func.isRequired,translations:n.object},getInitialState:function(){return{value:this.props.initialValue}},getPropertyName:function(){return t.head(t.keys(this.props.property))},getPropertyData:function(){var e=this.getPropertyName();return this.props.property[e]},getEditorElementByType:function(e){switch(e){case"array":return o;case"object":return i;default:throw new Error("Type "+e+" is not supported by this panel")}},getEditorAutomationIdByType:function(e){switch(this.getPropertyData().type){case"array":return"list-editor";case"object":return"object-editor";default:throw new Error("Type "+e+" is not supported by this panel")}},getValueEditor:function(){var e=this.getPropertyData(),t=e.type,n=e.title,a=this.getEditorElementByType(t);return s.createElement(a,{propertyTitle:n||this.getPropertyName(),value:this.state.value,propertyData:this.getPropertyData(),resolveDefinition:this.props.resolveDefinition,openMediaManager:this.props.openMediaManager,onChange:this.handleChange,translations:this.props.translations,automationId:this.getEditorAutomationIdByType(t)})},hasSave:function(){return!this.isInEmptyState()||"array"===this.getPropertyData().type},handleSave:function(){this.props.onChange(this.state.value)},handleChange:function(e){this.setState({value:e})},handleCancel:function(){this.props.onChange(this.props.initialValue)},isInEmptyState:function(){return"array"===this.getPropertyData().type&&0===this.state.value.length},isValid:function(){return a.utils.propertySchemaValidationUtils.validateByProperty(this.getPropertyData(),this.state.value,this.props.resolveDefinition)},render:r})}),define("panels/focusPanels/customTypeDefinitionPanel/customTypeDefinitionPanel.rt",["react","lodash","baseUILib","util","santa-editor-symbols","panels/frames/focusPanelFrame"],function(a,s,i,n,t,e){"use strict";return function(){return a.createElement(e,{panelName:this.props.panelName,title:n.translate(this.props.panelTitle),automationId:"custom-type-definition-panel",helpId:"0bc06a58-8a44-4002-8a50-80f7aacabddb",className:"custom-type-definition-panel",width:"474px"},function(){var e=0===this.state.properties.length;return a.createElement("div",{className:"custom-type-main-container"},a.createElement("div",{className:"custom-type-content-container"},a.createElement(i.Composites.TextInputLabeled,{},a.createElement(i.TextLabel,{value:"AppStudio_CustomType_EmptyState_Label"}),a.createElement(i.TextInput,{value:this.state.name,automationId:"name-input",autoSelect:!0,onChange:this.handleNameInputChange,placeholder:"AppStudio_CustomType_EmptyState_Placeholder",validator:this.isNameValid,allowInvalidChange:!0,validateInitialValue:!1,validateOnBlur:!0,invalidMessage:"AppStudio_CustomType_Name_Validator"})),a.createElement(i.Divider,{long:!0}),a.createElement(i.SectionDivider,{},a.createElement(i.TextLabel,{value:"AppStudio_CustomType_EmptyState_Divider"})),e?null:a.createElement("div",{"data-aid":"properties-container",key:"properties-container",className:"properties-container"},a.createElement(i.CustomScroll,{heightRelativeToParent:"100%"},a.createElement.apply(this,[i.SortByDragList,s.assign({},{className:"drag-list",itemMoved:this.handleItemMoved,deleteItem:this.handleDeleteItem},this.getListProps()),s.map(this.state.properties,function(e,t,n){return a.createElement(i.SortByDragListCustomItemRow,s.assign({},{automationId:"property-list-item"},this.getListItemProps(t,n)),this.getCustomActions(t,n))}.bind(this,e))])),a.createElement(i.Composites.ButtonLeft,{},a.createElement(i.Button,{className:"btn-text",automationId:"add-property-btn",onClick:this.handleAddProperty},"+ ",n.translate("AppStudio_CustomType_EmptyState_CTA")))),e?a.createElement("div",{className:"empty-state-container",key:"empty-state","data-aid":"empty-state"},a.createElement(i.Divider,{long:!0}),a.createElement(i.CustomScroll,{heightRelativeToParent:"100%"},a.createElement(i.Composites.RichTextWithIllustrationVertical,{className:"content-width-md illustration-vertical-container"},a.createElement(i.Illustration,{},a.createElement(t.symbol,{name:"customTypeEmptyState"})),a.createElement(i.Composites.RichTextLabeled,{className:"illustration-rich-text"},a.createElement(i.TextLabel,{type:"T09",value:"AppStudio_CustomType_EmptyState_Title",enableEllipsis:!1}),a.createElement(i.RichText,{},a.createElement("p",{})))),a.createElement(i.Composites.ButtonMedium,{className:"add-property-btn-text-container"},a.createElement(i.Button,{automationId:"add-property-empty-state",className:"btn-text add-property-btn-text",onClick:this.handleAddProperty},a.createElement("span",{},"+ ",n.translate("AppStudio_CustomType_EmptyState_CTA")))))):null),function(e){var t=this.getMainActionToolTipContent();return a.createElement("div",{key:"action-set-container",className:"custom-type-actions-container"},a.createElement(i.Divider,{long:!0}),a.createElement(i.Composites.ActionSetHorizontal,{},a.createElement(i.Button,{automationId:"cancel-btn",onClick:this.props.close,className:"btn-confirm-secondary btn-md"},a.createElement("span",{},n.translate("AppStudio_Cancel_Button"))),a.createElement(i.Tooltip,{disabled:""===t,content:t},a.createElement(i.Button,{automationId:"confirm-btn",onClick:this.handleConfirm,disabled:""!==t,className:"btn-md"},a.createElement("span",{},n.translate(this.props.mainActionLabel))))))}.apply(this,[e]))}.apply(this,[]))}}),define("panels/focusPanels/customTypeDefinitionPanel/customTypeDefinitionPanel",["react","create-react-class","lodash","prop-types","util","stateManagement","wix-json-schema-utils","baseUILib","baseUI","panels/focusPanels/customTypeDefinitionPanel/customTypeDefinitionPanel.rt"],function(i,e,g,t,a,n,f,o,s,r){"use strict";var l=a.hoc,c=l.connect,p=l.STORES.DS_ONLY,u=n.editorPlugins.panels.actions,d="panels.focusPanels.apiDefinitionPropertySchema",P=["widget","props","array","object"],m=i.createElement(s.symbol,{name:"edit_pencle_light_icon",key:"edit_pencle_light_icon"}),h={toggleDefault:{enable:!1},duplicate:{enable:!1},toggleEditLabel:{enable:!1},toggleEditValue:{enable:!1},delete:{enable:!0,label:a.translate("AppStudio_LeftTree_CustomType_Remove")}},_=function(e){return g.omit(e,"propName")},b=e({displayName:"CustomTypeDefinitionPanel",propTypes:{typeNameToEdit:t.string,openPropertyPanel:t.func.isRequired,illegalNames:t.array.isRequired,initialDefinition:t.object,panelName:t.string.isRequired,mainActionLabel:t.string.isRequired,panelTitle:t.string.isRequired},getSortedProperties:function(){var t=this;return this.props.initialDefinition?g.map(this.props.initialDefinition.propertiesOrder,function(e){return g.assign({propName:e},t.props.initialDefinition.properties[e])}):[]},getInitialState:function(){var e=this.props.typeNameToEdit||"";return{properties:this.getSortedProperties(),isValid:this.isNameValid(e),name:e}},getListProps:function(){return{menuActionsOverrides:this.getMenuActionsOverrides()}},getListItemProps:function(e,t){return{id:t,key:String(t),label:e.propName||e.title,value:"Type: "+e.$id}},createPropertiesChangeHandler:function(s){var i=this;return function(e){var t=g.head(g.keys(e)),n=g.assign({propName:t},e[t]),a=s(i.state.properties,n);i.setState({properties:a})}},handleAddProperty:function(){var e=g.map(this.state.properties,"propName");this.props.openPropertyPanel({onChange:this.createPropertiesChangeHandler(g.concat),illegalPropertyNames:e,title:"AppStudio_WidgetAPI_NewProperty_Title",mainActionLabel:"AppStudio_Add_Button"})},handleEditProperty:function(e,i){var t=g.map(g.reject(this.state.properties,{propName:e.propName}),"propName");this.props.openPropertyPanel({onChange:this.createPropertiesChangeHandler(function(e,t){return n=t,a=i,(s=[].concat(_toConsumableArray(e)))[a]=n,s;var n,a,s}),property:_defineProperty({},e.propName,_(e)),illegalPropertyNames:t,title:"AppStudio_WidgetAPI_EditProperty_Title",mainActionLabel:"AppStudio_Apply_Button",hasUsages:this.props.hasUsages})},handleItemMoved:function(e,t){var n,a,s,i,o=(n=this.state.properties,a=e,s=t,(i=[].concat(_toConsumableArray(n))).splice(s,0,i.splice(a,1)[0]),i);this.setState({properties:o})},handleDeleteItem:function(e,n){var t=this,a=function(){var e=t.state.properties.filter(function(e,t){return t!==n});t.setState({properties:e})};this.props.hasUsages?this.props.openWarningPanel({onConfirm:a,title:"AppStudio_CustomType_DeleteProperty_PopUp_Header",message:"AppStudio_CustomType_DeleteProperty_PopUp_Text",confirmLabel:"AppStudio_Delete_Button",cancelLabel:"AppStudio_Cancel_Button"}):a()},createDefinitionFromState:function(){var e=g.map(this.state.properties,"propName"),t=g.mapValues(g.keyBy(this.state.properties,"propName"),_),n=g.mapValues(t,"default"),a=this.state.name,s=g.get(this.props.initialDefinition,"description","desc");return g.defaults({propertiesOrder:e,properties:t,default:n,title:a,description:s},this.props.initialDefinition)},handleConfirm:function(){var e=this.createDefinitionFromState(),t=f.pack(_defineProperty({},this.state.name,e));this.props.setDefinition(this.props.definitionPointer,t),this.props.close()},handleNameInputChange:function(e,t){this.setState({name:e,isValid:t})},getMenuActionsOverrides:function(){return h},createContextMenuAction:function(e,t,n,a){var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:100;return i.createElement(o.ContextMenuAction,{onClick:e,priority:s,key:a},[t,n])},getCustomActions:function(e,t){var n=this;return[this.createContextMenuAction(function(){return n.handleEditProperty(e,t)},m,a.translate("AppStudio_LeftTree_CustomType_Edit"),"edit")]},isNameValid:function(e){return a.validate.variableName(e)&&!g.includes(this.props.illegalNames,e)},getMainActionToolTipContent:function(){var e=0<this.state.properties.length;return e||this.state.isValid?this.state.isValid?e?"":"AppStudio_CustomType_Create_Button_Disabled_NoProp":"AppStudio_CustomType_Create_Button_Disabled_NotValid":"AppStudio_CustomType_Create_Button_Disabled_Both"},render:r}),E="type",y="restrictions",C="name";return c(p,function(e,t){var n,a,s,i=e.dsRead,o=t.typeNameToEdit,r={base:f.baseDefinitions,custom:g.assign.apply(g,[{}].concat(_toConsumableArray(i.appStudio.definitions.getAllSerialized())))},l=(n=r,a=o,s=g.without(g.keys(n.custom),a),[].concat(_toConsumableArray(g.keys(n.base)),_toConsumableArray(s),P)),c=f.createResolver(r.base,r.custom),p=o&&c.resolve(r.custom[o]),u=o?g.get(g.find(i.appStudio.definitions.getAll(),{name:o}),"pointer"):null,d=p?"AppStudio_CustomType_Edit_Title":"AppStudio_CustomType_Header",m=p?"AppStudio_CustomType_Save_Button":"AppStudio_CustomType_Create_Button",h=u?i.appStudio.definitions.getAllDefinitionUsages(u):{};return{illegalNames:l,initialDefinition:p,definitionPointer:u,panelTitle:d,mainActionLabel:m,hasUsages:0<g.size(h.widgets)+g.size(h.definitions)}},function(r,e){var l=function(e){r(n.editorPlugins.panels.actions.updateOrOpenPanel("panels.messagePanels.widgetWarningMessage",e,!0))};return{openPropertyPanel:function(e){var a=e.onChange,s=e.property,t=e.illegalPropertyNames,n=e.title,i=e.mainActionLabel,o=e.hasUsages;r(u.updateOrOpenPanel(d,{property:s,title:n,mainActionLabel:i,callBi:g.noop,illegalPropertyNames:t,allowCustomTypes:!1,allowArrayType:!1,shouldHideOverlay:!0,shouldHaveBackButton:!0,onChange:function(e){var t=function(){r(u.closePanelByName(d)),a(e)},n=function(e,t){if(!e)return!1;var n=g.head(g.keys(e)),a=g.head(g.keys(t)),s=["minimum","maximum","multipleOf","minLength","maxLength"];return g.isEqual(g.get(e,[n,"$ref"]),g.get(t,[a,"$ref"]))?g.isEqual(g.pick(e[n],s),g.pick(t[a],s))?!g.isEqual(n,a)&&C:y:E}(s,e);o&&n?l(function(e,t){switch(e){case E:return{onConfirm:t,title:"AppStudio_CustomType_ChangeProperty_PopUp_Header",message:"AppStudio_CustomType_ChangeProperty_PopUp_Text",confirmLabel:"AppStudio_CustomType_ChangeProperty_PopUp_Continue_Button",cancelLabel:"AppStudio_Cancel_Button"};case C:return{onConfirm:t,title:"AppStudio_ChangePropertyName_Popup_Header",message:"AppStudio_ChangePropertyName_Popup_Text",confirmLabel:"AppStudio_Change_Button",cancelLabel:"AppStudio_Cancel_Button"};case y:return{onConfirm:t,title:"AppStudio_ChangePropertyRange_PopUp_Header",message:"AppStudio_ChangePropertyRange_PopUp_Text",confirmLabel:"AppStudio_ChangePropertyRange_PopUp_Continue_Button",cancelLabel:"AppStudio_Cancel_Button"}}return{}}(n,t)):t()}},!0))},setDefinition:function(e,t){r(n.editorPlugins.applicationStudio.actions.setDefinition(e,t))},openWarningPanel:l,close:function(){return r(u.closePanelByName(e.panelName))}}})(b)}),define("panels/focusPanels/browserThemeColorPanel.rt",["react","lodash","baseUILib","santa-editor-symbols","panels/frames/focusPanelFrame","util"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(s,{automationId:this.props.panelName,panelName:this.props.panelName,title:i.translate("mobile_browser_theme_header"),showHeader:!0,helpId:"5a1c5cdd-a608-4f3b-b65d-dd6b98d29e8c",onClose:this.onClosePanel},e.createElement("div",{className:"browser-theme-color-settings-panel"},e.createElement("div",{className:"preview-area"},e.createElement("div",{className:"mobile-frame-container"},e.createElement("div",{className:"mobile-frame"},e.createElement("div",{className:"mobile-frame-top"}),e.createElement("div",{className:"site-shadow"})),e.createElement("div",{className:"preview-container"},e.createElement("div",{className:"color-changeable-area",style:{backgroundColor:this.state.color}},e.createElement("div",{className:"address-area"})),e.createElement(n.Divider,{long:!0})))),e.createElement("div",{className:"sidebar"},e.createElement(n.Composites.ColorSelectLabeled,{},e.createElement(n.TextLabel,{value:"mobile_browser_theme_color"}),e.createElement(n.ColorPickerInput,{value:this.state.color,onClick:this.openColorPicker})),e.createElement(n.Divider,{long:!1}),e.createElement(n.Composites.RichText,{},e.createElement(n.RichText,{},i.translate("mobile_browser_theme_preview_text"))))),e.createElement(n.Divider,{long:!0}),e.createElement(n.Composites.ActionSetHorizontal,{},e.createElement(n.Button,{className:"btn-confirm-secondary btn-md no-margin",onClick:function(){this.onCancel()}.bind(this)},e.createElement("span",{},i.translate("mobile_browser_theme_cancel_button"))),e.createElement(n.Button,{className:"btn-md no-margin",onClick:function(){this.onConfirm()}.bind(this)},e.createElement("span",{},i.translate("mobile_browser_theme_done_button")))))}}),define("panels/focusPanels/browserThemeColorPanel",["create-react-class","prop-types","util","stateManagement","panels/focusPanels/browserThemeColorPanel.rt","coreBi"],function(e,t,n,a,s,i){"use strict";var o=function(e,t,n){return n.dsActions},r="done",l="X",c="cancel",p="click outside",u=e({displayName:"browserThemeColorPanel",propTypes:{color:t.string,closePanel:t.func.isRequired,openColorPicker:t.func.isRequired,themeColorToHex:t.func.isRequired,setColorInDS:t.func.isRequired},getInitialState:function(){return{color:this.props.color}},onConfirm:function(){this.props.dispatchBIEvent(i.events.mobileBrowserThemeColorPanel.DONE_BROWSER_THEME_COLOR_PANEL,{close_method:r,color:this.state.color}),this.props.setColorInDS(this.state.color),this.props.closePanel()},onCancel:function(){this.props.dispatchBIEvent(i.events.mobileBrowserThemeColorPanel.CLOSE_BROWSER_THEME_COLOR_PANEL,{close_method:c}),this.props.closePanel()},onClosePanel:function(e){this.props.dispatchBIEvent(i.events.mobileBrowserThemeColorPanel.CLOSE_BROWSER_THEME_COLOR_PANEL,{close_method:"x_button"===e?l:p}),this.props.closePanel()},openColorPicker:function(e){var t=this.state.color,n={left:e.clientX,top:e.clientY};this.props.openColorPicker(t,n,{onChange:this.handleBackgroundColorChange,allowPaletteEditing:!1})},handleBackgroundColorChange:function(e){var t=this.props.themeColorToHex(e);this.setState({color:t})},render:s});return n.hoc.connect(n.hoc.STORES.EDITOR_API,function(e){var t=e.editorAPI;return{themeColorToHex:t.theme.colors.get,openColorPicker:t.openColorPicker,color:t.dsRead.browserThemeColor.get()}},function(t,e){var n=e.panelName;return{closePanel:function(){t(a.editorPlugins.panels.actions.closePanelByNameAction(n))},setColorInDS:function(e){t(o).browserThemeColor.set(e)},dispatchBIEvent:function(){var e;t((e=a.bi.actions).event.apply(e,arguments))}}})(u)}),define("panels/focusPanels/languagePublishSuccessPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib","santa-editor-symbols"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"panelFrame",shouldHideHeader:!0,className:"language-publish-success-panel popup-medium",shouldNotCloseOnBlur:!0,keyboardShortcuts:this.getKeyboardShortcuts(),panelName:"languagePublishSuccess"},e.createElement(a.Composites.BigPanelHeaderWithIllustration,{},e.createElement(a.PanelHeaderCenteredText,{title:this.getTitle(),shouldTranslate:!1,onClose:this.onClose}),e.createElement(a.PanelHeaderIllustration,{blueStripHeight:92},e.createElement(s.symbol,{name:"successMessageIllustration",key:"illustrationSymbol"}))),e.createElement(a.Composites.PanelContent,{},e.createElement(a.Composites.RichText,{},e.createElement(a.RichText,{type:"T06"},"\n                ",this.getCTA(),"\n            "))),e.createElement(a.Composites.ActionSetHorizontal,{},e.createElement(a.Button,{automationId:"language-publish-success-panel-confirm-btn",onClick:this.onClose,className:"btn-md"},e.createElement("span",{},this.getButtonText()))))}}),define("panels/focusPanels/languagePublishSuccessPanel",["create-react-class","prop-types","constants","stateManagement","util","panels/focusPanels/languagePublishSuccessPanel.rt"],function(e,t,n,a,s,i){"use strict";var o=a.editorPlugins.userPreferences.actions.setSiteUserPreferences,r=n.USER_PREFS.MULTILINGUAL.PUBLISH_SUCCESS_PANEL.DONT_SHOW_AGAIN,l=e({displayName:"languagePublishSuccessPanel",propTypes:{panelName:t.string,languageName:t.string.isRequired},componentDidMount:function(){this.props.setDontShowAgain(!0)},getTitle:function(){return s.translate("Show_Language_Popup_Success_Title").replace("{{language}}",this.props.languageName)},getCTA:function(){return s.translate("Show_Language_Popup_Success_Text").replace("{{language}}",this.props.languageName)},getButtonText:function(){return s.translate("Show_Language_Popup_Success_Button")},onClose:function(){this.props.closePanel()},getKeyboardShortcuts:function(){return{esc:this.onClose}},render:i});return s.hoc.connect(s.hoc.STORES.STATE_ONLY,null,function(t,e){var n=e.panelName;return{closePanel:function(){t(a.editorPlugins.panels.actions.closePanelByNameAction(n))},setDontShowAgain:function(e){return t(o(r,e))}}})(l)}),define("panels/focusPanels/languageUnpublishPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUILib","santa-editor-symbols"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"panelFrame",shouldHideHeader:!0,shouldNotCloseOnBlur:!0,className:"language-unpublish-panel",keyboardShortcuts:this.getKeyboardShortcuts(),panelName:this.props.panelName},e.createElement(a.Composites.PopupSmallSize,{},e.createElement(a.PanelHeader,{noHelpBtn:!0,onClose:this.onClose,className:"dark"},e.createElement("span",{},this.getTitle())),e.createElement(a.Composites.PanelContent,{},e.createElement(a.Composites.RichTextWithIllustration,{},e.createElement(a.Illustration,{},e.createElement(s.symbol,{name:"languageUnpublished"})),e.createElement(a.Composites.RichText,{},e.createElement(a.RichText,{type:"T01"},this.getMessage())))),e.createElement(a.Composites.ActionSetHorizontal,{},e.createElement(a.Button,{className:"secondary",onClick:this.onClose},e.createElement("span",{},this.getCancelButtonLabel())),e.createElement(a.Button,{className:"primary",onClick:this.onConfirm},e.createElement("span",{},this.getConfirmButtonLabel())))))}}),define("panels/focusPanels/languageUnpublishPanel",["create-react-class","prop-types","constants","stateManagement","util","coreBi","panels/focusPanels/languageUnpublishPanel.rt"],function(e,t,n,i,o,a,s){"use strict";var r=i.editorPlugins.userPreferences.actions.setSiteUserPreferences,l=a.events.multilingual.top_bar_drop_panel_unpublish_lang,c=n.USER_PREFS.MULTILINGUAL.UNPUBLISH_PANEL.DONT_SHOW_AGAIN,p=n.MULTILINGUAL.LANGUAGE_STATUSES.INACTIVE,u=e({displayName:"languageUnpublishPanel",propTypes:{panelName:t.string,lang:t.object.isRequired},componentDidMount:function(){this.props.setDontShowAgain(!0)},getTitle:function(){return o.translate("Hide_Language_Popup_Title").replace("{{language}}",this.props.lang.name)},getMessage:function(){return o.translate("Hide_Language_Popup_Text").replace("{{language}}",this.props.lang.name)},getConfirmButtonLabel:function(){return o.translate("Hide_Language_Popup_Hide_Button")},getCancelButtonLabel:function(){return o.translate("Hide_Language_Popup_Cancel_Button")},onClose:function(){this.props.closePanel()},onConfirm:function(){this.props.sendUnpublishBI(),this.props.unpublishLanguage(this.props.lang.code),this.props.closePanel()},getKeyboardShortcuts:function(){return{esc:this.onClose}},render:s});return o.hoc.connect(o.hoc.STORES.DS_ONLY,function(e){return{siteId:e.dsRead.generalInfo.getSiteId()}},function(t,e){var n=e.panelName,a=e.siteId,s=e.lang;return{closePanel:function(){return t(i.editorPlugins.panels.actions.closePanelByNameAction(n))},unpublishLanguage:function(e){return t(i.multilingual.actions.updateLanguageStatusThunk(e,p))},setDontShowAgain:function(e){return t(r(c,e))},sendUnpublishBI:function(){return t(i.bi.actions.event(l,{lang:s.languageCode,origin:"editor_language_unpublish_panel",esi:o.editorModel.editorSessionId,site_id:a}))}}})(u)}),define("panels/focusPanels/focusPanels",["panels/focusPanels/welcomeVideoPanel","panels/focusPanels/exampleFocusPanel","panels/focusPanels/blogManagerPanel","panels/focusPanels/shoutOutTemplatesPanel","panels/focusPanels/aviaryPanel","panels/focusPanels/organizeImagesPanel","panels/focusPanels/outOfGridMobilePanel","panels/focusPanels/outOfGridDesktopPanel","panels/focusPanels/outOfContainerGridPanel","panels/focusPanels/dragToHeaderPanel","panels/focusPanels/attachToSOSPPanel","panels/focusPanels/detachedFromSOSPPanel","panels/focusPanels/spotifySearchFocusPanel","panels/focusPanels/iTunsLinkMaker","panels/focusPanels/pageAppInstalling","panels/focusPanels/howToVideoGalleryPanel","panels/focusPanels/feedbackPanel","panels/focusPanels/getTrafficPanel","panels/focusPanels/promotionModalPanel","panels/focusPanels/sizeRestrictionPanel","panels/focusPanels/newEditorWelcomeScreenPanel","panels/focusPanels/editorMigrationFailedPanel","panels/focusPanels/newUserIntroVideoPanel","panels/focusPanels/cameFromADIVideoPanel","panels/focusPanels/migratedToMeshSuccessPanel","panels/focusPanels/howToVideoPlayer","panels/focusPanels/newEditorListWelcomeScreenPanel","panels/focusPanels/migrateToMeshWelcomeScreenPanel","panels/focusPanels/meshMigrationProgressPanel","panels/focusPanels/failPanel","panels/focusPanels/createNewTextBoxPanel","panels/focusPanels/popupTemplate","panels/focusPanels/siteImageOptimizationPanel","panels/focusPanels/siteMembersSettingsPanel","panels/focusPanels/newFeaturesVideoPanel","panels/focusPanels/accessibilityPanel","panels/focusPanels/mobileFriendlyPanel","panels/focusPanels/mobileEditorFirstTimeVideoPanel","panels/focusPanels/mobileEditorFirstTimePanel","panels/focusPanels/appInstallerPanel","panels/focusPanels/backToADIPanel","panels/focusPanels/packageAndUpdatePanel/packageAndUpdatePanel","panels/focusPanels/menuContainerUpgradePanel","panels/focusPanels/apiDefinitionPropertySchema/apiDefinitionPropertySchema","panels/focusPanels/customTypeValueEditPanel/customTypeValueEditPanel","panels/focusPanels/customTypeDefinitionPanel/customTypeDefinitionPanel","panels/focusPanels/browserThemeColorPanel","panels/focusPanels/languagePublishSuccessPanel","panels/focusPanels/languageUnpublishPanel"],function(e,t,n,a,s,i,o,r,l,c,p,u,d,m,h,g,f,P,_,b,E,y,C,v,I,S,T,N,A,k,L,D,M,O,w,x,R,B,U,F,H,V,W,G,q,K,Y,j,z){"use strict";return{welcomeVideoPanel:e,exampleFocusPanel:t,blogManagerPanel:n,shoutOutTemplatesPanel:a,aviaryPanel:s,organizeImagesPanel:i,outOfGridMobilePanel:o,outOfGridDesktopPanel:r,outOfContainerGridPanel:l,dragToHeaderPanel:c,attachToSOSPPanel:p,detachedFromSOSPPanel:u,spotifySearchFocusPanel:d,iTunsLinkMaker:m,howToVideoGalleryPanel:g,pageAppInstallingPanel:h,feedbackPanel:f,getTrafficPanel:P,promotionModalPanel:_,sizeRestrictionPanel:b,newEditorWelcomeScreenPanel:E,editorMigrationFailedPanel:y,newUserIntroVideoPanel:C,cameFromADIVideoPanel:v,migratedToMeshSuccessPanel:I,howToVideoPlayer:S,newEditorListWelcomeScreenPanel:T,migrateToMeshWelcomeScreenPanel:N,meshMigrationProgressPanel:A,failPanel:k,createNewTextBoxPanel:L,popupTemplate:D,siteImageOptimizationPanel:M,siteMembersSettingsPanel:O,newFeaturesVideoPanel:w,accessibilityPanel:x,mobileFriendlyPanel:R,mobileEditorFirstTimeVideoPanel:B,mobileEditorFirstTimePanel:U,appInstallerPanel:F,backToADIPanel:H,packageAndUpdatePanel:V,menuContainerUpgradePanel:W,apiDefinitionPropertySchema:G,customTypeValueEditPanel:q,customTypeDefinitionPanel:K,browserThemeColorPanel:Y,languagePublishSuccessPanel:j,languageUnpublishPanel:z}}),define("panels/messagePanels/changeStyleMessage/changeStyleMessage.rt",["react","lodash","panels/frames/messagePanelFrame","util","baseUI","constants"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,className:"change-style",confirmLabel:"Notification_Box_Got_It",dontShowAgainKey:i.USER_PREFS.MULTILINGUAL.STYLING_COMPONENT.DONT_SHOW_AGAIN,userPrefType:"site",panelTitle:a.translate("Notification_Box_Multilingual_Design_Change_Title"),onDontShowAgainChange:this.onDontShowAgainChange,onConfirm:this.onConfirm,onCancel:this.onCancel},e.createElement("div",{className:"icon"},e.createElement(s.symbol,{name:"plaster"})),e.createElement("div",{},e.createElement("p",{},a.translate("Notification_Box_Multilingual_Design_Change_Text"))))}}),define("panels/messagePanels/changeStyleMessage/changeStyleMessage",["lodash","create-react-class","core","coreBi","util","panels/messagePanels/changeStyleMessage/changeStyleMessage.rt"],function(a,e,t,n,s,i){"use strict";var o=n.events.multilingual;return e({displayName:"changeStyleMessage",mixins:[t.mixins.editorAPIMixin],render:i,sendBI:function(e,t){var n=this.getEditorAPI();n.bi.event(e,a.assign({esi:s.editorModel.editorSessionId,site_id:n.dsRead.generalInfo.getSiteId()},t))},onDontShowAgainChange:function(e){this.sendBI(o.styling_dont_show,{toggle_state:e})}})}),define("panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage.rt",["react","lodash","panels/frames/messagePanelFrame","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,confirmLabel:"Pages_Settings_Delete_Last_Page_Message_Confirmation",className:"delete-page-confirmation",panelTitle:a.translate("Pages_Settings_Delete_Last_Page_Message_Title")},e.createElement("div",{className:"icon"},e.createElement(s.symbol,{name:"plaster"})),e.createElement("div",{},e.createElement("p",{},a.translate("Pages_Settings_Delete_Last_Page_Message")),e.createElement("p",{},a.translate("Pages_Settings_Delete_Last_Page_Message2")),e.createElement("p",{},a.translate("Pages_Settings_Delete_Last_Page_Message3"),"\n            ",e.createElement("a",{key:"page-settings-tab-privacy-member-url",href:"https://www.wix.com/support/html5/",target:"_blank"},e.createElement(s.button,{label:"Pages_Settings_Delete_Last_Page_Message_Link",className:"btn-text"})),".\n        ")))}}),define("panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage",["create-react-class","core","lodash","panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage.rt"],function(e,t,n,a){"use strict";return e({displayName:"deleteLastPageMessage",mixins:[t.mixins.editorAPIMixin],render:a})}),define("panels/messagePanels/deletePageMessage/deletePageMessage.rt",["react","lodash","panels/frames/messagePanelFrame","util","baseUI"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,confirmLabel:"Pages_Settings_Delete_Page_Delete",cancelLabel:"Pages_Settings_Delete_Page_Cancel",className:"important delete-page-message",panelTitle:a.translate(this.props.isPopup?"Pages_Settings_Delete_Popup_Title":"Pages_Settings_Delete_Page_Title")},e.createElement("div",{className:"delete-page-message"},e.createElement("div",{className:"icon"},e.createElement(s.symbol,{name:"deleteGeneralIcon"})),e.createElement("div",{className:"message"},a.translate(this.props.isPopup?"Pages_Settings_Delete_Popup_Message":"Pages_Settings_Delete_Page_Message")+" "+this.props.pageTitle+a.translate("Pages_Settings_Delete_Page_Message_End"))))}}),define("panels/messagePanels/deletePageMessage/deletePageMessage",["create-react-class","lodash","panels/messagePanels/deletePageMessage/deletePageMessage.rt"],function(e,t,n){"use strict";return e({displayName:"deletePageMessage",render:n})}),define("panels/messagePanels/exampleMessagePanel.rt",["react","lodash","panels/frames/messagePanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,width:"500",height:"500",onConfirm:this.onConfirm,confirmLabel:"OK",title:"Hello"},e.createElement("div",{},"content here"))}}),define("panels/messagePanels/exampleMessagePanel",["create-react-class","lodash","panels/messagePanels/exampleMessagePanel.rt","coreUtilsLib"],function(e,t,n,a){"use strict";return e({displayName:"exampleMessage",onConfirm:function(){a.log.info("onConfirm called")},render:n})}),define("panels/messagePanels/siteRevisionsPanel.rt",["react","lodash","baseUI","util","panels/frames/messagePanelFrame"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(s,{ref:"frame",panelName:this.props.panelName,panelTitle:a.translate("TOPBAR_SITE_HISTORY_MSG_TITLE"),confirmLabel:"TOPBAR_SITE_HISTORY_MSG_BUTTON",onConfirm:this.onConfirm,className:"site-revisions-panel",onCancel:this.onCloseFrame},e.createElement("div",{className:"content-wrapper"},e.createElement("div",{className:"image-container"},e.createElement(n.symbol,{name:"siteHistoryClipart"})),e.createElement("div",{className:"description-container"},e.createElement("p",{},a.translate("TOPBAR_SITE_HISTORY_MSG_BODY1")),e.createElement("p",{},a.translate("TOPBAR_SITE_HISTORY_MSG_BODY2")))))}}),define("panels/messagePanels/siteRevisionsPanel",["react-addons-linked-state-mixin","create-react-class","panels/messagePanels/siteRevisionsPanel.rt"],function(e,t,n){"use strict";return t({displayName:"siteRevisionsPanel",mixins:[e],onConfirm:function(){this.props.onButtonClick&&this.props.onButtonClick(!0)},onCloseFrame:function(){this.props.onButtonClick&&this.props.onButtonClick(!1)},render:n})}),define("panels/messagePanels/switchToOldEditorConfirmationPanel.rt",["react","lodash","util","baseUI","panels/frames/messagePanelFrame"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(s,{ref:"frame",panelName:this.props.panelName,className:"switch-to-old-editor",panelTitle:n.translate(this.props.title),confirmLabel:"Notification_Box__ToOldEditor_Button_ToOldEditor",onConfirm:this.handleBackToOld,cancelLabel:"Notification_Box__ToOldEditor_Button_Cancel",onCancel:this.close},e.createElement("div",{className:"content-wrapper"},e.createElement("div",{className:"logo"},e.createElement(a.symbol,{name:"switchToOldEditorPanel"})),e.createElement("div",{className:"text"},e.createElement("div",{className:"message"},n.translate("Notification_Box__ToOldEditor_Text1")),e.createElement("div",{className:"message"},e.createElement("p",{},n.translate("Notification_Box__ToOldEditor_Text2"),"\n                    ",e.createElement("a",{onClick:function(){this.linkClick()}.bind(this)},n.translate("Notification_Box__ToOldEditor_link")))))))}}),define("panels/messagePanels/switchToOldEditorConfirmationPanel",["create-react-class","prop-types","lodash","core","util","panels/messagePanels/switchToOldEditorConfirmationPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"switchToOldEditorConfirmationPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{title:t.string.isRequired,messageBody:t.string.isRequired},handleBackToOld:function(){s.cookie.setUserPetriOverrideCookie("SantaEditorUserOverride","old"),window.onbeforeunload=null,window.location.reload(!0)},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},linkClick:function(){if(window){var e=s.languages.getLanguageCode(),t="https://{$lang}.wix.com/support/html5/new-wix-editor-june-2015/using-your-editor/kb/suggestions-and-feedback-new-wix-editor-2015".replace("{$lang}","en"===e?"www":e);window.open(t)}},render:i})}),define("panels/messagePanels/browserDeprecationMessage/validationErrorPanel.rt",["react","lodash","baseUILib","santa-editor-symbols","util","panels/frames/dangerMessagePanelFrame"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(i,{panelName:this.props.panelName,title:"Notification_Box_Data_Curruption_Error_Title",confirmLabel:"Notification_Box_Data_Curruption_Error_Reload_Button",iconName:"plasterRed",onHelpHeader:this.openLearnMore,validationError:!0,closeWithoutCalling:!0,onConfirm:this.props.onConfirm},e.createElement("span",{},s.translate("Notification_Box_Data_Curruption_Error_Text")))}}),define("panels/messagePanels/browserDeprecationMessage/validationErrorPanel",["create-react-class","prop-types","panels/messagePanels/browserDeprecationMessage/validationErrorPanel.rt"],function(e,t,n){"use strict";return e({displayName:"validationErrorPanel",propTypes:{onConfirm:t.func.isRequired},render:n})}),define("panels/messagePanels/concurrentUsers/concurrentUserPanel.rt",["react","lodash","util","santa-editor-symbols","panels/frames/confirmationPanelFrame"],function(n,e,a,t,s){"use strict";return function(){return n.createElement(s,{panelName:this.props.panelName,className:"concurrent-user-panel",onConfirm:this.onOk,confirmLabel:this.text().ok,shouldHideCancelButton:!0,type:this.props.isFirstUser?"normal":"important",panelTitle:a.translate(this.text().title)},n.createElement("div",{className:"panel-inner"},n.createElement("div",{className:"concurrent-users-panel-img"},n.createElement(t.symbol,{name:this.props.isFirstUser?this.symbols.firstUser:this.symbols.secondUser})),n.createElement("div",{className:"textual-content"},n.createElement("div",{className:"sub-title"},n.createElement("span",{className:"concurrent-user"},this.getConcurrentUserToDisplay()),"\n          ",a.translate(this.text().description),"\n        "),n.createElement.apply(this,["ul",{className:"recommendation-list"},e.map(this.getRecommendations(),function(e,t){return n.createElement("li",{},n.createElement("span",{className:"number"},t+1,"."),n.createElement("span",{className:"description"},a.translate(e)))}.bind(this))]))))}}),define("panels/messagePanels/concurrentUsers/concurrentUserPanel",["create-react-class","prop-types","lodash","core","util","coreBi","panels/messagePanels/concurrentUsers/concurrentUserPanel.rt"],function(e,t,n,a,s,i,o){"use strict";var r=["CONCURRENT_EDITING_SOMEBODY_JOINED_OPT_1","CONCURRENT_EDITING_SOMEBODY_JOINED_OPT_2"],l=["CONCURRENT_EDITING_ALREADY_OPEN_OPT_1","CONCURRENT_EDITING_ALREADY_OPEN_OPT_2"],c={title:"CONCURRENT_EDITING_SOMEBODY_JOINED_TITLE",description:"CONCURRENT_EDITING_SOMEBODY_JOINED_DESCRIPTION",ok:"CONCURRENT_EDITING_SOMEBODY_JOINED_OK_BUTTON"},p={title:"CONCURRENT_EDITING_ALREADY_OPEN_TITLE",description:"CONCURRENT_EDITING_ALREADY_OPEN_DESCRIPTION",ok:"CONCURRENT_EDITING_ALREADY_OPEN_OK_BUTTON"},u=0;return e({displayName:"ConcurrentUserPanel",mixins:[a.mixins.editorAPIMixin],symbols:{firstUser:"concurrentUsersPopupsBlue",secondUser:"concurrentUsersPopupsRed"},propTypes:{isFirstUser:t.bool.isRequired,concurrentUsers:t.arrayOf(t.string).isRequired,concurrentUserToDisplay:t.string},componentDidMount:function(){u=0===u?1:2},text:function(){return this.props.isFirstUser?c:p},getRecommendations:function(){return this.props.isFirstUser?r:l},getConcurrentUserToDisplay:function(){var e=this.props.concurrentUserToDisplay||n.head(this.props.concurrentUsers);return("wixStaff"===e||n.endsWith(e.toLowerCase(),"@wixcs.com"))&&(e=s.translate("CONCURRENT_EDITING_SOMEBODY_JOINED_DESCRIPTION_WIX_STAFF")),e},onOk:function(){var e=i.events.concurrentUsers.CONCURRENT_USERS_POPUP_OK_CLICK,t={user:this.props.isFirstUser?"first":"second",count:this.props.concurrentUsers.length,is_first:1===u};this.getEditorAPI().bi.event(e,t)},render:o})}),define("panels/messagePanels/autopilotUpdate/autopilotUpdatePanel.rt",["react","lodash","util","santa-editor-symbols","baseUILib","panels/frames/confirmationPanelFrame"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(i,{className:"autopilot-update-panel",automationId:this.props.panelName,panelName:this.props.panelName,shouldHideFooter:!0,shouldHideHeader:!0},e.createElement(s.Composites.PopupMediumSize,{},e.createElement(s.Composites.BigPanelHeaderWithIllustration,{},e.createElement(s.PanelHeaderCenteredText,{title:"OfflineInstallation_PopUp_Title",titleType:"T13",shouldTranslate:!0,shouldHideCloseButton:!0}),e.createElement(s.PanelHeaderIllustration,{blueStripHeight:80},e.createElement(a.symbol,{name:"autopilotUpdate",key:"illustrationSymbol"}))),e.createElement(s.Composites.PanelContent,{},e.createElement(s.Composites.RichTextWithIllustration,{className:"composite-centered"},e.createElement(s.Composites.RichTextLabeled,{className:"composite-centered"},e.createElement(s.TextLabel,{value:"OfflineInstallation_PopUp_Text1",shouldTranslate:!0,type:"T01"}),e.createElement(s.TextLabel,{value:"OfflineInstallation_PopUp_Text2",shouldTranslate:!0,type:"T01"})))),e.createElement(s.Composites.ActionSetVertical,{},e.createElement(s.Button,{onClick:this.refresh},"\n                    ",n.translate("OfflineInstallation_PopUp_Refresh_Button"),"\n                "))))}}),define("panels/messagePanels/autopilotUpdate/autopilotUpdatePanel",["create-react-class","prop-types","util","lodash","panels/messagePanels/autopilotUpdate/autopilotUpdatePanel.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"AutopilotUpdatePanel",render:s,propTypes:{panelName:t.string},refresh:function(){n.windowInteractionUtils.reloadPageWithoutQuestion()}})}),define("panels/messagePanels/widgetWarningMessage/widgetWarningMessage.rt",["react","lodash","panels/frames/dangerMessagePanelFrame","util"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,confirmLabel:this.props.confirmLabel,cancelLabel:this.props.cancelLabel,title:this.props.title,iconName:this.props.iconName,closeWithoutCalling:"true",onHelpHeader:this.props.onHelpHeader},"\n\n    ",a.translationUtil.translateTemplate(this.props.message,this.props.messageTemplateReplacements),"\n\n")}}),define("panels/messagePanels/widgetWarningMessage/widgetWarningMessage",["create-react-class","lodash","prop-types","panels/messagePanels/widgetWarningMessage/widgetWarningMessage.rt"],function(e,t,n,a){"use strict";return e({displayName:"widgetWarningMessage",propsTypes:{title:n.string.isRequired,message:n.string.isRequired,onConfirm:n.func.isRequired,messageTemplateReplacements:n.object,confirmLabel:n.string,cancelLabel:n.string,iconName:n.string},getDefaultProps:function(){return{messageTemplateReplacements:{},confirmLabel:"AppStudio_Continue_Button",cancelLabel:"AppStudio_Cancel_Button",iconName:"platformWarning"}},render:a})}),define("panels/messagePanels/browserDeprecationMessage/browserDeprecationMessage.rt",["react","lodash","baseUILib","santa-editor-symbols","util","panels/frames/messagePanelFrame"],function(t,e,n,a,s,i){"use strict";return function(){return function(){var e=this.browserKeys[this.props.browser];return t.createElement(i,{panelName:this.props.panelName,panelTitle:s.translate(e.panelTitle),confirmLabel:"Notification_Box_Browser_Not_Supported_Button"},t.createElement(n.Composites.PanelContent,{},t.createElement(n.Composites.RichTextWithIllustration,{},t.createElement(n.Illustration,{},t.createElement(a.symbol,{name:"browser-not-supported"})),t.createElement(n.Composites.RichTextLabeled,{},t.createElement(n.TextLabel,{value:e.subTitle}),t.createElement(n.RichText,{},"\n                    ",s.translate(e.description),"\n                    ",t.createElement("a",{onClick:this.openLearnMore},s.translate("Notification_Box_Browser_Not_Supported_Link")))))))}.apply(this,[])}}),define("panels/messagePanels/browserDeprecationMessage/browserDeprecationMessage",["create-react-class","prop-types","lodash","helpIds","constants","panels/messagePanels/browserDeprecationMessage/browserDeprecationMessage.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"browserDeprecationMessage",propTypes:{openHelpCenter:t.func.isRequired,browser:t.string.isRequired},browserKeys:{safari9:{panelTitle:"Notification_Box_Browser_Not_Supported_Title",subTitle:"Notification_Box_Browser_Not_Supported_Text1",description:"Notification_Box_Browser_Not_Supported_Text2"},ie11:{panelTitle:"Notification_Box_Browser_Not_Supported_Title1",subTitle:"Notification_Box_Browser_Not_Supported_Text3",description:"Notification_Box_Browser_Not_Supported_Text4"}},openLearnMore:function(){this.props.openHelpCenter(a.LEARN_MORE.BROWSER_DEPRECATED,null,{learn_more:!0,panel_name:this.props.panelName,origin:s.BI.HELP.ORIGIN.PANEL})},render:i})}),define("panels/messagePanels/browserDeprecationMessage/browserDeprecationMessageForIE.rt",["react","lodash","baseUILib","santa-editor-symbols","util","panels/frames/dangerMessagePanelFrame"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(i,{panelName:this.props.panelName,title:"Notification_Box_Browser_Not_Supported_Title2",confirmLabel:"Notification_Box_Browser_Not_Supported_Button",iconName:"browser-not-supported-red",onHelpHeader:this.openLearnMore,",":!0,onConfirm:this.props.onConfirm},e.createElement(n.TextLabel,{value:"Notification_Box_Browser_Not_Supported_Text3"}),e.createElement(n.RichText,{},"\n                    ",s.translate("Notification_Box_Browser_Not_Supported_Text5"),"\n                    ",e.createElement("a",{onClick:this.openLearnMore},s.translate("Notification_Box_Browser_Not_Supported_Link"))))}}),define("panels/messagePanels/browserDeprecationMessage/browserDeprecationMessageForIE",["create-react-class","prop-types","lodash","helpIds","constants","panels/messagePanels/browserDeprecationMessage/browserDeprecationMessageForIE.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"browserDeprecationMessage",propTypes:{openHelpCenter:t.func.isRequired},openLearnMore:function(){this.props.openHelpCenter(a.LEARN_MORE.BROWSER_DEPRECATED,null,{learn_more:!0,panel_name:this.props.panelName,origin:s.BI.HELP.ORIGIN.PANEL})},render:i})}),define("panels/messagePanels/messagePanels",["panels/messagePanels/changeStyleMessage/changeStyleMessage","panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage","panels/messagePanels/deletePageMessage/deletePageMessage","panels/messagePanels/exampleMessagePanel","panels/messagePanels/siteRevisionsPanel","panels/messagePanels/switchToOldEditorConfirmationPanel","panels/messagePanels/browserDeprecationMessage/validationErrorPanel","panels/messagePanels/concurrentUsers/concurrentUserPanel","panels/messagePanels/autopilotUpdate/autopilotUpdatePanel","panels/messagePanels/widgetWarningMessage/widgetWarningMessage","panels/messagePanels/browserDeprecationMessage/browserDeprecationMessage","panels/messagePanels/browserDeprecationMessage/browserDeprecationMessageForIE"],function(e,t,n,a,s,i,o,r,l,c,p,u){"use strict";return{changeStyleMessage:e,deleteLastPageMessage:t,deletePageMessage:n,exampleMessage:a,siteRevisionsPanel:s,switchToOldEditorConfirmationPanel:i,validationErrorPanel:o,concurrentUserPanel:r,autopilotUpdatePanel:l,widgetWarningMessage:c,browserDeprecationMessage:p,browserDeprecationMessageForIE:u}}),define("panels/toolPanels/pagesSelector/pageItem.rt",["react","lodash","baseUI","baseUILib","santa-editor-symbols","core"],function(a,s,i,o,r,l){"use strict";return function(){return function(){var e=this.props.dataSource,t=this.getEditorAPI(),n=this.validatePage();return a.createElement("div",{className:s(this.getItemClassNames(e)).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},a.createElement(i.tooltip,{disabled:n.valid,shouldTranslate:!1,value:n.message},a.createElement("label",{className:"item-label"},e.pageData?a.createElement(o.Checkbox,{key:"toggle",disabled:!n.valid,value:this.isSelected(),onChange:this.handleToggleChanged}):null,a.createElement("span",{className:"page-name"},e.label),e.pageData&&t.pages.isHomePage(e.pageData.id)?a.createElement(r.symbol,{name:"pageItemHomeIcon",key:"isHome"}):null,e.pageData&&l.utils.tpaTypeUtils.isTPA(e.pageData)&&!l.utils.tpaTypeUtils.isTPASpecialPage(t.dsRead,e.pageData)?a.createElement(r.symbol,{name:"actionButtonSpecialPages",key:"isTpaPage"}):null,e.pageData&&l.utils.blogTypeUtils.isBlogSectionPage(t,e.pageData)?a.createElement(r.symbol,{name:"actionButtonBlogPages",key:"isBlogPage"}):null,e.type.isLink?a.createElement(r.symbol,{name:"pageItemLinkIcon",key:"isLink"}):null,e.type.isDropdown?a.createElement(r.symbol,{name:"pageItemDropdownIcon",key:"isDropDown"}):null,e.isVisible?null:a.createElement(r.symbol,{name:"pageItemHideIcon",key:"isHidden"}))))}.apply(this,[])}}),define("panels/toolPanels/pagesSelector/pageItem",["react-addons-linked-state-mixin","create-react-class","prop-types","core","lodash","panels/toolPanels/pagesSelector/pageItem.rt"],function(e,t,n,a,s,i){"use strict";return t({mixins:[a.mixins.editorAPIMixin,e],displayName:"pageSelectorPageItem",propTypes:{isSubMenu:n.bool,isSubMenuLast:n.bool,validatePage:n.func,selectedPageIds:n.array.isRequired,dataSource:n.object.isRequired,toggleSelection:n.func},handleToggleChanged:function(e){this.props.toggleSelection&&this.props.toggleSelection(this.getPageId(),e)},getItemClassNames:function(e){var t=this.validatePage().valid;return{"pages-selector-item":!0,"current-page":!1,"item-hidden":!e.isVisible,"item-disabled":!t,"item-first-level":!this.props.isSubMenu,"item-second-level":this.props.isSubMenu,"item-second-level-last":this.props.isSubMenuLast,"item-is-page":e.type.isPage}},isSelected:function(){return s.includes(this.props.selectedPageIds,this.getPageId())},validatePage:function(){var n=this.getPageId(),e=[this.props.validatePage||s.noop,s.constant({valid:!0})];return s.reduce(e,s.bind(function(e,t){return e||t(n,this)},this),void 0)},getPageId:function(){return this.props.dataSource.pageData&&this.props.dataSource.pageData.id},render:i})}),define("panels/toolPanels/pagesSelector/treeNode.rt",["react","lodash"],function(a,s){"use strict";return function(){return function(){var e=this.getTreeViewClass(),t=this.props.nodeContent,n=this.getChildren().length;return this.hasChildren(),a.createElement("li",{"data-numofchildren":n,className:s({"has-children":this.hasChildren(),"pages-tree-node":!0}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},a.createElement(t,this.passNodeContentProps(this.props.dataSource)),a.createElement(e,s.assign({},{isCollapsed:this.state.collapsed},this.passNodeProps())))}.apply(this,[])}}),define("panels/toolPanels/pagesSelector/pagesSelectorPanel.rt",["react","lodash","util","baseUI","baseUILib","santa-editor-symbols","popups","panels/toolPanels/pagesSelector/pageItem","panels/toolPanels/pagesSelector/treeNode.rt","panels/frames/toolPanelFrame"],function(n,a,t,s,i,e,o,r,l,c){"use strict";return function(){return this.getEditorAPI().pages.popupPages.getCurrentPopup()?function(){var e=o.mappers.pagesSelectorPanel(this.getEditorAPI());return n.createElement(c,a.assign({},{contentStyle:this.getFrameStyle(),key:"pages-selector-panel",keyboardShortcuts:this.getKeyboardShortcuts(),contentWrapperClass:"pages-selector-panel",headerTitle:t.translate("Popups_Settings_Pages_Panel_Header")},a.omit(this.props,"children")),e.selectAll.visible?n.createElement("div",{className:"description-block",key:"selectAll_description"},"\n        ",t.translate("Popups_Settings_Pages_Panel_Text"),"\n    "):null,e.selectAll.visible?n.createElement("div",{className:"select-all-block",key:"selectAll_control"},n.createElement(i.Checkbox,{disabled:e.selectAll.disabled,labelAfterSymbol:!0,value:e.selectAll.checked,indeterminate:e.selectAll.indeterminate,onChange:this.toggleOpenOnAllPages,label:"Popups_Settings_Pages_All_Toggle"})):null,n.createElement(i.CustomScroll,{},function(e){var t=this.getEditorAPI();return n.createElement("div",{className:"pages-selector-scrollbox"},n.createElement(s.treeView,{className:"pages-tree ",dataSource:this.getTreeDataSource(),editorAPI:t,nodeContent:r,nodeTemplate:l,validatePage:a.partial(this.validatePage,e),selectedPageIds:e.selectedPageIds,toggleSelection:this.toggleOpenOnPage,isRoot:!0}))}.apply(this,[e])))}.apply(this,[]):null}}),define("panels/toolPanels/pagesSelector/pagesSelectorPanel",["create-react-class","lodash","util","core","popups","panels/toolPanels/pagesSelector/pagesSelectorPanel.rt"],function(e,s,n,t,a,i){"use strict";return e({displayName:"pagesSelectorPanel",mixins:[t.mixins.editorAPIMixin,n.translationMixin],getFrameStyle:function(){return s.pick(this.props,["top","left","width"])},toggleOpenOnPage:function(e,t){var n=this.getEditorAPI();t?a.actions.openBehaviors.assignOpenBehaviorToPage(n,e):a.actions.openBehaviors.removeOpenBehaviorFromPage(n,e)},toggleOpenOnAllPages:function(e){var t=this.getEditorAPI();e?a.actions.openBehaviors.assignOpenBehaviorToAllPages(t):a.actions.openBehaviors.removeOpenBehaviorFromAllPages(t)},validatePage:function(e,t){if(s.has(e.occupiedPages,t))return{valid:!1,message:this.translateTemplate("Popups_Settings_Triggers_Page_Has_Popup_Tooltip",{POPUP_NAME:'"'+e.occupiedPages[t]+'"'},this.getEditorAPI())}},getKeyboardShortcuts:function(){var e={},t=n.browserUtil.getKeyboardSpecialKey().value;return e[t+" + z"]=this.getEditorAPI().history.undo,e[[t+" + y",t+" + shift + z"].join(",")]=this.getEditorAPI().history.redo,e},getTreeDataSource:function(){var e=this.getEditorAPI(),t=e.pages.dynamicPages.getMenuItems(),n=e.mainMenu.getMenuItemsTreeForPagesFixed(),a=s.flatMap(t,"items");return n.concat(a)},render:i})}),define("panels/toolPanels/exampleToolPanel.rt",["react","lodash","panels/frames/toolPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,headerTitle:"Tools Panel",contentStyle:this.getFrameStyle()},e.createElement("div",{},"content here"))}}),define("panels/toolPanels/exampleToolPanel",["create-react-class","lodash","panels/toolPanels/exampleToolPanel.rt"],function(e,t,n){"use strict";return e({displayName:"exampleToolPanel",getDefaultProps:function(){return{top:"200px",left:"300px"}},getFrameStyle:function(){return t.defaults({width:500,height:200},t.pick(this.props,["top","left"]))},render:n})}),define("panels/toolPanels/linkPanel/linkPanel.rt",["react","lodash","panels/frames/toolPanelFrame","baseUI","baseUILib","util","santa-editor-symbols","experiment"],function(i,s,o,r,l,c,p,u){"use strict";return function(){function n(e,t){var n=this.getPagesWithAnchors();return i.createElement(r.tabs.tab,{name:"AnchorLink",className:"anchor",key:"anchorLinkTab"},s.isEmpty(n)?i.createElement("div",{key:"noAnchorsWrapper",className:"no-anchors"},i.createElement("div",{className:"symbol-container"},i.createElement(p.symbol,{name:"noLink"})),i.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_NO_ANCHOR_TITLE")),i.createElement("p",{},this.translateIfNeeded("LINK_PANEL_NO_ANCHOR_TEXT")),i.createElement(r.button,{className:"btn-text",label:"Anchor_Settings_How_Link_Text",onClick:this.openLearnMoreOnAnchor})):null,s.isEmpty(n)?null:i.createElement("label",{className:"dropdown-title",key:"pagesDropDownAnchorTabLabel"},c.translate(this.props.anchorTabPageDropDownTitle?this.props.anchorTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_LABEL")),s.isEmpty(n)?null:i.createElement.apply(this,[l.DropDown,{shouldTranslate:!1,value:this.linkToPage().value,searchBox:!0,onChange:this.linkToPage().requestChange,key:"pagesDropDownAnchorTab",optionsContainerClassName:"link-panel-options-container"},s.map(this.getPagesWithAnchors(),function(e,t,n,a,s){return i.createElement(l.DropDownOption,{className:a.level?"level"+a.level:"",key:a.id,value:a.id,label:a.title+this.getCurrentPageThisTranslate(a.id)+" "+this.getRouterTypeForPageId(a.id),shouldTranslate:!1})}.bind(this,e,t,n))]),s.isEmpty(n)?null:i.createElement(l.Divider,{long:!0,key:"anchorDivider",className:"dropdown-link-separator"}),s.isEmpty(n)||!this.isDynamicPage(this.state.page.id)||this.isCollectionPageOrHasOneRoute()?null:i.createElement("label",{className:"dropdown-title",key:"innerRouteDropDownLabel"},c.translate("LINK_PANEL_PAGE_INNER_ROUTES_DROP_DOWN_LABEL")),s.isEmpty(n)||!this.isDynamicPage(this.state.page.id)||this.isCollectionPageOrHasOneRoute()?null:i.createElement.apply(this,[l.DropDown,{shouldTranslate:!1,searchBox:!0,disabled:!this.shouldShowInnerRoutesDropDown(),key:"innerRouteDropDown",value:this.linkToInnerRoute().value,optionsContainerClassName:"link-panel-options-container",onChange:this.linkToInnerRoute().requestChange},this.shouldShowPrevButton()?i.createElement(l.Button,{className:"btn-text",key:"prevButton",onClick:this.decreaseRange},i.createElement("span",{key:"preButtonText"},c.translate("dynamic_pages_routes_navigation_button_back"))):null,s.map(this.getInnerRoutesDropDown(),function(e,t,n,a,s){return i.createElement(l.DropDownOption,{shouldTranslate:!1,key:a.url,value:a.url,label:a.title})}.bind(this,e,t,n)),this.shouldShowNextButton()?i.createElement(l.Button,{className:"btn-text",key:"nextButton",onClick:this.increaseRange},i.createElement("span",{key:"nextButtonText"},c.translate("dynamic_pages_routes_navigation_button_next"))):null]),this.shouldShowInnerRoutesDropDown()?i.createElement(l.Divider,{key:"innerRouteDropDownDivider",long:!0,className:"dropdown-link-separator"}):null,s.isEmpty(n)?null:i.createElement("label",{className:"dropdown-title",key:"anchorNameLabel"},c.translate("LINK_PANEL_PAGE_ANCHOR_DROP_DOWN_LABEL")),s.isEmpty(n)?null:i.createElement.apply(this,[l.DropDown,{key:"anchorDropDown",shouldTranslate:!1,value:this.linkToAnchor().value,searchBox:!0,onChange:this.linkToAnchor().requestChange,optionsContainerClassName:"link-panel-options-container",disabled:!Boolean(this.state.link)||!Boolean(this.hasAnchors())||this.isDynamicPage(this.state.page.id)&&!this.shouldShowInnerRoutesDropDown()&&!this.isCollectionPageOrHasOneRoute()},s.map(this.getDropDownOptions(),function(e,t,n,a,s){return i.createElement(l.DropDownOption,{shouldTranslate:!1,key:a.value,value:a.value,label:a.label})}.bind(this,e,t,n))]))}function a(e,t){var n=this.popupList;return i.createElement(r.tabs.tab,{name:"PopupLink",key:"popupLinkTab",className:"popup"},n.length?null:i.createElement("div",{key:"popups-not-exist"},i.createElement("div",{className:"symbol-container"},i.createElement(p.symbol,{name:"noPopup"})),i.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_TAB_POP-UP_TITLE")),i.createElement("p",{},this.translateIfNeeded("LINK_PANEL_TAB_POP-UP_TEXT")),i.createElement(r.button,{className:"btn-text",label:"LINK_PANEL_TAB_ADD_NEW_POP-UP_LINK",onClick:this.goToAddPanelPopup})),n.length?i.createElement("div",{key:"popups-exist",className:"popup-list"},i.createElement.apply(this,[r.dropDown.select,{label:"LINK_PANEL_TAB_POP-UP_DROP_DOWN_LABEL",valueLink:this.linkTo("pageId")},s.map(n,function(e,t,n,a,s){return i.createElement(r.dropDown.option,{shouldTranslate:!1,key:a.id,value:"#"+a.id},a.title,"\n                        ")}.bind(this,e,t,n))]),i.createElement(l.Divider,{long:!0,className:"popup-divider"}),i.createElement("div",{className:"popup-footer"},this.isMobileEditor()?null:i.createElement("div",{className:"popup-footer-content",key:"isMobileEditor"},i.createElement("span",{className:"popup-want-to-add-link"},c.translate("LINK_PANEL_TAB_ADD_NEW_POP-UP_TEXT")),i.createElement(r.button,{className:"btn-text",label:"LINK_PANEL_TAB_ADD_NEW_POP-UP_LINK",onClick:this.goToAddPanelPopup})))):null)}return function(){var e=this.isSectionVisible("PageLink"),t=this.isSectionVisible("NoLink");return i.createElement(o,{helpId:this.getHelpId(),panelName:this.props.panelName,selectedComponentType:this.props.bi.selectedComponentType,headerTitle:c.translate("LINK_PANEL_HEADER_PANE_LABEL"),ref:"frame",onClose:this.props.onCancelCallback&&this.props.onCancelCallback.bind(null,this.props.link),contentWrapperClass:"link-panel"},i.createElement(r.tabs.holder,{valueLink:this.linkSelectedTab(),className:"left radio",ref:"tabs"},i.createElement.apply(this,[r.tabs.header,{},s.map(this.getLinkSectionsData(),function(e,t,n,a){return i.createElement(r.tabs.label,{htmlFor:n.for,key:n.key,automationId:n.automationId},"\n                ",this.translateIfNeeded(n.label),"\n            ")}.bind(this,e,t))]),i.createElement(r.tabs.content,{},t?i.createElement(r.tabs.tab,{name:"NoLink",className:"none",key:"NoLinkTab"},i.createElement("div",{className:"symbol-container"},i.createElement(p.symbol,{name:"noLink"})),i.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_PAGE_DROP_DOWN_Title")),i.createElement("p",{},this.translateIfNeeded("LINK_PANEL_PAGE_DROP_DOWN_Text"))):null,this.isPagesDropDownReady()&&e?i.createElement(r.tabs.tab,{name:"PageLink",className:"page",key:"pageLinkTab"},i.createElement(l.Composites.DropDownLabeled,{key:"dropDownLabeled"},i.createElement(l.TextLabel,{value:c.translate(this.props.pageTabPageDropDownTitle?this.props.pageTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_LABEL"),shouldTranslate:!1}),i.createElement.apply(this,[l.DropDown,{shouldTranslate:!1,value:this.linkToPage().value,searchBox:!0,onChange:this.linkToPage().requestChange,optionsContainerClassName:"link-panel-options-container"},s.map(this.getPagesListToShow(),function(e,t,n,a){return i.createElement(l.DropDownOption,{shouldTranslate:!1,className:n.level?"level"+n.level:"",key:n.id,value:n.id,label:n.title+this.getCurrentPageThisTranslate(n.id)+" "+this.getRouterTypeForPageId(n.id)})}.bind(this,e,t))])),i.createElement(l.Divider,{className:"page-link-drop-divider"}),this.shouldShowInnerRoutesDropDown()?i.createElement(l.Composites.DropDownLabeled,{key:"innerRouteDropDownLabeled"},i.createElement("label",{className:"dropdown-title"},c.translate("LINK_PANEL_PAGE_INNER_ROUTES_DROP_DOWN_LABEL")),i.createElement.apply(this,[l.DropDown,{shouldTranslate:!1,searchBox:!0,key:"innerRouteDropDown",value:this.linkToInnerRoute().value,onChange:this.linkToInnerRoute().requestChange,optionsContainerClassName:"link-panel-options-container"},this.shouldShowPrevButton()?i.createElement(l.Button,{className:"btn-text",key:"prevButton",onClick:this.decreaseRange},i.createElement("span",{},c.translate("dynamic_pages_routes_navigation_button_back"))):null,s.map(this.getInnerRoutesToRender()||[],function(e,t,n,a){return i.createElement(l.DropDownOption,{shouldTranslate:!1,key:n.url,value:n.url,label:n.title})}.bind(this,e,t)),this.shouldShowNextButton()?i.createElement(l.Button,{className:"btn-text",key:"nextButton",onClick:this.increaseRange},i.createElement("span",{},c.translate("dynamic_pages_routes_navigation_button_next"))):null])):null,this.shouldHideLinkTarget()?null:i.createElement(l.Composites.RadioButtonsLabeled,{key:"pageTargetRadio"},i.createElement(l.TextLabel,{value:"LINK_PANEL_WEB_ADDRESS_OPTIONS_LABEL"}),function(e,t){var n=this.linkTo("target");return i.createElement(l.RadioButtons,{className:"open-target-radio-buttons",value:n.value,onChange:n.requestChange,options:[{value:"_blank",label:"LINK_PANEL_WEB_ADDRESS_OPTION1"},{value:"_self",label:"LINK_PANEL_WEB_ADDRESS_OPTION2"}]})}.apply(this,[e,t]))):null,this.isPagesDropDownReady()?n.apply(this,[e,t]):null,i.createElement(r.tabs.tab,{name:"ExternalLink",className:"web"},i.createElement(l.Composites.TextInputLabeled,{},i.createElement(l.TextLabel,{value:"LINK_PANEL_WEB_ADDRESS_INPUT_LABEL",automationId:"link-panel-web-address-label"}),i.createElement(l.TextInput,{key:"webAddress",validator:this.isValidUrl,invalidMessage:"Validation_V2_URL",placeholder:"LINK_PANEL_WEB_ADDRESS_DEFAUL",validateInitialValue:!1,onChange:function(e,t,n){this.updateLinkValue("url",n)}.bind(this,e,t),value:this.state.link&&this.state.link.url,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"url")}.bind(this,e,t),focus:!0})),this.shouldHideLinkTarget()?null:i.createElement(l.Divider,{key:"externalTargetDivider"}),this.shouldHideLinkTarget()?null:i.createElement(l.Composites.RadioButtonsLabeled,{key:"externalTargetRadio"},i.createElement(l.TextLabel,{value:"LINK_PANEL_WEB_ADDRESS_OPTIONS_LABEL"}),function(e,t){var n=this.linkTo("target");return i.createElement(l.RadioButtons,{className:"open-target-radio-buttons",value:n.value,onChange:n.requestChange,options:[{value:"_blank",label:"LINK_PANEL_WEB_ADDRESS_OPTION1"},{value:"_self",label:"LINK_PANEL_WEB_ADDRESS_OPTION2"}]})}.apply(this,[e,t])),this.shouldDisplayLinkDescription()?i.createElement(l.TextLabel,{value:"LINK_PANEL_PAGE_DESCRIPTION",className:"link-page-description",key:"linkDisclaimer"}):null),i.createElement(r.tabs.tab,{name:"EmailLink",className:"email"},i.createElement(l.Composites.TextInputLabeled,{},i.createElement(l.TextLabel,{value:"LINK_PANEL_EMAIL_INPUT_LABEL",automationId:"link-panel-email-address-label"}),i.createElement(l.TextInput,{key:"emailAddress",validator:this.isValidEmail,invalidMessage:"Validation_V1_Email",placeholder:"LINK_PANEL_EMAIL_INPUT_DEFAULT",validateInitialValue:!1,onChange:function(e,t,n){this.updateLinkValue("recipient",n)}.bind(this,e,t),value:this.state.link&&this.state.link.recipient,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"recipient")}.bind(this,e,t),focus:!0})),i.createElement(l.Divider,{}),i.createElement(l.Composites.TextInputLabeled,{},i.createElement(l.TextLabel,{value:"LINK_PANEL_EMAIL_SUBJUCT",automationId:"link-panel-email-address-subject-label"}),i.createElement(l.TextInput,{key:"emailAddressSubject",validator:this.isValidSubject,invalidMessage:"Validation_V21_InvalidInput",placeholder:"LINK_PANEL_EMAIL_SUBJECT_DEFAULT",validateInitialValue:!1,onChange:function(e,t,n){this.updateLinkValue("subject",n)}.bind(this,e,t),value:this.state.link&&this.state.link.subject,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"subject")}.bind(this,e,t)}))),i.createElement(r.tabs.tab,{name:"PhoneLink",className:"phone"},i.createElement(l.Composites.TextInputLabeled,{},i.createElement(l.InfoIcon,{text:"LINK_PANEL_PHONE_DESCRIPTION_TOOLTIP"}),i.createElement(l.TextLabel,{value:"LINK_PANEL_PHONE_INPUT_LABEL",automationId:"link-panel-phone-number-label"}),i.createElement(l.TextInput,{key:"phoneNumber",validator:this.isValidPhone,invalidMessage:"Validation_V1_Phone",placeholder:"LINK_PANEL_PHONE_INPUT_DEFAULT",validateInitialValue:!1,onChange:function(e,t,n){this.updateLinkValue("phoneNumber",n)}.bind(this,e,t),value:this.state.link&&this.state.link.phoneNumber,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"phoneNumber")}.bind(this,e,t),focus:!0})),i.createElement(l.Divider,{}),i.createElement("p",{className:"extra-info"},this.translateIfNeeded("LINK_PANEL_PHONE_DESCRIPTION"),"\n                    ",i.createElement(r.button,{className:"btn-text inline-link-button",label:"LINK_PANEL_PHONE_DESCRIPTION_LINK",onClick:this.openLearnMoreOnPhoneLink}))),this.isMobileEditor()?i.createElement(r.tabs.tab,{name:"WhatsAppLink",className:"whatsapp",key:"whatsapp"},i.createElement(l.Composites.TextInputLabeled,{},i.createElement(l.InfoIcon,{text:"LINK_PANEL_PHONE_DESCRIPTION_TOOLTIP"}),i.createElement(l.TextLabel,{value:"LINK_PANEL_PHONE_INPUT_LABEL",automationId:"link-panel-whatsapp-number-label"}),i.createElement(l.TextInput,{key:"whatsappNumber",validator:this.isValidInternationalPhone,invalidMessage:"Validation_V1_Phone",placeholder:"LINK_PANEL_PHONE_INPUT_DEFAULT",validateInitialValue:!1,maxLength:100,onChange:function(e,t,n){this.updateLinkValue("phoneNumber",n)}.bind(this,e,t),value:this.state.link&&this.state.link.phoneNumber,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"phoneNumber")}.bind(this,e,t),focus:!0})),i.createElement(l.Divider,{}),i.createElement("p",{className:"extra-info"},this.translateIfNeeded("LINK_PANEL_PHONE_WHATSAPP_DESCRIPTION"),"\n                    ",i.createElement(r.button,{className:"btn-text inline-link-button",label:"LINK_PANEL_PHONE_WHATSAPP_LINK",onClick:this.openLearnMoreOnWhatsappLink}))):null,u.isOpen("se_QuickActionBarAddress")?i.createElement(r.tabs.tab,{name:"AddressLink",className:"address",key:"address"},i.createElement("div",{className:"addressLinkWrapper"},i.createElement(r.textInput,{label:"mobile_quick_actions_set_up_address_label",infoText:"Google_Maps_Settings_Information_Address_Tooltip",key:"address",asyncValidator:this.isValidAddress,invalidMessage:"Validation_V13_Google_Maps",placeholder:"mobile_quick_actions_location_placeholder_text",value:this.state.link&&this.state.link.address,onValidationStatus:function(e,t,n){this.validationStatusChanged(n,"address")}.bind(this,e,t),focus:!0,maxLength:1024,validateInitialValue:!0,onChange:function(e,t,n){this.updateLinkValue("address",n)}.bind(this,e,t),validateOnBlurOnly:!0,blurOnEnterKey:!0}),i.createElement(l.Divider,{long:!0})),i.createElement("p",{className:"extra-info"},this.translateIfNeeded("LINK_PANEL_ADDRESS_DESCRIPTION"))):null,i.createElement(r.tabs.tab,{name:"DocumentLink",className:"document"},i.createElement(l.Composites.RichText,{},i.createElement(l.RichText,{},this.translateIfNeeded("LINK_PANEL_DOCUMENT_LABEL"))),i.createElement(r.changeMediaInput,{buttonLabelWithItems:"LINK_PANEL_DOCUMENT_BUTTON",buttonLabelWithoutItems:"LINK_PANEL_DOCUMENT_BUTTON",selectionType:"single",value:this.state.link?this.state.link.name:"",onChange:this.documentChanged}),i.createElement("div",{key:"pdf-indexing-section-link"},c.media.isFilePDF(this.getDocId())?i.createElement(l.Divider,{key:"indexableSeparator"}):null,c.media.isFilePDF(this.getDocId())?i.createElement("div",{className:"search-results-pdf",key:"search-results-pdf"},this.state.pdfIndexable?i.createElement("div",{className:"search-results-pdf-inner-container",key:"search-results-pdf-inner-container"},i.createElement("span",{className:"search-results-pdf-info-text"},this.translateIfNeeded("LINK_PANEL_DOCUMENT_PDF_INDEXINGON_TEXT1")," "),i.createElement("span",{className:"search-results-pdf-link-text",onClick:this.openMediaGallery.bind(this,"ALL_MEDIA")},this.translateIfNeeded("LINK_PANEL_DOCUMENT_PDF_INDEXINGON_LINK"))):null,this.state.pdfIndexable?null:i.createElement("span",{key:"search-results-pdf-text",className:"search-results-pdf-text",onClick:this.handleShowPdfIndexing},"\n                            ",this.translateIfNeeded("Document_Settings_PDF_SeoSection_ShowPDFinResults_Link"),"\n                        ")):null)),i.createElement(r.tabs.tab,{key:"edge-anchors",name:"EdgeAnchorLinks",className:"edge-anchors"},i.createElement(l.Composites.Thumbnails,{},i.createElement(l.TextLabel,{value:"LINK_PANEL_TAB_TOPandBOTTOM_LABEL",enableEllipsis:!1}),i.createElement(l.Thumbnails,{value:this.linkToAnchor().value,onChange:this.linkToAnchor().requestChange,maxThumbsPerRow:2,borderType:"thumbnailAndLabel",options:this.getEdgeAnchors()}))),a.apply(this,[e,t]),u.isOpen("wixstaff")?i.createElement(r.tabs.tab,{name:"LoginToWixLink",className:"home-page-link",key:"homePageLoginTab"},i.createElement(r.textInput,{ref:"postLogin",key:"postLogin",label:"LINK_PANEL_POST_LOGIN_INPUT",valueLink:this.linkToAndTrim("postLoginUrl"),validator:this.isEmptyStringOrFullUrl,invalidMessage:"Validation_V2_URL",onChangeInValidationStatus:function(e,t,n){this.setState({isValid:n})}.bind(this,e,t)}),i.createElement(r.textInput,{ref:"postSignup",key:"postSignup",label:"LINK_PANEL_POST_SIGNUP_INPUT",valueLink:this.linkToAndTrim("postSignupUrl"),validator:this.isEmptyStringOrFullUrl,invalidMessage:"Validation_V2_URL",onChangeInValidationStatus:function(e,t,n){this.setState({isValid:n})}.bind(this,e,t)}),i.createElement.apply(this,[r.dropDown.select,{label:"LINK_PANEL_VIEW_DROPDOWN",valueLink:this.linkTo("dialog")},s.map([{label:"LINK_PANEL_VIEW_SHOW_LOGIN",value:"showLogin"},{label:"LINK_PANEL_VIEW_LOGIN",value:"login"},{label:"LINK_PANEL_VIEW_SIGNUP",value:"createUser"}],function(e,t,n,a){return i.createElement(r.dropDown.option,{key:n.value,value:n.value},n.label,"\n                    ")}.bind(this,e,t))]),i.createElement(l.ToggleSwitch,{ref:"sendMail",key:"sendMail",value:this.linkLoginToWixLinkSendEmailProperty().value,label:"LINK_PANEL_SEND_MAIL_TOGGLE",onChange:this.linkLoginToWixLinkSendEmailProperty().requestChange}),i.createElement(r.textInput,{ref:"welcomeEmail",key:"welcomeEmail",label:"LINK_PANEL_WELCOME_EMAIL_INPUT",valueLink:this.linkTo("mailTemplate")}),i.createElement(r.textInput,{ref:"color",key:"color",label:"LINK_PANEL_USER_COLOR_INPUT",valueLink:this.linkTo("userColor")}),i.createElement(r.textInput,{ref:"name",key:"name",label:"LINK_PANEL_BUTTON_NAME",valueLink:this.linkTo("loginCompName")})):null)),i.createElement("footer",{},i.createElement(r.button,{label:"LINK_PANEL_CANCEL_BUTTON",ref:"cancelButton",onClick:this.cancel,className:"btn-confirm-secondary"}),i.createElement(r.button,{label:"LINK_PANEL_DONE_BUTTON",ref:"okButton",onClick:this.done,className:"btn-confirm-primary",disabled:this.isOkDisabled()})))}.apply(this,[])}}),define("panels/toolPanels/linkPanel/linkPanel",["react-addons-linked-state-mixin","react","santa-editor-symbols","create-react-class","prop-types","core","lodash","experiment","util","stateManagement","panels/toolPanels/linkPanel/linkPanel.rt","coreBi","constants"],function(e,t,n,a,s,i,p,o,c,r,l,u,d){"use strict";var m="CURRENT_INNER_ROUTE",h=100,g=["DynamicPageLink","PageLink","AnchorLink","ExternalLink","EmailLink","PhoneLink","WhatsAppLink","DocumentLink","PopupLink","AddressLink","EdgeAnchorLinks"];function f(e,t){if("SCROLL_TO_TOP"===e.anchorDataId||"SCROLL_TO_BOTTOM"===e.anchorDataId)return!0;var n=p.has(e.anchorDataId,"id")?"#"+p.get(e.anchorDataId,"id"):e.anchorDataId;return p.some(t,{anchorDataId:n})}function P(e,t){if(e){p.has(e,"id")&&(e=e.id),"#"===e.charAt(0)&&(e=e.substr(1));for(var n=0;n<t.length;n++){var a=t[n];if(e===a.id)return p.assign({},a,{pageId:"#"+e})}}return{pageId:""}}function _(e){return"SCROLL_TO_TOP"===e}function b(e){return"SCROLL_TO_BOTTOM"===e}function E(e,t){var n=p.clone(this.state.link);n[e]=t,this.setState({link:n})}function y(){var e,t,n=this.state.link;if(!n)return!1;switch(n.type){case"DynamicPageLink":var a=this.isCollectionPageOrHasOneRoute();return t=n,a?!p.isEmpty(t.routerId):!p.isEmpty(t.routerId)&&!p.isEmpty(t.innerRoute);case"PageLink":return!!n.pageId;case"AnchorLink":return!!(e=n).pageId&&!!e.anchorDataId;case"ExternalLink":return this.isValidUrl(n&&n.url);case"EmailLink":return this.isValidEmail(n&&n.recipient);case"PhoneLink":return this.isValidPhone(n&&n.phoneNumber);case"WhatsAppLink":return this.isValidInternationalPhone(n&&n.phoneNumber);case"DocumentLink":return n.docId}return!0}function C(e,t){return c.media.isFilePDF(t)&&c.media.isPdfAlreadyMarkedIndexable(e,t)}return a({displayName:"linkPanel",propTypes:{data:s.shape({pages:s.arrayOf(s.shape({id:s.string,title:s.string})),popups:s.arrayOf(s.shape({id:s.string,title:s.string})),anchors:s.arrayOf(s.shape({id:s.string,name:s.string,pageId:s.string})),currentPageId:s.string}),bi:s.shape({selectedComponentType:s.string}),link:s.object,createDefaultData:s.func.isRequired,currentPage:s.string,callback:s.func,onCancelCallback:s.func,visibleSections:s.object,defaultLinkType:s.string,hideLinkTarget:s.bool,initialTabToDisplay:s.oneOf(g),autoFocusAddress:s.bool},mixins:[e,c.translationMixin,i.mixins.editorAPIMixin],render:l,getInitialState:function(){var e=this.getEditorAPI();this.visibleSections=this.getVisibleSectionsMap();var t=p.cloneDeep(this.props.link)||null;C(e,p.get(t,"docId"))&&(t.indexable=!0),t=this.updateLinkIfPageWasConvertedToDynamicPage(t),this.gotPageIdFromInnerRoute=!(t&&"DynamicPageLink"===t.type),t&&"AnchorLink"===t.type&&!f(t,this.props.data.anchors)&&(t=function(e,t){if(e.pageId){var n=p.has(e.pageId,"id")?e.pageId.id:e.pageId.replace("#","");if(p.some(t,{id:n}))return{type:"PageLink",pageId:e.pageId}}return null}(t,this.props.data.pages));var n=this.shouldConvertExternalLinkToAddressLink(t),a=!0;n&&(t={type:"AddressLink",address:t.url});var s=n||t&&"AddressLink"===t.type;t&&"AddressLink"===t.type&&(a=t.address&&0!==t.address.length&&!n);var i,o=void 0;if(t&&"DynamicPageLink"===t.type&&(f(t,this.props.data.anchors)||(t.anchorDataId=null),i=t,e.dsRead.routers.get.byId(i.routerId)||(t=null)),this.pagesList=this.cachePagesList(this.props.data.pages),this.popupList=this.getPopupLinkOptions(),!t){var r=this.getDefaultLink();t=r.link,o=r.page}if(!t||"PageLink"!==t.type&&"AnchorLink"!==t.type)o||(o=this.props.createDefaultData("PageLink"));else{var l=p.isString(t.pageId)?t.pageId:"#"+p.get(t.pageId,"id"),c=l!=="#"+e.dsRead.siteSegments.getSiteStructureId()?l:this.props.data.currentPageId;"PageLink"===t.type&&(t.target=t.target||"_self"),o=P(c,this.props.data.pages)}return this.routers=e.dsRead.routers.get.all(),{selectedTab:this.props.initialTabToDisplay||this.getDefaultSelectedTab(t),link:t,page:o,hasAsyncValidator:s,routerInnerRoutes:null,innerRoutesRangeStartIndex:0,isClosing:!1,isValid:a,pdfIndexable:t.indexable}},shouldConvertExternalLinkToAddressLink:function(e){return e&&"ExternalLink"===e.type&&!this.isSectionVisible("ExternalLink")&&this.isSectionVisible("AddressLink")},updateLinkIfPageWasConvertedToDynamicPage:function(e){if(e&&e.type&&("PageLink"===e.type||"AnchorLink"===e.type)){var t=p.isString(e.pageId)?e.pageId:"#"+p.get(e.pageId,"id"),n=this.getEditorAPI().dsRead.routers.getRouterDataForPageIfExist(t);if(n)return{type:"DynamicPageLink",routerId:n.routerId,innerRoute:"",anchorDataId:e.anchorDataId||""}}return e},componentDidMount:function(){this.state.link&&"DynamicPageLink"===this.state.link.type&&this.getPageFromInnerRoute()},getVisibleSectionsMap:function(){var e=this.getLinkSectionsData();return p.keyBy(e,"for")},getLinkSectionsData:function(){var t=this,n=(0,r.linkPanel.selectors.getOverridden)(this.getEditorAPI().store.getState()),e=[{for:"NoLink",key:"noLinkTabLabel",automationId:"link-panel-no-link",label:"LINK_PANEL_TAB_NONE"},{for:"ExternalLink",key:"externalLinkTabLabel",automationId:"link-panel-external-link",label:"LINK_PANEL_TAB_WEB_ADDRESS"},{for:"PageLink",condition:this.shouldShowPageSection,key:"pageLinkTabLabel",automationId:"link-panel-page-link",label:"LINK_PANEL_TAB_PAGE"},{for:"AnchorLink",key:"anchorLinkTabLabel",automationId:"link-panel-anchor-link",label:"LINK_PANEL_TAB_ANCHOR"},{for:"EdgeAnchorLinks",key:"edgeAnchorLinksLabel",automationId:"link-panel-edge-anchor-link",label:"LINK_PANEL_TAB_TOPandBOTTOM"},{for:"DocumentLink",key:"docLinkTabLabel",automationId:"link-panel-document-link",label:"LINK_PANEL_TAB_DOCUMENT"},{for:"EmailLink",key:"emailLinkTabLabel",automationId:"link-panel-email-link",label:"LINK_PANEL_TAB_EMAIL"},{for:"PhoneLink",key:"phoneLinkTabLabel",automationId:"link-panel-phone-link",label:"LINK_PANEL_TAB_PHONE"},{for:"WhatsAppLink",condition:this.isMobileEditor,key:"whatsAppLinkTabLabel",automationId:"link-panel-whatsapp-link",label:"mobile_quick_actions_set_up_default_WhatsApp_phone"},{for:"AddressLink",experiment:"se_QuickActionBarAddress",condition:this.isMobileEditor,key:"addressLinkTabLabel",automationId:"link-panel-address-link",label:"mobile_quick_actions_set_up_default_Address"},{for:"PopupLink",key:"popupLinkTabLabel",automationId:"link-panel-popup-link",label:"LINK_PANEL_TAB_POP-UP"},{for:"LoginToWixLink",experiment:"wixstaff",key:"homePageLoginTabLabel",automationId:"link-panel-login-to-wix-link",label:"LINK_PANEL_HOME_PAGE_LOGIN"}];return p(e).thru(function(e){return c.overrideUtils.applyOverrides(e,n)}).reject(function(e){return!p.get(t.props.visibleSections,e.for,!0)}).reject(function(e){return e.experiment&&!o.isOpen(e.experiment)}).reject(function(e){return e.condition&&!e.condition()}).value()},getPageFromInnerRoute:function(){var e=this.getEditorAPI();if("CURRENT_INNER_ROUTE"===this.state.link.innerRoute){var t=P(this.props.data.currentPageId,this.props.data.pages);return this.gotPageIdFromInnerRoute=!0,void this.setState({page:t})}e.dsRead.routers.getPageFromInnerRoute(this.state.link.routerId,this.state.link.innerRoute,function(e){if(this.gotPageIdFromInnerRoute=!0,e){var t=P(e,this.props.data.pages);this.setState({page:t})}else{var n=this.getDefaultLink();this.setState({selectedTab:this.getDefaultSelectedTab(n.link),link:n.link,page:n.page})}}.bind(this))},isPagesDropDownReady:function(){return!this.state.link||"DynamicPageLink"!==this.state.link.type||this.state.link&&"DynamicPageLink"===this.state.link.type&&this.gotPageIdFromInnerRoute},getDefaultLink:function(){var e=P(this.pagesList[0].id,this.props.data.pages);if(this.props.defaultLinkType)return{link:this.props.createDefaultData(this.props.defaultLinkType),page:e};if(this.shouldHidePageLinkPossibilty()){var t=this.getDefaultDataForAnchorTab();return t||{link:this.props.createDefaultData("ExternalLink"),page:e}}return{link:this.getDefaultDataForPageLinkTab(this.pagesList[0].id),page:e}},needToGetInnerRoutes:function(e){return e.link&&this.state.link&&("DynamicPageLink"!==this.state.link.type&&"DynamicPageLink"===e.link.type&&!e.routerInnerRoutes||"DynamicPageLink"===this.state.link.type&&"DynamicPageLink"===e.link.type&&(!e.routerInnerRoutes||this.state.link.routerId!==e.link.routerId)||"DynamicPageLink"===this.state.link.type&&"DynamicPageLink"===e.link.type&&(!e.routerInnerRoutes||this.state.page.id!==e.page.id))},componentWillUpdate:function(e,t){this.needToGetInnerRoutes(t)&&this.getRouterInnerRoutes(t)},componentWillReceiveProps:function(e){this.pagesList=this.cachePagesList(e.data.pages),this.popupList=this.getPopupLinkOptions(),this.visibleSections=this.getVisibleSectionsMap()},setIsValidLink:function(){if(!this.state.hasAsyncValidator){var e=!this.state.link||y.call(this);this.state.isValid!==e&&this.setState({isValid:e})}},componentDidUpdate:function(){this.state.isClosing?(y.call(this)?this.saveLink=this.state.link:this.shouldHidePageLinkPossibilty()||(this.saveLink=null),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)):this.setIsValidLink()},componentWillUnmount:function(){p.isUndefined(this.saveLink)||(this.save(this.saveLink),delete this.saveLink)},getDefaultProps:function(){return{title:"Link Panel",panelName:"Link Panel",bi:{selectedComponentType:""}}},getDefaultSelectedTab:function(e){if(this.props.initialTabToDisplay&&p.includes(g,this.props.initialTabToDisplay))return this.props.initialTabToDisplay;var t,n,a=e?e.type:null,s=["PageLink",void 0,null];return(p.includes(s,a)||"DynamicPageLink"===a&&!e.anchorDataId)&&(a="PageLink"),("AnchorLink"===a||"DynamicPageLink"===a&&e.anchorDataId)&&(a="AnchorLink"),e&&(_(e.anchorDataId)||b(e.anchorDataId)?a="EdgeAnchorLinks":"PageLink"===a&&(t=e,n=this.props.data.popups,Boolean(P(t.pageId,n).pageId))&&(a="PopupLink")),this.isSectionVisible(a)||(a="NoLink"),a},shouldShowPrevButton:function(e){if(p.isEmpty(this.state.routerInnerRoutes))return!1;e=e||this.state.innerRoutesRangeStartIndex;var t=this.state.routerInnerRoutes.length<h;return!(0===e)&&!t},shouldShowNextButton:function(){if(p.isEmpty(this.state.routerInnerRoutes))return!1;var e=this.state.routerInnerRoutes.length<h;return!(this.state.innerRoutesRangeStartIndex+h>=this.state.routerInnerRoutes.length)&&!e},getInnerRoutesToRender:function(){return p.slice(this.state.routerInnerRoutes,this.state.innerRoutesRangeStartIndex,this.state.innerRoutesRangeStartIndex+h)},increaseRange:function(){var e=this.state.innerRoutesRangeStartIndex+h,t=this.shouldShowPrevButton(e)?this.state.routerInnerRoutes[e].url:this.state.routerInnerRoutes[e-1].url;this.setState({innerRoutesRangeStartIndex:e,link:{type:"DynamicPageLink",innerRoute:t,routerId:this.state.link.routerId}})},decreaseRange:function(){var e=this.state.innerRoutesRangeStartIndex-h,t=this.state.routerInnerRoutes[e].url;this.setState({innerRoutesRangeStartIndex:e,link:{type:"DynamicPageLink",innerRoute:t,routerId:this.state.link.routerId}})},linkSelectedTab:function(){return{value:this.state.selectedTab,requestChange:function(e){var t={selectedTab:e},n=void 0;if(this.state.selectedTab!==e){if(this.state.routerInnerRoutes&&(t.routerInnerRoutes=null,t.innerRoutesRangeStartIndex=0),"EdgeAnchorLinks"===e){var a=this.getAnchorLink("SCROLL_TO_TOP");a.page&&(t.page=a.page),t.link=a.link}else if("PopupLink"===e)t.link=this.props.createDefaultData("PageLink"),0<this.popupList.length&&(t.link.pageId="#"+this.popupList[0].id);else{if(t.link=this.props.createDefaultData(e),"PageLink"===e){var s=this.getDefaultPageId();t.link=this.getDefaultDataForPageLinkTab(s),t.page=P(s,this.props.data.pages)}"AnchorLink"===e&&(n=this.getDefaultDataForAnchorTab())&&(t.link=n.link,t.page=n.page)}this.setState(t)}}.bind(this)}},getDefaultPageId:function(){if(this.shouldHidePageLinkPossibilty()){var e=this.getEditorAPI().dsRead.routers.pages.getDynamicPagesList();return p.flatMap(e,"pages")[0].id}return this.pagesList[0].id},getDefaultDataForPageLinkTab:function(e){var t=this.getRouterDataForPageIfExist(e);if(t)return{routerId:t.routerId,type:"DynamicPageLink"};var n="PageLink",a=this.getEditorAPI().data.getSchema(n);return{type:n,pageId:e,target:p.get(a,["target","default"])}},getDefaultDataForAnchorTab:function(){var e=this.getPagesWithAnchors();return!e||p.isEmpty(e)?null:{link:this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(e[0].id),page:P(e[0].id,this.props.data.pages)}},getDefaultDataForPageAnchorLinkTab:function(e){var t=void 0,n=this.getAnchorOptions(this.props.data.anchors,e.substring(1));return this.shouldHidePageLinkPossibilty()?0<n.length&&(t={type:"AnchorLink",anchorDataId:n[0].anchorDataId,pageId:e,anchorName:n[0].anchorName}):t={type:"PageLink",pageId:e},t},getDefaultDataForPageAnchorLinkTabWithDynamicPages:function(e){var t=this.getAnchorOptions(this.props.data.anchors,e.substring(1)),n=this.getRouterDataForPageIfExist(e);if(0<t.length)return n?{type:"DynamicPageLink",routerId:n.routerId,anchorDataId:t[0].anchorDataId}:{type:"AnchorLink",pageId:e,anchorDataId:t[0].anchorDataId,anchorName:t[0].anchorName}},linkToAndTrim:function(e){var t=this.state.link;return{value:t?t[e]:"",requestChange:p.flow(p.trim,E.bind(this,e))}},linkTo:function(e){var t=this.state.link;return{value:t?t[e]:"",requestChange:E.bind(this,e)}},isValidUrl:function(e){return!!e&&c.validate.url(e)},isValidAddress:function(e,a,t){var s=this;return this.setState({isValid:!1}),e&&c.validate.validateAddress(e,function(e){var t=e.address,n=s.state.link;n.address=t,s.setState({isValid:!0,link:n}),a()},t)},isValidEmail:function(e){return!!e&&c.validate.email(e)&&c.validate.notEmpty(e)},isValidSubject:function(e){return c.validate.noHTMLTags(e)},isValidPhone:function(e){return c.validate.phone(e)},isValidInternationalPhone:function(e){return c.validate.internationalPhone(e)},updateLinkValue:function(e,t){var n=p.clone(this.state.link);n[e]=t,this.setState({link:n})},validationStatusChanged:function(e,t){var n={isValid:e};if(!e){var a=p.clone(this.state.link);a[t]=void 0,n.link=a}this.setState(n)},linkLoginToWixLinkSendEmailProperty:function(){var t=this.state.link;return{value:t?t.sendMail:"",requestChange:function(e){t.sendMail=e,t.metaData={schemaVersion:"2.0",isPreset:!0,isHidden:!1},this.setState({link:t})}.bind(this)}},save:function(e){var t,n;e&&"ExternalLink"===e.type&&(e.url=(t=e.url,n="http",t&&!/^\s*\w+:\/\//.test(t)?n+"://"+t.trim():t)),this.props.callback&&this.props.callback(e),e&&function(e){var t="";"AnchorLink"===e.type&&(t=p.includes(["SCROLL_TO_BOTTOM","SCROLL_TO_TOP"],e.anchorDataId)?"SCROLL_TO_TOP"===e.anchorDataId?"top":"bottom":"anchor"),this.getEditorAPI().bi.event(u.events.linkPanel.link_panel_done_click,{category:this.state.selectedTab,anchor_where_on_page:t})}.call(this,e)},cancel:function(){this.props.onCancelCallback&&this.props.onCancelCallback(this.props.link),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},done:function(){this.logLinkCreationBI(),this.setState({isClosing:!0})},getPageOptions:function(){return p.map(this.pagesList,p.bind(function(e){return{value:e.id,label:e.title+this.getCurrentPageThisTranslate(e.id)}},this))},linkToPage:function(){return{value:this.state.page.pageId,requestChange:function(e){this.setState({routerInnerRoutes:null,innerRoutesRangeStartIndex:0,link:"PageLink"===this.state.selectedTab?this.getDefaultDataForPageLinkTab(e):this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(e),page:P(e,this.props.data.pages)})}.bind(this)}},getRouterInnerRoutes:function(a){var e=a.link.innerRoute===m?this.props.data.currentPageId:a.page.id;this.getEditorAPI().dsRead.routers.getRouterInnerRoutes(a.link.routerId,e,function(e){var t=p.isEmpty(e)?[]:e[0].url;if(a.link.innerRoute&&(p.find(e,{url:a.link.innerRoute})||a.link.innerRoute===m)&&(t=a.link.innerRoute),p.isEmpty(e))this.setState({routerInnerRoutes:[],innerRoutesRangeStartIndex:0},function(){this.setIsValidLink()}.bind(this));else{var n=p.findIndex(e,["url",t]);n=-1===n?0:n,this.setState({routerInnerRoutes:p.isEmpty(e)?[]:e,innerRoutesRangeStartIndex:function(e){for(var t=0;t+h<=e;)t+=h;return t}(n),link:{type:"DynamicPageLink",routerId:a.link.routerId,anchorDataId:a.link.anchorDataId,innerRoute:t}},function(){this.setIsValidLink()}.bind(this))}}.bind(this))},isCollectionPageOrHasOneRoute:function(){var e=this.state.routerInnerRoutes;return!!e&&1===e.length},linkToInnerRoute:function(){return{value:this.state.link?this.state.link.innerRoute:null,requestChange:function(e){var t={type:"DynamicPageLink",routerId:this.state.link.routerId,innerRoute:e};this.state.link.anchorDataId&&(t.anchorDataId=this.state.link.anchorDataId),this.setState({link:t})}.bind(this)}},hasInnerRoutes:function(){return!!this.state.routerInnerRoutes&&!p.isEmpty(this.state.routerInnerRoutes)},getRouterDataForPageIfExist:function(e){return this.getEditorAPI().dsRead.routers.getRouterDataForPageIfExist(e)},isDynamicPage:function(e){return!!this.getRouterDataForPageIfExist(e)},shouldShowInnerRoutesDropDown:function(){return this.isDynamicPage(this.state.page.id)&&this.hasInnerRoutes()&&!this.isCollectionPageOrHasOneRoute()},getInnerRoutesDropDown:function(){var e=[];return this.state.page.id!==this.props.data.currentPageId||this.shouldHidePageLinkPossibilty()||e.push({url:m,title:c.translate("Platform_Link_Menu_Anchor_Item_Option_Any_Item")}),this.state.routerInnerRoutes&&!p.isEmpty(this.state.routerInnerRoutes)?e.concat(this.getInnerRoutesToRender()):[{value:"NO_INNER_ROUTES",title:c.translate("LINK_PANEL_NO_INNER_ROUTES"),url:"no_inner_routes"}]},getCurrentPageThisTranslate:function(e){return e==="#"+this.props.data.currentPageId?" "+c.translate("LINK_PANEL_PAGE_THIS"):""},getRouterTypeForPageId:function(e){var t=this.getEditorAPI().pages.dynamicPages.getRouterPageType(e);return t?"("+t+")":""},linkToAnchor:function(){return{value:(p.has(this.state.link,"anchorDataId.id")?"#"+this.state.link.anchorDataId.id:p.get(this.state.link,"anchorDataId"))||"SCROLL_TO_TOP",requestChange:function(e){var t=this.getAnchorLink(e),n={link:t.link};t.page&&(n.page=t.page),this.setState(n)}.bind(this)}},getAnchorLink:function(e){var t=this.getEditorAPI(),n={};if("TOP_OF_SELECTED_PAGE"===e){var a=this.state.page.pageId;n={link:this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(a),page:P(a,this.props.data.pages)}}else{var s=this.props.data.anchors,i=void 0;if(this.state.link&&this.state.link.routerId)n={link:{type:"DynamicPageLink",anchorDataId:e,routerId:this.state.link.routerId,innerRoute:this.state.link.innerRoute}};else{var o={type:"AnchorLink",anchorDataId:e,pageId:this.state.page.pageId},r="#"+t.dsRead.siteSegments.getSiteStructureId();if(_(e))o.anchorName=c.translate("LINK_PANEL_PAGE_ANCHOR_SCROLL_TO_TOP_NAME"),o.pageId=r;else if(b(e))o.anchorName=c.translate("LINK_PANEL_PAGE_ANCHOR_SCROLL_TO_BOTTOM_NAME"),o.pageId=r;else for(i=0;i<s.length;i++){var l=s[i];if(l.anchorDataId===e){o.anchorName=l.anchorName;break}}n.link=o}}return n},cachePagesList:function(e){var i=[];return e.forEach(function(e){var t,n,a="#"+e.id;if(t=a,n=this.props.data.pages,!P(t,n).repeaterPage){var s={id:a,title:e.title,level:0};i.push(s)}},this),i},getAnchorOptions:function(e,t){var n=[];return e.forEach(function(e){("#"===e.pageId.charAt(0)?e.pageId.substring(1):e.pageId)===t&&n.push(e)}),n.sort(function(e,t){return e.y-t.y}),n},documentChanged:function(e){var t=e[0],n=t.fileUrl;this.setState({link:{type:"DocumentLink",docId:n,name:t.title},pdfIndexable:C(this.getEditorAPI(),n)})},handleShowPdfIndexing:function(){var e=this.getEditorAPI(),t=this;e.panelManager.openPanel("compPanels.panels.DocumentMedia.confirmationPanel",{onConfirm:function(){c.media.setLinksAsIndexableForDoc(e,t.state.link.docId),t.setState({pdfIndexable:!0,link:p.defaults({indexable:!0},t.state.link)}),e.bi.event(u.events.documentMedia.PDF_INDEXING,{origin:t.constructor.displayName})}},!0)},openMediaGallery:function(e){var n=this,a=this.getEditorAPI().mediaServices,t=a.mediaManager,s=e||t.categories.ICON_DOCUMENT;t.open(s,{callback:function(e,t){n._handleChangeImage(e,t),a.setFocusToEditor()},multiSelect:!1})},getDocId:function(){return p.get(this.state.link,"docId")},isMobileEditor:function(){return this.getEditorAPI().isMobileEditor()},isSectionVisible:function(e){return!p.isUndefined(this.visibleSections[e])},shouldHidePageLinkPossibilty:function(){return this.props.hidePageLinks},hasAnchors:function(e){var t=e||this.state.page.id;return!!t&&(t="#"===t.charAt(0)?t.substring(1):t,0!==this.getAnchorOptions(this.props.data.anchors,t).length)},getPagesWithAnchors:function(){return p.filter(this.pagesList,p.bind(function(e){return this.hasAnchors(e.id)},this))},openLearnMoreOnAnchor:function(){var e={panel_name:this.props.panelName,origin:d.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.getEditorAPI().panelManager.openHelpCenter("4932c49c-7282-48f0-8fa2-42d929981c40",null,e)},openLearnMoreOnAddingInnerRoutes:function(){var e={panel_name:this.props.panelName,origin:d.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.getEditorAPI().panelManager.openHelpCenter("0a1de6d7-3f69-4d30-8ddc-7aa99bd12edc",null,e)},openLearnMoreOnPhoneLink:function(){var e={panel_name:this.props.panelName,origin:d.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.getEditorAPI().panelManager.openHelpCenter("269ee4ca-ac26-40a4-b982-b120e84c75d4",null,e)},openLearnMoreOnWhatsappLink:function(){var e={panel_name:this.props.panelName,origin:d.BI.HELP.ORIGIN.PANEL,learn_more:!0};this.getEditorAPI().panelManager.openHelpCenter("25e5d809-cd6e-4966-9515-92175603e433",null,e)},getPagesListToShow:function(){if(this.shouldHidePageLinkPossibilty()){var e=this.getEditorAPI().dsRead.routers.pages.getDynamicPagesList(),t=p(e).flatMap("pages").map("id").value();return p.filter(this.pagesList,function(e){return p.includes(t,e.id.slice(1))})}return this.pagesList},shouldShowPageSection:function(){if(!this.shouldHidePageLinkPossibilty())return!0;var e=this.getEditorAPI().routers.pages.getDynamicPagesList(),t=p.flatMap(e,"pages");return!p.isEmpty(t)},getDropDownOptions:function(){var t=[],e=this.getAnchorOptions(this.props.data.anchors,this.state.page.id);return 0<e.length&&p.forEach(e,function(e){t.push({value:e.anchorDataId,label:e.anchorName})}),t},getPopupLinkOptions:function(){var e=p.clone(this.props.data.popups),t=this.getEditorAPI(),n=t.dsRead.pages.getFocusedPageId(),a=t.dsRead.pages.popupPages.isPopup(n);return!this.props.showAllPopups&&a&&p.remove(e,{id:n}),e},getAnchorTooltipValue:function(){return{classPath:"baseUI.popoverTemplates.imageAndTextTooltip",props:{image:"linkPanelAnchorTooltip",title:"Anchor_Settings_tooltip_title",text:"Anchor_Settings_tooltip_text",learnMoreText:"mobile_refreshlayout_link",linkAction:this.openLearnMoreOnAnchor,imageContainerStyle:{backgroundColor:"#5fcef5"}}}},isOkDisabled:function(){return!this.state.isValid},getAnchorType:function(e){switch(e){case"SCROLL_TO_TOP":return"page-top";case"SCROLL_TO_BOTTOM":return"page-bottom";default:return"anchor"}},logLinkCreationBI:function(){var e=this.state.link;if(e){var t={site_id:this.getEditorAPI().dsRead.generalInfo.getSiteId(),component_type:p.get(this.props,"bi.selectedComponentType","")};switch(e&&e.type){case"PageLink":p.assign(t,{field_type:"page",data:""});break;case"AnchorLink":p.assign(t,{field_type:this.getAnchorType(e.anchorDataId),data:""});break;case"ExternalLink":p.assign(t,{field_type:"url",data:e.url});break;case"AddressLink":p.assign(t,{field_type:"address",data:e.address});break;case"EmailLink":p.assign(t,{field_type:"mail",data:""});break;case"PhoneLink":p.assign(t,{field_type:"phone",data:e.phoneNumber});break;case"WhatsAppLink":p.assign(t,{field_type:"whatsapp",data:e.phoneNumber});break;case"DocumentLink":p.assign(t,{field_type:"document",data:""});break;default:return}this.getEditorAPI().bi.event(u.events.linkPanel.LINK_PANEL_ADD_CLICK_TO_ACTION,t)}},getEdgeAnchors:function(){return[{value:"SCROLL_TO_TOP",label:"LINK_PANEL_TAB_TOPandBOTTOM_ TOP",illustration:t.createElement(n.symbol,{name:"anchorTop"})},{value:"SCROLL_TO_BOTTOM",label:"LINK_PANEL_TAB_TOPandBOTTOM_ BOTTOM",illustration:t.createElement(n.symbol,{name:"anchorBottom"})}]},isEmptyStringOrFullUrl:function(e){return""===e||c.validate.fullUrl(e)},goToAddPanelPopup:function(){var e=this.getEditorAPI();e.store.dispatch(r.editorPlugins.userPreferences.actions.setSessionUserPreferences("addPanelCategoryIdOnClose","popup")),e.store.dispatch(r.editorPlugins.leftBar.actions.openAddPanel())},getHelpId:function(){return this.getEditorAPI().developerMode.isEnabled()?"049671da-19be-4453-8f1e-a53d949a0110":"650e4ba4-4aa8-4484-957a-cc9db36be6d9"},shouldHideLinkTarget:function(){return this.props.hideLinkTarget},shouldDisplayLinkDescription:function(){return"_self"===p.get(this,"state.link.target")}})}),define("panels/toolPanels/colorPicker/constants",[],function(){"use strict";return{NO_COLOR:"noColor"}}),define("panels/toolPanels/colorPicker/siteCustomColors.rt",["react","lodash","baseUI","panels/toolPanels/colorPicker/constants","util"],function(s,i,o,e,r){"use strict";return function(){return function(){var e,t,n,a=r.valueLink.getValueFromProps(this.props);return s.createElement.apply(this,["div",(e={className:"site-custom-colors"},t=this.filteredProps(),n=i.assign({},e,t),e.hasOwnProperty("style")&&(n.style=i.defaults(n.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(n.className=t.className+" "+e.className),n),this.props.isEditable?s.createElement("label",{key:"addColorButton",ref:"addColorButton",className:"color-option first-color-in-row"},s.createElement("div",{className:"add-color-button",onClick:this.addCustomColor},s.createElement(o.symbol,{name:"add-custom-color-plus"}))):null,i.map(this.getFilteredColors(),function(e,t,n){return s.createElement("label",{className:"color-option",key:"colorOption-"+n,onMouseEnter:function(e,t,n){this.props.onPreview(t)}.bind(this,e,t,n),onMouseLeave:function(e,t,n){this.props.onPreview(e)}.bind(this,e,t,n)},s.createElement("input",{type:"radio",name:this.getRadioGroupId(),value:t,checked:n===this.state.selectedIndex,onChange:function(e,t,n){this.selectColor(t,n)}.bind(this,e,t,n)}),s.createElement("div",{className:i(this.getColorOptionClasses(t)).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),style:{backgroundColor:t}}))}.bind(this,a)),i.isEmpty(this.getFilteredColors())?i.map(i.range(this.NUM_OF_EMPTY_SLOTS),function(e,t,n){return s.createElement("div",{key:"emptyColorOptions",className:"empty-color-option"})}.bind(this,a)):null])}.apply(this,[])}}),define("panels/toolPanels/colorPicker/siteCustomColors",["create-react-class","prop-types","lodash","core","util","baseUI","higherOrderComponents","coreBi","constants","panels/toolPanels/colorPicker/siteCustomColors.rt"],function(e,t,n,a,s,i,o,r,l,c){"use strict";var p=["#000000","#FFFFFF"],u=e({displayName:"siteCustomColors",mixins:[a.mixins.editorAPIMixin,i.radioButtonsMixin],propTypes:{customColors:t.arrayOf(t.string).isRequired,userAddedColors:t.array,isEditable:t.bool,onPreview:t.func,openAddColorPanel:t.func},NUM_OF_EMPTY_SLOTS:36,getInitialState:function(){return{selectedIndex:this.getSelectedColorIndex(s.valueLink.getValueFromProps(this.props),this.props.userAddedColors||[])}},getFilteredColors:function(e){e=e||this.props.userAddedColors;var t=n.difference(this.props.customColors,p,e);return p.concat(e,t)},selectColor:function(e,t){this.getEditorAPI().bi.event(r.events.colorPicker.CUSTOM_COLOR_SELECT,{}),this.setState({selectedIndex:t},s.valueLink.callOnChangeIfExists(this.props,e))},getSelectedColorIndex:function(e,t){return this.getFilteredColors(t||this.props.userAddedColors).indexOf(e)},getColorBrightnessClass:function(e){var t=s.colors.hexToRgb(e),n=s.colors.rgbToHsb(t);return 80<=n.brightness&&n.saturation<50?"bright":"dark"},getColorOptionClasses:function(e){var t={"color-displayer":!0,"white-option":s.colors.getDistanceToWhite(e)<3};return t[this.getColorBrightnessClass(e)+"-color"]=!0,t},componentWillReceiveProps:function(e){var t=s.valueLink.getValueFromProps(this.props),n=s.valueLink.getValueFromProps(e);t!==n&&this.setState({selectedIndex:this.getSelectedColorIndex(n)})},addCustomColor:function(){this.getEditorAPI().bi.event(r.events.colorPicker.ADD_COLOR_BUTTON_CLICKED,{}),this.props.openAddColorPanel()},render:c}),d=[{type:"session",key:l.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED,propName:"userAddedColors",updatePropName:"setUserAddedColors"}];return o.withUserPreferences(d)(u)}),define("panels/toolPanels/colorPicker/colorPickerPanelMainContent.rt",["react","lodash","util","baseUI","baseUILib","panels/toolPanels/colorPicker/siteCustomColors","santa-editor-symbols"],function(n,a,e,t,s,i,o){"use strict";return function(){return n.createElement("div",{className:"main-content"},n.createElement("div",{className:"panel-section color-picker-header",onMouseDown:this.startContentDrag},n.createElement("div",{className:"color-picker-header-content"},n.createElement("span",{key:"color-picker-title"},"\n                    ",e.translate("ColorPicker_MainPanel_Header"),"\n                ")),n.createElement("span",{className:"close-panel-button",onClick:this.close},n.createElement(o.symbol,{name:"headerCloseButton"}))),this.state.content===this.Content.CHOOSE_COLOR?n.createElement("div",{key:"color-picker-content-color",className:"choose-color-content"},n.createElement("div",{className:"panel-section site-colors-section"},n.createElement("div",{className:"section-left"},e.translate("ColorPicker_MainPanel_SitePalette")),n.createElement("div",{className:"section-gap"}),this.isPaletteChangeAllowed()?n.createElement("div",{key:"color-picker-edit-palette-button",className:"section-right"},n.createElement("a",{onClick:this.switchContent.bind(this,this.Content.CHANGE_PALETTE)},"\n                    ",e.translate("ColorPicker_MainPanel_ChangeSiteColors"),"\n                ")):null),n.createElement(t.paletteDisplayer,{palette:this.getPaletteColors(),isSelectable:!0,onPreview:this.previewColor,valueLink:{value:this.getColorInHex(this.state.selectedColor),requestChange:this.selectColor}}),n.createElement("div",{className:"panel-section custom-colors-title-section"},"\n            ",e.translate("ColorPicker_MainPanel_MoreColors"),"\n        "),n.createElement(s.CustomScroll,{},n.createElement(i,{className:"custom-colors-section",customColors:this.siteCustomColors,isEditable:!0,onPreview:this.previewColor,paletteColors:this.state.paletteColors,openAddColorPanel:this.openAddColorPanel,valueLink:{value:this.getColorInHex(this.state.selectedColor),requestChange:this.selectColor}})),n.createElement("div",{className:"panel-section footer"},n.createElement("div",{className:"section-left"},n.createElement("span",{},"+"),n.createElement("a",{onClick:this.addColorLinkClicked},"\n                    ",e.translate("ColorPicker_MainPanel_AddColor"),"\n                ")),n.createElement("div",{className:"section-right"},"\n                ",this.isThemeColor(this.state.colorToPreview)?this.getPaletteColors()[this.state.colorToPreview]:this.state.colorToPreview,"\n            "))):null,this.state.content===this.Content.CHANGE_PALETTE?n.createElement("div",{key:"color-picker-content-palettes",className:"content-change-palette"},n.createElement("div",{className:"panel-section change-palette-section"},e.translate("ColorPicker_ChangeEditPalette_Title"),"\n        "),n.createElement(t.paletteDisplayer,{palette:this.getPaletteColors(),isSelectable:!0,valueLink:{value:null,requestChange:this.openChangePaletteColor}}),n.createElement.apply(this,["div",{className:"root-colors-wrapper"},a.map(this.getRootColors(),function(e,t){return n.createElement("div",{className:a(this.getRootColorBoxClasses(e)).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),key:"rootColor-"+t},n.createElement("div",{className:"root-color-arrow",style:{borderBottomColor:e}}),n.createElement("div",{className:"root-color-circle",style:{backgroundColor:e},onClick:function(e,t){this.openChooseRootColorPanel(e,t)}.bind(this,e,t)},n.createElement(o.symbol,{name:"recycle"+this.getColorBrightness(e)})))}.bind(this))]),n.createElement("div",{className:"help-text"},n.createElement("span",{},e.translate("ColorPicker_ChangeEditPalette_HelpText")),n.createElement("a",{onClick:function(){this.openHelpCenter(this.EDIT_PALETTE_LEARN_MORE_HELP_ID)}.bind(this)},e.translate("ColorPicker_ChangeEditPalette_LearnMore"))),n.createElement("div",{className:"footer"},n.createElement(t.button,{className:"cancel-button btn-md btn-confirm-secondary",label:"ColorPicker_ChangeEditPalette_CancelButton",onClick:this.handleCancelEditingPaletteClicked}),n.createElement(t.button,{className:"confirm-button btn-md",label:"ColorPicker_ChangeEditPalette_DoneButton",onClick:this.handleDoneEditingPaletteClicked}))):null)}}),define("panels/toolPanels/colorPicker/colorPickerPanelSecondaryContent.rt",["react","lodash","util","baseUI","baseUILib"],function(e,t,n,a,s){"use strict";return function(){return this.state.content===this.Content.CHANGE_PALETTE?e.createElement("div",{className:"secondary-content palette-list-section",key:"colorPickerPaletteListSection"},e.createElement("div",{className:"palette-list-title"},n.translate("ColorPicker_ChangeEditPalette_PalettesStrip")),e.createElement("div",{className:"palette-list-comp-wrapper"},e.createElement(s.CustomScroll,{heightRelativeToParent:"100%"},e.createElement(a.palettesList,{palettes:this.getPaletteList(),valueLink:{value:this.state.selectedPalette,requestChange:this.setSelectedPalette},onPreview:this.handlePaletteListPreview,className:"change-palette-palette-list"})))):null}}),define("panels/toolPanels/colorPicker/colorPickerPanel",["create-react-class","react","prop-types","lodash","core","coreBi","util","santa-editor-utils","stateManagement","higherOrderComponents","panels/frames/toolPanelFrame","panels/toolPanels/colorPicker/constants","panels/toolPanels/colorPicker/colorPickerPanelMainContent.rt","panels/toolPanels/colorPicker/colorPickerPanelSecondaryContent.rt","constants","experiment"],function(e,n,t,i,a,s,o,r,l,c,p,u,d,m,h,g){"use strict";var f=r.hoc.measuring,P=l.editorPlugins.panels.actions,_=P.updatePanelAction,b=P.updateOrOpenPanel,E=P.openHelpCenter,y=l.editorPlugins.stylableEditor.actions,C={color_13:["color_11","color_12","color_13","color_14","color_15"],color_18:["color_16","color_17","color_18","color_19","color_20"],color_23:["color_21","color_22","color_23","color_24","color_25"],color_28:["color_26","color_27","color_28","color_29","color_30"],color_33:["color_31","color_32","color_33","color_34","color_35"]},v=l.domMeasurements.selectors.getStageLayout;function I(e){return e?(0===e.indexOf("{color")&&(e=e.replace("{","").replace("}","")),"transparent"===e?u.NO_COLOR:0!==e.indexOf("#")&&0!==e.indexOf("color")&&e!==u.NO_COLOR?0===e.indexOf("r")?e:"rgba("+e+")":e):null}function S(e){return{top:e.top-window.pageYOffset+15+"px",left:e.left-window.pageXOffset+204+"px"}}var T=e({displayName:"colorPickerPanel",propTypes:{customInstanceColors:t.array,displayNoColor:t.bool,panelName:t.string,customCompsAddedColors:t.array,setCustomCompsAddedColors:t.func,customUserAddedColors:t.array,setCustomUserAddedColors:t.func,previewOnHover:t.bool,enableHistory:t.bool,palettePresets:t.array,updateSitePalette:t.func,top:t.oneOfType([t.string,t.number]),left:t.oneOfType([t.string,t.number]),isBlockingLayerFullScreen:t.bool,shouldBlockOuterScroll:t.bool,openHelpCenter:t.func.isRequired,updatePanelProps:t.func.isRequired,openPanel:t.func.isRequired,stylableEditorSetUserColors:t.func.isRequired,onClose:t.func,value:t.any,onChange:t.func,valueLink:o.valueLink.valueLinkPropType,reportMeasurements:t.func.isRequired,measurements:t.object.isRequired},mixins:[a.mixins.editorAPIMixin],getDefaultProps:function(){return{previewOnHover:!0}},getInitialState:function(){var e=this.getColorInHex(this.getColorFromProps()),t={selectedColor:e,colorToPreview:e,selectedPalette:this.getEditorAPI().theme.colors.getAll(),content:this.Content.CHOOSE_COLOR};return this.initialPalette=t.selectedPalette,this.siteCustomColors=this.getCustomColorsInOrderAndSaveOrder(),t},componentDidMount:function(){this.mounted=!0},componentWillReceiveProps:function(){this.setState({paletteColors:this.getEditorAPI().theme.colors.getAll()})},componentDidUpdate:function(e){if(this.state.content===this.Content.CHANGE_PALETTE&&this.props.top!==e.top||this.props.left!==e.left){var t=S(this.getContentElementOffset());this.props.updatePanelProps("panels.toolPanels.colorPicker.addColorPanel",{top:t.top,left:t.left})}},componentWillUnmount:function(){this.mounted=!1,this.props.onClose&&this.props.onClose(),this.resetPaletteIfPanelClosedWithoutPaletteConfirmation(),this.resetPreviewColor()},Content:{CHOOSE_COLOR:"CHOOSE_COLOR",CHANGE_PALETTE:"CHANGE_PALETTE"},getFrameContentStyle:function(){var e=i.pick(this.props,["top","left"]);return this.state.content===this.Content.CHANGE_PALETTE?i.defaults(this.adjustPanelPosition(),e):e},getPaletteColors:function(){var e=this.state.paletteColors;return i.omit(e,"paletteName","paletteTags")},getColorFromProps:function(){return I(o.valueLink.getValueFromProps(this.props))},getContentElementOffset:function(){return this.props.measurements.contentOffset||{}},getCustomColorsInOrderAndSaveOrder:function(){var e=this.props.customCompsAddedColors||[],t=this.props.customUserAddedColors||[],n=void 0;if(e){var a=i.intersection(e,t),s=i.difference(t,e);n=a.concat(s)}else n=t;return this.props.setCustomCompsAddedColors(n),n.concat(i.difference(this.props.customInstanceColors,n))},getColorBrightness:function(e){var t=o.colors.hexToRgb(e),n=o.colors.rgbToHsb(t);return 80<=n.brightness&&n.saturation<50?"Dark":"Bright"},isThemeColor:function(e){return i.includes(e,"color_")},isPaletteChangeAllowed:function(){return this.props.palettePresets&&!this.getEditorAPI().isMobileEditor()},getColorInHex:function(e){var t=o.colors.rgbToHex;return e=I(e),i.includes(e,"rgba")?t(o.colors.rgbaStringToObject(e)):i.includes(e,"rgb")?t(o.colors.rgbStringToObject(e)):e},getColorInOriginalFormat:function(e){var t=this.getColorFromProps();t=I(t);var n=o.colors.hexToRgb;if(e===u.NO_COLOR)return e;var a=this.isThemeColor(e)?this.getPaletteColors()[e]:e;if(i.includes(t,"rgba")){var s=n(a);return s.alpha=o.colors.rgbaStringToObject(t).alpha,o.colors.rgbaObjectToString(s)}return i.includes(t,"rgb")?o.colors.rgbObjectToString(n(a)):e},areColorsEqual:function(e,t){return i.includes(e,"color")&&i.includes(t,"color")?e===t:this.getColorInHex(e)===this.getColorInHex(t)},EDIT_PALETTE_LEARN_MORE_HELP_ID:"7b56b01e-1104-485d-8bcc-9690f8c9592a",getRootColors:function(){return i.pick(this.getPaletteColors(),i.keys(C))},getRootColorBoxClasses:function(e){return{"root-color-box":!0,"white-color":o.colors.getDistanceToWhite(e)<3}},getPaletteList:function(){return i.map(this.props.palettePresets,function(e){return i.omit(e,"paletteName","paletteTags")})},openChangePaletteColor:function(n){var a=this,e=S(this.getContentElementOffset()),t={valueLink:{value:this.getPaletteColors()[n],requestChange:function(e){var t=i.clone(a.state.selectedPalette);t[n]=e,a.setSelectedPalette(t)}},siteCustomColors:this.siteCustomColors,paletteColors:this.state.paletteColors,top:e.top,left:e.left,onPreview:function(e){var t=i.clone(a.state.selectedPalette);t[n]=e,a.setPaletteToDocument(t)},onCancel:this.setPaletteToDocument.bind(this,i.clone(this.state.selectedPalette))};this.props.openPanel("panels.toolPanels.colorPicker.addColorPanel",t,!0)},selectColor:function(e,t){if(e!==this.state.selectedColor){var n=this;this.setState({selectedColor:e},function(){n.handleChange(e),n.addColorHistoryEntryIfNeeded()})}else t&&this.close()},previewColor:function(e){g.isOpen("colorPickerChangeColorOnClickExp")||(this.mounted&&this.setState({colorToPreview:e}),this.props.previewOnHover&&this.handleChange(e,!0))},handleChange:function(e,t){o.valueLink.callOnChangeIfExists(this.props,this.getColorInOriginalFormat(e),t)},setSelectedPalette:function(e){this.mounted?this.setState({selectedPalette:e},this.setPaletteToDocument.bind(this,e)):this.setPaletteToDocument(e)},setPaletteToDocument:function(e){this.props.updateSitePalette(e)},computeNewPaletteFromRootColor:function(e,t){var n=this.getPaletteColors(),a=o.colors.createGradientColorsFromRoot(t,n,C[e]);return i.assign(n,a)},setSelectedPaletteFromRootColor:function(e,t){var n=this.computeNewPaletteFromRootColor(e,t);this.mounted?this.setState({selectedPalette:n},this.setPaletteToDocument.bind(this,n)):this.setPaletteToDocument(n)},setPaletteToDocumentFromRootColor:function(e,t){var n=this.computeNewPaletteFromRootColor(e,t);this.setPaletteToDocument(n)},addCustomColor:function(e){var t=i.cloneDeep(this.props.customUserAddedColors)||[];t.unshift(e),this.props.setCustomUserAddedColors(t),g.isOpen("se_stylablePanel")&&this.props.stylableEditorSetUserColors(),this.selectColor(e)},openAddColorPanel:function(){var e,t={top:(e=this.getContentElementOffset()).top-window.pageYOffset+115+"px",left:e.left+window.pageXOffset+48+"px"};this.props.openPanel("panels.toolPanels.colorPicker.addColorPanel",{valueLink:{value:this.state.selectedColor,requestChange:this.addCustomColor},paletteColors:this.state.paletteColors,onPreview:i.debounce(this.previewColor,100),top:t.top,left:t.left,onCancel:this.previewColor.bind(this,this.state.selectedColor)},!0)},addColorLinkClicked:function(){this.getEditorAPI().bi.event(s.events.colorPicker.ADD_COLOR_LINK_CLICKED,{}),this.openAddColorPanel()},openChooseRootColorPanel:function(e,t){var n=S(this.getContentElementOffset());this.props.openPanel("panels.toolPanels.colorPicker.addColorPanel",{valueLink:{value:e,requestChange:this.setSelectedPaletteFromRootColor.bind(this,t)},siteCustomColors:this.siteCustomColors,paletteColors:this.state.paletteColors,top:n.top,left:n.left,onPreview:i.debounce(this.setPaletteToDocumentFromRootColor.bind(this,t),100),onCancel:this.setPaletteToDocument.bind(this,i.clone(this.state.selectedPalette))},!0)},handlePaletteListPreview:function(e){g.isOpen("colorPickerChangePaletteOnClickExp")||this.setPaletteToDocument(e)},handleDoneEditingPaletteClicked:function(){this.addPaletteHistoryEntryIfNeeded(),this.initialPalette=this.state.selectedPalette,this.setPaletteToDocument(this.state.selectedPalette),this.close()},handleCancelEditingPaletteClicked:function(){this.setSelectedPalette(this.initialPalette),this.setSelectedPalette(this.initialPalette),this.switchContent(this.Content.CHOOSE_COLOR)},handleBackEditingPaletteClicked:function(){this.setSelectedPalette(this.initialPalette),this.switchContent(this.Content.CHOOSE_COLOR)},arePalettesEqual:function(e,t){var n=i.intersection(i.keys(e),i.keys(t));return i.isEqual(i.pick(e,n),i.pick(t,n))},addPaletteHistoryEntryIfNeeded:function(){this.props.enableHistory&&(this.arePalettesEqual(this.state.selectedPalette,this.initialPalette)||this.getEditorAPI().history.add("palette colors updated"))},addColorHistoryEntryIfNeeded:function(){this.props.enableHistory&&(this.areColorsEqual(this.state.selectedColor,this.getColorFromProps())||this.getEditorAPI().history.add("new color chosen - "+this.state.selectedColor))},switchContent:function(e){e===this.Content.CHANGE_PALETTE&&this.getEditorAPI().bi.event(s.events.colorPicker.CHANGE_SITE_COLORS_LINK_CLICKED,{}),this.setState({content:e})},resetPaletteIfPanelClosedWithoutPaletteConfirmation:function(){this.state.content===this.Content.CHANGE_PALETTE&&this.setPaletteToDocument(this.initialPalette)},resetPreviewColor:function(){this.state.colorToPreview!==this.state.selectedColor&&this.previewColor(this.state.selectedColor)},adjustPanelPosition:function(){var e=this.getContentElementOffset(),t=v(this.getEditorAPI().store.getState()),n=t.right-424,a=this.props.measurements.contentHeight||0,s=window.pageYOffset+(t.bottom-a);return{top:Math.min(e.top,s),left:Math.min(e.left,n)}},close:function(){this.state.content===this.Content.CHOOSE_COLOR?this.getEditorAPI().bi.event(s.events.colorPicker.MAIN_PANEL_CLOSED,{}):this.state.content===this.Content.CHANGE_PALETTE&&this.getEditorAPI().bi.event(s.events.colorPicker.CHANGE_SITE_COLOR_CLOSED,{}),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},openHelpCenter:function(e){var t={component:this.getEditorAPI().selection.getSelectedComponentType(),learn_more:!0,origin:h.BI.HELP.ORIGIN.PANEL,panel_name:this.props.panelName};this.props.openHelpCenter(e,null,t)},render:function(){var t=this;return n.createElement(p,{panelName:this.props.panelName,isSingleInstance:!0,contentWrapperClass:"color-picker-panel",isBlockingLayerFullScreen:this.props.isBlockingLayerFullScreen,shouldBlockOuterScroll:this.props.shouldBlockOuterScroll,contentStyle:this.getFrameContentStyle(),contentClass:"color-picker-panel-content-wrapper",measurements:this.props.measurements,reportMeasurements:this.props.reportMeasurements,selectedColor:this.state.selectedColor,renderContent:function(e){return t.startContentDrag=e,[d.call(t),m.call(t)]}})}}),N=[{type:"session",key:h.USER_PREFS.THEME.COLORS.CUSTOM.COMPS_ADDED,propName:"customCompsAddedColors",updatePropName:"setCustomCompsAddedColors"},{type:"session",key:h.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED,propName:"customUserAddedColors",updatePropName:"setCustomUserAddedColors"}],A=i.flowRight(l.bi.hoc.reportBiEventOnUiChange,c.withUserPreferences(N),o.hoc.connect(o.hoc.STORES.STATE_ONLY,i.constant({}),function(a){return{openHelpCenter:function(e,t,n){a(E(e,t,n))},openPanel:function(e,t,n){a(b(e,t,n))},updatePanelProps:function(e,t){a(_(e,t))},stylableEditorSetUserColors:function(){a(y.setUserColors())}}},void 0,!1),f)(T);return A.pure=T,A}),define("panels/toolPanels/colorPicker/addColorContent.rt",["react","lodash","util","baseUI","baseUILib","panels/toolPanels/colorPicker/siteCustomColors"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement("div",{className:"add-color-content"},e.createElement("div",{},e.createElement(a.colorSpace,{value:this.state.selectedColor,onChange:this.onHsbColorChanged})),e.createElement("div",{className:"color-indicator"},e.createElement("span",{className:"color-sample initial-color",onMouseDown:this.resetToInitialColor,style:{backgroundColor:this.resolveColor(this.initialColor)}}),e.createElement("span",{className:"color-sample current-color",style:{backgroundColor:n.colors.hsbToHex(this.state.selectedColor)}})),e.createElement("div",{className:"color-format"},e.createElement(a.colorFormat,{value:this.state.selectedColor,onChange:this.onHsbColorChanged,onChangeInValidationStatus:this.onChangeInValidationStatus})),this.props.siteCustomColors?e.createElement("div",{key:"addColorCustomColorsSeperator",className:"custom-colors-separator"}):null,this.props.siteCustomColors?e.createElement("div",{key:"customColorsSectionTitle",className:"custom-colors-section-title"},"\n        ",n.translate("ColorPicker_MainPanel_MoreColors"),"\n    "):null,e.createElement(s.CustomScroll,{},this.props.siteCustomColors?e.createElement("div",{key:"customColorsSection",className:"custom-colors-section"},e.createElement(i,{className:"custom-colors",onPreview:this.previewColor,customColors:this.props.siteCustomColors,paletteColors:this.props.paletteColors,value:n.colors.hsbToHex(this.state.selectedColor),onChange:this.onCustomColorSelected})):null),e.createElement("div",{className:"footer"},e.createElement(a.button,{className:"cancel-button btn-md btn-confirm-secondary",label:"ColorPicker_ColorSpace_CancelButton",onClick:this.handleCancel}),e.createElement(a.button,{className:"confirm-button btn-md",label:"ColorPicker_ColorSpace_AddButton",onClick:this.callOnChangeAndClose,disabled:!this.state.isValid})))}}),define("panels/toolPanels/colorPicker/addColorContent",["create-react-class","prop-types","lodash","util","panels/toolPanels/colorPicker/constants","panels/toolPanels/colorPicker/addColorContent.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"addColorContent",propTypes:{valueLink:t.shape({value:t.string,requestChange:t.func}).isRequired,paletteColors:t.object.isRequired,closeHandler:t.func.isRequired,onPreview:t.func.isRequired,onCancel:t.func.isRequired,siteCustomColors:t.arrayOf(t.string)},getInitialState:function(){this.initialColor=a.valueLink.getValueFromProps(this.props);var e=this.resolveColor(this.initialColor);return{selectedColor:a.colors.hexToHsbExact(e),isValid:!0}},resolveColor:function(e){return n.includes(e,"color")?this.props.paletteColors[e]:e&&e!==s.NO_COLOR?e:"#ffffff"},onHsbColorChanged:function(t){this.setState({selectedColor:t},function(){var e=a.colors.hsbToHex(t);this.props.onPreview(e)})},onCustomColorSelected:function(e){this.setState({selectedColor:a.colors.hexToHsbExact(e)},function(){this.props.onPreview(e)})},resetToInitialColor:function(){var e=this.resolveColor(this.initialColor);this.setState({selectedColor:a.colors.hexToHsbExact(e)},function(){this.props.onPreview(this.initialColor)})},previewColor:function(e){this.props.onPreview(e)},componentDidMount:function(){this.mounted=!0},componentWillUnmount:function(){this.mounted=!1,this.wasConfirmClicked||this.props.onCancel()},callOnChangeAndClose:function(){a.valueLink.callOnChangeIfExists(this.props,a.colors.hsbToHex(this.state.selectedColor)),this.wasConfirmClicked=!0,this.close()},onChangeInValidationStatus:function(e){this.mounted&&this.setState({isValid:e})},handleCancel:function(){this.props.onCancel(),this.close()},close:function(){this.props.closeHandler()},render:i})}),define("panels/toolPanels/colorPicker/addColorPanel.rt",["react","lodash","panels/frames/toolPanelFrame","util","panels/toolPanels/colorPicker/addColorContent"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{ref:"frame",contentWrapperClass:"custom-color-picker-panel",panelName:this.props.panelName,title:this.props.title,contentStyle:t.pick(this.props,["top","left"])},e.createElement(s,{siteCustomColors:this.props.siteCustomColors,paletteColors:this.props.paletteColors,valueLink:this.props.valueLink,onPreview:this.props.onPreview,onCancel:this.props.onCancel,closeHandler:this.close}))}}),define("panels/toolPanels/colorPicker/addColorPanel",["create-react-class","prop-types","lodash","core","coreBi","panels/toolPanels/colorPicker/addColorPanel.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"addColorPanel",mixins:[a.mixins.editorAPIMixin],propTypes:{valueLink:t.shape({value:t.string,requestChange:t.func}).isRequired,paletteColors:t.object.isRequired,top:t.string,left:t.string,onPreview:t.func.isRequired,onCancel:t.func.isRequired,siteCustomColors:t.arrayOf(t.string)},close:function(){this.getEditorAPI().bi.event(s.events.colorPicker.ADD_COLOR_PANEL_CLOSED,{}),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render:i})}),define("panels/toolPanels/colorPicker/colorPicker",["panels/toolPanels/colorPicker/colorPickerPanel","panels/toolPanels/colorPicker/addColorPanel","panels/toolPanels/colorPicker/addColorContent"],function(e,t,n){"use strict";return{colorPickerPanel:e,addColorPanel:t,addColorContent:n}}),define("panels/toolPanels/iconPicker/iconPickerPanel.rt",["react","lodash","util","baseUILib","santa-editor-symbols"],function(a,e,t,n,s){"use strict";return function(){return a.createElement("div",{className:"main-content"},a.createElement("div",{className:"panel-section icon-picker-header",onMouseDown:this.startContentDrag},a.createElement("div",{className:"icon-picker-header-content"},a.createElement("div",{className:"icon-picker-title",key:"icon-picker-title"},"\n                ",t.translate("mobile_quick_actions_choose_icon_title"),"\n            "),a.createElement("div",{className:"icon-picker-panel-close-button",onClick:this.close},a.createElement(s.symbol,{name:"headerCloseButton"})))),a.createElement(n.Divider,{long:!0}),a.createElement(n.CustomScroll,{},a.createElement.apply(this,["section",{className:"panel-section icon-picker-body"},e.map(this.props.options,function(e,t,n){return function(e,t){var n=this.props.getCurrentIcon();return a.createElement(s.symbol,{className:"icon-picker-selection"+(n===e.value?" icon-current":""),onClick:function(e,t,n){this.props.onChange(e.value)}.bind(this,e,t,n),key:"icon"+e.value,ref:"icon"+e.value,name:e.symbolName})}.apply(this,[e,t])}.bind(this))])),a.createElement(n.Divider,{long:!0}),a.createElement(n.Composites.ButtonMedium,{},a.createElement(n.Button,{className:"btn-md",onClick:this.close},a.createElement("span",{},t.translate("mobile_quick_actions_choose_icon_done_button_label")))))}}),define("panels/toolPanels/iconPicker/iconPickerPanel",["lodash","react","create-react-class","prop-types","util","stateManagement","panels/frames/toolPanelFrame","panels/toolPanels/iconPicker/iconPickerPanel.rt"],function(e,n,t,a,s,i,o,r){"use strict";var l=t({displayName:"iconPickerPanel",propTypes:{top:a.number.isRequired,left:a.number.isRequired,panelName:a.string.isRequired,getCurrentIcon:a.func.isRequired,options:a.array.isRequired,onChange:a.func.isRequired,closePanelByName:a.func.isRequired},close:function(){this.props.closePanelByName(this.props.panelName)},render:function(){var t=this;return n.createElement(o,{panelName:"iconPickerPanel",isSingleInstance:!0,contentWrapperClass:"icon",isBlockingLayerFullScreen:!1,shouldBlockOuterScroll:!1,contentStyle:e.pick(this.props,["top","left"]),contentClass:"icon-picker-panel-content-wrapper",renderContent:function(e){return t.startContentDrag=e,r.call(t)}})}});return s.hoc.connect([],e.noop,function(t){return{closePanelByName:function(e){t(i.editorPlugins.panels.actions.closePanelByNameAction(e))}}})(l)}),define("panels/toolPanels/languageSupport/languageSupport.rt",["react","lodash","panels/frames/toolPanelFrame","baseUI","baseUILib","constants"],function(n,a,e,s,i,o){"use strict";return function(){return n.createElement.apply(this,[e,{panelName:this.props.panelName,headerTitle:this.translateIfNeeded("add_languages_header_label"),isSingleInstance:!0,helpId:"147f770b-8d82-48b9-aea8-2f07d94c0743",ref:"frame",contentWrapperClass:"language-support-panel",contentStyle:a.pick(this.props,["top","left"]),contentClass:"language-support-panel-content-wrapper"},n.createElement("div",{className:"label"},this.translateIfNeeded("add_languages_text")),a.map(this.state.charsItems,function(e,t){return n.createElement("div",{className:a({"language-option":!0,disabled:e.disabled}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),key:e.label},n.createElement(s.tooltip,{value:e.tooltip,disabled:!e.tooltip,styleType:o.UI.TOOLTIP.STYLE_TYPE.SMALL},n.createElement(i.Checkbox,{label:e.label,disabled:e.disabled,value:e.value,onChange:function(e,t,n){this.update(t,n)}.bind(this,e,t),labelAfterSymbol:!0})),e.disabled?null:n.createElement("span",{className:"example-img",key:"example-img"},n.createElement("span",{style:e.style})))}.bind(this)),n.createElement("footer",{},n.createElement("div",{className:"copy-right-text"},n.createElement("span",{},this.translateIfNeeded("add_languages_copyright_text"),n.createElement("a",{className:"copy-right-link",onClick:this.openCopyright},this.translateIfNeeded("add_languages_copyright_text_link")))),n.createElement(s.button,{label:"add_languages_save_button",onClick:this.setLanguages,className:"btn-confirm-primary"}))])}}),define("panels/toolPanels/languageSupport/languageSupport",["create-react-class","lodash","core","util","stateManagement","coreBi","panels/toolPanels/languageSupport/languageSupport.rt"],function(e,i,t,n,a,s,o){"use strict";var r=[{characterSet:"latin",position:"0px 0px",label:"add_languages_english",tooltip:"add_languages_english_tooltip",disabled:!0},{characterSet:"latin-ext",position:"-15px -46px",label:"add_languages_eastern_european",tooltip:"add_languages_eastern_european_tooltip"},{characterSet:"cyrillic",position:"-15px -19px",label:"add_languages_cyrillic",tooltip:"add_languages_cyrillic_tooltip"},{characterSet:"japanese",position:"-15px -123px",label:"add_languages_japanese"},{characterSet:"korean",position:"-15px -96px",label:"add_languages_korean"},{characterSet:"arabic",position:"-15px -150px",label:"add_languages_arabic"},{characterSet:"hebrew",position:"-15px -70px",label:"add_languages_hebrew"}],l=e({displayName:"languageSupport",mixins:[n.translationMixin,t.mixins.editorAPIMixin],render:o,getBackground:function(){return"url("+n.media.getMediaUrl("textEditor/langs.v1.png")+")"},getInitialState:function(){return{charsItems:this.getCharacterSetsArray()}},setLanguages:function(){this.getEditorAPI().bi.event(s.events.textControls.text_languages_support_dialog_save_click);var t=[];i.forEach(this.state.charsItems,function(e){e.value&&t.push(e.characterSet)}),this.getEditorAPI().dsActions.theme.fonts.updateCharacterSet(t),this.close()},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},update:function(e,t){var n=i.clone(this.state.charsItems),a=i.clone(n[e]);a.value=t,n[e]=a,this.setState({charsItems:n})},getCharactersSets:function(){return this.getEditorAPI().dsRead.theme.fonts.getCharacterSet()},openHelpPanelFrame:function(){this.getEditorAPI().bi.event(s.events.textControls.text_languages_support_learn_more_click),this.getEditorAPI().panelManager.openHelpCenter("147f770b-8d82-48b9-aea8-2f07d94c0743",{},{panel_name:"languageSupport",origin:"languageSupport"})},getCharacterSetsArray:function(){var e=r,n=[],a=this.getCharactersSets(),s=this.getBackground();return i.forEach(e,function(e){var t={label:e.label,characterSet:e.characterSet,tooltip:e.tooltip,value:i.includes(a,e.characterSet),disabled:e.disabled,style:{backgroundImage:s,backgroundPosition:e.position,height:"18px",width:"72px",display:"inline-block"}};n.push(t)}),n},openCopyright:function(){var e=n.translate("add_languages_copyright_link");window&&window.open(e,"_blank")}}),c=a.bi.hoc.reportBiEventOnUiChange(l);return c.pure=l,c}),define("panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel.rt",["react","lodash","panels/frames/toolPanelFrame","baseUI","baseUILib","util"],function(n,e,t,a,s,i){"use strict";return function(){return n.createElement(t,{ref:"frame",headerTitle:i.translate("mobile_action_bar_social_title"),panelName:this.props.panelName,isSingleInstance:!0,contentWrapperClass:"actionbar-sub-panel",isBlockingLayerFullScreen:this.props.isBlockingLayerFullScreen,shouldBlockOuterScroll:this.props.shouldBlockOuterScroll,contentStyle:e.pick(this.props,["top","left"]),contentClass:"actionbar-sub-panel-content-wrapper"},n.createElement(s.CustomScroll,{ref:"customScroll",heightRelativeToParent:"100%",addScrolledClass:!0},n.createElement.apply(this,["ul",{},e.map(this.getSocialLinks(),function(e,t){return n.createElement("li",{key:e.id,className:"social-link-item"},n.createElement(a.tooltip,{value:this.getSocialLinkTooltip(e.id)},n.createElement("span",{},n.createElement(a.symbol,{className:e.symbol+" symbol",name:e.symbol}))),n.createElement(a.textInput,{validator:this.validateUrlWithEmptyState,invalidMessage:"mobile_action_bar_social_error_message",placeholder:this.getSocialLinkPlaceholder(e.id),valueLink:this.getValueLink(e.id)}))}.bind(this))])))}}),define("panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel",["create-react-class","lodash","core","util","panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel.rt"],function(e,o,t,n,a){"use strict";return e({displayName:"mobileActionBarSubPanel",mixins:[t.mixins.editorAPIMixin],render:a,getSocialLinks:function(){return[{id:"blogger",symbol:"mba_social_panel_google_blogger"},{id:"facebook",symbol:"mba_social_panel_facebook"},{id:"flickr",symbol:"mba_social_panel_youtube_flickr"},{id:"google_plus",symbol:"mba_social_panel_google_plus"},{id:"linkedin",symbol:"mba_social_panel_google_linkdin"},{id:"pinterest",symbol:"mba_social_panel_pinterest"},{id:"tumblr",symbol:"mba_social_panel_google_tumblr"},{id:"twitter",symbol:"mba_social_panel_twitter"},{id:"vimeo",symbol:"mba_social_panel_youtube_vimeo"},{id:"youtube",symbol:"mba_social_panel_youtube"}]},getSocialLinkPlaceholder:function(e){return"mobile_action_bar_"+(e="google_plus"===e?"google":e)+"_placeholder"},getValueLink:function(e){var s=this.getEditorAPI().mobile.actionBar.actions,i=s.get().socialLinks;return{value:i[e],requestChange:function(e,t){var n={};i[e]=t,n.socialLinks=i;var a=0<o(i).values().compact().value().length;s.update(n),s.enable({socialLinks:a})}.bind(this,e)}},getSocialLinkTooltip:function(e){return"mobile_action_bar_"+(e="google_plus"===e?"google":e)+"_tooltip"},validateUrlWithEmptyState:function(e){return n.validate.url(e)||""===e}})}),define("panels/toolPanels/fontsManager/fontItem.rt",["react","lodash","baseUI","santa-editor-symbols","util","constants"],function(a,s,i,o,r,l){"use strict";return function(){return a.createElement("div",{className:"font-item "+(this.shouldShowActions()?"with-actions ":"")+" "+(this.shouldShowCancel()?"cancelable":"")+" "+(this.props.status&&!this.props.fontFamily?"queue":"list")+" "+(this.props.errorCode?"error":"")+" "+(this.props.finished?"animated":"")},a.createElement("div",{className:"font-description "+(this.props.fontFamily?"uploaded":"")},a.createElement("span",{className:"font-title display-name "+(this.props.fontFamily?"uploaded":""),style:this.getStyle()},this.props.name),a.createElement("span",{className:"font-title file-name"},this.props.fileName),a.createElement("span",{className:"font-status-msg"},r.translate(this.getStatusMessage()))),a.createElement("div",{className:"indicator"},this.getStatusSymbol()?a.createElement(o.symbol,{name:this.getStatusSymbol(),className:this.props.status||"",key:"status-symbol"}):null),this.props.finished?a.createElement("div",{className:"indicator finished",key:"finished-symbol"},a.createElement(o.symbol,{name:"inputValidationSuccess"})):null,a.createElement("div",{className:"cancel-icon"},a.createElement(o.symbol,{name:"headerCloseButton",onClick:this.props.onCancelClick,className:"cancel-btn"})),a.createElement("div",{className:"actions"},a.createElement(i.tooltip,{value:"Upload_Fonts_Download_Tooltip",styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL},a.createElement("div",{className:"action-btn-container"},this.props.downloadable?a.createElement("a",(e={className:"action-btn download",href:this.props.downloadUrl,onClick:this.props.onDownloadClick,key:"download-btn"},t=this.getDownloadProps(),n=s.assign({},e,t),e.hasOwnProperty("style")&&(n.style=s.defaults(n.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(n.className=t.className+" "+e.className),n),a.createElement(o.symbol,{name:"font-download"})):null)),a.createElement(i.tooltip,{value:"Upload_Fonts_Delete_Tooltip",styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL},a.createElement("div",{className:"action-btn-container"},this.props.removeable?a.createElement("a",{className:"action-btn",onClick:this.props.onRemoveClick,key:"remove-btn"},a.createElement(o.symbol,{name:"font-delete"})):null))));var e,t,n}}),define("panels/toolPanels/fontsManager/fontItem",["create-react-class","prop-types","lodash","util","panels/toolPanels/fontsManager/fontItem.rt"],function(e,t,n,a,s){"use strict";return e({displayName:"fontItem",propTypes:{fontFamily:t.string,name:t.string,status:t.string,onDownloadClick:t.func,onRemoveClick:t.func,onCancelClick:t.func,downloadable:t.bool,removeable:t.bool,cancelable:t.bool,isStillUploading:t.bool,errorCode:t.string},getStyle:function(){return this.props.fontFamily?{fontFamily:this.props.fontFamily+",HelveticaNeueW01-45Ligh, HelveticaNeueW02-45Ligh, HelveticaNeueW10-45Ligh, Helvetica Neue, Helvetica, Arial, メイリオ, meiryo, ヒラギノ角ゴ pro w3, hiragino kaku gothic pro, sans-serif"}:{}},shouldShowActions:function(){return this.props.downloadable||this.props.removeable},shouldShowCancel:function(){return this.props.cancelable},getStatusSymbol:function(){return{uploading:"font-uploading-loader",waiting:"font-uploading-loader",processing:"font-uploading-loader",succeeded:"inputValidationSuccess",failed:"inputValidationError"}[this.props.status]},getDownloadProps:function(){var e={};return a.browserUtil.isChrome()?e.download=this.props.fileName:e.target="_blank",e},getStatusMessage:function(){return this.props.errorCode?a.fontsManagerUtils.getErrorMessage(this.props.errorCode).translate_msg:this.props.isStillUploading?"Upload_Fonts_Status_Still_Uploading":a.fontsManagerUtils.constants.FONT_STATUS_MSG[this.props.status]||""},render:s})}),define("panels/toolPanels/fontsManager/fontsUploadPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","baseUILib","santa-editor-symbols","panels/toolPanels/fontsManager/fontItem"],function(n,a,e,t,s,i,o){"use strict";return function(){return n.createElement(e,{ref:"frame",panelName:this.props.panelName,className:"fonts-upload-panel",shouldNotCloseOnBlur:!0,onClose:this.handlePanelCloseClick,title:this.translateIfNeeded("UPLOAD_FONTS_Panel_Header"),helpId:"96323a82-c61a-4ac1-90ac-10aecb37cbf8",width:"600",onContextMenu:function(e){e.preventDefault()}.bind(this)},n.createElement("div",{className:"fonts-upload-header"},n.createElement("span",{className:"general-explanation-text"},this.shouldFilterOtfFiles()?this.translateIfNeeded("Upload_Fonts_Panel_Header_Text_CJK"):this.translateIfNeeded("Upload_Fonts_Panel_Header_Text")),n.createElement(t.fileInput,{className:"font-upload-button",label:"Upload_Fonts_Upload_Button",onChange:function(e){this.handleUpload(e,!1)}.bind(this),fileTypes:this.getFileTypes()})),this.shouldShowFontsList()?null:n.createElement(t.filesDrop,{onChange:function(e){this.handleUpload(e,!0)}.bind(this),key:"empty-fonts-list",className:"empty-msg"},n.createElement("div",{className:"empty-message-container"},n.createElement("div",{className:"empty-symbol-container"},n.createElement(i.symbol,{name:"fonts-manager-clipart"})),n.createElement("span",{className:"empty-text-title"},this.translateIfNeeded("Upload_Fonts_Empty_State_Title")),n.createElement("br",{}),n.createElement("span",{className:"empty-text"},this.shouldFilterOtfFiles()?this.translateIfNeeded("Upload_Fonts_Empty_State_Text_CJK"):this.translateIfNeeded("Upload_Fonts_Empty_State_Text")),n.createElement(t.fileInput,{className:"font-upload-link",label:"Upload_Fonts_Empty_State_Text_Link",onChange:function(e){this.handleUpload(e,!1)}.bind(this),onlyText:!0,fileTypes:this.getFileTypes()}))),this.shouldShowFontsList()?n.createElement(t.filesDrop,{key:"fonts-list",hasBorder:!1,className:"list",onChange:function(e){this.handleUpload(e,!0)}.bind(this)},n.createElement(s.CustomScroll,{ref:"customScroll"},n.createElement.apply(this,["div",{className:"font-list-container"},a.map(this.state.invalidFiles,function(e,t){return n.createElement(o,a.assign({},{key:e.name},this.getInvalidFilesProps(e)))}.bind(this)),a.map(this.getFontsList(),function(e,t){return n.createElement(o,a.assign({},{key:e.fontFamily||e.fileName+t},e))}.bind(this))]))):null,n.createElement("div",{className:"fonts-upload-footer"},this.shouldShowFooterMsg()?n.createElement("span",{key:"upload-text",className:"footer-msg"},this.translateIfNeeded("Upload_Fonts_Footer_Text")):null,this.shouldShowErrorMsg()?n.createElement("span",{key:"error-text",className:"footer-error-msg"},this.translateIfNeeded("Upload_Fonts_Footer_Error_Text")):null,n.createElement(t.button,{className:"default btn-md close-panel",label:this.getButtonLabel(),disabled:this.isUploadInProcess(),onClick:this.handleDoneClick})))}}),define("panels/toolPanels/fontsManager/fontsUploadPanel",["create-react-class","prop-types","lodash","stateManagement","util","coreBi","panels/toolPanels/fontsManager/fontsUploadPanel.rt"],function(e,t,o,n,r,s,a){"use strict";var i=n.editorPlugins.uploadedFonts.selectors,l=i.getList,c=i.getQueue,p=i.getUploadedItems,u=n.editorPlugins.uploadedFonts.actions,d=u.setUploadedItems,m=u.assignFlagToQueueItem,h=u.cancelUpload,g=u.prepareUploadedFontsData,f=u.removeFonts,P=u.clearUploadQueue,_=u.uploadItems,b=n.editorPlugins.panels.actions,E=b.updateOrOpenPanel,y=b.closePanelByName,C=e({displayName:"fontsUploadPanel",mixins:[r.translationMixin],propTypes:{panelName:t.string,geoLocation:t.string.isRequired,uploadedFontsList:t.object,uploadedFontsQueue:t.object,uploadedFontsItems:t.object,setUploadedFontsItems:t.func.isRequired,assignFlagToQueueItem:t.func.isRequired,cancelUpload:t.func.isRequired,clearUploadQueue:t.func.isRequired,prepareUploadedFontsData:t.func.isRequired,removeFonts:t.func.isRequired,uploadItems:t.func.isRequired,closePanelByName:t.func.isRequired,updateOrOpenPanel:t.func.isRequired,reportBi:t.func.isRequired},render:a,getInitialState:function(){return{invalidFiles:[],isUploadStarted:!1,isUploadError:!1}},handleUpload:function(e,t){var n=this,a=this.shouldFilterOtfFiles();if(20<e.length)this.setState({isUploadError:!0});else{this.sendUploadBIEvents(e,t);var s=o.reduce(e,function(e,t){return r.fontsManagerUtils.isFolder(t)?(t.errorCode="999998",e.push(t)):r.fontsManagerUtils.isFontExt(t,a)||(t.errorCode="-7751",e.push(t)),e},[]),i=o.difference(e,s);o.forEach(s,function(e){n.sendUploadFailedBi(e.errorCode,e)}),this.setState({isUploadError:!1,invalidFiles:s,isUploadStarted:!0}),this.props.uploadItems(i)}},sendUploadBIEvents:function(e,t){var n=this,a=t?s.events.fontsUploadPanel.Fonts_Dragged:s.events.fontsUploadPanel.Upload_Fonts_Click;this.props.reportBi(a,{count:e.length}),o.forEach(e,function(e){n.props.reportBi(s.events.fontsUploadPanel.Upload_Fonts_Try_Upload,{name:e.name})})},sendUploadFailedBi:function(e,t){var n=r.fontsManagerUtils.getErrorMessage(e).bi_msg;this.props.reportBi(s.events.fontsUploadPanel.Upload_Failed,{message:n,name:t.name})},getFontProps:function(e){var t=!!e.status&&!e.fontFamily,n="";return t?t&&(n=e.status):n=r.fontsManagerUtils.constants.FONT_STATUS.FINISHED,{fileName:e.name,name:e.displayName,fontFamily:e.fontFamily,status:n,errorCode:e.error_code,downloadable:!t,downloadUrl:e.downloadUrl,removeable:!t,finished:e.status===r.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED||this.isUploadedItem(e),onRemoveClick:o.partial(this.handleRemoveClick,e),onDownloadClick:o.partial(this.handleDownloadClick,e),cancelable:e.status===r.fontsManagerUtils.constants.FONT_STATUS.WAITING,isStillUploading:e.stillUploading,onCancelClick:t?o.partial(this.handleCancleClick,e):null}},isUploadedItem:function(e){return e.id&&!!o.get(this.props.uploadedFontsItems,e.id)},getFontsList:function(){var e=this.getQueueItems().concat(this.getExistingItems());return o.map(e,this.getFontProps)},getInvalidFilesProps:function(e){return{fileName:e.name,status:r.fontsManagerUtils.constants.FONT_STATUS.FAILED,errorCode:e.errorCode}},getExistingItems:function(){var t=this.props.uploadedFontsQueue;return o.reject(this.props.uploadedFontsList,function(e){return o.find(t,{id:e.id})})},getQueueItems:function(){var e=this.props.uploadedFontsQueue;return o.reject(e,function(e){return e.removed||e.isAborted()||e.canceled})},componentWillUnmount:function(){this.cancelAllUpload(),this.props.prepareUploadedFontsData()},shouldShowFontsList:function(){return!o.isEmpty(this.getExistingItems())||!o.isEmpty(this.getQueueItems())||!o.isEmpty(this.state.invalidFiles)},handleRemoveClick:function(e){this.props.reportBi(s.events.fontsUploadPanel.Delete_File,{}),this.openDeleteConfirmationPanel(e)},handleDownloadClick:function(){this.props.reportBi(s.events.fontsUploadPanel.Download_File_Click,{})},openDeleteConfirmationPanel:function(e){var t=this,n=o.partial(this.removeItem,e);this.props.updateOrOpenPanel("panels.toolPanels.deleteFontMsg",{panelName:"deleteFontConfirmation",onConfirm:n,onCancel:function(){t.props.reportBi(s.events.fontsUploadPanel.Approve_Delete_File,{text:"cancel"})}},!0)},removeItem:function(e){this.props.reportBi(s.events.fontsUploadPanel.Approve_Delete_File,{text:"delete"});var t=this.props.uploadedFontsQueue,n=o.findIndex(t,{id:e.id}),a=this.props.uploadedFontsItems;-1!==n&&(this.props.assignFlagToQueueItem(n,{removed:!0}),a[e.id]&&delete(a=o.clone(a))[e.id],this.props.setUploadedFontsItems(a)),this.props.removeFonts([e])},handleCancleClick:function(e){e.status===r.fontsManagerUtils.constants.FONT_STATUS.WAITING&&(this.props.reportBi(s.events.fontsUploadPanel.Cancel_Upload,{name:e.name}),this.cancelUpload(o.indexOf(this.props.uploadedFontsQueue,e)))},cancelUpload:function(e){this.props.cancelUpload(e)},cancelAllUpload:function(){var t=this,n=this,e=o.filter(this.props.uploadedFontsQueue,{status:r.fontsManagerUtils.constants.FONT_STATUS.WAITING}),a=o.map(e,function(e){return o.indexOf(t.props.uploadedFontsQueue,e)});this.isUploadInProcess()&&e&&o.forEach(a,function(e){n.cancelUpload(e)}),this.props.clearUploadQueue()},handlePanelCloseClick:function(){return!this.isUploadInProcess()||(this.openCancelConfirmationPanel(),!1)},openCancelConfirmationPanel:function(){var e=this;this.props.updateOrOpenPanel("panels.toolPanels.cancelFontUploadMsg",{panelName:"cancelUploadConfirmation",onConfirm:function(){e.props.reportBi(s.events.fontsUploadPanel.Approve_Stop_Upload,{}),e.closePanel()},onCancel:function(){return!1}},!0)},isAnyInQueueProcessing:function(){return o.some(this.props.uploadedFontsQueue,{status:r.fontsManagerUtils.constants.FONT_STATUS.PROCESSING})},isAnyInQueueWaiting:function(){return o.some(this.props.uploadedFontsQueue,{status:r.fontsManagerUtils.constants.FONT_STATUS.WAITING})},isAnyInQueueUploading:function(){return o.some(this.props.uploadedFontsQueue,{status:r.fontsManagerUtils.constants.FONT_STATUS.UPLOADING})},closePanel:function(){this.props.closePanelByName(this.props.panelName)},handleDoneClick:function(){this.props.reportBi(s.events.fontsUploadPanel.Closed_Button_Click,{}),this.closePanel()},getButtonLabel:function(){return this.state.isUploadStarted?"Upload_Fonts_Close_Button_2":"Upload_Fonts_Close_Button_1"},isUploadInProcess:function(){return this.isAnyInQueueProcessing()||this.isAnyInQueueWaiting()||this.isAnyInQueueUploading()},shouldShowFooterMsg:function(){return!this.state.isUploadError&&!o.isEmpty(this.props.uploadedFontsItems)&&!this.isUploadInProcess()},shouldShowErrorMsg:function(){return this.state.isUploadError},getFileTypes:function(){var e=this.shouldFilterOtfFiles()?r.fontsManagerUtils.constants.CONVERTED_EXTENTIONS:r.fontsManagerUtils.constants.ACCEPTABLE_EXTENTIONS;return o.map(e,function(e){return"."+e}).join(",")},shouldFilterOtfFiles:function(){var e=r.languages.getLanguageCode();return r.fontsManagerUtils.shouldFilterOtfFiles(e,this.props.geoLocation)}}),v={setUploadedItems:d,assignFlagToQueueItem:m,cancelUpload:h,prepareUploadedFontsData:g,removeFonts:f,uploadItems:_,clearUploadQueue:P,updateOrOpenPanel:E,closePanelByName:y,reportBi:function(){var e;return(e=n.editorPlugins.bi.actions).event.apply(e,arguments)}},I=o.flow(r.hoc.renderWhenMutated,r.hoc.connect(r.hoc.STORES.STATE_AND_DS,function(e){var t=e.state,n=e.dsRead;return{uploadedFontsList:l(t),uploadedFontsQueue:c(t),uploadedFontsItems:p(t),geoLocation:n.generalInfo.getGeo()}},v))(C);return I.pure=C,I}),define("panels/toolPanels/fontsManager/deleteFontMsg.rt",["react","lodash","panels/frames/messagePanelFrame","util"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,confirmLabel:"Upload_Fonts_Delete_Pop_Up_Button_1",cancelLabel:"Upload_Fonts_Delete_Pop_Up_Button_2",className:"important delete-font-message",panelTitle:a.translate("Upload_Fonts_Delete_Pop_Up_Header")},e.createElement("div",{className:"delete-font-message"},e.createElement("div",{className:"message"},a.translate("Upload_Fonts_Delete_Pop_Up_Text"))))}}),define("panels/toolPanels/fontsManager/deleteFontMsg",["create-react-class","prop-types","lodash","panels/toolPanels/fontsManager/deleteFontMsg.rt"],function(e,t,n,a){"use strict";return e({displayName:"deleteFontMsg",propTypes:{panelName:t.string.isRequired,onConfirm:t.func.isRequired,onCancel:t.func.isRequired},render:a})}),define("panels/toolPanels/fontsManager/cancelFontUploadMsg.rt",["react","lodash","panels/frames/messagePanelFrame","util","experiment"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,confirmLabel:"Upload_Fonts_Close_Panel_Pop_Up_Button_1",cancelLabel:"Upload_Fonts_Close_Panel_Pop_Up_Button_2",className:"important close-font-message",panelTitle:a.translate("Upload_Fonts_Close_Panel_Pop_Up_Header")},e.createElement("div",{className:"cancel-font-message"},e.createElement("div",{className:"message"},a.translate("Upload_Fonts_Close_Panel_Pop_Up_Text"))))}}),define("panels/toolPanels/fontsManager/cancelFontUploadMsg",["create-react-class","lodash","panels/toolPanels/fontsManager/cancelFontUploadMsg.rt"],function(e,t,n){"use strict";return e({displayName:"cancelFontUploadMsg",render:n})}),define("panels/toolPanels/grid/gridAddColumnPanel.rt",["react","lodash","util","baseUI","panels/frames/toolPanelFrame","baseUILib"],function(n,e,t,a,s,i){"use strict";return function(){return n.createElement(s,{ref:"frame",panelName:"panels.toolPanels.gridAddColumnPanel",contentWrapperClass:"grid-add-column-toolbar",contentStyle:e.pick(this.props,["top","left"]),onClose:this.onClose},n.createElement("div",{className:"grid-add-column-panel"},n.createElement(i.PanelHeader,{className:"header light",ref:"panelHeader",onClose:this.onCloseButtonClick,noHelpBtn:!0},n.createElement("span",{className:"panel-title"},t.translate(this.panelTitle))),n.createElement("div",{className:"header-separator"}),n.createElement("div",{className:"grid-add-column-toolbar-content"},n.createElement(a.textInput,{label:"TABLE_ADD_PANEL_COL_TITLE_LABEL",value:this.state.label,onChange:this.onLabelChange}),n.createElement("hr",{className:"divider-long"}),n.createElement(a.textInput,{label:"TABLE_ADD_PANEL_FIELD_NAME_LABEL",ref:"fieldNameInput",value:this.state.fieldName,validator:this.fieldNameValidator,invalidMessage:"FIELD_NAME_CANNOT_BE_EMPTY",onValidation:this.onFieldNameValidation,onChange:this.onFieldNameChange}),n.createElement("hr",{className:"divider-long"}),n.createElement.apply(this,[a.dropDown.select,{label:"TABLE_ADD_PANEL_TYPE_LABEL",valueLink:this.linkState("type")},e.map(this.typeOptions,function(e,t){return n.createElement(a.dropDown.option,{key:e.value,value:e.value},"\n                                ",e.label,"\n                            ")}.bind(this))]),n.createElement("hr",{className:"divider-long"}),n.createElement("div",{className:"button-row"},n.createElement(a.button,{disabled:!this.state.isFormValid,className:"button",label:"TABLE_ADD_PANE_DONE_BTN",onClick:this.onAddButtonClick})))))}}),define("panels/toolPanels/grid/gridAddColumnPanel",["react-addons-linked-state-mixin","create-react-class","lodash","core","panels/toolPanels/grid/gridAddColumnPanel.rt","panels/frames/panelCloseOrigin","coreBi","util"],function(e,t,n,a,s,i,o,r){"use strict";var l=Object.freeze({STRING:"string",DATE:"date",NUMBER:"number",IMAGE:"image",BOOLEAN:"bool",RICH_TEXT:"richText"});return t({displayName:"gridAddColumnPanel",mixins:[a.mixins.editorAPIMixin,e],panelTitle:"TABLE_ADD_PANEL_TITLE",getInitialState:function(){return{label:this.props.labelPrefix+this.props.nextIndex,fieldName:this.props.fieldNamePrefix+this.props.nextIndex,type:l.STRING,fieldNameWasEdited:!1,isFormValid:!0}},render:s,onCloseButtonClick:function(){this.reportPanelClosed(i.HEADER_CLOSE_BUTTON),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},onAddButtonClick:function(){this.state.isFormValid&&(this.props.addColumnCallback(this.state.label,this.state.fieldName,this.state.type),this.reportPanelClosed(i.DONE_BUTTON),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName))},onLabelChange:function(e){var t={label:e};if(!this.state.fieldNameWasEdited){var n=e.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");0!==n.length&&(t.fieldName=n)}this.setState(t)},fieldNameValidator:function(e){return 0<e.length},onFieldNameChange:function(e){this.setState({fieldName:e,fieldNameWasEdited:!0})},onFieldNameValidation:function(e){this.setState({isFormValid:e})},typeOptions:[{value:l.STRING,label:r.translate("TABLE_ADD_PANEL_TYPE_OPT1")},{value:l.IMAGE,label:r.translate("TABLE_ADD_PANEL_TYPE_OPT2")},{value:l.NUMBER,label:r.translate("TABLE_ADD_PANEL_TYPE_OPT3")},{value:l.BOOLEAN,label:r.translate("TABLE_ADD_PANEL_TYPE_OPT4")},{value:l.DATE,label:r.translate("TABLE_ADD_PANEL_TYPE_OPT5")},{value:l.RICH_TEXT,label:r.translate("TABLE_ADD_PANEL_TYPE_OPT6")}],onClose:function(e){this.reportPanelClosed(e)},getSelectedComponentId:function(){var e=this.props.selectedComponents;return n.isArray(e)?n.head(e).id:e.id},reportPanelClosed:function(e){var t=this.getEditorAPI();t.bi.event(o.events.grid.GRID_ADD_COLUMN_DONE,{siteId:t.dsRead.generalInfo.getSiteId(),componentId:this.getSelectedComponentId(),panelName:this.panelTitle,columnType:this.state.type,fieldName:this.state.fieldName,columnTitle:this.state.label,origin:e})}})}),define("panels/toolPanels/customSignupSettings/customSignupSettingsPanel.rt",["react","lodash","panels/frames/toolPanelFrame","baseUILib","baseUI","util"],function(t,e,n,a,s,i){"use strict";return function(){return function(){var e=i.translate;return t.createElement(n,{panelName:this.props.panelName,helpId:"bb75971d-c8cf-4130-bbf6-a333a831932a",headerTitle:e("Pages_Custom_Signup_Settings_Header_Title"),contentClass:"custom-signup-settings-panel",contentWrapperClass:"custom-signup-settings-panel-wrapper"},t.createElement(a.Composites.RichText,{},t.createElement(a.RichText,{className:"light"},e("pages_Custom_Signup_Settings_Custom_Signup_Description_Label"))),t.createElement(a.Divider,{}),t.createElement("div",{className:"tab-content"},t.createElement("div",{className:"settings"},t.createElement("div",{className:"options"},t.createElement("section",{className:"option"},t.createElement(s.toggle,{name:"switch",value:this.state.isCustomSignupEnabled,onChange:this.toggleCustomSignupEnabled,label:"Pages_Custom_Signup_Settings_Custom_Signup_Enabled_Label"}))),t.createElement(a.Divider,{}),this.state.isCustomSignupEnabled?t.createElement("section",{key:"customSignupLink",className:"option"},t.createElement(a.Composites.ActionWithSymbolLabeled,{},t.createElement(a.TextLabel,{value:"Pages_Custom_Signup_Settings_Custom_Signup_Link_Action_Label",shouldTranslate:!0}),t.createElement(a.ActionWithSymbol,{action:this.openLinkPanel},t.createElement(a.TextLabel,{value:this.getCustomSignupPageLabel(),shouldTranslate:!1})))):null)),t.createElement(a.Divider,{long:!0}),t.createElement("footer",{className:"actions"},t.createElement(a.Tooltip,{disabled:this.isSaveEnabled(),content:"Pages_Custom_Signup_Settings_Custom_Signup_Disabled_Save_Button_Tooltip",shouldTranslate:!0,arrowAlignment:"top",key:"saveButtonTooltip"},t.createElement(s.button,{label:"Pages_Custom_Signup_Settings_Custom_Signup_Save_Button_Label",onClick:this.applySettings,disabled:!this.isSaveEnabled(),className:"btn-confirm-primary btn-md"}))))}.apply(this,[])}}),define("panels/toolPanels/customSignupSettings/customSignupSettingsPanel",["react-addons-linked-state-mixin","lodash","util","core","coreBi","create-react-class","panels/toolPanels/customSignupSettings/customSignupSettingsPanel.rt"],function(e,i,o,t,a,n,s){"use strict";function r(e){var t=a.events.topbar.pages,n=e.bi.event;return{clickOnSaveSettings:function(){return n(t.custom_signup_panel_save)},clickOnSaveLinkPanel:function(){return n(t.custom_signup_panel_link_panel_save)},clickOnCancelLinkPanel:function(){return n(t.custom_signup_panel_link_panel_cancel)},clickOnLinkButton:function(){return n(t.custom_signup_panel_link_panel_open)}}}return n({displayName:"customSignupSettingsPanel",mixins:[t.mixins.editorAPIMixin,e],getInitialState:function(){var e=this.getEditorAPI().siteMembers.getCustomSignupPageId();return{customSignupPageId:e,customSignupPageLink:null,isCustomSignupEnabled:!!e}},toggleCustomSignupEnabled:function(){this.setState({isCustomSignupEnabled:!this.state.isCustomSignupEnabled})},getCustomSignupPageLabel:function(){var e=this.getEditorAPI(),t=this.state,n=t.customSignupPageId,a=t.customSignupPageLink;if(!n||!e.data.getById(n))return o.translate("Pages_Custom_Signup_Settings_Custom_Signup_Link_Action_Placeholder");if(a)return o.link.getLinkValueAsString(e,a);var s=e.data.getById(n);return i.get(s,"title","")},openLinkPanel:function(){var e,t,n,a=this.getEditorAPI(),s=this.state.customSignupPageId;r(a).clickOnLinkButton(),a.openLinkPanel({visibleSections:{PopupLink:!0,PageLink:!1,AnchorLink:!1,NoLink:!1,PhoneLink:!1,WhatsAppLink:!1,ExternalLink:!1,EmailLink:!1,DocumentLink:!1,LoginToWixLink:!1,EdgeAnchorLinks:!1},defaultLinkType:"PopupLink",initialTabToDisplay:"PopupLink",link:(e=a,t=s,n=e.data.createItem("PageLink"),t&&(n.pageId="#"+t),n),showAllPopups:!0,hidePageLinks:!0,pageTabTitle:"LINK_PANEL_TAB_ANCHOR",pageTabPageDropDownTitle:"PLATFORM_LINK_MENU_PAGE_PAGE_OPTION",anchorTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_PAGELINK_LABEL",title:"Pages_Custom_Signup_Settings_Link_Panel_Header",onCancelCallback:function(){return r(a).clickOnCancelLinkPanel()},callback:this.updateCustomSignupState,hideLinkTarget:!0})},updateCustomSignupState:function(e){var t=e?i.get(e,"pageId").replace("#",""):null;this.setState({customSignupPageLink:e,customSignupPageId:t}),r(this.getEditorAPI()).clickOnSaveLinkPanel()},applySettings:function(){var e=this.getEditorAPI().siteMembers,t=this.state,n=t.customSignupPageId,a=t.isCustomSignupEnabled;e.getCustomSignupPageId()!==n&&e.setCustomSignupPageId(n),a||e.setCustomSignupPageId(null),r(this.getEditorAPI()).clickOnSaveSettings(),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},isSaveEnabled:function(){var e=this.getEditorAPI().siteMembers,t=this.state,n=t.customSignupPageId,a=t.isCustomSignupEnabled;return e.getCustomSignupPageId()!==n||n&&!a},render:s})}),define("panels/toolPanels/rolesManager/rolesManager.rt",["react","lodash","panels/frames/toolPanelFrame","baseUILib","baseUI","util"],function(a,t,n,s,i,o){"use strict";return function(){return function(){var e=o.translate;return a.createElement(n,{panelName:this.props.panelName,headerTitle:e(this.props.headerTitle),contentClass:"roles-manager-panel",lightHeader:!0,contentWrapperClass:"roles-manager-panel-wrapper"},a.createElement(s.Divider,{long:!0}),a.createElement("div",{className:"content-section"},this.shouldRenderGroups()?a.createElement.apply(this,["div",{key:"should-show-checkbox-container"},t.map(this.getGroups(),function(e,t,n){return a.createElement("div",{className:"checkbox-container",key:t+n},a.createElement(s.Checkbox,{value:t.checked,label:t.title,name:t.id,disabled:t.disabled,labelAfterSymbol:!0,onChange:function(e,t,n,a){this.onCheckboxToggle(t.id,a)}.bind(this,e,t,n),shouldTranslate:!1}))}.bind(this,e)),a.createElement("div",{className:"content-section-divider"},a.createElement(s.Divider,{long:!0}))]):null,a.createElement(s.Button,{onClick:this.props.addNewButtonCallback,className:"btn-text add-new-role"},a.createElement("span",{},e(this.props.addNewButtonLabel)))),a.createElement(s.Divider,{long:!0}),this.getGroups()?a.createElement("footer",{className:"footer-section",key:"footer"},a.createElement(s.Composites.ButtonLarge,{},a.createElement(i.button,{label:this.props.applyButtonLabel,onClick:this.applyChanges,className:"btn-confirm-primary btn-md pp-apply"}))):null)}.apply(this,[])}}),define("panels/toolPanels/rolesManager/rolesManager",["react-addons-linked-state-mixin","lodash","core","create-react-class","panels/toolPanels/rolesManager/rolesManager.rt"],function(e,i,t,n,a){"use strict";return n({displayName:"rolesManager",mixins:[t.mixins.editorAPIMixin,e],getInitialState:function(){var e=this.props,t=e.selectedGroups,n=e.groups.map(function(e){return i.find(t,["id",e.id])||e});return{groups:this.props.groups,selectedGroups:n,currentSelection:n}},getGroups:function(){return this.state.currentSelection},shouldRenderGroups:function(){return 0<this.state.currentSelection.length},onCheckboxToggle:function(e,t){var n,a,s;this.setState({currentSelection:(n=e,a=t,s=this.state.currentSelection,s.map(function(e){return e.id===n?i.assign({},e,{checked:a}):e}))})},applyChanges:function(){var e=this.state,t=e.currentSelection,n=e.selectedGroups,a=i.differenceWith(t,n,i.isEqual);a&&this.props.applyButtonCallback(a),this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render:a})}),define("panels/toolPanels/layers/spotlight",["lodash","stateManagement"],function(e,t){"use strict";var n=t.editorPlugins.layers.actions.setSpotlight,a=t.editorPlugins.layers.selectors.getSpotlightComponent,p=function(e,t){e.store.dispatch(n(t))},u=function(t,n){[t.documentServices.siteSegments.getHeader(),t.documentServices.siteSegments.getFooter(),t.documentServices.pages.getFocusedPage()].forEach(function(e){t.documentServices.components.get.byAncestor(e).forEach(function(e){n(e)})})},d=function(e,t){var n=a(e.store.getState());return e.utils.isSameRef(n,t)};return{isComponentSpotlighted:d,toggleSpotlight:function(e,t){var n,a,s,i,o,r,l,c;d(e,t)?(c=(l=e).documentServices.renderPlugins,u(l,c.showComp),p(l,null)):(a=t,r=(n=e).documentServices.renderPlugins,u(n,r.hideComp),p(n,a),s=n,i=a,o=r.showComp,(function(e,t){var n=e.documentServices.components.getAncestors(t);if(n&&n.length){var a=n.length-1;if(n[a].id===e.documentServices.pages.getMasterPageId())return n.slice(0,a)}return n}(s,i)||[]).forEach(function(e){o(e)}),o(i))},setSpotlightComponent:p}}),define("panels/toolPanels/layers/createNodeProps",["lodash","zepto","stateManagement","coreBi","panels/toolPanels/layers/spotlight"],function(c,p,u,d,m){"use strict";var h=function(e){return 25<e.length?e.substr(0,22)+"...":e},g=function(e,t){var n=e.components.layout.getRelativeToStructure(t);e.ui.scroll.animateScroll({x:0,y:Math.max(n.y-30,0)},.5),e.selection.selectComponentByCompRef(t),e.selection.setIsHiddenComponentDraggedNext(!0)},f=function(e,t){var n,a,s,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{label:""},o=e.dsActions.renderPlugins,r=e.dsRead.renderPlugins.isCompHidden(t);n=e,a=t,(s=r?o.showComp:o.hideComp)(a),n.dsRead.components.get.byAncestor(a).forEach(function(e){s(e)}),m.setSpotlightComponent(n,null),e.store.dispatch(u.bi.actions.event(d.events.layers.layer_show_hide,{state:r?"1":"0",layer_name:i.label}))};return function t(n,e){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=m.isComponentSpotlighted(n,e),o=function(e,t,n){var a=e.components.getDisplayName(t);if(0===n)return a;var s=e.components.getNickname(t);if(s)return s;switch(e.dsRead.components.getType(t)){case"wysiwyg.viewer.components.WRichText":return h(p(e.components.data.get(t).text).text());case"wysiwyg.viewer.components.SiteButton":return h(e.components.data.get(t).label)}return a}(n,e,a),r={parent:s,id:e.id,level:a,label:o,isSelected:n.utils.isSameRef(e,u.selection.selectors.getSelectedCompsRefs(n.store.getState())),isHidden:n.documentServices.renderPlugins.isCompHidden(e),onClick:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{label:""};g(e,t),e.store.dispatch(u.bi.actions.event(d.events.layers.layer_click,{layer_name:n.label}))}.bind(null,n,e,{label:o}),onToggleVisibility:f.bind(null,n,e,{label:o}),onToggleSpotlight:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{label:""},a=m.isComponentSpotlighted(e,t);a||g(e,t);var s=a?"0":"1";m.toggleSpotlight(e,t),e.store.dispatch(u.bi.actions.event(d.events.layers.layer_spotlight,{state:s,layer_name:n.label}))}.bind(null,n,e,{label:o}),shouldShowChildren:!1,icon:n.components.getIconInfo(e),isSpotlight:i};r.isSelected&&function e(t,n,a){t.parent&&(t.parent[n]=a,e(t.parent,n,a))}(r,"shouldShowChildren",!0);var l=n.dsRead.components.getChildren(e);return 0<l.length&&(r.childNodes=c.map(l,function(e){return t(n,e,a+1,r)}),r.moveToIndex=function(e,t,n,a,s){e.components.arrangement.moveToIndex(t[a],s),e.store.dispatch(u.bi.actions.event(d.events.layers.layer_drag,{previous_position_index:a,current_position_index:s,layer_name:n.label}))}.bind(null,n,l,{label:o})),r}}),define("panels/toolPanels/layers/layersPanelMapper",["lodash","panels/toolPanels/layers/createNodeProps"],function(e,n){"use strict";var a=function(e,t,n){return n.editorAPI.panelManager.openHelpCenter("4da3c6cd-dbb3-42c9-9fdd-eba0da517833")},s=function(e,t,n){return n.editorAPI};return{mapDispatchToProps:function(e){var t=e(s);return{openHelpCenter:function(){return e(a)},treeProps:{header:n(t,t.dsRead.pages.getReference("SITE_HEADER")),footer:n(t,t.dsRead.pages.getReference("SITE_FOOTER")),page:n(t,t.dsRead.pages.getFocusedPage())}}}}}),define("panels/toolPanels/layers/node.rt",["react","lodash","baseUI","baseUILib","santa-editor-symbols"],function(a,t,n,s,i){"use strict";return function(){return function(){var e=this.getReactClass();return a.createElement("div",{className:t({node:!0,headline:0===this.props.level,component:0<this.props.level}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),"data-aid":0===this.props.level?"layer-headline":""},a.createElement("div",{className:"item "+t({selected:this.props.isSelected,hidden:this.props.isHidden,spotlight:this.props.isSpotlight}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),"data-aid":0<this.props.level?"layer-item":"layer-header",onMouseDown:function(e,t){this.props.startDrag&&this.props.startDrag(t)}.bind(this,e)},a.createElement("div",{className:"item-inner"},this.hasChildren()?a.createElement("span",{onClick:this.toggleShowChildren,className:"toggle-show-children",key:"toggleShowChildren","data-aid":"toggle-show-children"},this.shouldShowChildren()?null:a.createElement(n.symbol,{className:"close",name:"triangle-right",key:"triangle-right"}),this.shouldShowChildren()?a.createElement(n.symbol,{className:"open",name:"triangle-down",key:"triangle-down"}):null):null,a.createElement("div",{className:"node-info "+t({"extra-margin":!this.hasChildren()}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},this.props.icon&&0<this.props.level?a.createElement("span",{className:"icon",key:"icon"},this.props.icon.svgName?a.createElement(n.symbol,{name:this.props.icon.svgName,key:"svg"}):null,this.props.icon.css?a.createElement("span",{style:this.getImageIconStyle(),key:"style",className:"image"}):null):null,a.createElement("span",{key:this.props.id,onClick:this.props.onClick,className:"title"},a.createElement(s.TextLabel,{value:this.props.label,type:"T17",shouldTranslate:!1})),0<this.props.level?a.createElement("span",{onClick:this.props.onToggleSpotlight,className:"toggle-spotlight",key:"spotlight-handle","data-aid":"layer-toggle-spotlight"},a.createElement(n.tooltip,{value:"Layers_SpotlightOff_Tooltip",shouldTranslate:!0},a.createElement("div",{},this.props.isSpotlight?a.createElement(i.symbol,{name:"spotlight",key:"spotlightOn"}):null)),a.createElement(n.tooltip,{value:"Layers_SpotlightOn_Tooltip",shouldTranslate:!0},a.createElement("div",{},this.props.isSpotlight?null:a.createElement(i.symbol,{name:"spotlight",key:"spotlightOff"})))):null,0<this.props.level?a.createElement("span",{onClick:this.props.onToggleVisibility,className:"toggle-visibility",key:"visibility-handle","data-aid":"layer-toggle-visibility"},a.createElement(n.tooltip,{value:"Layers_Hide_Tooltip",shouldTranslate:!0},a.createElement("div",{},this.props.isHidden?null:a.createElement(n.symbol,{name:"showComp",key:"showSymbol"}))),a.createElement(n.tooltip,{value:"Layers_Show_Tooltip",shouldTranslate:!0},a.createElement("div",{},this.props.isHidden?a.createElement(n.symbol,{name:"hiddenPageStatus",key:"hideSymbol"}):null))):null))),this.shouldShowChildren()?a.createElement.apply(this,[n.sortByDragList,{key:"sortList",ref:"sortList",className:"sort-list",onItemMoved:this.props.moveToIndex},t.map(this.props.childNodes,function(e,t,n){return a.createElement(e,{key:t.id,label:t.label,onClick:t.onClick,isSelected:t.isSelected,isHidden:t.isHidden,onToggleVisibility:t.onToggleVisibility,onToggleSpotlight:t.onToggleSpotlight,moveToIndex:t.moveToIndex,childNodes:t.childNodes,isSpecialParent:t.isSpecialParent,startDrag:this.startDrag.bind(this,n),level:t.level,icon:t.icon,shouldShowChildren:t.shouldShowChildren,isSpotlight:t.isSpotlight})}.bind(this,e))]):null)}.apply(this,[])}}),define("panels/toolPanels/layers/node",["lodash","create-react-class","prop-types","panels/toolPanels/layers/node.rt"],function(e,t,n,a){"use strict";var s=t({displayName:"LayersNode",propTypes:{id:n.string.isRequired,label:n.string.isRequired,onClick:n.func,isSelected:n.bool,isHidden:n.bool,onToggleVisibility:n.func,onToggleSpotlight:n.func,moveToIndex:n.func.isRequired,childNodes:n.array,shouldShowChildren:n.bool,isSpotlight:n.bool},getInitialState:function(){return{shouldShowChildren:this.props.shouldShowChildren}},getReactClass:function(){return s},startDrag:function(e,t){this.refs.sortList.startDrag(e,t)},toggleShowChildren:function(){this.hasChildren()&&this.setState({shouldShowChildren:!this.state.shouldShowChildren})},shouldShowChildren:function(){return this.hasChildren()&&this.state.shouldShowChildren},hasChildren:function(){return this.props.childNodes},getImageIconStyle:function(){return e.merge({},this.props.icon.css,{backgroundImage:"url("+this.props.icon.src+")"})},render:a});return s}),define("panels/toolPanels/layers/layersPanel.rt",["react","lodash","util","panels/toolPanels/layers/node","panels/frames/tpaSettingsPanelFrame"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(s,{className:"layers-panel",title:n.translate("Layers_Title"),width:288,height:579,ref:"tpaSettingsFrame",top:"90px",left:"168px",shouldAddScroll:!0,onHelpClicked:this.props.openHelpCenter,panelName:"panels.toolPanels.layersPanel"},e.createElement("div",{className:"layers-panel"},this.props.treeProps.header.childNodes?e.createElement(a,t.assign({},{key:"header"},this.props.treeProps.header)):null,this.props.treeProps.header.childNodes?e.createElement("div",{className:"spacer",key:"spacer1"}):null,this.props.treeProps.page.childNodes?e.createElement(a,t.assign({},{key:"page"},this.props.treeProps.page)):null,this.props.treeProps.page.childNodes?e.createElement("div",{className:"spacer",key:"spacer2"}):null,this.props.treeProps.footer.childNodes?e.createElement(a,t.assign({},{key:"footer"},this.props.treeProps.footer)):null))}}),define("panels/toolPanels/layers/layersPanel",["zepto","lodash","create-react-class","reactDOM","prop-types","util","panels/toolPanels/layers/layersPanelMapper","panels/toolPanels/layers/layersPanel.rt"],function(a,e,t,s,n,i,o,r){"use strict";var l=i.hoc,c=l.connect,p=l.STORES.EDITOR_API,u=t({displayName:"LayersPanel",propTypes:{treeProps:n.object.isRequired,openHelpCenter:n.func.isRequired},componentDidMount:function(){var e=a(s.findDOMNode(this)),t=e.find(".layers-panel .custom-scroll .inner-container"),n=e.find(".selected");0<n.length&&519<n.offset().top&&t.scrollTop(n.offset().top-t.offset().top-55)},render:r}),d=c(p,e.constant({}),o.mapDispatchToProps,void 0,!1)(u);return d.pure=u,d}),define("panels/toolPanels/imageMaskPanel/imageCropSVGPanelConsts",[],function(){"use strict";return{MASKS:[{index:2,id:"909695c1e003409ba70b5561666c7c4d.svg",thumbId:"shape-01-02",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n<g>\n<path d="M63 9v54H9V9h54z"/>\n</g>\n</svg>'},{index:3,id:"cf545b123b6e4523b228d62bfa0dea9b.svg",thumbId:"shape-01-03",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M66 36c0 16.569-13.431 30-30 30C19.431 66 6 52.569 6 36 6 19.431 19.431 6 36 6c16.569 0 30 13.431 30 30z"/>\n    </g>\n</svg>\n'},{index:4,id:"9cca9e9c03ec45e28cb046998aedd32d.svg",thumbId:"shape-01-04",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M36 8.955L4.643 63.045h62.714L36 8.955z"/>\n    </g>\n</svg>\n'},{index:5,id:"4ede9acf964a4861a5e7af5c79f91cff.svg",thumbId:"shape-01-05",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M45.31 7.287H26.69L11.626 18.254 5.872 36l5.754 17.746L26.69 64.713h18.62l15.064-10.967L66.128 36l-5.754-17.746L45.31 7.287z"/>\n    </g>\n</svg>\n'},{index:6,id:"0dc68a4a1c6440e285913033e4d0a0fe.svg",thumbId:"shape-01-06",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M36.053 5.185L9.009 20.799v31.228l27.044 15.614 27.044-15.614V20.799L36.053 5.185z"/>\n    </g>\n</svg>\n'},{index:7,id:"aeb0df3014a44462815acf283a823208.svg",thumbId:"shape-01-07",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M63.702 63.904H8.298L20.054 8.096h31.892l11.756 55.808z"/>\n    </g>\n</svg>\n'},{index:8,id:"c5e4941a7b6546258e2ef4c1807eaf7b.svg",thumbId:"shape-01-08",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M64.538 36L36 68.644 7.462 36 36 3.356 64.538 36z"/>\n    </g>\n</svg>\n'},{index:9,id:"d3bcfabb79fb4bb193e17e0e5996fdfe.svg",thumbId:"shape-01-09",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M52.343 63.904H8.096L19.657 8.096h44.247L52.343 63.904z"/>\n    </g>\n</svg>\n'},{index:10,id:"2428012b6769448081719f3fde9f0f78.svg",thumbId:"shape-01-10",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M36 6.883c-12.842 0-23.253 9.699-23.253 21.663v36.571h46.507V28.546C59.253 16.582 48.842 6.883 36 6.883z"/>\n    </g>\n</svg>\n'},{index:11,id:"72df8655830f4db6b8efbc852291ce0b.svg",thumbId:"shape-01-11",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M47.92 23.092c-1.913 0-3.726.422-5.357 1.174V4.537c-17.308 0-31.34 14.087-31.34 31.463s14.031 31.463 31.34 31.463v-19.73a12.76 12.76 0 0 0 5.357 1.174c7.101 0 12.857-5.779 12.857-12.908S55.021 23.092 47.92 23.092z"/>\n    </g>\n</svg>\n'},{index:12,id:"3813763a9dc144ce9324e280c91136d1.svg",thumbId:"shape-01-12",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M56.041 6.33A31.586 31.586 0 0 0 45.52 4.537C28.09 4.537 13.959 18.623 13.959 36S28.09 67.463 45.52 67.463c3.689 0 7.23-.633 10.52-1.793V6.33z"/>\n    </g>\n</svg>\n'},{index:13,id:"906322ee0e2b45e6941997bdb0790e82.svg",thumbId:"shape-01-13",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M65.029 35.72L44.481 6l-8.372 12.059L27.882 6.16 6.971 36.28 27.519 66l8.372-12.059 8.227 11.899 20.911-30.12z"/>\n    </g>\n</svg>\n'},{index:14,id:"d8e1899d7ddf4197baf56ef8b22a5e8a.svg",thumbId:"shape-01-14",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M45.557 7.833L36 36.107 26.442 7.833 7.4 64.167h57.2L45.557 7.833z"/>\n    </g>\n</svg>\n'},{index:15,id:"088d89c2b06642468a8418992fe38e73.svg",thumbId:"shape-01-15",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M57.4 6.351L36 24.536 14.6 6.351v59.298L36 47.464l21.4 18.185V6.351z"/>\n    </g>\n</svg>\n'},{index:16,id:"c4a2e6079ca84783af925ba9e640c851.svg",thumbId:"shape-01-16",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M45.018 45.018V26.982H26.982V8.947H8.947v36.49h17.597v17.616h36.509V45.018H45.018z"/>\n    </g>\n</svg>\n'},{index:17,id:"b4d71b7aa00c4d6b8d87f5ce84df8e0a.svg",thumbId:"shape-01-17",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M66.311 46.072V25.928H46.072V5.689H25.928v20.239H5.689v20.144h20.239v20.239h20.144V46.072h20.239z"/>\n    </g>\n</svg>\n'},{index:18,id:"591183f2d0454ddaa23a7f20dc8cdb18.svg",thumbId:"shape-01-18",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M45.273 45.273V26.727H26.727V8.18H8.18v55.64h55.64V45.273H45.273z"/>\n    </g>\n</svg>\n'},{index:19,id:"92254bf1c7e34693b107d3c194cc8943.svg",thumbId:"shape-01-19",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M48.166 38.361c-1.107 5.674-6.119 9.971-12.12 9.971-6.81 0-12.35-5.532-12.35-12.332 0-6.8 5.54-12.332 12.35-12.332l.091.002V5.565l-.091-.001c-8.142 0-15.797 3.166-21.554 8.915S5.564 27.87 5.564 36s3.171 15.773 8.928 21.522 13.412 8.915 21.554 8.915c8.142 0 15.797-3.166 21.554-8.915 5.196-5.189 8.284-11.921 8.837-19.161H48.166z"/>\n    </g>\n</svg>\n'},{index:20,id:"a8f6af7057234dfe9d49916ec1f792e7.svg",thumbId:"shape-01-20",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M36.075 7.395L4 60.605h17.816l14.236-24.607L50.22 60.605H68L36.075 7.395z"/>\n    </g>\n</svg>\n'},{index:21,id:"e753c5d3d3f84d089e54418e7ad99f6a.svg",thumbId:"shape-01-21",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M16.529 7.5h34.942v57H33.623V25.432H16.529V7.5z"/>\n    </g>\n</svg>\n'},{index:22,id:"fae9b72843234469a0564d8d62d22125.svg",thumbId:"shape-01-22",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M62.128 31.675L36 5.547 9.872 31.675h16.234v34.778h19.788V31.675h16.234z"/>\n    </g>\n</svg>\n'},{index:23,id:"6cfa70f524284653a74fb4c67937649b.svg",thumbId:"shape-01-23",thumbnail:'<svg fill="#fff" xmlns="http://www.w3.org/2000/svg" width="72" height="72" viewBox="0 0 72 72">\n    <g>\n        <path d="M36.002 22.962l3.931-5.49c2.165-3.024 4.332-6.047 6.49-9.076.17-.239.342-.347.647-.347 6.08.009 12.16.007 18.241.007h.34c-.148.213-.253.371-.364.524-6.516 9.037-13.031 18.075-19.558 27.104-.247.341-.237.555.004.891 6.364 8.88 12.717 17.768 19.071 26.655.104.145.201.295.338.498-.161.014-.268.031-.374.032-5.914.062-11.827.119-17.741.191-.326.004-.503-.107-.686-.361-3.312-4.613-6.634-9.218-9.954-13.825-.125-.174-.256-.343-.426-.57-.137.182-.254.33-.364.483-3.34 4.634-6.68 9.267-10.015 13.904-.163.226-.313.374-.634.37-5.947-.073-11.894-.13-17.841-.192-.082-.001-.163-.011-.32-.023.109-.169.187-.303.277-.429C13.431 54.43 19.796 45.55 26.18 36.684c.32-.444.297-.708-.015-1.139-6.522-9.011-13.026-18.037-19.533-27.06-.084-.117-.159-.241-.283-.429h.547c5.981 0 11.961.003 17.942-.008.358-.001.564.116.769.403 3.334 4.678 6.68 9.348 10.024 14.019.105.144.215.285.371.492z"/>\n    </g>\n</svg>\n'},{index:24,id:"4bc9a1d5c9e4470e8abfdc87132b7952.svg",thumbId:"shape-01-24",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M36 67.435c-8.397 0-16.291-3.27-22.228-9.207C7.835 52.291 4.565 44.397 4.565 36c0-8.397 3.27-16.291 9.207-22.228S27.603 4.565 36 4.565c8.397 0 16.291 3.27 22.228 9.207 5.937 5.937 9.207 13.831 9.207 22.228 0 8.397-3.27 16.291-9.207 22.228-5.937 5.937-13.831 9.207-22.228 9.207zm0-47.906c-9.082 0-16.471 7.389-16.471 16.471S26.918 52.471 36 52.471 52.471 45.082 52.471 36 45.082 19.529 36 19.529z"/>\n    </g>\n</svg>\n'},{index:25,id:"a9215c4b0e6c4fe580319d3242598adf.svg",thumbId:"shape-01-25",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M46.253 66.162l-3.79-4.099c-8.12 4.408-14.075 5.259-18.329 5.259-13.224 0-20.107-8.275-20.107-17.014 0-7.889 5.646-12.297 12.606-16.241-2.707-3.635-4.718-7.734-4.718-12.374 0-9.513 8.43-17.014 18.406-17.014 9.822 0 18.097 7.27 18.097 16.241 0 7.192-5.259 11.755-10.518 14.849l6.497 7.038c3.712-3.016 6.96-5.955 9.048-8.043l10.905 10.44c-3.481 3.403-6.729 6.264-9.745 8.662l11.369 12.297H46.253zM32.1 51.004l-7.579-8.198c-3.557 2.243-5.104 4.253-5.104 6.341 0 2.321 1.856 4.022 5.027 4.022 2.242 0 4.872-.851 7.656-2.165zm-2.552-24.052c3.557-2.165 5.181-3.867 5.181-5.723 0-2.088-2.088-3.557-4.176-3.557-2.32 0-4.253 1.779-4.253 3.867 0 1.546 1.005 3.015 3.248 5.413z"/>\n    </g>\n</svg>\n'},{index:26,id:"4641461a029148659a58e0f1fbe62195.svg",thumbId:"shape-01-26",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M12.412 18.367h9.899l2.243-12.528h12.761l-2.243 12.528h7.889l2.243-12.528h12.76l-2.243 12.528h7.657v13.302h-9.977l-1.47 8.739h7.657v13.225h-9.977l-2.166 12.529h-12.76l2.166-12.529h-7.889l-2.165 12.529H14.036l2.166-12.529h-7.58V40.408h9.899l1.47-8.739h-7.579V18.367zm18.87 22.041h7.889l1.469-8.739h-7.888l-1.47 8.739z"/>\n    </g>\n</svg>\n'},{index:27,id:"72f99a4575514335b116fea04a2cf903.svg",thumbId:"shape-01-27",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M30.857 44.43v.077c0 2.011 1.315 4.718 5.646 4.718 3.325 0 3.712-1.547 3.712-2.166 0-.851-.774-1.779-6.264-4.331-6.419-3.016-17.788-7.502-17.788-17.556 0-6.728 5.182-11.987 12.838-13.92V3.905h13.766v7.502c7.579 2.165 12.838 7.811 12.838 15.699v.464H40.524v-.077c0-2.011-1.16-4.718-5.027-4.718-3.016 0-3.325 1.624-3.325 2.088 0 .851.928 2.165 5.8 4.099s18.252 6.573 18.252 17.71c0 7.193-5.491 12.452-13.457 14.231v7.192H29.001v-7.502c-7.889-2.165-13.225-7.656-13.225-15.7v-.463h15.081z"/>\n    </g>\n</svg>\n'},{index:28,id:"c156ade1a0c5419593b933eacb9debc8.svg",thumbId:"shape-01-28",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M36.003 61.436c9.892-6.356 20.149-13.632 25.528-24.489 2.279-4.599 3.421-9.904 2.392-14.936-1.372-6.709-6.551-12.179-13.617-11.366-6.828.786-9.737 2.776-14.303 7.51h-.007c-4.567-4.734-7.475-6.724-14.303-7.51-7.066-.813-12.244 4.657-13.616 11.366-1.029 5.032.114 10.337 2.392 14.936 5.379 10.856 15.635 18.133 25.528 24.489h.006z"/>\n    </g>\n</svg>\n'},{index:29,id:"877c2faf8d604dd282a7920f8f310bb7.svg",thumbId:"shape-01-29",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M56.523 9.549c-6.767 0-12.253 5.487-12.253 12.255 0 .616.047 1.22.134 1.811a20.337 20.337 0 0 0-8.405-1.811c-3.012 0-5.868.657-8.441 1.828.11-.661.171-1.339.171-2.032 0-6.768-5.486-12.255-12.253-12.255S3.224 14.832 3.224 21.6 8.71 33.855 15.477 33.855c.671 0 1.329-.056 1.971-.16a20.354 20.354 0 0 0-1.869 8.534c0 11.281 9.143 20.426 20.421 20.426S56.421 53.51 56.421 42.23a20.35 20.35 0 0 0-1.768-8.312c.61.093 1.234.142 1.87.142 6.767 0 12.253-5.487 12.253-12.255S63.29 9.549 56.523 9.549z"/>\n    </g>\n</svg>\n'},{index:30,id:"a244381225fe4e538771607be81bbec9.svg",thumbId:"shape-01-30",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M32.016 35.834L12.667 16.599c10.74-10.587 28.078-10.56 38.783.082 10.733 10.67 10.733 27.969 0 38.638s-28.135 10.67-38.868 0l-.082-.084 19.516-19.401z"/>\n    </g>\n</svg>'},{index:31,id:"e8bb85e9af6547b0b4c96e3553bc38a6.svg",thumbId:"shape-01-31",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M59.739 11.739L32.88 8.175 7 29.284l16.287 34.541 29.605-4.6L63 39.153l-3.261-27.414z"/>\n    </g>\n</svg>\n'},{index:32,id:"adb57ae1122b49098d773454be6161a9.svg",thumbId:"shape-01-32",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M47.86 60.204l17.655-23.629-11.417-21.183-25.395-8.917L6.515 46.593l19.887 18.984 21.458-5.373z"/>\n    </g>\n</svg>\n'},{index:33,id:"bfc18cc253b24c21954f53dbd9644fb9.svg",thumbId:"shape-01-33",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M65 31.794L37.653 7.363 7 27.789l5.109 26.435 32.756 10.413L65 31.794z"/>\n    </g>\n</svg>\n'},{index:34,id:"7f78de979be645a882019d5ffce8b8ef.svg",thumbId:"shape-01-34",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M59.204 53.943a22.707 22.707 0 0 1-4.485 5.774c-9.849 9.114-28.125 6.445-37.11-1.897-5.342-4.96-7.551-11.339-7.562-17.568s2.029-12.37 4.479-18.355c2.045-4.995 4.796-10.319 11.004-13.119 5.14-2.318 11.653-2.421 17.727-2.025 3.769.246 7.65.69 10.814 2.155s5.425 4.197 4.558 6.797c-.63 1.889-2.707 3.337-4.169 4.981-3.13 3.522-3.328 8.243-.497 11.888 2.622 3.377 7.77 6.04 7.969 10.17.175 3.623-.761 7.6-2.728 11.199z"/>\n    </g>\n</svg>\n'},{index:35,id:"3a365dbcf90a4cdb9038ed2c682abc91.svg",thumbId:"shape-01-35",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M11.395 21.207c-6.433 9.196-3.25 23.054 1.418 32.263 2.887 5.695 8.111 13.329 17.139 11.88 2.052-.33 3.932-1.176 5.963-1.586 6.297-1.272 13.379 1.734 19.228-.568 2.314-.911 4.091-2.559 5.455-4.349 4.304-5.647 4.824-13.131 1.332-19.159-2.45-4.228-6.694-7.731-8.326-12.219-1.602-4.402-.478-9.189-1.664-13.679-1.443-5.461-7.604-9.376-13.944-6.151-2.395 1.218-4.448 2.855-7.059 3.783-2.718.966-5.733 1.219-8.492 2.107-5.179 1.667-8.736 4.371-11.05 7.678z"/>\n    </g>\n</svg>\n'},{index:36,id:"dd44237911db45a79ca681bd532aaab9.svg",thumbId:"shape-01-36",thumbnail:'<svg fill="#fff" viewBox="0 0 72 72" height="72" width="72" xmlns="http://www.w3.org/2000/svg">\n    <g>\n        <path d="M60.165 19.501c-.657-1.746-1.739-3.407-3.287-4.882-4.076-3.882-11.223-6.32-17.763-7.371-17.269-2.774-27.374 9.87-28.042 20.443-.318 5.035 2.509 9.948 2.731 14.998.238 5.419-2.03 10.766-.942 16.222.607 3.041 3.124 4.813 7.307 5.522 12.513 2.12 29.264-.418 35.545-9.2 1.759-2.459 2.532-5.267 2.804-7.998.321-3.224-.43-6.431-.533-9.649-.098-3.064.949-5.991 2.063-8.928 1.127-2.967 1.236-6.185.117-9.157z"/>\n    </g>\n</svg>\n'}],MASK_THUMB_SIZE:{width:72,height:72}}}),define("panels/toolPanels/imageMaskPanel/imageCropSVGPanelMapper",["stateManagement"],function(e){"use strict";var i=e.editorPlugins.userPreferences.actions.setSessionUserPreferences,o=e.editorPlugins.userPreferences.selectors.getSessionUserPreferences,r=e.editorPlugins.components.selectors.getData,l=function(e,t,n){return n.editorAPI},c=function(e,t){return t()};return{mapStateToProps:function(e,t){var n=e.editorAPI,a=n.store.getState(),s=t.selectedComponents[0].id;return{imageData:r(t.selectedComponents,n.dsRead),lastCustomMaskId:o("mask-crop-custom-svg-"+s)(a)}},mapDispatchToProps:function(n,e){var t=n(l),a=n(c),s=e.selectedComponents[0].id;return{mediaManager:t.mediaServices.mediaManager,setFocusToEditor:t.mediaServices.setFocusToEditor,setCropArea:t.imageCrop.setCropArea,getCropArea:t.imageCrop.getCropArea,getMMgrPath:function(e){return o(e)(a)},setMMgrPath:function(e,t){return n(i(e,t))},setLastCustomMaskId:function(e){return n(i("mask-crop-custom-svg-"+s,e))},onClose:e.onClose,getSVG:t.documentServices.media.vectorImage.getSvgFromCache}}}}),define("panels/toolPanels/imageMaskPanel/imageCropSVGPanel.rt",["react","lodash","baseUILib","santa-editor-symbols","panels/frames/toolPanelFrame","util"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(s,{panelName:this.props.panelName,headerTitle:i.translate("CROP_MODE_SHAPES_PANEL_HEADER_TITLE"),contentStyle:this.getFrameStyle(),helpId:"9f5cc6cb-6abf-40c5-8f8b-774e2614df18",contentWrapperClass:"image-mask-panel",onClose:this.props.onClose},e.createElement(n.CustomScroll,{ref:"customScroll",heightRelativeToParent:"100%",addScrolledClass:!0,scrollTo:this.state.scrollPosition},e.createElement(n.Composites.Thumbnails,{},e.createElement(n.Thumbnails,{value:this.state.currentSvgId,ref:"maskCropItems",onChange:this.selectMask,maxThumbsPerRow:3,fixedRatio:!0,hasBackground:!1,borderType:"thumbnail",addThumbnailProps:this.getAddThumbProps(),options:this.getMaskOptions(),shouldTranslate:!0}),this.props.lastCustomMaskId?e.createElement("div",{className:"image-crop-change-mask-indicator",key:"changebutton",onClick:this.openMMgr},e.createElement(n.Tooltip,{shouldTranslate:!0,closeOnMouseClick:!0,content:"CROP_MODE_SHAPES_PANEL_CUSTOM_REPLACE_TOOLTIP"},e.createElement(a.symbol,{name:"video-player-change-poster"}))):null)))}}),define("panels/toolPanels/imageMaskPanel/imageCropSVGPanel",["react","reactDOM","prop-types","lodash","create-react-class","util","baseUI","panels/toolPanels/imageMaskPanel/imageCropSVGPanelConsts","panels/toolPanels/imageMaskPanel/imageCropSVGPanelMapper","panels/toolPanels/imageMaskPanel/imageCropSVGPanel.rt"],function(o,n,e,s,t,i,r,l,a,c){"use strict";var p=i.hoc,u=p.connect,d=p.STORES.EDITOR_API;function m(e,t,n,a,s,i){return{value:i.id,illustration:o.createElement(r.imageWithMask,{imageData:e,imageWidth:t,imageHeight:n,imageUrl:s,isClip:a,crop:{width:t,height:n,x:0,y:0,svgId:i.id,svgStr:i.thumbnail.replace("<svg ","<svg id="+i.thumbId+" "),svgDomId:i.thumbId,maskContour:a?null:{width:2,color:"#dae1e9"}}})}}function h(e){return!!e&&s.some(l.MASKS,{id:e})}var g="public/ec9ed40a-6502-4df2-a088-355405d7bd25",f=i.imageTransform,P=t({displayName:"imageCropSVGPanel",propTypes:{mediaManager:e.object.isRequired,imageData:e.object.isRequired,setFocusToEditor:e.func,setCropArea:e.func,getCropArea:e.func,getCropOriginArea:e.func,getMMgrPath:e.func,setMMgrPath:e.func,getLastCustomMaskId:e.func,lastCustomMaskId:e.string,setLastCustomMaskId:e.func,getSVG:e.func},getDefaultProps:function(){return{top:"200px",left:"300px"}},getInitialState:function(){var e=this.props.getCropArea(),t=e&&e.svgId;return t&&!h(t)&&this.props.setLastCustomMaskId(t),{currentSvgId:t,scrollPosition:0}},componentWillUnmount:function(){this.props.setCropArea({original:null})},componentDidMount:function(){this.scrollToSelectedItem()},scrollToSelectedItem:function(){var e=n.findDOMNode(this.refs.maskCropItems).querySelector("input:checked");if(e){var t=e.parentNode;this.setState({scrollPosition:Math.max(t.offsetTop-74,0)})}},getMaskOptions:function(){var e=this.props.getCropArea(),t=f.getFromImageData(this.props.imageData,e.width,e.height),n=s.map(l.MASKS,m.bind(this,this.props.imageData,l.MASK_THUMB_SIZE.width,l.MASK_THUMB_SIZE.height,!1,t.uri)),a=this.getCurrentMaskThumbnail();return a&&n.unshift(a),n},selectMask:function(e,t){var n=this,a=this.props.getCropArea(),s=a.x,i=void 0===s?0:s,o=a.y,r=void 0===o?0:o,l=a.width,c=a.height;this.props.setCropArea({svgId:e,svgStr:"",svgDomId:"",width:l,height:c,x:i,y:r},function(){t&&!h(e)&&n.props.setLastCustomMaskId(e),n.setState({currentSvgId:e})})},openMMgr:function(){var a=this,e=this.props.mediaManager.categories.VECTOR_ART,t=this.props.lastCustomMaskId,s=this.props.imageData.id,n=t&&this.props.getMMgrPath("last_svg_mask_path_"+s)||g;this.props.mediaManager.open(e,{path:n,multiSelect:!1,translation:{title:i.translate("CROP_MODE_MMGR_TITLE"),submitButton:i.translate("CROP_MODE_MMGR_SUBMIT_BUTTON")},callback:function(e,t){if(e){var n=e[0].uri;a.selectMask(n,!0),a.props.setMMgrPath("last_svg_mask_path_"+s,t.path||g)}a.props.setFocusToEditor()}})},getAddThumbProps:function(){return!this.props.lastCustomMaskId&&{onAddThumbnailClick:this.openMMgr,isFirst:!0,height:l.MASK_THUMB_SIZE.height}},getCurrentMaskThumbnail:function(){if(!this.props.lastCustomMaskId)return null;var e,t=this.props.imageData,n=this.props.getCropArea(),a=f.getFromImageData(this.props.imageData,n.width,n.height),s=m.call(this,t,l.MASK_THUMB_SIZE.width,l.MASK_THUMB_SIZE.height,!0,a.uri,{id:this.props.lastCustomMaskId,thumbnail:(e=this.props.getSVG(this.props.lastCustomMaskId),e.replace('preserveAspectRatio="none"','preserveAspectRatio="xMidYMid"')),thumbId:"svg-panel-change-mask-id"});return s.className="custom-mask",s},getFrameStyle:function(){return s.defaults({width:288,height:600},s.pick(this.props,["top","left"]))},render:c}),_=u(d,a.mapStateToProps,a.mapDispatchToProps)(P);return _.pure=P,_}),define("panels/toolPanels/apiDefinitionEvent/apiDefinitionEvent.rt",["react","lodash","baseUILib","util","panels/frames/toolPanelFrame"],function(e,t,n,a,s){"use strict";return function(){var t=this;return e.createElement(s,{panelName:"panels.toolPanels.apiDefinitionEvent",onClose:function(e){return t.closePanel(e)},headerTitle:a.translate(this.props.title),contentStyle:this.props.contentStyle,className:"api-definition-event",automationId:"api-definition-event"},e.createElement(n.Composites.TextInputLabeled,{},e.createElement(n.InfoIcon,{text:"AppStudio_WidgetAPI_NewEvent_Name_Tooltip"}),e.createElement(n.TextLabel,{value:"AppStudio_WidgetAPI_NewEvent_Name_label"}),e.createElement(n.TextInput,{value:this.state.name,className:"add-event-name",placeholder:"AppStudio_WidgetAPI_NewEvent_Name_Placeholder",validator:this.isEventNameValid,allowInvalidChange:!0,validateInitialValue:!1,invalidMessage:"AppStudio_WidgetAPI_NewEvent_Name_InvalidName_Error",onChange:function(e){this.setState({name:e})}.bind(this)})),e.createElement(n.Divider,{long:!0}),e.createElement(n.Composites.TextInputMultilineLabeled,{},e.createElement(n.InfoIcon,{text:"AppStudio_WidgetAPI_NewEvent_Description_Tooltip"}),e.createElement(n.TextLabel,{value:"AppStudio_WidgetAPI_NewEvent_Description_Label"}),e.createElement(n.TextInputMultiline,{value:this.state.description,automationId:"add-event-description",className:"widget-event-description",placeholder:"AppStudio_WidgetAPI_NewEvent_Description_Placeholder",onChange:function(e){this.setState({description:e})}.bind(this)})),e.createElement(n.Composites.ButtonMedium,{},e.createElement(n.Button,{className:"btn-md",disabled:!this.isFormValid(),automationId:"add-event-main-button",onClick:this.handleClickAction},e.createElement("span",{},a.translate(this.props.mainActionLabel)))))}}),define("panels/toolPanels/apiDefinitionEvent/apiDefinitionEvent",["lodash","create-react-class","util","prop-types","stateManagement","constants","panels/frames/panelCloseOrigin","panels/toolPanels/apiDefinitionEvent/apiDefinitionEvent.rt"],function(o,e,t,n,a,s,i,r){"use strict";var l=e({displayName:"apiDefinitionEvent",propTypes:{event:n.object.isRequired,title:n.string.isRequired,mainActionLabel:n.string.isRequired,onChange:n.func.isRequired,close:n.func.isRequired,illegalEventNames:n.arrayOf(n.string),contentStyle:n.shape({top:n.number,right:n.number,width:n.number}),callBi:n.func.isRequired},getInitialState:function(){return{name:this.props.event.name,description:this.props.event.description}},getDefaultProps:function(){return{event:{name:"",description:""}}},handleClickAction:function(){this.props.onChange({name:this.state.name,description:this.state.description}),this.props.callBi()},closePanel:function(e){e===i.CLICK_OUTSIDE&&this.isFormValid()?this.handleClickAction():this.props.close()},isEventNameValid:function(e){return t.validate.eventName(e)&&!o.includes(this.props.illegalEventNames,e)},isFormValid:function(){return this.isEventNameValid(this.state.name)},render:r});return o.flow(t.hoc.renderWhenMutated,t.hoc.connect(t.hoc.STORES.DS_ONLY,function(e,t){var n=e.dsRead,a=n.pages.getFocusedPageId(),s=n.appStudio.widgets.getByRootCompId(a),i=n.appStudio.widgets.events.get(s);return{illegalEventNames:o(i).reject({name:o.get(t,"event.name")}).map("name").value()}}),a.editorPlugins.panels.hoc.panelFrame(s.PANEL_TYPES.TOOL))(l)}),define("panels/toolPanels/apiDefinitionProperty/propertyTypes",["util","lodash"],function(t,n){"use strict";return{STRING:{value:"string",label:"AppStudio_WidgetAPI_PropertyType_Dropdown_Text",automationId:"property-default-string",defaultValueSchema:{name:"string",propType:"string",automationId:"property-default-value",defaultValue:"",displayName:"AppStudio_WidgetAPI_DefaultValue_Label",placeholder:"AppStudio_WidgetAPI_DefaultValue_Placeholder"},validations:["maxLength"]},NUMBER:{value:"number",label:"AppStudio_WidgetAPI_PropertyType_Dropdown_Number",automationId:"property-default-number",defaultValueSchema:{name:"number",propType:"number",automationId:"property-default-value",min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,step:.1,defaultValue:0,displayName:"AppStudio_WidgetAPI_Number_DefaultValue_Label"},validations:["min","max","step"]},BOOL:{value:"bool",label:"AppStudio_WidgetAPI_PropertyType_Dropdown_Boolean",automationId:"property-default-boolean",defaultValueSchema:{name:"boolean",propType:"radio",automationId:"property-default-value",defaultValue:"false",displayName:"AppStudio_WidgetAPI_Boolean_DefaultValue_Label",options:[{value:"true",label:"AppStudio_WidgetAPI_Boolean_DefaultValue_True"},{value:"false",label:"AppStudio_WidgetAPI_Boolean_DefaultValue_False"}]}},IMAGE:{value:"image",label:"AppStudio_WidgetAPI_PropertyType_Dropdown_Image",automationId:"property-default-image",defaultValueSchema:{name:"image",propType:"image",automationId:"property-default-value",changeImage:"image-change",uploadImage:"upload-btn",defaultValue:"",displayName:"AppStudio_WidgetAPI_Image_DefaultImage"}},DATE:{value:"dateTime",label:"AppStudio_WidgetAPI_PropertyType_Dropdown_DateTime",automationId:"property-default-date",defaultValueSchema:{name:"date",propType:"string",automationId:"property-default-value",displayName:"AppStudio_WidgetAPI_URL_DefaultDate_Label",placeholder:"AppStudio_WidgetAPI_URL_DefaultDate_Placeholder",validator:function(e){return n.isEmpty(e)||!isNaN(new Date(e).getDate())},allowInvalidChange:!0,validateInitialValue:!1,defaultValue:!1,invalidMessage:"AppStudio_WidgetAPI_URL_DefaultDate_Error"}},URL:{value:"url",label:"AppStudio_WidgetAPI_PropertyType_Dropdown_URL",automationId:"property-default-url",defaultValueSchema:{name:"url",propType:"string",automationId:"property-default-value",displayName:"AppStudio_WidgetAPI_URL_DefaultURL_Label",placeholder:"AppStudio_WidgetAPI_URL_DefaultURL_Placeholder",validator:function(e){return n.isEmpty(e)||t.validate.url(e)},allowInvalidChange:!0,defaultValue:"",validateInitialValue:!1,invalidMessage:"AppStudio_WidgetAPI_URL_DefaultURL_Error"}}}}),define("panels/focusPanels/propertyTypes",[],function(){"use strict";return{STRING:{value:"string",label:"Text (String)"},NUMBER:{value:"number",label:"Number"},BOOLEAN:{value:"boolean",label:"Boolean"},IMAGE:{value:"image",label:"Image"},DATE:{value:"date",label:"DateTime"},URL:{value:"url",label:"URL"},COLOR:{value:"color",label:"Color"}}}),define("panels/toolPanels/apiDefinitionProperty/apiDefinitionProperty.rt",["react","lodash","baseUILib","panels/focusPanels/propertyTypes","util","panels/frames/toolPanelFrame","santa-editor-symbols"],function(n,e,a,t,s,i,o){"use strict";return function(){var t=this;return n.createElement(i,{panelName:"panels.toolPanels.apiDefinitionProperty",onClose:function(e){return t.closePanel(e)},headerTitle:s.translate(this.props.title),useScroll:!0,contentStyle:this.props.contentStyle,automationId:"api-definition-property"},n.createElement("div",{className:"api-property-definition-panel"},n.createElement.apply(this,["div",{className:"api-definition-panel-content"},n.createElement(a.Composites.TextInputLabeled,{},n.createElement(a.InfoIcon,{text:"AppStudio_WidgetAPI_NewProperty_Name_Tooltip"}),n.createElement(a.TextLabel,{value:"AppStudio_WidgetAPI_NewProperty_Name_label"}),n.createElement(a.TextInput,{value:this.state.name,automationId:"add-property-name",validator:this.isPropertyNameValid,allowInvalidChange:!0,validateInitialValue:!1,invalidMessage:"AppStudio_WidgetAPI_NewProperty_Name_InvalidName_Error",autoSelect:!0,placeholder:"AppStudio_WidgetAPI_NewProperty_Name_Placeholder",onChange:function(e){this.setState({name:e})}.bind(this)})),n.createElement(a.Divider,{long:!0}),n.createElement(a.Composites.TextInputLabeled,{},n.createElement(a.InfoIcon,{text:"AppStudio_WidgetAPI_DisplayName_Tooltip"}),n.createElement(a.TextLabel,{value:"AppStudio_WidgetAPI_DisplayName_Label"}),n.createElement(a.TextInput,{value:this.state.displayName,automationId:"add-property-display-name",placeholder:"AppStudio_WidgetAPI_DisplayName_Placeholder",onChange:function(e){this.setState({displayName:e})}.bind(this)})),n.createElement(a.Divider,{long:!0}),n.createElement(a.Composites.DropDownLabeled,{},n.createElement(a.TextLabel,{value:"AppStudio_WidgetAPI_PropertyType_Title"}),n.createElement(a.DropDown,{value:this.state.type,automationId:"add-property-type-selection",options:this.getPropertyTypeOptions(),onChange:this.onPropertyTypeChanged})),n.createElement(a.Divider,{long:!0}),"\n            ",this.getDefaultValueComponent(),"\n            ",n.createElement(a.Divider,{long:!0}),e.map(this.getValidatorsData(),function(e,t){return[n.createElement(a.Composites.ToggleSwitchWithSelectiveInput,{key:e.label},n.createElement(a.Composites.ToggleSwitch,{},n.createElement(a.ToggleSwitch,{value:e.toggleValue,label:e.label,automationId:e.toggleAutomationId,onChange:e.onToggle})),e.toggleValue?n.createElement(a.Composites.TextInput,{key:e.label},n.createElement(a.NumericInput,{value:e.inputValue||0,min:e.min,max:e.max,step:e.step,automationId:e.inputAutomationId,onChange:e.onChangeInput})):null),n.createElement(a.Divider,{long:!0,key:"29132"})]}.bind(this)),n.createElement(a.Composites.TextInputMultilineLabeled,{},n.createElement(a.InfoIcon,{text:"AppStudio_WidgetAPI_Description_Tooltip"}),n.createElement(a.TextLabel,{value:"AppStudio_WidgetAPI_Description_Label"}),n.createElement(a.TextInputMultiline,{value:this.state.description,automationId:"add-property-description",placeholder:"AppStudio_WidgetAPI_Description_Placeholder",onChange:function(e){this.setState({description:e})}.bind(this)}))]),n.createElement(a.Composites.ButtonLargeFixedBottom,{className:"api-definition-property-bottom-button"},n.createElement(a.Button,{className:"btn-md",disabled:!this.isFormValid(),automationId:"add-property-main-button",onClick:this.handleClickAction},n.createElement("span",{},s.translate(this.props.mainActionLabel))))))}}),define("panels/toolPanels/apiDefinitionProperty/apiDefinitionProperty",["create-react-class","lodash","baseUI","util","stateManagement","constants","prop-types","panels/toolPanels/apiDefinitionProperty/propertyTypes","panels/frames/panelCloseOrigin","panels/toolPanels/apiDefinitionProperty/apiDefinitionProperty.rt"],function(e,o,a,p,t,n,s,i,r,l){"use strict";var c=p.hoc,u=c.connect,d=c.renderWhenMutated,m=c.STORES.EDITOR_API,h=e({displayName:"apiDefinitionProperty",propTypes:{property:s.shape({displayName:s.string,name:s.string,propType:s.string,validations:s.object,defaultValue:s.any,description:s.string}),illegalPropertyNames:s.arrayOf(s.string),title:s.string.isRequired,mainActionLabel:s.string.isRequired,close:s.func.isRequired,onChange:s.func.isRequired,openMediaManager:s.func.isRequired,callBi:s.func.isRequired,contentStyle:s.shape({top:s.number,right:s.number,width:s.number})},getInitialState:function(){var e=o.get(this.props.property,"validations",{}),t=e.min,n=e.max,a=e.step,s=e.maxLength;return{displayName:this.props.property.displayName,name:this.props.property.name,type:this.props.property.propType,min:t,max:n,step:a,maxLength:s,defaultValue:this.props.property.defaultValue,description:this.props.property.description,validateMin:!o.isUndefined(t),validateMax:!o.isUndefined(n),validateStep:!o.isUndefined(a),validateMaxLength:!o.isUndefined(s)}},getPropertyTypeOptions:function(){return o.map(i,function(e){return o.pick(e,["value","label","automationId"])})},onPropertyTypeChanged:function(e){var t=o.find(i,{value:e});this.setState({type:e,defaultValue:t.defaultValueSchema.defaultValue,validateMax:!1,validateMin:!1,validateMaxLength:!1})},getDefaultPropertyValue:function(){return this.state.defaultValue?this.state.defaultValue:o.find(i,{value:this.state.type}).defaultValue},getPlaceholderValue:function(){return o.find(i,{value:this.state.type}).placeholder},getDefaultProps:function(){return{property:{name:"",displayName:"",propType:i.STRING.value,defaultValue:i.STRING.defaultValueSchema.defaultValue,description:""}}},generateValidatorFunction:function(){var t=this,n=function(e,t){return o.isNumber(e)?e:t};return this.state.validateMaxLength?function(e){return e.length<=t.state.maxLength}:this.state.validateMax&&this.state.validateMin?function(e){return Number(e)<=n(t.state.max,Number.MAX_SAFE_INTEGER)&&Number(e)>=n(t.state.min,Number.MIN_SAFE_INTEGER)}:this.state.validateMax?function(e){return Number(e)<=n(t.state.max,Number.MAX_SAFE_INTEGER)}:this.state.validateMin?function(e){return Number(e)>=n(t.state.min,Number.MIN_SAFE_INTEGER)}:void 0},getInvalidMessage:function(){return this.state.validateMaxLength?"AppStudio_propertyPanel_textLength_validator":this.state.validateMax&&this.state.validateMin?p.translate("AppStudio_propertyPanel_minMaxRange_validator"):this.state.validateMax?p.translate("AppStudio_propertyPanel_maxValue_validator"):this.state.validateMin?p.translate("AppStudio_propertyPanel_minValue_validator"):void 0},getReactKey:function(e){return this.state.validateMaxLength?""+(e.defaultValueSchema.name+this.state.maxLength):this.state.validateMax&&this.state.validateMin?""+(e.defaultValueSchema.name+this.state.max+this.state.min):this.state.validateMax?""+(e.defaultValueSchema.name+this.state.max):this.state.validateMin?""+(e.defaultValueSchema.name+this.state.min):void 0},generateValidatorDescriptor:function(e){return{validator:this.generateValidatorFunction(),invalidMessage:this.getInvalidMessage(),reactKey:this.getReactKey(e)}},getDefaultValueComponent:function(){var n=this,e=o.find(i,{value:this.state.type}),t=o.defaults(this.generateValidatorDescriptor(e),e.defaultValueSchema);return a.utils.generateUICompBySchema(o.assign({shouldTranslate:!0},t),this.state.defaultValue,function(e,t){return n.setState({defaultValue:t})},{openMediaManager:this.props.openMediaManager})},closePanel:function(e){e===r.CLICK_OUTSIDE&&this.isFormValid()?this.handleClickAction():this.props.close()},getValidatorsData:function(){var t=this,e={maxLength:{toggleValue:this.state.validateMaxLength,label:"AppStudio_WidgetAPI_MaxCharacters_Label",onToggle:function(e){return t.setState({validateMaxLength:e,maxLength:t.state.maxLength||0})},step:1,min:0,max:9999,inputValue:this.state.maxLength,onChangeInput:function(e){return t.setState({maxLength:e})},toggleAutomationId:"max-length-toggle",inputAutomationId:"max-length-input"},max:{toggleValue:this.state.validateMax,label:"AppStudio_WidgetAPI_Number_MaxValue_Label",onToggle:function(e){return t.setState({validateMax:e,max:t.state.max||0})},step:.1,min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,inputValue:this.state.max,onChangeInput:function(e){return t.setState({max:e})},toggleAutomationId:"max-toggle",inputAutomationId:"max-input"},min:{toggleValue:this.state.validateMin,label:"AppStudio_WidgetAPI_Number_MinValue_Label",onToggle:function(e){return t.setState({validateMin:e,min:t.state.min||0})},step:.1,min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,inputValue:this.state.min,onChangeInput:function(e){return t.setState({min:e})},toggleAutomationId:"min-toggle",inputAutomationId:"min-input"},step:{toggleValue:this.state.validateStep,label:"AppStudio_WidgetAPI_Number_StepValue_Label",onToggle:function(e){return t.setState({validateStep:e,step:t.state.step||0})},step:.1,min:.1,max:Number.MAX_SAFE_INTEGER,inputValue:this.state.step,onChangeInput:function(e){return t.setState({step:e})},toggleAutomationId:"step-toggle",inputAutomationId:"step-input"}},n=o.find(i,{value:this.state.type});return o.pick(e,n.validations)},handleClickAction:function(){var e=o.assign({},this.state.validateMin?{min:this.state.min}:{},this.state.validateMax?{max:this.state.max}:{},this.state.validateStep?{step:this.state.step}:{},this.state.validateMaxLength?{maxLength:this.state.maxLength}:{});this.props.onChange({displayName:this.state.displayName,name:this.state.name,propType:this.state.type,validations:e,defaultValue:""+this.state.defaultValue,description:this.state.description}),this.props.callBi()},isPropertyNameValid:function(e){return p.validate.variableName(e)&&!o.includes(this.props.illegalPropertyNames,e)},isFormValid:function(){var e,t=this,n=o.find(i,{value:this.state.type}),a=(e=n).defaultValueSchema.validator||t.generateValidatorDescriptor(e).validator,s=!a||a(this.state.defaultValue);return this.isPropertyNameValid(this.state.name)&&s},render:l});return o.flow(d,u(m,function(e,t){var n=e.dsRead,a=n.pages.getFocusedPageId(),s=n.appStudio.widgets.getByRootCompId(a),i=n.appStudio.widgets.properties.get(s);return{illegalPropertyNames:o(i).reject({name:o.get(t,"property.name")}).map("name").value()}},function(n){return{openMediaManager:function(e,t){n(function(l){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e,t,n){var a=n.editorAPI,s=a.mediaServices.mediaManager,i=a.mediaServices.mediaManager.categories.IMAGE,o=c.title,r=c.submitButton;s.open(i,{callback:l,translation:{title:p.translate(o||"AppStudio_WidgetAPI_Image_DefaultImage_Upload_MediaManager_Header"),submitButton:p.translate(r||"AppStudio_WidgetAPI_Image_DefaultImage_Upload_MediaManager_Set_Button")}})}}(e,t))}}}),t.editorPlugins.panels.hoc.panelFrame(n.PANEL_TYPES.TOOL))(h)}),define("panels/toolPanels/stylableEditor/stylableEditorPanelFactory.rt",["react","lodash","panels/frames/toolPanelFrame"],function(e,t,n){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,headerTitle:this.getTitle(),onClose:this.props.onClose,contentStyle:this.getFrameStyle(),contentWrapperClass:"stylable-editor-panel",contentClass:this.getContentClass(),lightHeader:!0},"\n    ",this.renderPicker(),"\n")}}),define("panels/toolPanels/stylableEditor/stylableEditorPanelFactory",["react","prop-types","lodash","util","santa-editor-utils","constants","panels/toolPanels/stylableEditor/stylableEditorPanelFactory.rt"],function(l,n,c,e,t,a,p){"use strict";var s=e.hoc,u=s.connect,d=s.STORES.EDITOR_API,m=t.hoc.withModules,h=a.STYLABLE.EDITOR.SITE_PATH;return function(a,s,i,o){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"stylable-editor-panel-content-wrapper",e=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.getFrameStyle=function(){return c.defaults(o,c.pick(t.props,["top","left"]))},t.getTitle=function(){return e.title},t.getContentClass=function(){return r},t.getPickerProps=function(){return c.pick(t.props,c.keys(i))},t.renderPicker=function(){return l.createElement(t.props.stylablePanelLib[a],c.assign(t.getPickerProps(),{className:s}))},t}return _inherits(n,l.Component),_createClass(n,[{key:"render",value:function(){return p.call(this)}}]),n}();e.displayName="StylableEditorPanel",e.propTypes=c.assign({panelName:n.string,onClose:n.func,siteVarsDriver:n.object.isRequired,stylablePanelLib:n.object.isRequired,top:n.string,left:n.string},i),e.defaultProps={top:"400px",left:"500px"};var t=function(e,t,n){return n.stylableEditor};return c.flow(m({stylablePanelLib:"stylable-panel"}),u(d,void 0,function(e){return{siteVarsDriver:e(t).stylableDriver.getSiteVarsDriver(h)}}))(e)}}),define("panels/toolPanels/stylableEditor/stylableEditorPickerPanelProps",["prop-types","lodash"],function(e,t){"use strict";var n={siteVarsDriver:e.object.isRequired,panelHost:e.object,title:e.string};return{FillPickerProps:t.assign(n,{value:e.string,tab:e.number,border:e.bool,onChange:e.func}),ColorPickerProps:t.assign(n,{currentColor:e.string,onHover:e.func,onChange:e.func,onReset:e.func}),BoxShadowPickerProps:t.assign(n,{value:e.string,onChange:e.func.isRequired})}}),define("panels/toolPanels/stylableEditor/stylableEditorCSSPanel.rt",["react","lodash","panels/frames/toolPanelFrame","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement(n,{panelName:this.props.panelName,headerTitle:this.getTitle(),contentStyle:this.getFrameStyle(),contentWrapperClass:"stylable-editor-panel stylable-editor-css-panel-wrapper",contentClass:"stylable-editor-panel-content-wrapper",lightHeader:!0},e.createElement(a.TextInputMultiline,{className:"stylable-editor-css-panel-input",autoSelect:!1,selectOnFocus:!1,value:this.state.css,onChange:function(e){this.handleOnChange(e)}.bind(this)}))}}),define("panels/toolPanels/stylableEditor/stylableEditorCSSPanel",["react","prop-types","lodash","panels/toolPanels/stylableEditor/stylableEditorCSSPanel.rt"],function(t,e,a,s){"use strict";var n=[{description:"Block open and declaration-end indentation",pattern:/([\{;])\s*([^\s\}])/g,replacement:"$1\n    $2"},{description:"Block close",pattern:/\} *(\S)/g,replacement:"\n}\n$1"},{description:"Final block close",pattern:/[^\n]\}$/g,replacement:"\n}"},{description:"Trim right",pattern:/\s+\n/g,replacement:"\n"}],i=a.flow(n.map(function(e){var t=e.pattern,n=e.replacement;return function(e){return e.replace(t,n)}})),o=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.getTitle=function(){return"CSS Panel"},t.getFrameStyle=function(){return a.defaults({width:500,height:500},a.pick(t.props,["top","left"]))},t.handleOnChange=function(e){t.setState({css:e}),t.props.onChange(e)},t.state={css:i(t.props.value)},t}return _inherits(n,t.Component),_createClass(n,[{key:"render",value:function(){return s.call(this)}}]),n}();return o.displayName="StylableEditorCSSPanel",o.propTypes={value:e.string.isRequired,onChange:e.func.isRequired,top:e.string,left:e.string},o.defaultProps={top:"400px",left:"500px"},o}),define("panels/toolPanels/stylableEditor/stylableEditor",["panels/toolPanels/stylableEditor/stylableEditorPanelFactory","panels/toolPanels/stylableEditor/stylableEditorPickerPanelProps","panels/toolPanels/stylableEditor/stylableEditorCSSPanel"],function(e,t,n){"use strict";var a=t.FillPickerProps,s=t.ColorPickerProps,i=t.BoxShadowPickerProps;return{fillPickerPanel:e("FillPicker","stylable-editor-fill-picker",a,{width:210,height:488}),colorPickerPanel:e("ColorPicker","stylable-editor-color-picker",s,{width:210,height:420}),boxShadowPickerPanel:e("SingleShadowInput","stylable-editor-box-shadow-picker",i,{width:210,height:568},"stylable-editor-box-shadow-picker-panel-content-wrapper"),textShadowPickerPanel:e("TextShadowLayerInput","stylable-editor-box-shadow-picker",i,{width:210,height:418},"stylable-editor-box-shadow-picker-panel-content-wrapper"),cssPanel:n}}),define("panels/toolPanels/a11yAttributePanel/addA11yAttribute.rt",["react","lodash","baseUILib","util","santa-editor-symbols","panels/frames/toolPanelFrame"],function(e,t,n,a,s,i){"use strict";return function(){return e.createElement(i,{panelName:this.props.panelName,headerTitle:this.getHeaderTitle(),contentStyle:t.pick(this.props,["top","left"]),className:"add-a11y-attribute-panel",lightHeader:!0,automationId:"addA11yAttributePanel"},e.createElement("div",{className:"a11y-attribute-panel-container"},e.createElement(n.Divider,{long:!0}),0<this.getAvailableA11yAttributes().length?e.createElement(n.Composites.DropDownLabeled,{key:"593"},e.createElement(n.TextLabel,{value:"accessibility_components_addAttribute_chooseAttribute_label"}),e.createElement(n.DropDown,{value:this.state.attributeType,options:this.getAvailableA11yAttributes(),onChange:this.onAttributeTypeChanged,placeholder:"accessibility_components_addAttribute_chooseAttribute_placeholder"})):null,e.createElement(n.Divider,{long:!0}),this.isTextInput()?[e.createElement(n.Composites.TextInputLabeled,{key:"dataKey64"},e.createElement(n.TextLabel,{value:this.attributeTypeToTranslationKey(this.state.attributeType),automationId:"attributeLabel"}),e.createElement(n.TextInput,{value:this.state.attributeValue,onChange:this.onAttributeValueChanged,placeholder:"accessibility_components_addAttribute_enterArialabel_placeholder",automationId:"textInputAttribute"})),e.createElement(n.Divider,{long:!0,key:"11752"})]:null,this.isDropDown()?[e.createElement(n.Composites.DropDownLabeled,{key:"18891"},e.createElement(n.TextLabel,{value:this.attributeTypeToTranslationKey(this.state.attributeType),automationId:"attributeLabel"}),e.createElement(n.DropDown,{value:this.state.attributeValue,shouldTranslate:!1,options:this.getA11yValuesOptions(this.state.attributeType),onChange:this.onAttributeValueChanged,placeholder:a.translate("accessibility_components_addAttribute_dropdown_placeholder"),automationId:"dropDownAttribute"})),e.createElement(n.Divider,{long:!0,key:"18893"})]:null,e.createElement(n.Composites.ButtonLargeFixedBottom,{},e.createElement(n.Button,{className:"btn-md",automationId:"a11yAttributePanelMainButton",disabled:this.state.isButtonDisabled,onClick:this.addAttribute},"\n              ",this.getSaveButtonText(),"\n            "))))}}),define("panels/toolPanels/a11yAttributePanel/addA11yAttribute",["create-react-class","lodash","util","stateManagement","prop-types","coreBi","panels/toolPanels/a11yAttributePanel/addA11yAttribute.rt"],function(e,u,a,o,t,r,n){"use strict";var s=a.hoc,i=s.connect,l=s.STORES.EDITOR_API,c=o.editorPlugins.panels.actions.closePanelByNameAction,p=e({displayName:"addA11yAttribute",propTypes:{top:t.string,left:t.string,a11ySchema:t.object.isRequired},getInitialState:function(){var e=this.props.initialValues,t=e||{};return{isButtonDisabled:!e,attributeType:t.attributeType,attributeValue:t.attributeValue}},isEditMode:function(){return!!this.props.initialValues},getHeaderTitle:function(){var e=this.isEditMode()?"accessibility_components_editAttribute_header":"accessibility_components_addAttribute_header";return a.translate(e)},getSaveButtonText:function(){var e=this.isEditMode()?"accessibility_components_editAttribute_saveButton":"accessibility_components_addAttribute_addButton";return a.translate(e)},attributeTypeToTranslationKey:function(e){switch(e){case"label":return"accessibility_components_addAttribute_enterArialabel_label";case"level":return"accessibility_components_addAttribute_level_label";default:return"accessibility_components_addAttribute_attributeValue_label"}},getAvailableA11yAttributes:function(){var e=this.props.a11ySchema.properties,n=u.get(this.props,"compData.a11y",{}),t=u.pickBy(e,function(e,t){return u.isUndefined(n[t])});return this.isEditMode()&&(t[this.state.attributeType]=e[this.state.attributeType]),u.map(t,function(e,t){return{label:a.a11yUtils.getAttributeTypeTranslations()[t],value:t}})},isTextInput:function(){var e=this.state.attributeType;if(e){var t=this.props.a11ySchema.properties[e];return!t.enum&&"string"===t.type}},isDropDown:function(){var e=this.state.attributeType;if(e){var t=this.props.a11ySchema.properties[e];return t.enum||"boolean"===t.type||"number"===t.type}},getA11yValuesOptions:function(e){var t=this.props.a11ySchema.properties,n=t[e],a=void 0;switch(n.type){case"number":a=u.range(n.minimum,n.maximum+1);break;case"boolean":a=[!0,!1];break;default:a=t[e].enum}return a.map(function(e){return{label:""+e,value:e}})},onAttributeTypeChanged:function(e){this.setState({attributeType:e,attributeValue:""})},onAttributeValueChanged:function(e){this.setState({attributeValue:e,isButtonDisabled:0===e.length})},addAttribute:function(){var e,t=this.props,n=t.updateData,a=t.selectedComponentType,s=this.state,i=s.attributeValue,o=s.attributeType,r=this.props.a11ySchema,l=u.keys(r.properties),c=u.pick(u.get(this.props,["compData","a11y"],{}),l);this.isEditMode()&&(c=u.omit(c,[this.props.initialValues.attributeType]));var p=u.assign(c,(_defineProperty(e={},o,i),_defineProperty(e,"type",r.type),e));this.props.reportPropertySavedBI(a,o,i),n("a11y",p),this.close()},close:function(){this.props.closePanel()},render:n});return u.flow(i(l,function(e,t){var n=e.dsRead,a=t.selectedComponents;return{a11ySchema:n.components.getA11ySchema(a[0]),siteId:n.generalInfo.getSiteId()}},function(s,e){var i=e.siteId;return{closePanel:function(){return s(c("panels.toolPanels.addA11yAttribute"))},reportPropertySavedBI:function(e,t,n){var a={site_id:i,componentName:e,aria_prop:t,prop_token:n};s(o.bi.actions.event(r.events.a11ySettings.addA11yAttribute,a))}}}),o.editorPlugins.components.hoc.compPanel)(p)}),define("panels/toolPanels/toolPanels",["panels/toolPanels/pagesSelector/pagesSelectorPanel","panels/toolPanels/exampleToolPanel","panels/toolPanels/linkPanel/linkPanel","panels/toolPanels/colorPicker/colorPicker","panels/toolPanels/iconPicker/iconPickerPanel","panels/toolPanels/languageSupport/languageSupport","panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel","panels/toolPanels/fontsManager/fontsUploadPanel","panels/toolPanels/fontsManager/deleteFontMsg","panels/toolPanels/fontsManager/cancelFontUploadMsg","panels/toolPanels/grid/gridAddColumnPanel","panels/toolPanels/customSignupSettings/customSignupSettingsPanel","panels/toolPanels/rolesManager/rolesManager","panels/toolPanels/layers/layersPanel","panels/toolPanels/imageMaskPanel/imageCropSVGPanel","panels/toolPanels/apiDefinitionEvent/apiDefinitionEvent","panels/toolPanels/apiDefinitionProperty/apiDefinitionProperty","panels/toolPanels/stylableEditor/stylableEditor","panels/toolPanels/a11yAttributePanel/addA11yAttribute"],function(e,t,n,a,s,i,o,r,l,c,p,u,d,m,h,g,f,P,_){"use strict";return{pagesSelectorPanel:e,exampleTool:t,linkPanel:n,languageSupport:i,colorPicker:a,iconPickerPanel:s,mobileActionBarSubPanel:o,fontsUploadPanel:r,deleteFontMsg:l,cancelFontUploadMsg:c,gridAddColumnPanel:p,customSignupSettingsPanel:u,rolesManagerPanel:d,layersPanel:m,imageCropSVGPanel:h,apiDefinitionEvent:g,apiDefinitionProperty:f,stylableEditor:P,addA11yAttribute:_}}),define("panels/commonControls/linkTo/linkToMixin",["lodash","core","baseUI","util"],function(e,t,n,a){"use strict";return{mixins:[n.inputMixin,t.mixins.editorAPIMixin],ValidationStatus:{NONE:"none",SUCCESS:"success",ERROR:"error"},getInitialState:function(){return{validationStatus:this.ValidationStatus.NONE}},componentDidMount:function(){this.mounted=!0},componentWillUnmount:function(){this.mounted=!1},openLinkDialogFromPanel:function(){this.openLinkDialog(!0)},openLinkDialog:function(e){this.getEditorAPI().openLinkPanel({link:a.valueLink.getValueFromProps(this.props),visibleSections:this.props.visibleSections,callback:this.linkUpdated},!e)},linkUpdated:function(e){this.setState({validationStatus:this.ValidationStatus.SUCCESS}),a.valueLink.callOnChangeIfExists(this.props,e),window.setTimeout(function(){this.mounted&&this.setState({validationStatus:this.ValidationStatus.NONE})}.bind(this),1e3)}}}),define("panels/commonControls/linkTo/linkTo.rt",["react","lodash","baseUI","experiment"],function(e,t,n,a){"use strict";return function(){return e.createElement(n.labelWithCircleButton,{key:"labelWithCircleButton",className:"input-link-to",isDisabled:this.isDisabled(),label:this.props.label,displayedValue:this.getTranslatedLink(),onClick:this.openLinkDialogFromPanel,buttonIcon:"linkBtnThin",showButton:this.shouldShowButton(),showSuccessSymbol:this.shouldShowSuccessSymbol(),infoIconText:this.props.infoText,infoIconTitle:this.props.infoTitle})}}),define("panels/commonControls/linkTo/linkTo",["create-react-class","prop-types","lodash","util","panels/commonControls/linkTo/linkToMixin","panels/commonControls/linkTo/linkTo.rt"],function(e,t,n,a,s,i){"use strict";return e({displayName:"linkTo",mixins:[s],propTypes:{label:t.string,placeholder:t.string,showButton:t.bool,infoText:t.string,infoTitle:t.string},getDefaultProps:function(){return{label:"",placeholder:"Link_To_Control_Label_Placeholder",showButton:!0}},shouldShowButton:function(){return this.props.showButton&&this.state.validationStatus===this.ValidationStatus.NONE},shouldShowSuccessSymbol:function(){return this.state.validationStatus===this.ValidationStatus.SUCCESS},getTranslatedLink:function(){var e=a.link.getLinkValueAsString(this.getEditorAPI(),a.valueLink.getValueFromProps(this.props));return e=e||a.translate(this.props.placeholder)},render:i})}),define("panels/commonControls/linkTo/linkToButton.rt",["react","lodash","baseUI"],function(a,s,i){"use strict";return function(){return a.createElement(i.button,(e={icon:"link",className:"link-to-button",onClick:this.openLinkDialog},t=this.filteredProps(),n=s.assign({},e,t),e.hasOwnProperty("style")&&(n.style=s.defaults(n.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(n.className=t.className+" "+e.className),n));var e,t,n}}),define("panels/commonControls/linkTo/linkToButton",["create-react-class","lodash","panels/commonControls/linkTo/linkToMixin","panels/commonControls/linkTo/linkToButton.rt"],function(e,t,n,a){"use strict";return e({displayName:"linkToButton",mixins:[n],render:a})}),define("panels/frames/chatPanelFrame.rt",["react","lodash","baseUILib","panels/frames/panelCloseOrigin"],function(e,t,n,a){"use strict";return function(){var t=this;return e.createElement("div",{className:"chat-panel-frame",ref:function(e){t.rootElement=e},style:this.getVisibility()},e.createElement(n.PanelHeader,{onMouseDown:function(e){this.startDrag(e,this.props.dragLimits)}.bind(this),className:"dragger dark chat-panel-frame-drag-handle",onClose:this.onClose,noHelpBtn:!0}),"\n    ",this.props.children,"\n")}}),define("panels/frames/chatPanelFrame",["lodash","create-react-class","prop-types","util","constants","stateManagement","coreBi","panels/frames/chatPanelFrame.rt"],function(s,e,t,n,a,i,o,r){"use strict";var l=i.domMeasurements.selectors.getViewPort,c=a.LIVE_CHAT.WIDGET_ID,p=i.panels.selectors.selectOpenPanels,u=o.events,d={current_platform:"Editor",lang:"en",module_name:"CHAT",source_name:"1_"+c},m=e({displayName:a.PANEL_TYPES.CHAT,mixins:[n.draggableMixin],PropTypes:{marginTop:t.number.isRequired,panelName:t.string.isRequired,openMethod:t.string,dragLimits:t.object.isRequired,onClose:t.func,shouldSendBi:t.bool,sendBi:t.func.isRequired},getInitialState:function(){return this.props.shouldSendBi&&this.props.sendBi(u.liveChat.open_widget,s.defaults({open_method:this.props.openMethod,referral_url:window.location.href},d)),{}},componentDidMount:function(){this.moveToInitialPosition()},componentWillReceiveProps:function(e){!this.props.isHidden&&e.isHidden&&this.moveToInitialPosition()},moveToInitialPosition:function(){var e=this.rootElement;e.style.top="",e.style.left="",e.style.right="30px",e.style.top=this.props.marginTop+30+"px"},onClose:function(){s.invoke(this.props,"onClose"),this.props.sendBi(u.liveChat.close_widget,s.defaults({close_method:"click",referral_url:window.location.href},d)),this.props.setPanelType(this.props.panelName,a.PANEL_TYPES.CHAT,!0,!0,!0)},getVisibility:function(){return{visibility:this.props.isHidden?"hidden":""}},render:r}),h=["panels.focusPanels.newUserIntroVideoPanel","panels.focusPanels.newEditorWelcomeScreenPanel"];return s.flowRight(n.hoc.connect(n.hoc.STORES.EDITOR_API,function(e){var t=e.state,n=e.editorAPI,a=l(t);return{dragLimits:{y:[a&&a.minY||n.editorConfig.topBarHeight]},marginTop:n.editorConfig.topBarHeight,isHidden:s.get(s.find(n.panelManager.getOpenPanels(),{name:"panels.chatPanel"}),"isHidden",!1)}},function(n){return{sendBi:function(e,t){return n(i.editorPlugins.bi.actions.event(e,t))}}}),n.hoc.withConditionalRender(n.hoc.STORES.STATE_ONLY,function(e){var t=e.state;return s(t).thru(p).map("name").intersection(h).isEmpty()}),i.editorPlugins.panels.hoc.panelFrame(a.PANEL_TYPES.CHAT))(m)}),define("panels/chatPanel/chatPanel.rt",["react","lodash","baseUILib","util","panels/frames/chatPanelFrame"],function(e,t,n,a,s){"use strict";return function(){return e.createElement(s,{isSingleInstance:!0,closeWithUserIntent:!0,onClose:this.onClose,openMethod:this.props.openMethod,shouldSendBi:this.props.shouldSendBi,panelName:"panels.chatPanel"},e.createElement(a.chatManager.ChatView,{}))}}),define("panels/chatPanel/chatPanel",["create-react-class","prop-types","lodash","constants","util","stateManagement","panels/chatPanel/chatPanel.rt"],function(e,t,n,a,s,i,o){"use strict";var r=i.userPreferences.selectors.getSessionUserPreferences,l=i.userPreferences.actions.setSessionUserPreferences,c=a.ROOT_COMPS.TOPBAR.DROP_PANELS.CUSTOM.BACK_TO_CHAT,p=e({displayName:"chatPanel",PropTypes:{chatTooltipDisplayCounter:t.number.isRequired,shouldSendBi:t.bool,openMethod:t.string,updateChatTooltipDisplayCounter:t.func.isRequired,openChatTooltip:t.func.isRequired,closeChatTooltip:t.func.isRequired},onClose:function(){this.props.chatTooltipDisplayCounter<2&&(this.props.openChatTooltip(),window.setTimeout(this.props.closeChatTooltip,1e4),this.props.updateChatTooltipDisplayCounter(this.props.chatTooltipDisplayCounter+1))},render:o}),u=function(e,t,n){return n.editorAPI};return n.flowRight(s.hoc.connect(s.hoc.STORES.EDITOR_API,function(e){var t=e.state;return{chatTooltipDisplayCounter:r("chatTooltipDisplayCounter")(t)||0}},function(t){var e=t(u);return{updateChatTooltipDisplayCounter:function(e){return t(l("chatTooltipDisplayCounter",e))},openChatTooltip:function(){return e.topBarMenuBar.openDropDown(c)},closeChatTooltip:e.topBarMenuBar.closeDropDown.bind(e,c)}}))(p)}),define("panels",["panels/panelManager/panelManager","panels/frames/frames","panels/mixins/mixins","panels/helpPanels/helpPanels","panels/errorPages/errorPagesPanels","panels/focusPanels/focusPanels","panels/messagePanels/messagePanels","panels/toolPanels/toolPanels","panels/commonControls/linkTo/linkTo","panels/commonControls/linkTo/linkToButton","panels/commonControls/linkTo/linkToMixin","panels/chatPanel/chatPanel"],function(e,t,n,a,s,i,o,r,l,c,p,u){"use strict";return{PanelManager:e,frames:t,mixins:n,helpPanels:a,errorPages:s,focusPanels:i,messagePanels:o,toolPanels:r,commonControls:{linkTo:l,linkToButton:c},linkToMixin:p,chatPanel:u}});
//# sourceMappingURL=panels.min.js.map