!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("videoMakerOpener",[],e):"object"==typeof exports?exports.videoMakerOpener=e():t.videoMakerOpener=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="https://static.parastorage.com/services/video-maker-opener/1.112.0/",n(n.s=38)}([function(t,e,n){!function(t){"use strict";function e(t,e){return void 0===e&&(e=1),null==t}function n(t){throw void 0===t&&(t=1),new Error("Argument "+t+" is empty.")}function r(t){throw void 0===t&&(t=1),new Error("Argument "+t+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function o(t){return"string"!=typeof t&&"symbol"!=typeof t}function i(t){throw void 0===t&&(t=1),new Error("Argument "+t+" is invalid, it should be an action type of type: string | symbol")}function u(t,e){if(null==t)throw new Error("Argument contains array with empty element at index "+e);if("string"!=typeof t&&"symbol"!=typeof t)throw new Error("Argument contains array with invalid element at index "+e+", it should be of type: string | symbol")}function a(t,e){if(null==t)throw new Error("Argument contains array with empty element at index "+e);if(null==t.getType)throw new Error("Argument contains array with invalid element at index "+e+', it should be an action-creator instance from "typesafe-actions"')}function s(t,i,u,a){return e(t)&&n(1),o(t)&&r(1),{type:t,payload:i,meta:u,error:a}}function c(t,r){e(t)&&n(1),o(t)&&i(1);var u=null!=r?r(t):function(){return{type:t}};return Object.assign(u,{getType:function(){return t},toString:function(){return t}})}t.action=s,t.createAction=function(t,e){var n=null==e?function(){return s(t)}:e(s.bind(null,t));return Object.assign(n,{getType:function(){return t},toString:function(){return t}})},t.createStandardAction=function(t){return e(t)&&n(1),o(t)&&i(1),Object.assign(function(){return c(t,function(t){return function(e,n){return{type:t,payload:e,meta:n}}})},{map:function(e){return c(t,function(t){return function(n,r){return Object.assign(e(n,r),{type:t})}})}})},t.createCustomAction=c,t.createAsyncAction=function(t,e,n){return[t,e,n].forEach(u),Object.assign(function(){return{request:c(t,function(t){return function(e){return{type:t,payload:e}}}),success:c(e,function(t){return function(e){return{type:t,payload:e}}}),failure:c(n,function(t){return function(e){return{type:t,payload:e}}})}})},t.getType=function(t){var o;return e(t)&&n(1),"function"==typeof(o=t)&&"getType"in o||r(1),t.getType()},t.isOfType=function(t,r){e(t)&&n(1);var o=Array.isArray(t)?t:[t];o.forEach(u);var i=function(t){return o.includes(t.type)};return void 0===r?i:i(r)},t.isActionOf=function(t,r){e(t)&&n(1);var o=Array.isArray(t)?t:[t];o.forEach(a);var i=function(t){return o.some(function(e){return t.type===e.getType()})};return void 0===r?i:i(r)},t.createActionDeprecated=function(t,e){var n;if(null!=e){if("function"!=typeof e)throw new Error("second argument is not a function");n=e}else n=function(){return{type:t}};if(null==t)throw new Error("first argument is missing");if("string"!=typeof t&&"symbol"!=typeof t)throw new Error("first argument should be type of: string | symbol");return n},Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHost=function(t){r=t},e.getHost=function(){return r},e.isWebWorker=function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope},e.requestWindow=function(t){if("undefined"!=typeof window&&window)try{return window.top===window.self?t?t(window):window:null}catch(t){return null}return null};var r="frog.wix.com"},function(t,e){},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.now=function(){return"undefined"!=typeof performance&&performance&&performance.now?performance.now():-1},e.getDesktopSize=function(t){var e=t.screen&&t.screen.width||0,n=t.screen&&t.screen.height||0;return e+"x"+n},e.getWindowSize=function(t){var e=0,n=0;t.innerWidth?(e=t.innerWidth,n=t.innerHeight):t.document&&(t.document.documentElement&&t.document.documentElement.clientWidth?(e=t.document.documentElement.clientWidth,n=t.document.documentElement.clientHeight):t.document.body&&t.document.body.clientWidth&&(e=t.document.body.clientWidth,n=t.document.body.clientHeight));return e+"x"+n},e.sendBeacon=function(t){if("undefined"==typeof navigator||!navigator||!navigator.sendBeacon)return!1;return navigator.sendBeacon(t)},e.readCookie=function(t){if("undefined"==typeof document)return null;for(var e=document.cookie.split(";"),n=0;n<e.length;n++){for(var o=e[n].split("="),i=r(o,2),u=i[0],a=i[1];" "===u[0];)u=u.substr(1);if(u===t)return a}return""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(34);e.Mandatory=r.Mandatory;var o=n(35);e.Quality=o.Quality;var i=n(36);e.VideoScripts=i.VideoScripts;var u=n(37);e.Orientations=u.Orientations},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCookieParams=function(t){return Object.keys(t).reduce(function(e,n){var o=t[n],i=o.name,u=o.transform,a=void 0===u?function(t){return t}:u,s=a((0,r.readCookie)(i));return s&&(e[n]=s),e},{})},e.buildUrl=function(t,e){var n=t.host,u=t.endpoint,a=void 0===u?"":u,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=n||(0,o.getHost)(),a=s.endpoint||a,e._=""+(new Date).getTime()+i++,e.ms=Math.round((0,r.now)());var c="//"+n+"/"+a;return Object.keys(e).reduce(function(t,n){return function(t,e,n){var r=-1===t.indexOf("?")?"?":"&";return""+t+r+encodeURIComponent(e)+"="+encodeURIComponent(n)}(t,n,e[n])},c)},e.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})};var r=n(5),o=n(2),i=0},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.name=n.constructor.name,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),e}();t.exports.defined=function(t,e){if(void 0===t)throw new o(e)},t.exports.object=function(t,e){if(void 0!==t&&("object"!==(void 0===t?"undefined":r(t))||Array.isArray(t)||null===t))throw new o(e)},t.exports.ok=function(t,e){if(!t)throw new o(e)},t.exports.AssertionError=o},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(9),i=n(27),u=i.mapValues,a=i.filterValues,s=n(28),c=n(29),f=n(30),l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._publishers=e.publishers,this._validators=e.validators||[],this._defaults=e.defaults,this._events=e.events||{},this._context=n||{},this._defaultValueTimeout=e.defaultValueTimeout||5e3,this._defaultContinueOnFail=e.defaultContinueOnFail||!1,this._onPublisherFailHandler=e.onPublisherFailHandler||t._defaultPublisherFailHandler}return r(t,[{key:"log",value:function(t,e,n){var r=this;o.defined(t,"Event object or event key must be provided.");var i=this._extractEventAndContext(t,e,n),s=i.event,c=i.context,f=void 0!==c.useBatch?c.useBatch:this._context.useBatch;if(f){var l=this._initBuffer(f),d=a(this._defaults,function(t){return"function"==typeof t}),p=u(d,function(t){return t()});return l.feed(Object.assign({},s,p))}return this._getDefaults().then(function(t){var e=Object.assign({},t,s);if(!(0===r._validators.length||r._validators.some(function(t){return t.match(e)&&(t.execute(e)||!0)})))throw new Error("No validator accepted the event. Source: "+e.src+" Evid: "+(e.evid||e.evtId));return r._send(e,c)})}},{key:"_send",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.all(this._publishers.map(function(r){var o=Object.assign({},t);return Promise.resolve().then(function(){return r(o,Object.assign({},e._context,n))}).catch(function(t){return e._onPublisherFailHandler(t,{publisherName:r.name})})})).then(function(){})}},{key:"_extractEventAndContext",value:function(t,e,n){var r=void 0,i={};if("string"!=typeof t)r=t,i=e||i;else{if(!(r=this._events[t]))throw new o.AssertionError("Event with key '"+t+"' not found in event map.");e&&(r=Object.assign({},r,e),i=n||i)}return{event:r,context:i}}},{key:"_initBuffer",value:function(t){var e=this,n=!0===t?300:t;return this._buffer||(this._buffer=new f(n).onFlush(function(n){var r=a(e._defaults,function(t){return"function"!=typeof t});return n.g=r,e._send(n,{useBatch:t})}))}},{key:"_handleDefaultsError",value:function(t){return this._defaultContinueOnFail?(c.error(t),null):Promise.reject(t)}},{key:"_getDefaults",value:function(){var t=this;if(!this._defaults)return Promise.resolve({});var e=u(this._defaults,function(e,n){if("function"==typeof e)try{e=e()}catch(e){return t._handleDefaultsError(e)}return e&&"function"!=typeof e.then?e:s.timedPromise(e,{message:"Cannot get default value '"+n+" for BI Event'",timeout:t._defaultValueTimeout}).catch(function(e){return t._handleDefaultsError(e)})});return s.allAsObject(e)}}],[{key:"_defaultPublisherFailHandler",value:function(t,e){return e.publisherName}}]),t}();t.exports=l},function(t,e){},function(t,e){},function(t,e,n){var r=n(18);"string"==typeof r&&(r=[[t.i,r,""]]);var o={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(20)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHost=e.factory=void 0;var r=i(n(22)),o=i(n(24));function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var u=e.factory=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t.trackSession||void 0===t.trackSession)&&r.track(o.factory),o.factory(t)};e.setHost=o.setHost;e.default={factory:u,setHost:o.setHost}},,,,function(t,e,n){(e=t.exports=n(19)(!1)).push([t.i,"._2Vrzi{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10100;border:none;overflow:hidden}\n",""]),e.locals={frame:"_2Vrzi"}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(u=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(u))))+" */"),i=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(i).concat([o]).join("\n")}var u;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(o=0;o<t.length;o++){var u=t[o];null!=u[0]&&r[u[0]]||(n&&!u[2]?u[2]=n:n&&(u[2]="("+u[2]+") and ("+n+")"),e.push(u))}},e}},function(t,e,n){var r,o,i={},u=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),a=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),s=null,c=0,f=[],l=n(21);function d(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var u=0;u<o.parts.length;u++)o.parts[u](r.parts[u]);for(;u<r.parts.length;u++)o.parts.push(g(r.parts[u],e))}else{var a=[];for(u=0;u<r.parts.length;u++)a.push(g(r.parts[u],e));i[r.id]={id:r.id,refs:1,parts:a}}}}function p(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],u=e.base?i[0]+e.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};r[u]?r[u].parts.push(a):n.push(r[u]={id:u,parts:[a]})}return n}function h(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=f[f.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),f.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=a(t.insertAt.before,n);n.insertBefore(e,o)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=f.indexOf(t);e>=0&&f.splice(e,1)}function v(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return m(e,t.attrs),h(t,e),e}function m(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=i}if(e.singleton){var u=c++;n=s||(s=v(e)),r=_.bind(null,n,u,!1),o=_.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",m(e,t.attrs),h(t,e),e}(e),r=function(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=l(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var u=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(u),a&&URL.revokeObjectURL(a)}.bind(null,n,e),o=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){y(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=u()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=p(t,e);return d(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var u=n[o];(a=i[u.id]).refs--,r.push(a)}t&&d(p(t,e),e);for(o=0;o<r.length;o++){var a;if(0===(a=r[o]).refs){for(var s=0;s<a.parts.length;s++)a.parts[s]();delete i[a.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),u=t.childNodes;u[e]&&t.removeChild(u[e]),u.length?t.insertBefore(i,u[e]):t.appendChild(i)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.track=function(t){!(0,i.isWebWorker)()&&(0,i.requestWindow)(function(t){return!t[a]})&&((0,i.requestWindow)(function(t){return t[a]=!0}),function(t){var e=function(t){return t({endpoint:s,useBeacon:!0}).setDefaults({src:c,evid:f,vsi:(0,r.guid)()}).logger()}(t),n=1;(0,o.listen)(function(t,r){var o=(0,i.requestWindow)(function(t){return{sr:(0,u.getDesktopSize)(t),wr:(0,u.getWindowSize)(t)}}),a=o.sr,s=o.wr;e.log({from:t,to:r,fis:n,sr:a,wr:s}),n=0})}(t))};var r=n(8),o=n(23),i=n(2),u=n(5),a="__isTrackingBiBrowsingSession__",s="p",c=19,f=3},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.listen=function(t){(0,r.requestWindow)(function(e){var n=e.document.referrer;[o,i,u].forEach(function(e){return e(function(e){t(n,e),n=e})})})};var r=n(2);function o(t){setTimeout(function(){return(0,r.requestWindow)(function(e){return t(e.location.href)})})}function i(t){(0,r.requestWindow)(function(e){var n=e.history;return["pushState","replaceState"].forEach(function(e){!function(t,e,n){if(t&&t[e]){var r=t[e];t[e]=function(){return n.apply(null,arguments),r.apply(t,arguments)}}}(n,e,function(e,n,r){return t(r)})})})}function u(t){(0,r.requestWindow)(function(e){return e.addEventListener("popstate",function(){return t(e.location.href)})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHost=e.factory=void 0;var r=n(25),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),i=n(32);e.factory=function(t){return(new r.BiLoggerFactory).addPublisher((0,i.resolvePublisher)(t))},e.setHost=o.setHost},function(t,e,n){"use strict";var r=n(26),o=n(10);t.exports.BiLoggerFactory=r,t.exports.BiLogger=o,t.exports.factory=function(){return new r}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(9),u=n(10),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._publishers=[],this._validators=[],this._defaults={},this._events={}}return o(t,[{key:"addPublisher",value:function(t){return i.defined(t,"Publisher must be provided"),i.ok("function"==typeof t,"Expected a publisher function"),this._publishers.push(t),this}},{key:"addValidator",value:function(t){return i.defined(t,"Validator must be provided"),i.ok("object"===(void 0===t?"undefined":r(t))&&t,"Expected a validator object"),i.ok(t.execute&&t.match,"Provided validator does not match the interface"),this._validators.push(t),this}},{key:"setDefaults",value:function(t){return i.defined(t,"Defaults must be provided"),i.object(t,"Defaults must be an object"),this._defaults=t,this}},{key:"updateDefaults",value:function(t){return i.defined(t,"Defaults must be provided"),i.object(t,"Defaults must be an object"),Object.assign(this._defaults,t),this}},{key:"setEvents",value:function(t){return i.defined(t,"Events must be provided"),i.object(t,"Events must be an object"),this._events=t,this}},{key:"setDefaultValueTimeout",value:function(t){return i.defined(t,"Default Value Timeout must be provided"),this._defaultValueTimeout=t,this}},{key:"setDefaultContinueOnFail",value:function(t){return i.defined(t,"Default Continue On Fail must be provided"),this._defaultContinueOnFail=t,this}},{key:"setPublisherFailHandler",value:function(t){return i.defined(t,"Publisher Fail Handler must be provided"),this._onPublisherFailHandler=t,this}},{key:"logger",value:function(t){return new u({publishers:this._publishers,validators:this._validators,defaults:this._defaults,events:this._events,defaultValueTimeout:this._defaultValueTimeout,defaultContinueOnFail:this._defaultContinueOnFail,onPublisherFailHandler:this._onPublisherFailHandler},t)}}]),t}();t.exports=a},function(t,e,n){"use strict";t.exports.mapValues=function(t,e){return t?Object.keys(t).reduce(function(n,r){return n[r]=e(t[r],r,t),n},{}):{}},t.exports.filterValues=function(t,e){return t?Object.keys(t).reduce(function(n,r){return e(t[r],r,t)&&(n[r]=t[r]),n},{}):{}}},function(t,e,n){"use strict";t.exports.timedPromise=function(t,e){var n=e.message,r=e.timeout,o=new Promise(function(t,e){setTimeout(e,r,n?"Timeout: "+n:"Timeout")});return Promise.race([t,o])},t.exports.allAsObject=function(t){var e=Object.keys(t);return Promise.all(e.map(function(e){return t[e]})).then(function(t){return t.reduce(function(t,n,r){return t[e[r]]=n,t},{})})}},function(t,e,n){"use strict";t.exports={error:function(){var t;console&&console.error&&(t=console).error.apply(t,arguments)}}},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(31),i=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._flushHandler=function(t){return t},this._flushDebounced=o(function(){return n._flush()},e),this._init()}return r(t,[{key:"_init",value:function(){var t=this;this._startTime=Date.now(),this._events=[],this._resolve=null,this._promise=new Promise(function(e){return t._resolve=e})}},{key:"_flush",value:function(){var t=this._events,e=this._resolve,n=this._startTime;this._init(),this._flushHandler(function(t,e){return{dt:Date.now()-e,e:t}}(t,n)).then(e)}},{key:"onFlush",value:function(t){return this._flushHandler=t,this}},{key:"feed",value:function(t){return this._events.push(function(t,e){return{dt:Date.now()-e,f:t}}(t,this._startTime)),this._flushDebounced(),this._promise}}]),t}();t.exports=i},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=void 0;return function(){var o=this,i=arguments,u=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(o,i)},e),u&&t.apply(o,i)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.imagePublisher=a,e.beaconPublisher=s,e.fetchPublisher=c,e.resolvePublisher=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=void 0;e=(0,i.isWebWorker)()?c:void 0===t.useBeacon||t.useBeacon?s:a;return e=e(t),function(t,n){return e(r({},t,(0,o.getCookieParams)({_client_id:{name:"_wixCIDX"},_uuid:{name:"_wixUIDX",transform:function(t){return"string"==typeof t&&t.split("|")[1]}}})),n)}};var o=n(8),i=n(2),u=n(33);function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,o.buildUrl)(t,e,n);return(0,u.pixelTransport)(r,n.image)}}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,o.buildUrl)(t,e,n);return(0,u.beaconTransport)(r).catch(function(){return(0,u.pixelTransport)(r,n.image)})}}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,o.buildUrl)(t,e,n);return(0,u.fetchTransport)(r)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.beaconTransport=function(t){return new Promise(function(e,n){return(0,r.sendBeacon)(t)?e():n(new Error("Transport Error: Cannot send bi using beacons"))})},e.pixelTransport=function(t,e){return new Promise(function(n,r){var o=e||new window.Image(0,0);o.onload=function(){return n()},o.onerror=function(){return r(new Error("Transport Error: Cannot send bi using pixelTransport"))},o.src=t})},e.fetchTransport=function(t){return fetch(t,{credentials:"include"}).then(function(t){if(!t.ok)throw Error("Transport Error: Cannot send bi using fetch. Status: "+t.status)})};var r=n(5)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.AsIs="as-is",t.Use="use",t.No="no"}(e.Mandatory||(e.Mandatory={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.SD="sd",t.HQ="hq",t.HD="hd",t.FullHD="fullhd"}(e.Quality||(e.Quality={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.PRODUCT="product",t.GENERAL="general",t.GENERAL_TEMPLATE="general_template"}(e.VideoScripts||(e.VideoScripts={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Landscape="landscape",t.Portrait="portrait",t.Square="square"}(e.Orientations||(e.Orientations={}))},function(t,e,n){"use strict";n.r(e);var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var u,a=function(){function t(){this.queue=[]}return t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.queue.push({type:"log",args:t})},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.queue.push({type:"info",args:t})},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.queue.push({type:"warn",args:t})},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.queue.push({type:"error",args:t})},t.prototype.drain=function(t){this.queue.forEach(function(e){var n=e.type,r=e.args;t[n].apply(t,r)}),this.queue=[]},t.prototype.clean=function(){this.queue=[]},t}(),s=function(){function t(e){var n=this;this.log=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=n.impl).log.apply(t,[n.serviceName+":"].concat(e))},this.info=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=n.impl).info.apply(t,[n.serviceName+":"].concat(e))},this.warn=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=n.impl).warn.apply(t,[n.serviceName+":"].concat(e))},this.error=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=n.impl).error.apply(t,[n.serviceName+":"].concat(e))},this.switchToRealtime=function(){n.impl=console},this.serviceName=e,t.instances.push(this),this.impl=t.queueImpl}return t.switchAllToRealtime=function(){t.queueImpl.drain(console),t.instances.forEach(function(t){return t.switchToRealtime()})},t.cleanQueue=function(){t.queueImpl.clean()},t.instances=[],t.queueImpl=new a,t}(),c=function(){function t(t){void 0===t&&(t=new s("WindowMessenger")),this.logger=t}return t.prototype.destroy=function(){},t.prototype.show=function(){},t.prototype.hide=function(){},t}(),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.create=function(t){var e=window.open(t.src);if(!e)throw new Error("Cannot open window");return e},e.prototype.getOpenerWindow=function(){return window.opener},e}(c),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.create=function(t){return window},e.prototype.getOpenerWindow=function(){return window},e}(c),d=n(13),p=n.n(d),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.create=function(t){var e=t.src,n=t.frameId,r=t.appendTo;if(this.iframe&&this.iframe.src===e){if(!this.iframe.contentWindow)throw new Error("No content window");return this.iframe.contentWindow}if(this.iframe&&this.destroy(),this.iframe=document.createElement("iframe"),this.iframe.allowFullscreen=!0,this.iframe.setAttribute("allow","autoplay; camera; microphone; geolocation; vr"),this.iframe.setAttribute("allowtransparency","true"),n&&(this.iframe.id=n),this.hide(),this.iframe.src=e,this.iframe.className=p.a.frame,this.getAppendTo(r).appendChild(this.iframe),this.logger.log("iFrame created",this.iframe),!this.iframe.contentWindow)throw new Error("No content window");return this.iframe.contentWindow},e.prototype.destroy=function(){this.iframe&&(this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe),this.iframe=void 0,this.logger.log("iFrame killed"))},e.prototype.show=function(){this.iframe&&(this.iframe.style.display="block",this.iframe.contentWindow&&this.iframe.contentWindow.focus())},e.prototype.hide=function(){this.iframe&&(this.iframe.style.display="none")},e.prototype.getOpenerWindow=function(){return window.parent},e.prototype.getAppendTo=function(t){if(t instanceof HTMLElement)return t;var e=document.querySelector(t);if(!e)throw new Error("Cannot find element to appendTo by selector '"+t+"'");return e},e}(c),y=n(1),v=n(0),m={ready:Object(v.createStandardAction)("@@FRAME_API/READY")(),settingsReady:Object(v.createStandardAction)("@@FRAME_API/SETTINGS_READY")(),closeRequest:Object(v.createStandardAction)("@@FRAME_API/CLOSE_REQUEST")()},g={settings:Object(v.createStandardAction)("@@FRAME_API/SETTINGS")(),hidden:Object(v.createStandardAction)("@@FRAME_API/HIDDEN")(),shown:Object(v.createStandardAction)("@@FRAME_API/SHOW")()},b=i({},m,{addToProduct:Object(v.createStandardAction)("VIDEO_MAKER_OPENER/ADD_TO_PRODUCT")(),videoSavedToMediaManager:Object(v.createStandardAction)("VIDEO_MAKER_OPENER/VIDEO_SAVED_TO_MEDIA_MANAGER")()}),w=i({},g,{settings:Object(v.createStandardAction)("@@FRAME_API/SETTINGS")(),addToProductSuccessful:Object(v.createStandardAction)("VIDEO_MAKER_OPENER/ADD_TO_PRODUCT_SUCCESSFUL")(),addToProductFailed:Object(v.createStandardAction)("VIDEO_MAKER_OPENER/ADD_TO_PRODUCT_FAILED")()}),_=n(3),O=n(7);!function(t){t.Product="Product",t.Generic="Generic",t.Edit="Edit"}(u||(u={}));var E,x=n(4),A=function(){function t(t,e){void 0===e&&(e=new s("WindowMessenger")),this.handlerDescriptions=[],this.logger=e,this.targetWindow=t,window.addEventListener("message",this.handleMessage.bind(this),!1)}return t.prototype.setTarget=function(t){this.targetWindow=t},t.prototype.on=function(t,e,n){var r=this;return void 0===n&&(n=!1),this.handlerDescriptions.push({actionCreator:t,handler:e,once:n}),function(){r.off(t,e)}},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.off=function(t,e){this.handlerDescriptions=this.handlerDescriptions.filter(function(n){return!(n.actionCreator===t&&(n.handler===e||!e))})},t.prototype.emit=function(t){if(this.logger.log("postMessage emitted",t),!this.targetWindow)throw new Error("target window should be defined");this.targetWindow.postMessage(t,"*")},t.prototype.offAll=function(){this.handlerDescriptions=[]},t.prototype.handleMessage=function(t){if(t.source===this.targetWindow){var e=this.parseMessageData(t.data);e&&(this.logger.log("postMessage received",e),this.handlerDescriptions.filter(function(t){return Object(v.getType)(t.actionCreator)===e.type}).forEach(this.runObserver(e)))}},t.prototype.runObserver=function(t){var e=this;return function(n){n.handler.call(e,t),n.once&&e.off(n.actionCreator,n.handler)}},t.prototype.parseMessageData=function(t){void 0===t&&(t={});var e=t.type,n=t.payload;if(e&&"string"==typeof e)return{type:e,payload:n}},t}(),P=function(t){function e(){return t.call(this,{incomingActions:w,outgoingActions:b})||this}return o(e,t),e.prototype.kill=function(){t.prototype.offAll.call(this)},e}(function(t){function e(e,n,r){void 0===n&&(n=window.parent),void 0===r&&(r=new s("FrameApi"));var o=t.call(this,void 0,r)||this;o.options=e;var i=new(0,o.constructor.WindowManagerCls)(r);return o.setTarget(i.getOpenerWindow()),o}return o(e,t),e.setDefaultWindowManager=function(t){this.WindowManagerCls=t},e.prototype.waitForSettings=function(t){var e=this;this.on(this.options.incomingActions.settings,function(n){t(n),e.emit(e.options.outgoingActions.settingsReady())}),this.emit(this.options.outgoingActions.ready())},e.WindowManagerCls=h,e}(A)),S=function(){};!function(t){t.Hide="hide",t.Kill="kill"}(E||(E={}));var j=function(t){function e(e){var n=t.call(this,void 0,new s("FrameOpener"))||this;n._readyUnsubscribe=S,n._settingsReadyUnsubscribe=S,n.isReady=!1,n.options=i({appendTo:"body",closeMethod:E.Kill},e);var r=n.constructor.WindowManagerCls;return n.windowManager=e.windowManager||new r(n.logger),n}return o(e,t),e.setDefaultWindowManager=function(t){this.WindowManagerCls=t},e.prototype.open=function(t,e){var n=this,r=(void 0===e?{}:e).displayOnReady,o=void 0===r||r,i=this.getFrameUrl(t),u=this.windowManager.create({src:i,appendTo:this.options.appendTo,frameId:this.options.frameId});return this.setTarget(u),this.once(m.closeRequest,function(){n.close()}),this.sendSettings(t).then(function(){o&&n.windowManager.show()})},e.prototype.close=function(){switch(this.options.closeMethod){case E.Kill:this.kill();break;case E.Hide:this.windowManager.hide(),this.emit(this.options.outgoingActions.hidden());break;default:throw new Error("Unsupported close method '"+this.options.closeMethod+"'")}},e.prototype.kill=function(){this.offAll(),this.isReady=!1,this.windowManager.destroy()},e.prototype.sendSettings=function(t){var e=this;return this._readyUnsubscribe(),this._settingsReadyUnsubscribe(),new Promise(function(n){var r=function(){e.emit(e.options.outgoingActions.settings(t)),e._settingsReadyUnsubscribe=e.once(e.options.incomingActions.settingsReady,function(){return e.logger.log("iFrame settings are applied"),n()})};e.isReady&&r(),e._readyUnsubscribe=e.on(e.options.incomingActions.ready,function(){e.isReady=!0,r()})})},e.prototype.getFrameUrl=function(t){var e=this.options.url;return function(t){var e=document.createElement("a");return e.href=t,e.href}("string"==typeof e?e:e(t))},e.WindowManagerCls=h,e}(A),M=n(14),T=n.n(M).a.factory({endpoint:"video-maker"}).setDefaults({src:84}).logger();function k(){return"s-"+Date.now()+"-"+Math.round(Math.random()*Math.pow(10,10))}var D,C=!1;!function(t){t.New="new",t.Edit="edit"}(D||(D={}));var R,I,F=function(t){function e(e){var n=void 0===e?{}:e,r=n.baseUrl,o=void 0===r?"https://www.wix.com/video-maker-modal/modal":r,i=n.url,u=t.call(this,{incomingActions:b,outgoingActions:w,url:i||function(t){var e=t.debug;return o+(e?"?debug":"")},frameId:"video-maker-modal"})||this;return u.isFirst=!0,u.sessionId=k(),u}return o(e,t),e.setDefaultWindowManager=function(e){t.setDefaultWindowManager.call(this,e)},e.prototype.open=function(e){var n=this;e.instance||C||"undefined"==typeof console||"function"!=typeof console.warn||(C=!0,console.warn("video-maker-opener: instance parameter was not provided to open method. Please refer to docs of VideoMakerOpener and add it")),this.sessionId=k();var r=i({},e,{isFirst:this.isFirst,sessionId:this.sessionId});return this.__sendOpenEvent(e),t.prototype.open.call(this,r).then(function(){n.isFirst=!1})},e.prototype.kill=function(){t.prototype.kill.call(this)},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.on=function(e,n,r){return t.prototype.on.call(this,e,n,r)},e.prototype.off=function(e,n){t.prototype.off.call(this,e,n)},e.prototype.once=function(e,n){return t.prototype.once.call(this,e,n)},e.prototype.setTarget=function(e){t.prototype.setTarget.call(this,e)},e.prototype.getContext=function(t){return t===u.Edit?D.Edit:D.New},e.prototype.__sendOpenEvent=function(t){var e,n,r,o,i,u,a;e={metaSiteId:t.metaSiteId,isFirst:this.isFirst,origin:t.origin,source:t.opener,sessionId:this.sessionId,context:this.getContext(t.scenario)},n=e.isFirst,r=e.metaSiteId,o=e.origin,i=e.sessionId,u=e.source,a=e.context,T.log({evid:200,isFirst:n,msid:r,origin:o,sessionId:i,source:u,context:a})},e}(j);!function(t){t[t.No=0]="No",t[t.ForceOne=1]="ForceOne",t[t.ForceMany=2]="ForceMany"}(R||(R={})),function(t){t.MediaManager="media-manager",t.Playground="playground"}(I||(I={}));var W,U,N=n(6),H=n(11),V=n(12);!function(t){t.PICTURE="picture",t.VIDEO="video"}(W||(W={})),function(t){t.Empty="Empty",t.Basic="Basic"}(U||(U={})),n.d(e,"NewWindowManager",function(){return f}),n.d(e,"StandaloneManager",function(){return l}),n.d(e,"IframeManager",function(){return h}),n.d(e,"BasicGenericScenarioParams",function(){return y.BasicGenericScenarioParams}),n.d(e,"EmptyGenericScenarioParams",function(){return y.EmptyGenericScenarioParams}),n.d(e,"BasicTemplateData",function(){return y.BasicTemplateData}),n.d(e,"GenericScenarioParams",function(){return y.GenericScenarioParams}),n.d(e,"parentIncomingActions",function(){return b}),n.d(e,"childIncomingActions",function(){return w}),n.d(e,"ProductScenarioParams",function(){return _.ProductScenarioParams}),n.d(e,"EditScenarioParams",function(){return O.EditScenarioParams}),n.d(e,"Scenarios",function(){return u}),n.d(e,"ScenarioParams",function(){return x.ScenarioParams}),n.d(e,"ScenarioParamsWithFirst",function(){return x.ScenarioParamsWithFirst}),n.d(e,"VideoMakerFrameApi",function(){return P}),n.d(e,"VideoMakerOpener",function(){return F}),n.d(e,"biContext",function(){return D}),n.d(e,"ForceVariations",function(){return R}),n.d(e,"Opener",function(){return I}),n.d(e,"VideoScripts",function(){return N.VideoScripts}),n.d(e,"Orientations",function(){return N.Orientations}),n.d(e,"Source",function(){return H.Source}),n.d(e,"GenericVideoData",function(){return V.GenericVideoData}),n.d(e,"MediaTypes",function(){return W}),n.d(e,"Templates",function(){return U})}])});
//# sourceMappingURL=videoMakerOpener.bundle.min.js.map