define("mediaPlayer",["lodash","coreUtils","santa-components","componentsCore","skins","santa-core-utils","react","components"],function(e,t,i,n,o,r,s,a){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=908)}({0:function(t,i){t.exports=e},1:function(e,i){e.exports=t},10:function(e,t){e.exports=r},15:function(e,t){e.exports=s},18:function(e,t){e.exports=a},2:function(e,t){e.exports=i},3:function(e,t){e.exports=n},5:function(e,t){e.exports=o},908:function(e,t,i){var n,o;n=[i(0),i(15),i(3),i(1),i(10),i(18),i(2),i(5),i(909)],void 0===(o=function(e,t,i,n,o,r,s,a,p){"use strict";var l=n.mediaConsts,c=r.mediaCommon.mediaLogicMixins.mediaPlayer,u=o.timersMixins.timeoutsMixin,d=s.mixins.inlineContentMixin,m=function(t){if(e.isEmpty(t.borderWidth))return t;var i=parseInt(t.borderWidth,10);return e.assign({},t,{margin:"-"+i+"px"})},h={displayName:"MediaPlayer",mixins:[i.mixins.skinBasedComp,c,u,i.mixins.createChildComponentMixin,d],propTypes:{style:s.santaTypesDefinitions.Component.style.isRequired,compDesign:s.santaTypesDefinitions.Component.compDesign,compProp:s.santaTypesDefinitions.Component.compProp,isMobileDevice:s.santaTypesDefinitions.Device.isMobileDevice,renderParts:s.santaTypesDefinitions.Media.renderParts,layoutContainerClassName:s.santaTypesDefinitions.Layout.layoutContainerClassName,isResponsive:s.santaTypesDefinitions.RendererModel.isResponsive,containerStyle:s.santaTypesDefinitions.MediaPlayerDesign.containerStyle,isMobileView:s.santaTypesDefinitions.isMobileView},statics:{behaviors:r.mediaCommon.mediaBehaviors.mediaPlayer},getInitialState:function(){return this.timedHoverAndAnimationDuration=!1,this.compDesignOverride=void 0,{hover:!1,timedHover:!1}},addPropsToChildren:function(i){var n={allowReplay:e.get(this.props.compProp.playerInteraction,"allowReplay",!0),playerInHoverInteraction:"none"!==this.props.compProp.playerInteraction.rollIn&&!this.isMobile(),playerInHoverState:this.state.hover,playerInTimedHoverState:this.state.timedHover,playerDesignData:this.props.compDesign};return t.Children.map(i,function(e){return t.cloneElement(e,n)})},toggleHover:function(e){var t=this.getMediaState().playbackState===l.playbackTypes.PLAY_ENDED,i=!1===this.props.compProp.playerInteraction.allowReplay&&t,n="mouseleave"!==e.type&&!i;this.setState({hover:n}),n||this.removeTimedHover()},setTimedHover:function(){var e=this;this.state.timedHover||this.setState({timedHover:!0},function(){e.timedHoverAndAnimationDuration=!0}),this.setTimeout(this.removeTimedHover,this.isMobile()?4e3:2e3)},removeTimedHover:function(){var e=this;this.setState({timedHover:!1}),this.setTimeout(function(){e.timedHoverAndAnimationDuration=!1},500)},handleHoverAction:function(e){var t=this;return function(i){t.toggleHover(i),e.forEach(function(e){if(e.action){var t=e.params||[];e.action.apply(e,function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(t))}})}},getAudioHoverInteraction:function(t){var i=e.get(this.props.compProp,["playerAudioInteraction",t]);return{mute:{action:this.mediaVolumeFadeOut,params:[.5]},unmute:{action:this.mediaVolumeFadeIn,params:[.5]}}[i]},getVideoHoverInteraction:function(e){var t=this.props.compProp.playerInteraction[e];return{play:{action:this._playMedia},pause:{action:this.pauseMedia},none:null}[t]},getClickInteraction:function(){var e=this;return{toggle:function(){return e.togglePlayMedia()},play:function(){return e._playMedia({persist:!0})}}[this.props.compProp.playerInteraction.click]},convertHoverToCommandActions:function(){var t=this;return"pause"===this.props.compProp.playerInteraction.rollOut?function(){return t.togglePlayMedia()}:"play"===this.props.compProp.playerInteraction.rollIn?function(){return t._playMedia()}:e.noop},shouldTriggerAction:function(){var e=this.getMediaState().playbackState===l.playbackTypes.IDLE,t=!1===this.props.compDesign.background.mediaRef.hasAudio||this.props.compProp.disableAudio;return this.timedHoverAndAnimationDuration||e||t},getTouchInteraction:function(e){var t=this;return function(i){i.preventDefault(),t.invokeMobileInteraction(i,e)}},getMobileClickInteraction:function(e){var t=this;return function(i){t.invokeMobileInteraction(i,e)}},invokeMobileInteraction:function(e,t){this.setTimedHover(),this.shouldTriggerAction()&&t(),this.toggleHover(e)},isMobile:function(){return this.props.isMobileView||this.props.isMobileDevice},getColntrols:function(){return!!this.props.renderParts.media.video.length?this.getChildrenRenderer({children:this.addPropsToChildren(this.props.children)}):null},getInteractionEvents:function(){if(this.isMobile()){var t=this.getClickInteraction()||this.convertHoverToCommandActions(),i=this.props.isMobileDevice?"onTap":"onClick";return n={},o=i,r=this.getMobileClickInteraction(t),o in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n}var n,o,r,s=[this.getVideoHoverInteraction("rollIn"),this.getAudioHoverInteraction("rollIn")],a=[this.getVideoHoverInteraction("rollOut"),this.getAudioHoverInteraction("rollOut")];return{onMouseMove:this.setTimedHover,onClick:this.getClickInteraction(),onMouseEnter:this.handleHoverAction(e.compact(s)),onMouseLeave:this.handleHoverAction(e.compact(a))}},getSkinProperties:function(){var t=this.getColntrols(),i={"":{style:this.props.style},background:this.createFillLayers({compDesign:this.compDesignOverride||this.props.compDesign,enableVideo:!!t}),container:{style:m(this.props.containerStyle)},inlineContent:e.assign({children:t},this.props.isResponsive&&{className:this.props.layoutContainerClassName,style:{height:"100%",position:"relative",display:"grid",gridTemplateColumns:"1fr",gridTemplateRows:"1fr"}})};return e.assign(i.container,this.getInteractionEvents()),i}};return i.compRegistrar.register("wysiwyg.viewer.components.MediaPlayer",h),a.skinsMap.addBatch(p),h}.apply(t,n))||(e.exports=o)},909:function(e,t,i){var n,o,r;"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(n=function(){"use strict";var e={"wysiwyg.viewer.skins.mediaPlayerSkin":{react:[["div","container",[],{},["div","background",[],{}],["div","inlineContentParent",[],{},["div","inlineContent",[],{}]]]],css:{"% *":"-webkit-tap-highlight-color:rgba(0, 0, 0, 0);","%inlineContentParent":"position:absolute;top:0;right:0;bottom:0;left:0;","%container":"position:absolute;top:0;left:0;width:100%;height:100%;"}}};return e})?n.apply(t,o):n)||(e.exports=r)}})});
//# sourceMappingURL=mediaPlayer.min.js.map