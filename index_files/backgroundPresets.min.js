define("backgroundPresets/components/backgroundPresetSection.rt",["react","lodash","baseUI","util","constants"],function(i,e,a,r,s){"use strict";return function(){return i.createElement("div",{className:"bg-preset-list-section section-wrapper"},i.createElement("div",{className:"section-header"},i.createElement("div",{className:"title-line"},i.createElement("div",{className:"title"},this.props.title),i.createElement(a.infoIcon,{key:"infoIcon",className:"info-icon",text:this.props.infoTooltip}))),i.createElement.apply(this,["ul",{className:"preset-list-section-list columns-"+(this.props.columns||1)},e.map(this.getPresetData(),function(e,t){return i.createElement("li",{className:"preset-list-item",key:"preset"+t,onClick:function(e,t){this.selectPreset(e,"presetBackgrounds",t)}.bind(this,e,t)},i.createElement(a.tooltip,{value:this.getMediaPreviewComp(e),alignment:"right",styleType:s.UI.TOOLTIP.STYLE_TYPE.CONTENT_ONLY,delay:"300",width:"294px",noArrow:!0},i.createElement("div",{className:"preset-list-preset",style:this.getThumbBackdropStyle(e)},i.createElement("div",{className:"preset-list-preset-content",style:this.getThumbStyle(e)}),this.isMediaVideo(e)?i.createElement("div",{style:this.getOverlayStyle(e),className:"preset-list-preset-overlay",key:"preset-list-preset-overlay"}):null,this.isMediaVideo(e)?i.createElement("div",{className:"preset-list-preset-video-controls",key:"bgVideoIndicator"},i.createElement(a.symbol,{name:"bgVideoIndicator"})):null,e.thumbnail&&e.thumbnail.title?i.createElement("div",{key:"preset-title",className:"preset-title"},r.translate(e.thumbnail.title)):null)))}.bind(this))]))}}),define("backgroundPresets/components/mediaPreview.rt",["react","lodash"],function(t,a){"use strict";return function(){function e(e,t){var i=a.assign({},e,t);return e.hasOwnProperty("style")&&(i.style=a.defaults(i.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(i.className=t.className+" "+e.className),i}return t.createElement("div",{className:"media-preview-panel"},t.createElement("div",{className:a({"media-preview-wrapper":!0,hide:this.isMediaVideo()&&!this.state.isPreviewReady,show:this.isMediaVideo()&&this.state.isPreviewReady}).transform(function(e,t,i){t&&e.push(i)},[]).join(" ")},t.createElement("div",e({className:"media-preview-color"},{style:this.getBackgroundColor()})),this.isMediaImage()?t.createElement("div",e({className:"media-preview-image",key:"media-preview-image"},{style:this.getBackgroundStyle(this.getMediaType())})):null,this.isMediaVideo()?t.createElement("div",e({className:"media-preview-video-wrapper",key:"media-preview-video-wrapper"},{style:this.getVideoStyle()}),t.createElement("video",{autoPlay:!0,loop:!0,muted:!0,preload:"none",ref:"videoInstance",className:"media-preview-video"},t.createElement("source",{src:this.getVideoSource("mp4"),type:"video/mp4"}),t.createElement("source",{src:this.getVideoSource("webm"),type:"video/webm"}))):null,t.createElement("div",{className:"media-preview-overlay",style:this.getOverlayStyle()})),t.createElement("div",{className:"media-preview-caption"},t.createElement("span",{className:"media-title"},this.getMediaCaption()),this.isMediaVideo()?t.createElement("span",{className:"video-duration",key:"video-duration"},this.getSecInMin()):null))}}),define("backgroundPresets/components/mediaPreview",["reactDOM","create-react-class","lodash","util","constants","core","backgroundPresets/components/mediaPreview.rt"],function(e,t,s,i,a,r,n){"use strict";var o=a.MEDIA_TYPES,l=i.imageTransform,c=i.url,d=i.serviceTopology,u=i.backgroundUtils,h=u.getColorValue,m=u.getOverlayStyle;return t({displayName:"mediaPreview",mixins:[r.mixins.editorAPIMixin],getInitialState:function(){return{isPreviewReady:!1}},componentDidMount:function(){this.getMediaType()===o.VIDEO&&this.getInstance().addEventListener("timeupdate",this.onPlaying)},componentWillUnmount:function(){this.getMediaType()===o.VIDEO&&(this.getInstance().removeEventListener("timeupdate",this.onPlaying),this.removeVideoSecurely())},onPlaying:function(){this.state.isPreviewReady||this.setState({isPreviewReady:!0})},getInstance:function(){return e.findDOMNode(this.refs.videoInstance)},removeVideoSecurely:function(){var e=this.getInstance();e.pause(),s.forEach(e.children,function(e){"source"===e.nodeName.toLowerCase()&&e.setAttribute("src","")}),e.load()},getMediaType:function(){return u.getMediaType(this.props.data)},isMediaVideo:function(){return this.getMediaType()===o.VIDEO},isMediaImage:function(){return this.getMediaType()===o.IMAGE},getOverlayStyle:function(){return m(this.props.data,this.getEditorAPI())},getBackgroundColor:function(){return{backgroundColor:h(this.getEditorAPI(),this.props.data.color)}},getBackgroundStyle:function(e){var t=this.props.data,i=e===o.VIDEO?t.mediaRef.posterImageRef:t.mediaRef,a=void 0;t.fittingType===l.fittingTypes.LEGACY_BG_FIT_AND_TILE||t.fittingType===l.fittingTypes.TILE?a=u.isSmallerFromContainer(i.width,i.height,270,152)?l.fittingTypes.TILE:l.fittingTypes.FIT_AND_TILE:a=l.fittingTypes.SCALE_TO_FILL;var r=u.getImageDisplayData(a,t.alignType,i.uri,i.width,i.height,270,152,85),s=r.css.container;return s.backgroundImage="url("+c.joinURL(d.staticMediaUrl,r.uri)+")",s.opacity=i.opacity,s},getVideoSource:function(e){var t,i=this.props.data.mediaRef,a=i.videoId,r=(t=i.qualities,s.find(t,{quality:"480p"})||i.qualities[0]);return c.joinURL(d.staticVideoUrl,a,r.quality,e,"file."+e)},getVideoStyle:function(){return{width:270,height:152,opacity:this.props.data.mediaRef.opacity}},getSecInMin:function(){var e=this.props.data.mediaRef.duration,t=e%60;return parseInt(e/60,10)+":"+(t<10?"0"+t:t)},getMediaCaption:function(){return this.props.data.mediaRef.title||""},render:n})}),define("backgroundPresets/components/backgroundPresetSection",["react","create-react-class","prop-types","lodash","core","util","color","constants","backgroundPresets/components/backgroundPresetSection.rt","backgroundPresets/components/mediaPreview"],function(t,e,i,l,a,r,c,s,n,o){"use strict";var d=r.url,u=r.serviceTopology,h=r.imageTransform,m=r.backgroundUtils,p=m.getColorValue,g=h.fittingTypes,y=h.alignTypes,f=s.MEDIA_TYPES,v=[{thumbWidth:238,thumbHeight:58},{thumbWidth:110,thumbHeight:58},{thumbWidth:68,thumbHeight:50},{thumbWidth:88,thumbHeight:59}];return e({displayName:"backgroundPresetSection",propTypes:{title:i.string,infoTooltip:i.string,onSelectPreset:i.func,columns:i.number,desktopPresets:i.array.isRequired,mobilePresets:i.array},mixins:[a.mixins.editorAPIMixin],getInitialState:function(){var e=this.props.columns-1||0;return{thumbWidth:v[e].thumbWidth,thumbHeight:v[e].thumbHeight}},componentWillReceiveProps:function(e){var t=e.columns-1||0;this.setState({thumbWidth:v[t].thumbWidth,thumbHeight:v[t].thumbHeight})},isMediaVideo:function(e){return this.getMediaType(e)===f.VIDEO},getMediaType:function(e){return m.getMediaType(e.ref)},getPresetData:function(){return this.getEditorAPI().isMobileEditor()?this.props.mobilePresets||{}:this.props.desktopPresets},getMediaPreviewComp:function(e){return this.getMediaType(e)!==f.COLOR?t.createElement(o,{data:e.ref}):null},getThumbStyle:function(e){var t={},i=void 0,a=g.SCALE_TO_FILL,r=y.CENTER,s=this.getMediaType(e);if(e.thumbnail&&e.thumbnail.uri&&e.thumbnail.width&&e.thumbnail.height)i=l.omit(e.thumbnail,"title");else if(s!==f.COLOR){if(i=e.ref.mediaRef.posterImageRef||e.ref.mediaRef,e.ref.fittingType===g.LEGACY_BG_FIT_AND_TILE||e.ref.fittingType===g.TILE)a=m.isSmallerFromContainer(i.width,i.height,this.state.thumbWidth,this.state.thumbHeight)?g.TILE:g.FIT_AND_TILE;else a=g.SCALE_TO_FILL;r=e.ref.alignType}if(i){var n=m.getImageDisplayData(a,r,i.uri,i.width,i.height,this.state.thumbWidth,this.state.thumbHeight,90);(t=n.css.container).backgroundImage="url("+d.joinURL(u.staticMediaUrl,n.uri)+")"}var o=p(this.getEditorAPI(),e.ref.color||"#ffffff");return o&&(t.backgroundColor=new c(o).alpha(e.ref.colorOpacity||1).rgbaString()),t.width=this.state.thumbWidth+"px",t.height=this.state.thumbHeight+"px",t},getThumbBackdropStyle:function(e){var t={},i=g.TILE,a=y.CENTER;if(e.thumbnailBackground&&e.thumbnailBackground.uri&&e.thumbnailBackground.width&&e.thumbnailBackground.height){var r=m.getImageDisplayData(i,a,e.thumbnailBackground.uri,e.thumbnailBackground.width,e.thumbnailBackground.height,this.state.thumbWidth,this.state.thumbHeight,90);t=r.css.container;var s=d.isExternalUrl(r.uri)?r.uri:d.joinURL(u.staticMediaUrl,r.uri);t.backgroundImage="url("+s+")"}return t.width=this.state.thumbWidth+"px",t.height=this.state.thumbHeight+"px",t},getOverlayStyle:function(e){var t=e.ref,i={},a=p(this.getEditorAPI(),t.colorOverlay);return a&&(i.backgroundColor=new c(a).alpha(t.colorOverlayOpacity||0).rgbaString()),i},selectPreset:function(e,t,i){this.props.onSelectPreset(l.cloneDeep(e),t,i)},render:function(){return n.apply(this)}})}),define("backgroundPresets",["backgroundPresets/components/backgroundPresetSection"],function(e){"use strict";return e});
//# sourceMappingURL=backgroundPresets.min.js.map