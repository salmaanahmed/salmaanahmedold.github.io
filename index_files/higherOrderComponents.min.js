var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}define("higherOrderComponents/overlappedCompTooltip/overlappedCompTooltip",["reactDOM","lodash","zepto","react","prop-types","create-react-class","reduxLibs","util","coreUtilsLib","coreBi","constants","stateManagement","experiment"],function(a,n,l,p,i,r,c,u,d,h,f,s,g){"use strict";var e=u.hoc,y=e.connect,S=e.STORES.EDITOR_API,m=s.editorPlugins.preview.selectors.getPreviewMode,v=s.editorPlugins.domMeasurements.selectors.getPreviewPosition,P=f.OVARLAPPING_COMP.DELAY,T=f.OVARLAPPING_COMP.HIDE_DELAY,k=f.OVARLAPPING_COMP.MIN_OVERLAP,C=function(e){var t=e.editorAPI,o=e.state;return{registeredHideBubbleOnPreview:t.registeredHideBubbleOnPreview,previewTop:v(o).top,previewMode:m(o),hideToolsQuickTipShownSitePreference:s.editorPlugins.userPreferences.selectors.getSiteUserPreferences("hideToolsQuickTipShown")(o),hideToolsQuickTipShownSessionPreference:s.editorPlugins.userPreferences.selectors.getSessionUserPreferences("hideToolsQuickTipShown")(o),topBarHideControlsUsed:s.editorPlugins.userPreferences.selectors.getSessionUserPreferences("topBarHideControlsUsed")(o),isMobileEditor:t.isMobileEditor()}},w=function(o){return{setRegisteredHideBubbleOnPreview:function(e){return o((n=e,function(e,t,o){o.editorAPI.registeredHideBubbleOnPreview=n}));var n},registerToGoToPreview:function(){return o(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,o){var n;return(n=o.editorAPI.preview).registerToGoToPreview.apply(n,i)}}.apply(void 0,arguments))},getRelativeToScreenConsideringScroll:function(){return o(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,o){var n;return(n=o.editorAPI.components.layout).getRelativeToScreenConsideringScroll.apply(n,i)}}.apply(void 0,arguments))},getComponentsUnderClick:function(){return o(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,o){var n;return(n=o.editorAPI.selection).getComponentsUnderClick.apply(n,i)}}.apply(void 0,arguments))},setHideToolsQuickTipShownSitePreference:function(e){return o(s.editorPlugins.userPreferences.actions.setSiteUserPreferences("hideToolsQuickTipShown",e))},setHideToolsQuickTipShownSessionPreference:function(e){return o(s.editorPlugins.userPreferences.actions.setSessionUserPreferences("hideToolsQuickTipShown",e))},reportBI:function(e,t){o(s.editorPlugins.bi.actions.event(e,t))},toggleHalfOpacityTools:function(){return o(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,o){var n;return(n=o.editorAPI.toolsControl).toggleHalfOpacityTools.apply(n,i)}}.apply(void 0,arguments))},toggleHideTools:function(){return o(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,o){var n;return(n=o.editorAPI.toolsControl).toggleHideTools.apply(n,i)}}.apply(void 0,arguments))},showFloatingBubble:function(){return o(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,o){var n=o.editorAPI;return n.showFloatingBubble.apply(n,i)}}.apply(void 0,arguments))},hideFloatingBubble:function(){return o(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,o){var n=o.editorAPI;return n.hideFloatingBubble.apply(n,i)}}.apply(void 0,arguments))},toggleHideToolsBtnBlink:function(){return o(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,o){var n;return(n=o.editorAPI.toolsControl).toggleHideToolsBtnBlink.apply(n,i)}}.apply(void 0,arguments))},showUserActionNotification:function(){var e;return o((e=s.editorPlugins.notifications.actions).showUserActionNotification.apply(e,arguments))}}};return function(o){return function(e){return y(S,C,w)((s=o,t=e,r({displayName:c.recompose.wrapDisplayName(t,"Overlapped"),propTypes:{registeredHideBubbleOnPreview:i.bool,setRegisteredHideBubbleOnPreview:i.func,previewMode:i.bool,previewTop:i.number,getComponentsUnderClick:i.func,hideToolsQuickTipShownSitePreference:i.number,setHideToolsQuickTipShownSitePreference:i.func,hideToolsQuickTipShownSessionPreference:i.number,setHideToolsQuickTipShownSessionPreference:i.func,reportBI:i.func,toggleHalfOpacityTools:i.func,toggleHideTools:i.func,showFloatingBubble:i.func,hideFloatingBubble:i.func,registerToGoToPreview:i.func,getRelativeToScreenConsideringScroll:i.func,toggleHideToolsBtnBlink:i.func,showUserActionNotification:i.func,isMobileEditor:i.bool,topBarHideControlsUsed:i.bool},getInitialState:function(){return this.intersectionComp=null,this.hideQuickTipTimer=null,{quickTipAlreadyShown:!1}},componentDidMount:function(){this.props.registeredHideBubbleOnPreview||(this.props.registerToGoToPreview(this.hideQuickTip),this.props.setRegisteredHideBubbleOnPreview(!0)),this.checkOverlap=d.timeUtils.throttle(this.checkOverlap,P,{leading:!1})},getComponentsLayoutByMouseEvent:function(e){var t=this;return n.map(this.props.getComponentsUnderClick(e),function(e){return t.props.getRelativeToScreenConsideringScroll(e).bounding})},calcOverlapPercentage:function(e,t){var o=u.math.getSquaresIntersection(t,e);return o?(this.intersectionComp=t,o.width*o.height/(t.height*t.width)*100):0},isOverlapping:function(e){var t=this.getComponentsLayoutByMouseEvent(e),o=0;if(!this.wrapped)return!1;var n=a.findDOMNode(this.wrapped),i={x:n.offsetLeft,y:n.offsetTop-this.props.previewTop,width:n.offsetWidth,height:n.offsetHeight};for(var r in t)if(t.hasOwnProperty(r)&&(o=this.calcOverlapPercentage(i,t[r]),k<o))return!0;return!1},hideQuickTip:function(){window.clearTimeout(this.hideQuickTipTimer),this.props.toggleHalfOpacityTools(!1),this.props.hideFloatingBubble()},showQuickTip:function(e){var t=l(window).width()/2,o=e.pageX<t?2:-2,n=p.createElement(s,{text:"toolbars_hide_tooltip_text",linkActionText:"toolbars_hide_tooltip_link",linkAction:this.quickTipLinkAction,linkMouseEnter:this.quickTipLinkMouseEnter,linkMouseLeave:this.quickTipLinkMouseLeave,symbol:"idea-bulb",closeAction:this.quickTipCloseAction}),i={height:100,width:this.intersectionComp.width,top:e.clientY,left:this.intersectionComp.x+o},r={noArrow:!0,shake:!0,behindPopUps:!0,hideMethod:this.props.toggleHalfOpacityTools.bind(this,!1),alignment:f.UI.TOOLTIP.ALIGNMENT.RIGHT,timeoutForMouseOverBubble:T};this.props.showFloatingBubble(n,i,r,!0),this.props.reportBI(h.events.editor.hide_tools.show_controls_tooltip_appearance)},moveQuickTip:function(){var e=l(window).width()/2,t=p.createElement(s,{text:"toolbars_show_tooltip_text",symbol:"idea-bulb",closeAction:this.quickTipCloseAction}),o={height:this.props.previewTop+30,width:284,top:0,left:e-142};this.props.showFloatingBubble(t,o,{noArrow:!0,behindPopUps:!0,shouldHaveTransition:!0},!0),this.props.toggleHideToolsBtnBlink(!0)},quickTipCloseAction:function(){this.hideQuickTip(),this.props.reportBI(h.events.editor.hide_tools.show_controls_tooltip_close);var e=this.props.hideToolsQuickTipShownSessionPreference||0;this.props.setHideToolsQuickTipShownSessionPreference(e+1)},quickTipLinkAction:function(){this.props.toggleHalfOpacityTools(!1),this.props.toggleHideTools(!0),this.props.reportBI(h.events.editor.hide_tools.hide_controls,{origin:"tooltip"}),this.moveQuickTip(),this.props.setHideToolsQuickTipShownSitePreference(!0)},quickTipLinkMouseEnter:function(){this.props.toggleHalfOpacityTools(!0)},quickTipLinkMouseLeave:function(){this.props.toggleHalfOpacityTools(!1)},resetQuickTip:function(){this.setState({quickTipAlreadyShown:!1})},checkOverlap:function(e){if(!this.props.previewMode){var t=this.props.hideToolsQuickTipShownSitePreference||4<this.props.hideToolsQuickTipShownSessionPreference;this.props.isMobileEditor||t||this.state.quickTipAlreadyShown||!this.isOverlapping(e)||("old"===g.getValue("se_notificationCenter")||this.props.topBarHideControlsUsed?(this.showQuickTip(e),this.setState({quickTipAlreadyShown:!0})):this.props.showUserActionNotification({message:"Notifications_Hide_Controls_Text",title:"Notifications_Hide_Controls_Text",type:"info",link:{caption:"Notifications_Hide_Controls_Link",onNotificationLinkClick:this.quickTipLinkAction}}))}},wrappedMounted:function(e){this.wrapped=e},onMouseMove:function(e){e.persist(),this.checkOverlap(e)},render:function(){var e=n.assign({},this.props,{onMouseMove:this.onMouseMove,onMouseEnter:this.resetQuickTip,ref:this.wrappedMounted});return p.createElement(t,e)}})));var t,s}}}),define("higherOrderComponents/linkUserPreferences/linkUserPreferences",["lodash","react","prop-types","reduxLibs","stateManagement"],function(r,s,a,l,p){"use strict";return function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(e){return n=i,t=e,(o=function(e){function i(e,t){_classCallCheck(this,i);var o=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t)),n=null;return o.props.userPrefType&&o.props.dontShowAgainKey&&(n=!!p.editorPlugins.userPreferences.selectors.getUserPreferences(o.props.userPrefType)(o.props.dontShowAgainKey)(o.context.store.getState().state)),o.state={dontShowAgain:n},o}return _inherits(i,s.Component),_createClass(i,[{key:"toggleDontShowAgain",value:function(){if(this.props.userPrefType&&this.props.dontShowAgainKey){var e=!this.state.dontShowAgain;this.context.store.dispatch(p.editorPlugins.userPreferences.actions.setSitePreferences(this.props.userPrefType)(this.props.dontShowAgainKey,e)),this.setState({dontShowAgain:e})}}},{key:"render",value:function(){var e=r.assign({},this.props,{toggleDontShowAgain:this.toggleDontShowAgain.bind(this),dontShowAgain:this.state.dontShowAgain});return s.createElement(t,e)}}]),i}()).displayName=l.recompose.wrapDisplayName(t,"LinkUserPreferences"),o.propTypes={userPrefType:a.oneOf(["site","session","global"]),dontShowAgainKey:a.string},o.contextTypes={store:a.object},o.defaultProps=n,o;var t,o,n}}}),define("higherOrderComponents/linkStyle/linkStyle",["lodash","react","create-react-class","prop-types","reduxLibs","styles","util","core"],function(p,o,e,n,i,t,r,s){"use strict";var a=r.hoc,l=a.connect,c=a.STORES.EDITOR_API,u=t.advancedStyle.styleUtil,d=t.advancedStyle.advancedStyleDataUtil,h=["TEXT_COLOR","COLOR","BG_COLOR","BORDER_COLOR"];return p.flow(function(t){return e({displayName:i.recompose.wrapDisplayName(t,"LinkStyle"),propTypes:{selectedComponent:n.oneOfType([n.object.isRequired,n.array.isRequired]),getStyle:n.func.isRequired,getSkinDefinition:n.func.isRequired,updateStyle:n.func.isRequired,onStyleParamChanged:n.func},getInitialState:function(){return this.cachedStylePropertiesForSkins={},{styleDataItem:this.props.getStyle()}},componentDidMount:function(){this.mounted=!0},componentWillReceiveProps:function(e){s.styleManager.isEqual(this.props.getStyle(),e.getStyle())&&this.setState({styleDataItem:e.getStyle()})},componentWillUnmount:function(){this.mounted=!1},forceUpdateParentStyle:function(e){this.props.updateStyle(e),this.setState({styleDataItem:e})},onStyleParamChanged:function(e,t,o,n,i){var r=p.cloneDeep(e),s=r.style,a="object"===(void 0===o?"undefined":_typeof(o))?o.value:o,l="object"===(void 0===o?"undefined":_typeof(o))?o.source:u.getPropertySource(a);s.properties[t]=a,s.propertiesSource&&(s.propertiesSource[t]=l),this.props.onStyleParamChanged?this.props.onStyleParamChanged(t,a,l):this.props.updateStyle(r,i),this.mounted&&this.setState({styleDataItem:r})},getStyleDataItemForNewSkin:function(e,t){var o=t.style,n=this.props.getSkinDefinition,i=u.getStyleForSkin(n,e,this.cachedStylePropertiesForSkins[e]);u.mergeSharedProperties(n,i.properties,o.properties,e,t.skin);var r=p.cloneDeep(t);return p.assign(r.style,i),r.skin=e,r},linkStyleParam:function(o,n,i){var r=this;if(p.includes(n,"COLOR_ALPHA"))return this.linkColorAlphaWithMutator(o,i);var e=this.state.styleDataItem;return{value:this.getParamValue(e,o),requestChange:function(e){var t;r.onStyleParamChanged(r.state.styleDataItem,o,e,i||"active",(t=n,p.includes(h,t)))}}},linkColorAlphaWithMutator:function(n,i){var r=this,s="alpha-"+n,e=this.state.styleDataItem,t=this.getParamValue(e,s);return{value:{color:this.getParamValue(e,n),alpha:t},requestChange:function(e){var t=e.alpha,o=e.color;r.getParamValue(r.state.styleDataItem,s)!==t?r.onStyleParamChanged(r.state.styleDataItem,s,t,i):r.onStyleParamChanged(r.state.styleDataItem,n,o,i)}}},cacheStylePropertiesForSkin:function(e,t){this.cachedStylePropertiesForSkins[e]=t},changeSkin:function(e){var t=this.state.styleDataItem;if(e!==t.skin){var o=this.getStyleDataItemForNewSkin(e,t);this.cacheStylePropertiesForSkin(t.skin,t.style.properties),this.props.updateStyle(o),this.setState({styleDataItem:o})}},getParamValue:function(e,t){var o=this.props.getSkinDefinition,n=e.style.properties[t];return p.isUndefined(n)?d.getSkinParamDefaultValue(o,e.skin,t):n},render:function(){var e=p.defaults({linkStyleParam:this.linkStyleParam,changeSkin:this.changeSkin,forceUpdateParentStyle:this.forceUpdateParentStyle,styleDataItem:this.state.styleDataItem},this.props);return o.createElement(t,e)}})},l(c,void 0,function(t,o){return{getSkinDefinition:function(e){return t((n=e,function(e,t,o){return o.dsRead.theme.skins.getSkinDefinition(n)}));var n},updateStyle:o.updateStyle||function(e){return t((n=o.selectedComponent,i=e,function(e,t,o){return o.editorAPI.components.style.update(n,i)}));var n,i},getStyle:o.getStyle||function(){return t((n=o.selectedComponent,function(e,t,o){return o.editorAPI.components.style.get(n)}));var n}}}))}),define("higherOrderComponents/noUpdateOnMouseMove/noUpdateOnMouseMove",["lodash","react","prop-types","create-react-class","util","stateManagement","reduxLibs"],function(e,o,n,i,r,t,s){"use strict";var a=t.editorPlugins.mouseActions.selectors.isPerformingMouseMoveAction,l=function(e){var t=e.state;return{isPerformingMouseMoveAction:a(t)}};return function(e){var t=i({displayName:s.recompose.wrapDisplayName(e,"NoUpdateOnMouseMove"),propTypes:{isPerformingMouseMoveAction:n.bool.isRequired},shouldComponentUpdate:function(){return!this.props.isPerformingMouseMoveAction},render:function(){return o.createElement(e,this.props)}});return r.hoc.connect(r.hoc.STORES.STATE_ONLY,l)(t)}}),define("higherOrderComponents/userPreferences/withUserPreferences",["lodash","stateManagement","util"],function(o,e,n){"use strict";var t=e.editorPlugins.userPreferences.selectors,i=t.getSiteUserPreferences,r=t.getSessionUserPreferences,s=t.getGlobalUserPreferences,a=e.editorPlugins.userPreferences.actions,l=a.setSiteUserPreferences,p=a.setSessionUserPreferences,c=a.setGlobalUserPreferences;return function(t){return n.hoc.connect(n.hoc.STORES.STATE_ONLY,function(e){var n=e.state;return o.fromPairs(o.map(t,function(e){var t=e.type,o=e.key;return[e.propName,function(e,t,o){switch(t){case"site":return i(o)(e);case"session":return r(o)(e);case"global":return s(o)(e)}}(n,t,o)]}))},function(s){return o.fromPairs(o.map(t,function(e){var o,n,i,t=e.type,r=e.key;return[e.updatePropName,(o=s,n=t,i=r,function(e,t){switch(n){case"site":return o(l(i,e,t));case"session":return o(p(i,e));case"global":return o(c(i,e))}})]}))})}}),define("higherOrderComponents/designPanel/designPanel",["lodash","create-react-class","reduxLibs","prop-types","util","coreBi","react","stateManagement"],function(r,e,o,n,i,s,a,l){"use strict";var t=i.hoc,p=t.connect,c=t.STORES.EDITOR_API,u=function(e){return e.split(".").pop()};return r.flow(function(t){return e({displayName:o.recompose.wrapDisplayName(t,"designPanel"),propTypes:{selectedComponents:n.oneOfType([n.object.isRequired,n.array.isRequired]),compType:n.string.isRequired,selectedSkin:n.string,maxStrokeWidth:n.number,styleDataItem:n.object,styleId:n.string,shouldStartClosed:n.bool,createStyleId:n.func,setStyleId:n.func,updateStyle:n.func,waitForChangesApplied:n.func,reportEvent:n.func,onCustomizeDesignCallBack:n.func,onPreviewStateChange:n.func,getDefaultState:n.func},getInitialState:function(){var e=!!i.url.getParameterByName("debug");return"wixui.RatingsDisplay"!==this.props.compType&&e&&console.error("DEAR WIX DEVELOPER- This HOC implementation is partial, please validate that all the mixin functionality of design panel exists"),this.getResetState(this.props)},componentWillReceiveProps:function(e){!r.isEqual(e.selectedComponents,this.props.selectedComponents)&&this.setState(this.getResetState(e))},getResetState:function(e){var t=!1;if(r.isFunction(this.getEditorAPI)){var o=this.getEditorAPI();t=l.designPanel.selectors.getShowCustomizeDesignOnly(o.store.getState())}return{advancedStyling:t,currentStyleId:e.styleId,isStyleChanged:!1}},getComponentStyleId:function(){return this.state.currentStyleId||this.props.styleId},getPropsForDesignPanel:function(){var e=r.defaults({backButtonLabel:"design_panel_back_button_label",hideComponentSections:this.state.advancedStyling,shouldHideContentOverflow:this.state.advancedStyling,isCustomizeDesign:this.state.advancedStyling},this.props);return this.state.advancedStyling&&(e.onBackClick=this.customizeDesignCallBack),e},openCustomizeDesign:function(){var e=this,t={};t.currentStyleId=this.props.styleId,this.props.waitForChangesApplied(function(){t.advancedStyling=!0,e.setState(t,function(){this.reportCustomizeDesignClickedToBI(),r.isFunction(this.props.onCustomizeDesignCallBack)&&this.props.onCustomizeDesignCallBack()})})},reportCustomizeDesignClickedToBI:function(){this.props.reportEvent(s.events.designPanel.DESIGN_PANEL_CUSTOMIZE_BUTTON_CLICK,{was_preset_clicked_current_session:this.state.isStyleChanged,component_type:u(this.props.compType),component_id:r.head(this.props.selectedComponents).id,chosen_style_id:this.state.currentStyleId})},customizeDesignCallBack:function(){this.setState({advancedStyling:!1}),this.props.reportEvent(s.events.ADVANCED_STYLE_PANEL.BACK_BUTTON_CLICK,{component_type:u(this.props.compType)})},getAdvancedStylingProps:function(){var e={selectedSkin:this.props.selectedSkin,selectedComponent:i.array.asArray(this.props.selectedComponents),styleId:this.state.currentStyleId,compType:this.props.compType,maxStrokeWidth:this.props.maxStrokeWidth,styleDataItem:this.props.styleDataItem};return r.has(this.props,"shouldStartClosed")&&(e.shouldStartClosed=this.props.shouldStartClosed),e},render:function(){var e=r.defaults({advancedStylingProps:this.getAdvancedStylingProps(),propsForDesignPanel:this.getPropsForDesignPanel(),openCustomizeDesign:this.openCustomizeDesign,advancedStyling:this.state.advancedStyling},this.props);return a.createElement(t,e)}})},p(c,function(e){var t=e.editorAPI,o=e.dsRead,n=o.viewMode,i=t.selection.getSelectedComponents();return{styleId:(0,l.editorPlugins.components.selectors.getStyleId)(i,o),styleDataItem:t.components.style.get(r.head(i)),selectedComponents:i,compType:t.components.getType(i),waitForChangesApplied:t.dsActions.waitForChangesApplied,isMobile:n.get()===n.VIEW_MODES.MOBILE,reportEvent:t.bi.event}},function(e){return{replaceComponentPanel:function(){return e(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,o){var n=o.editorAPI;return n.replaceComponentPanel.apply(n,i)}}.apply(void 0,arguments))}}}))}),define("higherOrderComponents",["higherOrderComponents/overlappedCompTooltip/overlappedCompTooltip","higherOrderComponents/linkUserPreferences/linkUserPreferences","higherOrderComponents/linkStyle/linkStyle","higherOrderComponents/noUpdateOnMouseMove/noUpdateOnMouseMove","higherOrderComponents/userPreferences/withUserPreferences","higherOrderComponents/designPanel/designPanel"],function(e,t,o,n,i,r){"use strict";return{overlappedCompTooltip:e,linkUserPreferences:t,linkStyle:o,noUpdateOnMouseMove:n,withUserPreferences:i,designPanel:r}});
//# sourceMappingURL=higherOrderComponents.min.js.map