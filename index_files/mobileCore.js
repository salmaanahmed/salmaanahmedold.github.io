define(["lodash","coreUtilsLib"],(function(n,e){return function(n){var e={};function t(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)t.d(o,r,function(e){return n[e]}.bind(null,r));return o},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=6)}([function(e,t){e.exports=n},function(n,e,t){"use strict";t.r(e),t.d(e,"isMergeVirtualGroup",(function(){return a})),t.d(e,"isRescaleVirtualGroup",(function(){return u})),t.d(e,"isVirtualGroup",(function(){return c})),t.d(e,"isDesktopOnlyComponent",(function(){return s})),t.d(e,"isTextComponent",(function(){return f})),t.d(e,"isGraphicComponent",(function(){return l})),t.d(e,"isGroupComponent",(function(){return d})),t.d(e,"isColumnsContainerComponent",(function(){return m})),t.d(e,"isImageComponent",(function(){return p})),t.d(e,"isMasterPage",(function(){return v})),t.d(e,"isDockingAllowed",(function(){return g})),t.d(e,"isFixedPositionAllowed",(function(){return h})),t.d(e,"shouldStretchToScreenWidth",(function(){return y})),t.d(e,"extractComponentsFromStructureByType",(function(){return C})),t.d(e,"isScreenWidthComponent",(function(){return T})),t.d(e,"translateComps",(function(){return E})),t.d(e,"reparentComponent",(function(){return D})),t.d(e,"addComponentsTo",(function(){return O})),t.d(e,"removeChildrenFrom",(function(){return b})),t.d(e,"removeGroup",(function(){return N})),t.d(e,"containsComponent",(function(){return S})),t.d(e,"getHeightAccordingToChildren",(function(){return I})),t.d(e,"ensureContainerTightlyWrapsChildren",(function(){return x})),t.d(e,"isSiteSegmentOrPage",(function(){return M})),t.d(e,"isPageComponent",(function(){return _})),t.d(e,"isContainerComponent",(function(){return P})),t.d(e,"isSiteSegment",(function(){return A})),t.d(e,"isAllowedToBeInMasterPage",(function(){return w})),t.d(e,"extractMobilePage",(function(){return R})),t.d(e,"getComponentByIdFromStructure",(function(){return k})),t.d(e,"unifyGroups",(function(){return B})),t.d(e,"getComponentsByIds",(function(){return L})),t.d(e,"getParent",(function(){return G})),t.d(e,"getSnugLayout",(function(){return F})),t.d(e,"getTinyMenuDefaultPosition",(function(){return H})),t.d(e,"getChildren",(function(){return j})),t.d(e,"getRangesOverlap",(function(){return z})),t.d(e,"getYOverlap",(function(){return W})),t.d(e,"getXOverlap",(function(){return U})),t.d(e,"hasGreaterArea",(function(){return V})),t.d(e,"haveSufficientOverlap",(function(){return X})),t.d(e,"isEmptyContainer",(function(){return q})),t.d(e,"shouldReparentCompToChildOfContainer",(function(){return Q})),t.d(e,"getAllCompsInStructure",(function(){return K}));var o=t(0),r=t(2),i=t(4),a=function(n){return o.get(n,"componentType")===r.a.VIRTUAL_GROUP_TYPES.MERGE},u=function(n){return o.get(n,"componentType")===r.a.VIRTUAL_GROUP_TYPES.RESCALE},c=function(n){return u(n)||a(n)};function s(n){return o.get(n,["conversionData","desktopOnly"],!1)}function f(n){return"text"===o.get(n,["conversionData","category"])}function l(n){return"graphic"===o.get(n,["conversionData","category"])||p(n)}function d(n){return n&&"wysiwyg.viewer.components.Group"===n.componentType}function m(n){return"columns"===o.get(n,["conversionData","category"])}function p(n){return"photo"===o.get(n,["conversionData","category"])}function v(n){return"masterPage"===o.get(n,"id")}function g(n){return o.get(n,["conversionData","isDockingAllowed"])}function h(n){return o.get(n,["conversionData","isFixedPositionAllowed"])}function y(n){var e=function(n){return o.get(n.conversionData,"isScreenWidth",!1)||o.get(n.conversionData,"stretchHorizontally",!1)||o.some(n.components,e)};return M(n)||e(n)}function C(n,e){var t=j(n),r=o.remove(t,(function(n){return o.includes(e,n.componentType)}));return o.concat(r,o.flatMap(t,C))}function T(n){return o.get(n.conversionData,"isScreenWidth",!1)||o.some(n.components,T)}function E(n,e,t){void 0===e&&(e=0),void 0===t&&(t=0),o.forEach(n,(function(n){n.layout.x+=e,n.layout.y+=t}))}function D(n,e,t){O(n,[e],t),E([e],-n.layout.x,-n.layout.y)}function O(n,e,t){var o=j(n);e.length&&o&&(t=void 0!==t?t:o.length,o.splice.apply(o,[t,0].concat(e)))}function b(n,e){var t=j(n);o.remove(t,(function(n){return o.includes(e,n)}))}function N(n,e){if(d(n)){var t=o.findIndex(e.components,{id:n.id});o.forEach(n.components.reverse(),(function(o){O(e,[o],t),E([o],n.layout.x,n.layout.y)})),o.remove(e.components,n)}}function S(n,e){return o.some(j(n),(function(n){return e(n)||n&&S(n,e)}))}function I(n,e,t){if(!v(n)&&e&&(t||!o.isEmpty(e))){var i=o(e).reject(["conversionData.isInvisible",!0]).reduce((function(n,e){return o.max([n,e.layout.y+e.layout.height,0])}),0);return o.get(n,["conversionData","hasTightYMargin"])||o.get(n,["conversionData","hasTightBottomMargin"])?i:i+(y(n)?r.a.SECTION_MOBILE_MARGIN_Y:r.a.COMPONENT_MOBILE_MARGIN_Y+o.get(n.conversionData,"borderWidth",0))}}function x(n,e,t,r){void 0===r&&(r=0);var i=I(n,e,t);if(o.isNumber(i)){var a=o.get(n,["conversionData","minHeight"],r);n.layout.height=Math.max(a,i)}}function M(n){return _(n)||A(n)}function _(n){return"Page"===n.type}function P(n){return"Container"===n.type}function A(n){return o.has(n.conversionData,"siteSegmentRole")}function w(n){return A(n)||o.has(n.conversionData,"isAllowedToBeChildOfMasterPage")}function R(n){var e=i.objectUtils.cloneDeep(n),t=o.has(e,"components")?"components":"children";return o.set(e,t,n.mobileComponents||[])}function k(n,e){if(e.id===n)return e;var t=null;return o.find(j(e),(function(e){return t=k(n,e)})),t}function B(n,e){if(n.length>e)n.length=0;else for(var t=function(e){var t=o.findLastIndex(n,(function(t,r){return r<e&&(i=n[e],a=t,o.size(o.intersection(i,a))>0);var i,a}));-1!==t&&(n[t]=n[t].concat(o.difference(n[e],n[t])),n.splice(e,1))},r=n.length-1;r>=0;r--)t(r)}function L(n,e){var t=j(n);return o.map(e,(function(n){return o.find(t,{id:n})||null}))}function G(n,e){var t=j(e);if(o.find(t,{id:n}))return e;var r=null;return o.find(t,(function(e){return r=G(n,e)})),r}function F(n){if(n&&0!==n.length){var e=o.min(o.map(n,"layout.x")),t=o.min(o.map(n,"layout.y"));return{x:e,y:t,width:o.max(o.map(n,(function(n){return n.layout.x+n.layout.width})))-e,height:o.max(o.map(n,(function(n){return n.layout.y+n.layout.height})))-t,rotationInDegrees:0}}}function H(){return{x:r.a.MOBILE_WIDTH-(r.a.TINY_MENU_SIZE+r.a.SITE_SEGMENT_PADDING_X),y:r.a.SECTION_MOBILE_MARGIN_Y,rotationInDegrees:0}}function j(n){return n.components||n.children}function z(n,e){void 0===n&&(n=[]),void 0===e&&(e=[]);var t=function(n,e){return Math.min(n[1],e[1])-e[0]};return n[0]<=e[0]?t(n,e):t(e,n)}function W(n,e){var t=function(n){return[n.layout.y,n.layout.height+n.layout.y]};return z(t(n),t(e))}function U(n,e){if(T(n))return e.layout.width;if(T(e))return n.layout.width;var t=function(n){return[n.layout.x,n.layout.width+n.layout.x]};return z(t(n),t(e))}var Y=function(n){return n.layout.width*n.layout.height};function V(n,e){return T(n)?n.layout.height>=e.layout.height||Y(n)>Y(e):!T(e)&&Y(n)>Y(e)}function X(n,e,t){var o=U(n,e),r=W(n,e);if(o<=0||r<=0)return!1;var i=o*r,a=Math.min(Y(n),Y(e));return i>0&&i/a>=t}function q(n){return!!P(n)&&("columns"===n.conversionData.category?1===o.size(n.components)&&o.isEmpty(n.components[0].components):o.isEmpty(n.components))}function Q(n,e){return m(e)&&o.get(n,["conversionData","isInvisible"],!1)}function K(n,e,t){void 0===e&&(e=!1);for(var r=[[n]],i=0,a=r;i<a.length;i++){var u=a[i];o.forEach(u,(function(n){var t=e?o.get(n,"mobileComponents"):j(n);o.isEmpty(t)||r.push(t)}))}return o(r).flatten().remove(t).keyBy("id").value()}},function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));var o={MOBILE_WIDTH:320,MARGIN_BETWEEN_TEXT_AND_NON_TEXT:20,COMPONENT_MOBILE_MARGIN_X:10,COMPONENT_MOBILE_MARGIN_Y:10,SECTION_MOBILE_MARGIN_Y:20,SITE_SEGMENT_PADDING_X:20,TINY_MENU_SIZE:50,TEXT_MAX_LENGTH_FOR_RESCALING:25,MIN_WIDTH_FOR_ENLARGE:140,DEFAULT_TEXT_HEIGHT:10,VIRTUAL_GROUP_TYPES:{RESCALE:"RESCALE_VIRTUAL_GROUP",MERGE:"MERGE_VIRTUAL_GROUP"}}},function(n,e,t){"use strict";t.d(e,"e",(function(){return a})),t.d(e,"c",(function(){return u})),t.d(e,"b",(function(){return c})),t.d(e,"a",(function(){return f})),t.d(e,"d",(function(){return d})),t.d(e,"g",(function(){return m})),t.d(e,"h",(function(){return p})),t.d(e,"f",(function(){return v}));var o=t(0),r=t(1),i=.1,a=function(n){return 0===n?0:n/Math.abs(n)},u=function(n,e){return"x"===e?n.layout.width:n.layout.height},c=function(n,e){return n.layout[e]+u(n,e)};function s(n,e,t,r){void 0===r&&(r=i);var a=o.get(n,t),u=o.get(e,t);return Math.abs(a-u)<=r*o.min([a,u])}function f(n,e,t){return n===e||o.size(n)===o.size(e)&&!l(n,t)&&!l(e,t)&&o.every(n,(function(n,r){var a=e[r];return n.componentType===a.componentType&&function(n,e,t,r){void 0===r&&(r=i);var a=o.get(n,["layout",t]),c=o.get(e,["layout",t]);return Math.abs(a-c)<=r*o.min([u(n,t),u(e,t)])}(n,a,t)&&("text"===n.conversionData.category?s(n,a,["conversionData","averageNormalizedFontSize"]):s(n,a,["layout","height"])&&s(n,a,["layout","width"]))}))}function l(n,e){var t=o.findIndex(n,(function(t,r){if(0===r)return!1;var i=c(n[r-1],e),a=t.layout[e]-i;return a<0||a>o.min([u(n[r-1],e),u(t,e)])}));return-1!==t&&t!==n.length-1}function d(n){var e=r.getChildren(n);return o.map(n.conversionData.componentsOrder,(function(n){return o.find(e,{id:n})}))}var m=function(n){return r.isRescaleVirtualGroup(n)&&"reorder"!==n.conversionData.rescaleMethod||n.conversionData.structuralContainer};function p(n,e){var t=o.map(r.getChildren(n),"id");return o.sortBy(e,(function(n){return t.indexOf(n.id)}))}function v(n){var e=o.pick(n.conversionData.mobileHints,["recommendedWidth","recommendedHeight","recommendedScale","recommendedOrder"]);return!o.isEmpty(e)}},function(n,t){n.exports=e},function(n,e,t){"use strict";t.d(e,"a",(function(){return h})),t.d(e,"b",(function(){return y})),t.d(e,"c",(function(){return I}));var o=t(0),r=t(3),i=t(4),a=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var o=Array(n),r=0;for(e=0;e<t;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o},u={START_EVENT:"start",END_EVENT:"end"},c=.9,s={HORIZONTAL:1,VERTICAL:1.25};function f(n,e){return o.transform(n,(function(n,t,o){var r=e(o);return n[r]=n[r]||{comps:[],distanceToPreviousFragment:t.distanceToPreviousFragment},n[r].comps=a(n[r].comps,t.comps),n}),[])}var l={singleCompRow:function(n,e,t){if("x"===t)return null;var i=o.findIndex(n,(function(n){return 1===o.size(n.comps)}));if(-1===i)return null;var a=f(n,(function(n){return Object(r.e)(n-i)+Object(r.e)(i)}));return{type:"singleCompRow",fragments:a,fragmentsEvents:D(e,a)}},verticalDivider:function(n,e,t){if(o.size(n)<3||o.every(n,(function(n){return 1===o.size(n.comps)}))||"y"===t)return null;var i=function(n,e){var t=o(e.y).partition({eventType:u.START_EVENT}).map((function(n){return o.map(n,"coordinate")})).value(),i=o.max(t[0]),a=o.min(t[1]);return o.findIndex(n,(function(n){var e=n.comps[0];return 1===n.comps.length&&e.conversionData.keepIfVerticalDivider&&e.layout.y<=a&&Object(r.b)(e,"y")>=i}))}(n,e);if(-1===i)return null;o.set(n[i].comps[0],["conversionData","isVerticalDivider"],!0);var a=f(n,(function(n){return Object(r.e)(n-i)+Object(r.e)(i)}));return{type:"verticalDivider",fragments:a,fragmentsEvents:D(e,a)}},mirrorPattern:function(n,e,t){if(o.size(n)<2)return null;var i=D(e,n),a=m(t),u=o.map(i,(function(n){return d(n[a])})),c=o.every(u,(function(n){return Object(r.a)(n,u[0],a)}));return c&&c?v(o.flatten(u),e,{type:"mirrorPattern"}):null},chessPattern:function(n,e,t){if("y"!==t||o.size(n)<2||!o.every(n,(function(n){return 2===o.size(n.comps)})))return null;var r=D(e,n),i=o.map(r,(function(n){return d(n.x)})),a=o.flatMap(i,(function(n,e){return p(e)?n:o.reverse(n)})),u=a[0].conversionData.category,c="text"===u?"photo":"text";return o.every(a,(function(n,e){return n.conversionData.category===(p(e)?u:c)}))?v(a,e,{type:"chessPattern"}):null}},d=function(n){return o(n).map("compRef").uniq().value()},m=function(n){return"x"===n?"y":"x"},p=function(n){return n%2==0};function v(n,e,t){return o.assign(t,{fragments:[{comps:n,distanceToPreviousFragment:-1}],fragmentsEvents:[e]})}function g(n,e){var t=o.findLastIndex(n,(function(n){if(n.coordinate===e.coordinate){if(n.eventType===u.START_EVENT&&e.eventType===u.START_EVENT)return n.size>e.size;if(n.eventType===u.END_EVENT&&e.eventType===u.END_EVENT)return n.size<e.size;if(n.eventType===u.START_EVENT&&e.eventType===u.END_EVENT)return n.compRef===e.compRef;if(n.eventType===u.END_EVENT&&e.eventType===u.START_EVENT)return n.compRef!==e.compRef}return n.coordinate<e.coordinate}));return n.splice(t+1,0,e),n}function h(n,e){var t=o.transform(n,(function(n,t){var o=t.layout[e]||0,i=Object(r.b)(t,e)||o,a=Object(r.c)(t,e)||0;return g(n,{eventType:u.START_EVENT,compRef:t,coordinate:o,size:a}),g(n,{eventType:u.END_EVENT,compRef:t,coordinate:i,size:a}),n}),[]);return o.map(t,(function(n){return o.omit(n,"size")}))}function y(n){var e=[],t=[];return o.forEach(n,(function(n){var r=o.last(t);if(n.eventType===u.START_EVENT){if(o.isEmpty(e)){var i={events:[n],distanceToPreviousFragment:r?n.coordinate-o.last(r.events).coordinate:-1};t.push(i)}else r.events.push(n);e.push(n)}else o.remove(e,{compRef:n.compRef}),r.events.push(n)})),o.map(t,(function(n){return{comps:d(n.events),distanceToPreviousFragment:n.distanceToPreviousFragment}}))}function C(n,e,t){var r=o.maxBy(n,"distanceToPreviousFragment"),i=o.findIndex(n,r),a=f(n,(function(n){return n<i?0:1})),u=[n[i-1],r],c=o.filter(e[m(t)],(function(n){return o.some(u,(function(e){return o.includes(e.comps,n.compRef)}))})),s={fragmentsEvents:D(e,a),fragments:a},l=T(u,c,t);return o.assign(s,{maxCompsDistance:l})}function T(n,e,t){var i=function(n,e){return o(n).map((function(n,t){return t?o.map(n,(function(n){return o.defaults({closestPoint:n.compRef.layout[e]},n)})):o.map(n,(function(n){return o.defaults({closestPoint:Object(r.b)(n.compRef,e)},n)}))})).map((function(n,e){return o.reduce(n,(function(n,t){var r=o.last(n);return r&&r.eventType!==u.END_EVENT?r.compRef===t.compRef?a(n,[t]):((e&&t.closestPoint<r.closestPoint||!e&&t.closestPoint>r.closestPoint)&&n.splice(n.length-1,1,t),n):n.concat(t.eventType===u.START_EVENT?[t]:[])}),[])})).value()}(o.partition(e,(function(e){return o.includes(n[0].comps,e.compRef)})),t),c=[0,0],s=[[],[]];for(var f=-1/0;c[0]<i[0].length||c[1]<i[1].length;){var l=c[0]===i[0].length||c[1]===i[1].length?c[0]===i[0].length?1:0:i[0][c[0]].coordinate<=i[1][c[1]].coordinate?0:1,d=i[l][c[l]++];if(d.eventType!==u.END_EVENT){s[l].push(d);var m=[o.maxBy(s[0],"closestPoint"),o.minBy(s[1],"closestPoint")],p=o.get(m,[1,"closestPoint"])-o.get(m,[0,"closestPoint"]);!o.isNaN(p)&&p>f&&(f=p)}else o.remove(s[l],{compRef:d.compRef})}return f}function E(n,e){return o.transform(n,(function(n,t){var r=o.findIndex(e,(function(n){return o.includes(n.comps,t.compRef)}));return n[r]=a(n[r]||[],[t]),n}),[])}function D(n,e){var t=E(n.x,e),r=E(n.y,e);return o.map(o.keys(e),(function(n){return o.assign({},{x:t[n],y:r[n]})}))}function O(n,e,t){return function(n,e,t){var r=null;return o.forEach(l,(function(o,i){if(!t[i])return!0;var a=o(e.y,n,"y"),u=o(e.x,n,"x");return null===(r=a&&u?null:a||u)})),r}(n,e,t)||function(n,e){var t=o.size(e.x)>1?C(e.x,n,"x"):null,r=o.size(e.y)>1?C(e.y,n,"y"):null;if(t&&r){var i=s.HORIZONTAL*t.maxCompsDistance>s.VERTICAL*r.maxCompsDistance?t:r;return o.pick(i,["fragments","fragmentsEvents"])}return t||r}(n,e)}function b(n,e,t,i){if(o.size(e)<2)return e||[];var a=o.mapValues(t,y);if(1===o.size(a.x)&&1===o.size(a.y))return i.detectSemanticGroups?i.useOverlapRules?function(n,e){e=Object(r.h)(n,e);var t="overlayGroup_"+(e=o.sortBy(e,"layout.y"))[0].id;return o.forEach(e,(function(n){return o.set(n,["conversionData","overlayGroupId"],t)})),e}(n,e):function(n,e,t){var r=function(n){return o.some(n,"conversionData.originalLayout")};if(r(e)||o.some(e,(function(n){return r(n)})))return S(e),e;N(e);var i=h(e,"y"),a=h(e,"x"),u=b(n,e,{y:i,x:a},t);return S(u),u}(n,e,i):Object(r.h)(n,e);var u=O(t,a,{mirrorPattern:i.detectSemanticGroups,chessPattern:i.detectSemanticGroups,verticalDivider:!0,singleCompRow:!0});return 1===o.size(u.fragments)?u.fragments[0].comps:o.flatMap(u.fragments,(function(e,t){return b(n,e.comps,u.fragmentsEvents[t],i)}))}function N(n){o.forEach(n,(function(n){var e=n.layout,t=o.assign(i.objectUtils.cloneDeep(e),{height:e.height*c,width:e.width*c});n.layout=t,o.set(n,["conversionData","originalLayout"],e)}))}function S(n,e){void 0===e&&(e=!0),o.forEach(n,(function(n){var e=o.get(n,["conversionData","originalLayout"]);e&&(n.layout=i.objectUtils.cloneDeep(e),delete n.conversionData.originalLayout)})),e&&o.forEach(n,(function(n){return S(n.components,!1)}))}function I(n,e,t){var r=b(n,e,{y:h(e,"y"),x:h(e,"x")},t);n.conversionData.componentsOrder=o.map(r,"id")}r.h},function(n,e,t){"use strict";t.r(e);var o={};t.r(o),t.d(o,"getAdditionalStyles",(function(){return M})),t.d(o,"addToStructure",(function(){return _}));var r={};t.r(r),t.d(r,"addToStructure",(function(){return A}));var i=t(0),a={"adobe-caslon-w01-smbd":{referencePoints:[17,40,82],friendlyName:"Adobe Caslon"},'"amatic sc"':{referencePoints:[18,42,84],friendlyName:"Amatic SC"},"americantypwrteritcw01--731025":{referencePoints:[16,42,84],friendlyName:"American Typewriter"},anton:{referencePoints:[15,36,78],friendlyName:"Anton"},arial:{referencePoints:[15,40,82],friendlyName:"Arial"},'"arial black"':{referencePoints:[15,40,82],friendlyName:"Arial Black"},"avenida-w01":{referencePoints:[20,45,88],friendlyName:"Avenida"},"avenir-lt-w01_85-heavy1475544":{referencePoints:[15,40,82],friendlyName:"Avenir"},"avenir-lt-w01_35-light1475496":{referencePoints:[15,40,82],friendlyName:"Avenir Light"},basic:{referencePoints:[15,40,82],friendlyName:"Basic"},"belinda-w00-regular":{referencePoints:[19,44,88],friendlyName:"Belinda"},"bodoni-w01-poster":{referencePoints:[15,40,82],friendlyName:"Bodoni Poster"},"braggadocio-w01":{referencePoints:[15,36,78],friendlyName:"Braggadocio"},"brandon-grot-w01-light":{referencePoints:[18,42,86],friendlyName:"Brandon Grotesque"},"bree-w01-thin-oblique":{referencePoints:[16,40,82],friendlyName:"Bree"},caudex:{referencePoints:[16,41,84],friendlyName:"Caudex"},'"chelsea market"':{referencePoints:[15,40,82],friendlyName:"Chelsea Market"},cinzel:{referencePoints:[15,40,82],friendlyName:"Cinzel"},"clarendon-w01-medium-692107":{referencePoints:[17,44,84],friendlyName:"Clarendon LT"},'"comic sans ms"':{referencePoints:[15,40,82],friendlyName:"Comic Sans MS"},cookie:{referencePoints:[22,52,100],friendlyName:"Cookie"},"coquette-w00-light":{referencePoints:[18,44,84],friendlyName:"Coquette"},corben:{referencePoints:[16,42,82],friendlyName:"Corben"},'"courier new"':{referencePoints:[17,48,96],friendlyName:"Courier New"},"dinneuzeitgroteskltw01-_812426":{referencePoints:[15,40,82],friendlyName:"DIN Neuzeit Grotesk"},"din-next-w01-light":{referencePoints:[15,40,82],friendlyName:"DIN Next Light"},"droid-serif-w01-regular":{referencePoints:[15,40,82],friendlyName:"Droid Serif"},'"eb garamond"':{referencePoints:[18,42,84],friendlyName:"EB Garamond"},enriqueta:{referencePoints:[15,40,80],friendlyName:"Enriqueta"},forum:{referencePoints:[17,44,86],friendlyName:"Forum"},'"fredericka the great"':{referencePoints:[15,38,76],friendlyName:"Fredericka the Great"},"futura-lt-w01-book":{referencePoints:[15,38,76],friendlyName:"Futura"},"futura-lt-w01-light":{referencePoints:[15,38,76],friendlyName:"Futura Light"},georgia:{referencePoints:[15,40,80],friendlyName:"Georgia"},"geotica-w01-four-open":{referencePoints:[15,40,82],friendlyName:"Geotica Four Open"},"helvetica-w01-roman":{referencePoints:[15,40,82],friendlyName:"Helvetica"},impact:{referencePoints:[15,36,76],friendlyName:"Impact"},"itc-arecibo-w01-regular":{referencePoints:[18,44,88],friendlyName:"ITC Arecibo"},'"jockey one"':{referencePoints:[16,42,82],friendlyName:"Jockey One"},'"josefin slab"':{referencePoints:[18,42,82],friendlyName:"Josefin Slab"},jura:{referencePoints:[18,44,90],friendlyName:"Jura"},'"kelly slab"':{referencePoints:[15,38,78],friendlyName:"Kelly Slab"},"kepler-w03-light-scd-cp":{referencePoints:[18,45,85],friendlyName:"Kepler"},'"libre baskerville"':{referencePoints:[15,37,76],friendlyName:"Libre Baskerville"},"didot-w01-italic":{referencePoints:[15,40,82],friendlyName:"Linotype Didot"},lobster:{referencePoints:[17,42,82],friendlyName:"Lobster"},'"lucida console"':{referencePoints:[15,38,78],friendlyName:"Lucida Console"},'"lucida sans unicode"':{referencePoints:[15,38,78],friendlyName:"Lucida Sans Unicode"},"lulo-clean-w01-one-bold":{referencePoints:[14,36,76],friendlyName:"Lulo Clean"},'"marck script"':{referencePoints:[20,48,92],friendlyName:"Marck Script"},"marzo-w00-regular":{referencePoints:[15,40,78],friendlyName:"Marzo"},monoton:{referencePoints:[14,36,76],friendlyName:"Monoton"},"baskervillemtw01-smbdit":{referencePoints:[18,44,88],friendlyName:"Monotype Baskerville"},'"mr de haviland"':{referencePoints:[22,46,94],friendlyName:"Mr De Haviland"},"museo-w01-700":{referencePoints:[15,40,82],friendlyName:"Museo"},"museo-slab-w01-100":{referencePoints:[15,40,82],friendlyName:"Museo Slab"},niconne:{referencePoints:[20,46,90],friendlyName:"Niconne"},"nimbus-sans-tw01con":{referencePoints:[17,44,88],friendlyName:"Nimbus Sans"},'"noticia text"':{referencePoints:[15,40,82],friendlyName:"Noticia Text"},'"open sans"':{referencePoints:[15,40,82],friendlyName:"Open Sans"},'"open sans condensed"':{referencePoints:[15,40,82],friendlyName:"Open Sans Condensed"},overlock:{referencePoints:[16,42,84],friendlyName:"Overlock"},"pacifica-w00-condensed":{referencePoints:[14,36,74],friendlyName:"Pacifica Condensed"},'"palatino linotype"':{referencePoints:[16,44,86],friendlyName:"Palatino Linotype"},'"patrick hand"':{referencePoints:[17,44,86],friendlyName:"Patrick Hand"},"peaches-and-cream-regular-w00":{referencePoints:[26,54,120],friendlyName:"Peaches & Cream"},play:{referencePoints:[15,42,84],friendlyName:"Play"},'"playfair display"':{referencePoints:[15,40,82],friendlyName:"Playfair Display"},"proxima-n-w01-reg":{referencePoints:[15,41,82],friendlyName:"Proxima Nova"},raleway:{referencePoints:[15,40,82],friendlyName:"Raleway"},"reklamescriptw00-medium":{referencePoints:[16,40,80],friendlyName:"Reklame Script"},"rosewood-w01-regular":{referencePoints:[15,39,81],friendlyName:"Rosewood"},sacramento:{referencePoints:[24,46,88],friendlyName:"Sacramento"},sail:{referencePoints:[22,46,88],friendlyName:"Sail"},sarina:{referencePoints:[16,40,82],friendlyName:"Sarina"},signika:{referencePoints:[16,42,84],friendlyName:"Signika"},"snellroundhandw01-scrip":{referencePoints:[20,46,88],friendlyName:"Snell Roundhand"},"soho-w01-thin-condensed":{referencePoints:[16,40,82],friendlyName:"Soho Condensed"},spinnaker:{referencePoints:[15,40,82],friendlyName:"Spinnaker"},"stencil-w01-bold":{referencePoints:[14,38,78],friendlyName:"Stencil"},tahoma:{referencePoints:[15,40,82],friendlyName:"Tahoma"},'"times new roman"':{referencePoints:[16,42,86],friendlyName:"Times New Roman"},"trend-sans-w00-four":{referencePoints:[14,38,74],friendlyName:"Trend"},verdana:{referencePoints:[15,40,82],friendlyName:"Verdana"}},u={min:14,max:105},c={min:1,max:40},s=[[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[18,18,18,18,18,18,18,18,18,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17],[19,19,19,19,19,18,18,18,18,18,18,18,18,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17],[20,20,20,20,19,19,19,19,19,19,19,19,18,18,18,18,18,18,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17],[21,21,21,20,20,20,20,19,19,19,19,19,19,19,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18],[22,22,21,21,21,21,20,20,20,20,20,19,19,19,19,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18],[22,22,21,21,21,21,20,20,20,20,20,19,19,19,19,19,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18],[23,23,22,22,21,21,21,20,20,20,20,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19],[25,24,23,23,22,22,22,21,21,21,20,20,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19],[26,25,24,23,23,22,22,22,21,21,21,20,20,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19],[27,26,25,24,24,23,23,22,22,21,21,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],[28,27,26,25,24,23,23,22,22,21,21,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],[29,28,27,26,25,24,23,22,22,21,21,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],[30,29,28,27,26,25,24,23,23,22,22,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21],[31,30,29,28,27,26,25,24,23,23,22,22,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21],[32,31,30,29,28,27,26,25,24,23,23,22,22,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21],[33,32,31,30,29,28,27,26,25,24,24,23,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22],[34,33,32,31,30,29,28,27,26,25,24,23,23,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22],[34,33,32,31,30,29,28,27,26,25,24,23,23,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22],[35,34,33,32,31,30,29,28,27,26,25,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23],[35,34,33,32,31,30,29,28,27,26,25,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23],[36,35,34,33,32,31,30,29,28,27,26,25,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23],[36,35,34,33,32,31,30,29,28,27,26,25,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23],[37,36,34,34,33,32,31,30,29,28,27,26,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],[37,36,34,34,33,32,31,30,29,28,27,26,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],[37,36,34,34,33,32,31,30,29,28,27,26,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],[38,36,34,34,33,32,31,30,29,28,27,26,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],[38,36,34,34,33,32,31,30,29,28,27,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],[38,36,34,34,33,32,31,30,29,28,27,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],[39,36,34,34,33,32,31,30,29,28,27,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],[39,36,34,34,33,32,31,30,29,28,27,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],[39,36,34,34,33,32,31,30,29,28,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26],[39,36,34,34,33,32,31,30,29,28,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26],[40,36,34,34,33,32,31,30,29,28,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26],[40,36,34,34,33,32,31,30,29,28,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26],[40,36,34,34,33,32,31,30,29,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27],[40,36,34,34,33,32,31,30,29,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27],[40,36,34,34,33,32,31,30,29,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27],[40,36,34,34,33,32,31,30,29,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,34,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,34,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,35,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,35,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,38,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37]],f=[15,40,82];function l(n,e,t){return Math.max(Math.min(n,t),e)}var d=t(2),m=t(5),p=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var o=Array(n),r=0;for(e=0;e<t;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o},v=function(n,e){return m.a(n,e)},g=function(n){return i.map(m.b(n),"comps")},h=function(n){return i.get(n,["metaData","author"])};function y(n){var e=i.get(n,["metaData","originalCompId"]),t=h(n)||"studio";return i.assign({recommendedWidth:n.layout.width,recommendedHeight:n.layout.height,recommendedScale:n.layout.scale,author:t},e?{originalCompId:e}:{})}function C(n,e,t){return n?"rightTop"===t?{offsetX:e.layout.x-n.layout.x-n.layout.width,offsetY:e.layout.y-n.layout.y,offsetOrigin:t}:"leftBottom"===t?{offsetX:e.layout.x-n.layout.x,offsetY:e.layout.y-n.layout.y-n.layout.height,offsetOrigin:t}:{offsetX:e.layout.x-n.layout.x,offsetY:e.layout.y-n.layout.y,offsetOrigin:"leftTop"}:{offsetX:e.layout.x,offsetY:e.layout.y,offsetOrigin:"leftTop"}}function T(n,e,t){return void 0===e&&(e=0),void 0===t&&(t=0),t?"leftTop":e?"rightTop":n?"leftBottom":"leftTop"}function E(n){var e=i.map(n,"id"),t=v(n,"y"),o=g(t);return i.reduce(o,(function(n,t,o){if(1===i.size(t))return p(n,[{preset:t[0],offsetOrigin:T(o)}]);var r=v(t,"x"),a=g(r);return i.reduce(a,(function(n,t,r){if(1===i.size(t))return p(n,[{preset:t[0],offsetOrigin:T(o,r)}]);var a=i.sortBy(t,(function(n){return e.indexOf(n.id)})),u=i.map(a,(function(n,e){return{preset:n,offsetOrigin:T(o,r,e)}}));return p(n,u)}),n)}),[])}function D(n){var e=i.map(n.components,(function(n){return D(n)})),t=E(n.components),o=i.reduce(t,(function(n,e,o){var r=i.get(t,[o-1,"preset"],null),a=i.assign({},y(e.preset),C(r,e.preset,e.offsetOrigin),{orderIndex:o});return i.set(n,e.preset.id,a)}),{});return i.assign.apply(i,p([o],e))}function O(n){if(n.mobileStructure){var e=i.assign({metaData:{}},i.pick(n,["id","componentType","type"]),i.pick(n.mobileStructure,["layout"]),i.pick(n.mobileStructure,"metaData"));if(i.has(n,"components")){var t=i(n.components).map(O).compact().value();i.set(e,"components",t)}return e}}var b=t(1),N={color_11:"tmFull1",color_27:"tmFull1",color_32:"tmFull1",color_15:"tmFull2",color_18:"tmFull2",color_25:"tmFull2"},S={type:"Component",id:"TINY_MENU",componentType:"wysiwyg.viewer.components.mobile.TinyMenu",skin:"wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin",layout:i.merge(b.getTinyMenuDefaultPosition(),{height:d.a.TINY_MENU_SIZE,width:d.a.TINY_MENU_SIZE}),dataQuery:"#TINY_MENU",styleId:"tmFull1"},I="SITE_HEADER",x={tmFull1:{skin:"wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin",style:{properties:{borderwidth:"0",bg:"color_11","alpha-bg":0,txt:"color_11",separatorHeight:"0",textAlignment:"center",txts:"color_18",iconcolor:"color_15",iconcolorSelected:"color_11"}}},tmFull2:{skin:"wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin",style:{properties:{borderwidth:"0",bg:"color_11","alpha-bg":0,txt:"color_11",separatorHeight:"0",textAlignment:"center",txts:"color_18",iconcolor:"color_11",iconcolorSelected:"color_11"}}},tm2:{skin:"wysiwyg.viewer.skins.mobile.TinyMenuSkin",style:{properties:{bg:"color_11",bgh:"color_13",bgs:"color_18",txts:"color_15",txt:"color_15"}}}},M=function(){return x};function _(n){var e=b.getComponentByIdFromStructure(I,n),t=i.get(N,i.get(e.conversionData,"backgroundColor"),"tmFull1"),o=i.defaults({styleId:t},S);b.addComponentsTo(e,[o]),b.ensureContainerTightlyWrapsChildren(e,e.components,!0)}var P={type:"Component",id:"BACK_TO_TOP_BUTTON",componentType:"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",skin:"wysiwyg.viewer.skins.backtotopbutton.BackToTopButtonSkin",layout:{height:0,width:0,x:0,y:0},dataQuery:null,styleId:""},A=function(n){return b.addComponentsTo(n,[P])},w={TINY_MENU:o,BACK_TO_TOP_BUTTON:r},R=["TINY_MENU","BACK_TO_TOP_BUTTON","QUICK_ACTION_BAR","QUICK_ACTION_BAR_ITEM","MENU_AS_CONTAINER_TOGGLE","MENU_AS_CONTAINER_EXPANDABLE_MENU"],k=["wysiwyg.viewer.components.mobile.TinyMenu","wysiwyg.viewer.components.BackToTopButton","wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton","wysiwyg.viewer.components.QuickActionBar","wysiwyg.viewer.components.QuickActionBarItem","wysiwyg.viewer.components.MenuToggle","wysiwyg.viewer.components.ExpandableMenu"],B=function(n){return i.includes(k,i.get(n,"componentType"))};function L(n,e){var t=w[e];t&&!b.getComponentByIdFromStructure(e,n)&&t.addToStructure(n)}function G(n,e){if(e){for(var t=[],o=0;o<e.length;){var r=e[o];b.isVirtualGroup(r)&&(b.translateComps(r.components,r.layout.x,r.layout.y),b.addComponentsTo(n,r.components,o+1),t.push(r)),o++}b.removeChildrenFrom(n,t),i.forEach(e,(function(n){return G(n,n.components)}))}}var F=1e3;function H(n){return i.assign(n,{type:"undefined",id:i.toLower(n.componentType)+"_"+F++,skin:"undefined",styleId:"undefined"})}function j(n,e,t,o){var r=H({layout:b.getSnugLayout(e),conversionData:i.assign(t,{hasTightYMargin:!0,isTightContainer:!0,marginX:0}),componentType:d.a.VIRTUAL_GROUP_TYPES.RESCALE,components:e});return b.translateComps(e,-r.layout.x,-r.layout.y),b.removeChildrenFrom(n,e),b.addComponentsTo(n,[r],o),r}function z(n){i.forEach(n,(function(n){n.layout&&!b.isFixedPositionAllowed(n)&&(n.layout.fixedPosition=!1)}))}function W(n,e,t){var o=b.getAllCompsInStructure(n);return t.keepEmptyTextComponents||function n(e){var t;var o;if(e)for(t=e.length-1;t>=0;t--)o=e[t],b.isTextComponent(o)?0===i.get(o.conversionData,"textLength",0)&&e.splice(t,1):n(o.components)}(e),function n(e){i.remove(e,(function(t,o){return!!(b.isScreenWidthComponent(t)&&i.get(t,["conversionData","isSolidColorBackground"])&&function(n,e){return i.find(e,(function(e){return b.isScreenWidthComponent(e)&&n.layout.y===e.layout.y&&n.layout.height===e.layout.height}))}(t,i.slice(e,o+1)))||(n(t.components),!1)}))}(e),z(o),i.forEach(e,V),X(n,e),q(n,e,t.keepNotRecommendedMobileComponents),t.keepOutOfScreenComponents||function n(e,t,o,r){var i=0;var a;var u;var c;if(t)for(;i<t.length;)a=t[i],u=a.layout.y+a.layout.height,c=a.layout.x+a.layout.width,u+r<0||a.layout.x>1500||c+o<-500?t.splice(i,1):(n(a,a.components,o+a.layout.x,r+a.layout.y),i++);return e}(n,e,0,0),function n(e){i.forEachRight(e,(function(t,o){var r=Q(t,i.slice(e,0,o))||Q(t,i.slice(e,o),(function(n){return i.get(n,["conversionData","isSemiTransparentContainer"],!1)}));if(function(n,e){return e&&(i.get(e,["conversionData","nestOverlayingSiblings"],!0)||b.shouldReparentCompToChildOfContainer(n,e))&&!i.get(n,["conversionData","isNonContainableFullWidth"],!1)}(t,r)){var a=0;b.isColumnsContainerComponent(r)&&(a=r.layout.y,r=i.head(r.components)),b.reparentComponent(r,t),t.layout.y-=a,e.splice(o,1)}else n(t.components)}));return e}(e),t.keepOccludedAndEmptyBackgrounds||function n(e){var t=function(n){return n.conversionData.hideWhenEmptyBackgroundContainer&&n.conversionData.isSolidColorBackground&&b.isEmptyContainer(n)};i.remove(e,(function(e){return!!t(e)||("columns"===i.get(e,["conversionData","category"])&&i.every(e.components,t)||n(e.components),!1)}))}(e),b.isMasterPage(n)&&U(e),t.keepInvisibleComponents||function n(e){i.forEachRight(e,(function(t,o){Q(t,i.slice(e,o+1),i.negate((function(n){return i.get(n,["conversionData","isSemiTransparentContainer"],!1)||i.get(n,["conversionData","structuralItem"],!1)})),1)?(i.set(t,["conversionData","mobileHints","hidden"],!0),e.splice(o,1)):n(t.components)}))}(e),n}function U(n){var e=i.find(n,{id:"SITE_HEADER"}),t=i.find(n,{id:"SITE_FOOTER"});i(n).remove(i.negate(b.isAllowedToBeInMasterPage)).forEach((function(n){var o=function(n,e){var t=function(n){return n.layout.y+(n.layout.height||0)/2},o=t(n);return i.size(e)?i.minBy(e,(function(n){var e=Math.abs(o-t(n));return i.isNaN(e)?0:e})):null}(n,[e,t]);b.reparentComponent(o,n)}))}var Y=function(n,e){return i.reduce(n,(function(n,e){return n[e.id]=e,e.components&&Y(e.components,n),n}),e)};function V(n){i.forEach(n.components,V);var e=i.get(n,["conversionData","actualTextWidth"]);if(!(i.isUndefined(e)||e>=n.layout.width))if(0!==e){var t=i.get(n,["conversionData","textAlignments"],["left"]);if(1===i.size(t)){switch(i.head(t)){case"center":n.layout.x+=(n.layout.width-e)/2;break;case"right":n.layout.x+=n.layout.width-e}n.layout.width=e}}else n.layout.width=0}function X(n,e){for(var t=0,o=function(){var o=e[t],r=o.components;if(!i.get(o,["conversionData","mobileHints","hidden"]))return b.isColumnsContainerComponent(o)?(i(r).filter("conversionData.mobileHints.hidden").forEach((function(n){return b.translateComps(n.components,o.layout.x,o.layout.y)})),X(n,r)):X(o,r),t++,"continue";b.isContainerComponent(o)&&(b.translateComps(r,o.layout.x,o.layout.y),b.addComponentsTo(n,r),o.components=[]),e.splice(t,1)};t<i.size(e);)o()}function q(n,e,t){b.isMergeVirtualGroup(n)||i.remove(e,(function(n){if(i.get(n,["conversionData","desktopOnly"])||!t&&i.get(n,["conversionData","hideByDefault"]))return!0;q(n,n.components,t)}))}function Q(n,e,t,o){return void 0===o&&(o=.75),b.isSiteSegmentOrPage(n)?null:i.find(e,(function(e){return e.id!==n.id&&"PAGES_CONTAINER"!==e.id&&(!t||t(e))&&(b.isContainerComponent(e)||b.isPageComponent(e))&&(b.haveSufficientOverlap(e,n,o)||n.conversionData.isInvisible&&b.getYOverlap(e,n)>0)&&b.hasGreaterArea(e,n)}))}var K=t(4),Z=90;function J(n,e){i.forEachRight(Object(b.getChildren)(n),(function(t,o){var r,a,u,c;if($(t))return nn(t)&&!en(t)?((r=t).layout.rotationInDegrees=Z,void i.assign(r.layout,K.boundingLayout.getBoundingLayout(r.layout))):void(e&&(a=n,u=o,c=Object(b.getChildren)(a),i.remove(a.conversionData.componentsOrder,c[u].id),c.splice(u,1)));J(t,e)}))}var $=function(n){return i.get(n,["conversionData","keepIfVerticalDivider"],!1)},nn=function(n){return $(n)&&i.get(n,["conversionData","isVerticalDivider"],!1)},en=function(n){return n.layout.rotationInDegrees===Z};function tn(n,e){!function n(e){i.forEach(Object(b.getChildren)(e),(function(e){nn(e)?en(e)&&(e.layout.rotationInDegrees=-Z,i.assign(e.layout,K.boundingLayout.getBoundingLayout(e.layout)),e.layout.rotationInDegrees=Z):n(e)}))}(n),G(n,e)}function on(n){return n.layout&&(delete n.layout.anchors,B(n)||Object(b.isDockingAllowed)(n)||delete n.layout.docked),delete n.conversionData,n}function rn(n){var e=Object(b.getAllCompsInStructure)(n);return i.forEach(e,on),on(n)}var an=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var o=Array(n),r=0;for(e=0;e<t;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o};function un(n,e){return i.reduce(e,(function(e,t,o){return n[o]&&t.componentType&&n[o].componentType!==t.componentType&&e.push(o),e}),[])}function cn(n,e){var t=i.difference(i.keys(n),i.keys(e)),o=un(n,e);return an(t,o)}function sn(n,e){var t=i.difference(i.keys(e),i.keys(n));i.forEach(t,(function(n){return delete e[n]}))}function fn(n,e){i.forEach(b.getAllCompsInStructure(e),(function(e){var t=b.getComponentByIdFromStructure(e.id,n);t&&i.forEach(["dataQuery","nickname","behaviorQuery","connectionQuery"],(function(n){t.hasOwnProperty(n)?e[n]=t[n]:delete e[n]}))}))}function ln(n,e){var t=i(n).filter(["conversionData.mobileHints.hidden",!0]).map("id").value(),o=function(n,e){if(i.isEmpty(e))return[];var t=i(e).filter((function(e){return!0===i.get(n,[e,"conversionData","filterChildrenWhenHidden"])})).uniq().value(),o=i(t).filter((function(e){return i.get(n[e],["conversionData","structuralContainer"],!1)})).flatMap((function(e){return i.map(b.getAllCompsInStructure(n[e],!1)||[],"id")})).compact().value(),r=i(t).filter((function(e){return b.isColumnsContainerComponent(n[e])})).flatMap((function(e){return i.get(n[e],"components",[])})).map("id").compact().value(),a=i.union(o,r);return i.difference(a,e)}(n,t),r=an(t,o),a=i(e).values().reject(B).map("id").value(),u=i.intersection(a,r),c=i.map(n,"id"),s=i.difference(a,c),f=un(n,e);return{idsOfComponentsToDelete:i.uniq(an(f,s,u)),idsOfComponentsToAdd:i.difference(cn(n,e),r)||[]}}var dn=t(3);function mn(n,e){var t,o;!function(n,e){i.forEach(e,(function(t,o){t.conversionData.isTransparentContainer&&(t=i.head(t.components)||t);var r=e[o-1],a=Boolean(r),u=a&&r.layout.y+r.layout.height===t.layout.y&&r.layout.x===t.layout.x,c=i.get(n,["conversionData","hasTightMarginBetweenChildren"],!1);t.conversionData.tightWithPreviousSibling=u||a&&c}))}(n,e),function(n,e){n.conversionData.hasTightBottomMargin=i.some(e,(function(e){var t=i.get(e,["conversionData","isTransparentContainer"])&&!i.isEmpty(e.components)?i.head(e.components):e;return b.shouldStretchToScreenWidth(t)&&t.layout.y+t.layout.height>=n.layout.height}))}(n,e),t=e,o=i.size(t)-1,i.forEach(t,(function(n){var e=b.getChildren(n);n.conversionData.hasTightYMargin=!0===n.conversionData.isTightContainer||i.isEmpty(e)||!0===n.conversionData.isTransparentContainer&&(0===o||"column"!==n.conversionData.category)})),function(n,e){var t=i(e).map((function(n){var e=n.conversionData.textAlignments||[];return i(e).uniq().size()>1?"mixed":i.head(e)})).compact().uniq().value();1===i.size(t)&&(n.conversionData.naturalAlignment=i.head(t))}(n,e)}var pn=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var o=Array(n),r=0;for(e=0;e<t;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o};function vn(n,e){!function n(e,t){if(i.isEmpty(e.components))return;e.proportionGroups=e.proportionGroups||[];var o=[];var r=K.objectUtils.cloneDeep(e);var a=b.getChildren(r);var u=function(){var n=hn(a[0],a);if(0===n.length)return i.remove(b.getChildren(r),a[0]),"continue";b.removeChildrenFrom(r,n),n.forEach((function(e){var t=hn(e,a);n=n.concat(t),b.removeChildrenFrom(r,t)})),n.length>1&&o.push(i.map(n,"id"))};for(;a.length>0;)u();e.proportionGroups=pn(e.proportionGroups,o);i.forEach(t,(function(e){return n(e,e.components)}))}(n,e),function n(e,t){var o=function(n){return i.find(e.components,{id:n})};i.forEach(e.proportionGroups,(function(n){if(i.every(n,o)){var t=b.getComponentsByIds(e,n);j(e,t,{rescaleMethod:"proportional"})}}));i.forEach(t,(function(e){return n(e,e.components)}))}(n,e),function n(e,t){delete e.proportionGroups;i.forEach(t,(function(e){return n(e,e.components)}))}(n,e)}function gn(n){return!b.isRescaleVirtualGroup(n)&&i.get(n,["conversionData","textLength"],0)<=d.a.TEXT_MAX_LENGTH_FOR_RESCALING&&i.get(n,["conversionData","isSuitableForProportionGrouping"],!1)&&i.every(n.components,gn)}function hn(n,e){return gn(n)?i.filter(e,(function(e){return gn(e)&&b.haveSufficientOverlap(n,e,.25)})):[]}var yn=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var o=Array(n),r=0;for(e=0;e<t;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o},Cn=500;function Tn(n,e,t,o){if(t<.01)return"break";if(t<.1)return"tight";var r=function(){return o>500?"h2v":"proportional"},a=function(){return o<500?"proportional":"tight"},u=function(){return"h2v"},c={photo:{text:r,graphic:r,photo:function(){return t>.5&&o<600?"proportional":"tight"}},graphic:{text:r,graphic:r,photo:r},text:{text:function(){return t>.5&&o<500?"proportional":"break"}},columns:{text:u,photo:u,graphic:u},group:{text:a,photo:a,graphic:a}};return i.get(c,[n,e],(function(){return"break"}))()}var En=function(n){return n.layout.x},Dn=function(n){return n.layout.y},On=function(n){return n.layout.width},bn=function(n){return n.layout.height},Nn=function(n){return En(n)+On(n)},Sn=function(n){return Dn(n)+bn(n)},In=function(n){return On(n)*bn(n)},xn=function(n,e,t,o){return{layout:{x:o,y:n,width:Math.max(0,e-o),height:Math.max(0,t-n)}}},Mn=function(n,e){return xn(Math.max(Dn(n),Dn(e)),Math.min(Nn(n),Nn(e)),Math.min(Sn(n),Sn(e)),Math.max(En(n),En(e)))},_n=function(n,e){return xn(Math.min(Dn(n),Dn(e)),Math.max(Nn(n),Nn(e)),Math.max(Sn(n),Sn(e)),Math.min(En(n),En(e)))};function Pn(n){return{rescaleMethod:"break",overlapRatio:0,conversionData:i.pick(n.conversionData,"category"),layout:n.layout,components:[n]}}function An(n,e){var t=In(Mn(n,e))/In(e);return{rescaleMethod:Tn(n.conversionData.category,e.conversionData.category,t,On(_n(n,e))),overlapRatio:t}}function wn(n,e){if(1===i.size(e.components)&&i.get(e.components[0],["conversionData","isInvisible"],!1))return n;var t=i.map(n,(function(n){return An(n,e)})),o=function(n){var e=i(n).map((function(n,e){return"break"!==n.rescaleMethod?e:null})).filter(i.isNumber.bind(i)).value();return i.size(e)<=1?e:i.every(e,(function(e){return"proportional"===n[e].rescaleMethod}))?e:[i.maxBy(e,(function(e){return n[e].overlapRatio}))]}(t);if(i.isEmpty(o))return yn(n,[e]);var r=i.reduce(o,(function(e,o){var r=n[o];return function(n){if(!i.includes(["h2v","tight"],n.rescaleMethod))return n;var e="tight"===n.rescaleMethod?0:n.overlapRatio;return i.forEach(n.components,(function(n,t){t&&(i.assign(n.conversionData,{tightWithPreviousSibling:!0,yOffsetRatio:e}),b.isTextComponent(n)&&(n.conversionData.yOffset=n.conversionData.mobileScale*n.conversionData.mobileAdjustedAverageFontSize*.5))})),n}(i.assign({components:yn(r.components,e.components),layout:_n(e,r).layout,conversionData:{category:"group",isTightContainer:!0,marginX:0}},t[o]))}),e);return i.remove(n,(function(n,e){return i.includes(o,e)})),n.push(r),i.reduce(n,wn,[])}var Rn=function(n){return i(n).groupBy("conversionData.overlayGroupId").filter((function(n,e){return e&&i.size(n)>1})).value()},kn=function(n){return i(n).map(Pn).reduce(wn,[])};function Bn(n){var e=b.getSnugLayout(n);return e.width>=Cn?i.findIndex(n,(function(n){return i.isEqual(b.getSnugLayout([n]),e)})):-1}function Ln(n,e){return i.reduce(n,(function(n,t,o){var r=Object(dn.e)(o-e)+(e?1:0);return n[r]?i.set(n,r,{components:yn(n[r].components,[t]),rescaleMethod:"reorder"}):i.set(n,r,{rescaleMethod:"break",components:[t]})}),[])}function Gn(n){var e=Bn(n);return-1===e?[{rescaleMethod:"break",components:n}]:Ln(n,e)}function Fn(n,e){var t={};return i.forEach(e,(function(e){var o=j(n,e.components,{rescaleMethod:e.rescaleMethod,category:"boxContainer"}),r=i(e.components).map("id").reduce((function(n,e){return i.set(n,e,o)}),{});i.assign(t,r)})),t}function Hn(n,e){jn(n,Fn(n,e))}function jn(n,e){n.conversionData.componentsOrder=i.reduce(n.conversionData.componentsOrder,(function(n,t){var o=i.get(e,[t,"id"],t);return i.includes(n,o)?n:yn(n,[o])}),[])}function zn(n,e){Hn(n,i(Rn(e)).flatMap(Gn).filter({rescaleMethod:"reorder"}).value())}function Wn(n,e){var t=i(Rn(e)).map((function(e){return Object(dn.h)(n,e)})).flatMap(kn).reject({rescaleMethod:"break"}).value();Hn(n,t)}var Un=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var o=Array(n),r=0;for(e=0;e<t;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o},Yn={LOGO:{min:-10,max:25},ROW:{min:-10,max:80}},Vn={MARKER:3,LOGO_TITLE:20},Xn=100,qn=20,Qn=2,Kn=2,Zn={ROW:{rescaleMethod:"row"},LOGO:{rescaleMethod:"logo"}},Jn=function(n){return!n.layout.fixedPosition&&!n.layout.rotationInDegrees},$n=function(n){return-b.getXOverlap(n[0],n[1])},ne=function(n,e){return i.inRange($n(n),e.min,e.max)},ee=function(n){return b.isTextComponent(n)&&n.conversionData.textLength<=Vn.MARKER},te=function(n){return b.isGraphicComponent(n)&&n.layout.width<=Xn},oe=function(n){return te(n)||ee(n)},re=function(n){return i.find(n,oe)},ie=function(n){return i.find(n,["conversionData.inlineWhenGrouped",!0])},ae=function(n){return(function(n){if(!i.every(n,b.isTextComponent)||!ne(n,Yn.LOGO))return!1;var e=i(["textColors","averageFontSize","fontNames"]).map((function(e){return i.isEqual(i.get(n,[0,"conversionData",e]),i.get(n,[1,"conversionData",e]))})).compact().size(),t=i.sumBy(n,"conversionData.textLength");return e<=1&&t<=Vn.LOGO_TITLE}(n)||function(n){var e=i.find(n,["conversionData.category","text"]),t=i.find(n,["conversionData.category","graphic"]);if(!e||!t)return!1;return ne(n,Yn.LOGO)&&e.conversionData.textLength<=Vn.LOGO_TITLE&&t.layout.width<=Xn}(n))&&ce(n)},ue=function(n){return i(n).sortBy("layout.x").map("id").value()},ce=function(n){return i.size(n)===Qn&&n[0]&&n[1]&&b.getYOverlap(n[0],n[1])>0};function se(n,e){i(e).map((function(n,t){return function(n,e,t){var o=[t[e-1],n],r=[n,t[e+1]];if(ae(o)&&!ae(r))return{groupComps:o,conversionData:Zn.LOGO}}(n,t,e)})).compact().forEachRight((function(t){return fe(n,e,t)}))}function fe(n,e,t){var o=n.conversionData.componentsOrder.indexOf(t.groupComps[0].id),r=i.assign({},t.conversionData,{componentsOrder:ue(t.groupComps)}),a=j(n,t.groupComps,r,o);return n.conversionData.componentsOrder.splice(o,t.groupComps.length,a.id),e.splice(o,t.groupComps.length,a),a}function le(n,e){var t=re(n);return ne(n,e)&&i.every(n,b.isTextComponent)&&ee(t)}function de(n,e){var t=re(n),o=i.reject(n,t)[0];return ne(n,e)&&b.isTextComponent(o)&&te(t)}function me(n){if(!i.every(n,Jn))return!1;var e,t,o,r=i.take(n,Qn),a=i.takeRight(n,Qn),u=(e=r,t=i.take(e,Qn),o=$n(t),{min:i.max([o-qn,Yn.ROW.min]),max:i.min([o+qn,Yn.ROW.max])});return(de(r,Yn.ROW)&&de(a,u)||le(r,Yn.ROW)&&le(a,u))&&ce(r)&&ce(a)}function pe(n){var e=Kn*Qn,t={foundLists:[],curChunk:[]};return i.forEach(n,(function(n){t.curChunk.push(n);var o,r,a,u=i.last(t.foundLists);return u&&i.size(t.curChunk)===Qn&&(o=u,r=t.curChunk,a=i.take(o,Qn),me(Un(a,r)))?(u.splice.apply(u,Un([u.length,0],t.curChunk)),i.assign(t,{curChunk:[]})):i.size(t.curChunk)<e?void 0:me(t.curChunk)?(t.foundLists.push(t.curChunk),i.assign(t,{curChunk:[]})):i.assign(t,{curChunk:i.tail(t.curChunk)})})),i.flatMap(t.foundLists,(function(n){return function(n){return i(n).map((function(e,t){return t%Qn?{conversionData:Zn.ROW,groupComps:[n[t-1],e]}:null})).compact().value()}(n)}))}function ve(n){if(!Object(dn.g)(n)){var e=Object(dn.d)(n);i.size(e)&&(!function(n,e){n.conversionData.isTightContainer&&e.length===Qn&&!b.shouldStretchToScreenWidth(n)&&ne(e,Yn.ROW)&&ie(e)&&i.assign(n.conversionData,Zn.ROW,{componentsOrder:ue(e)})}(n,e),function(n,e){var t=pe(e);i.forEachRight(t,(function(t){return fe(n,e,t)}))}(n,e),se(n,e))}}function ge(n){if(!Object(dn.f)(n)){ve(n);var e=Object(dn.d)(n);i.forEach(e,ge)}}function he(n,e){var t=b.getChildren(n);if(t){var o=i.map(t,"id"),r=i.get(n,["conversionData","mobileHints","recommendedComponentsOrder"]);r?i.set(n,["conversionData","componentsOrder"],i.intersection(r,o)):(Object(dn.g)(n)?i.set(n,["conversionData","componentsOrder"],o):(Object(m.c)(n,t,e),e.detectSemanticGroups&&e.useOverlapRules&&function(n){zn(n,Object(dn.d)(n)),Wn(n,Object(dn.d)(n))}(n)),mn(n,Object(dn.d)(n))),i.forEach(Object(dn.d)(n),(function(n){return he(n,e)}))}}function ye(n,e){i.defaults(n,{conversionData:{}});var t=b.getChildren(n);t&&(e.detectSemanticGroups&&(F=1e3,e.useOverlapRules||vn(n,t)),he(n,e),e.applySemanticRules&&ge(n),function n(e,t){void 0===t&&(t=d.a.MOBILE_WIDTH);var o=t-2*d.a.SECTION_MOBILE_MARGIN_Y;i.forEach(e,(function(e){"appWidget"===e.conversionData.category&&(i.assign(e.conversionData,i.pick(i.get(e,["components",0,"conversionData"],{}),"fixedSize")),i.assign(e.conversionData.mobileHints,i.pick(i.get(e,["components",0,"conversionData","mobileHints"],{}),["recommendedWidth","recommendedHeight"]))),dn.f(e)||("boxContainer"===e.conversionData.category&&e.layout.width<=o?i.assign(e.conversionData,{rescaleMethod:"none",fixedSize:{width:e.layout.width}}):"boxContainer"===e.conversionData.category&&!e.conversionData.rescaleMethod&&e.layout.width<=400?i.assign(e.conversionData,{rescaleMethod:"proportional"}):n(b.getChildren(e),b.shouldStretchToScreenWidth(e)?t:o))}))}(t),J(n,!e.keepNotRecommendedMobileComponents))}var Ce=.96;function Te(n,e,t){void 0===t&&(t=["x","y","width","height"]),1!==e&&i.assign(n.layout,i.zipObject(t,i.map(t,(function(t){return Math.round(n.layout[t]*e)}))))}function Ee(n,e){Te(n,e),i.forEach(n.components,(function(n){return Ee(n,e)})),De(n,e)}function De(n,e){if(b.isTextComponent(n)){var t=n.conversionData.averageFontSize||0;n.layout.scale=t*e*Ce/n.conversionData.mobileAdjustedAverageFontSize}}function Oe(n,e){var t=i.get(n.conversionData,["mobileHints","recommendedHeight"]);if(t)n.layout.height=t;else if(b.isTextComponent(n))n.layout.height=d.a.DEFAULT_TEXT_HEIGHT;else{var o=i.get(n.conversionData.fixedSize,"height"),r=n.layout.height,a=n.conversionData.minHeight||0;i.isNumber(o)?n.layout.height=o:i.get(n.conversionData,"preserveAspectRatio",!0)?n.layout.height=Math.round(n.layout.height*e.scaleFactor):a&&(n.layout.height=0),n.layout.height=a<r?Math.max(n.layout.height,a):r;var u=b.getHeightAccordingToChildren(n,i.reject(n.components,"conversionData.isInvisible"),!1);u&&(!o||o<=u||b.containsComponent(n,b.isTextComponent))&&(n.layout.height=u)}}var be=function(n){return i.sortBy(n.components,(function(e){return n.conversionData.componentsOrder.indexOf(e.id)}))},Ne=1,Se=40,Ie=function(n){return i(n).filter(b.isTextComponent).forEach((function(n){return De(n,1)}))},xe=function(n){return i.maxBy(n,"conversionData.textLength")},Me=function(n){return n.layout.x+n.layout.width};function _e(n,e){var t=be(n);if(Ie(t),e>=Ne)!function(n,e){var t=xe(e),o=n.layout.width-Me(e[1]);t.layout.width+=o,e[0]===t&&(e[1].layout.x+=o)}(n,t);else{var o=xe(t),r=t[t.indexOf(o)?0:1],i=Object(b.isGraphicComponent)(r)?Se:r.layout.width;if(r.layout.width*e>=i)return Te(r,e),void Te(o,e);var a=-Object(b.getXOverlap)(r,o),u=r.layout.width<i?r.layout.width:i,c=u/r.layout.width,s=(n.layout.width-u-a)/(Me(t[1])-r.layout.width-a),f=["width","height"];Te(r,c,f),Te(o,s,f),t[1].layout.x=Me(t[0])+a}}function Pe(n,e,t,o){i.has(n,["conversionData","preset"])&&i.get(n,["conversionData","shouldApplyPreset"])?function n(e,t){return i.assign(e,i.omit(t,["conversionData","components"])),e.components&&(e.components=i(t.components).map((function(t){var o=b.getComponentByIdFromStructure(t.id,e);return o?n(o,t):null})).compact().value()),e}(n,n.conversionData.preset):n.layout.width>e||n.conversionData.shouldEnlargeToFitWidth||n.layout.width>d.a.MIN_WIDTH_FOR_ENLARGE||t||"row"===n.conversionData.rescaleMethod?we(n,e,o):Oe(n,{scaleFactor:1})}function Ae(n,e,t,o){void 0===o&&(o={imageScaleFactor:1,applyFontScaling:!0});var r=e.conversionData.topRightMargin||[0,0],a=be(n),u=i.head(a),c=function n(e,t,o){return"leftTop"===i.get(o,["conversionData","mobileHints","offsetOrigin"])?i.get(o.conversionData,["mobileHints","offsetY"],0):e.conversionData.hasTightYMargin||!o?0:o.conversionData.isTransparentContainer?n(e,t,i.head(o.components)):b.shouldStretchToScreenWidth(o)&&!o.layout.y?0:(t.conversionData.borderWidth||0)+(b.shouldStretchToScreenWidth(t)?d.a.SECTION_MOBILE_MARGIN_Y:d.a.COMPONENT_MOBILE_MARGIN_Y)}(n,e,u),s=c;i.forEach(a,(function(u,f){var l=function(n,e){if("leftTop"===i.get(n.conversionData,["mobileHints","offsetOrigin"]))return i.get(n.conversionData,["mobileHints","offsetX"],0);if(e.conversionData.isTransparentContainer&&"column"!==e.conversionData.category)return 0;var t=e.conversionData.marginX;return i.isNumber(t)?t:(b.shouldStretchToScreenWidth(e)?d.a.SITE_SEGMENT_PADDING_X:d.a.COMPONENT_MOBILE_MARGIN_X)+i.get(e.conversionData,"borderWidth",0)}(u,e);(o.applyFontScaling&&b.isTextComponent(u)||u.conversionData.mobileScale)&&(u.layout.scale=u.conversionData.mobileScale);var m=b.shouldStretchToScreenWidth(u),p=l,v=l,g=u.conversionData.isInvisible||m?"screen":n.conversionData.naturalAlignment||"center";s<r[1]-c&&(v=Math.max(v,r[0]),"center"===g&&(p=v));var h,y,C=t-p-v,T=function(n,e,t,o,r){if(o)return e;var a=i.get(n.conversionData,["mobileHints","recommendedWidth"]);if(a)return a;if("photo"===n.conversionData.category&&1!==r.imageScaleFactor)return Math.min(t,Math.round(n.layout.width*r.imageScaleFactor));var u=i.get(n.conversionData.fixedSize,"width");return u?Math.min(e,+u):null}(u,t,C,m,o),E=i.isNumber(T);Pe(u,E?T:C,E,o),s<r[1]&&T>C&&!u.conversionData.isTransparentContainer&&(s=r[1],v=p=l),i.isNumber(u.conversionData.yOffset)?s-=u.conversionData.yOffset:u.conversionData.yOffsetRatio&&(s-=u.layout.height*u.conversionData.yOffsetRatio),u.layout.x=function(n,e,t,o,r,a){return"leftTop"===i.get(n,["conversionData","mobileHints","offsetOrigin"])?i.get(a,["layout","x"],0)+i.get(n.conversionData,["mobileHints","offsetX"],0):a&&"rightTop"===i.get(n,["conversionData","mobileHints","offsetOrigin"])?a.layout.x+a.layout.width+i.get(n.conversionData,["mobileHints","offsetX"],0):a&&"leftBottom"===i.get(n,["conversionData","mobileHints","offsetOrigin"])?a.layout.x+i.get(n.conversionData,["mobileHints","offsetX"],0):"screen"===e?0:"left"===e?r:"right"===e?t-n.layout.width-o:Math.round((t-n.layout.width)/2)}(u,g,t,v,p,a[f-1]),u.layout.y=s-(u.conversionData.isInvisible&&!f?c+1:0),u.conversionData.stackLayout||(s+=u.conversionData.isInvisible?1:u.layout.height+(h=u,y=a[f+1],"leftBottom"===i.get(y,["conversionData","mobileHints","offsetOrigin"])?i.get(y.conversionData,["mobileHints","offsetY"],0):h&&"rightTop"===i.get(y,["conversionData","mobileHints","offsetOrigin"])?i.get(y.conversionData,["mobileHints","offsetY"],0)-h.layout.height:h&&"leftTop"===i.get(y,["conversionData","mobileHints","offsetOrigin"])?i.get(y.conversionData,["mobileHints","offsetY"],0)-h.layout.height:!y||y.conversionData.tightWithPreviousSibling?0:b.isTextComponent(h)&&!b.isTextComponent(y)?d.a.MARGIN_BETWEEN_TEXT_AND_NON_TEXT:d.a.COMPONENT_MOBILE_MARGIN_Y))}))}function we(n,e,t){void 0===t&&(t={imageScaleFactor:1,applyFontScaling:!0});var o=n.layout.width>0?e/n.layout.width:1,r=n.conversionData.rescaleMethod;"none"!==r&&(n.layout.width=e);var a=i.assign(t,{imageScaleFactor:n.conversionData.descendantImageScaleFactor||t.imageScaleFactor});switch(r){case"proportional":i.forEach(n.components,(function(n){return Ee(n,o)}));break;case"logo":!function(n,e){i.forEach(n.components,(function(n){return Ee(n,i.min([e,Ne]))}))}(n,o);break;case"row":_e(n,o);break;case"none":break;default:Ae(n,n,e,a)}Oe(n,{scaleFactor:o})}function Re(n){var e={layout:b.getSnugLayout(n),conversionData:{rescaleMethod:"default",hasTightYMargin:!0,isTightContainer:!0},componentType:d.a.VIRTUAL_GROUP_TYPES.MERGE,components:n},t=H(e);return b.translateComps(n,-e.layout.x,-e.layout.y),t}function ke(n,e){return void 0===e&&(e=[]),e.push(n.id),i.forEach(b.getChildren(n),(function(n){e=e.concat(ke(n))})),e}function Be(n,e,t){i.defaults(n.conversionData,{blocks:[],blockLayout:[]});var o=b.getChildren(n);o||(o=n.components=[]);var r=function(n,e){var t=i.get(e,["conversionData","blocks"],[]);return i.findIndex(t,(function(e){return i.includes(e,n)}))}(t,n),a=K.objectUtils.cloneDeep(e);a.layout.y=function(n,e,t){var o=i.get(e,["conversionData","blockLayout"]);if(n>=0)return o[n].y+o[n].height+d.a.COMPONENT_MOBILE_MARGIN_Y;if(!b.shouldStretchToScreenWidth(t))return d.a.COMPONENT_MOBILE_MARGIN_Y;return e.layout.y?d.a.SECTION_MOBILE_MARGIN_Y:0}(r,n,e),o.push(a);var u=i.get(n,["conversionData","blockLayout",r+1,"y"]);i.isNumber(u)&&Ge(n,r,a.layout.y+a.layout.height+d.a.COMPONENT_MOBILE_MARGIN_Y-u);n.conversionData.blocks.splice(r+1,0,[a.id]),n.conversionData.blockLayout.splice(r+1,0,a.layout)}function Le(n){var e=b.getChildren(n);if(!b.isMasterPage(n)&&!i.isEmpty(e)){var t=i.reduce(e,(function(n,e){return Math.max(n,e.layout.y+e.layout.height)}),0),o=b.isPageComponent(n)?0:d.a.COMPONENT_MOBILE_MARGIN_Y;n.layout.height=Math.max(n.layout.height,t+o)}}function Ge(n,e,t){var o,r,a,u=b.getChildren(n);for(r=e+1;r<i.get(n,["conversionData","blocks","length"],0);r++){for(a=n.conversionData.blocks[r],o=0;o<a.length;o++)i.find(u,{id:a[o]}).layout.y+=t;n.conversionData.blockLayout[r].y+=t}if(e>-1)for(a=i.get(n,["conversionData","blocks",e]),o=0;o<a.length;o++)i.find(u,{id:a[o]})}function Fe(n,e,t){if(b.isMasterPage(n)){var o=b.getChildren(n);U(o),t.reparentMobileSOAP&&function(n,e){var t=Y(n,{}),o=i.remove(e,(function(n){return!B(n)&&t[n.id]&&!b.isAllowedToBeInMasterPage(t[n.id])}));i.forEach(o,(function(n){var e=i.get(t,[n.id,"conversionData"]);i.set(e,"fixedSize",{width:n.layout.width,height:n.layout.height}),i.set(e,["mobileHints","propertyQuery"],n.propertyQuery)}))}(o,b.getChildren(e))}var r=b.getAllCompsInStructure(n,!1,i.negate(b.isDesktopOnlyComponent)),a=b.getAllCompsInStructure(e);je(e),function n(e,t){var o=b.getComponentByIdFromStructure(t.id,e);var r=i.get(o,"styleId");r&&i.set(t,"styleId",r);i.forEach(b.getChildren(t),n.bind(null,e))}(n,e);var u=ln(r,a);if(u.idsOfComponentsToDelete.length>0||u.idsOfComponentsToAdd.length>0){var c=t.keepNotRecommendedMobileComponents?u.idsOfComponentsToAdd:He(u.idsOfComponentsToAdd,r);!function(n,e,t,o,r){Ue(n),We(n,e,o),function(n,e,t,o){var r,a,u,c=K.objectUtils.cloneDeep(e);W(c,b.getChildren(c),o);var s=function(n,e,t){var o,r,a=[];for(o=n.length-1;o>=0;o--){var u=n[o],c=b.getComponentByIdFromStructure(u,e);if(b.isGroupComponent(c)){var s=i.partition(c.components,(function(e){return i.includes(n,e.id)})),f=i(s[1]).map((function(n){return b.getComponentByIdFromStructure(n.id,t)})).compact().value(),l=!0;for(r=1;r<f.length;r++){var d=b.getParent(f[r-1].id,t),m=b.getParent(f[r].id,t);d.id!==m.id&&(l=!1)}if(!l){n.splice(o,1);continue}if(0===f.length)continue;var p=i.clone(c);p.components=[],p.layout=b.getSnugLayout(f);var v=b.getParent(f[0].id,t);for(b.addComponentsTo(v,[p]),r=0;r<f.length;r++){var g=f[r];b.reparentComponent(p,g),i.remove(b.getChildren(v),g)}a.push(n[o]),n.splice(o,1)}}return a}(t,c,n);i.isEmpty(s)||Ue(n);r=function(n,e){var t,o,r,a,u,c=[],s=n.map((function(n){return b.getComponentByIdFromStructure(n,e)}));if(s=i.without(s,null),i.isEmpty(s))return c;return r=s.map((function(n){return function(n){if(!b.getChildren(n))return;n.components=[],i.assign(n.conversionData,{blocks:[],blockLayout:[],componentsOrder:[]})}(o=K.objectUtils.cloneDeep(n)),o})),i.forEachRight(r,(function(n){var e,o,f=!1;for(t=r.length-1;t>=0;t--)if(a=r[t],u=s[t],e=n,o=u,i.some(b.getChildren(o),{id:e.id})){f=!0,b.reparentComponent(a,n);break}f||c.push(n)})),c}(t,c),ye(c,o),i.isEmpty(t)||(function(n,e){i.forEach(n,(function(n){var e=i.head(n.componentToAdd);b.isRescaleVirtualGroup(e)&&(b.translateComps(e.components,e.layout.x,e.layout.y),n.componentToAdd=e.components),G(e,e.components)})),i.forEach(n,(function(n){i.remove(n.componentToAdd,(function(n){return!i.includes(e,n.id)}))}))}(a=function n(e,t,o,r){var i;var a;var u;var c=b.getChildren(e);var s=[];var f;var l;var d;var m;var p;var v;var g;var h;if(c){for(f=r.map((function(n){return n.id})),i=0;i<c.length;i++){if(l=c[i],d=l.id,m=!1,f.indexOf(d)>=0){for(m=!0,p=-1,u=0;u<r.length;u++)if(r[u].id===d){p=u;break}r.splice(p,1)}if(b.isVirtualGroup(l))for(a=0;a<l.components.length;a++)if(f.indexOf(l.components[a].id)>-1){for(m=!0,p=-1,u=0;u<r.length;u++)if(r[u].id===l.components[a].id){p=u;break}r.splice(p,1)}m&&(v=l,g=Ke(e,t,d,o),h=g?b.getParent(g,o):Qe(l,t,o),s.push({componentToAdd:[v],futureMobileContainerOfAddedComponent:h,previousComponentIdThatAlsoExistInMobile:g}))}for(i=0;i<c.length;i++)s=s.concat(n(c[i],t,o,r))}return s}(c,c,n,r),t),f=a,p=[],i.forEach(f,(function(n){for(m=!1,l=0;l<p.length;l++)if(n.futureMobileContainerOfAddedComponent===p[l].futureMobileContainerOfAddedComponent&&n.previousComponentIdThatAlsoExistInMobile===p[l].previousComponentIdThatAlsoExistInMobile){p[l].componentToAdd=p[l].componentToAdd.concat(n.componentToAdd),m=!0;break}m||p.push(n)})),function(n,e,t){var o=function(n,e){var t,o,r,a,u,c=[];for(t=0;t<n.length;t++)for(r=n[t].componentToAdd,o=0;o<r.length;o++)a=r[o],u=i.difference(ke(a),e),c=c.concat(u);return c}(e,t);We(n,o)}(n,u=p,t),function(n,e,t){var o,r,i,a,u,c={imageScaleFactor:1,applyFontScaling:t.applyFontScaling};for(o=0;o<n.length;o++)r=n[o].componentToAdd,i=n[o].futureMobileContainerOfAddedComponent,a=n[o].previousComponentIdThatAlsoExistInMobile,W(u=Re(r),u.components,t),ye(u,t),u.layout.x=0,u.layout.width=b.isPageComponent(i)||b.isScreenWidthComponent(i)||b.isMasterPage(i)?d.a.MOBILE_WIDTH:i.layout.width,Ae(u,i,u.layout.width,c),Oe(u,{scaleFactor:1}),Be(i,u,a),Le(i),tn(i,i.components||i.children),Ue(i)}(u,0,o));var f,l,m,p;[].splice.apply(t,[t.length,0].concat(s))}(n,r,o,t),(b.isContainerComponent(n)||b.isPageComponent(n))&&b.ensureContainerTightlyWrapsChildren(n,b.getChildren(n),!0)}(e,u.idsOfComponentsToDelete,t,c,n),function n(e,t){var o=["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"];i.forEach(b.getChildren(e),(function(e){if(i.includes(o,e.componentType)){var r=b.getComponentByIdFromStructure(e.id,t),a=i.maxBy(e.components,"layout.height").layout.height;i.forEach(e.components,(function(n){return i.assign(n.layout,{x:0,y:0,height:a})})),e.layout.height=a,e.components=i.sortBy(e.components,(function(n){return i.findIndex(r.components,{id:n.id})}))}n(e,t)}))}(e,n)}ze(e)}function He(n,e){var t=i.reduce(e,(function(n,e){var t=i.get(e,["layout","fixedPosition"])&&!i.get(e,["conversionData","convertFixedPositionToAbsolute"]),o=!b.isFixedPositionAllowed(e);return t&&o?i.concat(n,i.keys(b.getAllCompsInStructure(e))):n}),[]);return i.difference(n,t)}function je(n){n.layout&&(n.existsBeforeMerge=!0),i.forEach(b.getChildren(n),je)}function ze(n){delete n.existsBeforeMerge,i.forEach(b.getChildren(n),ze)}function We(n,e,t){t=t||[];var o,r,a,u,c=n.components||n.children;c&&(!function(n,e,t){var o=i.map(t,"id");i.forEachRight(n,(function(n){if(!i.includes(o,n)){var t=b.getComponentsByIds(e,[n])[0];b.isGroupComponent(t)&&(b.removeGroup(t,e),Ue(e))}}))}(e,n,c),o=i.map(c,"id"),r=i.intersection(e,o),function(n,e,t){i(n).filter((function(n){return b.isContainerComponent(n)||b.isPageComponent(n)})).forEach((function(n){i(n.components).map("id").filter((function(n){return!i.includes(t,n)})).forEach((function(n){e.push(n)}))}))}(a=b.getComponentsByIds(n,r),t,e),a.length>0&&(u=a.map((function(n){return n.id})).indexOf(function(n){var e,t,o,r,i=b.getChildren(n);if(i){for(o=-Number.MAX_VALUE,e=0;e<i.length;e++)(r=i[e]).layout.y+r.layout.height>o&&(t=r,o=r.layout.y+r.layout.height);return t}}(n).id)>-1,b.removeChildrenFrom(n,a),function(n,e){var t=i.get(n,["conversionData","blocks"],[]),o=i.transform(t,(function(t,o,r){var a=o.length;n.conversionData.blocks[r]=i.difference(o,e),a!==n.conversionData.blocks[r].length&&t.push(r)}),[]);i.forEachRight(t,(function(e,t){if(i.includes(o,t))i.isEmpty(n.conversionData.blocks[t])&&(Ge(r=n,a=t,-(r.conversionData.blockLayout[a].height+d.a.COMPONENT_MOBILE_MARGIN_Y)),n.conversionData.blocks.splice(t,1),n.conversionData.blockLayout.splice(t,1));else{var r,a,u=n.conversionData.blockLayout[t],c=b.getComponentsByIds(n,n.conversionData.blocks[t]),s=b.getSnugLayout(c);n.conversionData.blockLayout[t]=s;var f=s.y-u.y;0!==f&&Ge(n,t-1,-f);var l=u.height-n.conversionData.blockLayout[t].height;0!==l&&Ge(n,t,-(l-f))}}))}(n,r),u&&b.ensureContainerTightlyWrapsChildren(n,c,!0,50)),i.forEach(c,(function(n){We(n,e,t)})))}function Ue(n){i.has(n,"conversionData")||i.set(n,["conversionData"],{});var e=b.getChildren(n);if(e){n.conversionData.blocks=[],n.conversionData.blockLayout=[];var t=K.objectUtils.cloneDeep(e);t.sort(Xe);var o=[],r=0;i.forEach(t,(function(e,a){if(o.push(e.id),a!==t.length-1){var u=i.slice(t,r,a+1);i.some(u,(function(n){return Ve(n,t[a+1])}))||(Ye(n,o),o=[],r=a+1)}else Ye(n,o)})),i.forEach(e,(function(n){return Ue(n)}))}}function Ye(n,e){var t=b.getComponentsByIds(n,e),o=b.getSnugLayout(t);n.conversionData.blockLayout.push(o),n.conversionData.blocks.push(e)}var Ve=function(n,e){return b.getYOverlap(n,e)/Math.min(n.layout.height,e.layout.height)>.25};function Xe(n,e){if(!Ve(n,e)&&n.layout.y!==e.layout.y)return n.layout.y<e.layout.y?-1:1;var t=b.isScreenWidthComponent(n),o=b.isScreenWidthComponent(e);return t?o?0:-1:o?1:n.layout.x<e.layout.x?-1:n.layout.x>e.layout.x?1:0}function qe(n,e){if(i.get(e,["conversionData","nestOverlayingSiblings"],!0))return!0;var t=i.map(b.getChildren(e),"id");return i.includes(t,n)}function Qe(n,e,t){for(var o,r,a=n.id,u=function n(e){var t={},o=b.getChildren(e);if(o)for(var r=0,a=o;r<a.length;r++){var u=a[r];t[u.id]=e.id,t=i.merge(t,n(u))}return t}(e),c=u[a];!o||!qe(n.id,r);){var s=(o=b.getComponentByIdFromStructure(c,t))?b.getChildren(o):[];if(r=b.getComponentByIdFromStructure(c,e),c=u[c],b.shouldReparentCompToChildOfContainer(n,r)&&!i.isEmpty(s))return i.head(s)}return o}function Ke(n,e,t,o){if(b.isVirtualGroup(n))return Ke(b.getParent(n.id,e),e,n.id,o);for(var r=i.get(n,["conversionData","componentsOrder"],[]),a=r.indexOf(t)-1;a>=0;a--){var u=r[a];if("PAGES_CONTAINER"!==u){var c=i.find(b.getChildren(n),{id:u});if(b.getComponentByIdFromStructure(u,o))return u;if(b.isVirtualGroup(c))for(var s=0;s<c.components.length;s++){var f=i.get(c,["conversionData","componentsOrder",s]);if(b.getComponentByIdFromStructure(f,o))return f}}}return null}var Ze=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var o=Array(n),r=0;for(e=0;e<t;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o};function Je(n,e){return i(n).map((function(n){return b.getComponentByIdFromStructure(n,e)})).compact().value()}function $e(n,e){var t=Je(n,e),o=function(n){return i.map(n,(function(n){var e=K.objectUtils.cloneDeep(n);return b.getChildren(e)&&(e.components=[]),e}))}(t),r=[];return i.forEach(o,(function(n){for(var e=0;e<o.length;e++){var a=t[e];if(i.some(b.getChildren(a),{id:n.id})){var u=o[e];return void b.addComponentsTo(u,[n])}}r.push(n)})),r}function nt(n,e,t,o){void 0===o&&(o={});var r=b.getChildren(n);return r?(i.forEach(r,(function(r){nt(r,e,t,o);var a=i(t).remove({id:r.id}).head();if(!i.isEmpty(a)){var u=b.getComponentByIdFromStructure(n.id,e)||e;o[u.id]=o[u.id]||{componentsToAdd:[],parent:u},o[u.id].componentsToAdd.push(a)}})),o):o}function et(n){return b.getAllCompsInStructure(n,!1,i.negate(B))}function tt(n,e,t){var o=i.keys(t),r=i.difference(o,n),a=un(e,t);return i.uniq(Ze(r,a))}function ot(n,e){if(!i.isEmpty(e)){var t=b.getChildren(n);if(t){var o=i.map(t,"id"),r=i.remove(e,(function(n){return i.includes(o,n)})),a=b.getComponentsByIds(n,r);a.length>0&&b.removeChildrenFrom(n,a),i.forEach(t,(function(n){return ot(n,e)}))}}}function rt(n,e){return i.some(Object(b.getChildren)(e),(function(e){return e.id===n}))}function it(n,e){return i.find(e,(function(e){return rt(n,e)}))}function at(n,e,t){if(!i.isEmpty(t)){var o=nt(e,n,$e(t,e));i.forEach(o,(function(n){var e=K.objectUtils.cloneDeep(n.componentsToAdd),t=i.flatMap(e,(function(n){return i.values(b.getAllCompsInStructure(n))}));i.forEach(t,(function(n){return b.shouldStretchToScreenWidth(n)?i.set(n,["layout","width"],d.a.MOBILE_WIDTH):i.set(n,["layout","width"],i.min([n.layout.width,d.a.MOBILE_WIDTH]))})),b.addComponentsTo(n.parent,e)})),function(n,e,t){var o=b.getAllCompsInStructure(e),r=b.getAllCompsInStructure(t),a=i.filter(n,(function(n){return i.has(o,n)}));i.forEach(a,(function(n){var e=it(n,o),t=it(n,r);if(e.id===t.id){var a=Object(b.getChildren)(e),u=i.filter(Object(b.getChildren)(t),(function(n){return rt(n.id,e)})),c=i.get(u,[i.findIndex(u,{id:n})+1,"id"],null);if(c){var s=i.remove(a,{id:n});a.splice(i.findIndex(a,{id:c}),0,i.head(s))}}}))}(t,n,e)}}function ut(n,e){var t,o=function(n){return b.getAllCompsInStructure(n,!1,i.negate(b.isDesktopOnlyComponent))}(n);t=n,z(o),q(t,b.getChildren(t),!0),b.isMasterPage(t)&&U(b.getChildren(t));var r=i(o).reject(["conversionData.mobileHints.hidden",!0]).map("id").value();ot(e,tt(r,o,et(e))),ot(e,function(n,e){var t=Je(n,e);return i(t).flatMap((function(n){return i.values(b.getAllCompsInStructure(n))})).map("id").uniq().difference(n).value()}(i.difference(r,i.keys(et(e))),n)),at(e,n,i.difference(r,i.keys(et(e))))}var ct=d.a.MOBILE_WIDTH,st={HEADER:"SITE_HEADER",SUBHEADER:"SUBHEADER",FOOTER:"SITE_FOOTER",PAGES_CONTAINER:"PAGES_CONTAINER",TINY_MENU:"TINY_MENU"},ft=[st.HEADER,st.SUBHEADER,st.PAGES_CONTAINER,st.FOOTER],lt=function(n){return i.get(n,["conversionData","siteSegmentRole"],"")};function dt(n){!function(n){var e=i.findIndex(n,(function(n){return st.HEADER===i.get(n,["conversionData","siteSegmentRole"])})),t=i.findIndex(n,(function(n){return st.SUBHEADER===i.get(n,["conversionData","siteSegmentRole"])}));if(!(-1===e||-1===t||t===e+1)){var o=n.splice(t,1)[0];e=i.findIndex(n,(function(n){return st.HEADER===i.get(n,["conversionData","siteSegmentRole"])})),n.splice(e+1,0,o)}}(n),mt(n)}function mt(n){!function(n){var e=i.find(n,{id:st.PAGES_CONTAINER}),t=i.get(e,["components",0,"layout"]);i.assign(t,{width:ct,x:0})}(n),function(n){var e=0;i.forEach(ft,(function(t){var o=i.find(n,(function(n){return lt(n)===t}));o&&(i.assign(o.layout,{x:0,width:ct,y:e}),e+=o.layout.height)}))}(n)}function pt(n){!function(n){i(n.children).filter(b.isSiteSegment).reject({id:st.PAGES_CONTAINER}).forEach((function(n){we(n,ct);Object(b.ensureContainerTightlyWrapsChildren)(n,n.components,!0)}))}(n),dt(Object(b.getChildren)(n)),function(n){L(n,st.TINY_MENU)}(n)}function vt(n,e,t){if(fn(n,e),Fe(n,e,t),"masterPage"===e.id){var o=b.getChildren(e),r=b.getChildren(n);i.forEach(o,(function(n){return i.set(n,"conversionData",i.get(i.find(r,{id:n.id}),"conversionData"))})),t.fixMasterPageStructureOrder?dt(o):mt(o)}return rn(e),b.getChildren(e)}function gt(n,e,t){t.analyzeOnly||W(n,e,t),ye(n,t)}t.d(e,"textUtils",(function(){return ht})),t.d(e,"structuresComparer",(function(){return yt})),t.d(e,"mobileOnlyComponents",(function(){return Ct})),t.d(e,"conversion",(function(){return Tt})),t.d(e,"mobileHints",(function(){return Et})),t.d(e,"conversionUtils",(function(){return b})),t.d(e,"conversionConfig",(function(){return d.a}));var ht={getFontSizeByFontName:function(n,e,t){if(void 0===t&&(t=a),0===e)return 0;var o,r,i,u,c,s,l,d,m=t[n];return m?(o=m.referencePoints,r=f,u=(i=e)<o[1]?o[0]:o[1],c=i<o[1]?r[0]:r[1],s=i<o[1]?o[1]:o[2],l=i<o[1]?r[1]:r[2],i*(d=(c-l)/(u-s))+(l-s*d)):e},convertFontSizeByTextLength:function(n,e){var t=s,o=u,r=c,a=Math.round(l(n,o.min,o.max))-o.min,f=Math.round(l(e,r.min,r.max))-r.min;return i.get(t,[a,f])}},yt={getComponentIdsAddedToDesktopStructure:cn},Ct={isMobileOnlyComponentId:function(n){return i.includes(R,n)},addComponent:L,getAdditionalStyles:function(){return M()}},Tt={inspectStructure:gt,synchronizePages:function(n,e){return sn(n,e),i.mapValues(n,(function(n,t){return function(n,e){if(ut(n,e),fn(n,e),"masterPage"===e.id){var t=b.getChildren(e),o=b.getChildren(n);i.forEach(t,(function(n){return i.set(n,"conversionData",i.get(i.find(o,{id:n.id}),"conversionData"))})),mt(t)}return rn(e),b.getChildren(e)}(n,e[t])}))},mergeDesktopPagesWithMobile:function(n,e,t){return sn(n,e),i.mapValues(n,(function(n,o){return vt(n,e[o],t)}))},mergeDesktopStructureWithMobile:vt,convertDesktopPageToMobile:function(n,e,t){return gt(n,e,t),b.isMasterPage(n)?pt(n):we(n,d.a.MOBILE_WIDTH),tn(n,e),rn(n),b.getChildren(n)}},Et={getConversionOrder:function(n){var e=i.map(n,"id"),t=v(n,"y"),o=g(t),r=i.reduce(o,(function(n,t){if(1===i.size(t))return p(n,t);var o=v(t,"x"),r=g(o);return i.reduce(r,(function(n,t){if(1===i.size(t))return p(n,t);var o=i.sortBy(t,(function(n){return e.indexOf(n.id)}));return p(n,o)}),n)}),[]);return i.map(r,"id")},parseMobilePreset:function(n){var e=O(n);if(!e)return{};var t=e.components?D(e):{};return i.set(t,e.id,y(e)),t}}}])}));
//# sourceMappingURL=mobileCore.js.map