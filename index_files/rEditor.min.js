var _createClass=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,n=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}define("rEditor/rootComps/keyboard/config/topContextShortcuts",["lodash"],function(e){"use strict";var t=function(e){e.preventDefault()},o={esc:t,"ctrl + t, command + t":t,"ctrl + y, command + y":t,"ctrl + d, command + d":t,"ctrl + s, command + s":t,"ctrl + ], command + ]":t,"ctrl + [, command + [":t,"ctrl + shift + ], command + shift + ]":t,"ctrl + shift + [, command + shift + [":t,backspace:t,"ctrl + left, command + left":t,"ctrl + right, command + right":t,"ctrl + shift + left, command + shift + left":t,"ctrl + shift + right, command + shift + right":t,"ctrl + m, command + m":t,"ctrl + shift + m, command + shift + m":t};return{init:e.once(e.noop),shortcuts:o}}),define("rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap",["util"],function(e){"use strict";var t=e.browserUtil.getKeyboardSpecialKey(),o=t.value,i=t.label,n=e.browserUtil.getAltSpecialKey(),a=n.value,r=n.label;return{editor:{AUTOSAVE_ON_OFF:{key:[o+" + shift + alt + a",o+" + shift + a"].join(","),label:i+" + Shift + Alt + A"},SELECT_ALL:{key:o+" + a",label:""},GROUP_COMPONENTS:{key:o+" + g",label:""},UNGROUP_COMPONENTS:{key:o+" + shift + g",label:""},COPY:{key:o+" + c",label:i+" + C"},PASTE:{key:o+" + v",label:i+" + V"},PASTE_AND_APPLY_THEME:{key:o+" + shift + v",label:i+" + Shift + V"},APPLY_MODE:{key:o+" + shift + v",label:i+" + Shift + V"},CUT:{key:o+" + x",label:i+" + X"},DUPLICATE:{key:o+" + d",label:i+" + D"},UNDO:{key:o+" + z",label:i+" + Z"},REDO:{key:[o+" + y",o+" + shift + z"].join(","),label:i+" + Y"},DELETE:{key:["del","backspace"].join(","),label:"Del"},SAVE:{key:o+" + s",label:i+" + S"},SAVE_AS_TEMPLATE:{key:o+" + alt + t",label:""},SELECT_NEXT_COMP:{key:o+" + m",label:""},SELECT_NEXT_COMP_TAB:{key:"tab",label:"tab"},SELECT_PREV_COMP:{key:o+" + shift + m",label:""},SELECT_PREV_COMP_TAB:{key:"shift + tab",label:"shift + tab"},CLOSE_PANELS:{key:"esc",label:""},MOVE_RIGHT:{key:"right",label:""},SHIFT_RIGHT:{key:"shift + right",label:""},MOVE_LEFT:{key:"left",label:""},SHIFT_LEFT:{key:"shift + left",label:""},MOVE_UP:{key:"up",label:""},SHIFT_UP:{key:"shift + up",label:""},MOVE_DOWN:{key:"down",label:""},SHIFT_DOWN:{key:"shift + down",label:""},SEND_FORWARD:{key:o+" + up",label:i+" + ↑"},SEND_TO_FRONT:{key:o+" + shift + up",label:i+" + Shift + ↑"},SEND_BACKWARD:{key:o+" + down",label:i+" + ↓"},SEND_TO_BACK:{key:o+" + shift + down",label:i+" + Shift + ↓"},TOGGLE_MOBILE:{key:o+" + j",label:i+" + j"},TOGGLE_PREVIEW:{key:o+" + p",label:i+" + P"},PUBLISH_SITE:{key:o+" + shift + p",label:i+" + Shift + P"},HIDE_TOOLS:{key:"shift + f",label:"Shift + F"},TOGGLE_RULERS:{key:"shift + r",label:"Shift + R"},PLATFORM_APP_CONFIGURATION:{key:o+"+ shift + e",label:i+"+ shift + e"},ADD_APPLICATIVE_MODE:{key:o+"+ shift + a",label:i+"+ shift + e"},OPEN_QUICK_NAVIGATION:{key:"/",value:"/"},TOGGLE_TOOLBAR:{key:"shift + t",label:"shift + T"},OPEN_HELP_CENTER:{key:"shift + /",label:"?"},NEW_PAGE:{key:a+" + n",label:r+" + N"},OPEN_SELECTED_COMP_SETTINGS_PANEL:{key:"shift + 1",label:"shift + 1"},OPEN_SELECTED_COMP_LAYOUT_PANEL:{key:"shift + 2",label:"shift + 2"},OPEN_SELECTED_COMP_DESIGN_PANEL:{key:"shift + 3",label:"shift + 3"},TRIGGER_SELECTED_COP_MAIN_ACTION:{key:"enter",label:"enter"}},preview:{EXIT_PREVIEW:{key:"esc",label:""},TOGGLE_MOBILE:{key:o+" + j",label:i+" + j"},TOGGLE_PREVIEW:{key:o+" + p",label:i+" + P"},PUBLISH_SITE:{key:o+" + shift + p",label:i+" + Shift + P"}},topBar:{CLOSE_DROP_PANEL:{key:"esc",label:""}},imageCrop:{APPLY:{key:"enter",label:"Enter"},CANCEL:{key:"esc",label:"Esc"}}}}),define("rEditor/rootComps/keyboard/actions/selectComponentShortcutsActions",["lodash","core","coreBi","stateManagement"],function(s,l,i,c){"use strict";var p=c.editorPlugins.domMeasurements.selectors.getStageLayout,n=["PAGES_CONTAINER","SITE_PAGES","BACK_TO_TOP_BUTTON"];function a(e){var t=e.dsRead.pages.getFocusedPageId(),o=e.components.getAllComponents(t);return s.filter(o,function(e){return!s.includes(n,e.id)})}function o(e,t){var o,i,n,a=e.store.getState(),r=p(a),s=e.components.layout.getRelativeToScreen(t);l.utils.scrollUtils.setScroll({scrollTop:(o=r,i=s.y,n=o.height/2,Math.max(i-n,0))})}function r(e,t){e.selection.selectComponentByCompRef(t),o(e,t)}return{selectNextComponent:function(e){var t=e.selection.getSelectedComponentId();if(t){var o=function e(t,o,i){var n=s.findIndex(o,{id:i}),a=n+1===o.length?0:n+1;return t.components.is.selectable(o[a])?o[a]:e(t,o,o[a].id)}(e,a(e),t);r(e,o),e.bi.event(i.events.shortcuts.tab_shift_tab_nav,{component_id:o.id})}},selectPreviousComponent:function(e){var t=e.selection.getSelectedComponentId();if(t){var o=function e(t,o,i){var n=s.findIndex(o,{id:i}),a=0===n?o.length-1:n-1;return t.components.is.selectable(o[a])?o[a]:e(t,o,o[a].id)}(e,a(e),t);r(e,o),e.bi.event(i.events.shortcuts.tab_shift_tab_nav,{component_id:o.id})}},moveComponent:function(o,i,n){var e,t,a,r=o.components.getComponentsWhichDontHaveAncestorsInTheArray(o.selection.getSelectedComponents());return r&&(e=o,t=r,"x"===(a=i)&&c.editorPlugins.componentMetaData.selectors.isHorizontallyMovable(t,e.dsRead)||"y"===a&&e.components.is.verticallyMovable(t))&&o.dsActions.waitForChangesApplied(function(){var e=o.components.layout.getRelativeToStructure(r),t=s.clone(e);t[i]+=n,o.components.layout.updateRelativeToStructure(r,t)}),r}}}),define("rEditor/rootComps/keyboard/util/editorDebugShortcutsUtil",["lodash","util","savePublish"],function(n,e,a){"use strict";var r=e.browserUtil.getKeyboardSpecialKey().value;return function(e){var t={},o=n(window.editorModel.runningExperiments).pickBy(function(e){return"new"===e}).keys().value();t["ctrl + alt + shift + v"]=e.openEditorVersionInfoPanel.bind(e),t["ctrl + alt + shift + e"]=function(){window.alert("Active Experiments:\n"+o.join("\n"))};var i=window.location.search&&window.location.search.toLowerCase();return(n.includes(i,"debug=")||n.includes(i,"isqa=true"))&&(t[r+" + shift + alt + s"]=n.partial(a.configureSave,e),t[r+" + shift + alt + p"]=e.publishManager.configureMockPostPublish),t}}),define("rEditor/rootComps/keyboard/util/sendBIAndActionUtil",["lodash"],function(a){"use strict";return function(e,t,o){if(e&&t){var i=e.selection.getSelectedComponents(),n=e.bi.getComponentsBIParams(i);a.forEach(n,function(e,t){a.assign(t,e)}.bind(null,o)),a.isEmpty(n)&&o&&n.push(o),e.bi.reportBI(t,n)}}}),define("rEditor/rootComps/gfpp/enhancers/postMainActions/connectedComponentGfppEnhancer",["lodash","platformEvents","stateManagement","platform","gfppData"],function(d,u,g,m,f){"use strict";return function(o,e,t){if(!d.isEmpty(e)&&1===e.length){var i=e[0],n=o.platform.controllers.connections.getPrimaryConnection(i);if(!n)return;var a=d.get(o.platform.controllers.getConnectedComponentStageData(i),["gfpp"]);if(!a)return;var r=o.components.data.get(n.controllerRef).applicationId,s=(o.platform.getAppDataByAppDefId(r)||{}).applicationId;if(!s)return;var l=g.editorPlugins.mobile.selectors.getDeviceType(o.store.getState()),c=function(e){var t=e.actionId;o.platform.notifyApplication(s,u.factory.componentGfppClicked({id:t,componentRef:i,controllerRef:n.controllerRef,role:n.role}))},p=f.utils.getGfppDataResolver(o,e);t.presetActions=t.presetActions||{},t.presetActions.upgrade=m.upgradeUtils.getPremiumGfpp(r),t.mainActions=m.platformConnectedGfpp.generateMainActions(l,a,t,c),t.presetActionsData=m.platformConnectedGfpp.generateIconButtonsOverride(l,a,t,c,function(e){o.platform.notifyApplication(s,u.factory.globalDesignPresetChanged({preset:e,componentRef:i}))},n.controllerRef),"desktop"===l?(t.enabledActions=t.enabledActions||[],t.enabledActions.push("upgrade"),t.enabledActions=m.platformConnectedGfpp.generateEnabledActions(l,a,p(t.enabledActions))):t.mobileEnabledActions=m.platformConnectedGfpp.generateEnabledActions(l,a,p(t.mobileEnabledActions))}}}),define("rEditor/rootComps/gfpp/enhancers/postMainActions/repeaterGfppEnhancer",["lodash","gfppData"],function(e,i){"use strict";return function(e,t,o){e.components.is.repeaterItem(t)&&o.mainActions&&o.mainActions.push(i.repeaterGfppUtils.getManageItemAction())}}),define("rEditor/rootComps/gfpp/enhancers/postMainActions/widgetGfppEnhancer",["lodash","constants","util","experiment"],function(i,n,e,a){"use strict";var r=e.appStudioUtils.isWidgetController;return function(e,t,o){r(e,t)&&e.isMobileEditor()&&(o.mobileEnabledActions=i(o.mobileEnabledActions).concat(n.ROOT_COMPS.GFPP.ACTIONS.HIDE,a.isOpen("mobileAnimationsSplit")?n.ROOT_COMPS.GFPP.ACTIONS.ANIMATION:n.ROOT_COMPS.GFPP.ACTIONS.MOBILE_ANIMATION).uniq().value())}}),define("rEditor/rootComps/gfpp/enhancers/postMainActions/toggleMenuGfppEnhancer",["util","stateManagement"],function(r,s){"use strict";return function(e,t,o){var i=r.inlinePopupUtils.getToggleTarget(e,t);if(i&&"wysiwyg.viewer.components.MenuContainer"===e.components.getType(i)){var n=r.inlinePopupUtils.isOpen(e,i),a={label:function(){return n?"gfpp_mainaction_mobile_menu_close_menu":"gfpp_mainaction_mobile_menu_open_menu"},onClick:function(){e.store.dispatch(s.panels.actions.closeOpenedPanels()),n&&e.store.dispatch(s.selection.actions.setFocusedContainer(null)),e.store.dispatch(s.inlinePopup.actions.toggle(i)).then(function(){n||e.selection.selectComponentByCompRef(i)})},automationId:"gfpp_menu_toggle_action"};o.mainActions=[].concat(_toConsumableArray(o.mainActions||[]),[a])}}}),define("rEditor/rootComps/gfpp/enhancers/postMainActions/enhancers",["rEditor/rootComps/gfpp/enhancers/postMainActions/connectedComponentGfppEnhancer","rEditor/rootComps/gfpp/enhancers/postMainActions/repeaterGfppEnhancer","rEditor/rootComps/gfpp/enhancers/postMainActions/widgetGfppEnhancer","rEditor/rootComps/gfpp/enhancers/postMainActions/toggleMenuGfppEnhancer"],function(){"use strict";return Array.prototype.slice.call(arguments)}),define("rEditor/rootComps/gfpp/enhancers/postPresetActions/stripGfppEnhancer",["lodash"],function(r){"use strict";return function(e,t,o){var i=o.presetActions.connect;if(e.columns.isStrip(t)&&i)if(e.columns.isSingleColumnStrip(r.head(t))){var n=i.isApplied,a=i.className;i.isApplied=function(e,t){var o=e.components.getChildren(r.head(t));return n(e,o)},i.className=function(e,t){var o=e.components.getChildren(r.head(t));return a(e,o)}}else delete o.presetActions.connect}}),define("rEditor/rootComps/gfpp/enhancers/postPresetActions/widgetGfppEnhancer",["lodash","stateManagement","util","constants"],function(n,a,e,t){"use strict";var r=t.ROOT_COMPS.GFPP.ACTIONS,o=e.appStudioUtils,s=o.isWidgetController,l=o.getWidgetSchema;return function(e,t,o){if(s(e,t)&&!e.isMobileEditor()){var i=l(e,t[0]);n.size(i.propertiesSchemas)?o.mainActions=[{onClick:function(){e.closeCompPanelIfExists(),e.store.dispatch(a.editorPlugins.panels.actions.openComponentPanel("compPanels.panels.Widget.schemaSettingsPanel"))},label:"gfpp_tooltip_settings",automationId:"gfpp-button-settings",className:"widget-settings"}].concat(_toConsumableArray(o.mainActions||[])):(o.presetActions[r.CONNECT]&&delete o.presetActions[r.CONNECT],o.enabledActions=n.reject(o.enabledActions,function(e){return e===[r.CONNECT]}))}}}),define("rEditor/rootComps/gfpp/enhancers/postPresetActions/appStudioGfppEnhancer",["lodash","constants"],function(n,e){"use strict";var a=e.ROOT_COMPS.GFPP.ACTIONS;return function(e,t,o){var i;(i=e).dsRead.pages.isWidgetPage(i.pages.getFocusedPageId())&&(o.presetActions[a.CONNECT]&&delete o.presetActions[a.CONNECT],o.enabledActions=n.reject(o.enabledActions,function(e){return e===[a.CONNECT]}))}}),define("rEditor/rootComps/gfpp/enhancers/postPresetActions/refComponentGfppEnhancer",["lodash","constants","stateManagement"],function(r,e,t){"use strict";var s=e.ROOT_COMPS.GFPP.ACTIONS,l=t.editorPlugins.components.selectors.isRefComponent;return function(e,t,o){if(t=r.castArray(t),l(r.head(t))){var i=r.get(e.components.is.overridesWhenReferred(r.head(t)),"gfpp"),n=r.map(r.get(i,"disableActions"),function(e){return s[e]}),a=r.get(i,"disableMainActionsByLabel");o.presetActions=r.omit(o.presetActions,n),o.enabledActions=r.reject(o.enabledActions,function(e){return r.includes(n,e)}),o.mainActions=r.reject(o.mainActions,function(e){return r.includes(a,e.label)})}}}),define("rEditor/rootComps/gfpp/enhancers/postPresetActions/enhancers",["rEditor/rootComps/gfpp/enhancers/postPresetActions/stripGfppEnhancer","rEditor/rootComps/gfpp/enhancers/postPresetActions/widgetGfppEnhancer","rEditor/rootComps/gfpp/enhancers/postPresetActions/appStudioGfppEnhancer","rEditor/rootComps/gfpp/enhancers/postPresetActions/refComponentGfppEnhancer"],function(){"use strict";return Array.prototype.slice.call(arguments)}),define("rEditor/rootComps/gfpp/gfppDataEnhancer",["lodash","rEditor/rootComps/gfpp/enhancers/postMainActions/enhancers","rEditor/rootComps/gfpp/enhancers/postPresetActions/enhancers"],function(n,e,t){"use strict";function i(e,t,o,i){n.forEach(e,function(e){e(t,o,i)})}return{applyPostMainActionsOverrides:n.partial(i,e),applyPostPresetActionsOverrides:n.partial(i,t),applyGfppGlobalEnhancers:function(e,t,o){i(Object.values(e.pluginService.getAllPluginsOfType("gfppGlobalEnhancers")||{}),e,t,o)}}}),define("rEditor/rootComps/gfpp/gfppModel",["lodash","util","gfppData","constants","stateManagement","rEditor/rootComps/gfpp/gfppDataEnhancer","textControls","experiment"],function(T,i,_,r,e,I,c,s){"use strict";var t=e.editorPlugins.pinMode.actions,n=e.editorPlugins.selection.selectors.getFocusedContainer,M=e.editorPlugins.components.selectors,l=e.editorPlugins.userPreferences.selectors,o=e.panels.actions.openComponentPanel,a=r.ROOT_COMPS.GFPP.ACTIONS,p=["onClick","template","onTemplatePropsChange"],A=[a.ACCESSIBILITY,a.PIN_MODE,a.STRETCH,a.APPLY_TO_OTHER_VIEW,a.STYLABLE_LAYOUT,a.STYLABLE,a.CONNECT],O={enabledActions:[a.SETTINGS,a.LAYOUT,a.ANIMATION,a.HELP].concat(A)},d=_.animationGfppUtils,u=d.onAnimationClick,g=d.onMobileAnimationClick,m=d.isAnimationSupported,f=d.getModesAnimationTooltip;function h(e,t){return e.components.layout.get(t).scale}function y(e,t){var o="platform.components.AppWidget"===e.components.getType(t)?e.components.getChildren(t):t;return T.parseInt(c.fontUtils.getSkinBasedCompFontSize(e,o))}function b(e,t,o){if(!E(e,t,o)){var i=y(t,o),n=h(t,o)*i,a=e?1:-1,r=Math.max((n+a)/Math.max(i,1),0);t.components.layout.updateAndAdjustLayout(o,{scale:r})}}function v(e,t,o){var i=e?1.05:1/1.05,n=h(t,o)*i;t.components.layout.updateAndAdjustLayout(o,{scale:n})}function S(e,t){var o=h(e,t)*y(e,t);return T.round(o)+"px"}function E(e,t,o){var i=y(t,o),n=T(c.fontUtils.getSkinBasedCompFontDefs(t,o)).values().head(),a=T.get(n,"min")||0,r=T.get(n,"max")||100,s=h(t,o),l=T.round(s*i);return e&&r<=l||!e&&l<=a}var R={settings:{isSelected:_.utils.getPanelStateFn("settings"),tooltip:"gfpp_tooltip_settings",icon:"settings",onClick:_.utils.getTogglePanelFn("settings"),automationId:"gfpp-button-settings"},background:{isSelected:_.utils.getPanelStateFn("background"),tooltip:"gfpp_tooltip_background",icon:"mobileBackgroundSettingsGfpp",onClick:N("background"),automationId:"gfpp-button-background"},design:{isSelected:_.utils.getPanelStateFn("design"),tooltip:"gfpp_tooltip_design",icon:"design",onClick:N("design"),automationId:"gfpp-button-design"},stylable:{isSelected:_.utils.getPanelStateFn("stylable"),tooltip:"gfpp_tooltip_design",icon:"design",onClick:N("stylable"),isSupported:function(e,t){return s.isOpen("se_stylablePanel")&&M.isStylable(t,e.dsRead)},automationId:"gfpp-button-stylable"},stylableLayout:{isSelected:_.utils.getPanelStateFn("stylable"),tooltip:"gfpp_tooltip_layout",icon:"layout",onClick:N("stylable",{initialView:{page:1,section:"layout"}}),isSupported:function(e,t){return s.isOpen("se_stylablePanel")&&M.isStylable(t,e.dsRead)},automationId:"gfpp-button-stylable-layout"},layout:{isSelected:_.utils.getPanelStateFn("layout"),tooltip:"gfpp_tooltip_layout",icon:"layout",onClick:N("layout"),automationId:"gfpp-button-layout",isSupported:function(e,t){return 1===T.size(T.castArray(t))||!T.some(t,e.components.is.controlledByParent)}},filters:{isApplied:function(e,t){var o=e.components.properties.get(t).filterEffect;return!T.isEmpty(o)&&"none"!==o.effectType},isSelected:_.utils.getPanelStateFn("filters"),tooltip:"gfpp_tooltip_image_filters",tooltip_active:"gfpp_tooltip_applied_image_filters",icon:"filters",onClick:_.utils.getTogglePanelFn("filters",{origin:"gfpp"})},behaviors:{isSelected:_.utils.getPanelStateFn("behaviors"),tooltip:"gfpp_tooltip_behaviors",icon:s.isOpen("se_tv_colorizing")?"behaviors_gfpp_icon":"gfpp_behaviors",onClick:_.utils.getTogglePanelFn("behaviors",{origin:"gfpp"})},effects:{isSelected:_.utils.getPanelStateFn("effects"),tooltip:function(e,t){var o=_.columnsUtils.getColumnOrStripContainer(e,t),i=e.components.design.get(o[0]),n=T.get(i,"background"),a=T.get(n,["mediaRef","type"]);return a?"WixVideo"===a?"gfpp_tooltip_bg_filters_video_disabled":"Image"===a?"gfpp_tooltip_bg_filters":"":"gfpp_tooltip_bg_filters_color_disabled"},icon:"filters",isDisabled:function(e,t){var o=_.columnsUtils.getColumnOrStripContainer(e,t);return!_.columnsUtils.isImageFiltersSupported(e,o)},onClick:function(e,t){_.utils.getTogglePanelFn("effects",{origin:"gfpp",selectedComponent:_.columnsUtils.getColumnOrStripContainer(e,t)})(e)}},stretch:{isApplied:_.utils.isStretchApplied,isSelected:_.utils.getPanelStateFn("stretching"),tooltip:function(e,t){return e.components.layout.isStretchedToScreen(t)?"gfpp_tooltip_unstretch":"gfpp_tooltip_stretch"},rightClickMenuLabel:"gfpp_tooltip_stretch",icon:"gfpp_stretch",onClick:_.utils.getTogglePanelFn("stretching"),isSupported:function(e,t){var o,i,n=e.components.is.stretchable(t)&&!e.isMobileEditor(),a=function(e){if(s.isOpen("se_multilingual")){var t=e.language.current.get(),o=e.language.original.get(),i=T.get(o,"languageCode");return i&&t&&i!==t}return!1}(e)&&e.components.is.customizeTranslate(t);return n&&!a&&(i=t,(o=e).components.is.potentialContainerForScreenWidthComp(o.components.getContainer(i))||o.components.is.containable(i,o.pages.getFocusedPage()))}},stretchForColumns:{isApplied:_.utils.isStretchApplied,isSelected:_.utils.getPanelStateFn("stretching"),tooltip:"gfpp_tooltip_unstretch",rightClickMenuLabel:"gfpp_tooltip_stretch",icon:"gfpp_stretch",onClick:_.utils.getTogglePanelFn("stretching")},upgrade:{isSelected:!1,tooltip:"gfpp_tooltip_upgrade",icon:"upgrade",onClick:_.utils.getTogglePanelFn("upgrade"),automationId:"gfpp-button-upgrade"},crop:{isApplied:_.utils.isCropApplied,isSelected:!1,isDisabled:function(e,t){if(e.components.hasRuntimeData(t))return!0;var o=e.components.data.get(t).uri;return!e.imageCrop.isCropAllowed(o)||i.url.isExternalUrl(o)},tooltip:function(e,t){if(e.components.hasRuntimeData(t))return"gfpp_tooltip_crop_unsupported";var o=e.components.data.get(t).uri;return e.imageCrop.isCropAllowed(o)?"gfpp_tooltip_crop":i.url.isExternalUrl(o)?"gfpp_tooltip_crop_unsupported":"gfpp_tooltip_crop_gif_unsupported"},tooltip_active:"gfpp_tooltip_applied_crop",icon:"effects",className:"gfpp_button_crop",onClick:function(e,t){var o=e.components.data.get(t).uri;e.imageCrop.isCropAllowed(o)&&_.utils.openImageCrop(e,t)}},aviary:{isSelected:!1,tooltip:"gfpp_tooltip_imageeffects",icon:"effects",onClick:_.utils.openAviaryPanel},animation:{isSelected:_.utils.getPanelStateFn("animation"),isDisabled:function(e,t){return C(e,t)},isApplied:_.utils.isAnimationApplied,tooltip:function(e,t){return C(e,t)?f(e,t):"gfpp_tooltip_animation"},tooltip_active:"gfpp_tooltip_applied_animation",icon:"animation",onClick:u,isSupported:m,className:"gfpp-button-animation",automationId:"gfpp-button-animation"},mobileAnimation:{isSelected:_.utils.getPanelStateFn("mobileAnimation"),isDisabled:_.utils.isAnimationDisabled,isApplied:_.utils.isMobileAnimationApplied,tooltip:_.utils.getMobileAnimationTooltip,icon:"animation",className:"gfpp-mobile-animation",onClick:g},link:{isSelected:_.utils.getPanelStateFn("link"),isApplied:_.utils.getDataDefinedFn("link"),isDisabled:function(e,t){return C(e,t)},tooltip:"gfpp_tooltip_linkto",tooltip_active:"gfpp_tooltip_applied_linkto",icon:"link",onClick:_.utils.openLinkPanel,automationId:"gfpp-button-link"},hide:{isSelected:!1,tooltip:"gfpp_tooltip_mobile_hide",icon:"gfpp_hide",className:"gfpp-hide",onClick:function(t){t.selectedComponent.remove().then(function(e){e&&(t.mobile.hideHiddenItemsCounter(),t.history.add("component - remove"))})},isSupported:function(e,t){return s.isOpen("se_hiddenElementsInBuilder")?e.components.is.removable(t):e.components.is.removable(t)&&!i.appStudioUtils.isAppStudio()}},help:{tooltip:"gfpp_tooltip_help",icon:"gfpp_help",mobileHelpId:"b6d9a270-f9c5-4837-995b-c3818b13a643"},pinMode:{isApplied:!0,isSelected:_.utils.getPanelStateFn("panels.pinnedDockPanel"),tooltip:"gfpp_tooltip_pin_to_screen",tooltip_active:"gfpp_tooltip_applied_pin_to_screen",icon:"gfpp_pin",className:"gfpp-pin",onClick:function(e){e.store.dispatch(t.open("gfpp"))},isSupported:function(e,t){return!e.isMobileEditor()&&e.components.layout.isPinned(t)}},accessibility:{isApplied:!0,isSelected:_.utils.getPanelStateFn("compPanels.dynamicPanels.a11ySettingsPanel"),tooltip:"gfpp_mainaction_accessibility",tooltip_active:"gfpp_mainaction_accessibility",icon:"gfpp_accessibility",className:"gfpp-accessibility",onClick:function(e){e.store.dispatch(o("compPanels.dynamicPanels.a11ySettingsPanel"))},isSupported:function(e,t){var o=e.store.getState(),i=l.getSiteUserPreferences(r.USER_PREFS.ACCESSIBILITY.ADVANCED_SETTINGS);if(!s.isOpen("se_advancedA11y")||!i(o))return!1;var n=T.head(t),a=T.pick(T.get(e.components.data.get(n),"a11y",{}),r.ACCESSIBILITY.A11Y_ATTRIBUTES);return 0<T.keys(a).length}},preview:{tooltip:"gfpp_tooltip_preview",icon:"gfpp_preview",onClick:function(e){e.preview.togglePreview()}},scale_up:{icon:a.SCALE_UP,tooltip:"gfpp_tooltip_textscaleup",onClick:function(e,t){v(!0,e,t)},automationId:"gfpp-button-scale-up"},scale_down:{icon:a.SCALE_DOWN,tooltip:"gfpp_tooltip_textscaledown",onClick:function(e,t){v(!1,e,t)},automationId:"gfpp-button-scale-down"},applyToOtherView:{isSelected:_.utils.getPanelStateFn("apply"),tooltip:function(e){var t=e.store.getState(),o=n(t);return e.components.modes.isCompDefaultModeActive(o)?"RightClick_Menu_Apply_Regular_ToHover_Label":"RightClick_Menu_Apply_Hover_ToRegular_Label"},icon:"gfpp_applyTo",onClick:_.utils.getTogglePanelFn("apply"),isSupported:function(e,t){if(1!==T.size(t))return!1;var o=T.head(t),i=e.components.modes.getModes(o),n=e.components.getContainer(o),a=e.components.modes.getModes(n);return!e.isMobileEditor()&&(1<T.size(i)||1<T.size(a))}},add:{isSelected:!1,tooltip:"gfpp_tooltip_plus",icon:"gfpp_plus",onClick:_.utils.getTogglePanelFn("add"),automationId:"gfpp-button-add"},customConnect:{isSelected:!1,tooltip:"gfpp_component_connect",tooltip_active:"gfpp_component_connected_to_controllers",icon:"connect",automationId:"gfpp-button-custom-connect"}};s.isOpen("mobileTextScaleGFPP")&&(R=T.assign({},R,{scale_up:{icon:a.SCALE_UP,shouldTranslate:!1,tooltip:S,isDisabled:E.bind(null,!0),keepTooltipOpenOnClick:!0,onClick:b.bind(null,!0),action_name:"gfpp_text_scale_up",automationId:"gfpp-button-scale-up"},scale_down:{icon:a.SCALE_DOWN,shouldTranslate:!1,tooltip:S,isDisabled:E.bind(null,!1),keepTooltipOpenOnClick:!0,onClick:b.bind(null,!1),action_name:"gfpp_text_scale_down",automationId:"gfpp-button-scale-down"}}));var w={},P={isSelected:_.utils.getPanelStateFn("customizeDesign"),tooltip:"gfpp_tooltip_customize",icon:"gfpp_customize_design_drop",onClick:_.utils.getTogglePanelFn("customizeDesign")},D=_defineProperty({customizeDesign:P},a.MOBILE_BACKGROUND_SETTINGS,_.backgroundSettingsGfppUtils.getMobileBackgroundSettingsAction);function C(o,e){return T.some(e,function(e){var t=o.components.modes.getFirstAncestorWithActiveModes(e);return o.components.modes.isCompDefaultModeActive(t)})}function k(t,e,o){T.forEach(e,function(e){t[e]=function(e,o){if(!e)return null;var t=T.isArray(e)?"map":"mapValues";return T(e)[t](function(e){return T.isString(e)&&R[e]?T.cloneDeep(R[e]):e})[t](function(e){return T.isFunction(e)?o(e):e})[t](function(e){return T.mapValues(e,function(e,t){return!T.includes(p,t)&&T.isFunction(e)?o(e):e})}).value()}(t[e],o)})}function x(e,t){var o,i,n,a,r,s,l,c,p,d,u,g,m,f,h,y,b,v,S=M.getCompTypeSuffix(t,e.dsRead),E=e.isMobileEditor(),P=_.utils.getGfppDataResolver(e,t),C=T.cloneDeep(P(_.getComponentData(S))||O);return i=P,(o=C)[n=E?"mobileEnabledActions":"enabledActions"]=T.clone(i(o[n])||[]),o[n]=T.union(o[n],A),C.mainActions=(a=C,r=P,s=E?a.mobileMainActions:a.mainActions,s=r(s)),I.applyPostMainActionsOverrides(e,t,C),C.extraActions=(l=C,c=P,p=E?l.mobileExtraActions:l.extraActions,p=c(p)),C.presetActions=(d=C,g=P,m=(u=E)?d.mobileEnabledActions:d.enabledActions,f=g(d.presetActions),f=T.merge({},T.pick(R,m),u?T.pick(D,m):{},T.pick(f,m),T.pick(w,m),T.pickBy(T.get(d,"presetActionsData"),function(e,t){return!T.isEmpty(e)&&T.includes(m,t)}))),I.applyPostPresetActionsOverrides(e,t,C),k(C,["mainActions","extraActions","presetActions"],P),C.presetActions.help&&(C.presetActions.help=(h=e,y=C.presetActions.help,b=h.isMobileEditor(),y.helpId=b?y.mobileHelpId:y.helpId,y.isSelected=T.isUndefined(y.isSelected)?_.utils.isHelpPanelOpen(h,y.helpId):y.isSelected,y)),C.presetActions=(v=C.presetActions,T.pickBy(v,function(e){return!1!==e.isSupported})),I.applyGfppGlobalEnhancers(e,t,C),{mainActions:C.mainActions,extraActions:C.extraActions,presetActions:C.presetActions,previewState:C.previewState,untranslatable:C.untranslatable,translateAction:C.translateAction}}function N(e,t){return _.utils.getTogglePanelFn(e,t)}return s.isOpen("fastStyling")&&(R.customizeDesign=P),{getData:x,registerGfppActions:function(e){T.merge(w,e)},getComponentMainActionClick:function(e,t){var o=x(e,T.isArray(t)?t:[t]),i=e.isMobileEditor()?o.mobileMainActions:o.mainActions;T.isFunction(i)&&(i=i(e,t));var n=T.head(i);return n&&n.onClick}}}),define("rEditor/rootComps/keyboard/config/editorShortcuts",["lodash","util","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","rEditor/rootComps/keyboard/actions/selectComponentShortcutsActions","rEditor/rootComps/keyboard/util/editorDebugShortcutsUtil","rEditor/rootComps/keyboard/util/sendBIAndActionUtil","rEditor/rootComps/gfpp/gfppModel","coreBi","experiment"],function(r,e,t,n,o,a,s,l,c){"use strict";var p=e.array.isMultiselect,d={},u="keyboardShortcuts",g="kb_shortcuts",m=t.editor;function i(i){var e={};e[m.GROUP_COMPONENTS.key]=function(e,t){var o=e.selection.getSelectedComponents();e.components.is.groupable(o)&&p(o)&&e.groupComponents(o);t.preventDefault()}.bind(null,i),e[m.UNGROUP_COMPONENTS.key]=function(e,t){var o=e.selection.getSelectedComponents();if(e.components.is.group(o)){var i=e.components.getChildren(o);e.selection.selectComponentByCompRef(i),e.components.ungroup(o)}t.preventDefault()}.bind(null,i),e[m.COPY.key]=function(e){var t=l.events.rightClickMenu,o=e.selection.getSelectedComponents(),i=e.components.layout.isPinned(o)?1:0;if(e.selectedComponent.copy(),o){var n=e.components.getType(o);a(e,t.COPY,{origin:"keyboard",is_component_pinned:i,component_type:n})}}.bind(null,i),e[m.CUT.key]=function(e){var t=l.events.rightClickMenu,o=e.selection.getSelectedComponents(),i=e.components.layout.isPinned(o)?1:0;e.selectedComponent.cut(),e.history.add("component - cut"),a(e,t.CUT,{origin:"keyboard",is_component_pinned:i})}.bind(null,i),e[m.DUPLICATE.key]=function(e){var t=l.events.rightClickMenu,o=e.selection.getSelectedComponents(),i=e.components.layout.isPinned(o)?1:0;e.selectedComponent.duplicate(),"Column"!==e.selection.getSelectedComponentType()&&e.history.add("component - duplicate");a(e,t.DUPLICATE,{origin:"keyboard",is_component_pinned:i})}.bind(null,i),e[m.MOVE_RIGHT.key]=f.bind(null,i,"x",1),e[m.MOVE_LEFT.key]=f.bind(null,i,"x",-1),e[m.MOVE_UP.key]=f.bind(null,i,"y",-1),e[m.MOVE_DOWN.key]=f.bind(null,i,"y",1),e[m.SHIFT_RIGHT.key]=f.bind(null,i,"x",10),e[m.SHIFT_LEFT.key]=f.bind(null,i,"x",-10),e[m.SHIFT_UP.key]=f.bind(null,i,"y",-10),e[m.SHIFT_DOWN.key]=f.bind(null,i,"y",10),e[m.ADD_APPLICATIVE_MODE.key]=function(){if(c.isOpen("applicativeModes")){var e=r.head(i.selection.getSelectedComponents());if(e){var t=i.components.modes.getModes(e),o="mode-"+(t?t.length:"0");i.components.modes.addModeDefinition(e,"APPLICATIVE",null,o)}}},e[m.OPEN_QUICK_NAVIGATION.key]=function(e){e.openQuickNavigation(e,"keyboard_shortcut")}.bind(null,i),e[m.TOGGLE_TOOLBAR.key]=function(e){e.toolbar.toggleToolbar(),e.bi.event(l.events.topbar.top_bar_VIEW_menu_click,{category:"toolbar",status:e.toolbar.isToolbarEnabled(),origin:u})}.bind(null,i),e[m.OPEN_HELP_CENTER.key]=function(e){var t={origin:u,panel_name:g};e.panelManager.openHelpCenter(null,null,t)}.bind(null,i),e[m.NEW_PAGE.key]=function(e){var t=e.documentServices.pages.add();e.navigateAndOpenPagesPanel(t.id)}.bind(null,i),e[m.OPEN_SELECTED_COMP_SETTINGS_PANEL.key]=h.bind(null,i,"settings"),e[m.OPEN_SELECTED_COMP_LAYOUT_PANEL.key]=h.bind(null,i,"layout"),e[m.OPEN_SELECTED_COMP_DESIGN_PANEL.key]=h.bind(null,i,"design"),e[m.TRIGGER_SELECTED_COP_MAIN_ACTION.key]=function(e){var t=e.selection.getSelectedComponents(),o=s.getData(e,t),i=r.get(o,"mainActions");if(!i||r.isEmpty(i))return;i[0].onClick(e,t),e.bi.event(l.events.shortcuts.comp_main_action,{componentId:t[0].id})}.bind(null,i);var t=o(i);r.merge(e,t),r.merge(d,e)}function f(e,t,o,i){i&&i.preventDefault(),n.moveComponent(e,t,o)}function h(e,t){var o=e.selection.getSelectedComponents(),i=s.getData(e,o),n=r.get(i,"presetActions");if(n){var a=n[t];a&&(a.onClick(e,o),e.bi.event(l.events.shortcuts.comp_main_panels_trigger,{panel_name:t}))}}return{init:function(e){i(e)},shortcuts:d}}),define("rEditor/rootComps/keyboard/config/previewShortcuts",["lodash","coreBi","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap"],function(e,i,t){"use strict";var o=t.preview,n={};function a(e){e.preventDefault()}return{init:e.once(function(e){n[o.EXIT_PREVIEW.key]=e.preview.togglePreview,n[o.TOGGLE_PREVIEW.key]=function(e,t){t.preventDefault(),e.preview.togglePreview()}.bind(this,e),n[o.TOGGLE_MOBILE.key]=function(e,t){t.preventDefault(),e.bi.event(i.events.topbar.editor_view_mode_switch,{origin:"keyboard"});var o=e.isMobileEditor();e.setEditorMode(!o)}.bind(null,e),n[o.PUBLISH_SITE.key]=a}),shortcuts:n}}),define("rEditor/rootComps/keyboard/config/pinModeShortcuts",["lodash","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","rEditor/rootComps/keyboard/util/editorDebugShortcutsUtil","coreBi","rEditor/rootComps/keyboard/actions/selectComponentShortcutsActions"],function(a,e,n,r){"use strict";var s={},l=e.editor;function c(e,t,o){if(e&&t){var i=e.selection.getSelectedComponents(),n=e.bi.getComponentsBIParams(i);a.forEach(n,function(e,t){a.assign(t,e)}.bind(null,o)),a.isEmpty(n)&&o&&n.push(o),e.bi.reportBI(t,n)}}function p(e){e.preventDefault()}return{init:function(e){!function(e){var t=r.events.rightClickMenu,o={};o[l.GROUP_COMPONENTS.key]=p,o[l.UNGROUP_COMPONENTS.key]=p,o[l.COPY.key]=c.bind(null,e,t.COPY,{is_component_pinned:1}),o[l.CUT.key]=c.bind(null,e,t.CUT,{is_component_pinned:1}),o[l.DUPLICATE.key]=c.bind(null,e,t.DUPLICATE,{is_component_pinned:1}),o[l.MOVE_RIGHT.key]=p,o[l.MOVE_LEFT.key]=p,o[l.MOVE_UP.key]=p,o[l.MOVE_DOWN.key]=p,o[l.SHIFT_RIGHT.key]=p,o[l.SHIFT_LEFT.key]=p,o[l.SHIFT_UP.key]=p,o[l.SHIFT_DOWN.key]=p;var i=n(e);a.merge(o,i),a.merge(s,o)}(e)},shortcuts:s}}),define("rEditor/rootComps/keyboard/util/commonKeyboardActions",["rEditor/rootComps/keyboard/util/sendBIAndActionUtil","coreBi","coreUtilsLib"],function(i,n,t){"use strict";function o(e,t){var o=n.events.editor.undo_redo_component_change;i(e,o,{type:t,origin:"keyboard"})}return{undoFromKeyboard:function(e){o(e,"undo"),e.history.undo()},redoFromKeyboard:function(e){o(e,"redo"),e.history.redo()},saveSiteFromKeyboard:function(e){e.saveManager.save({origin:"keyboard"})},saveSiteAsTemplateFromKeyboard:function(e){e.saveManager.saveAsTemplate(function(){t.log.info("Saved successfully as Template.")})},publishSiteFromKeyboard:function(e,t){e.savePublish.canUserPublish()&&(t.preventDefault(),e.bi.event(n.events.publish.PUBLISH_CLICK,{origin:"keyboard"}),e.publishManager.saveAndPublish("keyboard_publish"))}}}),define("rEditor/rootComps/keyboard/config/zoomModeShortcuts",["lodash","rEditor/rootComps/keyboard/util/commonKeyboardActions","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap"],function(i,n,e){"use strict";var a={},r=e.editor;return{init:function(e){var t,o;t=e,(o={})[r.UNDO.key]=n.undoFromKeyboard.bind(null,t),o[r.REDO.key]=n.redoFromKeyboard.bind(null,t),o[r.SAVE.key]=n.saveSiteFromKeyboard.bind(null,t),o[r.SAVE_AS_TEMPLATE.key]=n.saveSiteAsTemplateFromKeyboard.bind(null,t),o[r.PUBLISH_SITE.key]=n.publishSiteFromKeyboard.bind(null,t),i.assign(a,o)},shortcuts:a}}),define("rEditor/rootComps/keyboard/config/imageCropShortcuts",["lodash","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap"],function(o,e){"use strict";var i={},n="enter",a=e.imageCrop;function t(e){var t={};t[a.APPLY.key]=function(e){var t=o.head(e.selection.getSelectedComponents());e.imageCrop.updateCrop(t,n)}.bind(null,e),t[a.CANCEL.key]=function(e){var t=o.head(e.selection.getSelectedComponents());e.imageCrop.cancelCrop(t)}.bind(null,e),o.merge(i,t)}return{init:function(e){t(e)},shortcuts:i}}),define("rEditor/rootComps/keyboard/config/pagesMenuPanelShortcuts",["rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap"],function(t){"use strict";var i={};return{init:function(o){var e=t.editor;i[e.COPY.key]=function(){var e,t;(t=(e=o).mainMenu.panelContext.getSelectedMenuItem()).type.isPage&&e.copyPaste.canCopyPage(t.pageData.id)&&e.copyPaste.copyPage(t.pageData.id)},i[e.PASTE.key]=function(){var e;(e=o).copyPaste.hasPageToPaste()&&e.copyPaste.pastePage({menuItemToPasteAfter:e.mainMenu.panelContext.getSelectedMenuItem()})},i[e.PASTE_AND_APPLY_THEME.key]=function(){var e;(e=o).copyPaste.hasPageToPaste()&&e.copyPaste.pastePage({menuItemToPasteAfter:e.mainMenu.panelContext.getSelectedMenuItem()})}},shortcuts:i}}),define("rEditor/utils/removeUtil",["lodash","util","platformEvents","coreBi","experiment"],function(O,R,s,l,w){"use strict";var n="wysiwyg.viewer.components.PopupContainer",a=function(i,n,e,t,o,a,r,s){var l=n.pages.getReference(o),c=n.pages.data.get(o),p=n.tpa.getPremiumTpaChildrenOnPage(l,c.tpaApplicationId,!0),d=n.wixapps.classics.isBlogPage(o),u=n.components.getTpaChildren(l),g=O.clone(u);d&&(g=g.concat(n.components.getBlogChildren(l)));var m=i.bi.getComponentsBIParams(g);O.forEach(m,function(e){e.removal_method="delete_page"});var f,h,y,b,v=!!c.tpaApplicationId&&n.tpa.app.isMultiSectionInstalled(c.tpaApplicationId);if(0<p.length&&!v||v&&(f=n,h=c.tpaApplicationId,y=p.length,(b=f.tpa.app.isPremium(h))&&1<y||!b&&0<y)){var S=c&&c.title||"",E=p[0];i.panelManager.openPanel("tpaPanels.confirmation.deletePageContainsPremiumTpa",{appName:E.appDefinitionName,appDefId:E.appDefinitionId,appCount:p.length,pageTitle:S,onConfirm:function(){P(i,n,e,o,c,t,!1,m,a,r),O.forEach(p,function(e,t){var o={app_id:e.appDefinitionId,app_site_id:e.instanceId,instance_id:g[t].id,is_last_tpa:n.tpa.app.isLastAppComp(e.applicationId)?1:0,component_type:"tpa"};i.bi.event(R.bi.events.REMOVE_COMPONENT_SECOND_STEP_CLICK,o)})},onCancel:function(){r()}},!0)}else if(d)i.panelManager.openPanel("blog.blogDeleteConfirmation",{onConfirm:function(){P(i,n,e,o,c,t,!1,m,a,r)},onCancel:function(){r()}},!0);else{P(i,n,e,o,c,t,"boolean"!=typeof s||s,m,a,r)}},g=function(e,t){e.bi.reportBI(R.bi.events.COMPONENT_REMOVED,t)},P=function(t,o,i,e,n,a,r,s,l,c){var p=o.tpa.section.getPageData(e),d=p.hasSection&&a[o.tpa.constants.COMP_TYPES.TPA_SECTION];if(o.wixapps.classics.isBlogPage(e))a.blog&&a.blog(),t.pages.beforePagesRemoveHook([e],function(){O.forEach(o.pages.getPagesData(),function(e){o.wixapps.classics.isBlogPage(e.id)&&(i.pages.remove(e.id),g(t,s))}),l&&l()});else if(d)a[o.tpa.constants.COMP_TYPES.TPA_SECTION](e,p.title,p.appData,r,l,s);else if(r){var u={pageTitle:n.title,onConfirm:m.bind(this,t,i,e,l,s),isPopup:n.isPopup,onCancel:function(){c()}};t.panelManager.openPanel("panels.messagePanels.deletePageMessage",u,!0)}else m(t,i,e,l,s)},m=function(e,t,o,i,n){e.pages.beforePagesRemoveHook([o],function(){t.pages.remove(o),i&&i(),g(e,n)})},D=function(i,n,a,e){var r=i.hidePlugins;O.forEach(e,function(e){var t=n.components.getType(e);r[t]?r[t](e):a.mobile.hiddenComponents.hide(e),!i.zoomMode.isInZoomMode()&&i.components.is.hiddenable(e)&&i.panelManager.openPanel("mobileEditor.hiddenItemsPanel");var o=function(e,t,o){var i=t.components.getType(o),n={component_id:o.id,component_type:i,current_page_name:t.pages.getFocusedPageId(),site_segment:function(e,t){var o=e.siteSegments.getFooter(),i=e.siteSegments.getHeader();if(e.components.isDescendantOfComp(t,i))return i.id;if(e.components.isDescendantOfComp(t,o))return o.id;return""}(e,o),origin:"",hide_method:""};if(e.isTpa(i)){var a=O.head(e.bi.getComponentsBIParams(o));a=O.omit(a,["is_last_tpa","widget_id"]),n=O.assign(n,a)}return n}(i,n,e);i.bi.event(l.events.mobileEditor.hiddenElements.HIDDEN_ELEMENTS_HIDE,o),i.dsActions.platform.notifyAppsOnCustomEvent(s.factory.hideMobileElement({compRef:e}))})};var k=function(e,t,o){var i=t.tpa.getTpaPointersRecursive(o),n=o.concat(i);return n=O.uniqBy(n,"id"),e.bi.getComponentsBIParams(n)},x=function(i,n,a,e,r,s){return O.map(e,function(t){var e=i.components.getType(t),o=function(){return new Promise(function(e){n.components.remove(t,e,s)})};return a[e]?Promise.resolve(a[e](t,r,o)):o()})};function r(e,t,o){R.fedopsLogger.interactionStarted(R.fedopsLogger.INTERACTIONS.DELETE_LIGHTBOX_FROM_EDITOR);var i=e.components.getPage(t);e.bi.event(R.bi.events.COMPONENT_REMOVED,{component_id:t.id,removal_method:o,component_type:n});a(e,e.dsRead,e.dsActions,e.removePagePlugins,i.id,function(){e.history.add("LightBox removed"),R.fedopsLogger.interactionEnded(R.fedopsLogger.INTERACTIONS.DELETE_LIGHTBOX_FROM_EDITOR)},O.noop,!1)}return{removePage:a,removeComponent:function(E,P,C,T,_,I){var M=O.some(_,P.components.is.container),A=1<_.length;return new Promise(function(e){if(P.viewMode.get()===P.viewMode.VIEW_MODES.MOBILE)R.appStudioUtils.isAppStudio()&&!w.isOpen("se_hiddenElementsInBuilder")||D(E,P,C,_),e();else{var t=P.tpa.getPremiumTpaChildren(_),o=O.reject(t,P.tpa.app.hasSections),i=k(E,P,_);if((M||A)&&0<o.length)return void(u=E,g=P,m=C,f=T,h=t,y=_,b=i,v=I,S=h[0],new Promise(function(e){u.panelManager.openPanel("tpaPanels.confirmation.deleteContainerContainsPremiumTpa",{appName:S.appDefinitionName,appDefId:S.appDefinitionId,appCount:h.length,onConfirm:function(){Promise.all(x(g,m,f,y,!1,v)).then(e),u.bi.reportBI(R.bi.events.COMPONENT_REMOVED,b),O.forEach(b,function(e){u.bi.event(R.bi.events.REMOVE_COMPONENT_SECOND_STEP_CLICK,e)})}},!0)})).then(e);var n=function(){Promise.all(x(P,C,T,_,!0,I)).then(function(){E.bi.reportBI(R.bi.events.COMPONENT_REMOVED,i)}).then(e)};a=E,l=n,d=r=P,c=O(s=_).flatMap(function(e){return d.components.is.container(e)?[e].concat(d.components.get.byAncestor(e)):e}).uniqBy("id").value(),p=!1,O.forEach(a.componentsRemoveHandlerPlugins,function(e){if(e(a.store.dispatch,r,s,c,l))return!(p=!0)}),p||n()}var a,r,s,l,c,p,d,u,g,m,f,h,y,b,v,S})},removePopupComponent:r,removePopupWithMessagePanel:function(e,t,o){var i=O.partial(r,e,t,o),n="mobile.core.components.Page"===e.components.getType(t)?t:e.components.getPage(t),a=e.pages.getPageTitle(n.id);e.panelManager.openPanel("panels.messagePanels.deletePageMessage",{onConfirm:i,pageTitle:a,isPopup:!0})},cutComponent:function(e,t,o,i){var n=e.components.getType(o);i[n]?i[n](o):t.components.remove(o)}}}),define("rEditor/rootComps/keyboard/config/baseEditorShortcuts",["lodash","stateManagement","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","rEditor/rootComps/keyboard/actions/selectComponentShortcutsActions","rEditor/rootComps/keyboard/util/editorDebugShortcutsUtil","rEditor/rootComps/keyboard/util/commonKeyboardActions","rEditor/utils/removeUtil","coreBi","constants","helpIds","rEditor/rootComps/keyboard/util/sendBIAndActionUtil","experiment"],function(l,c,e,t,i,n,r,p,s,d,u,g){"use strict";var m=c.editorPlugins.userPreferences.selectors.getSiteUserPreferences,a={},f="keyboard_shortcut",h=e.editor,y=0,b=["leftPanelFrame","compPanelFrame","focusPanelFrame","messagePanelFrame","toolPanelFrame","tpaSettingsPanelFrame"];function o(e){var t={};t[h.AUTOSAVE_ON_OFF.key]=function(e){if(e.generalInfo.isFirstSave())return;var t=c.userPreferences.selectors.getSiteUserPreferences(s.USER_PREFS.SAVE.AUTOSAVE_ENABLED)(e.store.getState());l.isUndefined(t)?e.store.dispatch(c.editorPlugins.userPreferences.actions.setSiteUserPreferences(s.USER_PREFS.SAVE.AUTOSAVE_ENABLED,!1)):e.store.dispatch(c.editorPlugins.userPreferences.actions.setSiteUserPreferences(s.USER_PREFS.SAVE.AUTOSAVE_ENABLED,!t));e.bi.event(p.events.save.autosave.ENABLE_DISABLE,{type:t?"disable":"enable"}),e.autosaveManager.autosaveStatusTooltip(t),e.autosaveManager.init({enabled:!t},!0)}.bind(null,e),t[h.SELECT_ALL.key]=e.selection.selectAll,t[h.PASTE.key]=S.bind(null,e,!1),g.isOpen("se_enableCrossSiteCopyPaste")?t[h.PASTE_AND_APPLY_THEME.key]=S.bind(null,e,!0):t[h.APPLY_MODE.key]=function(e){var t=p.events.rightClickMenu;e.copyPaste.canApplyModeFromClipboard()&&(e.copyPaste.applyModeFromClipboard(e.selection.getSelectedComponents()),u(e,t.APPLY_MODE_FROM_CLIPBOARD,{origin:"keyboard"}))}.bind(null,e),t[h.UNDO.key]=n.undoFromKeyboard.bind(null,e),t[h.REDO.key]=n.redoFromKeyboard.bind(null,e),t[h.DELETE.key]=function(t){var e=t.selection.getSelectedComponents(),o=t.components.layout.isPinned(e)?1:0;if(u(t,p.events.editor.component_removed,{removal_method:"keyboard",is_component_pinned:o}),"old"!==g.getValue("se_notificationCenter")){var i=!!m(s.USER_PREFS.UNDO.UNDO_PREVIOUSLY_USED)(t.store.getState()),n=!!m(s.USER_PREFS.DELETE.FIRST_TIME_DELETE_USED)(t.store.getState());if(!i&&!n){t.store.dispatch(c.editorPlugins.userPreferences.actions.setSiteUserPreferences(s.USER_PREFS.DELETE.FIRST_TIME_DELETE_USED,!0));t.store.dispatch(c.editorPlugins.notifications.actions.showUserActionNotification({message:"Notifications_Undo_Redo_Text",title:"Undo Redo",type:"info",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){t.panelManager.openHelpCenter(d.NOTIFICATIONS.UNDO_REDO)}}}))}}var a=t.selection.isPopupPageSelected(e)?l.head(e):t.selection.getSelectedPopup(e);if(a&&!t.isMobileEditor())return void r.removePopupWithMessagePanel(t,a,f);t.selectedComponent.remove().then(function(e){e&&t.history.add("component - remove")})}.bind(null,e),t[h.SAVE.key]=n.saveSiteFromKeyboard.bind(null,e),t[h.SAVE_AS_TEMPLATE.key]=n.saveSiteAsTemplateFromKeyboard.bind(null,e),t[h.SELECT_NEXT_COMP.key]=E.bind(null,e),t[h.SELECT_PREV_COMP.key]=P.bind(null,e),t[h.SELECT_NEXT_COMP_TAB.key]=function(e,t){t.preventDefault(),E(e)}.bind(null,e),t[h.SELECT_PREV_COMP_TAB.key]=function(e,t){t.preventDefault(),P(e)}.bind(null,e),t[h.TOGGLE_RULERS.key]=function(e){e.store.dispatch(c.editorPlugins.rulers.actions.toggleRulers())}.bind(null,e),t[h.CLOSE_PANELS.key]=function(e){var t=e.panelManager;0<t.getOpenPanels().length?l.forEach(b,t.closeAllPanelsOfType):c.editorPlugins.panels.selectors.selectHelpProps(e.store.getState())?t.closeHelpCenter():e.selection.isComponentSelected()?e.selection.deselectComponents():(e.toolsControl.toggleHideTools(!1),e.bi.event(p.events.editor.hide_tools.show_controls,{origin:"shortcut"}))}.bind(null,e),t[h.SEND_TO_FRONT.key]=v.toFront.bind(null,e),t[h.SEND_TO_BACK.key]=v.toBack.bind(null,e),t[h.SEND_FORWARD.key]=v.forward.bind(null,e),t[h.SEND_BACKWARD.key]=v.backward.bind(null,e),t[h.TOGGLE_PREVIEW.key]=function(e,t){t.preventDefault(),e.bi.event(p.events.preview.PREVIEW_CLICK,{origin:"keyboard"}),e.preview.togglePreview()}.bind(null,e),t[h.TOGGLE_MOBILE.key]=function(e,t){t.preventDefault(),e.bi.event(p.events.topbar.editor_view_mode_switch,{origin:"keyboard"});var o=e.isMobileEditor();e.setEditorMode(!o)}.bind(null,e),t[h.PLATFORM_APP_CONFIGURATION.key]=function(e){if(8<=y){var t=e.dsRead.platform.getAppDataByAppDefId("editorPlatformWixComponents");t?e.dsActions.platform.notifyApplication(t.applicationId,{eventType:"openModal"}):e.dsActions.platform.initApp({appDefinitionId:"editorPlatformWixComponents",editorUrl:"https://static.parastorage.com/services/editor-platform-app-configuration-ui-node/1.33.0/assets/editor.js"}),y=0}else y++}.bind(null,e),t[h.PUBLISH_SITE.key]=n.publishSiteFromKeyboard.bind(null,e),t[h.HIDE_TOOLS.key]=function(e){var t=e.toolsControl.toggleHideTools()?"hide_controls":"show_controls";e.bi.event(p.events.editor.hide_tools[t],{origin:"shortcut"})}.bind(null,e);var o=i(e);l.merge(t,o),l.merge(a,t)}var v={toFront:function(e){var t=e.selection.getSelectedComponents();e.components.is.controlledByParent(t)||(e.components.arrangement.moveToFront(t),u(e,p.events.rightClickMenu.BRING_TO_FRONT,{origin:"keyboard"}))},toBack:function(e){var t=e.selection.getSelectedComponents();e.components.is.controlledByParent(t)||(e.components.arrangement.moveToBack(t),u(e,p.events.rightClickMenu.SEND_TO_BACK,{origin:"keyboard"}))},forward:function(e){var t=e.selection.getSelectedComponents();e.components.is.controlledByParent(t)||(e.components.arrangement.moveForward(t),u(e,p.events.rightClickMenu.MOVE_FORWARD,{origin:"keyboard"}))},backward:function(e){var t=e.selection.getSelectedComponents();e.components.is.controlledByParent(t)||(e.components.arrangement.moveBackward(t),u(e,p.events.rightClickMenu.MOVE_BACKWARDS,{origin:"keyboard"}))}};function S(e,t){var o,i,n,a,r,s;e.copyPaste.hasComponentToPaste()?(o=e,i=t,n=p.events.rightClickMenu,a=o.clipboard.getItem().value,r=l.map(a.components,"serializedComp.layout"),s=c.editorPlugins.componentMetaData.selectors.isPinnedBySerializedLayout(r,o.dsRead),o.copyPaste.paste(void 0,void 0,i,"keyboard"),o.history.add("component - paste"),u(o,n.PASTE,{origin:"keyboard",is_component_pinned:s})):e.copyPaste.hasPageToPaste()&&e.copyPaste.pastePage()}function E(e){e.panelManager.closeAllPanels(),t.selectNextComponent(e)}function P(e){e.panelManager.closeAllPanels(),t.selectPreviousComponent(e)}return{init:function(e){o(e)},shortcuts:a}}),define("rEditor/rootComps/keyboard/config/shortcutsConfig",["util","lodash","stateManagement","rEditor/rootComps/keyboard/config/topContextShortcuts","rEditor/rootComps/keyboard/config/editorShortcuts","rEditor/rootComps/keyboard/config/previewShortcuts","rEditor/rootComps/keyboard/config/pinModeShortcuts","rEditor/rootComps/keyboard/config/zoomModeShortcuts","rEditor/rootComps/keyboard/config/imageCropShortcuts","rEditor/rootComps/keyboard/config/pagesMenuPanelShortcuts","rEditor/rootComps/keyboard/config/baseEditorShortcuts"],function(e,t,c,p,d,u,g,m,f,h,y){"use strict";var b=e.keyboardShortcuts;function v(e,i){return t.mapValues(e,function(e){return t=e,o=i,function(){return o(),t.apply(null,arguments)};var t,o})}function o(i,e){b.registerContext(b.CONTEXTS.TOP_CONTEXT,v(p.shortcuts,e),i);var t=b.extendContext(b.CONTEXTS.TOP_CONTEXT,v(y.shortcuts,e));b.registerContext(b.CONTEXTS.BASE_EDITOR,t,i);var o=b.extendContext(b.CONTEXTS.TOP_CONTEXT,v(u.shortcuts,e));b.registerContext(b.CONTEXTS.PREVIEW,o,i);var n=b.extendContext(b.CONTEXTS.BASE_EDITOR,v(d.shortcuts,e));b.registerContext(b.CONTEXTS.EDITOR,n,i);var a=b.extendContext(b.CONTEXTS.EDITOR,v(h.shortcuts,e));b.registerContext(b.CONTEXTS.PAGES_MENU_PANEL,a,i);var r=b.extendContext(b.CONTEXTS.BASE_EDITOR,v(g.shortcuts,e));b.registerContext(b.CONTEXTS.PIN_MODE,r,i);var s=b.extendContext(b.CONTEXTS.TOP_CONTEXT,v(f.shortcuts,e));b.registerContext(b.CONTEXTS.IMAGE_CROP,s,i);var l=b.extendContext(b.CONTEXTS.TOP_CONTEXT,v(m.shortcuts,e));b.registerContext(b.CONTEXTS.ZOOM_MODE,l,i),function(o,i){var n=0,a=void 0;function r(){var e;S((_defineProperty(e={},o[n],null),_defineProperty(e,o[0],t),e)),n=0}var t=function e(){var t;(clearTimeout(a),n===o.length-1)?(i(),r()):(S((_defineProperty(t={},o[++n-1],null),_defineProperty(t,o[n],e),t)),a=setTimeout(function(){r()},500))};S(_defineProperty({},o[n],t))}("ilovewix",function(){return e=i.store.dispatch,t=20,void(o=setInterval(function(){t||clearInterval(o),t--,e(c.editorPlugins.easterEggs.actions.showFlyingMusa())},1e3));var e,t,o})}var S=function(e){var t=b.extendContext(b.CONTEXTS.EDITOR,e);b.registerContext(b.CONTEXTS.EDITOR,t)};return{init:t.once(function(e){p.init(e),u.init(e),y.init(e),g.init(e),f.init(e),m.init(e),d.init(e),h.init(e),o(e,e.closeRightClickMenu)})}}),define("rEditor/utils/isRightClickWithCtrlInDebugMode",["util"],function(o){"use strict";return function(e){var t=o.url.parseUrlParams(window.location);return e.ctrlKey&&"all"===t.debug}}),define("rEditor/rootComps/leftBar/leftBarMapper",["lodash","util","stateManagement"],function(e,a,r){"use strict";var t=function(e,t,o){var i=o.editorAPI;e(r.editorPlugins.leftBar.actions.sendBIButtonsCount(i.isPopUpMode()))},o=function(e,t,o){o.editorAPI.hideFloatingBubble()};return{mapStateToProps:function(e){var t=e.state,o=e.editorAPI,i=r.editorPlugins.leftBar.selectors.getMenuItems(t,o.isPopUpMode()),n=r.editorPlugins.leftBar.selectors.getOverrideItems(t,o.isMobileEditor());return{superAppsDesktopCount:r.editorPlugins.leftBar.selectors.getDesktopSuperAppsCount(t),isCollapsed:r.editorPlugins.leftBar.selectors.isCollapsed(t),leftBarMenuItems:a.overrideUtils.applyOverrides(i,n,o.isMobileEditor()?"panelName":"key"),isMobileEditor:o.isMobileEditor(),openPanels:o.getOpenPanels(),isEnabled:o.editorIsInit(),halfOpacityTools:o.toolsControl.isHalfOpacityTools(),isHidden:o.toolsControl.areToolsHidden(),leftBarNotifications:r.editorPlugins.leftBar.selectors.getNotifications(t)}},mapDispatchToProps:function(i){return{sendBIButtonsCount:function(){i(t)},reportBI:function(e,t){i(r.editorPlugins.bi.actions.event(e,t))},collapseMenu:function(){i(r.editorPlugins.leftBar.actions.collapseMenu())},openPanel:function(e,t,o){i(r.panels.actions.updateOrOpenPanel(e,t,o))},collapseButton:function(e){i(r.editorPlugins.leftBar.actions.collapseButton(e))},hideFloatingBubble:function(){i(o)},updateLeftBarButtonsBoundingRect:function(e){i(r.editorPlugins.leftBar.actions.updateButtonsBoundingRect(e))}}}}}),define("rEditor/rootComps/leftBar/leftBarButton/leftBarButton.rt",["react","lodash","santa-editor-symbols","experiment"],function(e,t,o,i){"use strict";return function(){return e.createElement("li",{className:t(this.getButtonClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),ref:"root",onClick:this.handleOnClick},this.shouldShowSelectedSvg()?e.createElement(o.symbol,t.assign({},{key:"selectedSvg"},this.getSelectedButtonSvgProps())):null,e.createElement(o.symbol,{name:this.props.symbolName,className:"icon"}),e.createElement("span",{className:"mask"}),e.createElement("span",{className:"text"},this.props.label),this.shouldShowNotificationCounter()?e.createElement("span",{key:"notificationCount",className:"notifications"},this.props.notificationCount):null)}}),define("rEditor/rootComps/leftBar/leftBarButton/leftBarButton",["lodash","create-react-class","prop-types","constants","baseUI","rEditor/rootComps/leftBar/leftBarButton/leftBarButton.rt","santa-editor-symbols"],function(e,t,o,i,n,a){"use strict";var r=n.tooltipManager;return t({displayName:"leftBarButton",propTypes:{className:o.string.isRequired,symbolName:o.string.isRequired,label:o.string.isRequired,isSelected:o.bool.isRequired,isMobileEditor:o.bool.isRequired,onClick:o.func.isRequired,isMenuCollapsed:o.bool,notificationCount:o.number.isRequired,isFirstPanel:o.bool,collapseOnClick:o.bool,isButtonOpen:o.bool,hintProps:o.object,tooltips:o.array},getInitialState:function(){return{activeState:null}},componentDidMount:function(){this.setButtonTooltips()},setButtonTooltips:function(){e.forEach(this.props.tooltips,function(e){r.createTooltip(!1,{id:e.id,targetNode:this.refs.root,value:e.value,width:e.width,alignment:i.UI.TOOLTIP.ALIGNMENT.LEFT,closeTriggers:[i.UI.TOOLTIP.TRIGGERS.OUTER_CLICK],onOpen:this.setState.bind(this,{activeState:"force-hover"}),onClose:this.setState.bind(this,{activeState:null})})}.bind(this))},closeTooltips:function(){e.forEach(this.props.tooltips,function(e){r.isDisplayed(e.id)&&r.hide(e.id)})},getButtonClasses:function(){var e={"left-bar-item":!0,selected:this.props.isSelected,"first-panel":this.props.isFirstPanel,"wait-for-click":this.props.collapseOnClick};return this.state.activeState&&(e[this.state.activeState]=!0),e[this.props.className]=!0,e},shouldShowNotificationCounter:function(){return 0<this.props.notificationCount},handleOnClick:function(){this.closeTooltips(),this.props.onClick&&this.props.onClick()},getSelectedButtonSvgProps:function(){var e=void 0,t=void 0;return t=this.props.isFirstPanel?(e="leftBarButtonEarTop","ear-top"):(e="leftBarButtonEarMiddle","ear-middle"),{name:e,className:"ear "+t}},shouldShowSelectedSvg:function(){return this.props.isMenuCollapsed&&this.props.isSelected},render:a})}),define("rEditor/rootComps/leftBar/leftBar.rt",["react","lodash","rEditor/rootComps/leftBar/leftBarButton/leftBarButton","util"],function(o,e,i,n){"use strict";return function(){return o.createElement("div",{className:e({"left-bar":!0,"is-hidden":this.props.isHidden,"half-opacity":this.props.halfOpacityTools,"menu-collapsed-wrapper":this.props.isCollapsed}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),style:{left:this.getLeftOffset()},onContextMenu:this.onContextMenu,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter},o.createElement.apply(this,["ul",{ref:"buttons",className:e({"left-bar-items":!0,"menu-collapsed":this.props.isCollapsed,"menu-opened":this.isMenuOpened()}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},e.map(this.props.leftBarMenuItems,function(e,t){return o.createElement(i,{tooltips:e.tooltips,key:e.panelName,label:n.translate(e.label),isMenuCollapsed:this.props.isCollapsed,className:e.className,symbolName:e.symbolName,isMobileEditor:this.props.isMobileEditor,isSelected:this.isSelected(e.panelName),onClick:function(e,t){this.handleOnClick(e.panelName,e.panelProps)}.bind(this,e,t),isFirstPanel:0===t,collapseOnClick:e.collapseOnClick,isButtonOpen:e.isButtonOpen,notificationCount:this.getNotificationCount(e.panelName),hintProps:e.hintProps,getUserSitePreferences:this.props.getUserSitePreferences,setUserSitePreferences:this.props.setUserSitePreferences})}.bind(this))]))}}),define("rEditor/rootComps/leftBar/leftBar",["reactDOM","lodash","create-react-class","prop-types","zepto","util","rEditor/utils/isRightClickWithCtrlInDebugMode","rEditor/rootComps/leftBar/leftBarMapper","rEditor/rootComps/leftBar/leftBar.rt"],function(o,i,e,t,n,a,r,s,l){"use strict";var c=a.hoc,p=c.connect,d=c.STORES.EDITOR_API;function u(e){var t=i.find(e.openPanels,{frameType:"leftPanelFrame"});return t&&t.name}var g=e({displayName:"leftBar",propTypes:{superAppsDesktopCount:t.number,isCollapsed:t.bool,leftBarMenuItems:t.array.isRequired,isMobileEditor:t.bool.isRequired,openPanels:t.array.isRequired,isEnabled:t.bool.isRequired,isHidden:t.bool.isRequired,halfOpacityTools:t.bool.isRequired,reportBI:t.func,sendBIButtonsCount:t.func,leftBarNotifications:t.object.isRequired,collapseMenu:t.func.isRequired,openPanel:t.func.isRequired,collapseButton:t.func.isRequired,hideFloatingBubble:t.func.isRequired,updateLeftBarButtonsBoundingRect:t.func.isRequired},componentDidMount:function(){this.mounted=!0,this.updateButtonsBoundingRect(),this.props.isHidden&&n(o.findDOMNode(this)).css({left:this.getLeftOffset()})},componentWillUnmount:function(){this.mounted=!1},componentDidUpdate:function(e){this.updateButtonsBoundingRect(),this.sendBIButtonsCountIfNeeded(e)},getNotificationCount:function(e){return this.props.leftBarNotifications[e]||0},sendBIButtonsCountIfNeeded:function(e){this.props.superAppsDesktopCount!==e.superAppsDesktopCount&&this.props.sendBIButtonsCount()},componentWillReceiveProps:function(e){u(e)&&(this.props.isCollapsed||this.props.collapseMenu())},handleOnClick:function(e,t){var o=u(this.props);this.props.isEnabled&&e!==o&&(this.props.collapseMenu(),this.props.openPanel(e,t),t.openPanelBiEvent&&this.props.reportBI(t.openPanelBiEvent,t.openPanelBiParams)),this.props.collapseButton(e),this.props.hideFloatingBubble()},isMenuOpened:function(){return!!u(this.props)},updateButtonsBoundingRect:function(){var e=void 0,t=i.some(this.props.leftBarMenuItems,"collapseOnClick");e=this.props.isCollapsed&&!t?null:o.findDOMNode(this.refs.buttons).getBoundingClientRect(),this.props.updateLeftBarButtonsBoundingRect(e)},getLeftOffset:function(){if(!this.props.isHidden)return"";var e="";this.mounted?e=-(o.findDOMNode(this).offsetWidth+12):e=-1e3;return e+"px"},onContextMenu:function(e){r(e)||e.preventDefault()},isSelected:function(e){var t=u(this.props);return!(!t||t!==e)},render:function(){return l.call(this)}}),m=p(d,s.mapStateToProps,s.mapDispatchToProps)(g);return m.pure=g,m}),define("rEditor/rootComps/toolBar/toolBarLogic",[],function(){"use strict";return{isPasteEnabled:function(e){return e.clipboard.hasItem()&&e.isDesktopEditor()&&!e.components.layout.isPinned(e.selection.getSelectedComponents())}}}),define("rEditor/rootComps/toolBar/toolBarMapper",["lodash","util","constants","rEditor/utils/isRightClickWithCtrlInDebugMode","stateManagement","rEditor/rootComps/toolBar/toolBarLogic"],function(p,e,d,t,u,g){"use strict";var m=e.headerScrollTypes,f=e.array.isMultiselect,h=u.editorPlugins.pinMode,y=u.editorPlugins.selection,o=u.editorPlugins.domMeasurements.selectors,b=o.getPreviewPosition,v=o.getStageLayout;function S(e){t(e)||e.preventDefault()}return function(e){var o=e.editorAPI,t=o.store.getState(),i=y.selectors.getSelectedCompsRefs(t),n=void 0;n=p.isEmpty(i)?(i=null,{}):y.selectors.getSelectedCompRestrictions(t);var a,r,s,l=h.selectors.isOpen(t),c=p.get(o.components.properties.get(i),"flip","");return{hidden:l,toolsHidden:o.toolsControl.areToolsHidden(),halfOpacityTools:o.toolsControl.isHalfOpacityTools(),components:i,viewMode:o.viewMode.get(),getComponentBehaviors:o.components.behaviors.get,getSelectedHeaderType:m.getSelectedHeaderType,componentsWithoutAncestor:o.components.getComponentsWhichDontHaveAncestorsInTheArray(i),onContextMenu:S,previewTopPosition:b(t).top,layout:function(e,t){if(!t)return{componentLayout:null,update:p.noop,updateAndPreserveProportions:p.noop};var o=e.components.layout.isHorizontallyStretchedToScreen(t),i=e.pages.getPrimaryContainer(),n=!e.utils.isPage(i),r=o?e.components.layout.getRelativeToScreen(i):e.components.layout.getRelativeToStructure(i),a=function(e){return n?p.defaultsDeep({x:e.x-r.x,y:e.y-r.y,bounding:{x:e.bounding.x-r.bounding.x,y:e.bounding.y-r.bounding.y}},e):e},s=function(a){return n?function(e,t){for(var o=arguments.length,i=Array(2<o?o-2:0),n=2;n<o;n++)i[n-2]=arguments[n];a.apply(void 0,[e,p({x:t.x+r.x,y:t.y+r.y}).pick(p.keys(t)).defaultsDeep(t).value()].concat(i))}:a};return o?{componentLayout:a(e.components.layout.getRelativeToScreen(t)),update:s(e.components.layout.updateRelativeToScreen),updateAndPreserveProportions:s(e.components.layout.updateRelativeToScreenAndPreserveProportions)}:{componentLayout:a(e.components.layout.getRelativeToStructure(t)),update:s(e.components.layout.updateRelativeToStructure),updateAndPreserveProportions:s(e.components.layout.updateRelativeToStructureAndPreserveProportions)}}(o,i),componentsRestrictions:n,areComponentsMultiSelectedOrGrouped:function(e,t){if(!t)return!1;var o=e.components.getComponentsWhichDontHaveAncestorsInTheArray(t);return f(o)||e.components.is.group(o)}(o,i),componentsProportions:(a=o,r=i,s=a.components.getComponentsWhichDontHaveAncestorsInTheArray(r),f(s)||a.components.is.group(s)?a.components.layout.getProportionStructure(s):null),componentLayoutLimits:i?o.dsRead.components.layout.getLimits(p.head(i)):{},addHistory:o.history.add,toggleShowOnAllPages:p.partial(o.components.toggleShowOnAllPages,i),shouldDisableShowOnAllPages:Boolean(i&&o.components.shouldDisableShowOnAllPages(i)),isPage:Boolean(i&&o.utils.isPage(i)),reportBI:o.bi.event,isComponentShowOnAllPages:Boolean(i&&o.components.isShowOnAllPages(i)),isPasteEnabled:g.isPasteEnabled(o),toggleToolbar:o.toolbar.toggleToolbar,componentType:o.selection.getSelectedComponentType(),isCurrentPageWidgetPage:o.dsRead.pages.isWidgetPage(o.pages.getFocusedPageId()),onHelp:function(e,t){o.panelManager.openHelpCenter(e,null,t)},openLayersPanel:function(){o.store.dispatch(u.panels.actions.updateOrOpenPanel("panels.toolPanels.layersPanel",{comp:i}))},toggleFixedPosition:o.selectedComponent.toggleFixedPosition,compDeleteTooltipText:o.tooltipTextService.getComponentTooltipText(i,"DELETE"),compBIParams:o.bi.getComponentsBIParams(i),isCompControlledByParent:n.isControlledByParent,copyPasteAPI:p.pick(o.copyPaste,["duplicate","paste","pastePage","copy","hasComponentToPaste","hasPageToPaste"]),selectedMenuItem:o.mainMenu.panelContext.getSelectedMenuItem(),canDistributeAllDirections:o.components.multiComponents.canDistributeAllDirections(i),distribute:o.components.multiComponents.distribute,canMatchAllSizes:o.components.multiComponents.canMatchAllSizes(i),matchSize:o.components.multiComponents.matchSize,isMobileEditor:o.isMobileEditor(),canAlignAllDirections:o.components.alignment.canAlignAllDirections(i),alignComp:o.components.alignment.align,removeComp:o.components.remove,arrangementAPI:p.pick(o.components.arrangement,["moveToFront","moveForward","moveToBack","moveBackward"]),isRightPanelOpen:u.editorPlugins.panels.selectors.isDockedSectionOpen(t),isDevModeOpened:u.editorPlugins.userPreferences.selectors.getSiteUserPreferences(d.USER_PREFS.DEVELOPER_MODE.FIRST_TIME)(t),stageLayout:v(t),topBarCloseToolsUsed:u.editorPlugins.userPreferences.selectors.getSiteUserPreferences("topBarCloseToolsUsed")(t),isFlippedHoriz:p.includes(c,"y"),isFlippedVert:p.includes(c,"x"),toggleFlipHoriz:function(){o.components.flip(i,"y")},toggleFlipVert:function(){o.components.flip(i,"x")},showUserActionNotification:function(){var e;return o.store.dispatch((e=u.editorPlugins.notifications.actions).showUserActionNotification.apply(e,arguments))}}}}),define("rEditor/rootComps/toolBar/toolSelector.rt",["react","lodash","baseUI"],function(e,t,o){"use strict";return function(){return e.createElement("div",{className:t(this.getClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),style:{position:"relative"}},this.state.isMenuDisplayed?e.createElement("div",{className:t(this.getDropDownClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"menuDropDown",onMouseLeave:this.hideMenu},this.props.children):null,e.createElement(o.tooltip,{disabled:!this.props.tooltip,value:this.props.tooltip,className:this.props.tooltipClass,delay:"600"},e.createElement("span",{className:t({button:!0,disabled:this.props.disabled}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:this.displayMenu},e.createElement(o.symbol,{name:this.props.symbol}))),this.props.children&&1<this.props.children.length?e.createElement("div",{key:"smallIndicator",className:"small-indicator"}):null)}}),define("rEditor/rootComps/toolBar/toolSelector",["create-react-class","prop-types","lodash","rEditor/rootComps/toolBar/toolSelector.rt"],function(e,t,o,i){"use strict";return e({displayName:"toolSelector",propTypes:{symbol:t.string.isRequired,columns:t.number,onShow:t.func,tooltipClass:t.string,disabled:t.bool},getDefaultProps:function(){return{columns:3,disable:!1}},getInitialState:function(){return{isMenuDisplayed:!1}},displayMenu:function(){this.props.disabled||(this.setState({isMenuDisplayed:!0}),o.isFunction(this.props.onShow)&&this.props.onShow())},hideMenu:function(){var e=this;window.setTimeout(function(){e.safelySetState({isMenuDisplayed:!1})},300)},componentDidMount:function(){this._isMounted=!0},componentWillUnmount:function(){this._isMounted=!1},safelySetState:function(e){this._isMounted&&this.setState(e)},getDropDownClasses:function(){var e={"drop-down":!0,disabled:this.props.disabled};return e["grid-"+this.props.columns+"-col"]=!0,e},getClasses:function(){var t={"tool-selector":!0};if(this.props.className){var e=this.props.className.split(" ");o.forEach(e,function(e){t[e]=!0})}return this.props.disabled&&(t.disabled=!0),t},render:i})}),define("rEditor/rootComps/toolBar/toolbarTop.rt",["react","lodash","baseUI","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","coreBi","rEditor/rootComps/toolBar/toolSelector","constants"],function(o,i,n,a,r,s,l){"use strict";return function(){return function(){var e=this.props.restrictions,t=a.editor;return o.createElement("div",{},o.createElement("div",{className:"inner button-grid"},o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_copy",t.COPY.label),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:i({button:!0,disabled:!e.duplicatable}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:this.handleCopy},o.createElement(n.symbol,{name:"toolbarCopy"}))),o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_paste",t.PASTE.label),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:i({button:!0,disabled:!this.props.pasteEnabled}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:this.handlePaste},o.createElement(n.symbol,{name:"toolbarPaste"}))),o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_duplicate",t.DUPLICATE.label),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:i({button:!0,disabled:!e.duplicatable}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:this.handleDuplicate},o.createElement(n.symbol,{name:"toolbarDuplicate"}))),o.createElement(n.tooltip,{value:this.getDeleteTooltipText(),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:i({button:!0,disabled:!e.removable}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:this.handleDelete},this.props.isMobileEditor?null:o.createElement(n.symbol,{key:"deleteSymbol",name:"toolbarDelete"}),this.props.isMobileEditor?o.createElement(n.symbol,{key:"hideSymbol",name:"gfpp_hide"}):null))),o.createElement("div",{className:"seperator"}),o.createElement("div",{className:"inner button-grid"},o.createElement(s,{disabled:!(e.canMoveForward||e.canMoveBackward)||this.props.isCompControlledByParent,symbol:"toolbarMoveForward",columns:2,tooltip:this.getInfoTooltip("toolbar_tooltip_arrange","toolbar_tooltip_arrange_info"),tooltipClass:"control-tooltip-small"},o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_arrange_move_forward",t.SEND_FORWARD.label),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:i({button:!0,disabled:!e.canMoveForward}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:function(e,t){this.moveForward()}.bind(this,e,t)},o.createElement(n.symbol,{name:"toolbarMoveForward"}))),o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_arrange_move_backward",t.SEND_BACKWARD.label),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:i({button:!0,disabled:!e.canMoveBackward}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:function(e,t){this.moveBackward()}.bind(this,e,t)},o.createElement(n.symbol,{name:"toolbarMoveBackward"}))),o.createElement(n.tooltip,{alignment:"bottom",value:this.getShortcutTooltip("toolbar_tooltip_arrange_bring_to_front",t.SEND_TO_FRONT.label),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:i({button:!0,disabled:!e.canMoveForward}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:function(e,t){this.moveToFront()}.bind(this,e,t)},o.createElement(n.symbol,{name:"toolbarMoveToFront"}))),o.createElement(n.tooltip,{alignment:"bottom",value:this.getShortcutTooltip("toolbar_tooltip_arrange_send_to_back",t.SEND_TO_BACK.label),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:i({button:!0,disabled:!e.canMoveBackward}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:function(e,t){this.moveToBack()}.bind(this,e,t)},o.createElement(n.symbol,{name:"toolbarMoveToBack"})))),o.createElement(s,{disabled:!this.isAlignEnabled(),symbol:"toolbarAlignRight",columns:3,onShow:i.partial(this.props.reportBI,r.events.toolbar.TOOL_BAR_ALIGNMENT_CLICK,{}),tooltip:this.getInfoTooltip("toolbar_tooltip_align","toolbar_tooltip_align_info"),tooltipClass:"control-tooltip-small"},o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_align_left"),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:"button",onClick:function(e,t){this.align("left")}.bind(this,e,t)},o.createElement(n.symbol,{name:"toolbarAlignLeft"}))),o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_align_center"),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:"button",onClick:function(e,t){this.align("center")}.bind(this,e,t)},o.createElement(n.symbol,{name:"toolbarAlignCenter"}))),o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_align_right"),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:"button",onClick:function(e,t){this.align("right")}.bind(this,e,t)},o.createElement(n.symbol,{name:"toolbarAlignRight"}))),o.createElement(n.tooltip,{alignment:"bottom",value:this.getShortcutTooltip("toolbar_tooltip_align_top"),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:"button",onClick:function(e,t){this.align("top")}.bind(this,e,t)},o.createElement(n.symbol,{name:"toolbarAlignTop"}))),o.createElement(n.tooltip,{alignment:"bottom",value:this.getShortcutTooltip("toolbar_tooltip_align_middle"),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:"button",onClick:function(e,t){this.align("middle")}.bind(this,e,t)},o.createElement(n.symbol,{name:"toolbarAlignMiddle"}))),o.createElement(n.tooltip,{alignment:"bottom",value:this.getShortcutTooltip("toolbar_tooltip_align_bottom"),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:"button",onClick:function(e,t){this.align("bottom")}.bind(this,e,t)},o.createElement(n.symbol,{name:"toolbarAlignBottom"})))),o.createElement(s,{key:"distributeButtons",disabled:!this.isDistributeEnabled(),symbol:"distribute-vertical-btn-bld",columns:3,onShow:i.partial(this.props.reportBI,r.events.toolbar.TOOL_BAR_DISTRIBUTION_CLICK,{}),tooltip:this.getInfoTooltip("toolbar_tooltip_distribute","toolbar_tooltip_distribute_info"),tooltipClass:"control-tooltip-small"},o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_distribute_horizontally"),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:"button",onClick:function(e,t){this.distribute("horizontal")}.bind(this,e,t)},o.createElement(n.symbol,{name:"distribute-horizontal-btn-bld"}))),o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_distribute_both"),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:"button",onClick:function(e,t){this.distribute("verticalAndHorizontal")}.bind(this,e,t)},o.createElement(n.symbol,{name:"distribute-hw-btn-bld"}))),o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_distribute_vertically"),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:"button",onClick:function(e,t){this.distribute("vertical")}.bind(this,e,t)},o.createElement(n.symbol,{name:"distribute-vertical-btn-bld"})))),o.createElement(s,{key:"matchSizeButtons",disabled:!this.isMatchSizeEnabled(),symbol:"mech-to-height-btn-bld",columns:3,onShow:i.partial(this.props.reportBI,r.events.toolbar.TOOL_BAR_MATCH_SIZE_CLICK,{}),tooltip:this.getInfoTooltip("toolbar_tooltip_match_size","toolbar_tooltip_match_size_info"),tooltipClass:"control-tooltip-small"},o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_match_size_width"),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:"button",onClick:function(e,t){this.matchSize("width")}.bind(this,e,t)},o.createElement(n.symbol,{name:"mech-to-width-btn-bld"}))),o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_match_size_both"),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:"button",onClick:function(e,t){this.matchSize("heightAndWidth")}.bind(this,e,t)},o.createElement(n.symbol,{name:"mech-hw-btn-bld"}))),o.createElement(n.tooltip,{value:this.getShortcutTooltip("toolbar_tooltip_match_size_height"),styleType:l.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},o.createElement("span",{className:"button",onClick:function(e,t){this.matchSize("height")}.bind(this,e,t)},o.createElement(n.symbol,{name:"mech-to-height-btn-bld"}))))))}.apply(this,[])}}),define("rEditor/rootComps/toolBar/toolbarTop",["react","create-react-class","prop-types","lodash","baseUI","util","coreBi","rEditor/rootComps/toolBar/toolbarTop.rt"],function(o,e,t,i,n,a,r,s){"use strict";var l=r,c=e({displayName:"toolbarTop",propTypes:{restrictions:t.object,components:t.arrayOf(t.object),pasteEnabled:t.bool,compDeleteTooltipText:t.func,compBIParams:t.array,isCompControlledByParent:t.bool,reportBI:t.func,copyPasteAPI:t.shape({copy:t.func,paste:t.func,pastePage:t.func,duplicate:t.func,hasComponentToPaste:t.func,hasPageToPaste:t.func}),selectedMenuItem:t.object,canDistributeAllDirections:t.bool,distribute:t.func,canMatchAllSizes:t.bool,matchSize:t.func,addHistory:t.func,isMobileEditor:t.bool,canAlignAllDirections:t.bool,alignComp:t.func,removeComp:t.func,arrangementAPI:t.shape({moveToFront:t.func,moveForward:t.func,moveToBack:t.func,moveBackward:t.func})},getShortcutTooltip:function(e,t){return o.createElement(n.popoverTemplates.keyboardShortcutTooltip,{label:e,shortcut:t})},getDeleteTooltipText:function(){var e=this.props.isMobileEditor?"toolbar_tooltip_hide":"toolbar_tooltip_delete";return this.props.restrictions.removable?this.getShortcutTooltip(e,a.translate("toolbar_tooltip_delete_shortcut")):this.getDisabledDeleteTooltipText(e,a.translate("toolbar_tooltip_delete_shortcut"))},getDisabledDeleteTooltipText:function(e,t){var o=this.props.compDeleteTooltipText;return o||this.getShortcutTooltip(e,t)},getInfoTooltip:function(e,t){return o.createElement(n.popoverTemplates.titleBodyAndLinkTooltip,{title:e,text:t})},handleCopy:function(){this.props.restrictions.duplicatable&&(i.forEach(this.props.compBIParams,this.assignToolbarSpecificBI.bind(null,"origin")),this.props.reportBI(l.events.rightClickMenu.COPY,this.props.compBIParams),this.props.copyPasteAPI.copy(this.props.components))},pasteComponent:function(){var e=this.props.compBIParams;i.forEach(e,this.assignToolbarSpecificBI.bind(null,"origin")),this.props.copyPasteAPI.paste(void 0,void 0,void 0,"toolbar"),this.props.addHistory("component - paste"),this.props.reportBI(l.events.rightClickMenu.PASTE,e)},pastePage:function(){this.props.copyPasteAPI.pastePage({menuItemToPasteAfter:this.props.selectedMenuItem})},handlePaste:function(){this.props.pasteEnabled&&(this.props.copyPasteAPI.hasComponentToPaste()?this.pasteComponent():this.props.copyPasteAPI.hasPageToPaste()&&this.pastePage())},handleDuplicate:function(){if(this.props.restrictions.duplicatable){var e=this.props.compBIParams;i.forEach(e,this.assignToolbarSpecificBI.bind(null,"origin")),this.props.copyPasteAPI.duplicate(this.props.components),this.props.addHistory("component - duplicate"),this.props.reportBI(l.events.rightClickMenu.DUPLICATE,e)}},handleDelete:function(){var t=this;if(this.props.restrictions.removable){var o=this.props.compBIParams;i.forEach(o,this.assignToolbarSpecificBI.bind(null,"removal_method")),this.props.removeComp(this.props.components).then(function(e){e&&(t.props.addHistory("component - remove"),t.props.reportBI(l.events.editor.component_removed,o))})}},moveToFront:function(){this.props.arrangementAPI.moveToFront(this.props.components),this.props.reportBI(l.events.rightClickMenu.BRING_TO_FRONT,{origin:"toolbar"})},moveForward:function(){this.props.arrangementAPI.moveForward(this.props.components),this.props.reportBI(l.events.rightClickMenu.MOVE_FORWARD,{origin:"toolbar"})},moveToBack:function(){this.props.arrangementAPI.moveToBack(this.props.components),this.props.reportBI(l.events.rightClickMenu.SEND_TO_BACK,{origin:"toolbar"})},moveBackward:function(){this.props.arrangementAPI.moveBackward(this.props.components),this.props.reportBI(l.events.rightClickMenu.MOVE_BACKWARDS,{origin:"toolbar"})},isAlignEnabled:function(){return!this.props.isCompControlledByParent&&this.props.canAlignAllDirections},align:function(e){this.props.alignComp(this.props.components,e),this.props.reportBI(l.events.toolbar.TOOL_BAR_ALIGNMENT_MENU_CLICK,{category:e})},isDistributeEnabled:function(){return!this.props.isCompControlledByParent&&this.props.canDistributeAllDirections},distribute:function(e){this.props.distribute(this.props.components,e),this.props.reportBI(l.events.toolbar.TOOL_BAR_DISTRIBUTION_MENU_CLICK,{category:e})},isMatchSizeEnabled:function(){return!this.props.isCompControlledByParent&&this.props.canMatchAllSizes},matchSize:function(e){this.props.matchSize(this.props.components,e),this.props.reportBI(l.events.toolbar.TOOL_BAR_MATCH_SIZE_MENU_CLICK,{category:e})},assignToolbarSpecificBI:function(e,t){var o={};o[e]="toolbar",i.assign(t,o)},render:s});return a.hoc.renderWhenMutated(c)}),define("rEditor/rootComps/showOnAllPagesToggle/showOnAllPagesToggle.rt",["react","lodash","baseUI","constants","baseUILib"],function(e,t,o,i,n){"use strict";return function(){return e.createElement("label",{className:"row show-on-all-pages-row"},e.createElement(o.tooltip,{disabled:this.shouldHideTooltip(),value:"RightClick_Menu_Show_on_All_Pages_Disabled_Tooltip",styleType:i.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},e.createElement(n.ToggleSwitch,{disabled:this.props.disabled,value:this.props.isComponentShowOnAllPages,onChange:this.handleShowOnAllPages,className:"show-on-all-pages emphasise "+this.props.className,size:"MEDIUM",labelType:this.props.labelType,widthByTextLength:this.props.widthByTextLength,label:this.props.label})))}}),define("rEditor/rootComps/showOnAllPagesToggle/showOnAllPagesToggle",["lodash","create-react-class","prop-types","coreBi","rEditor/rootComps/showOnAllPagesToggle/showOnAllPagesToggle.rt"],function(o,e,t,i,n){"use strict";return e({displayName:"showOnAllPages",propTypes:{selectedComponents:t.arrayOf(t.object),selectedComponentsTypes:t.arrayOf(t.string),isComponentShowOnAllPages:t.bool,disabled:t.bool,isPage:t.bool,componentsRestrictions:t.object,toggleShowOnAllPages:t.func,reportBI:t.func,origin:t.string},shouldHideTooltip:function(){return!this.props.selectedComponents||!this.props.disabled||this.props.isPage},handleShowOnAllPages:function(){var e=void 0,t=this.props.componentsRestrictions;this.props.selectedComponents&&t.canToggleShowOnAllPages&&(e=this.props.toggleShowOnAllPages(),this.props.reportBI(i.events.rightClickMenu.SHOW_ON_ALL_PAGES,{new_status:e,origin:this.props.origin,component_id:o.toString(o.map(this.props.selectedComponents,"id")),component_type:o.toString(this.props.selectedComponentsTypes)}))},render:n})}),define("rEditor/rootComps/toolBar/toolBar.rt",["react","lodash","baseUI","baseUILib","util","higherOrderComponents","rEditor/rootComps/toolBar/toolbarTop","rEditor/rootComps/showOnAllPagesToggle/showOnAllPagesToggle","experiment","constants"],function(t,o,i,n,a,e,r,s,l,c){"use strict";return function(){return function(){var e=this.getLayout();return t.createElement("div",{onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,onContextMenu:this.props.onContextMenu},t.createElement("div",{className:"header"},t.createElement("div",{className:"drag-zone",onMouseDown:function(e,t){this.props.startDrag(t,this.dragLimits)}.bind(this,e)},t.createElement("span",{className:"drag-handle"},t.createElement(i.symbol,{name:"toolbarDragHandle"}))),t.createElement("button",{className:"help",onClick:this.onHelp},"?"),t.createElement("span",{className:"close",onClick:this.onClose,"data-aid":"toolbar-close"},t.createElement(i.symbol,{name:"toolbarClose"}))),t.createElement("div",{className:"header-seperator"}),t.createElement(r,{restrictions:this.props.componentsRestrictions,components:this.props.components,pasteEnabled:this.props.isPasteEnabled,compDeleteTooltipText:this.props.compDeleteTooltipText,compBIParams:this.props.compBIParams,isCompControlledByParent:this.props.isCompControlledByParent,reportBI:this.props.reportBI,copyPasteAPI:this.props.copyPasteAPI,selectedMenuItem:this.props.selectedMenuItem,canDistributeAllDirections:this.props.canDistributeAllDirections,distribute:this.props.distribute,canMatchAllSizes:this.props.canMatchAllSizes,matchSize:this.props.matchSize,addHistory:this.props.addHistory,isMobileEditor:this.props.isMobileEditor,canAlignAllDirections:this.props.canAlignAllDirections,alignComp:this.props.alignComp,removeComp:this.props.removeComp,arrangementAPI:this.props.arrangementAPI}),t.createElement("div",{className:"seperator"}),t.createElement("div",{className:"inner form"},t.createElement("label",{"data-input-title":"input_rotation",className:"row"},t.createElement(i.tooltip,{value:"toolbar_tooltip_rotation",styleType:c.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},t.createElement("span",{},t.createElement(i.symbol,{name:"toolbarRotation"}))),t.createElement(i.stepper,{className:"small degrees",disabled:!this.props.componentsRestrictions.rotatable,min:-1/0,max:1/0,value:parseInt(e.rotationInDegrees,10),units:"°",onChange:function(e,t){this.rotateComponent("rotationInDegrees",t)}.bind(this,e)}))),l.isOpen("se_vector_image_flip")?t.createElement("div",{className:"inner button-grid",key:"flip-buttons"},t.createElement(i.tooltip,{value:this.getInfoTooltip("Toolbar_tooltip_flip_horizontal","Toolbar_tooltip_flip_horizontal_info"),styleType:c.UI.TOOLTIP.STYLE_TYPE.CONTENT_ONLY,delay:"600"},t.createElement("span",{className:o({button:!0,disabled:!this.props.componentsRestrictions.flippable,selected:this.props.isFlippedHoriz}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:this.props.toggleFlipHoriz},t.createElement(i.symbol,{name:"symbol-flip-horizontal"}))),t.createElement(i.tooltip,{value:this.getInfoTooltip("Toolbar_tooltip_flip_vertical","Toolbar_tooltip_flip_vertical_info"),styleType:c.UI.TOOLTIP.STYLE_TYPE.CONTENT_ONLY,delay:"600"},t.createElement("span",{className:o({button:!0,disabled:!this.props.componentsRestrictions.flippable,selected:this.props.isFlippedVert}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:this.props.toggleFlipVert},t.createElement(i.symbol,{name:"symbol-flip-vertical"})))):null,t.createElement("div",{className:"seperator"}),t.createElement("div",{className:"inner form"},t.createElement("span",{className:"layout-title"},a.translate("toolbar_size")),t.createElement("label",{className:"row"},t.createElement(i.tooltip,{value:"toolbar_tooltip_width",styleType:c.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},t.createElement("span",{className:"label",style:{paddingRight:"4px"}},a.translate("toolbar_width")+":")),t.createElement(i.stepper,{disabled:this.checkHorizontalResizable()||this.shouldDisableToolbarResize(),className:"small",automationId:"width-stepper",value:parseInt(e.width,10),min:-1/0,max:1/0,onChange:function(e,t){this.resizeComponent("width",t)}.bind(this,e)})),t.createElement("label",{className:"row"},t.createElement(i.tooltip,{value:"toolbar_tooltip_height",styleType:c.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},t.createElement("span",{className:"label"},a.translate("toolbar_height")+":")),t.createElement(i.stepper,{disabled:!this.props.componentsRestrictions.verticallyResizable||this.shouldDisableToolbarResize(),className:"small",min:-1/0,max:1/0,automationId:"height-stepper",value:parseInt(e.height,10),onChange:function(e,t){this.resizeComponent("height",t)}.bind(this,e)}))),t.createElement("div",{className:"seperator"}),t.createElement("div",{className:"inner form"},t.createElement("span",{className:"layout-title"},a.translate("toolbar_position")),t.createElement("label",{"data-input-title":"input_x",className:"row input_x"},t.createElement(i.tooltip,{value:"toolbar_tooltip_x_position",styleType:c.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},t.createElement("span",{className:"input_x_label label"},a.translate("toolbar_x")+":")),t.createElement(i.stepper,{disabled:!this.props.componentsRestrictions.horizontallyMovable,className:"small",min:-1/0,max:1/0,value:parseInt(e.bounding.x,10),onChange:function(e,t){this.moveComponent("x",t)}.bind(this,e)})),t.createElement("label",{"data-input-title":"input_y",className:"row"},t.createElement(i.tooltip,{value:"toolbar_tooltip_y_position",styleType:c.UI.TOOLTIP.STYLE_TYPE.SMALL,delay:"600"},t.createElement("span",{className:"label"},a.translate("toolbar_y")+":")),t.createElement(i.stepper,{disabled:!this.props.componentsRestrictions.verticallyMovable,className:"small",min:-1/0,max:1/0,value:parseInt(e.bounding.y,10),onChange:function(e,t){this.moveComponent("y",t)}.bind(this,e)}))),t.createElement("div",{className:"seperator",key:"seperator-inner-form"}),t.createElement("div",{className:"inner form",key:"inner-form"},this.shouldShowFreezePositionToggle()?null:t.createElement("div",{key:"containable"},t.createElement("span",{className:"layout-title show-on-all-pages-title"},a.translate("toolbar_show_on_all_pages")),t.createElement("label",{},t.createElement(s,{origin:"toolbar",selectedComponents:this.props.components,",":!0,selectedComponentsTypes:this.getSelectedComponentsTypes(),isComponentShowOnAllPages:this.props.isComponentShowOnAllPages,disabled:this.isShowOnAllPagesToggleDisabled(),isPage:this.props.isPage,componentsRestrictions:this.props.componentsRestrictions,toggleShowOnAllPages:this.props.toggleShowOnAllPages,reportBI:this.props.reportBI}))),this.shouldShowFreezePositionToggle()?t.createElement("div",{key:"canBeFixed"},t.createElement("span",{className:"layout-title show-on-all-pages-title"},a.translate("toolbar_fixed_position")),t.createElement("label",{className:"row show-on-all-pages-row"},t.createElement(n.ToggleSwitch,{key:"fixedPosition",className:"show-on-all-pages emphasise",value:this.props.componentsRestrictions.fixed,onChange:this.props.toggleFixedPosition,size:"MEDIUM"}))):null),t.createElement("div",{key:"layers-panel-button-feature"},t.createElement("div",{className:"seperator"}),t.createElement("div",{key:"layers-panel-button",className:"layers-panel-button-container"},t.createElement("button",{onClick:this.props.openLayersPanel,className:"layers-panel-button","data-aid":"layers-panel-button"},a.translate("Layers_Title")))))}.apply(this,[])}}),define("rEditor/rootComps/toolBar/toolBar",["react","create-react-class","lodash","prop-types","util","core","santa-editor-utils","rEditor/rootComps/toolBar/toolBarMapper","coreBi","constants","baseUI","rEditor/rootComps/toolBar/toolBar.rt","experiment","helpIds"],function(o,e,c,t,i,n,a,r,s,l,p,d,u,g){"use strict";var m=i.hoc,f=m.connect,h=m.STORES.EDITOR_API,y=s,b={rotationInDegrees:0,width:0,height:0,x:0,y:0,bounding:{x:0,y:0}};var v=e({displayName:"toolBar",propTypes:{halfOpacityTools:t.bool.isRequired,hidden:t.bool,components:t.arrayOf(t.object),componentsWithoutAncestor:t.arrayOf(t.object),toolsHidden:t.bool,isRightPanelOpen:t.bool,isDevModeOpened:t.bool,previewTopPosition:t.number,layout:t.shape({componentLayout:t.object,update:t.func,updateAndPreserveProportions:t.func}),componentsRestrictions:t.object,areComponentsMultiSelectedOrGrouped:t.bool,componentsProportions:t.object,componentLayoutLimits:t.object,addHistory:t.func,toggleShowOnAllPages:t.func,canToggleShowOnAllPages:t.bool,shouldDisableShowOnAllPages:t.bool,isPage:t.bool,reportBI:t.func,isComponentShowOnAllPages:t.bool,isPasteEnabled:t.bool,toggleToolbar:t.func,componentType:t.string,isCurrentPageWidgetPage:t.bool,onHelp:t.func,toggleFixedPosition:t.func,startDrag:t.func.isRequired,isCustomPosition:t.bool.isRequired,registerDragCallbacks:t.func.isRequired,compDeleteTooltipText:t.string,compBIParams:t.array,isCompControlledByParent:t.bool,copyPasteAPI:t.shape({copy:t.func,paste:t.func,pastePage:t.func,duplicate:t.func,hasComponentToPaste:t.func,hasPageToPaste:t.func}),selectedMenuItem:t.object,canDistributeAllDirections:t.bool,distribute:t.func,canMatchAllSizes:t.bool,matchSize:t.func,isMobileEditor:t.bool,canAlignAllDirections:t.bool,alignComp:t.func,removeComp:t.func,arrangementAPI:t.shape({moveToFront:t.func,moveForward:t.func,moveToBack:t.func,moveBackward:t.func}),showUserActionNotification:t.func,getSelectedHeaderType:t.func,viewMode:t.string,getComponentBehaviors:t.func,stageLayout:t.object,topBarCloseToolsUsed:t.bool},getInitialState:function(){return this.props.registerDragCallbacks({onDragEnd:this.onDragEnd}),{}},getInitialPosition:function(){return{right:42+(this.props.isRightPanelOpen?l.RIGHT_AREA.WIDTH:0),top:42+this.props.previewTopPosition}},getLayout:function(){return this.props.layout.componentLayout||b},getInfoTooltip:function(e,t){return o.createElement(p.popoverTemplates.titleBodyAndLinkTooltip,{title:e,text:t})},updateLayout:function(e,t,o){this.props.layout.update(e,t,o)},updateLayoutProportionally:function(e,t,o,i){this.props.layout.updateAndPreserveProportions(e,t,o,i)},onDragEnd:function(e){this.updateLastCustomXPosition(e.left)},getClasses:function(){return["rootcomp-toolbar",this.props.halfOpacityTools?"half-opacity":"",this.props.hidden?"hidden":""].join(" ")},resizeComponent:function(e,t){this.props.reportBI(y.events.editBox.RESIZE,{origin:"toolbar"}),this.setComponentLayoutChange(e,t)},moveComponent:function(e,t){this.setComponentLayoutChange(e,t)},rotateComponent:function(e,t){var o=parseInt(t,10);if(0===o)this.props.reportBI(y.events.editBox.CANCEL_ROTATE_COMPONENT);else{var i=this.getSelectedComponentsTypes()[0];this.props.reportBI(y.events.editBox.ROTATE_COMPONENT,{origin:"toolbar",value:o,component_type:i})}this.setComponentLayoutChange(e,t)},checkHorizontalResizable:function(){return"Column"===this.props.componentType||!this.props.componentsRestrictions.horizontallyResizable},shouldDisableToolbarResize:function(){return"MediaBox"===this.props.componentType&&this.props.isCurrentPageWidgetPage},setComponentLayoutChange:function(e,t){var o=this.getLayout();if(t=parseInt(t,10),isNaN(t))this.forceUpdate();else{var i,n,a;"y"!==e&&"x"!==e||(a=t,t=(i=o)[n=e]+a-i.bounding[n]);var r=this.props.componentsWithoutAncestor;if(o[e]!==t){var s={};s[e]=t;var l=void 0;this.props.areComponentsMultiSelectedOrGrouped?(l=o.width/o.height,"height"===e?s.width=t*l:"width"===e&&(s.height=t/l),s=c.mapValues(s,c.round),this.updateLayoutProportionally(r,s,this.props.componentsProportions,!0)):(c.includes(["width","height"],e)&&this.props.componentsRestrictions.resizeOnlyProportionally&&(l=this.props.componentLayoutLimits.aspectRatio,"width"===e?(s.width=t,s.height=Math.round(t/l)):(s.height=t,s.width=t*l)),this.updateLayout(r,s,!0),this.shouldShowNotificationFreezeWarning(s.height)&&this.showNotificationFreezeWarning()),this.props.addHistory("toolbar - set selected component layout - "+e)}}},isHeaderFrozen:function(){return"HeaderContainer"===this.props.componentType&&"freezes"===this.props.getSelectedHeaderType(this.props.layout.componentLayout,this.props.getComponentBehaviors(this.props.components[0]),this.props.viewMode).value.scrollType},isFooterFrozen:function(){return"FooterContainer"===this.props.componentType&&this.props.layout.componentLayout.fixedPosition},shouldShowNotificationFreezeWarning:function(e){return"old"!==u.getValue("se_notificationCenter")&&200<e&&(this.isHeaderFrozen()||this.isFooterFrozen())},showNotificationFreezeWarning:function(){var e=this,t="HeaderContainer"===this.props.componentType?g.NOTIFICATIONS.FROZEN_HEADER:g.NOTIFICATIONS.FROZEN_FOOTER,o="HeaderContainer"===this.props.componentType?"Notifications_Frozen_Header_Text":"Notifications_Frozen_Footer_Text";this.props.showUserActionNotification({message:o,title:o,type:"warning",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){e.props.onHelp(t)}}})},onClose:function(){var e=this;if(this.props.toggleToolbar(),this.props.reportBI(y.events.toolbar.TOOL_BAR_CLOSE_CLICK,{origin:"X"}),"old"!==u.getValue("se_notificationCenter")&&!this.props.topBarCloseToolsUsed){this.props.showUserActionNotification({message:"Notifications_Hidden_Toolbar_Text",title:"Notifications_Hidden_Toolbar_Text",type:"info",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){e.props.onHelp(g.NOTIFICATIONS.TOOLBAR)}}})}},onHelp:function(){var e={origin:l.BI.HELP.ORIGIN.TOOLBAR,component:this.props.componentType,learn_more:!1,panel_name:l.BI.HELP.ORIGIN.TOOLBAR};this.props.onHelp("4ab49cd7-2ea4-4873-904e-f65d17d2f1dd",e)},handleShowOnAllPages:function(){if(this.props.componentsRestrictions.canToggleShowOnAllPages){var e=this.props.toggleShowOnAllPages();this.props.reportBI(y.events.rightClickMenu.SHOW_ON_ALL_PAGES,{new_status:e,origin:l.BI.HELP.ORIGIN.TOOLBAR})}},shouldShowFreezePositionToggle:function(){return this.props.componentsRestrictions.showLegacyFixedPosition},isShowOnAllPagesToggleDisabled:function(){return!this.props.componentsRestrictions.canToggleShowOnAllPages||this.props.shouldDisableShowOnAllPages},getSelectedComponentsTypes:function(){return c.map(this.props.compBIParams,"component_type")},updateLastCustomXPosition:function(e){this.setState({lastCustomXPosition:e})},renderWithPositioning:function(e){return o.createElement(n.utils.toolbarPositioning,{isCustomPosition:this.props.isCustomPosition,lastCustomXPosition:this.state.lastCustomXPosition,isHidden:this.props.toolsHidden,initialPos:this.getInitialPosition(),dragRightLimit:42,className:this.getClasses(),stageLayout:this.props.stageLayout},e)},renderWithDragLimits:function(e){return this.dragLimits=e,d.call(this)},render:function(){return this.renderWithPositioning(this.renderWithDragLimits)}}),S=c.flowRight(f(h,r),a.hoc.draggable)(v);return S.pure=v,S}),define("rEditor/rootComps/topBar/dropPanels/topBarDropPanel.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",{className:"top-bar-drop-panel "+(this.props.dropPanelClass||"")},e.createElement("div",{className:"drop-panel-left-side"},this.getLeftContent()),this.hasRightContent()?e.createElement("div",{className:"drop-panel-right-side",key:"rightContent"},this.getRightContent()):null,this.props.bottomContent?e.createElement("div",{className:"drop-panel-bottom-side",key:"bottomContent"},this.props.bottomContent):null)}}),define("rEditor/rootComps/topBar/dropPanels/topBarDropPanel",["react","create-react-class","prop-types","lodash","rEditor/rootComps/topBar/dropPanels/topBarDropPanel.rt"],function(e,t,o,i,n){"use strict";return t({displayName:"topBarDropPanel",propTypes:{leftContent:o.object.isRequired,bottomContent:o.object,rightContentOptions:o.object,dropPanelClass:o.string,closeHandle:o.func,hintContainerId:o.string},getInitialState:function(){return{displayedRightContentKey:"main"}},componentWillReceiveProps:function(e){var t=i.keys(this.props.rightContentOptions),o=i.keys(e.rightContentOptions);i.intersection(o,t).length!==t.length&&this.setState({displayedRightContentKey:"main"})},getLeftContent:function(){return e.cloneElement(this.props.leftContent,{onMenuItemHover:this.onSubMenuItemHover,closeDropDownHandle:this.props.closeHandle})},getRightContent:function(){return this.props.rightContentOptions[this.state.displayedRightContentKey]},hasRightContent:function(){return!!this.props.rightContentOptions},onSubMenuItemHover:function(e){e.rightPanel&&this.setState({displayedRightContentKey:e.key})},render:function(){return n.call(this)}})}),define("rEditor/rootComps/topBar/buttons/topBarButton/topBarButton.rt",["react","lodash","baseUI","experiment"],function(t,o,i,e){"use strict";return function(){return t.createElement("div",{className:this.getClasses(),style:this.props.style},t.createElement(i.tooltip,this.getTooltipProps(),function(){var e=this.isDoneSuccessfully();return t.createElement("div",{className:"wrapper-to-perserve-ref"},t.createElement(i.button2,{key:"buttonContent-"+this.props.iconSymbol,label:this.props.label,style:this.props.buttonStyle,symbolName:this.props.iconSymbol,customLabelClass:"top-bar-button-label",className:o({"top-bar-button-content":!0,"icon-and-label":this.props.iconSymbol&&this.props.label,invisible:e}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:this.onClick,onMouseOver:this.handleMouseOverButton,onMouseLeave:this.handleMouseLeftButton,disabled:this.props.isDisabled}),e?t.createElement(i.symbol,{key:"successSymbol",name:"topBarButtonVSign",className:"button-symbol vSign"}):null,this.isInProgress()?t.createElement("div",{key:"progressIndicator",className:"progress-indicator"}):null)}.apply(this,[])),this.state.isDropDownDisplayed?t.createElement(i.bubble,o.assign({},{key:"topBarButtonDropDown"},this.getDropDownProps())):null)}}),define("rEditor/rootComps/topBar/buttons/topBarButton/topBarButton",["reactDOM","react","react-addons-pure-render-mixin","react-dom-factories","create-react-class","prop-types","lodash","core","util","baseUI","constants","rEditor/rootComps/topBar/dropPanels/topBarDropPanel","rEditor/rootComps/topBar/buttons/topBarButton/topBarButton.rt"],function(e,o,t,i,n,a,r,s,l,c,p,d,u){"use strict";return n({displayName:"topBarButton",mixins:[t,s.mixins.editorAPIMixin],propTypes:{label:a.string,classes:a.string,iconSymbol:a.string,dropPanelProps:a.object,actions:a.array,bi:a.oneOfType([a.array,a.object]),biFunc:a.func,isDisabled:a.bool,onMenuOpened:a.func,onMenuClosed:a.func,buttonStyle:a.object,dropPanelContent:a.oneOfType([a.object,a.func]),tooltipData:a.object,progressStatus:a.oneOf(r.values(p.PROGRESS_STATUS))},getInitialState:function(){return this._domNode=null,{isDropDownDisplayed:!1,isMouseOverButton:!1}},getDefaultProps:function(){return{buttonStyle:{}}},componentDidMount:function(){this.mounted=!0,this._domNode=e.findDOMNode(this),this.showTooltipIfNeeded()},componentDidUpdate:function(){this.showTooltipIfNeeded()},componentWillUnmount:function(){this.mounted=!1,this._domNode=null},getClasses:function(){var e="top-bar-button "+this.props.classes;return this.state.isDropDownDisplayed&&(e+=" top-bar-button-selected"),this.isInProgress()||this.props.isDisabled?e+=" disabled-button":this.isInIdleSaved()&&(e+=" saved-button"),e},getTooltipValue:function(){var e=this.props.tooltipData;if(e&&e.presenter)return o.createElement(e.presenter,e.props)},hideTooltip:function(){if(this.props.tooltipData){var e=r.isFunction(this.props.tooltipData.onClose)?this.props.tooltipData.onClose:r.noop;c.tooltipManager.hide(this.props.tooltipData.id,e)}},showTooltipIfNeeded:function(){var e=this.props.tooltipData;e&&r.includes(e.openTriggers,p.UI.TOOLTIP.TRIGGERS.IMMEDIATE)&&c.tooltipManager.show(e.id)},onClick:function(){if(!this.props.isDisabled){this.props.dropPanelContent&&this.toggleDropDown(),this.hideTooltip();var e=this.getEditorAPI(),t=e.selection.getSelectedComponents(),o=e.bi.getComponentsBIParams(t);this.props.actions&&r.forEach([].concat(this.props.actions),function(e){e()}),this.sendButtonBI(o)}},handleMouseOverButton:function(){this.setState({isMouseOverButton:!0})},handleMouseLeftButton:function(){this.setState({isMouseOverButton:!1})},getDropDownId:function(){return"top-bar-dropdown-"+(this.props.label||this.props.iconSymbol)},getDropDownProps:function(){if(!this._domNode)return{};var e=this.getDropDownContent();return{id:this.getDropDownId(),value:e,width:"1000px",interactive:!0,closeTriggers:[p.UI.TOOLTIP.TRIGGERS.MOUSE_LEAVE],className:"top-bar-drop-down",overridePositionAdjustments:this.props.dropPanelProps&&this.props.dropPanelProps.overridePositionAdjustments,targetNode:this._domNode,hideMethod:this.handleDropDownWantsToClose,mouseLeftTargetNode:!this.state.isMouseOverButton,timeoutForMouseOverBubble:500}},getDropDownContent:function(){var e=this.getDropPanelLeftContent(),t={main:this.getDropPanelRightContent()};return e?o.createElement(d,{closeHandle:this.closeDropDown,leftContent:e,rightContentOptions:t,dropPanelClass:this.props.dropPanelProps&&this.props.dropPanelProps.dropPanelClass}):null},getDropPanelLeftContent:function(){var e=this.props.dropPanelContent,t=this.props.dropPanelProps;return e?(t.closeHandle=this.closeDropDown,o.createElement(e,this.props.dropPanelProps)):null},getDropPanelRightContent:function(){var e=this.props.dropPanelProps&&this.props.dropPanelProps.dropPanelPromotion;if(e){var t=r.cloneDeep(e.props);return t=r.merge({moduleName:e.type},t),i.div({className:e.classes},[o.createElement(l.lazyComponent,t)])}return null},openDropDown:function(){this.setState({isDropDownDisplayed:!0,isMouseOverButton:!0}),this.props.onMenuOpened&&this.props.onMenuOpened()},closeDropDown:function(){this.setState({isDropDownDisplayed:!1}),this.props.onMenuClosed&&this.props.onMenuClosed()},toggleDropDown:function(){this.state.isDropDownDisplayed?this.closeDropDown():this.openDropDown()},handleDropDownWantsToClose:function(){this.mounted&&!this.state.isMouseOverButton&&this.closeDropDown()},sendButtonBI:function(e){if(this.props.bi){var t=[].concat(this.props.bi);r.forEach(t,r.bind(function(e){e.type&&this.getEditorAPI().bi.event(e.type,e.fields)},this))}this.props.biFunc&&this.props.biFunc(e)},getTooltipProps:function(){var e=this.getTooltipValue(),t={value:e,disabled:!e||this.state.isDropDownDisplayed},o=this.props.tooltipData||{};return r.assign(t,r.pick(o,["id","interactive","onClose","closeDelay","openTriggers","closeTriggers"])),t},isInIdleSaved:function(){return this.props.progressStatus===p.PROGRESS_STATUS.IDLE_SAVED},isInProgress:function(){return this.props.progressStatus===p.PROGRESS_STATUS.IN_PROGRESS},isProgressDone:function(){return this.isDoneSuccessfully()||this.isDoneUnSuccessfully()},isDoneSuccessfully:function(){return this.props.progressStatus===p.PROGRESS_STATUS.DONE_SUCCESS},isDoneUnSuccessfully:function(){return this.props.progressStatus===p.PROGRESS_STATUS.DONE_FAILED},render:u})}),define("rEditor/rootComps/topBar/zoomModeBar.rt",["react","lodash","baseUI","santa-editor-symbols","uiAnimations","util","rEditor/rootComps/topBar/buttons/topBarButton/topBarButton"],function(e,t,o,i,n,a,r){"use strict";return function(){return e.createElement(n.contentSlideCSS,{distance:"60px"},this.inZoomMode()?e.createElement("div",{className:"zoom-bar-wrapper",key:"zoomModeBarWrapper",ref:"zoomModeBarWrapper",style:{width:"calc("+100*this.getSiteScale()+"% - "+this.getVerticalScrollWidth()+")",left:"calc(50% - "+this.getVerticalScrollWidth()+")"}},e.createElement("div",{className:t({"zoom-mode-bar":!0}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"zoom-mode-bar"},e.createElement("div",{className:"left-zoom-bar",onClick:function(){this.exitZoomMode()}.bind(this)},e.createElement("span",{className:"zoom-bar-text"},a.translate("TOPBAR_Exit_ZoomOut")),e.createElement(r,{iconSymbol:"zoomClose",classes:"zoom-bar-symbol",actions:[this.exitZoomMode]})),e.createElement("div",{className:"right-zoom-bar"},e.createElement(r,{iconSymbol:"undo2",classes:"zoom-bar-btn-seperator top-bar-item-margin",actions:[this.callUndo],tooltipData:this.getTooltipData("topBarUndoTooltipID","TOPBAR_UNDO_TOOLTIP_TITLE")}),e.createElement(r,{iconSymbol:"redo2",classes:"zoom-bar-btn-seperator top-bar-item-margin",actions:[this.callRedo],tooltipData:this.getTooltipData("topBarRedoTooltipID","TOPBAR_REDO_TOOLTIP_TITLE")}),e.createElement(r,{iconSymbol:"zoomBarHelp",classes:"zoom-bar-btn",actions:[this.openHelp],tooltipData:this.getTooltipData("zoomBarHelpTooltipID","gfpp_tooltip_help")})))):null)}}),define("rEditor/rootComps/topBar/zoomModeBar",["create-react-class","lodash","core","util","baseUI","coreBi","stateManagement","constants","rEditor/rootComps/topBar/zoomModeBar.rt"],function(e,t,o,i,n,a,r,s,l){"use strict";var c=r.editorPlugins.leftBar.selectors.getDeviceType;return e({displayName:"zoomModeBar",mixins:[o.mixins.editorAPIMixin],exitZoomMode:function(){var e=this.getEditorAPI();e.zoomMode.exitZoomMode();var t=e.store.getState();e.store.dispatch(r.editorPlugins.bi.actions.event(a.events.topbar.zoombar.zoom_mode_bar_exit_zoom_mode,{editor_view_mode:c(t)})),window.setTimeout(function(){e.toolsControl.toggleHideTools(!1,!0)},300)},inZoomMode:function(){return this.getEditorAPI().zoomMode.isInZoomMode()},callUndo:function(){this.getEditorAPI().history.undo()},callRedo:function(){this.getEditorAPI().history.redo()},getSiteScale:function(){return this.getEditorAPI().getSiteScale()},openHelp:function(){var e="DESKTOP"===this.getEditorAPI().viewMode.get()?"00d369ed-aedf-4fbd-b11c-3fcc51459cef":"65ff699a-dc0c-4c42-b2af-8df5e022d350";this.getEditorAPI().panelManager.openHelpCenter(e,null,{origin:s.BI.HELP.ORIGIN.TOPBAR,component:"zoomModeBar",panel_name:s.BI.HELP.ORIGIN.TOPBAR})},getTooltipData:function(e,t){return{presenter:n.popoverTemplates.titleBodyAndLinkTooltip,id:e,props:{text:t}}},getVerticalScrollWidth:function(){return 0===i.uiUtils.getScrollbarWidth()?"0px":"6px"},render:l})}),define("rEditor/rootComps/topBar/dynamicPagesComboBox.rt",["react","lodash","baseUI","santa-editor-symbols","util","baseUILib"],function(i,t,e,o,n,a){"use strict";return function(){return this.shouldShowInnerRoutesDropDown()?i.createElement("div",{className:"dynamic-pages-combo-box "+t({preview:this.props.previewMode}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"dynamicPageComboBox"},i.createElement("div",{className:"dragable-area",onMouseDown:function(e){this.startDrag(e,this.getDragLimits())}.bind(this),onMouseUp:function(e){this.endDrag()}.bind(this)},i.createElement(e.symbol,{name:"smalldragHandle",className:"symbol-smallDragHandle"})),this.props.previewMode?i.createElement("div",{key:"prevRouteNavButtonWrapper",className:"prev-route-wrapper"},i.createElement("div",{key:"prevRouteNavButton",className:"prev-route nav-btn",onClick:this.prevRoute},i.createElement(o.symbol,{name:"arrowPrev"}))):null,i.createElement("div",{className:"combo-box-wrapper"},function(){var e=this.getInnerRoutesToRender();return i.createElement.apply(this,[a.DropDown,{value:this.props.selectedInnerRoute,shouldTranslate:!1,searchBox:!0,key:"innerRouteDropDown",className:"dynamic-pages-combobox",optionsContainerClassName:"dynamic-pages-options",onChange:this.onInnerRouteChange},this.shouldShowPrevButton()?i.createElement(a.Button,{className:"btn-text",key:"prevButton",onClick:this.decreaseRange},i.createElement("span",{},n.translate("dynamic_pages_routes_navigation_button_back"))):null,t.map(e,function(e,t,o){return i.createElement(a.DropDownOption,{key:t.url,value:t.url,label:t.title,shouldTranslate:!1})}.bind(this,e)),this.shouldShowNextButton()?i.createElement(a.Button,{className:"btn-text",key:"nextButton",onClick:this.increaseRange},i.createElement("span",{},n.translate("dynamic_pages_routes_navigation_button_next"))):null])}.apply(this,[])),this.props.previewMode?null:i.createElement(e.button,{key:"goToPreviewButton",className:"go-to-preview",label:"INNER_ROUTES_NAVIGATION_BOX_GO_TO_PREVIEW",onClick:this.goToPreview}),this.props.previewMode?i.createElement("div",{key:"nextRouteNavButton",className:"next-route nav-btn",onClick:this.nextRoute},i.createElement(o.symbol,{name:"arrowNext"})):null,i.createElement("div",{className:"close-area",onClick:this.close},i.createElement("div",{className:"close-sign"},i.createElement(o.symbol,{name:"close"})))):null}}),define("rEditor/rootComps/topBar/dynamicPagesComboBox",["create-react-class","lodash","core","util","prop-types","stateManagement","coreBi","constants","rEditor/rootComps/topBar/dynamicPagesComboBox.rt"],function(e,i,t,o,n,a,r,s,l){"use strict";var c=a.editorPlugins.domMeasurements.selectors.getStageLayout,p=100;function d(e,t){return(e%t+t)%t}function u(e){for(var t=0;t+p<=e;)t+=p;return t}var g=e({displayName:"dynamicPagesComboBox",render:l,mixins:[t.mixins.editorAPIMixin,o.draggableMixin],getInitialState:function(){return{shouldShowNavigation:!0,rangeStartIndex:0}},propTypes:{previewMode:n.bool.isRequired,editorIsInit:n.bool.isRequired,devModeContext:n.object.isRequired,stageLayout:n.object,innerRoutes:n.array.isRequired,selectedInnerRoute:n.string,routerId:n.string,setSelectedInnerRoute:n.func.isRequired},componentWillReceiveProps:function(e){if(e.editorIsInit&&e.selectedInnerRoute&&!i.isEmpty(e.innerRoutes)&&!this.isCollectionPageOrHasOneRoute()){var t=this.findInnerRouteIndex(e.selectedInnerRoute,e.innerRoutes);this.setState({rangeStartIndex:0<=t?u(t):0})}e.routerId===this.props.routerId&&i.isEqual(this.props.innerRoutes,e.innerRoutes)||this.setState({shouldShowNavigation:!0})},shouldComponentUpdate:function(e,t){return!i.isEqual(this.state,t)||!i.isEqual(this.props,e)},isCollectionPageOrHasOneRoute:function(){var e=this.props.innerRoutes;return!!e&&1===e.length},shouldShowInnerRoutesDropDown:function(){var e=this.getEditorAPI(),t=(e.dsRead&&e.dsRead.pages.getFocusedPageId?e.developerMode.getContext():{}).type===s.DEVELOPER_MODE.CONTEXT_TYPES.PAGE,o=!e.dsRead||!e.dsRead.documentMode||e.dsRead.documentMode.isShowingFixedComponentsEnabled();return(!e.dsRead||!e.dsRead.pages.getFocusedPageId||e.dsRead.pages.getFocusedPageId()===e.dsRead.pages.getPrimaryPageId())&&!this.isCollectionPageOrHasOneRoute()&&this.state.shouldShowNavigation&&this.props.routerId&&!i.isEmpty(this.props.innerRoutes)&&(this.props.previewMode||t)&&o},sendBI:function(e,t){this.getEditorAPI().bi.event(e,t)},getInnerRoutesToRender:function(){return i.slice(this.props.innerRoutes,this.state.rangeStartIndex,this.state.rangeStartIndex+p)},increaseRange:function(){var e=this.state.rangeStartIndex+p,t=this.shouldShowPrevButton(e)?this.props.innerRoutes[e].url:this.props.innerRoutes[e-1].url;this.sendBI(r.events.dynamicPageComboBox.preview_navigate,this.getBIParams(t)),this.setState({rangeStartIndex:e}),this.props.setSelectedInnerRoute(t,this.props.routerId)},decreaseRange:function(){var e=this.state.rangeStartIndex-p,t=this.props.innerRoutes[e].url;this.sendBI(r.events.dynamicPageComboBox.preview_navigate,this.getBIParams(t)),this.setState({rangeStartIndex:e}),this.props.setSelectedInnerRoute(t,this.props.routerId)},shouldShowPrevButton:function(e){e=e||this.state.rangeStartIndex;var t=this.props.innerRoutes.length<p;return!(0===e)&&!t},shouldShowNextButton:function(){var e=this.props.innerRoutes.length<p;return!(this.state.rangeStartIndex+p>=this.props.innerRoutes.length)&&!e},goToPreview:function(){var e=this.getEditorAPI();this.props.previewMode||(this.sendBI(r.events.dynamicPageComboBox.preview_clicked,this.getBIParams(this.props.selectedInnerRoute)),e.preview.togglePreview())},getBIParams:function(e){var t=this.getEditorAPI(),o=t.dsRead.pages.getPrimaryPageId(),i=t.dsRead.routers.getRouterDataForPageIfExist(o);return{item_name:e,item_path:i.prefix+"/"+e,pageId:o,appName:i.appDefinitionId}},onInnerRouteChange:function(e){this.sendBI(r.events.dynamicPageComboBox.preview_select_page,this.getBIParams(e)),this.props.setSelectedInnerRoute(e,this.props.routerId)},close:function(){var e=this.getEditorAPI(),t=e.dsRead.pages.getPrimaryPageId(),o=e.dsRead.routers.getRouterDataForPageIfExist(t);this.sendBI(r.events.dynamicPageComboBox.preview_closed,{pageId:t,appName:o.appDefinitionId}),this.setState({shouldShowNavigation:!1})},openHelpCenter:function(){var e=this.getEditorAPI(),t={origin:"display-combo-box",panel_name:"dynamic-pages-display-combo-box",component:this.props.id};e.panelManager.openHelpCenter("b853c294-8ff1-418f-b4d2-29d7b59a85c3",null,t)},findInnerRouteIndex:function(e,t){var o=i.findIndex(t,["url",e]);return-1===o?0:o},prevRoute:function(){var e,t,o=this.findInnerRouteIndex(this.props.selectedInnerRoute,this.props.innerRoutes),i=(e=o,t=this.props.innerRoutes.length,d(e-1,t));this.moveToItem(i)},nextRoute:function(){var e,t,o=this.findInnerRouteIndex(this.props.selectedInnerRoute,this.props.innerRoutes),i=(e=o,t=this.props.innerRoutes.length,d(e+1,t));this.moveToItem(i)},moveToItem:function(e){var t=!i.isEmpty(this.props.innerRoutes)&&e<this.props.innerRoutes.length?this.props.innerRoutes[e].url:null;this.sendBI(r.events.dynamicPageComboBox.preview_navigate,this.getBIParams(t)),this.props.setSelectedInnerRoute(t,this.props.routerId),this.setState({rangeStartIndex:u(e)})},getDragLimits:function(){var e=this.props.stageLayout;return e||(e=window.document.body.getBoundingClientRect()),{x:[e.left,e.right],y:[e.top,e.bottom]}}}),m=o.hoc.connect(o.hoc.STORES.STATE_ONLY,function(e){var t=e.state;return{innerRoutes:a.editorPlugins.dynamicPages.selectors.getInnerRoutes(t),selectedInnerRoute:a.editorPlugins.dynamicPages.selectors.getSelectedInnerRoute(t),routerId:a.editorPlugins.dynamicPages.selectors.getRouterId(t),stageLayout:c(t)}},function(o){return{setSelectedInnerRoute:function(e,t){o(a.editorPlugins.dynamicPages.actions.setSelectedInnerRouteAndNavigate(e,t))}}})(g);return m.pure=g,m}),define("rEditor/rootComps/rightClickMenu/util/rcmPopovers",["lodash"],function(s){"use strict";var i={type:"Container",components:[{type:"Container",components:[{type:"Component",modes:{definitions:[],overrides:[{modeIds:["comp-jjpmg1d4-mode-jjpmg1dy"],isHiddenByModes:!0}],isHiddenByModes:!1},skin:"wysiwyg.viewer.skins.photo.NoSkinPhoto",layout:{width:71,height:102,x:13,y:49,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.WPhoto",data:{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"",uri:"7adc60c3a0a74b87ad891f04057f5a6f.jpg",description:"",width:4831,height:2980,alt:"",crop:{x:1372,y:0,width:2088,height:2980}},props:{type:"WPhotoProperties",metaData:{schemaVersion:"1.0"},displayMode:"fill",onClickBehavior:"goToLink"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{},propertiesSource:{},groups:{}},componentClassName:"wysiwyg.viewer.components.WPhoto",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.photo.NoSkinPhoto"}},{type:"Component",modes:{definitions:[],overrides:[{modeIds:["comp-jjpmg1d4-mode-jjpmg1dy"],layout:{width:196,height:65,x:27,y:23,scale:1,rotationInDegrees:0,fixedPosition:!1},props:{type:"WRichTextProperties",metaData:{schemaVersion:"1.0",autoGenerated:!1},brightness:1,packed:!1,minHeight:65}}],isHiddenByModes:!1},skin:"wysiwyg.viewer.skins.WRichTextNewSkin",layout:{width:130,height:102,x:99,y:49,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.WRichText",data:{type:"StyledText",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},text:'<p class="font_7" style="font-size:14px; line-height:1.5em"><span style="font-size:14px"><span style="color:#000000">Click here to add your own text, or connect to data from your collections.</span></span></p>',stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES",linkList:[]},props:{type:"WRichTextProperties",metaData:{schemaVersion:"1.0",autoGenerated:!1},brightness:1,packed:!1,minHeight:102},style:"txtNew"}],modes:{overrides:[{modeIds:["comp-jjpmg1d4-mode-jjpmg1dy"],layout:{width:250,height:112,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},isHiddenByModes:!1,design:{type:"MediaContainerDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},background:{type:"BackgroundMedia",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},color:"#FFFFFF",colorOpacity:1,alignType:"center",fittingType:"fill",scrollType:"none",colorOverlay:"",colorOverlayOpacity:0,showOverlayForMediaType:"WixVideo",mediaTransforms:{scale:1}},cssStyle:{cssBorder:{width:{top:{value:1,unit:"px"},right:{value:1,unit:"px"},bottom:{value:1,unit:"px"},left:{value:1,unit:"px"}},style:{top:"solid",right:"solid",left:"solid",bottom:"solid"},color:{top:{red:232,green:232,blue:232,alpha:1},right:{red:232,green:232,blue:232,alpha:1},left:{red:232,green:232,blue:232,alpha:1},bottom:{red:232,green:232,blue:232,alpha:1}}},cssBorderRadius:{topLeft:{value:4,unit:"px"},topRight:{value:4,unit:"px"},bottomLeft:{value:4,unit:"px"},bottomRight:{value:4,unit:"px"}},cssBoxShadow:[{inset:!1,offsetX:{value:0,unit:"px"},offsetY:{value:3,unit:"px"},blurRadius:{value:14,unit:"px"},spreadRadius:{value:1,unit:"px"},color:{red:0,green:0,blue:0,alpha:.06}}]},themeMappings:{},charas:"design-jjpno1d9",dataChangeBehaviors:[]}}],isHiddenByModes:!0},skin:"wysiwyg.viewer.skins.mediaContainer.DefaultMediaContainer",layout:{width:250,height:200,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.MediaContainer",design:{type:"MediaContainerDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},background:{type:"BackgroundMedia",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},color:"{color_21}",colorOpacity:1,alignType:"center",fittingType:"fill",scrollType:"none",colorOverlay:"",colorOverlayOpacity:0,showOverlayForMediaType:"WixVideo",mediaTransforms:{scale:1}},cssStyle:{cssBorder:{width:{top:{value:2,unit:"px"},right:{value:2,unit:"px"},bottom:{value:2,unit:"px"},left:{value:2,unit:"px"}},style:{top:"solid",right:"solid",left:"solid",bottom:"solid"},color:{top:{red:96,green:94,blue:94,alpha:1},right:{red:96,green:94,blue:94,alpha:1},left:{red:96,green:94,blue:94,alpha:1},bottom:{red:96,green:94,blue:94,alpha:1}}},cssBorderRadius:{topLeft:{value:40,unit:"px"},topRight:{value:40,unit:"px"},bottomLeft:{value:40,unit:"px"},bottomRight:{value:40,unit:"px"}},cssBoxShadow:[{inset:!1,offsetX:{value:0,unit:"px"},offsetY:{value:4,unit:"px"},blurRadius:{value:10,unit:"px"},spreadRadius:{value:0,unit:"px"},color:{red:0,green:0,blue:0,alpha:.1}}]},themeMappings:{"cssBorder.color.bottom":"color_14","cssBorder.color.left":"color_14","cssBorder.color.right":"color_14","cssBorder.color.top":"color_14"},charas:"design-jgz1fvuc",dataChangeBehaviors:[]},behaviors:{type:"ObsoleteBehaviorsList",items:'[{"name":"FadeIn","delay":0,"duration":0.1,"action":"screenIn","targetId":"","params":{"doubleDelayFixed":true}}]'}}],modes:{definitions:[{type:"POPOVER",modeId:"comp-jjpmg1d4-mode-jjpmg1dy",label:"MODE_LABEL_FROM_PRESET",params:""}],overrides:[],isHiddenByModes:!1},skin:"wysiwyg.viewer.skins.popover.PopoverSkin",layout:{width:250,height:112,x:60,y:60,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.Popover",props:{type:"PopoverProperties",metaData:{schemaVersion:"1.0"},position:"top",alignment:"center",horizontalOffset:0,verticalOffset:0,closeMethod:"mouseOut"},style:"pop1",mobileStructure:{type:"Container",modes:{definitions:[{type:"POPOVER",modeId:"comp-jjpmg1d4-mode-jjpmg1dy",label:"MODE_LABEL_FROM_PRESET",params:""}]},skin:"wysiwyg.viewer.skins.popover.PopoverSkin",layout:{width:251,height:113,x:34,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.Popover",props:{type:"PopoverProperties",metaData:{schemaVersion:"1.0"},position:"top",alignment:"center",horizontalOffset:0,verticalOffset:0,closeMethod:"outerClick"},style:"pop1"},activeModes:{}};return{createPopoversData:function(r){var e,t=r.components.get.byType("wysiwyg.viewer.components.Popover"),o=s.map(t,function(i){var n=!s.isEmpty(r.components.modes.getComponentActiveModeIds(i)),a=s.head(r.components.modes.getModesByType(i,"POPOVER"));return{enabled:!0,shortcut:n?"On":"Off",label:r.components.getNickname(i)||"Popover_"+i.id,id:"popoverRcm_"+i.id,onClick:function(){return e=r,t=i,o=a.modeId,n?e.components.modes.deactivateComponentMode(t,o):(e.components.modes.activateComponentMode(t,o),e.dsActions.waitForChangesApplied(function(){e.selection.selectComponentByCompRef(t)})),void e.closeRightClickMenu();var e,t,o}}});return{enabled:!0,label:"RightClick_Menu_Popovers_Label",addPopoverItem:(e=r,{enabled:!0,label:"RightClick_Menu_Add_Popover_Label",onClick:function(){return e.components.add(e.pages.getCurrentPage(),i)}}),subItems:o}}}}),define("rEditor/rootComps/rightClickMenu/rcmDataItemBuilders/rcmMoveToBuilder",["lodash","stateManagement"],function(l,a){"use strict";var i=["wysiwyg.viewer.components.MenuToggle","wysiwyg.viewer.components.MenuContainer"];function r(e,t,o){var i=e.components.layout.get(o),n=e.components.layout.get(t);e.components.layout.update(t,{y:(i.height-n.height)/2,x:(i.width-n.width)/2})}function s(e,t){var o=e.components.layout.getRelativeToStructure(t);e.ui.scroll.animateScroll({x:0,y:Math.max(o.y-30,0)},.5,function(){e.selection.selectComponentByCompRef(t)})}function c(t,o,e,i){t.selection.deselectComponents(o),t.closeRightClickMenu();var n=t.components.setContainer(o,e,!0);t.dsActions.waitForChangesApplied(function(){r(t,n,e),t.dsActions.waitForChangesApplied(function(){if(i){var e=t.documentServices.mobile.menuContainer.get();t.store.dispatch(a.editorPlugins.inlinePopup.actions.close(e,!0)).then(function(){s(t,o)})}else s(t,o)})})}function p(e,t,o){var i=e.components.setContainer(t,o,!0);e.dsActions.waitForChangesApplied(function(){r(e,i,o),e.store.dispatch(a.editorPlugins.inlinePopup.actions.open(o,!0)).then(function(){e.selection.selectComponentByCompRef(t)})})}function d(e,t,o,i,n){return e.components.is.containable(t,o)&&(i||n)?{moveToMenu:{icon:{svgName:"tinyMenu"},enabled:!0,onClick:function(e,t,o,i){e.selection.deselectComponents(t),e.closeRightClickMenu(),i?e.ui.scroll.animateScroll({x:0,y:0},.5,function(){p(e,t,o)}):p(e,t,o)}.bind(this,e,t,o,n)}}:null}function n(e,t){var o=e.dsRead.siteSegments.getFooter(),i=e.dsRead.siteSegments.getHeader(),n=e.documentServices.mobile.menuContainer.get(),a=e.components.isDescendantOfComp(t,o),r=e.components.isDescendantOfComp(t,i),s=e.components.isDescendantOfComp(t,n);return l.assign({},d(e,t,n,r,a),function(e,t,o,i,n){return i||n?{moveToHeader:{icon:e.components.getIconInfo(o),enabled:!0,onClick:c.bind(this,e,t,o,n)}}:null}(e,t,i,a,s),function(e,t,o,i,n){return i||n?{moveToFooter:{icon:e.components.getIconInfo(o),enabled:!0,onClick:c.bind(this,e,t,o,n)}}:null}(e,t,o,r,s))}return{build:function(e,t){if(!e.isMobileEditor()||!e.components.isShowOnAllPages(t)||i.includes(e.components.getType(t)))return null;var o=n(e,t);return l.isEmpty(o)?null:{type:"subItems",enabled:!0,subItems:o}}}}),define("rEditor/rootComps/rightClickMenu/util/rcmDataParser",["lodash","util","constants","rEditor/rootComps/gfpp/gfppModel","rEditor/rootComps/rightClickMenu/util/rcmPopovers","rEditor/rootComps/rightClickMenu/rcmDataItemBuilders/rcmMoveToBuilder","stateManagement","experiment"],function(f,h,y,b,v,S,e,E){"use strict";var P=void 0,C="rcm",T=e.editorPlugins.selection.selectors.getFocusedContainer,a=e.editorPlugins.components.selectors.someDescendantIsPrimaryConnectedToAppWidget,_=e.editorPlugins.userPreferences.selectors.getSiteUserPreferences(y.USER_PREFS.ACCESSIBILITY.ADVANCED_SETTINGS);function I(e,t){return P.components.is.duplicatable(e,t)&&!P.components.layout.isPinned(e)}function M(e){return e?null:{enabled:P.clipboard.hasItem()}}function A(e){return{enabled:(t=e,P.components.is.flippable(t))};var t}var r=["wysiwyg.viewer.components.tpapps.TPAGluedWidget"];function O(e){if(P.components.is.controlledByParent(e))return null;var t,o,i=P.getCompMoveRestrictions(e),n=i.canMoveBackward||i.canMoveForward,a=P.components.is.fixed(e)&&f.includes(r,P.components.getType(e));return!n||a?null:{type:"subItems",enabled:!0,subItems:(t=e,o=P.getCompMoveRestrictions(t),{moveToFront:{icon:{svgName:"bringToFront"},enabled:o.canMoveForward},moveToBack:{icon:{svgName:"sendToBack"},enabled:o.canMoveBackward},moveForward:{icon:{svgName:"moveForward"},enabled:o.canMoveForward},moveBackward:{icon:{svgName:"moveBackward"},enabled:o.canMoveBackward}})}}function R(e,t){var o,i=1===(o=f(t).reject(function(e){return f.includes(["SITE_PAGES","PAGES_CONTAINER"],e.id)||"platform.components.AppController"===P.components.getType(e)}).map(function(e){return{component:e,key:"overlappingSubItem_"+e.id,icon:P.components.getIconInfo(e),label:P.components.getDisplayName(e),enabled:!0}}).value()).length?[]:o;return 1<i.length||1===i.length&&P.utils.isPage(e)?{type:"subItems",shouldShowCount:!0,enabled:!0,subItems:i}:null}function w(e){var t=P.components.is.fixed(e),o=P.dsRead.tpa.isTpaByCompType(P.components.getType(e))&&t,i=a(e,P.dsRead);if(!P.components.canToggleShowOnAllPages(e)&&!o&&!i)return null;var n=!o&&!i;return{value:o||P.components.isShowOnAllPages(e),enabled:n,operationKey:"SHOW_ON_ALL_PAGES"}}function D(e){return P.components.is.showLegacyFixedPosition(e)&&P.components.layout.canBeFixedPosition(e)?{value:P.components.is.fixed(e),enabled:!0}:null}function i(e,t,o){return!e||f.isEmpty(e)?{paste:M(o),undo:{enabled:!0}}:{undo:{enabled:!0},copy:(m=e,I(m)?{enabled:!0}:null),paste:M(o),pasteAndApplyTheme:(g=o,g||!P.clipboard.isCrossSite()?null:{enabled:!0}),applyModeFromClipboard:(u=o,!u&&P.copyPaste.canApplyModeFromClipboard()?{enabled:!0}:null),cut:(d=e,I(d)?{enabled:!0}:null),duplicate:(p=e,I(p,P.components.getContainer(p))?{enabled:!0}:null),flip:A(e),copyDesign:(c=e,P.hasExternalDesign(c)?null:{enabled:!0}),arrange:O(e),moveTo:S.build(P,e),overlappingItems:R(e,t),popovers:E.isOpen("se_popovers")&&P.utils.isPage(e)?v.createPopoversData(P):null,remove:(r=e,s=P.dsRead.tpa.isTpaByCompType(P.components.getType(r)),l=P.components.is.removable(r)||P.selection.isPopupPageSelected(r),h.appStudioUtils.isAppStudio()&&P.isMobileEditor()&&!E.isOpen("se_hiddenElementsInBuilder")?null:s||l?{enabled:l,operationKey:"DELETE"}:null),showOnAllPages:w(e),fixedPosition:D(e),gfppItems:function(o){var e=b.getData(P,o),t=y.ROOT_COMPS.GFPP.ACTIONS,i=[t.SETTINGS,t.DESIGN,t.CUSTOMIZE_DESIGN,t.LAYOUT,t.BEHAVIORS,t.UPGRADE,t.CROP,t.FILTERS,t.ANIMATION,t.LINK,t.STRETCH,t.STRETCH_FOR_COLUMNS,t.CONNECT,t.STYLABLE_LAYOUT,t.STYLABLE];i.splice(i.indexOf(t.STRETCH_FOR_COLUMNS)+1,0,t.HELP);var n=(e.mainActions||[]).concat(f(e.presetActions).pick(i).toArray().value()),a=f.find(n,"helpId"),r={component:P.components.getType(o),origin:C};a&&(a.onClick=function(){P.panelManager.openHelpCenter(a.helpId,null,r)});var s=f.transform(n,function(e,t){t.onClick&&e.push({shouldTranslate:!f.isBoolean(t.shouldTranslate)||t.shouldTranslate,item:{enabled:!t.isDisabled,label:t.rightClickMenuLabel||t.label||t.tooltip},onClick:function(){t.onClick(P,o),P.closeRightClickMenu()}})},[]);if(E.isOpen("se_improveRCMContent")){var l=f.find(s,{shouldTranslate:!0,item:{enabled:!1,label:"gfpp_tooltip_crop_gif_unsupported"}});l&&(l.item.label="gfpp_tooltip_crop");var c=f.find(s,{shouldTranslate:!0,item:{enabled:!1,label:"gfpp_tooltip_hover_animation_disabled_single_element_in_regular"}})||f.find(s,{shouldTranslate:!0,item:{enabled:!1,label:"gfpp_tooltip_hover_animation_disabled_linked_element_in_regular"}});c&&(c.item.label="gfpp_tooltip_animation")}if(E.isOpen("se_multilingual")){var p=P.language.current.get(),d=P.language.original.get(),u=d&&d.languageCode;if(u&&p&&u!==p&&!P.components.is.customizeTranslate(o)&&!e.untranslatable){var g=s[0],m=void 0;return m=e.translateAction?function(){e.presetActions[e.translateAction].onClick(P,o),P.closeRightClickMenu()}:g.onClick,[f.assign({},g,{item:f.assign({},g.item,{label:"gfpp_mainaction_translate"}),onClick:m})].concat(_toConsumableArray(s))}}return s}(e),styleCanBeApplied:(a=e,P.components.is.styleCanBeApplied(a)?{enabled:!0}:null),pin:function(e,t){if(t||!P.components.is.pinnable(e))return null;var o=P.components.is.fixed(e);return{value:o,label:o?"RightClick_Menu_Unpin":"RightClick_Menu_PinToScreen",enabled:!0}}(e,o),setA11y:(i=e,n=P.store.getState(),_(n)&&P.components.is.a11yConfigurable(i)?{enabled:!0}:null),applyToAllModes:function(e){if(e)return null;var t=P.store.getState(),o=T(t);if(!o)return null;var i=P.components.modes.getModes(o);return!i||f.isEmpty(i)?null:{enabled:!0,label:P.components.modes.isCompDefaultModeActive(o)?"RightClick_Menu_Apply_Regular_ToHover_Label":"RightClick_Menu_Apply_Hover_ToRegular_Label"}}(o),saveToTheme:function(e){if(E.isOpen("themeStyle")){var t=P.components.getType(e),o=P.components.getDefinition(t),i=o&&o.styles&&f.keys(o.styles);if(i)return{enabled:!0,styleIds:i}}return null}(e)};var i,n,a,r,s,l,c,p,d,u,g,m}return{buildMenuItems:function(e,t,o){return i(o,t,(P=e).isMobileEditor())},buildShowOnAllPagesItem:function(e,t){return P=e,w(t)},buildFixedPositionItem:function(e,t){return P=e,D(t)},buildArrangeMenu:function(e,t){return P=t,O(e)}}}),define("rEditor/rootComps/rightClickMenu/customActions/stripColumnsContainer",["coreBi"],function(i){"use strict";var t=[{label:function(e,t){return 1===e.components.getChildren(t).length?"STRIP_CONTAINER_LAYOUTS_ADD_COLUMNS":"STRIP_CONTAINER_LAYOUTS_ADD_EXTRA_COLUMNS"},enabled:function(e,t){return e.columns.canAdd(t)},onClick:function(e,t){var o={num_of_columns_before:e.components.getChildren(t).length,origin:"rcm"};e.columns.addColumn(t),e.bi.event(i.events.columns.COLUMNS_ADD_COLUMN_CLICK,o),e.closeRightClickMenu()}}];return function(e){return e.isMobileEditor()?[]:t}}),define("rEditor/rootComps/rightClickMenu/customActions/column",["coreBi"],function(o){"use strict";function e(t,o){return function(e){return e.isMobileEditor()?o:t}}function i(e){var t=e.isDesktopEditor()?o.events.columns.COLUMNS_MOVE_LEFT_RIGHT:o.events.columns.COLUMNS_MOVE_UP_DOWN;e.bi.event(t,{origin:"rcm"})}return[{label:e("RightClick_Menu_Move_Column_Left_Label","RightClick_Menu_Mobile_Move_Column_Up_Label"),enabled:function(e,t){return e.components.arrangement.canMoveBackward(t)},onClick:function(e,t){e.columns.move.left(t),i(e),e.closeRightClickMenu()}},{label:e("RightClick_Menu_Move_Column_Right_Label","RightClick_Menu_Mobile_Move_Column_Down_Label"),enabled:function(e,t){return e.components.arrangement.canMoveForward(t)},onClick:function(e,t){e.columns.move.right(t),i(e),e.closeRightClickMenu()}}]}),define("rEditor/rootComps/rightClickMenu/customActions",["rEditor/rootComps/rightClickMenu/customActions/stripColumnsContainer","rEditor/rootComps/rightClickMenu/customActions/column"],function(e,t){"use strict";return{"wysiwyg.viewer.components.StripColumnsContainer":e,"wysiwyg.viewer.components.Column":t}}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemBasic.rt",["react","lodash","baseUI"],function(t,o,i){"use strict";return function(){return function(){var e=this.isEnabled();return t.createElement("li",{className:o({"item-basic":!0,disabled:!e,hoverable:e}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:e?this.props.onClick:function(){},onContextMenu:e?this.props.onClick:function(){},onMouseEnter:this.props.onMouseEnter||o.noop,onMouseLeave:this.props.onMouseLeave||o.noop},this.props.item.icon?t.createElement("span",{className:"icon",key:"icon"},this.props.item.icon.svgName?t.createElement(i.symbol,{name:this.props.item.icon.svgName,key:"svg"}):null,this.props.item.icon.css?t.createElement("span",{style:this.getImageIconStyle(),key:"style"}):null):null,t.createElement("span",{className:"label"},this.translateIfNeeded(this.props.label||this.props.item.label)))}.apply(this,[])}}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemBasic",["create-react-class","lodash","util","rEditor/rootComps/rightClickMenu/menuItems/rcmItemBasic.rt"],function(e,t,o,i){"use strict";return e({displayName:"rcmItemBasic",mixins:[o.translationMixin],getImageIconStyle:function(){return t.merge({},this.props.item.icon.css,{backgroundImage:"url("+this.props.item.icon.src+")"})},isEnabled:function(){return t.isFunction(this.props.enabled)?this.props.enabled():this.props.item.enabled},render:i})}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut.rt",["react","lodash","baseUI"],function(e,t,o){"use strict";return function(){return e.createElement(o.tooltip,{value:this.getTooltipText(),alignment:"right",disabled:!this.getTooltipText()},e.createElement("li",{className:t({"item-shortcut":!0,disabled:!this.props.item.enabled,hoverable:this.props.item.enabled}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:this.props.item.enabled?this.props.onClick:function(){},onContextMenu:this.props.item.enabled?this.props.onClick:function(){}},this.props.item.icon?e.createElement("span",{className:"icon",key:"icon"},this.props.item.icon.svgName?e.createElement(o.symbol,{name:this.props.item.icon.svgName,key:"svg"}):null):null,e.createElement("span",{className:"label label-shortcut"},this.translateIfNeeded(this.props.label)),e.createElement("span",{className:"action action-shortcut"},this.props.shortcut)))}}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut",["create-react-class","core","lodash","util","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut.rt"],function(e,t,o,i,n){"use strict";return e({displayName:"rcmItemWithShortcut",mixins:[i.translationMixin,t.mixins.editorAPIMixin],getTooltipText:function(){return this.getEditorAPI().tooltipTextService.getSelectedComponentTooltipText(this.props.item.operationKey)},render:n})}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItems.rt",["react","lodash","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut"],function(e,t,o){"use strict";return function(){return e.createElement("li",{className:t({disabled:!this.props.item.enabled,hoverable:this.props.item.enabled}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},e.createElement("span",{className:"label label-sub-item"},e.createElement("span",{"data-hint-id":this.props.hintId},this.translateIfNeeded(this.props.label)),this.props.item.shouldShowCount?e.createElement("span",{key:"count"}," ("+e.Children.count(this.props.children)+")"):null),e.createElement("span",{className:"action action-expand"}),e.createElement("div",{className:"rightClickMenu subMenu"},e.createElement("ul",{},this.props.children)))}}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItems",["create-react-class","lodash","util","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItems.rt"],function(e,t,o,i){"use strict";return e({displayName:"rcmItemWithSubItems",mixins:[o.translationMixin],render:i})}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItemsRecursive.rt",["react","lodash","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut"],function(e,t,o){"use strict";return function(){return e.createElement("li",{className:t({disabled:!this.props.item.enabled,hoverable:this.props.item.enabled}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:this.props.onClick},e.createElement("span",{className:"label label-sub-item"},e.createElement("span",{},this.translateIfNeeded(this.props.label)),this.props.item.shouldShowCount?e.createElement("span",{key:"count"}," ("+e.Children.count(this.props.children)+")"):null),e.createElement("span",{className:t({action:!0,"action-expand":0<this.props.items.length}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")}),e.createElement("div",{className:"rightClickMenu subMenu"},e.createElement("ul",{},this.getChildren())))}}),define("rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItemsRecursive",["react","create-react-class","lodash","util","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItemsRecursive.rt"],function(t,e,o,i,n){"use strict";var a=e({displayName:"rcmItemWithSubItemsRecursive",mixins:[i.translationMixin],getChildren:function(){return o.map(this.props.items,function(e){return t.createElement(a,e)})},render:n});return a}),define("rEditor/rootComps/rightClickMenu/menusByOrigin/pagesMenuContextMenu.rt",["react","lodash","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut"],function(o,i,n){"use strict";return function(e,t){return o.createElement.apply(this,["ul",{},i.map(e.items,function(e,t){return o.createElement(n,{key:e.key,item:e.item,label:e.label,shortcut:e.shortcut,onClick:e.onClick})}.bind(this))])}}),define("rEditor/rootComps/rightClickMenu/menusByOrigin/pagesMenuContextMenu",["rEditor/rootComps/rightClickMenu/menusByOrigin/pagesMenuContextMenu.rt","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","util"],function(e,t,o){"use strict";var i=t.editor;return o.hoc.connect(o.hoc.STORES.EDITOR_API,function(e){var t=e.editorAPI;return{items:[{key:"paste",label:"RightClick_Menu_Paste_Label",item:{enabled:t.copyPaste.hasPageToPaste()},shortcut:i.PASTE.label,onClick:function(){return(e=t).copyPaste.pastePage({menuItemToPasteAfter:e.mainMenu.panelContext.getSelectedMenuItem()}),void e.closeRightClickMenu();var e}},{key:"pasteAndApplyTheme",label:"RightClick_Menu_PasteandApplyTheme_Label",item:{enabled:!1},shortcut:i.PASTE_AND_APPLY_THEME.label,onClick:function(){return(e=t).copyPaste.pastePage({menuItemToPasteAfter:e.mainMenu.panelContext.getSelectedMenuItem()}),void e.closeRightClickMenu();var e}}]}})(e)}),define("rEditor/rootComps/rightClickMenu/menusByOrigin/pagesMenuItemContextMenu.rt",["react","lodash","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut"],function(o,i,n){"use strict";return function(e,t){return o.createElement.apply(this,["ul",{},i.map(e.items,function(e,t){return o.createElement(n,{key:e.key,item:e.item,label:e.label,shortcut:e.shortcut,onClick:e.onClick})}.bind(this))])}}),define("rEditor/rootComps/rightClickMenu/menusByOrigin/pagesMenuItemContextMenu",["rEditor/rootComps/rightClickMenu/menusByOrigin/pagesMenuItemContextMenu.rt","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","util"],function(e,t,o){"use strict";var a=t.editor;return o.hoc.connect(o.hoc.STORES.EDITOR_API,function(e){var o=e.editorAPI,i=o.mainMenu.panelContext.getSelectedMenuItem(),t=i.type.isPage&&o.copyPaste.canCopyPage(i.pageData.id),n=o.copyPaste.hasPageToPaste();return{items:[{key:"copy",label:"RightClick_Menu_Copy_Label",item:{enabled:t},shortcut:a.COPY.label,onClick:function(){return e=o,t=i.pageData.id,e.copyPaste.copyPage(t),void e.closeRightClickMenu();var e,t}},{key:"paste",label:"RightClick_Menu_Paste_Label",item:{enabled:n},shortcut:a.PASTE.label,onClick:function(){return(e=o).copyPaste.pastePage({menuItemToPasteAfter:e.mainMenu.panelContext.getSelectedMenuItem()}),void e.closeRightClickMenu();var e}},{key:"pasteAndApplyTheme",label:"RightClick_Menu_PasteandApplyTheme_Label",item:{enabled:!1},shortcut:a.PASTE_AND_APPLY_THEME.label,onClick:function(){return(e=o).copyPaste.pastePage({menuItemToPasteAfter:e.mainMenu.panelContext.getSelectedMenuItem()}),void e.closeRightClickMenu();var e}}]}})(e)}),define("rEditor/rootComps/rightClickMenu/rightClickMenu.rt",["react","lodash","rEditor/rootComps/rightClickMenu/menuItems/rcmItemBasic","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithShortcut","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItems","rEditor/rootComps/rightClickMenu/menuItems/rcmItemWithSubItemsRecursive","rEditor/rootComps/rightClickMenu/menusByOrigin/pagesMenuContextMenu","rEditor/rootComps/rightClickMenu/menusByOrigin/pagesMenuItemContextMenu","rEditor/rootComps/keyboard/config/keyboardShortcutsActionMap","rEditor/rootComps/showOnAllPagesToggle/showOnAllPagesToggle","util","baseUI","baseUILib","experiment"],function(s,l,c,p,a,d,r,u,g,m,e,t,f,h){"use strict";return function(){return s.createElement(e.outerClick,{onOuterClick:this.onOuterClick},this.state.menuItems?function(){var e=this.state.menuItems,t=this.getEditorAPI(),o=g.editor,i=this.getCustomActions(),n=l.head(this.props.selectedComponents);return s.createElement("div",{style:{top:this.state.position.y,left:this.state.position.x},className:l(this.getClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onContextMenu:this.onRightClick,key:"rcm",ref:"rcmRoot"},this.props.selectedComponents?null:s.createElement("ul",{key:"noCompSelectedItems"},e.paste?s.createElement(p,{item:e.paste,label:"RightClick_Menu_Paste_Label",shortcut:o.PASTE.label,onClick:this.paste,key:"noCompSelectedPaste"}):null),"rulers"===this.props.origin?s.createElement("ul",{key:"rulerItems"},s.createElement(c,{label:"Ruler_Context_Menu_Remove_All",item:this.getApplyToRemoveAllGuides(),onClick:this.removeAllGuidesInRuler})):null,"pagesMenu"===this.props.origin?s.createElement(r,{context:this.props.context,key:"pagesMenu"}):null,"pagesMenuItem"===this.props.origin?s.createElement(u,{context:this.props.context,key:"pagesMenuItem"}):null,this.props.selectedComponents&&"stage"===this.props.origin?s.createElement("div",{key:"selectedCompItems"},e.applyToAllModes||e.applyModeFromClipboard?s.createElement("ul",{key:"rcmApplyGroup"},e.applyToAllModes?s.createElement(c,{item:e.applyToAllModes,key:"rcmApplyToAllModes",label:e.applyToAllModes.label,onClick:this.applyToAllModes}):null,!h.isOpen("se_enableCrossSiteCopyPaste")&&e.applyModeFromClipboard?s.createElement(p,{item:e.applyModeFromClipboard,label:"RightClick_Menu_HB_Apply_From_Clipboard",shortcut:o.APPLY_MODE.label,onClick:this.applyModeFromClipboard,key:"rcmApplyModeFromClipboardWithShortcut"}):null,h.isOpen("se_enableCrossSiteCopyPaste")&&e.applyModeFromClipboard?s.createElement(c,{item:e.applyModeFromClipboard,label:"RightClick_Menu_HB_Apply_From_Clipboard",onClick:this.applyModeFromClipboard,key:"rcmApplyModeFromClipboard"}):null):null,l.isEmpty(e.gfppItems)?null:s.createElement.apply(this,["ul",{key:"gfppItems","data-section":"gfppItems"},l.map(e.gfppItems,function(e,t,o,i,n,a,r){return s.createElement(c,{shouldTranslate:a.shouldTranslate,item:a.item,label:a.item.label,key:a.item.label,onClick:a.onClick})}.bind(this,e,t,o,i,n))]),i.length?s.createElement.apply(this,["ul",{key:"customActions"},l.map(i,function(e,t,o,i,n,a,r){return s.createElement(c,{key:"customAction_"+r,item:a,label:l.isFunction(a.label)?a.label(t,n):a.label,onClick:a.onClick.bind(null,t,n),enabled:l.isFunction(a.enabled)&&a.enabled.bind(null,t,n)})}.bind(this,e,t,o,i,n))]):null,e.setA11y?s.createElement("ul",{key:"rcmA11y"},s.createElement(p,{item:e.setA11y,label:"gfpp_mainaction_accessibility",onClick:this.handleA11yClick,key:"rcmA11y"})):null,s.createElement.apply(this,["ul",{},s.createElement(p,{item:e.undo,label:"TOPBAR_Edit_Undo",shortcut:o.UNDO.label,onClick:this.undo}),e.cut?s.createElement(p,{item:e.cut,label:"RightClick_Menu_Cut_Label",shortcut:o.CUT.label,onClick:this.cutComponent,key:"rcmCut"}):null,e.copy?s.createElement(p,{item:e.copy,label:"RightClick_Menu_Copy_Label",shortcut:o.COPY.label,onClick:this.copyComponent,key:"rcmCopy"}):null,e.styleCanBeApplied&&!this.shouldHideCopyDesign()?l.map(this.props.selectedComponents,function(e,t,o,i,n,a,r){return s.createElement(c,{key:"rcmApplyStyle",label:"RightClick_Menu_Copy_Design_Label",item:this.getApplyToInfoItem(),onClick:function(e,t,o,i,n,a,r){this.openApplyToDialog(a)}.bind(this,e,t,o,i,n,a,r)})}.bind(this,e,t,o,i,n)):null,e.paste?s.createElement(p,{item:e.paste,label:"RightClick_Menu_Paste_Label",shortcut:o.PASTE.label,onClick:this.paste.bind(this,!1),key:"rcmPaste"}):null,h.isOpen("se_enableCrossSiteCopyPaste")&&e.pasteAndApplyTheme?s.createElement(p,{item:e.pasteAndApplyTheme,label:"RightClick_Menu_PasteandApplyTheme_Label",shortcut:o.PASTE_AND_APPLY_THEME.label,onClick:this.paste.bind(this,!0),key:"rcmPasteAndApplyTheme"}):null,e.duplicate?s.createElement(p,{item:e.duplicate,label:"RightClick_Menu_Duplicate_Label",shortcut:o.DUPLICATE.label,onClick:this.duplicateComponent,key:"rcmDuplicate"}):null]),e.flip.enabled&&h.isOpen("se_vector_image_flip")?s.createElement("ul",{key:"flips"},s.createElement(c,{key:"rcmFlipHoriz",label:"RightClick_Menu_Flip_Horizontal_Label",item:e.flip,onClick:this.toggleFlipHoriz}),s.createElement(c,{key:"rcmFlipVert",label:"RightClick_Menu_Flip_Vertical_Label",item:e.flip,onClick:this.toggleFlipVert})):null,e.arrange||e.overlappingItems||e.moveTo?s.createElement("ul",{key:"rcmArrangeOverlapping"},e.overlappingItems?s.createElement.apply(this,[a,{ref:"overlappingItems",label:"RightClick_Menu_Overlapping_Items_Label",item:e.overlappingItems,key:"rcmOverlapping"},l.map(e.overlappingItems.subItems,function(e,t,o,i,n,a,r){return s.createElement(c,{item:a,label:a.label,key:a.key,onClick:this.onOverlappingItemClick.bind(this,a),shouldTranslate:!1,onMouseEnter:this.onOverlappingItemMouseEnter.bind(this,a),onMouseLeave:this.onOverlappingItemMouseLeave})}.bind(this,e,t,o,i,n))]):null,e.arrange?s.createElement(a,{item:e.arrange,label:"RightClick_Menu_Arrange_Label",key:"rcmArrange",onMouseOver:this.onArrangeHover},s.createElement(p,{item:e.arrange.subItems.moveToFront,label:"RightClick_Menu_Bring_to_Front_Label",shortcut:o.SEND_TO_FRONT.label,onClick:this.moveToFront}),s.createElement(p,{item:e.arrange.subItems.moveForward,label:"RightClick_Menu_Move_Forward_Label",shortcut:o.SEND_FORWARD.label,onClick:this.moveForward}),s.createElement(p,{item:e.arrange.subItems.moveBackward,label:"RightClick_Menu_Move_Backward_Label",shortcut:o.SEND_BACKWARD.label,onClick:this.moveBackward}),s.createElement(p,{item:e.arrange.subItems.moveToBack,label:"RightClick_Menu_Send_to_Back_Label",shortcut:o.SEND_TO_BACK.label,onClick:this.moveToBack})):null,e.moveTo?s.createElement(a,{item:e.moveTo,label:"RightClick_Menu_Mobile_Menu_Moveto",key:"MoveTo"},e.moveTo.subItems.moveToMenu?s.createElement(c,{item:e.moveTo.subItems.moveToMenu,key:"moveToMenu",label:"RightClick_Menu_Mobile_Menu_Moveto_MenuBox",onClick:e.moveTo.subItems.moveToMenu.onClick}):null,e.moveTo.subItems.moveToHeader?s.createElement(c,{item:e.moveTo.subItems.moveToHeader,key:"moveToHeader",label:"RightClick_Menu_Mobile_Menu_Moveto_Header",onClick:e.moveTo.subItems.moveToHeader.onClick}):null,e.moveTo.subItems.moveToFooter?s.createElement(c,{item:e.moveTo.subItems.moveToFooter,key:"moveToFooter",label:"RightClick_Menu_Mobile_Menu_Moveto_Footer",onClick:e.moveTo.subItems.moveToFooter.onClick}):null):null):null,e.popovers?s.createElement("ul",{key:"popovers_in_page"},s.createElement.apply(this,[a,{label:"Popovers",item:e.popovers,shouldTranslate:!1},s.createElement(c,{item:e.popovers.addPopoverItem,onClick:e.popovers.addPopoverItem.onClick,shouldTranslate:!0}),l.map(e.popovers.subItems,function(e,t,o,i,n,a,r){return s.createElement(p,{item:a,key:a.id,label:a.label,shortcut:a.shortcut,onClick:a.onClick,shouldTranslate:!1})}.bind(this,e,t,o,i,n))])):null,e.menuContainer?s.createElement("ul",{key:"menu_container_rcm"},s.createElement(c,{item:e.menuContainer,onClick:e.menuContainer.onClick,shouldTranslate:!1})):null,e.remove?s.createElement("ul",{key:"rcmRemove"},s.createElement(p,{item:e.remove,label:this.shouldPresentHideOverDelete()?"RightClick_Menu_Mobile_Hide_Label":"RightClick_Menu_Delete_Label",shortcut:"Del",onClick:this.removeComponent})):null,e.pin?s.createElement("ul",{key:"rcmPin"},e.pin?s.createElement(p,{item:e.pin,label:e.pin.label,value:e.pin.value,onClick:this.handlePinClick,key:"rcmPin"}):null):null,e.saveToTheme&&1===this.props.selectedComponents.length?s.createElement("ul",{key:"themeStylesExperiment"},s.createElement.apply(this,[a,{item:{enabled:!0},label:"Save to theme",shouldTranslate:!1,key:"saveToTheme"},l.map(e.saveToTheme.styleIds,function(e,t,o,i,n,a,r){return s.createElement(c,{shouldTranslate:!1,item:{label:a,enabled:!0},key:this.props.selectedComponents[0]+"_themeStyle_"+a,onClick:function(e,t,o,i,n,a,r){this.saveStyleToTheme(this.props.selectedComponents[0],a)}.bind(this,e,t,o,i,n,a,r)})}.bind(this,e,t,o,i,n))])):null,e.showOnAllPages||e.fixedPosition?s.createElement("ul",{key:"rcmShowOnAllPagesFixPosition"},e.showOnAllPages?s.createElement("li",{key:"rcmShowOnAllPages"},s.createElement(m,{className:"secondary-color",origin:"rightClickMenu",selectedComponents:this.props.selectedComponents,selectedComponentsTypes:this.getSelectedComponentsTypes(),isComponentShowOnAllPages:this.props.selectedComponents&&t.components.isShowOnAllPages(this.props.selectedComponents),disabled:this.isShowOnAllPagesToggleDisabled(),isPage:t.utils.isPage(this.props.selectedComponents),componentsRestrictions:this.getSelectedCompsRestrictions(),toggleShowOnAllPages:l.partial(t.components.toggleShowOnAllPages,this.props.selectedComponents),reportBI:t.bi.event,labelType:"T17",widthByTextLength:!0,label:"toolbar_show_on_all_pages"})):null,e.fixedPosition?s.createElement("li",{key:"rcmFixedPosition",className:l({disabled:!e.fixedPosition.enabled}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},s.createElement(f.ToggleSwitch,{value:e.fixedPosition.value,label:"RightClick_Menu_Fixed_Position_Label",onChange:this.toggleFixedPosition,disabled:!e.fixedPosition.enabled,className:this.props.className+" secondary-color",size:"MEDIUM",labelType:"T17",widthByTextLength:!0})):null):null,h.isOpen("rightClickDebug")?s.createElement("ul",{key:"debug"},s.createElement.apply(this,[a,{item:{enabled:!0},label:"Debug",shouldTranslate:!1,key:"debug"},l.map(this.props.selectedComponents,function(e,t,o,i,n,a,r){return s.createElement(d,{shouldTranslate:!1,key:a.id,label:t.components.getDisplayName(a)+" - "+a.id,item:{enabled:!0},items:this.getDebugItems(a)})}.bind(this,e,t,o,i,n)),l.map(this.props.selectedComponents,function(e,t,o,i,n,a,r){return s.createElement(c,{shouldTranslate:!1,item:this.getExportDebugInfoItem(a),key:a.id+".debugInfo",onClick:function(e,t,o,i,n,a,r){this.exportDebugInfo(a)}.bind(this,e,t,o,i,n,a,r)})}.bind(this,e,t,o,i,n)),this.isSingleController()?s.createElement(c,{shouldTranslate:!1,item:{label:"Inspect controller",enabled:!0},key:"controllerInspector",onClick:this.controllerInspector}):null,this.isSingleController()?s.createElement(c,{shouldTranslate:!1,item:{label:"Select connected components",enabled:!0},key:"selectConnectedComponents",onClick:this.selectControllerConnectedComponents}):null,this.isSingleNonController()?s.createElement(c,{shouldTranslate:!1,item:{label:"Inspect connections to controllers",enabled:!0},key:"connectionInspector",onClick:this.connectionsInspector}):null,s.createElement(c,{shouldTranslate:!1,item:{label:"Add controller",enabled:!0},key:"add-controller",onClick:this.openAddController}),s.createElement(c,{shouldTranslate:!1,item:{label:"Component Finder",enabled:!0},key:"component-finder",onClick:this.componentInspectorFinder}),s.createElement(c,{shouldTranslate:!1,item:{label:"Restart Platform",enabled:!0},key:"restart-platform",onClick:this.restartPlatform}),s.createElement(c,{shouldTranslate:!1,item:{label:"Scrape skin definition",enabled:!0},key:"scrape-skin-definition",onClick:this.scrapeSkinDefinition}),s.createElement(c,{shouldTranslate:!1,item:{label:"open multi component style panel",enabled:!0},key:"multi-component-panel",onClick:this.openMultiComponentPanel}),this.isAppBuilder()?s.createElement(a,{item:{enabled:!0},label:"App Builder",shouldTranslate:!1,key:"app-builder"},s.createElement(c,{shouldTranslate:!1,item:{label:"Export this widget",enabled:!0},key:"export-widget",onClick:this.exportWidget}),s.createElement(c,{shouldTranslate:!1,item:{label:"Import pending widget",enabled:!0},key:"import-widget",onClick:this.importWidget})):null])):null,t.developerMode.isEnabled()&&!this.shouldHideViewProperties()?s.createElement("ul",{key:"rcmDevMode"},s.createElement(c,{label:"PLATFORM_RightClick_Menu_Open_Properties_Panel",ref:"openDevTools",item:{enabled:!0},onClick:this.openPropertiesPanel})):null):null)}.apply(this,[]):null)}}),define("rEditor/rootComps/rightClickMenu/rightClickMenu",["create-react-class","prop-types","lodash","core","stateManagement","rEditor/rootComps/rightClickMenu/util/rcmDataParser","rEditor/rootComps/rightClickMenu/customActions","util","rEditor/utils/removeUtil","experiment","rEditor/rootComps/rightClickMenu/rightClickMenu.rt","coreBi","coreUtilsLib","constants","helpIds"],function(e,t,s,o,E,r,i,P,n,C,a,T,l,_,c){"use strict";var p=E.editorPlugins.userPreferences.selectors,I=p.getSessionUserPreferences,d=p.getSiteUserPreferences,u=P.serviceTopology.dashboardUrl.replace(/create\//,"")+"/",g=E.editorPlugins.domMeasurements.selectors.getViewPort,M=E.editorPlugins.pinMode.actions,A=void 0,m=T,f="rcm";function h(t,e){return s.some(e,function(e){return s.isEqual(e,t)})}function y(e,t,o){return{x:function(e,t,o){var i=o,n=P.elementUtils.getOuterWidth(t);if(i+n-window.pageXOffset>e.rightX){var a=i-n;return a<e.x?i+e.x:a}return i}(e,t,o.x),y:function(e,t,o){var i=o,n=P.elementUtils.getOuterHeight(t);if(i+n>e.bottomY){var a=i-n;return a<e.y?e.y:a}return i}(e,t,o.y)}}function b(e){var t=this.state.menuItems;t.arrange=r.buildArrangeMenu(e,this.getEditorAPI()),this.setState({menuItems:t})}function v(e,t,o){s.set(o,e,t)}return e({displayName:"rightClickMenu",mixins:[o.mixins.editorAPIMixin,P.translationMixin],compType:null,propTypes:{selectedComponents:t.array,editorMousePosition:t.object.isRequired,viewerMousePosition:t.object.isRequired,setHoverBox:t.func.isRequired,clearHoverBox:t.func.isRequired,origin:t.string.isRequired,context:t.object,removeAllGuidesInRuler:t.func},onOuterClick:function(){A.closeRightClickMenu()},getInitialState:function(){return A=this.getEditorAPI(),this.shouldMeasureRCMRelativeToViewPort=!0,{position:this.props.editorMousePosition,openSubMenuToLeft:!1,menuItems:"stage"===this.props.origin?this.getAllMenuItems(this.props.selectedComponents,this.props.viewerMousePosition):[]}},componentDidMount:function(){this.compType=A.components.getType(this.props.selectedComponents),A.bi.event(m.events.rightClickMenu.RIGHT_CLICK_MENU_OPEN,{component:this.compType}),this.updatePositionRelativeToViewPort()},getAllMenuItems:function(e,t){var o,i,n,a=(o=t.x,i=t.y,n=A.selection.getComponentsByXY(o,i),s.filter(n,A.components.is.selectable));return r.buildMenuItems(A,a,e)},rebuildItemsForSameComponent:function(e){var t=s.pickBy({showOnAllPages:r.buildShowOnAllPagesItem(A,e),fixedPosition:r.buildFixedPositionItem(A,e)},s.bind(function(e,t){return!s.isEqual(e,this.state.menuItems[t])},this));if(!s.isEmpty(t)){var o=s.assign({},this.state.menuItems,t);this.setState({menuItems:o})}},componentWillReceiveProps:function(e){e.selectedComponents&&(s.isEqual(e.selectedComponents,this.props.selectedComponents)?this.rebuildItemsForSameComponent(e.selectedComponents):(this.shouldMeasureRCMRelativeToViewPort=!0,this.setState({menuItems:this.getAllMenuItems(e.selectedComponents,e.viewerMousePosition)})))},componentDidUpdate:function(){this.shouldMeasureRCMRelativeToViewPort&&this.updatePositionRelativeToViewPort()},componentWillUnmount:function(){A.bi.event(m.events.rightClickMenu.RIGHT_CLICK_MENU_CLOSE,{origin:f,component:this.compType})},getSelectedCompsRestrictions:function(){var e=A.store.getState();return E.editorPlugins.selection.selectors.getSelectedCompRestrictions(e)},updatePositionRelativeToViewPort:function(){var e=this.refs.rcmRoot,t=A.store.getState(),o=g(t),i=y(o,e,this.state.position),n=function(e,t,o){var i=t.querySelectorAll(".subMenu");if(0===i.length)return!1;var n=s.maxBy(i,function(e){return P.elementUtils.getOuterWidth(e)});return o.x+P.elementUtils.getOuterWidth(t)+P.elementUtils.getOuterWidth(n)>e.rightX}(o,e,this.state.position);this.shouldMeasureRCMRelativeToViewPort=!1,this.setState({position:i,openSubMenuToLeft:n})},onOverlappingItemMouseEnter:function(e){A.bi.event(m.events.rightClickMenu.OVERLAPPING_ITEMS_HOVER,{component:h(e.component,this.props.selectedComponents)?"selected":"other"}),this.props.setHoverBox(e.component)},onOverlappingItemMouseLeave:function(){this.props.clearHoverBox()},getClasses:function(){return{rightClickMenu:!0,"open-sub-menu-left":this.state.openSubMenuToLeft,"fixed-position":this.getEditorAPI().components.layout.isShowOnFixedPosition(this.props.selectedComponents)}},onRightClick:function(e){e.preventDefault()},shouldShowNotificationOnUndo:function(e){var t=E.editorPlugins.userPreferences.selectors.getSiteUserPreferences("topBarSiteHistoryUsed")(A.store.getState()),o=E.editorPlugins.userPreferences.selectors.getSiteUserPreferences("siteHistoryNotificationAppeared")(A.store.getState());return!(s.invoke(A,"dsRead.generalInfo.isFirstSave")||!1)&&!o&&!t&&e>=_.USER_PREFS.UNDO.UNDO_THRESHOLD},undo:function(){if(this.getEditorAPI().history.undo(),A.closeRightClickMenu(),"old"!==C.getValue("se_notificationCenter")){var e=I(_.USER_PREFS.UNDO.UNDO_COUNT)(A.store.getState())||0;if(this.shouldShowNotificationOnUndo(e)){var t=A.documentServices.generalInfo.getMetaSiteId(),o=u+"history/"+t+"/?referralInfo=EDITOR";A.store.dispatch(E.editorPlugins.notifications.actions.showUserActionNotification({message:"Notifications_Site_History_Text",title:"Site History",type:"info",link:{caption:"Notifications_Site_History_Link",onNotificationLinkClick:function(){window.open(o)}}})),A.store.dispatch(E.editorPlugins.userPreferences.actions.setSiteUserPreferences("siteHistoryNotificationAppeared",!0))}else e+=1,A.store.dispatch(E.editorPlugins.userPreferences.actions.setSessionUserPreferences(_.USER_PREFS.UNDO.UNDO_COUNT,e))}},cutComponent:function(){var e=A.bi.getComponentsBIParams(this.props.selectedComponents);s.forEach(e,s.partial(v,"origin",f)),A.bi.reportBI(m.events.rightClickMenu.CUT,e),A.closeRightClickMenu(function(){A.selectedComponent.cut(),A.history.add("cut component via rightClickMenu")})},copyComponent:function(){var e=A.bi.getComponentsBIParams(this.props.selectedComponents);s.forEach(e,s.partial(v,"origin",f)),A.selectedComponent.copy(),A.closeRightClickMenu(),A.bi.reportBI(m.events.rightClickMenu.COPY,e)},pasteComponent:function(e){var t=A.bi.getComponentsBIParams(this.props.selectedComponents);s.forEach(t,s.partial(v,"origin",f));var o={x:this.props.editorMousePosition.x,y:this.props.editorMousePosition.y};A.copyPaste.paste(o,!1,e,f),A.closeRightClickMenu(),A.history.add("paste component via rightClickMenu"),A.bi.reportBI(m.events.rightClickMenu.PASTE,t)},pastePage:function(){A.copyPaste.pastePage(),A.closeRightClickMenu()},paste:function(e){A.copyPaste.hasComponentToPaste()?this.pasteComponent(e):A.copyPaste.hasPageToPaste()&&this.pastePage(e)},applyModeFromClipboard:function(){var e=A.bi.getComponentsBIParams(this.props.selectedComponents);s.forEach(e,s.partial(v,"origin",f)),A.copyPaste.applyModeFromClipboard(A.selection.getSelectedComponents()),A.closeRightClickMenu(),A.bi.reportBI(m.events.rightClickMenu.APPLY_MODE_FROM_CLIPBOARD,e)},duplicateComponent:function(){var e=A.bi.getComponentsBIParams(this.props.selectedComponents);s.forEach(e,s.partial(v,"origin",f)),A.selectedComponent.duplicate(),A.closeRightClickMenu(),"Column"!==A.selection.getSelectedComponentType()&&A.history.add("duplicate component via rightClickMenu"),A.bi.reportBI(m.events.rightClickMenu.DUPLICATE,e)},removeComponent:function(){var e=A.bi.getComponentsBIParams(this.props.selectedComponents);if(s.forEach(e,s.partial(v,"removal_method",f)),A.bi.reportBI(m.events.editor.component_removed,e),"old"!==C.getValue("se_notificationCenter")){var t=!!d(_.USER_PREFS.UNDO.UNDO_PREVIOUSLY_USED)(A.store.getState()),o=!!d(_.USER_PREFS.DELETE.FIRST_TIME_DELETE_USED)(A.store.getState());if(!t||!o){A.store.dispatch(E.editorPlugins.userPreferences.actions.setSiteUserPreferences(_.USER_PREFS.DELETE.FIRST_TIME_DELETE_USED,!0));A.store.dispatch(E.editorPlugins.notifications.actions.showUserActionNotification({message:"Notifications_Undo_Redo_Text",title:"Undo Redo",type:"info",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){A.panelManager.openHelpCenter(c.NOTIFICATIONS.UNDO_REDO)}}}))}}var i=A.selection.isPopupPageSelected(this.props.selectedComponents)?s.head(this.props.selectedComponents):A.selection.getSelectedPopup(this.props.selectedComponents);if(!i)return new Promise(function(t){A.closeRightClickMenu(function(){A.selectedComponent.remove().then(function(e){e&&(A.history.add("removed component via rightClickMenu"),t())})})});n.removePopupWithMessagePanel(A,i,f)},toggleShowOnAllPages:function(){A.components.toggleShowOnAllPages(this.props.selectedComponents),A.dsActions.waitForChangesApplied(function(){var e=A.components.isShowOnAllPages(this.props.selectedComponents);A.bi.event(m.events.rightClickMenu.SHOW_ON_ALL_PAGES,{new_status:e,origin:f})}.bind(this))},toggleFixedPosition:function(){A.selectedComponent.toggleFixedPosition(),A.dsActions.waitForChangesApplied(function(){var e=A.components.is.fixed(this.props.selectedComponents),t=A.components.getType(this.props.selectedComponents[0]);A.bi.event(m.events.rightClickMenu.FIXED_POSITION,{origin:f,new_status:e,component:t})}.bind(this))},handlePinClick:function(){A.closeRightClickMenu();var e=A.components.layout.isPinned(this.props.selectedComponents);if(!e){P.fedopsLogger.interactionStarted(P.fedopsLogger.INTERACTIONS.AUTO_PIN_TO_SCREEN);var t=this.props.selectedComponents[0],o=A.components.layout.getRelativeToScreen(t),i=o.x+o.width/2,n=o.y+o.height/2,a=A.ui.stage.getEditingAreaLayout(),r=a.width/3;A.components.layout.setFixed(this.props.selectedComponents,!0);var s="TOP_LEFT",l="TOP",c="TOP_RIGHT",p="BOTTOM_LEFT",d="BOTTOM",u="BOTTOM_RIGHT",g=null;if(n<=a.height/2)if(i<=r){var m=P.pinModeUtils.getRightDockLayoutAfterRotation(s,A);A.components.layout.setDock(t,m),g=s}else if(i<=2*r){var f=P.pinModeUtils.getRightDockLayoutAfterRotation(l,A);A.components.layout.setDock(t,f),g=l}else{var h=P.pinModeUtils.getRightDockLayoutAfterRotation(c,A);A.components.layout.setDock(t,h),g=c}else if(i<=r){var y=P.pinModeUtils.getRightDockLayoutAfterRotation(p,A);A.components.layout.setDock(t,y),g=p}else if(i<=2*r){var b=P.pinModeUtils.getRightDockLayoutAfterRotation(d,A);A.components.layout.setDock(t,b),g=d}else{var v=P.pinModeUtils.getRightDockLayoutAfterRotation(u,A);A.components.layout.setDock(t,v),g=u}if(A.bi.event(T.events.pinToScreen.FIRST_PIN_TO_SCREEN,{component_id:t.id,component_type:A.components.getType(t),selected_area:g}),P.fedopsLogger.interactionEnded(P.fedopsLogger.INTERACTIONS.AUTO_PIN_TO_SCREEN),A.history.add("Auto pinned to screen"),"old"!==C.getValue("se_notificationCenter")){var S=(I(_.USER_PREFS.PIN_TO_SCREEN.PIN_COUNT)(A.store.getState())||-1)+1;A.store.dispatch(E.editorPlugins.userPreferences.actions.setSessionUserPreferences(_.USER_PREFS.PIN_TO_SCREEN.PIN_COUNT,S)),A.pinMode.checkSizeRestrictionsAndShowNotification()}}A.waitForChangesApplied(function(){A.store.dispatch(M.open(e?"rcm_reopen":"rcm"))})},handleA11yClick:function(){A.closeRightClickMenu(),A.store.dispatch(E.panels.actions.openComponentPanel("compPanels.dynamicPanels.a11ySettingsPanel"))},moveForward:function(){A.components.arrangement.moveForward(this.props.selectedComponents),b.call(this,this.props.selectedComponents),A.bi.event(m.events.rightClickMenu.MOVE_FORWARD,{origin:f})},moveBackward:function(){A.components.arrangement.moveBackward(this.props.selectedComponents),b.call(this,this.props.selectedComponents),A.bi.event(m.events.rightClickMenu.MOVE_BACKWARDS,{origin:f})},moveToFront:function(){A.components.arrangement.moveToFront(this.props.selectedComponents),b.call(this,this.props.selectedComponents),A.bi.event(m.events.rightClickMenu.BRING_TO_FRONT,{origin:f})},moveToBack:function(){A.components.arrangement.moveToBack(this.props.selectedComponents),b.call(this,this.props.selectedComponents),A.history.add("component - move to back"),A.bi.event(m.events.rightClickMenu.SEND_TO_BACK,{origin:f})},onArrangeHover:function(){A.bi.event(m.events.rightClickMenu.ARRANGE_HOVER,{origin:f})},onOverlappingItemClick:function(e){A.selection.selectComponentByCompRef(e.component),A.selection.setIsHiddenComponentDraggedNext(!0),A.closeRightClickMenu(),A.bi.event(m.events.rightClickMenu.OVERLAPPING_ITEM_CLICK,{component:h(e.component,this.props.selectedComponents)?"selected":"other"})},componentInspectorFinder:function(){A.panelManager.openComponentPanel("debugTools.componentInspector.finderPanel",{comp:this.props.selectedComponents[0]}),A.closeRightClickMenu()},scrapeSkinDefinition:function(){window.multiCompStylingData=s.reduce(this.props.selectedComponents,function(e,t){var o=A.components.skin.get(t);return e=s.merge(e,A.theme.skins.getSkinDefinition(o))},{})},openMultiComponentPanel:function(){var o=["wysiwyg.viewer.skins.appinputs.AppsTextInputSkin","TextAreaDefaultSkin","wysiwyg.viewer.skins.FileUploaderDefaultSkin","skins.input.RadioGroupDefaultSkin","wysiwyg.viewer.skins.input.CheckboxBasicSkin","skins.input.CheckboxGroupDefaultSkin","ComboBoxInputSkin","wysiwyg.viewer.skins.input.DatePickerTextBetweenNavSkin","wixui.skins.Rating","wysiwyg.viewer.skins.FormContainerSkin"],e=(1===this.props.selectedComponents.length?s.concat(A.components.getChildren(this.props.selectedComponents),this.props.selectedComponents):this.props.selectedComponents).filter(function(e){return s.includes(o,(t=e,A.components.skin.get(t)));var t});A.panelManager.openPanel("advancedStylePanel.multiComponentAdvancedStylePanel",{selectedComponent:e,groupMapping:{groups:{input_background:{type:"BG_COLOR_ALPHA",state:"regular",params:{field_role_text:["bg"],field_role_text_area:["bg"],field_role_select:["bg"],field_role_radio_list:["bg"],field_role_checkbox_group:["bg"],field_role_date:["bg","bg-calendar"],field_role_checkbox:["bg"],field_role_file_upload:["btn_bg"],field_role_rating:["emptyShapeColor"]},compPart:"inputs"},input_border_color:{type:"BORDER_COLOR_ALPHA",state:"regular",params:{field_role_text:["brd"],field_role_text_area:["brd"],field_role_select:["brd"],field_role_radio_list:["bg3"],field_role_checkbox_group:["brd"],field_role_date:["brd"],field_role_checkbox:["brd"],field_role_file_upload:["btn_brd"]},compPart:"inputs"},input_border_sizes:{type:"BORDER_SIZES",state:"regular",params:{field_role_text:["brw"],field_role_text_area:["brw"],field_role_select:["brw"],field_role_date:["brw"]},compPart:"inputs"},input_corners:{type:"BORDER_RADIUS",state:"regular",params:{field_role_text:["rd"],field_role_text_area:["rd"],field_role_select:["rd"],field_role_checkbox_group:["rd"],field_role_date:["rd"],field_role_checkbox:["rd"],field_role_file_upload:["btn_rd"]},compPart:"inputs"},main_text_color:{type:"TEXT_COLOR",state:"regular",params:{field_role_text:["txt"],field_role_text_area:["txt"],field_role_select:["txt2"],field_role_radio_list:["txt","bg2"],field_role_checkbox_group:["txt","bgc"],field_role_date:["txt"],field_role_checkbox:["txt","bg2"],field_role_rating:["filledShapeColor","shapeBorderColor"]},section:"input",compPart:"inputs"},placeholder_text_color:{type:"TEXT_COLOR",state:"regular",label:"CustomDesign_InputControls_Placeholder_Text_Color",params:{field_role_text:["txt2"],field_role_text_area:["txt2"],field_role_select:["txt","arrowColor"],field_role_date:["txt-placeholder","icn-color"],field_role_file_upload:["btn_txt"]},section:"input",compPart:"inputs"},main_text_font:{type:"FONT",state:"regular",params:{field_role_text:["fnt"],field_role_text_area:["fnt"],field_role_select:["fnt"],field_role_radio_list:["fnt"],field_role_checkbox_group:["fnt"],field_role_date:["fnt"],field_role_checkbox:["fnt"],field_role_file_upload:["btn_fnt"]},section:"input",compPart:"inputs"},label_text_color:{type:"TEXT_COLOR",state:"regular",label:"CustomDesign_Text_LabelTextColor",params:{field_role_text:["txtlbl"],field_role_text_area:["txtlbl"],field_role_select:["txtlbl"],field_role_radio_list:["txt2"],field_role_checkbox_group:["txt2"],field_role_date:["txtlbl"],field_role_file_upload:["txtlbl"],field_role_rating:["labelFontColor"]},section:"label",compPart:"inputs"},label_text_font:{type:"FONT",state:"regular",params:{field_role_text:["fntlbl"],field_role_text_area:["fntlbl"],field_role_select:["fntlbl"],field_role_radio_list:["fnt2"],field_role_checkbox_group:["fnt2"],field_role_date:["fntlbl"],field_role_file_upload:["fntlbl"],field_role_rating:["labelFont"]},section:"label",category:"text",compPart:"inputs"},input_background_hover:{type:"BG_COLOR_ALPHA",state:"hover",params:{field_role_text:["bgh"],field_role_text_area:["bgh"],field_role_select:["bgh"],field_role_radio_list:["bgh"],field_role_checkbox_group:["bgh"],field_role_date:["bgh"],field_role_checkbox:["bgh"],field_role_file_upload:["btn_bg_h"]},compPart:"inputs"},input_border_color_hover:{type:"BORDER_COLOR_ALPHA",state:"hover",params:{field_role_text:["brdh"],field_role_text_area:["brdh"],field_role_select:["brdh"],field_role_radio_list:["bg3h"],field_role_checkbox_group:["brdh"],field_role_date:["brdh"],field_role_checkbox:["brdh"],field_role_file_upload:["btn_brd_h"]},compPart:"inputs"},input_border_sizes_hover:{type:"BORDER_SIZES",state:"hover",params:{field_role_text:["brwh"],field_role_text_area:["brwh"],field_role_select:["brwh"],field_role_date:["brwh"]},compPart:"inputs"},input_background_focus:{type:"BG_COLOR_ALPHA",state:"focus",params:{field_role_text:["bgf"],field_role_text_area:["bgf"],field_role_select:["bgf"],field_role_radio_list:["bgf"],field_role_checkbox_group:["bgf"],field_role_date:["bgf"],field_role_checkbox:["bgf"],field_role_file_upload:["bg_f"]},compPart:"inputs"},input_border_color_focus:{type:"BORDER_COLOR_ALPHA",state:"focus",params:{field_role_text:["brdf"],field_role_text_area:["brdf"],field_role_select:["brdf"],field_role_radio_list:["bg3f"],field_role_checkbox_group:["bg3f"],field_role_date:["brdf"],field_role_checkbox:["brdf"],field_role_file_upload:["brd_f"]},compPart:"inputs"},input_border_sizes_focus:{type:"BORDER_SIZES",state:"focus",params:{field_role_text:["brwf"],field_role_text_area:["brwf"],field_role_select:["brwf"],field_role_date:["brwf"]},compPart:"inputs"},input_background_error:{type:"BG_COLOR_ALPHA",state:"error",params:{field_role_text:["bge"],field_role_text_area:["bge"],field_role_select:["bge"],field_role_radio_list:["bge"],field_role_checkbox_group:["bge"],field_role_date:["bge"],field_role_checkbox:["bge"],field_role_file_upload:["bg_e"],field_role_rating:["errorFilledShapeColor"]},compPart:"inputs"},input_border_color_error:{type:"BORDER_COLOR_ALPHA",state:"error",params:{field_role_text:["brde"],field_role_text_area:["brde"],field_role_select:["brde"],field_role_radio_list:["bg3e"],field_role_checkbox_group:["brde"],field_role_date:["brde"],field_role_checkbox:["brde"],field_role_file_upload:["brd_e"],field_role_rating:["errorShapeBorderColor"]},compPart:"inputs"},input_border_sizes_error:{type:"BORDER_SIZES",state:"error",params:{field_role_text:["brwe"],field_role_text_area:["brwe"],field_role_select:["brwe"],field_role_date:["brwe"]},compPart:"inputs"},main_text_color_error:{type:"TEXT_COLOR",state:"error",params:{field_role_rating:["errorLabelFontColor"]},section:"label",compPart:"inputs"},form_background:{type:"BG_COLOR_ALPHA",state:"regular",params:{form_Role:["bg"]},compPart:"container"}},compParts:[{label:"Input Fields",value:"inputs",defaultSelected:!0},{label:"Container Box",value:"container"}],sections:{input:{state:"active",category:"text",label:"Input",priority:2},label:{state:"active",category:"text",label:"Label",priority:1}}},onPresetChanged:function(e){return console.log(e)},presets:{theme01:{src:"https://i.ibb.co/9GC1FLf/form-01.png",style:{width:"109px",height:"82px"}},theme02:{src:"https://i.ibb.co/2PH99xS/form-02.png",style:{width:"109px",height:"82px"}},theme03:{src:"https://i.ibb.co/7vZGWqn/form-03.png",style:{width:"109px",height:"82px"}},theme04:{src:"https://i.ibb.co/k5nbwgL/form-04.png",style:{width:"109px",height:"82px"}}},title:"Form Design",presetsTitle:"Discover More Forms"})},getDebugItems:function(e){var t=A.components.serialize(e);return function i(n,a,r){return s.map(s.keys(a),function(e){var t=a[e],o=r.concat(e);return{key:e,label:e,onClick:function(e){l.log.info(n,o.join("."),t),e.stopPropagation()},items:s.isString(t)||s.isNumber(t)?[]:i(n,t,o),item:{enabled:!0}}})}(e.id,t,["structure"])},getExportDebugInfoItem:function(e){return{label:"Export ["+e.id+"] to console",enabled:!0}},exportDebugInfo:function(e){var t=A.components.serialize(e,null,!1,!0);window.selectedComp=s.cloneDeep(t),l.log.info("Exported ["+e.id+"] to window.selectedComp"),A.closeRightClickMenu()},controllerInspector:function(){l.log.info("Opening controller panel"),A.panelManager.openComponentPanel("debugTools.platform.controllerInspectorPanel",{comp:this.props.selectedComponents[0]}),A.closeRightClickMenu()},removeAllGuidesInRuler:function(){this.props.removeAllGuidesInRuler(),A.closeRightClickMenu()},connectionsInspector:function(){l.log.info("Opening connections panel"),A.panelManager.openComponentPanel("debugTools.platform.connectionsInspectorPanel",{comp:this.props.selectedComponents[0]}),A.closeRightClickMenu()},isSingleController:function(){return 1===this.props.selectedComponents.length&&"platform.components.AppController"===this.getEditorAPI().components.getType(this.props.selectedComponents[0])},isSingleNonController:function(){return 1===this.props.selectedComponents.length&&"platform.components.AppController"!==this.getEditorAPI().components.getType(this.props.selectedComponents[0])},selectControllerConnectedComponents:function(){var t=this.props.selectedComponents[0];require(["debugTools"],function(e){e.platform.utils.selectControllerConnectedComponents(A,t)}),A.closeRightClickMenu()},openAddController:function(){A.panelManager.openPanel("debugTools.platform.addControllerPanel",{}),A.closeRightClickMenu()},getApplyToRemoveAllGuides:function(){return{label:"Ruler_Context_Menu_Remove_All",enabled:!0}},getApplyToInfoItem:function(){return{label:"RightClick_Menu_Copy_Design_Label",enabled:!0}},openApplyToDialog:function(e){A.bi.event(T.events.applyStyle.COPY_STYLE_RCM_CLICK,{component_id:e.id,component_type:A.components.getType(e)}),A.styles.openApplyStylePanel(e)},applyToAllModes:function(){A.components.modes.applyCurrentToAllModes(A.selection.getSelectedComponents()),A.closeRightClickMenu()},getCustomActions:function(){var e=i[A.components.getType(this.props.selectedComponents)]||[];return s.isFunction(e)?e(this.getEditorAPI()):e},saveStyleToTheme:function(e,t){var o=A.dsRead.theme.styles.get(t),i=A.dsRead.components.style.get(e),n=s.assign(i,s.pick(o,["id","type","styleType"]));A.components.style.update(e,n)},shouldHideViewProperties:function(){var e=E.editorPlugins.rightClickMenu.selectors.getOverriddenItems(A.store.getState());return s.get(e,"viewProperties.isHidden")},openPropertiesPanel:function(){A.developerToolBar.isEnabled()||A.developerToolBar.toggle(),A.closeRightClickMenu()},isShowOnAllPagesToggleDisabled:function(){return!this.props.selectedComponents||(!A.components.canToggleShowOnAllPages(this.props.selectedComponents)||A.components.shouldDisableShowOnAllPages(this.props.selectedComponents))},restartPlatform:function(){A.closeRightClickMenu(),A.documentServices.platform.init()},exportWidget:function(){A.closeRightClickMenu(),A.store.dispatch(E.editorPlugins.applicationStudio.actions.exportWidget())},importWidget:function(){A.closeRightClickMenu(),A.store.dispatch(E.editorPlugins.applicationStudio.actions.importWidget())},isAppBuilder:function(){return P.appStudioUtils.isAppStudio()},render:function(){return a.call(this)},shouldPresentHideOverDelete:function(){return A.isMobileEditor()&&s.some(this.props.selectedComponents,A.components.is.hiddenable)},getSelectedComponentsTypes:function(){var e=this.getEditorAPI().components.data.get(this.props.selectedComponents)||[];return s.map(e,"type")},shouldHideCopyDesign:function(){return E.editorPlugins.rightClickMenu.selectors.getOverriddenItems(A.store.getState()).copyDesign.isHidden},toggleFlipHoriz:function(){A.components.flip(this.props.selectedComponents,"y")},toggleFlipVert:function(){A.components.flip(this.props.selectedComponents,"x")}})}),define("rEditor/rootComps/panels/openedPanels.rt",["react","lodash","util","uiAnimations","panels"],function(o,i,n,e,t){"use strict";return function(){return o.createElement("div",{className:"opened-panels"},o.createElement.apply(this,[e.panelsAnimation,{},this.props.withHelpPanel&&this.props.helpPanelProps?o.createElement(t.frames.helpPanelFrame,i.assign({},{key:"helpPanel",isMobileEditor:this.props.isMobileEditor},this.props.helpPanelProps)):null,i.map(this.props.openPanels,function(e,t){return o.createElement(n.lazyComponent,i.assign({},{moduleName:e.name,key:e.name,onModuleLoaded:function(e,t){this.forceUpdate()}.bind(this,e,t)},this.getPanelProps(e)))}.bind(this))]))}}),define("rEditor/rootComps/panels/openedPanels",["create-react-class","prop-types","util","lodash","rEditor/rootComps/panels/openedPanels.rt"],function(e,t,i,n,o){"use strict";return e({displayName:"openedPanels",propTypes:{isMobileEditor:t.bool,openPanels:t.array,withHelpPanel:t.bool,helpPanelProps:t.object,selectedComponents:t.array},getDefaultProps:function(){return{withHelpPanel:!0}},getPanelProps:function(e){return n.assign({},e.props,{selectedComponents:this.props.selectedComponents,key:(t=e.props,o=t.key,i.lazyComponent.isLoaded(t.name)&&(o+="-loading"),o)});var t,o},render:o})}),define("rEditor/rootComps/portal/portal.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",{id:"portal"},this.getChildren())}}),define("rEditor/rootComps/portal/portal",["react","create-react-class","prop-types","lodash","rEditor/rootComps/portal/portal.rt"],function(a,e,t,r,o){"use strict";return e({displayName:"Portal (AKA Comps Day-Care)",propTypes:{comps:t.object},getChildren:function(){return r.reduce(this.props.comps,function(e,t,o){return e.concat((i=t,n=o,r.map(i,function(e){return a.createElement(e.reactClass,r.assign({},e.props,{origin:n}))})));var i,n},[])},render:o})}),define("rEditor/rootComps/gfpp/gfppMapper",["lodash","stateManagement","rEditor/rootComps/gfpp/gfppModel","constants","experiment"],function(C,l,s,T,_){"use strict";var a=["background","mobileBackgroundSettings","scale_up","scale_down","add","settings","effects","behaviors","layout","design","customizeDesign","stylableLayout","stylable","crop","filters","animation","mobileAnimation","link","hide","stretch","stretchForColumns","applyToOtherView","upgrade","help","connect","accessibility","pinMode","preview","customConnect"];function I(){var e,t,o,i,n=a.slice(0);return _.isOpen("switchLayoutDesignOrder")&&(e=n,t=C.indexOf(e,"layout"),o=C.indexOf(e,"design"),i=e[t],e[t]=e[o],e[o]=i),n}var c=function(e,t,o,i,n){var a,r,s,l=i.mainActions||[],c=i.extraActions||[],p=(a=i.presetActions,r=I(),s=C.map(r,function(e){return a[e]}),C.compact(s)),d=l.concat(p).concat(c);if(_.isOpen("se_multilingual")){var u=T.MULTILINGUAL.linguistDefId,g=e[0].type,m=e[0].id,f=!i.untranslatable&&1===e.length,h=i.translateAction,y=n.language.current.get(),b=n.language.original.get(),v=b&&b.languageCode;if(v&&y&&v!==y&&!n.components.is.customizeTranslate(e)){var S={icon:"moreRegular",tooltip:"gfpp_tooltip_moreactions",customBI:{action_name:"gfpp_multilingual_expand",icon:"expand",component_id:m,component_type:g,app_Id:u},onClick:function(){t()}};if(f&&!n.isMobileEditor()){var E={onClick:h?i.presetActions[h].onClick:d[0].onClick,customBI:{action_name:"gfpp_multilingual_translate",icon:"translate",component_id:m,component_type:g,app_Id:u},label:"gfpp_mainaction_translate"};if(o)d=[E,S];else{var P=d.slice(1);d=[E,S].concat(_toConsumableArray(P))}}else d=o?[S]:[S].concat(_toConsumableArray(d))}}return d};return{mapStateToProps:function(e,t){var o=e.editorAPI,i=t.selectedComponents,n=t.toggleGfpp,a=t.gfppIsCollapsed,r=s.getData(o,i);return{buttons:c(i,n,a,r,o),selectedComponents:i,previewState:r.previewState}},mapDispatchToProps:function(t){return{setComponentPreviewState:function(){return t(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t,o){var i;return(i=o.editorAPI.documentMode).setComponentPreviewState.apply(i,n)}}.apply(void 0,arguments))},openHelpCenter:function(e){return t((s=e,function(e,t,o){var i=o.editorAPI,n=C.get(i.selection.getSelectedComponentData(),"appPartName"),a=i.selection.getSelectedComponentType(),r={component:n||a,origin:T.BI.HELP.ORIGIN.GFPP,learn_more:!1};i.store.dispatch(l.editorPlugins.panels.actions.openHelpCenter(s,null,r))}));var s}}}}}),define("rEditor/rootComps/gfpp/gfppButton.rt",["react","lodash","baseUI"],function(t,e,o){"use strict";return function(){return t.createElement(o.tooltip,{value:this.props.tooltip,styleType:"small",disabled:!this.props.tooltip,closeTriggers:this.getCloseTriggers(),shouldTranslate:this.props.shouldTranslate},function(){var e=this.translateIfNeeded;return t.createElement("li",{className:"gfpp-btn "+this.props.className,onClick:this.onClick,"data-aid":this.props.automationId},this.props.icon?t.createElement(o.symbol,{key:"gfppButtonIcon",name:this.props.icon}):null,this.props.label?t.createElement("span",{key:"gfppButtonLabel",className:"gfpp-label"},e(this.props.label)):null)}.apply(this,[]))}}),define("rEditor/rootComps/gfpp/gfppButton",["create-react-class","prop-types","lodash","core","util","coreBi","constants","experiment","rEditor/rootComps/gfpp/gfppButton.rt"],function(e,t,a,o,i,r,s,l,n){"use strict";return e({displayName:"GFPP Button",propTypes:{selectedComponent:t.arrayOf(t.object).isRequired},mixins:[o.mixins.editorAPIMixin],translateIfNeeded:function(e){return a.isBoolean(this.props.shouldTranslate)&&!this.props.shouldTranslate?e:i.translate(e)},getCloseTriggers:function(){return this.props.keepTooltipOpenOnClick&&["onMouseLeave"]},onClick:function(){if(!this.props.isDisabled){var e=this.getEditorAPI(),t=this.props.selectedComponent;if(!e.components.is.exist(t))return;var o=(t.length?a.head(t):t).id,i=e.selection.getSelectedComponentData(t),n=e.components.getType(t);this.props.onClick(e,t,s.USER_ACTIONS.ORIGIN.GFPP,{title:this.props.title,experimentIsOpen:l.isOpen}),e.bi.event(r.events.gfpp.GFPP_BUTTON_CLICK,this.props.customBI||{action_name:this.props.action_name||this.props.label||this.props.tooltip,component_id:o,component_type:a.get(i,"sourceType")||n,icon:this.props.tooltip,app_Id:this.props.appId})}},render:n})}),define("rEditor/rootComps/gfpp/gfppCustomButton",["react","create-react-class"],function(e,t){"use strict";return t({displayName:"gfppCustomButton",render:function(){return e.createElement(this.props.template,this.props)}})}),define("rEditor/rootComps/gfpp/gfppButtonGenerator",["react","create-react-class","lodash","rEditor/rootComps/gfpp/gfppButton","rEditor/rootComps/gfpp/gfppCustomButton"],function(e,t,o,i,n){"use strict";return t({displayName:"gfppButtonGenerator",render:function(){return e.createElement(this.props.template?n:i,o.assign({},this.props))}})}),define("rEditor/rootComps/gfpp/gfpp.rt",["react","lodash","uiAnimations","baseUI","rEditor/rootComps/gfpp/gfppButtonGenerator"],function(o,i,e,t,n){"use strict";return function(){var t=this;return o.createElement(e.gfppAnimation,{},o.createElement.apply(this,["ul",{id:"gfpp",ref:function(e){return t.gfppDomNode=e},className:"gfpp",key:this.getKey(),onMouseDown:this.stopEventPropagation,onMouseUp:this.stopEventPropagation,onDoubleClick:this.stopEventPropagation,onContextMenu:this.stopEventPropagation,onMouseMove:this.stopEventPropagation,style:this.props.style,onClick:this.stopEventPropagation},i.map(this.getButtons(),function(e,t){return o.createElement(n,i.assign({},{key:e.icon||e.label||e.tooltip,className:i(this.getButtonClasses(e)).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")+" "+(e.className||"")},i.omit(this.getButtonProps(e),"className")))}.bind(this))]))}}),define("rEditor/rootComps/gfpp/gfpp",["lodash","create-react-class","prop-types","util","coreUtilsLib","rEditor/rootComps/gfpp/gfppMapper","rEditor/rootComps/gfpp/gfpp.rt"],function(t,e,o,i,n,a,r){"use strict";var s=i.hoc,l=s.connect,c=s.STORES.EDITOR_API,p=e({displayName:"GFPP",propTypes:{selectedComponents:o.arrayOf(o.object).isRequired,buttons:o.arrayOf(o.object).isRequired,previewState:o.string,setComponentPreviewState:o.func.isRequired,openHelpCenter:o.func.isRequired,style:o.object,setGFPPMeasureFunc:o.func.isRequired,toggleGfpp:o.func.isRequired,gfppIsCollapsed:o.bool.isRequired},componentWillMount:function(){this.props.setComponentPreviewState(t.head(this.props.selectedComponents).id,this.props.previewState||null)},componentDidMount:function(){this.props.setGFPPMeasureFunc(this.getSize)},componentWillUnmount:function(){this.props.setGFPPMeasureFunc(null),this.props.setComponentPreviewState(t.head(this.props.selectedComponents).id,null)},componentWillReceiveProps:function(e){!t.isEqual(this.props.selectedComponents,e.selectedComponents)&&(this.props.toggleGfpp(!0),this.props.setComponentPreviewState(t.head(this.props.selectedComponents).id,null),this.props.setComponentPreviewState(t.head(e.selectedComponents).id,e.previewState||null))},getButtonProps:function(e){return e.isApplied&&t.assign(e,{label:e.label_active||e.label,icon:e.icon_active||e.icon,tooltip:e.tooltip_active||e.tooltip}),e.helpId&&t.isUndefined(e.onClick)&&(e.onClick=function(){this.props.openHelpCenter(e.helpId)}.bind(this)),e.selectedComponent=this.props.selectedComponents,e},getSize:function(){if(this.gfppDomNode){var e=n.domMeasurements.getBoundingRect(this.gfppDomNode);return t.pick(e,["width","height"])}},getButtons:function(){return this.props.buttons},stopEventPropagation:function(e){e.stopPropagation()},getKey:function(){return t.head([].concat(this.props.selectedComponents)).id+"_"+t.size([].concat(this.props.selectedComponents))},getButtonClasses:function(e){return{disabled:e.isDisabled,selected:e.isSelected,applied:e.isApplied}},render:r}),d=l(c,a.mapStateToProps,a.mapDispatchToProps)(p);return d.pure=p,d}),define("rEditor/rootComps/selectionBox/selectionBoxCommons",["lodash","experiment"],function(c,p){"use strict";function n(e,t){return c.some(e,function(e){return e(t)})}function d(e){return e?"fixed":"absolute"}return{getPosition:d,getBoundingStyle:function(e,t,o,i){var n=0,a=0;1<c.size(o)&&(a=(n=2)*n);var r=t.bounding,s={position:d(e),top:t.bounding.y-i-n,left:t.bounding.x-i-n,width:r.width+a,height:r.height+a};if(p.isOpen("se_editBoxPerformance")){var l="translate3d("+(r.x-i-n)+"px,"+(r.y-i-n)+"px,0)";s.top=0,s.left=0,s.WebkitTransform=l,s.transform=l}return s},findFirstContainerMatchingConditions:function(e,t,o){for(var i=c.head(t);i&&!n(o,i);)i=e.components.getContainer(i);return i}}}),define("rEditor/rootComps/selectionBox/focusBoxMapper",["lodash","constants","boxSlideshow","stateManagement"],function(c,p,e,t){"use strict";var a=e.utils.boxSlideShowUtils,d=t.editorPlugins.domMeasurements.selectors.getPreviewPosition,o=t.editorPlugins.selection.selectors,u=o.getFocusedContainer,g=o.getSelectedCompsRefs,m=o.getAppContainer,f=o.getContainerTabDefinition,h=t.editorPlugins.components.selectors;function y(e,t,o,i){return e.components.is.descendantOfRepeaterItem(t)||(n=e.dsRead,a=t,r=o,s=i,l=c.every(a,function(e){return!h.isDirectDescendantOfAppWidget(e,n)&&h.isDescendantOfAppWidget(e,n)}),c.isEqual(r,s)&&l);var n,a,r,s,l}var r=function(e,t,o){return o.editorAPI},s=function(e,t){return t};return{mapStateToProps:function(e,t){var o,i,n=e.editorAPI,a=e.state,r=e.dsRead,s=t.focusedContainer||u(a),l=t.tabsDef||f(s,r,a,n.components.getDisplayName);return{focusedContainer:s,containerLayout:n.components.layout.getRelativeToScreen(s),previewPosition:d(a),componentUIColor:(o=n,i=s,o.components.isShowOnAllPages(i)||o.components.isShowOnSomePages(i)?p.COMPONENT_UI_COLORS.ORANGE:p.COMPONENT_UI_COLORS.BLUE),isShowOnFixedPosition:n.components.layout.isShowOnFixedPosition([s]),modesAvailableInView:n.components.modes.getComponentModesAvailableInView(s),modes:n.components.modes.getModes(s),tabsDef:l,activeModeIds:n.components.modes.getComponentActiveModeIds(s),hasOpacity:y(n,g(a),m(a),s)}},mapDispatchToProps:function(e,t){var o=e(r),i=e(s),n=t.focusedContainer||u(i());return{selectFocusedContainer:function(){o.selection.selectComponentByCompRef(n)},activateComponentMode:o.components.modes.activateComponentMode,deactivateComponentMode:o.components.modes.deactivateComponentMode,closePanelByName:o.panelManager.closePanelByName,selectComponentByCompRef:o.selection.selectComponentByCompRef,biError:o.dsActions.bi.error,refreshNavControlsSize:o.refreshNavControlsSize,onNext:function(){return a.moveNextSlide(o,n)},onPrev:function(){return a.movePrevSlide(o,n)},onSelectIndex:function(e){return a.changeState(o,n,e)}}}}}),define("rEditor/rootComps/selectionBox/controllers/tab.rt",["react","lodash","util"],function(e,t,o){"use strict";return function(){return e.createElement("label",{className:"label-controller tab "+this.props.tabClass+" "+t({active:this.props.tab.active}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onClick:function(){this.props.onTabClick(this.props.tab)}.bind(this)},e.createElement("div",{className:"label"},"\n        ",this.getTabLabel(),"\n    "),e.createElement("div",{className:"action",key:this.props.tabsAnimationText},"\n        ",o.translate(this.props.tabsAnimationText),"\n    "))}}),define("rEditor/rootComps/selectionBox/controllers/tab",["lodash","create-react-class","prop-types","util","rEditor/rootComps/selectionBox/controllers/tab.rt"],function(e,t,o,i,n){"use strict";return t({displayName:"selectionBoxTab",propTypes:{tab:o.oneOfType([o.shape({modeId:o.string.isRequired,label:o.string.isRequired,active:o.bool.isRequired}),o.shape({id:o.string.isRequired,label:o.string.isRequired,active:o.bool.isRequired})]).isRequired,onTabClick:o.func.isRequired,translate:o.bool,tabClass:o.string.isRequired,tabsAnimationText:o.string},getTabLabel:function(){return this.props.translate?i.translate(this.props.tab.label):this.props.tab.label},render:n})}),define("rEditor/rootComps/selectionBox/controllers/tabsController.rt",["react","lodash","rEditor/rootComps/selectionBox/controllers/tab","uiAnimations"],function(o,e,i,n){"use strict";return function(){return o.createElement.apply(this,["div",{className:this.getTabControllerClasses()},e.map(this.props.tabs,function(e,t){return o.createElement(n.tabIndicationAnimation,{selectors:{label:".label",action:".action"},key:t+"-"+e.id,direction:this.props.isPositionTop?1:-1,immediatePlay:this.state.tabsAnimationStatus[t]},o.createElement(i,{tab:e,tabClass:this.tabIndexClass(t),translate:this.props.translate,onTabClick:this.props.onTabClick,tabsAnimationText:this.state.tabsAnimationText}))}.bind(this))])}}),define("rEditor/rootComps/selectionBox/controllers/tabsController",["lodash","constants","create-react-class","prop-types","rEditor/rootComps/selectionBox/controllers/tabsController.rt"],function(t,o,e,i,n){"use strict";function a(e){if(!e.tabIndicationState)return{tabsAnimationStatus:t.times(e.tabs.length,t.constant(!1)),tabsAnimationText:""};switch(e.tabIndicationState.indication){case"DELETE":return{tabsAnimationStatus:t.map(e.tabs,"active"),tabsAnimationText:"HOVER_BOX_NAVBAR_INDICATION_DELETED"};case"APPLY":return e.tabIndicationState.activeMode?{tabsAnimationStatus:t.map(e.tabs,"active"),tabsAnimationText:"HOVER_BOX_NAVBAR_INDICATION_APPLIED"}:{tabsAnimationStatus:t(e.tabs).map("active").map(t.negate(t.identity)).value(),tabsAnimationText:"HOVER_BOX_NAVBAR_INDICATION_APPLIED"};case"ADD":return e.tabIndicationState.activeMode?{tabsAnimationStatus:t.map(e.tabs,"active"),tabsAnimationText:"HOVER_BOX_NAVBAR_INDICATION_ATTACHED"}:{tabsAnimationStatus:t.times(e.tabs.length,t.constant(!0)),tabsAnimationText:"HOVER_BOX_NAVBAR_INDICATION_ATTACHED"};default:return{tabsAnimationStatus:t.times(e.tabs.length,t.constant(!1))}}}return e({displayName:"tabsController",propTypes:{tabs:i.oneOfType([i.arrayOf(i.shape({modeId:i.string,label:i.string.isRequired,active:i.bool.isRequired})),i.arrayOf(i.shape({id:i.string,label:i.string.isRequired,active:i.bool.isRequired}))]).isRequired,translate:i.bool,tabIndicationState:i.shape({indication:i.string,activeMode:i.bool}),type:i.string.isRequired,onTabClick:i.func.isRequired,isPositionTop:i.bool.isRequired,componentUIColor:i.oneOf(t.values(o.COMPONENT_UI_COLORS))},getInitialState:function(){return a(this.props)},componentWillReceiveProps:function(e){this.setState(a(e))},getReversedTabs:function(){return t(this.props.tabs).cloneDeep().reverse()},getTabControllerClasses:function(){var e=t({"tabs-controller":!0,"components-ui-color-orange":this.props.componentUIColor===o.COMPONENT_UI_COLORS.ORANGE}).pickBy().keys().value();return(this.props.className||"")+" "+e.join(" ")},tabIndexClass:function(e){return 1===this.props.tabs.length?"left-most-tab right-most-tab":e===this.props.tabs.length-1?"right-most-tab":0===e?"left-most-tab":""},render:n})}),define("rEditor/rootComps/selectionBox/controllers/paginationController.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",{className:this.getPaginationControllerClasses()},e.createElement("span",{className:"arrow prev-arrow",onClick:this.props.onPrev}),e.createElement("span",{className:"middle-label",onClick:this.props.selectFocusedContainer},this.getLabel()),e.createElement("span",{className:"arrow next-arrow",onClick:this.props.onNext}))}}),define("rEditor/rootComps/selectionBox/controllers/paginationController",["create-react-class","prop-types","lodash","constants","util","rEditor/rootComps/selectionBox/controllers/paginationController.rt"],function(e,t,o,i,n,a){"use strict";return e({displayName:"paginationController",render:a,mixins:[n.translationMixin],propTypes:{label:t.string.isRequired,labelParams:t.object.isRequired,onNext:t.func.isRequired,onPrev:t.func.isRequired,selectFocusedContainer:t.func.isRequired,componentUIColor:t.oneOf(o.values(i.COMPONENT_UI_COLORS))},getLabel:function(){return this.translateTemplate(this.props.label,this.props.labelParams)},getPaginationControllerClasses:function(){var e=o({"pagination-controller":!0,"components-ui-color-orange":this.props.componentUIColor===i.COMPONENT_UI_COLORS.ORANGE}).pickBy().keys().value();return(this.props.className||"")+" "+e.join(" ")}})}),define("rEditor/rootComps/selectionBox/controllers/dropDownController.rt",["react","lodash","util","baseUI","baseUILib"],function(o,e,t,i,n){"use strict";return function(){return o.createElement("div",{className:this.getDropDownControllerClasses()},o.createElement("span",{className:"controller-label"},this.props.label),o.createElement.apply(this,[n.DropDown,{skin:"dark",value:this.getValue(),onChange:this.props.onSelect,shouldTranslate:!1,openOnSelected:!1,optionsContainerClassName:"controller-options"},e.map(this.props.options,function(e,t){return o.createElement(n.DropDownOption,{value:e.id,label:e.label,shouldTranslate:!1})}.bind(this))]))}}),define("rEditor/rootComps/selectionBox/controllers/dropDownController",["create-react-class","prop-types","lodash","constants","util","rEditor/rootComps/selectionBox/controllers/dropDownController.rt"],function(e,t,o,i,n,a){"use strict";return e({displayName:"dropDownController",render:a,mixins:[n.translationMixin],propTypes:{options:t.arrayOf(t.shape({id:t.oneOfType([t.string,t.number]),label:t.string.isRequired,active:t.bool.isRequired})).isRequired,shouldTranslate:t.bool,label:t.string.isRequired,onSelect:t.func.isRequired,componentUIColor:t.oneOf(o.values(i.COMPONENT_UI_COLORS))},getDropDownControllerClasses:function(){return this.props.className+" dropdown-controller"},getValue:function(){return(o.find(this.props.options,{active:!0})||o.head(this.props.options)).id}})}),define("rEditor/rootComps/selectionBox/navControls.rt",["react","lodash","rEditor/rootComps/selectionBox/controllers/tabsController","rEditor/rootComps/selectionBox/controllers/paginationController","rEditor/rootComps/selectionBox/controllers/dropDownController","constants"],function(t,i,o,n,a,r){"use strict";return function(){function e(e,t){var o=i.assign({},e,t);return e.hasOwnProperty("style")&&(o.style=i.defaults(o.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(o.className=t.className+" "+e.className),o}return t.createElement("div",{onMouseDown:this.stopEventPropagation,onMouseUp:this.stopEventPropagation,onDoubleClick:this.stopEventPropagation,onContextMenu:this.stopEventPropagation,onMouseMove:this.stopEventPropagation,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,style:this.getCalculatedStyle(),className:"nav-controls "+this.getPositionClass()},this.props.content.type===r.UI.NAVIGATION_TYPES.TABS?t.createElement(o,e({key:"tabsController",onTabClick:this.props.onTabClick,className:this.getPositionClass(),isPositionTop:this.isPositionTop(),componentUIColor:this.props.componentUIColor,tabIndicationState:this.props.tabIndicationState},this.props.content)):null,this.props.content.type===r.UI.NAVIGATION_TYPES.DROPDOWN?t.createElement(a,e({key:"dropDownController",className:this.getPositionClass(),isPositionTop:this.isPositionTop(),componentUIColor:this.props.componentUIColor,onSelect:this.props.onSelectIndex},this.props.content)):null,this.props.content.type===r.UI.NAVIGATION_TYPES.PAGINATION?t.createElement(n,e({key:"paginationController",componentUIColor:this.props.componentUIColor,selectFocusedContainer:this.props.selectFocusedContainer,onNext:this.props.onNext,onPrev:this.props.onPrev,biError:this.props.biError,className:this.getPositionClass()},this.props.content)):null)}}),define("rEditor/rootComps/selectionBox/navControls",["create-react-class","prop-types","lodash","constants","rEditor/rootComps/selectionBox/navControls.rt"],function(e,t,o,i,n){"use strict";return e({displayName:"navControls",propTypes:{content:t.object.isRequired,componentUIColor:t.oneOf(o.values(i.COMPONENT_UI_COLORS)),style:t.object,selectFocusedContainer:t.func,onTabClick:t.func,onMouseEnterControls:t.func,onMouseLeaveControls:t.func,onNext:t.func.isRequired,onPrev:t.func.isRequired},onMouseEnter:function(){o.isFunction(this.props.onMouseEnterControls)&&this.props.onMouseEnterControls()},onMouseLeave:function(){o.isFunction(this.props.onMouseLeaveControls)&&this.props.onMouseLeaveControls()},stopEventPropagation:function(e){e.stopPropagation()},getPositionClass:function(){return this.isPositionTop()?"comp-top":"comp-bottom"},isPositionTop:function(){return o.get(this.props,"style.top")!==i.UI.NAVIGATION_CONTROLS_POS.BOTTOM},getCalculatedStyle:function(){return{marginLeft:this.props.style&&this.props.style.left||0}},render:n})}),define("rEditor/rootComps/selectionBox/focusBox.rt",["react","lodash","rEditor/rootComps/selectionBox/navControls"],function(e,t,o){"use strict";return function(){return e.createElement("div",{className:t(this.getFocusBoxClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),style:this.getFocusBoxStyle()},e.createElement(o,{ref:"navControls",style:this.props.navControlsStyle,content:this.getNavControlsContent(),biError:this.props.biError,componentUIColor:this.props.componentUIColor,isShowOnSomePages:this.props.isShowOnSomePages,selectFocusedContainer:this.props.selectFocusedContainer,onTabClick:this.getTabClickHandler(),onNext:this.props.onNext,onPrev:this.props.onPrev,onSelectIndex:this.props.onSelectIndex,onMouseEnterControls:this.onMouseEnterControls,onMouseLeaveControls:this.onMouseLeaveControls,tabIndicationState:this.props.tabIndicationState}),e.createElement("div",{className:"focus-frame"}))}}),define("rEditor/rootComps/selectionBox/focusBox",["create-react-class","prop-types","reactDOM","lodash","constants","util","coreUtilsLib","rEditor/rootComps/selectionBox/selectionBoxCommons","experiment","rEditor/rootComps/selectionBox/focusBoxMapper","rEditor/rootComps/selectionBox/focusBox.rt"],function(e,t,o,i,n,a,r,s,l,c,p){"use strict";var d=e({displayName:"focusBox",propTypes:{tabIndicationState:t.object.isRequired,navControlsStyle:t.object.isRequired,componentUIColor:t.oneOf(i.values(n.COMPONENT_UI_COLORS)),isShowOnFixedPosition:t.bool.isRequired,hasOpacity:t.bool.isRequired,focusedContainer:t.object.isRequired,containerLayout:t.object.isRequired,previewPosition:t.object.isRequired,modes:t.array,tabsDef:t.object,activeModeIds:t.object.isRequired,activateComponentMode:t.func.isRequired,closePanelByName:t.func.isRequired,selectFocusedContainer:t.func.isRequired,selectComponentByCompRef:t.func.isRequired,selectedComponents:t.oneOfType([t.object,t.arrayOf(t.object)]).isRequired,biError:t.func.isRequired,deactivateComponentMode:t.func.isRequired,refreshNavControlsSize:t.func.isRequired,modesAvailableInView:t.arrayOf(t.object),onNext:t.func.isRequired,onPrev:t.func.isRequired},getInitialState:function(){return{mouseOverNavControls:!1}},componentDidMount:function(){this.props.refreshNavControlsSize(this.getNavControlsSize())},componentDidUpdate:function(){this.props.refreshNavControlsSize(this.getNavControlsSize())},componentWillUnmount:function(){this.props.refreshNavControlsSize(!1)},getFocusedContainerLayout:function(){return s.getBoundingStyle(this.props.isShowOnFixedPosition,this.props.containerLayout,[this.props.focusedContainer],0)},getFocusBoxClasses:function(){return{focusbox:!0,"components-ui-color-orange":this.props.componentUIColor===n.COMPONENT_UI_COLORS.ORANGE,"with-opacity":this.props.hasOpacity}},getFocusBoxStyle:function(){var e=this.getFocusedContainerLayout();return"fixed"===e.position&&(e.top+=this.props.previewPosition.top,e.left+=this.props.previewPosition.left),e},getNavControlsSize:function(){if(this.refs.navControls){var e=r.domMeasurements.getBoundingRect(o.findDOMNode(this.refs.navControls));return i.pick(e,["width","height"])}return!1},onMouseEnterControls:function(){this.state.mouseOverNavControls||this.setState({mouseOverNavControls:!0})},onMouseLeaveControls:function(){this.state.mouseOverNavControls&&this.setState({mouseOverNavControls:!1})},getNavControlsContent:function(){return this.componentHaveModes()?this.getModesTabsContent():this.props.tabsDef},getTabClickHandler:function(){return this.componentHaveModes()?this.handleModeTabClick:this.props.selectFocusedContainer},getModesTabsContent:function(){return{type:n.UI.NAVIGATION_TYPES.TABS,tabs:this.createModeTabs(),translate:!0}},createModeTabs:function(){return i.map(this.props.modesAvailableInView,i.partial(u,this.props.activeModeIds))},handleModeTabClick:function(e){if(this.props.activeModeIds[e.modeId])this.props.selectComponentByCompRef(this.props.focusedContainer),l.isOpen("applicativeModes")&&this.props.deactivateComponentMode(this.props.focusedContainer,e.modeId);else{this.props.activateComponentMode(this.props.focusedContainer,e.modeId);var t=i.head(i.filter(this.props.modes,{type:"DEFAULT"}));t&&t.modeId===e.modeId&&(o=this.props.closePanelByName,i.forEach(["compPanels.dynamicPanels.animationPanel"],o))}var o},componentHaveModes:function(){return!i.isEmpty(this.props.modes)},render:p});function u(e,t){var o=void 0;switch(t.type){case"DEFAULT":o="HOVER_BOX_STATE_REGULAR";break;case"HOVER":o="HOVER_BOX_STATE_HOVER";break;case"SCROLL":o="scroll > "+t.params.scrollPos;break;case"WIDTH":o="width > "+t.params.width;break;default:o=t.label||"unknown-mode"}return i.assign({},t,{active:!!e[t.modeId],label:o})}var g=a.hoc.connect(a.hoc.STORES.EDITOR_API,c.mapStateToProps,c.mapDispatchToProps)(d);return g.pure=d,g}),define("rEditor/utils/mouseMoveActions/closeGaps",["lodash","stateManagement","coreBi","constants"],function(r,e,o,t){"use strict";var s=e.editorPlugins.domMeasurements.selectors.translateToViewerCoordinates,a=void 0,l=void 0,c=void 0,p=void 0,d=void 0,u=void 0,g=void 0;return{start:function(e,t){l=e,a=t.comps,c=l.components.is.page(a);var o=l.siteSegments.getGaps();u=o[p=c?"headerToPagesGap":"pagesToFooterGap"]||0;var i=l.store.getState(),n=s(i,t.evt);g=n.pageY},on:function(e){var t=l.store.getState(),o=s(t,e),i=g-o.pageY,n=r.max([0,u-i]),a=r.set({},p,n);d=n,l.siteSegments.updateGaps(a)},end:function(e){var t=l.store.getState();s(t,e).pageY<g&&(l.bi.event(o.events.editBox.DRAG_GAP,{gap_type:p,gap_size_start:u,gap_size_end:d}),l.history.add("gap updated"))},type:t.MOUSE_ACTION_TYPES.CLOSE_GAPS}}),define("rEditor/utils/mouseMoveActions/baseResize",["lodash","core","coreBi","constants","stateManagement","platformEvents","util"],function(c,a,e,t,o,r,i){"use strict";var s=i.array.isMultiselect,l=o.editorPlugins.selection.selectors.getSelectedCompRestrictions,p=a.utils.SnapToHandler,d=a.utils.layoutTransitionsUtil,u=void 0,g=void 0,m=void 0,f=void 0,h=void 0,y=void 0,b=void 0,v=void 0,S=void 0,E=void 0,P=a.utils.DragConstraintsHandler,C=[],T=void 0,_=void 0,n=void 0,I={"wysiwyg.viewer.components.PopupContainer":function(e){var t=S.components.properties.get(u);return c.assign({},e,{symmetry:{horizontal:"center"===t.horizontalAlignment,vertical:"center"===t.verticalAlignment}})}},M={right:{right:!0},left:{left:!0},top:{top:!0},bottom:{bottom:!0},topRight:{top:!0,right:!0},topLeft:{top:!0,left:!0},bottomRight:{bottom:!0,right:!0},bottomLeft:{bottom:!0,left:!0}},A={right:{x:1,y:0},left:{x:-1,y:0},top:{x:0,y:-1},bottom:{x:0,y:1},topRight:{x:1,y:-1},topLeft:{x:-1,y:-1},bottomRight:{x:1,y:1},bottomLeft:{x:-1,y:1}},O=i.keyboardShortcuts.CONTEXTS.RESIZE,R={esc:function(){S.mouseActions.turnOffMouseEvents(),k()?S.components.layout.updateRelativeToScreenAndPreserveProportions(u,_,E):S.components.layout.updateRelativeToScreen(u,_,!0),w(),S.bi.event(e.events.shortcuts.esc_during_action,{action:t.MOUSE_ACTION_TYPES.RESIZE})}};i.keyboardShortcuts.registerContext(O,R);var w=function(){n&&(i.keyboardShortcuts.setContext(n),n=null,i.fedopsLogger.interactionEnded(i.fedopsLogger.INTERACTIONS.SET_RESIZE_SHORTCUT_CONTEXT))};function D(e){return{x:e.pageX,y:e.pageY}}function k(){var e,t,o,i,n=S.components.is.overrideProportionalResize(u);return!0===n||!1===n?(e=n,t=S.store.getState(),o=c.pick(M,["topRight","topLeft","bottomRight","bottomLeft"]),i=c.includes(o,y),(l(t).resizeOnlyProportionally||!m)&&i&&e):(m||S.components.is.group(u)||s(u))&&S.components.is.proportionallyResizable(u)}function x(e){var t=D(e),o=A[f];_=S.components.layout.getRelativeToScreen(u);var i,n,a=S.components.getType(u);b=k(),n=a,c.has(I,n)&&(i=_,_=I[a](i)),T=function(e){if(S.components.is.repeaterItem(u)){var t=S.components.getContainer(u),o=S.components.layout.get(t),i=S.components.getChildren(t),n=c.findIndex(i,u[0]);if("right"===f||"left"===f){var a=Math.floor(o.width/e.width),r=(n+1)%a;return 0===r?a:r}if("bottom"===f||"top"===f){var s=Math.floor(o.height/e.height),l=(n+1)%s;return 0===l?s:l}}return 1}(_),g=new d.Resize(_,t,o,b,T),E=S.components.layout.getProportionStructure(u,o)}var N={start:function(e,t){u=(S=e).components.getComponentsWhichDontHaveAncestorsInTheArray(t.comps),v=S.dsRead.pages.isWidgetPage(S.pages.getFocusedPageId());var o,i=c.map(u,"id");S.dsActions.renderPlugins.setCompsToShowOnTop(i),S.dsActions.renderPlugins.setCompsToShowWithOpacity(i,.9),m=t.evt.shiftKey,f=t.directionName,h=new p(S,t.comps),o=t.directionName,y=M[o],C=c.map(u,function(e){return new P(S,e)}),c.forEach(C,function(e){e.highlightDragConstraints()}),x(t.evt);var n=S.components.get.byId(i[0]);S.dsActions.platform.notifyAppsOnCustomEvent(r.factory.componentResizeStarted({compRef:n}))},on:function(e){var t=D(e),n=e.altKey;m!==e.shiftKey&&(m=e.shiftKey,x(e));var o=g.getLayout(t);S.getViewTools().snapToEnabled&&0===o.rotationInDegrees&&(o=function(e,t){var o=h.getClosestLayoutDistance(S,e,y),i=Math.abs(o.x)<5,n=Math.abs(o.y)<5;if(i&&(y.right?(k()&&e.height&&(e.height+=o.x),e.width+=o.x):y.left&&(k()&&e.height&&(e.height-=o.x),e.x+=o.x,e.width-=o.x)),n&&(y.top?(k()&&e.width&&(e.width-=o.y),e.y+=o.y,e.height-=o.y):y.bottom&&(k()&&e.width&&(e.width+=o.y),e.height+=o.y)),!t){var a=h.getSimilarSizeCandidates(S,e,y),r=a.potentialSimilarHeightCandidate,s=a.potentialSimilarWidthCandidate;r&&(y.top&&(e.y+=e.height-r.layout.height),e.height=r.layout.height),s&&(y.left&&(e.x+=e.width-s.layout.width),e.width=s.layout.width)}return e}(o,n));var i=S.components.layout.getRelativeToScreen(u);o=a.utils.updateLayoutUtil.getLayoutRelativeToScreenAfterConstraints(S,u[0],o,i),b?S.components.layout.updateRelativeToScreenAndPreserveProportions(u,o,E):S.components.layout.updateRelativeToScreen(u,o,!0),S.dsActions.waitForChangesApplied(function(){if(h){var e=S.components.layout.getRelativeToScreen(u);n?function(e){if(y.right)e.width-=e.width%5;else if(y.left){var t=e.x%5;e.x-=t,e.width+=t}if(y.top){var o=e.y%5;e.y-=o,e.height+=o}else y.bottom&&(e.height-=e.height%5)}(e):S.getViewTools().snapToEnabled&&0===e.rotationInDegrees&&(t=e,o=n,i=h.getSnapData(t,y,v,void 0,"RESIZE",o),S.snapData.set(i))}var t,o,i})},end:function(){if(h=null,S.snapData.clear(),S.dsActions.renderPlugins.setCompsToShowOnTop(null),S.dsActions.renderPlugins.setCompsToShowWithOpacity(null),S.history.add("Resize component"),c.forEach(C,function(e){e.removeHighlightDragConstraints()}),C=[],S.components.layout.isPinned(u)){var e=S.components.layout.getDock(u),t=i.pinModeUtils.getDockedDirection(e),o=S.components.layout.get(u);i.pinModeUtils.checkSizeRestrictions(t,o)&&S.panelHelpers.openPinModeSizeRestrictionPanel({state:"on resize",title:"Notification_Box_PinToScreen_ElementTooLarge_postPin_Title",content:"Notification_Box_PinToScreen_ElementTooLarge_postPin_Message"})}},type:t.MOUSE_ACTION_TYPES.RESIZE};return c.merge(N,{setContext:function(){n||(n=i.keyboardShortcuts.getContext(),i.keyboardShortcuts.setContext(O),i.fedopsLogger.interactionStarted(i.fedopsLogger.INTERACTIONS.SET_RESIZE_SHORTCUT_CONTEXT))},unsetContext:w}),N}),define("rEditor/utils/mouseMoveActions/pageResize",["lodash","coreBi","core","constants"],function(n,e,t,a){"use strict";var i=t.utils.SnapToHandler,r=void 0,s=void 0,l=void 0,c=void 0,p=void 0,d=void 0,u=void 0,g=void 0,m={top:!0};function f(e){return{x:e.pageX,y:e.pageY}}function o(){r.history.add("Resize page")}return{start:function(e,t){var o=(r=e).dsRead.pages.getPrimaryPageId();s=f(t.evt),p=r.dsRead.pages.getReference(o),g=new i(r,p),u=r.pages.getPageBottomByComponents(p.id),l=r.components.layout.get(p).height},on:function(e){var t,o,i=f(e).y-s.y;c=Math.max((t=l+i,o=r.isMobileEditor()?a.CONSTRAINS.PAGE_MIN_HEIGHT.MOBILE:a.CONSTRAINS.PAGE_MIN_HEIGHT.DESKTOP,Math.max(t,o)),u),r.pages.properties.update(p,{minHeight:c}),r.dsActions.waitForChangesApplied(function(){if(g){var e=r.components.layout.getRelativeToScreen(p);!function(e){if(g){var t=g.getClosestLayoutDistance(r,e.bounding,m);Math.abs(t.x)<5&&(e.x+=t.x,e.bounding.x+=t.x),Math.abs(t.y)<5&&(e.y+=t.y,e.bounding.y+=t.y)}}(e),t=r,o=e,i=g.getSnapData(o,{top:!0,bottom:!0},!0),t.snapData.set(i)}var t,o,i}),d=!n.isEqual(c,l)},end:function(){d&&(o(),r.bi.event(e.events.pageResize.PAGE_MIN_HEIGHT_RESIZE,{yCoordinate_new:c,yCoordinate_old:l}),d=!1),r.snapData.clear(),g=null},reset:function(){r.pages.properties.update(p,{minHeight:null}),o()},type:a.MOUSE_ACTION_TYPES.RESIZE_PAGE}}),define("rEditor/utils/mouseMoveActions/pushingComponentSnapper",["lodash","core"],function(a,e){"use strict";var i=e.utils.SnapToHandler,s=void 0,l=void 0;var r=function(e,t,o){var i=e.width?e.width:t,n=e.x,a=n+i,r=o.x,s=r+o.width,l=!1;return n<=r&&r<=a?l=!0:n<=s&&s<=a?l=!0:r<=n&&n<=s?l=!0:r<=a&&a<=s&&(l=!0),l};return{init:function(e,t,o){s=o,l=new i(e,t)},snapIfPossible:function(e,t,o){var i=a(r).negate().partial(t,o).value(),n=l.getClosestLayoutDistance(e,t,s,i);Math.abs(n.y)<5&&(s.top&&s.bottom?(t.y+=n.y,t.height-=n.y):s.bottom&&(t.height+=n.y))},waitForChangesAppliedAndDrawSnapLines:function(n,a,r){n.waitForChangesApplied(function(){if(l){var e=n.getRelativeToScreen(r);n.snapToEnabled&&0===a.rotationInDegrees&&(t=n.snapDataSetter,o=e,i=l.getSnapData(o,s,!0),t(i))}var t,o,i})},clear:function(e){s=l=null,e.snapData.clear()}}}),define("rEditor/utils/mouseMoveActions/baseResizeAndPush",["lodash","core","stateManagement","experiment","constants","rEditor/utils/mouseMoveActions/pushingComponentSnapper","helpIds","util"],function(r,e,a,s,t,l,c,o){"use strict";var p=o.headerScrollTypes,i=a.editorPlugins.domMeasurements.selectors.translateToViewerCoordinates,d=e.utils.layoutTransitionsUtil,u=void 0,g=void 0,m=void 0;function f(e){var t=g.store.getState(),o=i(t,e);return{x:o.pageX,y:o.pageY}}function h(e,t){return n=t,("SITE_FOOTER"===e.id&&n.fixedPosition||(i=t,"SITE_HEADER"===(o=e).id&&"freezes"===p.getSelectedHeaderType(i,g.components.behaviors.get(o),g.viewMode.get()).value.scrollType))&&200<t.height;var o,i,n}return{start:function(e,t){g=e,u=t.comps,l.init(g,u,{bottom:!0}),g.selection.setIsMouseUpSelectionEnabled(!1);var o=r.map(u,"id");g.dsActions.renderPlugins.setCompsToShowOnTop(o),s.isOpen("se_continuous_actions")&&g.components.layout.continuousUpdateAndAdjustLayout.start();var i=f(t.evt),n=g.components.layout.getRelativeToScreen(u);m=new d.Resize(n,i,{x:0,y:1},!1)},on:function(e){var t=f(e),o=m.getLayout(t),i=g.components.layout.getMinDimensions(u);o.bounding=g.utils.getBoundingLayout(o);var n=g.components.layout.getRelativeToScreen(u).width;l.snapIfPossible(g,o,n),o.height>=i.height&&(s.isOpen("se_continuous_actions")?g.components.layout.continuousUpdateAndAdjustLayout.on(u,r.pick(o,["height","width"]),!0):g.components.layout.updateRelativeToScreenAndAdjustLayout(u,r.pick(o,["height","width"]),!0));var a={waitForChangesApplied:g.dsActions.waitForChangesApplied,getRelativeToScreen:g.components.layout.getRelativeToScreen,snapToEnabled:g.getViewTools().snapToEnabled,snapDataSetter:g.snapData.set};l.waitForChangesAppliedAndDrawSnapLines(a,o,u)},end:function(){if("old"!==s.getValue("se_notificationCenter")){var e=u[0],t=g.components.layout.get(e),o=g.components.getType(e);if(h(e,t)){var i="wysiwyg.viewer.components.FooterContainer"===o?c.NOTIFICATIONS.FROZEN_FOOTER:c.NOTIFICATIONS.FROZEN_HEADER,n="wysiwyg.viewer.components.FooterContainer"===o?"Notifications_Frozen_Footer_Text":"Notifications_Frozen_Header_Text";g.store.dispatch(a.editorPlugins.notifications.actions.showUserActionNotification({message:n,title:n,type:"warning",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){g.panelManager.openHelpCenter(i)}}}))}}s.isOpen("se_continuous_actions")&&g.components.layout.continuousUpdateAndAdjustLayout.end(),l.clear(g),g.dsActions.renderPlugins.setCompsToShowOnTop(null),g.history.add("Resize component")},type:t.MOUSE_ACTION_TYPES.RESIZE_PUSH}}),define("rEditor/utils/mouseMoveActions/baseRotate",["lodash","core","coreBi","stateManagement","platformEvents","constants","util"],function(l,e,o,t,i,n,a){"use strict";var c=t.editorPlugins.domMeasurements.selectors.getPreviewPosition,p=e.utils.layoutTransitionsUtil,d=t.editorPlugins.domMeasurements.selectors.translateToViewerCoordinates,u=!1,g=void 0,m=void 0,f=void 0,h=void 0,y=void 0,r=void 0,s=3,b=90,v=15,S=a.keyboardShortcuts.CONTEXTS.ROTATE,E={esc:function(){h.mouseActions.turnOffMouseEvents();for(var e=0;e<f.length;e++)h.components.layout.updateRelativeToScreen(f,y,!0);P(),h.bi.event(o.events.shortcuts.esc_during_action,{action:n.MOUSE_ACTION_TYPES.ROTATE})}};a.keyboardShortcuts.registerContext(S,E);var P=function(){r&&(a.keyboardShortcuts.setContext(r),r=null,a.fedopsLogger.interactionEnded(a.fedopsLogger.INTERACTIONS.SET_ROTATE_SHORTCUT_CONTEXT))};function C(e){!function(e){e.rotationInDegrees<0&&(e.rotationInDegrees+=360);var t=e.rotationInDegrees%b;t<=s?e.rotationInDegrees-=t:b-s<=t&&(e.rotationInDegrees+=b-t)}(e),h.components.layout.updateRelativeToScreen(f,e,!0)}var T={start:function(e,t){f=t.comps,(h=e).selection.setIsMouseUpSelectionEnabled(!1);var o=h.store.getState(),i=l.map(f,"id");h.dsActions.renderPlugins.setCompsToShowOnTop(i),y=h.components.layout.getRelativeToScreen(f);var n=c(o),a=l.defaults({y:y.y+n.top,x:y.x+n.left},y),r=d(o,t.evt),s={x:r.pageX,y:r.pageY};m=new p.Rotate(y,s,a)},on:function(e){var t,o,i,n,a=h.store.getState(),r=d(a,e),s={x:r.pageX,y:r.pageY},l=m.getLayout(s);e.shiftKey?(u||(g=h.components.layout.getRelativeToScreen(f).rotationInDegrees),t=l,o=Math.floor(g<0?g+360:g),i=Math.floor(t.rotationInDegrees<0?t.rotationInDegrees+360:t.rotationInDegrees)-o,n=Math.floor(i/v),t.rotationInDegrees=g+n*v,h.components.layout.updateRelativeToScreen(f,t,!0)):C(l),u=e.shiftKey},end:function(){var t=h.components.getType(f);h.dsActions.waitForChangesApplied(function(){var e=h.components.layout.get(f).rotationInDegrees;h.bi.event(o.events.editBox.ROTATE_COMPONENT,{value:parseInt(e,10),origin:"editBox",component_type:t})}),h.dsActions.renderPlugins.setCompsToShowOnTop(null),h.history.add("Rotate component"),h.dsActions.platform.notifyAppsOnCustomEvent(i.factory.componentRotateEnded({compRef:f[0]}))},type:n.MOUSE_ACTION_TYPES.ROTATE};return l.merge(T,{setContext:function(){r||(r=a.keyboardShortcuts.getContext(),a.keyboardShortcuts.setContext(S),a.fedopsLogger.interactionStarted(a.fedopsLogger.INTERACTIONS.SET_ROTATE_SHORTCUT_CONTEXT))},unsetContext:P}),T}),define("rEditor/utils/mouseMoveActions/dragUtils",["lodash"],function(i){"use strict";return{getCompToBeDragged:function(t,e){var o=t.components.is.controlledByParent;return i(e).map(function(e){return o(e)?t.utils.findAncestorMatchesCondition(e,i.negate(o)):e}).thru(t.components.getComponentsWhichDontHaveAncestorsInTheArray).value()}}}),define("rEditor/utils/mouseMoveActions/baseDragAndPush",["lodash","core","stateManagement","constants","rEditor/utils/mouseMoveActions/pushingComponentSnapper","rEditor/utils/mouseMoveActions/dragUtils"],function(l,e,t,o,c,p){"use strict";var d=e.utils.layoutTransitionsUtil,u=t.editorPlugins.domMeasurements.selectors.translateToViewerCoordinates,g=void 0,m=void 0,f=void 0,s=void 0,h=0,y=void 0;function b(e){var t=f.components.getContainer(m),o=f.components.layout.getRelativeToScreen(t),i=function(a){var e=f.components.getSiblings(m),t=l(e).map(function(e){return f.components.layout.getRelativeToScreen(e)}).filter(function(e){return t=a,i=(o=e).x+o.width<=t.x,n=o.x>=t.x+t.width,!(i||n)&&o.y+o.height<=t.y;var t,o,i,n}).value();if(0===t.length)return 0;var o=l.maxBy(t,function(e){return e.y+e.height});return o.y+o.height}(e);return Math.max(i,o.y)}return{start:function(e,t){f=e,m=p.getCompToBeDragged(f,t.comps),c.init(f,m,{top:!0,bottom:!0,centerY:!0}),y=t.onDragAndPushEnd;var o=l.map(m,"id");f.dsActions.renderPlugins.setCompsToShowOnTop(o);var i=l.omit(f.components.layout.getRelativeToScreen(m),"bounding"),n=l.map(m,function(e){return l.omit(f.components.layout.getRelativeToScreen(e),"bounding")});h=b(i);var a=f.store.getState(),r=u(a,t.evt),s={x:r.pageX,y:r.pageY};g=new d.Drag(i,s,n)},on:function(e){var t=f.store.getState(),o=u(t,e),i={x:o.pageX,y:o.pageY},n=g.getLayout(i);n.y=Math.max(n.y,h),c.snapIfPossible(f,n),s=g.getBoundComponentLayouts(n);for(var a=0;a<m.length;a++)f.components.layout.updateRelativeToScreenAndAdjustLayout(m[a],l.pick(s[a],"y"));var r={waitForChangesApplied:f.dsActions.waitForChangesApplied,getRelativeToScreen:f.components.layout.getRelativeToScreen,snapToEnabled:f.getViewTools().snapToEnabled,snapDataSetter:f.snapData.set};c.waitForChangesAppliedAndDrawSnapLines(r,n,m)},end:function(){if(s){for(var e=0;e<m.length;e++)f.components.layout.updateRelativeToScreen(m[e],l.pick(s[e],"y"));s=null}f.dsActions.waitForChangesApplied(function(){c.clear(f),f.dsActions.renderPlugins.setCompsToShowOnTop(null)}),l.isFunction(y)&&y()},type:o.MOUSE_ACTION_TYPES.DRAG_PUSH}}),define("rEditor/rootComps/selectionBox/applyModeFromClipboardSuggestion.rt",["react","lodash","util","santa-editor-symbols"],function(e,t,o,i){"use strict";return function(){return e.createElement("div",{className:"quick-tip",onMouseDown:this.onMouseDown,style:{padding:"6px"}},e.createElement("div",{className:"close-quick-tip",onClick:this.close},e.createElement("span",{},e.createElement(i.symbol,{name:"bubble-close"}))),e.createElement("div",{className:"quick-tip-image"},e.createElement(i.symbol,{name:"idea-bulb"})),e.createElement("div",{className:"text-container",style:{textAlign:"left"}},e.createElement("div",{className:"text"},"\n            ",o.translate(this.props.text),"\n        "),e.createElement("div",{className:"text link-action",onClick:this.onLinkClick},"\n\n            ",o.translate(this.props.linkActionText),"\n        ")))}}),define("rEditor/rootComps/selectionBox/applyModeFromClipboardSuggestion",["create-react-class","prop-types","core","rEditor/rootComps/selectionBox/applyModeFromClipboardSuggestion.rt"],function(e,t,o,i){"use strict";return e({displayName:"applyModeFromClipboardSuggestion",mixins:[o.mixins.editorAPIMixin],propTypes:{text:t.string.isRequired,linkActionText:t.string.isRequired},componentWillUnmount:function(){this.getEditorAPI().copyPaste.hideApplyModeFromClipboardSuggestion()},close:function(){this.getEditorAPI().copyPaste.hideApplyModeFromClipboardSuggestion()},onMouseDown:function(e){e.stopPropagation()},onLinkClick:function(e){e.preventDefault(),this.getEditorAPI().copyPaste.removePastedComponentAndApplyModeFromClipboard()},render:i})}),define("rEditor/utils/mouseMoveActions/baseDoubleClick",["lodash","constants","rEditor/rootComps/gfpp/gfppModel","platform"],function(a,r,s,l){"use strict";return{doubleClick:function(e,t){var o=e.components.getType(t.comp),i=e.pluginService.getPlugin(e.pluginService.pluginConstants.DOUBLE_CLICK,o);if(a.isFunction(i)&&!function(e,t){if(!t)return!1;var o=e.isMobileEditor()?"mobile":"desktop",i=l.constants.GFPP.mainActionNames,n=e.platform.controllers.getConnectedComponentStageData(t);return!!a.get(n,["gfpp",o,i.MAIN_ACTION1])}(e,t.comp[0]))i(e,t);else{var n=s.getComponentMainActionClick(e,t.comp);a.isFunction(n)&&n(e,t.comp,r.USER_ACTIONS.ORIGIN.DOUBLE_CLICK)}}}}),define("rEditor/rootComps/selectionBox/editBoxMapper",["lodash","constants","rEditor/utils/mouseMoveActions/baseDoubleClick","util","stateManagement","rEditor/rootComps/selectionBox/selectionBoxCommons"],function(J,$,a,ee,k,x){"use strict";var N=k.editorPlugins.components.selectors,e=k.editorPlugins.selection.selectors,L=e.getSelectedCompRestrictions,B=e.getFocusedContainer,F=e.getSelectedCompsRefs,U=e.getSelectedCompsDisplayName,r=k.editorPlugins.domMeasurements.selectors.getPreviewPosition,te={DESKTOP:{"wysiwyg.viewer.components.HeaderContainer":!0,"wysiwyg.viewer.components.FooterContainer":!0},MOBILE:{"wysiwyg.viewer.components.HeaderContainer":!0,"wysiwyg.viewer.components.SiteRegionContainer":!0,"wysiwyg.viewer.components.FooterContainer":!0}};function G(e,t,o){var i=e.components.layout.getRelativeToScreen(t),n=e.store.getState();if(o){var a=r(n);i.y+=a.top,i.bounding.y+=a.top,i.x+=a.left,i.bounding.x+=a.left}return i}function H(e,t){return e.components.isShowOnAllPages(t)||e.components.isShowOnSomePages(t)?$.COMPONENT_UI_COLORS.ORANGE:$.COMPONENT_UI_COLORS.BLUE}function V(t,e,o,i,n,a,r){var s,l,c,p,d,u,g,m,f,h,y,b,v,S,E,P,C,T,_,I,M,A=t.components.is.page(e),O=t.dsRead.components.layout.RESIZE_SIDES,R=J.difference(i.resizeableSides,i.disabledKnobs),w=t.components.layout.isPinned(e),D=!ee.array.isMultiselect(e)&&t.components.layout.getDock(e)||{},k=t.components.layout.isHorizontallyStretchedToScreen(e),x=i.canResizeDiagonally,N=i.resizeOnlyProportionally,L=t.components.is.group(e),B=(s=t.isMobileEditor(),l=a,c=s?te.MOBILE:te.DESKTOP,J.some(l,function(e){return c[e]})),F=J.includes(R,O.TOP)&&!B&&(w||i.verticallyResizable),U=J.includes(R,O.BOTTOM)&&!B&&(w||i.verticallyResizable),G=J.includes(R,O.LEFT)&&(w||i.horizontallyResizable),H=J.includes(R,O.RIGHT)&&(w||i.horizontallyResizable),V=!k&&(F&&G&&x||N&&!D.top&&!D.left),W=!k&&(F&&H&&x||N&&!D.top&&!D.right),z=!k&&(U&&G&&x||N&&!D.bottom&&!D.left),q=!k&&(U&&H&&x||N&&!D.bottom&&!D.right),j=t.siteSegments.getGaps(),Y="FooterContainer"===n,K=J.has(j,"pagesToFooterGap"),X=Y&&K,Z=A&&J.has(j,"headerToPagesGap"),Q=A&&J.some(e,function(e){return t.pages.popupPages.isPopup(e.id)});return{top:!r&&!L&&F,bottom:!r&&!L&&U,left:!r&&!L&&G,right:!r&&!L&&H,topLeft:V,topRight:W,bottomLeft:z,bottomRight:q,closeGaps:Z||X,dragAndPush:(S=t,E=e,P=o,C=i,T=S.components.layout.containsSiblingsOnly(E),_=S.components.layout.isPinned(E),I=S.components.is.repeaterItem(E)||S.components.is.descendantOfRepeaterItem(E),M=0!==P.rotationInDegrees,T&&C.verticallyMovable&&C.anchorableFrom&&!_&&!I&&!M),resizeOnlyProportionally:i.resizeOnlyProportionally,resizeAndPush:(p=t,d=e,u=o,g=i,m=J.some(d,function(e){var t=p.components.getType(e);return t===$.COMP_TYPES.POPUP_CONTAINER}),f=p.components.is.repeaterItem(d)||p.components.is.descendantOfRepeaterItem(d),h=0!==u.rotationInDegrees,y=ee.array.isMultiselect(d),b=p.components.is.group(d),v=p.components.layout.isPinned(d),!y&&g.verticallyResizable&&g.canResizeWithAnchors&&!g.resizeOnlyProportionally&&!v&&!m&&!b&&!f&&!h),rotate:i.rotatable&&!w,bottomPage:A&&!Q||Y&&!K}}return{mapStateToProps:function(e){var o,t,i,n,a=e.editorAPI,r=e.state,s=e.dsRead,l=k.editorPlugins.userPreferences.selectors,c=l.getSiteUserPreferences,p=l.getSessionUserPreferences,d=a.panelManager.openHelpCenter,u=B(r),g=F(r),m=a.components.layout.isShowOnFixedPosition(g),f=G(a,g,m),h=ee.array.isMultiselect(g),y=h?g:a.components.getChildren(g),b=x.getPosition(m),v=N.getCompTypeSuffix(g,s),S=J.map(g,function(e){return a.components.getType(e)}),E=a.components.data.get(J.head(g)),P=a.components.is.groupedComponent(g),C=x.getBoundingStyle(m,f,g,1),T=a.components.is.page(g),_=s.siteSegments.getPagesContainer(),I=s.siteSegments.getFooter(),M=s.siteSegments.getSiteStructure(),A=T?a.getCompRestrictions(_):L(r),O=!h&&("SITE_FOOTER"===g[0].id||"SITE_HEADER"===g[0].id||T),R=U(r),w=!!R&&!J.isEqual(u,g[0]),D=A.isControlledByParent&&a.getCompRestrictions(a.components.getContainer(g));return{getSiteUserPreferences:c,getSessionUserPreferences:p,comps:g,compType:v,compTypes:S,position:b,layout:f,subComps:y,isSiteSegmentComponent:O,focusedContainer:u,subCompLayouts:(i=a,n=y,n.reduce(function(e,t){var o=n&&i.components.layout.isShowOnFixedPosition(t);return e[t.id]=G(i,t,o),e},{})),isShowOnAllPages:a.components.isShowOnAllPages(g),componentUIColor:H(a,g),subComponentsUIColor:(o=a,t=y,t.reduce(function(e,t){return e[t.id]=H(o,t),e},{})),possibleLayoutActionsMap:A,relativeToStructureLayout:ee.layoutUtils.getLayoutRelativeToPrimaryContainer(a,g),isHorizontallyStretchedToScreen:a.components.layout.isHorizontallyStretchedToScreen(g),componentType:h?"multiselect":v,isGroupedComponent:P,areComponentsOfSamePage:a.components.areComponentsOfSamePage(g),compsWithoutSelectedAncestors:a.components.getComponentsWhichDontHaveAncestorsInTheArray(g),compsData:E,isMultiselect:h,isMobile:s.viewMode.get()===s.viewMode.VIEW_MODES.MOBILE,isMobileEditor:a.isMobileEditor(),boundingStyle:C,isShowOnFixedPosition:m,isCurrentPageLandingPage:a.isCurrentPageLandingPage(),pagesContainer:_,isPage:T,isDirectChildOfMasterPage:a.utils.isSameRef(a.components.getContainer(g),M),pagesContainerLayout:a.components.layout.getRelativeToScreen(_),footerLayout:a.components.layout.getRelativeToScreen(I),gaps:a.siteSegments.getGaps(),isUsingSectionsLayout:a.siteSegments.isUsingSectionsLayout(),canToggleShowOnAllPages:A.canToggleShowOnAllPages,isEditingText:a.text.isEditingText(),reAddedHiddenElement:a.mobile.hiddenComponents.getReAddedHiddenElement(),dimCompLabels:0<a.panelManager.getPanelsOfType($.PANEL_TYPES.COMP).length,isContainsSiblingsOnly:a.components.layout.containsSiblingsOnly(g),isDeveloperModeEnabled:a.developerMode.isEnabled(),compNickname:N.getNickname(g[0],s),compSecondaryNickname:N.getSecondaryNickname(g[0],a),compInnerNickname:N.getInnerNickname(g[0],a),siteSegmentsLabelsOffset:a.isMobileEditor()?0:a.siteSegments.getPagesContainerAbsLayout().x+2,compLinkValue:E&&ee.link.getLinkValueAsString(a,E.link),groupAncestorStyle:function(e,t,o,i,n){var a=!o&&i?x.findFirstContainerMatchingConditions(e,t,[e.components.is.group]):null;if(!a)return null;var r=e.components.layout.getRelativeToScreen(a);return x.getBoundingStyle(n,r,t,1)}(a,g,h,P,m),compDisplayName:R,shouldShowCompDisplayName:w,knobsMap:V(a,g,f,A,v,S,h),dimmedHandles:!1,openHelpCenter:d,getState:a.store.getState,draggable:D?(D.horizontallyMovable||D.verticallyMovable)&&!h:(A.horizontallyMovable||A.verticallyMovable)&&!h}},mapDispatchToProps:function(o){return{isSameRef:function(){return o(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t,o){var i;return(i=o.editorAPI.utils).isSameRef.apply(i,n)}}.apply(void 0,arguments))},registerMouseMoveAction:function(){return o(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t,o){var i;return(i=o.editorAPI.mouseActions).registerMouseMoveAction.apply(i,n)}}.apply(void 0,arguments))},biEvent:function(e,t){o(k.editorPlugins.bi.actions.event(e,t))},setIsMouseUpSelectionEnabled:function(){return o(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t,o){var i;return(i=o.editorAPI.selection).setIsMouseUpSelectionEnabled.apply(i,n)}}.apply(void 0,arguments))},updateLayout:function(){return o(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t,o){var i;return(i=o.editorAPI.components.layout).update.apply(i,n)}}.apply(void 0,arguments))},addToHistory:function(){return o(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t,o){var i;return(i=o.editorAPI.history).add.apply(i,n)}}.apply(void 0,arguments))},isMultiSelectKeyPressed:function(){return o(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t,o){var i;return(i=o.editorAPI.selection).isMultiSelectKeyPressed.apply(i,n)}}.apply(void 0,arguments))},doubleClick:function(){return o(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t,o){var i=o.editorAPI;return a.doubleClick.apply(a,[i].concat(n))}}.apply(void 0,arguments))},moveToFooter:function(){return o(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t,o){var i;return(i=o.editorAPI.components).moveToFooter.apply(i,n)}}.apply(void 0,arguments))},updateGaps:function(){return o(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t,o){var i;return(i=o.editorAPI.siteSegments).updateGaps.apply(i,n)}}.apply(void 0,arguments))},hideApplyModeFromClipboardSuggestion:function(){return o(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t,o){var i;return(i=o.editorAPI.copyPaste).hideApplyModeFromClipboardSuggestion.apply(i,n)}}.apply(void 0,arguments))},setRotateKnobRect:function(){return o(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t,o){var i=o.editorAPI;return i.setEditBoxRotateKnobRect.apply(i,n)}}.apply(void 0,arguments))},showUserActionNotification:function(){var e;return o((e=k.editorPlugins.notifications.actions).showUserActionNotification.apply(e,arguments))},setSessionUserPreferences:function(){var e;return o((e=k.editorPlugins.userPreferences.actions).setSessionUserPreferences.apply(e,arguments))}}}}}),define("rEditor/rootComps/selectionBox/groupSelectionFrame.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",{},this.props.groupAncestorStyle?e.createElement("div",{key:"markContainer",className:t({layout:!0,"secondary-component":!0}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),style:this.props.groupAncestorStyle}):null)}}),define("rEditor/rootComps/selectionBox/groupSelectionFrame",["create-react-class","prop-types","lodash","rEditor/rootComps/selectionBox/groupSelectionFrame.rt"],function(e,t,o,i){"use strict";return e({displayName:"groupSelectionFrame",PropTypes:{selectedComponents:t.oneOfType([t.object,t.arrayOf(t.object)]).isRequired,groupAncestorStyle:t.object},render:i})}),define("rEditor/rootComps/selectionBox/componentLabels.rt",["react","lodash","baseUI","constants"],function(e,t,o,i){"use strict";return function(){return e.createElement("span",{className:t(this.getContainerClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),style:this.props.labelInlineStyles},this.props.isPinnedToPage?e.createElement("span",{key:"pinModeIndicator",className:t(this.getPinSymbolContainerClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},e.createElement(o.symbol,{name:"pinModeIndicator",className:"symbol-pinModeIndicator"})):null,this.props.showComponentType&&this.props.componentType?e.createElement("span",{key:"componentTypeLabel",className:t(this.getComponentTypeLabelClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},this.props.componentType):null,this.props.showComponentNickname?e.createElement(o.tooltip,{value:"PLATFORM_CONNECTED_ELEMENT_SETTINGS_TOOLTIP",styleType:"normal",alignment:i.UI.TOOLTIP.ALIGNMENT.TOP,key:"componentNicknamesLabel",disabled:!this.props.shouldShowConnectionIndication,shouldTranslate:!0},e.createElement("span",{},this.props.componentNickname?e.createElement("span",{className:t(this.getComponentNicknameClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"componentNicknameLabel"},this.props.componentNickname):null,this.props.secondaryNickname?e.createElement("span",{className:t(this.getSecondaryNicknameClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"componentSecondaryNicknameLabel"},this.props.secondaryNickname):null,this.props.innerNickname?e.createElement("span",{className:t(this.getInnerNicknameClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"componentInnerNickNameLabel"},this.props.innerNickname):null)):null,this.props.infoText&&this.props.shouldShowConnectionIndication?e.createElement(o.infoIcon,{key:"infoIcon",className:"label-info-icon-container",text:this.props.infoText,symbolName:"connectedInfoIcon"}):null)}}),define("rEditor/rootComps/selectionBox/componentLabels",["lodash","constants","create-react-class","prop-types","rEditor/rootComps/selectionBox/componentLabels.rt"],function(e,t,o,i,n){"use strict";return o({displayName:"componentLabels",propTypes:{showComponentType:i.bool,showComponentNickname:i.bool,shouldShowConnectionIndication:i.bool,isLabelLarge:i.bool,isLabelBelowLine:i.bool,componentUIColor:i.oneOf(e.values(t.COMPONENT_UI_COLORS)),isPinnedToPage:i.bool,componentType:i.string,componentNickname:i.string,secondaryNickname:i.string,labelInlineStyles:i.object,isDimmed:i.bool,isLabelBottom:i.bool},getContainerClasses:function(){return{"component-labels":!0,"label-small":!this.props.isLabelLarge,"label-large":this.props.isLabelLarge,"label-above-line":!this.props.isLabelBelowLine,dimmed:this.props.isDimmed,"label-bottom":this.props.isLabelBottom,"label-top":!this.props.isLabelBottom}},getComponentTypeLabelClasses:function(){return{"label-comp-type":!0,"components-ui-color-orange":this.props.componentUIColor===t.COMPONENT_UI_COLORS.ORANGE}},getComponentNicknameClasses:function(){return{"label-comp-nickname":!0,"components-ui-color-orange":this.props.componentUIColor===t.COMPONENT_UI_COLORS.ORANGE}},getSecondaryNicknameClasses:function(){return e.assign({"secondary-nickname":!0},this.getComponentNicknameClasses())},getInnerNicknameClasses:function(){return e.assign({"inner-nickname":!0},this.getComponentNicknameClasses())},getPinSymbolContainerClasses:function(){return{"symbol-container":!0,"connected-comp":this.props.showComponentNickname&&this.props.shouldShowConnectionIndication,"components-ui-color-orange":this.props.componentUIColor===t.COMPONENT_UI_COLORS.ORANGE}},render:n})}),define("rEditor/rootComps/selectionBox/editBox.rt",["react","lodash","coreBi","baseUI","baseUILib","util","rEditor/rootComps/selectionBox/groupSelectionFrame","rEditor/rootComps/selectionBox/componentLabels","experiment","constants"],function(n,a,o,i,r,s,l,c,p,d){"use strict";return function(){return function(){var e=this.props.knobsMap,t=s.translate;return n.createElement.apply(this,["div",{className:a(this.getEditBoxClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onContextMenu:this.props.onContextMenu,onDoubleClick:this.onDoubleClick},this.hasSubComponents()?a.map(this.props.subComps,function(e,t,o,i){return n.createElement("div",{className:a(this.getSubComponentLayoutClasses(o.id)).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:i,style:this.getLayoutStyle(this.props.subCompLayouts[o.id])})}.bind(this,e,t)):null,n.createElement(l,{selectedComponents:this.props.comps,groupAncestorStyle:this.props.groupAncestorStyle}),this.shouldShowPadding()?function(e,t){var o=this.getPaddingStyle();return n.createElement("div",{className:"padding-wrapper",key:"paddingWrapper",style:o.wrapper},n.createElement("div",{className:"left-padding",style:o.left},n.createElement("div",{className:"min-indicator-margin",style:{top:this.getMarginLabelTop()}},this.props.possibleLayoutActionsMap.resizable&&this.isHorizontallyStretchedToScreen?n.createElement("span",{className:"indicator resizing",key:"resizeBoundingStyleLeft"},this.getMarginValue("left"),"\n                "):null)),n.createElement("div",{className:"right-padding",style:o.right},n.createElement("div",{className:"min-indicator-margin",style:this.props.layout.x<56?{right:0,position:"absolute",top:this.getMarginLabelTop()}:{top:this.getMarginLabelTop()}},this.props.possibleLayoutActionsMap.resizable&&this.isHorizontallyStretchedToScreen?n.createElement("span",{className:"indicator resizing",key:"resizeBoundingStyleRight"},this.getMarginValue("right"),"\n                "):null)))}.apply(this,[e,t]):null,n.createElement(r.Tooltip,this.getTooltipProps(),n.createElement("div",{className:a(this.getBoundingClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),style:this.props.boundingStyle},this.shouldShowDragBounding()?n.createElement("span",{className:a(this.getIndicatorClasses("dragging")).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"dragBoundingStyle"},"\n                x: ",parseInt(this.props.relativeToStructureLayout.bounding.x,10),", y: ",parseInt(this.props.relativeToStructureLayout.bounding.y,10),"\n            "):null,!this.props.possibleLayoutActionsMap.resizable&&!this.props.possibleLayoutActionsMap.resizeOnlyProportionally||this.isHorizontallyStretchedToScreen?null:n.createElement("span",{className:a(this.getIndicatorClasses("resizing")).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"resizeBoundingStyle"},"\n                     W: ",parseInt(this.props.relativeToStructureLayout.bounding.width,10),", H: ",parseInt(this.props.relativeToStructureLayout.bounding.height,10),"\n            "))),n.createElement(i.tooltip,{id:this.getLinkedToTooltipId(this.props.compsData),key:this.getLinkedToTooltipId(this.props.compsData),value:this.getLinkDescriptionFromData(this.props.compsData),alignment:"right",delay:"500",width:"260px",marginsFromElement:9,disabled:!this.shouldShowLinkedToTooltip(),shouldTranslate:!1,openTriggers:[d.UI.TOOLTIP.TRIGGERS.IMMEDIATE,d.UI.TOOLTIP.TRIGGERS.MOUSE_ENTER]},n.createElement("div",{className:a(this.getLayoutClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),style:this.props.isMultiselect?this.props.boundingStyle:this.getLayoutStyle(this.props.layout)},this.props.comps&&1===this.props.comps.length?n.createElement(c,{key:"compLabels",showComponentType:p.isOpen("se_appWidget")&&this.props.shouldShowCompDisplayName,shouldShowConnectionIndication:this.shouldShowConnectionIndication(),showComponentNickname:this.props.isDeveloperModeEnabled&&!this.isDuringMouseAction(),infoText:"PLATFORM_ONSTAGE_CONNECTED_ELEMENT_LABEL",isLabelLarge:this.props.isSiteSegmentComponent,isLabelBelowLine:this.isSiteHeaderSelected(this.props.comps[0]),componentUIColor:this.props.componentUIColor,componentType:this.props.compDisplayName,componentNickname:this.getComponentNickname(),secondaryNickname:this.getSecondaryNickname(),innerNickname:this.getInnerNickname(),labelInlineStyles:this.getComponentLabelsInlineStyles(),isDimmed:this.props.dimCompLabels,isLabelBottom:this.props.isLabelBottom}):null,e.topLeft?n.createElement("span",{className:this.getResizeHandleCursorClass("TOP_LEFT")+" handle handle-resize-corner top left","data-direction-name":"topLeft",ref:"resizeTopLeft",onMouseDown:this.startResize,key:"resizeTopLeft"}):null,e.top?n.createElement("span",{className:this.getResizeHandleCursorClass("TOP")+" handle handle-resize-side top","data-direction-name":"top",onMouseDown:this.startResize,key:"resizeTopCenter"}):null,e.topRight?n.createElement("span",{className:this.getResizeHandleCursorClass("TOP_RIGHT")+" handle handle-resize-corner top right","data-direction-name":"topRight",onMouseDown:this.startResize,key:"resizeTopRight"}):null,e.right?n.createElement("span",{className:this.getResizeHandleCursorClass("RIGHT")+" handle handle-resize-side right","data-direction-name":"right",onMouseDown:this.startResize,key:"resizeMiddleRight"}):null,e.bottomRight?n.createElement("span",{className:this.getResizeHandleCursorClass("BOTTOM_RIGHT")+" handle handle-resize-corner bottom right","data-direction-name":"bottomRight",onMouseDown:this.startResize,key:"resizeBottomRight"}):null,e.bottom?n.createElement("span",{className:this.getResizeHandleCursorClass("BOTTOM")+" handle handle-resize-side bottom","data-direction-name":"bottom",onMouseDown:this.startResize,key:"resizeBottomCenter"}):null,e.bottomPage?n.createElement(i.tooltip,{id:"pageResizeKnobTooltip",key:"pageResizeKnobTooltip",value:"OnStage_PageMinHeightHandle_Tooltip",alignment:"top",delay:"500",openTriggers:[],closeTriggers:[],onOpen:function(e,t){this.props.biEvent(o.events.pageResize.PAGE_MIN_HEIGHT_TOOLTIP_APPEARED)}.bind(this,e,t)},n.createElement("span",{id:"resize-page",className:a({"footer-handle":"FooterContainer"===this.props.compType}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")+" "+this.getDragHandlersClass("resize","push"),onMouseDown:this.startPageResize,onDoubleClick:this.resetPageSize,onMouseEnter:this.showPageResizeKnobTooltip,onMouseLeave:this.hidePageResizeKnobTooltip,key:"resizeBottomPage"},n.createElement(i.symbol,{name:"adjustPageHeightButtonIcon"}),"\n                ",s.translate("OnStage_PageMinHeightHandle_Label"),"\n\n            ")):null,e.bottomLeft?n.createElement("span",{className:this.getResizeHandleCursorClass("BOTTOM_LEFT")+" handle handle-resize-corner bottom left","data-direction-name":"bottomLeft",onMouseDown:this.startResize,key:"resizeBottomLeft"}):null,e.left?n.createElement("span",{className:this.getResizeHandleCursorClass("LEFT")+" handle handle-resize-side left","data-direction-name":"left",onMouseDown:this.startResize,key:"resizeMiddleLeft"}):null,e.rotate?n.createElement("span",{className:"handle handle-rotate",onMouseDown:this.startRotate,key:"rotate",ref:"rotate"},n.createElement(i.symbol,{name:"rotate"})):null,e.rotate&&this.isComponentRotated()?n.createElement("span",{className:"handle handle-rotate-cancel",onMouseDown:this.cancelRotation,style:{transform:"rotate("+(360-this.props.layout.rotationInDegrees)+"deg) translate3d(0,0,0)"},key:"cancelRotate",ref:"cancelRotate"},n.createElement(i.symbol,{name:"rotateCancel"})):null,e.dragAndPush?n.createElement(i.tooltip,{id:"dragWithAnchorsVerticalTooltip",key:"dragWithAnchorsVerticalTooltip",value:"ONSTAGE_DragHandle_Tooltip",alignment:"top",openTriggers:[],closeTriggers:[]},n.createElement("span",{className:this.getDragHandlersClass("drag","push"),onMouseEnter:this.showDragWithAnchorsKnobTooltip,onMouseLeave:this.hideDragWithAnchorsKnobTooltip,onMouseDown:this.startDragAndPush,key:"dragWithAnchorsVertical"},n.createElement(i.symbol,{name:"pushAndEnforceAnchors"}),"\n            ",s.translate("ONSTAGE_DragHandle_Hover_Text"))):null,e.closeGaps?n.createElement(i.tooltip,{id:"closeGapsKnobTooltip",key:"closeGapsTooltip",value:this.props.isPage?"Onstage_DragPage_CloseGap_Tooltip":"OnStage_DragFooter_CloseGap_Tooltip",alignment:"top",openTriggers:[],closeTriggers:[]},n.createElement("span",{className:this.getDragHandlersClass("drag","pull"),onMouseEnter:this.showCloseGapsKnobTooltip,onMouseLeave:this.hideCloseGapsKnobTooltip,onDoubleClick:this.closeGap.bind(this,this.props.isPage),onMouseDown:this.startCloseGap},n.createElement(i.symbol,{name:"pullAndEnforceAnchors"}),s.translate(this.props.isPage?"Onstage_DragPage_CloseGap_Label":"OnStage_DragFooter_CloseGap_Label"))):null,e.resizeAndPush?n.createElement(i.tooltip,{id:"resizeWithAnchorsBottomTooltip",key:"resizeWithAnchorsBottomTooltip",value:"OnStage_StretchHandle_Tooltip",alignment:"bottom",openTriggers:[],closeTriggers:[]},n.createElement("span",{"data-aid":"drag-handle-indication",className:this.getDragHandlersClass("resize","push"),onMouseEnter:this.showResizeWithAnchorsKnobTooltip,onMouseLeave:this.hideResizeWithAnchorsKnobTooltip,onMouseDown:this.startResizeAndPush,key:"resizeWithAnchorsBottom"},n.createElement(i.symbol,{name:"resizeAndEnforceAnchors"}),"\n            ",s.translate("OnStage_StretchHandle_Hover_Text"))):null,this.props.possibleLayoutActionsMap.rotatable?n.createElement("span",{className:"indicator rotating",style:{transform:"rotate("+(360-this.props.layout.rotationInDegrees)+"deg) translate3d(0,0,0)"},key:"rotationIndicator"},Math.floor(this.props.layout.rotationInDegrees),"°\n        "):null)),this.canBeMovedToFooter()?n.createElement("span",{className:"move-to-footer","data-aid":"move-to-footer",key:"moveToFooter",style:this.getMoveToFooterStyle(),onMouseDown:this.moveToFooter},t("OnStage_MoveToFooter_Button"),"\n\n            ",n.createElement(i.symbol,{name:"moveToFooterArrow"})):null])}.apply(this,[])}}),define("rEditor/rootComps/selectionBox/editBox",["react","create-react-class","prop-types","lodash","constants","baseUI","experiment","rEditor/utils/mouseMoveActions/closeGaps","rEditor/utils/mouseMoveActions/baseResize","rEditor/utils/mouseMoveActions/pageResize","rEditor/utils/mouseMoveActions/baseResizeAndPush","rEditor/utils/mouseMoveActions/baseRotate","rEditor/utils/mouseMoveActions/baseDragAndPush","rEditor/rootComps/selectionBox/applyModeFromClipboardSuggestion","util","rEditor/rootComps/selectionBox/editBoxMapper","coreBi","rEditor/rootComps/selectionBox/editBox.rt","helpIds"],function(i,e,t,n,a,r,s,o,l,c,p,d,u,g,m,f,h,y,b){"use strict";var v="old"!==s.getValue("se_notificationCenter")?4:10,S={px:"px",pct:"%",vw:"%"},E=["TOP_LEFT","TOP","TOP_RIGHT","RIGHT","BOTTOM_RIGHT","BOTTOM","BOTTOM_LEFT","LEFT"],P=["top-left-resize-cursor","top-resize-cursor","top-right-resize-cursor","right-resize-cursor","bottom-right-resize-cursor","bottom-resize-cursor","bottom-left-resize-cursor","left-resize-cursor"],C="StripColumnsContainer";function T(e,t){var o=t-(e.bounding.y+e.bounding.height);return 0<=o&&o<=21}var _=e({displayName:"editBox",propTypes:{comps:t.oneOfType([t.object,t.arrayOf(t.object)]).isRequired,isPinMode:t.bool,isConnectedToDataBinding:t.bool,isSiteSegmentComponent:t.bool,isDim:t.bool,isResizing:t.bool,isDragging:t.bool,isRotating:t.bool,applyModeFromClipboardSuggestion:t.object,labelsOffset:t.number,siteSegmentsLabelsOffset:t.number,layout:t.object,subComps:t.array,subCompLayouts:t.object,isShowOnAllPages:t.bool,componentUIColor:t.oneOf(n.values(a.COMPONENT_UI_COLORS)),subComponentsUIColor:t.object,possibleLayoutActionsMap:t.object,relativeToStructureLayout:t.object,isHorizontallyStretchedToScreen:t.bool,isSameRef:t.func,registerMouseMoveAction:t.func,biEvent:t.func,componentType:t.string,setIsMouseUpSelectionEnabled:t.func,updateLayout:t.func,addToHistory:t.func,isGroupedComponent:t.bool,isGroup:t.bool,areComponentsOfSamePage:t.bool,compType:t.oneOfType([t.string,t.arrayOf(t.string)]),compTypes:t.array,isMultiSelectKeyPressed:t.func,doubleClick:t.func,compsWithoutSelectedAncestors:t.oneOfType([t.object,t.arrayOf(t.object)]),moveToFooter:t.func,compsData:t.object,isMultiselect:t.bool,isMobile:t.bool,isMobileEditor:t.bool,boundingStyle:t.object,isShowOnFixedPosition:t.bool,isCurrentPageLandingPage:t.bool,pagesContainer:t.object,isPage:t.bool,pagesContainerLayout:t.object,footerLayout:t.object,updateGaps:t.func,gaps:t.object,isDirectChildOfMasterPage:t.bool,isUsingSectionsLayout:t.bool,canToggleShowOnAllPages:t.bool,isEditingText:t.bool,reAddedHiddenElement:t.object,dimCompLabels:t.bool,isDeveloperModeEnabled:t.bool,hideApplyModeFromClipboardSuggestion:t.func,compNickname:t.string,compSecondaryNickname:t.string,compInnerNickname:t.string,compLinkValue:t.string,groupAncestorStyle:t.object,position:t.string,setRotateKnobRect:t.func,knobsMap:t.object,dimmedHandles:t.bool,draggable:t.bool,showUserActionNotification:t.func,openHelpCenter:t.func,setSessionUserPreferences:t.func,getState:t.func,getSessionUserPreferences:t.func,isIndicatorBottom:t.bool,isLabelBottom:t.bool},getEditBoxClasses:function(){return{"edit-box":!0,small:this.props.layout.width<=50,"dimmed-handles":this.props.dimmedHandles,draggable:this.props.draggable,"show-move-to-footer-button":this.shouldShowMoveToFooterButton,dragging:this.props.isDragging,resizing:this.props.isResizing,rotating:this.props.isRotating,"multi-select":this.props.isMultiselect}},isComponentRotated:function(){return 0!==this.props.layout.rotationInDegrees},getLayoutStyle:function(e){var t="rotate("+e.rotationInDegrees+"deg)",o={position:this.props.position,top:e.y-1,left:e.x-1,width:e.width,height:e.height,transform:t,WebkitTransform:t};if(this.props.compType===C&&(o.boxSizing="border-box",o.height+=1),this.props.isSiteSegmentComponent&&(o.top=e.y-3,o.left=e.x-3),s.isOpen("se_editBoxPerformance")){var i="translate3d("+(e.x-1)+"px,"+(e.y-1)+"px,0) "+t;o.left=0,o.top=0,o.transform=i,o.WebkitTransform=i}return o},getMoveToFooterStyle:function(e){return{top:(e=e||this.props.layout).bounding.y+e.bounding.height-14,left:e.bounding.x+e.bounding.width/2}},shouldShowPadding:function(){return s.isOpen("se_screenWidthEditBox")&&this.isHorizontallyStretchedToScreen},getPaddingStyle:function(){var e=this.props.isShowOnFixedPosition?"fixed":"absolute";return{wrapper:{top:this.props.layout.y-1,height:this.props.layout.height+2,position:e},left:{top:0,bottom:0,left:0,width:this.props.layout.x},right:{top:0,bottom:0,left:this.props.layout.x+this.props.layout.width,right:0}}},componentWillReceiveProps:function(e){var t=!e.isSameRef(this.props.comps,e.comps);this.props.isResizing||this.props.isRotating||this.props.isPinMode||t?this.shouldShowMoveToFooterButton=!1:e.isDragging&&(this.shouldShowMoveToFooterButton=this.getShouldShowMoveToFooterButton(e))},getResizeHandleCursorClass:function(e){var t=n.indexOf(E,e),o=this.props.layout.rotationInDegrees+22.5;360<=o&&(o-=360);var i=t+Math.floor(o/45);return P.length<=i&&(i-=P.length),P[i]},getShouldShowMoveToFooterButton:function(e){return!(e.isMobileEditor||e.isCurrentPageLandingPage||e.isShowOnFixedPosition||e.isEditingText)&&(e.isUsingSectionsLayout&&e.isDirectChildOfMasterPage?T(e.layout,e.footerLayout.y):!(e.isShowOnAllPages||!e.canToggleShowOnAllPages)&&T(e.layout,e.pagesContainerLayout.y+e.pagesContainerLayout.height))},startPageResize:function(e){this.props.registerMouseMoveAction(c,{evt:e,comps:this.props.comps}),this.hidePageResizeKnobTooltip(),e.stopPropagation()},resetPageSize:function(e){c.reset(),this.props.biEvent(h.events.pageResize.PAGE_MIN_HEIGHT_RESET_MIN_HEIGHT),e.stopPropagation()},startResize:function(e){var t=e.target.getAttribute("data-direction-name");this.props.registerMouseMoveAction(l,{evt:e,directionName:t,comps:this.props.comps}),this.props.biEvent(h.events.editBox.RESIZE,{origin:"editBox",handle_value:t,component_type:this.props.componentType}),e.stopPropagation()},startRotate:function(e){this.props.registerMouseMoveAction(d,{evt:e,comps:this.props.comps}),e.stopPropagation()},cancelRotation:function(e){this.props.setIsMouseUpSelectionEnabled(!1),this.props.updateLayout(this.props.comps,{rotationInDegrees:0}),this.props.biEvent(h.events.editBox.CANCEL_ROTATE_COMPONENT),this.props.addToHistory("Rotation canceled"),e.stopPropagation()},canBeMovedToFooter:function(){return!this.props.isGroupedComponent&&this.props.areComponentsOfSamePage},startDragAndPush:function(e){this.props.registerMouseMoveAction(u,{evt:e,comps:this.getCompToDragAndPush()}),this.props.biEvent(h.events.editBox.DRAG_BY_HANDLE,{component_type:this.props.compType}),this.hideKnobTooltip("dragWithAnchorsVerticalTooltip"),e.stopPropagation()},startCloseGap:function(e){this.props.registerMouseMoveAction(o,{evt:e,comps:this.props.comps}),this.hideKnobTooltip("closeGapsKnobTooltip"),e.stopPropagation()},closeGap:function(e,t){var o=e?"headerToPagesGap":"pagesToFooterGap",i=n.set({},o,0);this.props.updateGaps(i),this.props.biEvent(h.events.editBox.DRAG_GAP,{gap_type:o,gap_size_start:n.get(this.props.gaps,o),gap_size_end:0}),this.props.addToHistory("gap removed"),t.stopPropagation()},startResizeAndPush:function(e){this.props.registerMouseMoveAction(p,{evt:e,comps:this.props.comps}),this.props.biEvent(h.events.editBox.RESIZE_BY_HANDLE,{component_type:this.props.compType}),this.hideKnobTooltip("resizeWithAnchorsBottomTooltip"),e.stopPropagation()},onDoubleClick:function(e){if(!this.props.isMultiSelectKeyPressed(e)){var t={evt:e,comp:this.props.comps};this.props.doubleClick(t)}},showKnobTooltip:function(e){this.props.isResizing||this.props.isDragging||(this.showTooltipTimeout=window.setTimeout(function(){r.tooltipManager.show(e)},800))},hideKnobTooltip:function(e){this.showTooltipTimeout&&(window.clearTimeout(this.showTooltipTimeout),this.showTooltipTimeout=null),r.tooltipManager.hide(e)},showDragWithAnchorsKnobTooltip:function(){this.showKnobTooltip("dragWithAnchorsVerticalTooltip")},showResizeWithAnchorsKnobTooltip:function(){this.showKnobTooltip("resizeWithAnchorsBottomTooltip")},showPageResizeKnobTooltip:function(){this.showKnobTooltip("pageResizeKnobTooltip")},showCloseGapsKnobTooltip:function(){this.showKnobTooltip("closeGapsKnobTooltip")},hidePageResizeKnobTooltip:function(){this.hideKnobTooltip("pageResizeKnobTooltip")},hideDragWithAnchorsKnobTooltip:function(){this.hideKnobTooltip("dragWithAnchorsVerticalTooltip")},hideCloseGapsKnobTooltip:function(){this.hideKnobTooltip("closeGapsKnobTooltip")},hideResizeWithAnchorsKnobTooltip:function(){this.hideKnobTooltip("resizeWithAnchorsBottomTooltip")},moveToFooter:function(e){var t=this;this.props.moveToFooter(this.props.compsWithoutSelectedAncestors),this.props.biEvent(h.events.editBox.MOVE_TO_FOOTER,{component_type:this.props.compType}),this.shouldShowMoveToFooterButton=!1,e.stopPropagation();var o=this.props.getSessionUserPreferences(a.USER_PREFS.DRAG_TO_FOOTER.DRAG_COUNT)(this.props.getState())||0;if("old"!==s.getValue("se_notificationCenter")){if(o%v==0){this.props.showUserActionNotification({message:"Notifications_Attached_Footer_Text",title:"Notifications_Attached_Footer_Text",type:"info",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){t.props.openHelpCenter(b.NOTIFICATIONS.ATTACH_TO_FOOTER)}}})}o+=1,this.props.setSessionUserPreferences(a.USER_PREFS.DRAG_TO_FOOTER.DRAG_COUNT,o)}},hasSubComponents:function(){return this.props.isGroup||this.props.compType===C||this.props.isMultiselect},setRotateKnobRect:function(){if(!this.isDuringMouseAction()){var e=this.props.layout.rotationInDegrees?this.refs.cancelRotate&&this.refs.cancelRotate.getBoundingClientRect():this.refs.rotate&&this.refs.rotate.getBoundingClientRect(),t=n.pick(e,["x","y","width","height","top","right","bottom","left"]);e&&this.props.setRotateKnobRect(t)}},getMarginLabelTop:function(){return this.props.layout.height/2-30},getLinkedToTooltipId:function(e){return e?"linkedTo-"+e.id:"linkedTo"},getLinkDescriptionFromData:function(e){if(!e)return"";var t=m.translate("mobile_link_notification_tooltip"),o=this.props.compLinkValue;return i.createElement(r.popoverTemplates.iconAndText,{text:t+" "+o,icon:"mobileCompWithLink",shouldTranslate:!1})},isDuringMouseAction:function(){return this.props.isDragging||this.props.isResizing||this.props.isRotating},shouldShowLinkedToTooltip:function(){var e=!(!this.props.compsData||!this.props.compsData.link),t=n.get(this.props.reAddedHiddenElement,"addingPhase")!==a.LEFT_BAR.MOBILE_HIDDEN_ELEMENTS.PROGRESS.IDLE;return this.props.isMobile&&!this.isDuringMouseAction()&&!this.props.isMultiselect&&e&&!t},getMarginValue:function(e){var t=this.props.layout.docked&&0<=this.props.layout.docked[e].px?"px":"vw";return this.props.layout.docked&&this.props.layout.docked[e][t]+S[t]},getApplyModeFromClipboardSuggestion:function(){return i.createElement(g,{text:"HOVER_BOX_PASTE_FROM_CLIPBOARD_MSG_TEXT",linkActionText:"HOVER_BOX_PASTE_FROM_CLIPBOARD_MSG_BUTTON"})},shouldShowDragBounding:function(){var e=n.every(this.props.compTypes,function(e){return"platform.components.AppController"===e});return this.props.possibleLayoutActionsMap.movable&&!e},shouldShowConnectionIndication:function(){return this.props.isConnectedToDataBinding&&!this.props.isDragging},isSiteHeaderSelected:function(e){return"SITE_HEADER"===e.id},shouldShowMobileReAddedBubble:function(){var e=n.get(this.props.reAddedHiddenElement,["compRef","id"]),t=!!e&&n.get(n.head(this.props.comps),"id")===e,o=n.get(this.props.reAddedHiddenElement,"addingPhase")===a.LEFT_BAR.MOBILE_HIDDEN_ELEMENTS.PROGRESS.FINISH;return this.props.isMobileEditor&&t&&o},getNicknameDisplay:function(e){return e?"#"+e:null},getComponentNickname:function(){return this.getNicknameDisplay(this.props.compNickname)},getSecondaryNickname:function(){return this.getNicknameDisplay(this.props.compSecondaryNickname)},getInnerNickname:function(){return this.getNicknameDisplay(this.props.compInnerNickname)},getComponentLabelsInlineStyles:function(){return this.props.isSiteSegmentComponent?{left:this.props.siteSegmentsLabelsOffset}:{left:this.props.labelsOffset}},getCompToDragAndPush:function(){return this.props.isPage?[this.props.pagesContainer]:this.props.compsWithoutSelectedAncestors},componentDidMount:function(){this.setRotateKnobRect()},componentDidUpdate:function(){this.setRotateKnobRect()},getTooltipProps:function(){if(this.shouldShowMobileReAddedBubble())return{id:"reAddedMobileCompRef",key:"reAddedMobileCompRef",content:"mobile_hidden_items_show_success_tooltip",alignment:"RIGHT",isOpen:!0,openOnMouseEnter:!1,closeOnMouseLeave:!1};if(this.props.applyModeFromClipboardSuggestion){var e=this.props.isSameRef(this.props.comps,this.props.applyModeFromClipboardSuggestion.selectedComponents);return{id:"applyModeFromClipboardSuggestion",key:"applyModeFromClipboardSuggestion",content:this.getApplyModeFromClipboardSuggestion(),onOuterClick:this.props.hideApplyModeFromClipboardSuggestion,maxWidth:320,isOpen:e,alignment:"LEFT"}}return{isOpen:!1,openOnMouseEnter:!1}},getDragHandlersClass:function(e,t){var o="handle handle-"+t+" handle-"+e+"-with-anchors";return 400<=this.props.layout.width?o+" showHover":o},getSubComponentLayoutClasses:function(e){return{layout:!0,"secondary-component":this.props.isGroup,"components-ui-color-orange":this.props.subComponentsUIColor[e]===a.COMPONENT_UI_COLORS.ORANGE}},getBoundingClasses:function(){return{bounding:!0,"components-ui-color-orange":this.props.componentUIColor===a.COMPONENT_UI_COLORS.ORANGE}},getIndicatorClasses:function(e){var t;return _defineProperty(t={indicator:!0},e,!0),_defineProperty(t,"bottom-indicator",this.props.isIndicatorBottom),t},getLayoutClasses:function(){return{layout:!0,"secondary-component":this.props.isMultiselect,"components-ui-color-orange":this.props.componentUIColor===a.COMPONENT_UI_COLORS.ORANGE,"site-segments-component":this.props.isSiteSegmentComponent}},isRootComponent:function(e,t){return"SITE_FOOTER"===t.id||"SITE_HEADER"===t.id||t.id===e.dsRead.pages.getFocusedPageId()},render:y}),I=m.hoc.connect(m.hoc.STORES.EDITOR_API,f.mapStateToProps,f.mapDispatchToProps)(_);return I.pure=_,I}),define("rEditor/rootComps/compControls/compControls.rt",["react","lodash","rEditor/rootComps/gfpp/gfpp","rEditor/rootComps/selectionBox/focusBox","rEditor/rootComps/selectionBox/editBox","util","experiment"],function(t,o,i,n,a,r,s){"use strict";return function(){return function(){var e=this.getAttachCandidateFocusabledParent();return t.createElement("div",{style:{visibility:1===this.props.siteScale?"visible":"hidden"},onMouseEnter:this.props.clearHoverBox},this.props.panel?t.createElement(r.lazyComponent,o.assign({},{ref:"compPanel",moduleName:this.props.panel.name,key:r.lazyComponent.isLoaded(this.props.panel.name)?this.props.panel.name:"loading",onModuleLoaded:function(e){this.forceUpdate()}.bind(this,e)},this.getPanelProps())):null,this.getColumnsContainer()?t.createElement(r.lazyComponent,o.assign({},{moduleName:"columnsControls",key:"columnsControls"},this.getColumnsControlsProps())):null,s.isOpen("se_appWidget")&&this.shouldShowAppFocusBox()?t.createElement(n,{key:this.getAppContainerFocusBoxKey(),navControlsStyle:this.state.appNavControlsStyle,focusedContainer:this.getAppFocusBox(),selectedComponents:this.props.selectedComponents,tabIndicationState:{}}):null,this.shouldShowFocusBox()?t.createElement(n,{key:this.getFocusedContainerFocusBoxKey(),ref:"focusBox",navControlsStyle:this.state.navControlsStyle,tabsDef:this.getFocusedContainerTabsDef(),selectedComponents:this.props.selectedComponents,tabIndicationState:this.props.tabIndicationState}):null,e?t.createElement(n,{key:"attachFocusBox",navControlsStyle:this.state.attachCandidateNavControlsStyle,focusedContainer:e,selectedComponents:this.props.selectedComponents}):null,this.shouldRenderEditBox()?t.createElement(a,{ref:"editBox",key:"editBox",isDragging:this.props.isDragging,isResizing:this.props.isResizing,isRotating:this.props.isRotating,isPinMode:this.props.isPinMode,isDim:this.isDesignPanelOpen(),selectedComponents:this.props.selectedComponents,isConnectedToDataBinding:this.isConnectedToDataBinding(),performingMouseMoveAction:this.props.performingMouseMoveAction,onContextMenu:this.props.onContextMenu,applyModeFromClipboardSuggestion:this.props.applyModeFromClipboardSuggestion,labelsOffset:this.state.editBoxLabelsOffset,isLabelBottom:this.props.isLabelBottom,isIndicatorBottom:this.props.isIndicatorBottom}):null,this.shouldShowGfpp()?t.createElement(i,{"data-hook":"gfpp",key:"gfpp",setGFPPMeasureFunc:this.setGFPPMeasureFunc,toggleGfpp:this.toggleGfpp,gfppIsCollapsed:this.state.gfppIsCollapsed,style:this.state.gfppStyle,selectedComponents:this.props.selectedComponents}):null)}.apply(this,[])}}),define("rEditor/rootComps/compControls/compControlsMapper",["stateManagement"],function(o){"use strict";return function(e){var t=e.state;return{selectedComponents:o.editorPlugins.selection.selectors.getSelectedCompsRefs(t)}}}),define("rEditor/rootComps/compControls/compControls",["reactDOM","create-react-class","prop-types","lodash","core","zepto","constants","stateManagement","util","rEditor/rootComps/compControls/compControls.rt","rEditor/rootComps/compControls/compControlsMapper"],function(l,e,t,v,S,r,o,i,n,a,s){"use strict";var c=o.UI,p=c.CUSTOM_GFPP_POS,E=c.VIEWPORT_VERTICAL_MARGINS_NAV_CONTROLS,P=i.editorPlugins.domMeasurements.selectors.getViewPort,C=S.utils.compControlsMeasurer,d=i.editorPlugins.selection.selectors,u=d.isSelectedCompConnectedToDataBindingController,T=d.getFocusedContainer,_=d.getLastSelectionClickPos,g=d.getFocusedContainerTabDefinition,m=["wysiwyg.common.components.anchor.viewer.Anchor"],f=["wysiwyg.viewer.components.WRichText","wysiwyg.viewer.components.HoverBox","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStrip",o.COMP_TYPES.POPUP_CONTAINER],h=3,y={top:0,bottom:0,left:0,right:0};function b(e,t){return Math.ceil(e-t+h)}function I(e){var t=e.dsRead.siteSegments.getPagesContainer();return e.components.layout.getRelativeToScreen(t).x}function M(e,t,o,i){var n=this.getEditorAPI(),a=n.store.getState,r=void 0,s=v.head(this.props.selectedComponents).id,l=v.head(this.props.selectedComponents),c=l&&n.dsRead.platform.controllers.connections.get(l);s=l?{id:l.id,layout:e,hasLabels:!v.isEmpty(c)}:{};var p=a();this.isCompRequiresCustomGfppPos(e,this.props.selectedComponents)&&(r=_(p));var d=n.getLeftBarButtonsBoundingRect(),u=T(p),g=n.getNavControlsSize(),m=u&&this.getBoundingLayoutRelativeToScreen(u),f=u?{id:u.id,layout:m}:null,h=!e.fixedPosition,y={gfppSize:o,viewPort:function(e,t,o){if(e){var i=o?S.utils.scrollUtils.getScroll().scrollTop+E:E;return v.defaults({y:i},t)}return t}(g,P(p,h,d),h),navControlsSize:g,pageXBoundary:I(n),rotateKnobMargins:i,alignToPageBoundaries:n.dsRead.viewMode.get()===n.dsRead.viewMode.VIEW_MODES.MOBILE},b=n.components.is.gfppMargins(this.props.selectedComponents);return C.getCompControlsPositions(f,t,s,y,r,b)}var A=e({displayName:"compControls",mixins:[S.mixins.editorAPIMixin],propTypes:{panel:t.shape({name:t.string,props:t.object}),isDragging:t.bool,isResizing:t.bool,isRotating:t.bool,isSectionDragging:t.bool,selectedComponents:t.arrayOf(t.object).isRequired,hoveredComp:t.oneOfType([t.bool,t.object]),clearHoverBox:t.func,performingMouseMoveAction:t.bool,onContextMenu:t.func,previewPosition:t.object.isRequired,attachCandidate:t.object,appContainer:t.object,applyModeFromClipboardSuggestion:t.object,isIndicatorBottom:t.bool,isLabelBottom:t.bool},getInitialState:function(){return this.panelReady=!1,this.lastMeasuredPanelHeight=0,this.throttledSetCompsStyle=v.throttle(this.setCompsStyle,50,{leading:!1,trailing:!0}),{gfppIsCollapsed:!0,gfppStyle:{top:0,left:0,visibility:"hidden",position:"absolute"},compPanelStyle:{top:0,left:0,opacity:0,visibility:"hidden"},navControlsStyle:{top:0,left:0},appNavControlsStyle:{top:0,left:0},editBoxLabelsOffset:0,isSelectedComponentConnected:!1}},setGFPPMeasureFunc:function(e){this.gfppMeasureFunc=e},isCompsStyleSet:function(){return!this.props.panel||"hidden"!==this.state.compPanelStyle.visibility&&!!this.lastMeasuredPanelHeight&&0!==this.state.compPanelStyle.left&&0!==this.state.compPanelStyle.top},shouldShowGfpp:function(){return this.props.selectedComponents.length&&!this.props.isDragging&&!this.props.isResizing&&!this.props.isRotating},getBoundingLayoutRelativeToScreen:function(e){var t=this.getEditorAPI(),o=t.components.layout.getRelativeToScreen(e);return v.assign(o.bounding,{fixedPosition:t.components.layout.isShowOnFixedPosition(e),rotationInDegrees:o.rotationInDegrees})},getCompControlsStyles:function(e,t,o,i,n){var a=this.getEditorAPI(),r=this.props.panel&&(e||!this.isCompsStyleSet()),s=M.call(this,i,o,t,n);if(s.gfppStyle.visibility="inherit",s.gfppStyle.visibility="inherit",r){if(s.compPanelStyle.top+=this.props.previewPosition.top,v.has(s.compPanelStyle,"left")&&(s.compPanelStyle.left+=this.props.previewPosition.left),!i.fixedPosition){var l=a.ui.scroll.getScroll();s.compPanelStyle.top-=l.scrollTop}v.assign(s.compPanelStyle,this.getPanelStyle())}else s=v.pick(s,["gfppStyle","navControlsStyle","editBoxLabelsOffset"]);return i.fixedPosition?(s.gfppStyle.top+=this.props.previewPosition.top,v.has(s.gfppStyle,"left")&&(s.gfppStyle.left+=this.props.previewPosition.left),s.gfppStyle.position="fixed"):s.gfppStyle.position="absolute",this.props.isPinMode&&(s.gfppStyle.visibility="hidden"),s},getPanelStyle:function(){var e={};return this.panelReady?(e.visibility="inherit",e.opacity=1):(e.visibility="hidden",e.opacity=0),e},isCompRequiresCustomGfppPos:function(e){var t=this.getEditorAPI();if(v.includes(f,t.components.getType(this.props.selectedComponents)))return!1;var o=p.HEIGHT_TO_APPLY;return e.height>=o},getRotateKnobRect:function(){return this.getEditorAPI().getEditBoxRotateKnobRect()},isDesignPanelOpen:function(){var e=this.getEditorAPI().panelManager.getOpenPanels();return!!v.find(e,{name:o.componentPanels.design})},getRotateKnobMargins:function(e){if(!e.rotationInDegrees)return y;var t=this.getRotateKnobRect();if(!t)return y;var o,i,n=this.getEditorAPI().ui.scroll.getScroll(),a=n.scrollTop-this.props.previewPosition.top,r=n.scrollLeft-this.props.previewPosition.left;return t={top:t.top+a,bottom:t.bottom+a,left:t.left+r,right:t.right+r},o=e,(i=t)?{top:b(o.y,i.top),bottom:b(i.bottom,o.y+o.height),left:b(o.x,i.left),right:b(i.right,o.x+o.width)}:y},setCompsStyle:function(e){var t=this.gfppMeasureFunc?this.gfppMeasureFunc():null;if(this.props.isPinMode&&(t={width:0,height:0}),t){var o=this.refs.compPanel?l.findDOMNode(this.refs.compPanel):null;this.lastMeasuredPanelHeight=o?r(o).height():0;var i=this.getBoundingLayoutRelativeToScreen(this.props.selectedComponents),n=this.getRotateKnobMargins(i),a=this.getCompControlsStyles(e,t,o,i,n);this.lastMeasuredPanelHeight||(a.compPanelStyle={top:0,left:0,opacity:0,visibility:"hidden"});var s=v.pick(this.state,v.keys(a));v.every(a,function(e,t){var r=s[t];return v.every(e,function(e,t){var o,i,n,a=r[t];return v.isFinite(a)&&v.isFinite(e)?(o=a,i=e,n=(n=2)||0,Math.abs(o-i)<=n):v.isEqual(a,e)})})||this.setState(a)}},onWindowScroll:function(){this.setCompsStyle(),this.setAppNavControlsStyle()},onWindowResize:function(){this.debouncedSetCompsStyle||(this.debouncedSetCompsStyle=v.debounce(function(){this.setCompsStyle(),this.setAppNavControlsStyle()},200)),this.debouncedSetCompsStyle(!0)},shouldShowFocusBox:function(){var e=this.getEditorAPI().store.getState(),t=v.head(this.props.selectedComponents),o=T(e),i=t&&v.get(o,"id")===t.id;return o&&(!(this.props.performingMouseMoveAction&&i)||v.isEqual(this.getEditorAPI().pages.popupPages.getPopupContainer(),t))},getAttachCandidateFocusabledParent:function(){return this.getEditorAPI().selection.getParentToFocus(this.props.attachCandidate)},shouldShowAppFocusBox:function(){return!!this.props.appContainer},getAppFocusBox:function(){return this.props.appContainer},shouldRenderEditBox:function(){if(!this.props.selectedComponents.length||this.props.isSectionDragging)return!1;var e=this.getEditorAPI().components.getType(this.props.selectedComponents);return!v.includes(m,e)},componentDidMount:function(){this.throttledSetCompsStyle(),this.getEditorAPI().ui.scroll.addListener(this.onWindowScroll),window.addEventListener("resize",this.onWindowResize)},componentWillUnmount:function(){this.getEditorAPI().ui.scroll.removeListener(this.onWindowScroll),window.removeEventListener("resize",this.onWindowResize)},componentWillReceiveProps:function(e){var t=this.getEditorAPI(),o={},i=!v.get(e.panel,["props","useLastPanelPosition"]);!v.isEqual(this.props.panel,e.panel)&&i&&(o.compPanelStyle={top:0,left:0,opacity:0,visibility:"hidden"},e.panel||(this.panelReady=!1));var n=!t.utils.isSameRef(this.props.selectedComponents,e.selectedComponents),a=!this.props.performingMouseMoveAction&&e.performingMouseMoveAction;(n||a)&&(o.gfppStyle={top:0,left:0,visibility:"hidden",position:"absolute"},o.compPanelStyle={top:0,left:0,opacity:0,visibility:"hidden"}),v.isEmpty(o)||this.setState(o)},getNavControlSizeToContainer:function(e){var t=this.getEditorAPI();if(e){var o=this.refs.compPanel?l.findDOMNode(this.refs.compPanel):null,i=this.getBoundingLayoutRelativeToScreen(e),n=!i.fixedPosition,a=t.getLeftBarButtonsBoundingRect(),r={viewPort:P(t.store.getState(),n,a),pageXBoundary:I(t)},s={id:e.id,layout:i};return C.getCompControlsPositions(s,o,s,r)}},setAttachCandidateNavControlsStyle:function(){var e=this.getNavControlSizeToContainer(this.props.attachCandidate);this.setState({attachCandidateNavControlsStyle:e.navControlsStyle})},setAppNavControlsStyle:function(){if(this.props.appContainer){var e=this.getNavControlSizeToContainer(this.props.appContainer);this.setState({appNavControlsStyle:e.navControlsStyle})}},componentDidUpdate:function(e){var t,o,i,n;t=e,o=this.props,i=!v.isEqual(t.hoveredComp,o.hoveredComp),n=!v.isEqual(t.selectedComponents,o.selectedComponents),o.performingMouseMoveAction&&t.performingMouseMoveAction===o.performingMouseMoveAction||i&&!n||this.throttledSetCompsStyle(),!v.isEqual(e.attachCandidate,this.props.attachCandidate)&&this.getAttachCandidateFocusabledParent()&&this.setAttachCandidateNavControlsStyle(),!v.isEqual(e.appContainer,this.props.appContainer)&&this.shouldShowAppFocusBox()&&this.setAppNavControlsStyle()},onPanelDragEnd:function(e){this.setState({compPanelStyle:e})},onCompPanelLoaded:function(){this.panelReady=!0,this.throttledSetCompsStyle()},getPanelProps:function(){var e=this.getEditorAPI();return v.assign({onDragEnd:this.onPanelDragEnd,onCompPanelLoaded:this.onCompPanelLoaded,style:this.state.compPanelStyle,selectedComponent:this.props.selectedComponents,compType:e.components.getType(this.props.selectedComponents)},this.props.panel.props)},isColumnsContainer:function(e){return"wysiwyg.viewer.components.StripColumnsContainer"===this.getEditorAPI().components.getType(e)},getColumnsContainer:function(){var e=this.getEditorAPI(),t=this.props.selectedComponents;if(this.isColumnsContainer(t))return t;var o=this.getEditorAPI().utils.findAncestorMatchesCondition(t,this.isColumnsContainer);return o?e.components.asArray(o):null},toggleGfpp:function(e){void 0===e?this.setState({gfppIsCollapsed:!this.state.gfppIsCollapsed}):this.setState({gfppIsCollapsed:e})},getColumnsControlsProps:function(){return{selectedComponents:this.props.selectedComponents,columnsContainer:this.getColumnsContainer()}},isConnectedToDataBinding:function(){var e=this.getEditorAPI(),t=e.store.getState();return u(t,e.dsRead)},getFocusedContainerFocusBoxKey:function(){var e=this.getEditorAPI().store.getState();return"focusBox-"+T(e).id},getFocusedContainerTabsDef:function(){var e=this.getEditorAPI();return g(e.store.getState())},getAppContainerFocusBoxKey:function(){return this.props.appContainer?"appContainerFocusBox-"+this.props.appContainer.id:"appContainerFocusBox"},render:a}),O=n.hoc.connect(n.hoc.STORES.STATE_ONLY,s,void 0,void 0,!1)(A);return O.pure=A,O}),define("rEditor/rootComps/attachHighlight/attachHighlightMapper",["lodash","stateManagement","rEditor/rootComps/selectionBox/selectionBoxCommons"],function(r,e,a){"use strict";var s=e.editorPlugins.domMeasurements.selectors.getPreviewPosition,l={HeaderContainer:"OnStage_AttachTo_Header",Page:"OnStage_AttachTo_Page",FooterContainer:"OnStage_AttachTo_Footer",Container:"OnStage_AttachTo_Box",MediaBox:"OnStage_AttachTo_Box",FormContainer:"OnStage_AttachTo_Form",HoverBox:"OnStage_AttachTo_Hover_Box",BoxSlideShowSlide:"OnStage_AttachTo_Slide",StripContainerSlideShowSlide:"OnStage_AttachTo_Slide",StateBoxState:"OnStage_AttachTo_multiStateBox",StateBoxFormState:"OnStage_AttachTo_multiStateBox",StateStripState:"OnStage_AttachTo_multiStateBox",StripContainer:"OnStage_AttachTo_Strip",Column:"OnStage_AttachTo_Column",PopupContainer:"OnStage_AttachTo_PopUp",SiteRegionContainer:"OnStage_AttachTo_members_bar",repeaterItem:"OnStage_AttachTo_Repeater_Item"};function c(e,t){if(t){var o,i,n,a=(o=e,"Column"!==(n=r(i=t).thru(o.components.getType).thru(function(e){return r.split(e,".")}).last())||o.components.getSiblings(i).length?o.components.is.repeaterItem(i)?"repeaterItem":n:"StripContainer");return l[a]}}function p(e,t){var o=function(e,t){var o=e.components.layout.getRelativeToScreen(t),i=e.store.getState();if(e.components.layout.isShowOnFixedPosition(t)){var n=s(i);o.y+=n.top,o.bounding.y+=n.top,o.x+=n.left,o.bounding.x+=n.left}return o}(e,t),i=e.components.layout.isShowOnFixedPosition(t),n=a.getPosition(i);return{top:o.y-2,left:o.x-2,height:o.height,width:o.width,position:n}}return{mapStateToProps:function(e,t){var o,i,n=e.editorAPI;return{label:c(n,t.attachCandidate),position:p(n,t.attachCandidate),isMaster:(o=n,i=t.attachCandidate,o.components.isShowOnAllPages(i)||o.components.isShowOnSomePages(i))}}}}),define("rEditor/rootComps/attachHighlight/attachHighlight.rt",["react","lodash","experiment"],function(e,t,o){"use strict";return function(){return e.createElement("div",{},e.createElement("div",{className:t({"highlight-container":!0,master:this.props.isMaster}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),style:this.props.position},e.createElement("label",{},this.translateIfNeeded(this.props.label))))}}),define("rEditor/rootComps/attachHighlight/attachHighlight",["create-react-class","prop-types","util","lodash","rEditor/rootComps/attachHighlight/attachHighlightMapper","rEditor/rootComps/attachHighlight/attachHighlight.rt"],function(e,t,o,i,n,a){"use strict";var r=o.hoc,s=r.connect,l=r.STORES.EDITOR_API,c=e({displayName:"attachHighlight",mixins:[o.translationMixin],propTypes:{label:t.string,position:t.shape({top:t.number,left:t.number,height:t.number,width:t.number}),isMaster:t.bool,attachCandidate:t.object},render:a}),p=i.flow(s(l,n.mapStateToProps))(c);return p.pure=c,p}),define("rEditor/rootComps/constraintArea/constraintArea.rt",["react","lodash"],function(o,e){"use strict";return function(){return o.createElement.apply(this,["div",{},e.map(this.props.area,function(e,t){return o.createElement("div",{className:"negative-constraint-indication constraint-area",style:this.getPosition(e)},o.createElement("div",{className:"box"},o.createElement("label",{},this.translateIfNeeded("mobilemenu_Settings_fixed_area_label"))))}.bind(this))])}}),define("rEditor/rootComps/constraintArea/constraintArea",["create-react-class","core","lodash","util","rEditor/rootComps/constraintArea/constraintArea.rt"],function(e,t,o,i,n){"use strict";return e({displayName:"constraintArea",mixins:[t.mixins.editorAPIMixin,i.translationMixin],getPosition:function(e){return{top:e.top,left:e.left,height:e.height,width:e.width}},render:n})}),define("rEditor/rootComps/snapLayer/snapLayer.rt",["react","lodash"],function(o,i){"use strict";return function(){return this.props.snapData?o.createElement("div",{className:"snap-layer",key:"layer"},o.createElement.apply(this,["svg",{},i.map(this.getRectanglesDrawData(),function(e,t){return o.createElement("rect",{className:i({"components-ui-color-orange":e.isOnMasterPage}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),x:e.x,y:e.y,height:e.height,width:e.width,key:"rectDrawData"+t})}.bind(this)),i.map(this.getLines(),function(e,t){return o.createElement("line",{"data-aid":"snap-to-line",x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y,key:"snapLine"+t})}.bind(this))])):null}}),define("rEditor/rootComps/snapLayer/snapLayer",["create-react-class","prop-types","lodash","rEditor/rootComps/snapLayer/snapLayer.rt"],function(e,t,o,i){"use strict";return e({displayName:"snapLayer",propTypes:{snapData:t.array},getRectanglesDrawData:function(){return o.flatMap(this.props.snapData,"rectanglesDrawData")},getLines:function(){return o.map(this.props.snapData,"line")},render:i})}),define("rEditor/rootComps/highlightsLayer/highlightsLayerUtils",["lodash","stateManagement"],function(r,e){"use strict";var s=e.editorPlugins.domMeasurements.selectors.getPreviewPosition;return{getStyle:function(e,t,o){var i={top:(t=function(e,t,o){var i=e.store.getState();if(t=r.cloneDeep(t),e.components.layout.isShowOnFixedPosition(o)){var n=s(i);t.y+=n.top,t.bounding.y+=n.top,t.x+=n.left,t.bounding.x+=n.left}return t}(e,t,o)).y,left:t.x,width:t.width,height:t.height};if(t.rotationInDegrees){var n="rotate("+t.rotationInDegrees+"deg)";r.assign(i,{transform:n,WebkitTransform:n})}var a=e.components.layout.isShowOnFixedPosition(o)?"fixed":"absolute";return r.assign(i,{position:a}),e.components.is.fullWidth(o)&&r.assign(i,{borderLeft:0,borderRight:0}),i}}}),define("rEditor/rootComps/highlightsLayer/highlightsLayerMapper",["lodash","rEditor/rootComps/highlightsLayer/highlightsLayerUtils","stateManagement"],function(s,l,c){"use strict";return function(e){var i=e.editorAPI,t=i.store.getState(),o=c.editorPlugins.mouseActions.selectors.isPerformingMouseMoveAction(t),n=c.editorPlugins.selection.selectors.getFocusedContainer(t),a=i.components.is.spotlightStageContainer(n);if(o)return{highlights:[]};var r=c.editorPlugins.highlights.selectors.getHighlights(t);return{highlights:s.map(r,function(e){if(!i.components.is.exist(e.compRef))return s.assign({},e);var t=i.components.isShowOnAllPages(e.compRef)||i.components.isShowOnSomePages(e.compRef),o=l.getStyle(i,a?i.components.layout.getRelativeToScreen(e.compRef):e.layout,e.compRef);return s.assign({},e,{style:o,isShownOnAllPages:t})})}}}),define("rEditor/rootComps/highlightsLayer/highlightsLayer.rt",["react","lodash"],function(o,e){"use strict";return function(){return o.createElement.apply(this,["div",{},e.map(this.props.highlights,function(e,t){return o.createElement("div",{key:"highlight"+t,className:this.getHighlightClass(e),style:e.style})}.bind(this))])}}),define("rEditor/rootComps/highlightsLayer/highlightsLayer",["create-react-class","lodash","prop-types","util","rEditor/rootComps/highlightsLayer/highlightsLayerMapper","rEditor/rootComps/highlightsLayer/highlightsLayer.rt"],function(e,o,t,i,n,a){"use strict";var r=i.hoc,s=r.connect,l=r.renderWhenMutated,c=r.STORES.EDITOR_API,p=e({displayName:"highlightsLayer",propTypes:{highlights:t.arrayOf(t.object)},getHighlightClass:function(e){var t=["highlightFrame",e.type];return e.isShownOnAllPages&&t.push("show-on-all-pages"),o.compact(t).join(" ")},stopEventPropagation:function(e){e.stopPropagation()},render:a}),d=o.flow(l,s(c,n))(p);return d.pure=p,d}),define("rEditor/rootComps/anchor/anchor.rt",["react","lodash","baseUI"],function(e,t,o){"use strict";return function(){return e.createElement("div",{className:"anchorWrapper",style:{top:this.getTopPosition()}},e.createElement("div",{className:"anchor-line before"}),e.createElement("div",{className:"anchor "+(this.props.isSelected?"anchor-selected":"")},e.createElement("div",{className:"anchorContent",onMouseDown:this.onMouseDown,onContextMenu:this.props.onContextMenu,onDoubleClick:this.onDoubleClick},e.createElement(o.symbol,{className:"anchorIcon",name:"anchor"}),e.createElement("div",{className:"anchorName"},this.getAnchorName()),e.createElement(o.symbol,{className:"rightIcon",name:this.isLocked()?"anchorLock":"anchorDragHandle"}))),e.createElement("div",{className:"anchor-line after-with-sections-reorganize"}))}}),define("rEditor/rootComps/anchor/anchor",["create-react-class","prop-types","lodash","core","rEditor/utils/mouseMoveActions/baseDoubleClick","rEditor/rootComps/anchor/anchor.rt"],function(e,t,o,i,n,a){"use strict";return e({displayName:"anchor",propTypes:{compRef:t.object.isRequired,isSelected:t.bool.isRequired},mixins:[i.mixins.editorAPIMixin],getInitialState:function(){return this.editorAPI=this.getEditorAPI(),{}},getAnchorName:function(){return this.editorAPI.components.data.get(this.props.compRef).name},onDoubleClick:function(e){var t={evt:e,comp:[this.props.compRef]};n.doubleClick(this.getEditorAPI(),t)},getTopPosition:function(){return this.editorAPI.components.layout.getRelativeToStructure(this.props.compRef).y},isLocked:function(){return!1},render:a})}),define("rEditor/rootComps/anchor/anchorsContainer.rt",["react","lodash","rEditor/rootComps/anchor/anchor"],function(o,e,i){"use strict";return function(){return o.createElement.apply(this,["div",{className:e({"anchors-container":!0,"mobile-editor":this.editorAPI.isMobileEditor()}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},e.map(this.getAnchors(),function(e,t){return o.createElement(i,{key:"anchor"+t,compRef:e,onContextMenu:this.props.onContextMenu,isSelected:this.isSelectedComp(e)})}.bind(this))])}}),define("rEditor/rootComps/anchor/anchorsContainer",["create-react-class","lodash","core","rEditor/rootComps/anchor/anchorsContainer.rt"],function(e,t,o,i){"use strict";return e({displayName:"stageComps",mixins:[o.mixins.editorAPIMixin],getInitialState:function(){return this.editorAPI=this.getEditorAPI(),{}},getAnchors:function(){var e=this.editorAPI.dsRead.pages.getReference(this.editorAPI.dsRead.pages.getFocusedPageId());return this.editorAPI.components.get.byType("wysiwyg.common.components.anchor.viewer.Anchor",e)},isSelectedComp:function(e){return this.editorAPI.selection.isComponentSelected(e)},render:i})}),define("rEditor/rootComps/permanentBorder/permanentBorder.rt",["react","lodash"],function(e,t){"use strict";return function(){return!this.props.isComponentSelected&&this.props.bounding?e.createElement("div",{key:"permanentComponentBorder",className:"permanent-component-border",style:this.getStyle()}):null}}),define("rEditor/rootComps/permanentBorder/permanentBorder",["create-react-class","stateManagement","lodash","prop-types","util","rEditor/rootComps/permanentBorder/permanentBorder.rt"],function(e,t,n,o,i,a){"use strict";var r=t.permanentBorder.selectors,s=e({displayName:"permanentBorder",propTypes:{isComponentSelected:o.bool,bounding:o.object},getStyle:function(){return{width:n.get(this.props.bounding,"width",0),height:n.get(this.props.bounding,"height",0),left:n.get(this.props.bounding,"x",0),top:n.get(this.props.bounding,"y",0)}},render:a});var l=i.hoc.connect(i.hoc.STORES.EDITOR_API,function(e){var t=e.editorAPI,o=e.state,i=r.getComponent(o);return i?{bounding:n.get(t.components.layout.getRelativeToScreen(i),"bounding"),isComponentSelected:t.selection.isComponentSelected(i)}:void 0},function(){})(s);return l.pure=s,l}),define("rEditor/rootComps/selectionBox/hoverBox.rt",["react","lodash","baseUI","rEditor/rootComps/selectionBox/componentLabels","experiment"],function(e,t,o,i,n){"use strict";return function(){return e.createElement("div",{style:this.getHoverBoxStyles(),className:t(this.getClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},e.createElement(i,t.assign({},{key:"newComponentLabel",showComponentType:this.shouldShowComponentType(),infoText:"PLATFORM_ONSTAGE_CONNECTED_ELEMENT_LABEL",isLabelLarge:this.isRootComponent(this.getEditorAPI(),this.props.hoveredComp),isLabelBelowLine:this.isSiteHeaderHovered(this.getEditorAPI(),this.props.hoveredComp),componentType:this.getComponentType(),labelInlineStyles:this.getHoverBoxLabelStyles(),componentUIColor:this.getComponentUIColor(),isPinnedToPage:this.isCompPinned(),isLabelBottom:this.props.isLabelBottom,shouldShowConnectionIndication:this.shouldShowConnectionIndication()},this.getNicknameProps())))}}),define("rEditor/rootComps/selectionBox/hoverBox",["reactDOM","lodash","constants","create-react-class","core","stateManagement","rEditor/rootComps/selectionBox/hoverBox.rt","util"],function(n,i,o,e,t,a,r,s){"use strict";var l=a.editorPlugins.domMeasurements.selectors,c=l.getPreviewPosition,p=l.getViewPort,d=a.editorPlugins.platform.selectors.isConnectedToDataBindingController,u=a.editorPlugins.components.selectors;function g(e,t,o){return a=t,r=o,s.elementUtils.getOuterWidth(a)/s.elementUtils.getOuterWidth(r)<2?(i=e,n=o,t.offset().left-n.width()>i.x?m.LEFT:m.RIGHT):m.INNER;var i,n,a,r}var m={INNER:"inner",LEFT:"left",RIGHT:"right"};i.noop(m);return e({displayName:"hoverBox",mixins:[t.mixins.editorAPIMixin],getInitialState:function(){return{labelPosition:m.INNER,shouldCalculateLabelPosition:!0}},componentDidMount:function(){var e=this.getEditorAPI().store.getState();if(this.state.shouldCalculateLabelPosition){var t=p(e),o=n.findDOMNode(this),i=n.findDOMNode(this.refs.label);this.setState({labelPosition:g(t,o,i),shouldCalculateLabelPosition:!1})}},componentDidUpdate:function(){if(this.state.shouldCalculateLabelPosition){var e=n.findDOMNode(this),t=n.findDOMNode(this.refs.label);this.setState({labelPosition:g(e,t),shouldCalculateLabelPosition:!1})}},componentWillReceiveProps:function(e){e.hoveredComp.id!==this.props.hoveredComp.id&&this.setState({shouldCalculateLabelPosition:!0})},isRootComponent:function(e,t){return"SITE_FOOTER"===t.id||"SITE_HEADER"===t.id||t.id===e.dsRead.pages.getFocusedPageId()},isSiteHeaderHovered:function(e,t){return"SITE_HEADER"===t.id},shouldShowConnectionIndication:function(){var e=this.getEditorAPI();return d(this.props.hoveredComp,e.dsRead)},isHoveredSelectedComp:function(){var e=this.getEditorAPI(),t=e.selection.getSelectedComponents();return e.utils.isSameRef(t,this.props.hoveredComp)},isConnectedToControllers:function(e){return 0<e.dsRead.platform.controllers.connections.get(this.props.hoveredComp).length},getComponentType:function(){return this.isHoveredSelectedComp()?"":this.getEditorAPI().components.getDisplayName(this.props.hoveredComp)},getHoverBoxStyles:function(){var e=function(e,t){var o=e.components.layout.getRelativeToScreen(t),i=e.store.getState();if(e.components.layout.isShowOnFixedPosition(t)){var n=c(i);o.y+=n.top,o.bounding.y+=n.top,o.x+=n.left,o.bounding.x+=n.left}return o}(this.getEditorAPI(),this.props.hoveredComp),t={top:e.y-1,left:e.x-1,width:e.width,height:e.height};if(e.rotationInDegrees){var o="rotate("+e.rotationInDegrees+"deg)";i.assign(t,{transform:o,WebkitTransform:o})}return this.getEditorAPI().components.is.fullWidth(this.props.hoveredComp)&&i.assign(t,{borderLeft:0,borderRight:0}),t},getClasses:function(){var e=this.getEditorAPI(),t=this.props.hoveredComp,o=e.components.isShowOnAllPages(t),i=e.components.isShowOnSomePages(t);return{"hover-box":!0,"components-background-color":!e.components.is.page(t),"components-ui-color-orange":o||i,"fixed-position":e.components.layout.isShowOnFixedPosition(t),overlay:this.props.overlay}},isShownOnAllPages:function(){return this.getEditorAPI().components.isShowOnAllPages(this.props.hoveredComp)},getComponentUIColor:function(){return e=this.getEditorAPI(),t=this.props.hoveredComp,e.components.isShowOnAllPages(t)||e.components.isShowOnSomePages(t)?o.COMPONENT_UI_COLORS.ORANGE:o.COMPONENT_UI_COLORS.BLUE;var e,t},getHoverBoxLabelStyles:function(){var e=this.getEditorAPI();if(e.components.is.fullWidth(this.props.hoveredComp))return{left:e.isMobileEditor()?0:e.siteSegments.getPagesContainerAbsLayout().x+2}},getIndicatorClasses:function(){var e=this.getEditorAPI(),t=this.props.hoveredComp,o=e.components.isShowOnAllPages(t),i=e.components.isShowOnSomePages(t);return{"components-ui-color-orange":o||i}},shouldShowComponentType:function(){return this.props.hoveredComp&&!(this.getEditorAPI().developerMode.isEnabled()&&this.shouldShowConnectionIndication())},isCompPinned:function(){return this.getEditorAPI().components.layout.isPinned(this.props.hoveredComp)&&!this.isHoveredSelectedComp()},getNicknameProps:function(){var e=this.getEditorAPI();if(!this.props.hoveredComp||!e.developerMode.isEnabled()||this.isHoveredSelectedComp())return{showComponentNickname:!1};var t=u.getNickname(this.props.hoveredComp,e.dsRead);if(!t)return{showComponentNickname:!1};var o={showComponentNickname:!0,componentNickname:"#"+t},i=u.getSecondaryNickname(this.props.hoveredComp,e);return i&&(o.secondaryNickname="#"+i),o},render:r})}),define("rEditor/rootComps/selectionBox/overlay.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",{className:t({overlay:!0,visible:this.state.shouldShowOverlay}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),style:this.getStyles()},"\n    ",this.getOverlay(),"\n")}}),define("rEditor/rootComps/selectionBox/overlay",["create-react-class","lodash","core","rEditor/rootComps/selectionBox/overlay.rt"],function(e,t,o,i){"use strict";return e({displayName:"overlay",mixins:[o.mixins.editorAPIMixin],getInitialState:function(){return{shouldShowOverlay:!1}},overlayProps:{},getOverlay:function(){return this.getEditorAPI().components.is.getOverlay(this.state.hoveredComp)||""},getStyles:function(){return this.overlayProps=this.getEditorAPI().components.is.getOverlayProperties(this.state.hoveredComp),this.overlayProps?(e=this.overlayProps,t=function(){return this.leaveAnimationId?"leave":"enter"}.call(this),e[t]?{transitionDuration:(e[t].duration||0)+"ms",transitionDelay:(e[t].delay||0)+"ms"}:{}):{};var e,t},componentWillReceiveProps:function(e){var t=e.hoveredComp&&this.getEditorAPI().components.is.exist(e.hoveredComp)&&this.getEditorAPI().components.is.shouldBeOverlayed(e.hoveredComp);if(!this.state.hoveredComp||this.getEditorAPI().components.is.exist(this.state.hoveredComp)){if(this.getEditorAPI().overlay.shouldUpdate()){if(t)this.componentWillEnter(e.hoveredComp);else{if(!this.state.shouldShowOverlay)return;this.componentWillLeave()}this.setState({shouldShowOverlay:t})}}else this.setState({shouldShowOverlay:!1,hoveredComp:null})},componentWillEnter:function(e){this.leaveAnimationId&&(this.leaveAnimationId=window.clearTimeout(this.leaveAnimationId)),this.setState({hoveredComp:e})},componentWillLeave:function(){this.leaveAnimationId=window.setTimeout(this.componentHasLeft,this.overlayProps.leave.duration)},componentHasLeft:function(){this.leaveAnimationId=null,this.setState({hoveredComp:null})},render:i})}),define("rEditor/rootComps/spotlightStage/spotlightStage.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",{},this.props.color?e.createElement("svg",{key:"spotlight-svg",style:{fill:this.props.color},version:"1.1",className:"spotlight-stage-container",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:this.getViewBox()},e.createElement("path",{className:"svg-shape",d:this.getPath(),fillRule:"evenodd"})):null)}}),define("rEditor/rootComps/spotlightStage/spotlightStage",["create-react-class","prop-types","lodash","util","constants","stateManagement","rEditor/rootComps/spotlightStage/spotlightStage.rt"],function(e,t,c,o,i,p,n){"use strict";var a=e({displayName:"SpotlightStage",propTypes:{focusedContainer:t.object.isRequired,compPosition:t.object.isRequired,stageLayout:t.object.isRequired,siteHeight:t.number.isRequired,heightRelativeToStructure:t.number.isRequired,isMobileEditor:t.bool.isRequired,clearSelectedComponents:t.func.isRequired,setFocusedContainer:t.func.isRequired,setCompScroll:t.func.isRequired,setCompScrollBy:t.func.isRequired},getStageSize:function(){var e=i.ROOT_COMPS.MOBILE_EDITOR.MOBILE_FRAME_WIDTH;return c.assign({x:0,y:0,height:Math.max(this.props.stageLayout.height,this.props.siteHeight),width:this.props.stageLayout.width},this.props.isMobileEditor?{x:(this.props.stageLayout.width-e)/2,width:e}:{})},getViewBox:function(){var e=this.getStageSize();return e.x+" "+e.y+" "+e.width+" "+e.height},getPath:function(){var e=this.getStageSize();return"M"+e.x+" "+e.y+" \n            h"+e.width+" v"+e.height+" h-"+e.width+" z \n            M"+this.props.compPosition.x+" "+this.props.compPosition.y+"\n            h"+this.props.compPosition.width+" \n            v"+this.props.compPosition.height+" \n            h-"+this.props.compPosition.width+" \n            z"},_scrollFocusedContainer:function(e){e.preventDefault(),e.stopPropagation(),this.props.setCompScrollBy(this.props.focusedContainer,0,e.deltaY)},componentWillReceiveProps:function(e){(this.props.compPosition.height!==e.compPosition.height||this.props.heightRelativeToStructure!==e.heightRelativeToStructure)&&this.props.setCompScrollBy(this.props.focusedContainer,0,0)},componentDidMount:function(){var t=this;this.scrollFocusedContainer=function(e){return t._scrollFocusedContainer(e)},window.addEventListener("wheel",this.scrollFocusedContainer)},componentWillUnmount:function(){this.props.setCompScroll(this.props.focusedContainer,0,0),window.removeEventListener("wheel",this.scrollFocusedContainer)},render:n});return c.flow(o.hoc.connect(o.hoc.STORES.STATE_AND_DS,function(e){var t=e.state,o=e.dsRead,i=p.spotlightStage.selectors.getConfig(t).color,n=p.selection.selectors.getFocusedContainer(t),a=p.editorPlugins.components.selectors.getLayoutRelativeToScreen(o,n),r=o.components.layout.getRelativeToStructure(n).height,s=p.domMeasurements.selectors.getStageLayout(t),l=p.mobile.selectors.isMobileEditor(t);return{color:i,heightRelativeToStructure:r,focusedContainer:n,compPosition:a.fixedPosition?c.defaultsDeep({y:a.y+p.domMeasurements.selectors.getScrollMeasurements(t).scrollTop},a):a,stageLayout:s,siteHeight:o.site.getHeight(),isMobileEditor:l}},function(o){var a=i.COMPONENTS_STORE_KEYS.SCROLL_COUNTER,r=function(){return o(function(e,t){var o,i,n=p.selection.selectors.getFocusedContainer(t());e(p.componentsStore.actions.updateComponentStore(n,a,(o=t(),i=n,(p.componentsStore.selectors.getComponentStoreData(o,{comp:i,key:a})||0)+1)))})};return{clearSelectedComponents:function(){return o(p.selection.actions.clearSelectedComponents())},setFocusedContainer:function(e){return o(p.selection.actions.setFocusedContainer(e))},setCompScroll:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return o(function(e,t,o){var i;return(i=o.editorAPI.documentServices.components.scroll).to.apply(i,n)})},setCompScrollBy:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return o(function(e,t,o){var i;(i=o.editorAPI.documentServices.components.scroll).by.apply(i,n.concat([function(){r()}]))})}}}),o.hoc.withConditionalRender(o.hoc.STORES.STATE_ONLY,function(e){var t=e.state;return!!p.selection.selectors.getFocusedContainer(t)}))(a)}),define("rEditor/rootComps/lasso/lasso.rt",["react","lodash"],function(o,i){"use strict";return function(){return o.createElement("div",{className:"lasso-layer"},o.createElement.apply(this,["svg",{className:"lasso-highlights"},o.createElement("rect",i.assign({},{className:"lasso-rect"},this.props.lassoLayout)),i.map(this.props.candidates,function(e,t){return o.createElement("rect",i.assign({},{className:i({"lasso-candidate":!0,"show-on-all-pages":this.getEditorAPI().components.isShowOnAllPages(e.component)}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:t},e.layout.bounding))}.bind(this))]))}}),define("rEditor/rootComps/lasso/lasso",["create-react-class","prop-types","lodash","core","rEditor/rootComps/lasso/lasso.rt"],function(e,t,o,i,n){"use strict";return e({displayName:"lasso",mixins:[i.mixins.editorAPIMixin],propTypes:{lassoLayout:t.shape({x:t.number,y:t.number,width:t.number,height:t.number}),candidates:t.arrayOf(t.shape({component:t.object,layout:t.object}))},render:n})}),define("rEditor/rootComps/mouseCatcher.rt",["react","lodash","rEditor/rootComps/compControls/compControls","rEditor/rootComps/attachHighlight/attachHighlight","rEditor/rootComps/constraintArea/constraintArea","rEditor/rootComps/snapLayer/snapLayer","rEditor/rootComps/highlightsLayer/highlightsLayer","rEditor/rootComps/anchor/anchorsContainer","rEditor/rootComps/permanentBorder/permanentBorder","rEditor/rootComps/selectionBox/hoverBox","rEditor/rootComps/selectionBox/overlay","rEditor/rootComps/spotlightStage/spotlightStage","rEditor/rootComps/lasso/lasso"],function(t,e,o,i,n,a,r,s,l,c,p,d,u){"use strict";return function(){return t.createElement("div",{className:e({parentSizeAbs:!0,mouseCatcher:!0,draggable:this.isCompDraggable()}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onDoubleClick:this.onDoubleClick,onContextMenu:this.props.onContextMenu,onMouseMove:this.onMouseMove,onMouseLeave:this.clearHoverBox},t.createElement(p,{hoveredComp:this.props.hoveredComp}),this.props.constraintArea?t.createElement(n,{key:"constraintArea",area:this.props.constraintArea}):null,this.props.attachCandidate?t.createElement(i,{key:"attachHighlight",attachCandidate:this.props.attachCandidate}):null,this.props.lassoLayout?t.createElement(u,{key:"lassoLayout",lassoLayout:this.props.lassoLayout,candidates:this.props.lassoCandidates}):null,1===this.props.siteScale&&this.props.hoveredComp&&this.getEditorAPI().components.is.exist(this.props.hoveredComp)&&!this.props.isPinMode?t.createElement(c,{overlay:this.props.hoverBoxOverlay,hoveredComp:this.props.hoveredComp,key:"hoverBox",isLabelBottom:this.isLabelBottom()}):null,t.createElement(r,{}),this.shouldShowSpotlightStage()?t.createElement(d,{key:"spotlightStage"}):null,t.createElement(l,{}),1!==this.props.siteScale||e.isEmpty(this.props.selectedComponents)?null:t.createElement(o,{key:"compControls",isDragging:this.props.isDragging,isResizing:this.props.isResizing,isRotating:this.props.isRotating,performingMouseMoveAction:this.props.performingMouseMoveAction,hoveredComp:this.props.hoveredComp,clearHoverBox:this.clearHoverBox,panel:this.props.compPanel,previewPosition:this.props.previewPosition,siteScale:this.props.siteScale,isPinMode:this.props.isPinMode,onContextMenu:this.props.onContextMenu,isSectionDragging:this.props.isSectionDragging,attachCandidate:this.props.attachCandidate,appContainer:this.props.appContainer,tabIndicationState:this.props.tabIndicationState,applyModeFromClipboardSuggestion:this.props.applyModeFromClipboardSuggestion,isLabelBottom:this.isLabelBottomEdit(),isIndicatorBottom:this.isIndicatorBottom()}),t.createElement(a,{key:"snapLayer",snapData:this.props.snapData}),this.props.previewMode||!this.props.editorIsInit||this.props.isPinMode||this.shouldShowSpotlightStage()?null:t.createElement(s,{key:"anchorsContainer",onContextMenu:this.props.onContextMenu}),this.shouldShowContainerMarginsIndicator()?function(){var e=this.getContainerMarginsIndicatorStyles(this.getContainerToShowMarginsIndicator());return t.createElement("div",{key:"containerMarginsIndicator",className:"margins-indicator",style:e.indicator},e.marginLeft?t.createElement("div",{key:"leftContainerMarginIndicator",className:"left",style:{width:e.marginLeft}}):null,e.marginRight?t.createElement("div",{key:"rightContainerMarginIndicator",className:"right",style:{width:e.marginRight}}):null)}.apply(this,[]):null,this.shouldShowPageMarginsIndicator()?function(){var e=this.getPageMarginsIndicatorStyles();return t.createElement("div",{key:"pageMarginsIndicator",className:"margins-indicator",style:e.indicator,"data-aid":"pageOutOfGridlinesIndication"},e.marginLeft?t.createElement("div",{key:"leftPageMarginIndicator",className:"left",style:{width:e.marginLeft}}):null,e.marginRight?t.createElement("div",{key:"rightPageMarginIndicator",className:"right",style:{width:e.marginRight}}):null)}.apply(this,[]):null)}}),define("rEditor/utils/mouseMoveActions/baseDrag",["lodash","core","coreBi","util","platformEvents","constants","stateManagement"],function(y,b,t,i,o,n,l){"use strict";var v=l.editorPlugins.domMeasurements.selectors.translateToViewerCoordinates,a=l.domMeasurements.selectors.getStageRect,e=i.array,S=e.isMultiselect,c=e.asArray,r=15,p={"wysiwyg.viewer.components.Group":!0},E=b.utils.AttachHandler,d=b.utils.SnapToHandler,u=b.utils.layoutTransitionsUtil,g=b.utils.DragConstraintsHandler,P=void 0,C=void 0,m=void 0,T=void 0,_=void 0,f=void 0,I={top:!0,right:!0,bottom:!0,left:!0,centerX:!0,centerY:!0},M=!1,A=!1,O=void 0,R=void 0,w=void 0,D=void 0,k=void 0,x=void 0,N=void 0,L=void 0,B=void 0,F=void 0,U=void 0,h=void 0,s=void 0,G=i.keyboardShortcuts.CONTEXTS.DRAG,H={esc:function(){R.mouseActions.turnOffMouseEvents();for(var e=0;e<C.length;e++)R.components.layout.update(C[e],B[e],!0);V(),R.bi.event(t.events.shortcuts.esc_during_action,{action:n.MOUSE_ACTION_TYPES.DRAG})}};i.keyboardShortcuts.registerContext(G,H);var V=function(){s&&(i.keyboardShortcuts.setContext(s),s=null,i.fedopsLogger.interactionEnded(i.fedopsLogger.INTERACTIONS.SET_DRAG_SHORTCUT_CONTEXT))};function W(e,t){var o={getCurrentPageId:R.dsRead.pages.getCurrentPageId,isShownOnAllPages:R.dsRead.components.isShowOnAllPages,isShownOnSomePages:R.dsRead.components.isShowOnSomePages,stageRect:a(R.store.getState())};return i.componentsDistanceUtils.getEqualDistancesData(o,e,k.getSnapCandidates(),t)}function z(e,t){e&&(k.equalDistanceLockedPosition=t)}function q(e,t,o){return k.equalDistanceLockedPosition&&!e&&(Math.abs(o[t]-k.equalDistanceLockedPosition[t])<10?(o[t]=k.equalDistanceLockedPosition[t],o.bounding[t]=k.equalDistanceLockedPosition[t],"y"===t&&(k.verticalEqualDistanceData=W(o,"y")),k.horizontalEqualDistanceData=W(o,"x")):k.equalDistanceLockedPosition=null),o}function j(e,t,o){var i,n=y.defaults({},_defineProperty({},o,e.bounding[o]+t[o]),e.bounding);return y.defaults({},(_defineProperty(i={},o,e[o]+t[o]),_defineProperty(i,"bounding",n),i),e)}function Y(e,t){if(k){var o=function(){if(k)return{horizontalEqualDistanceLines:k.horizontalEqualDistanceData?k.horizontalEqualDistanceData.horizontalEqualDistanceLines:[],verticalEqualDistanceLines:k.verticalEqualDistanceData?k.verticalEqualDistanceData.verticalEqualDistanceLines:[]}}(),i=k.getSnapData(e.bounding,I,h,o,"DRAG",t);R.snapData.set(i)}}function K(e){var t,o,i=(t=e,o=D||w,{x:Math.abs(o.x-t.x),y:Math.abs(o.y-t.y)});return r<i.x||r<i.y}function X(){if(T){var e,i=y.map(f,"component"),o=y.map(f,function(e){var t=e.attachUtil.getCurrentAttachCandidate(null,i),o=e.component;return t.candidateRef?{attachCandidate:t,component:o}:{component:o}}),t=(e=o,y.reduce(e,function(e,t){var o=t.attachCandidate,i=t.component;return o&&o.candidateRef&&(e[o.candidateRef.id]?e[o.candidateRef.id].components.push(i):e[o.candidateRef.id]={attachCandidate:o,components:[i]}),e},{})),n=y.partition(t,{attachCandidate:{candidateStatus:E.ATTACH_CANDIDATE_STATUSES.INVALID}}),a=_slicedToArray(n,2),r=a[0],s=a[1];y(r).flatMap("components").thru(R.components.remove).value();var l=y(s).filter({attachCandidate:{candidateStatus:E.ATTACH_CANDIDATE_STATUSES.VALID}}).map(function(e){return R.components.setContainer(e.components,e.attachCandidate.candidateRef)}).compact().value();if(!y.isEmpty(l)){var c=y.some(i,R.components.isShowOnSomePages);R.dsActions.waitForChangesApplied(function(){var e=y.some(l,R.components.isShowOnSomePages);c&&!e?R.panelHelpers.openDetachedFromSOSPPanel():!c&&e&&R.panelHelpers.openAttachToSOSPPanel();var t=y(o).reject("attachCandidate").map("component").value();R.selection.selectComponentByCompRef(y.flatten(l).concat(t))})}}}function Z(e){S(C)?X():(!function(e){if(T){var t={x:e.clientX,y:e.clientY},o=_.getCurrentAttachCandidate(null,t),i=o.candidateRef,n=o.candidateStatus;if(n!==E.ATTACH_CANDIDATE_STATUSES.INVALID){if(n===E.ATTACH_CANDIDATE_STATUSES.VALID&&i){var a=R.components.isShowOnSomePages(C),r=R.components.setContainer(C,i);R.dsActions.waitForChangesApplied(function(){var e=R.components.isShowOnSomePages(r);a&&!e?R.panelHelpers.openDetachedFromSOSPPanel():!a&&e&&R.panelHelpers.openAttachToSOSPPanel()})}}else R.components.remove(C)}}(e),_.clearHighlightAttachCandidate(!1)),O.removeHighlightDragConstraints(),k=null,R.snapData.clear(),R.dsActions.waitForChangesApplied(function(){R.history.add("Dragged component")}),R.openCompOutOfGridPanelIfNeeded(C),R.dsActions.renderPlugins.setCompsToShowOnTop(null),R.dsActions.renderPlugins.setCompsToShowWithOpacity(null),R.dsActions.platform.notifyAppsOnCustomEvent(o.factory.componentDragEnded({compRef:C[0]})),M=!1}var Q={start:function(e,t){if(R=e||R,C=t.selectedComp,w=t.initMousePosition,D=null,x=l.editorPlugins.componentMetaData.selectors.isHorizontallyMovable(c(t.selectedComp),R.dsRead),N=R.components.is.verticallyMovable(t.selectedComp),L=R.components.layout.getRelativeToScreen(C),h=R.dsRead.pages.isWidgetPage(R.pages.getFocusedPageId()),t.initMousePosition){var i,n;t.shouldDragAndCopy&&(n=i=void 0,R.components.is.duplicatable(C)&&1===C.length&&R.components.getChildren(C).length<1&&y.forEach(C,function(t){i=R.components.serialize(t),n=R.components.getContainer(t),m=R.components.getNickname(t);var o=R.components.add(n,i);R.waitForChangesApplied(function(){R.components.code.setNickname(t,"tempCompNickName"+Date.now());var e=R.components.getNickname(o);R.components.code.setNickname(o,m),R.components.code.setNickname(t,e)})})),A=!0;var o,a,r,s=R.components.layout.getRelativeToScreen(C);F=y.map(C,function(e){return R.components.layout.getRelativeToScreen(e)}),B=y.map(C,function(e){return R.components.layout.get(e)}),o=C,T=!y.some(o,function(e){return R.components.is.groupedComponent(e)}),S(C)?(a=C,f=y.map(a,function(e){return{component:e,attachUtil:new E(R,{comp:e,layout:R.components.layout.getRelativeToScreen(e)},E.TYPES.COMP)}})):_=new E(R,{layout:s,comp:C},E.TYPES.COMP),O=new g(R,C),k=new d(R,C),P=new u.Drag(L,w,F),r=C,U=y.map(r,function(e){return!!p[R.components.getType(R.components.getContainer(e))]})}else A=!1},on:function(e){var t,o,i,n,a,r,s=R.store.getState(),l=v(s,e),c={x:l.pageX,y:l.pageY,isShiftPressed:e.shiftKey},p=e.altKey;if(r=l,M||A&&(2<Math.abs(r.pageX-w.x)||2<Math.abs(r.pageY-w.y))){R.selection.setIsMouseUpSelectionEnabled(!1),M||(M=!0,R.dsActions.renderPlugins.setCompsToShowOnTop(y.map(C,"id")),R.dsActions.renderPlugins.setCompsToShowWithOpacity(y.map(C,"id"),.9));var d=P.getLayout(c);if(S(C)&&(d=b.utils.updateLayoutUtil.getLayoutRelativeToScreenAfterConstraints(R,C,d,L)),x||(d.x=L.x),N||(d.y=L.y),R.getViewTools().snapToEnabled&&(K(c)?R.snapData.clear():(d.bounding=R.utils.getBoundingLayout(d),Y(d=function(e){if(k){var t=k.getClosestLayoutDistance(R,e.bounding,I),o=Math.abs(t.y)<5,i=Math.abs(t.x)<5;o&&(e=j(e,t,"y"),k.horizontalEqualDistanceData=W(e,"x"),z(k.horizontalEqualDistanceData.isHorizontalEqualDistanceFound,k.horizontalEqualDistanceData.compLayoutInEqualDistanceFound),e=q(i,"x",e)),i&&(e=j(e,t,"x"),k.verticalEqualDistanceData=W(e,"y"),k.horizontalEqualDistanceData=W(e,"x"),z(k.horizontalEqualDistanceData.isHorizontalEqualDistanceFound,k.horizontalEqualDistanceData.compLayoutInEqualDistanceFound),z(k.verticalEqualDistanceData.isVerticalEqualDistanceFound,k.verticalEqualDistanceData.compLayoutInEqualDistanceFound),e=q(o,"y",e))}return e}(d),p))),T&&!S(C)){var u=_.getCurrentAttachCandidate(null,{x:l.clientX,y:l.clientY}),g=u.candidateRef;u.candidateStatus===E.ATTACH_CANDIDATE_STATUSES.VALID&&g?(_.highlightAttachCandidate(g),O.highlightDragConstraints()):_.clearHighlightAttachCandidate(!1)}for(var m=P.getBoundComponentLayouts(d),f=0;f<C.length;f++){var h=(t=m[f],o=F[f],i=B[f],n=t.x-o.x+i.x,a=t.y-o.y+i.y,y.defaults({x:n,y:a},t));U[f]?R.components.layout.updateRelativeToScreen(C[f],m[f],!0):R.components.layout.update(C[f],h,!0)}}D=c},end:function(e){if(M){var t=R.store.getState();Z(v(t,e))}w=null},type:n.MOUSE_ACTION_TYPES.DRAG};return y.merge(Q,{setContext:function(){s||(s=i.keyboardShortcuts.getContext(),i.keyboardShortcuts.setContext(G),i.fedopsLogger.interactionStarted(i.fedopsLogger.INTERACTIONS.SET_DRAG_SHORTCUT_CONTEXT))},unsetContext:V}),Q}),define("rEditor/utils/mouseMoveActions/dragAttempt",["lodash","stateManagement","coreBi","constants"],function(i,n,a,e){"use strict";var r=n.editorPlugins.pinMode.selectors,s=n.editorPlugins.pinMode.actions,l=void 0,c=void 0,p=void 0,d=void 0,u=5,g=n.editorPlugins.selection.selectors;return{start:function(e,t){d=e,l=!1,c=t.initMousePosition,p=t.selectedComp},on:function(e){var t,o=Math.abs(e.pageX-c.x),i=Math.abs(e.pageY-c.y);(l=l||(t=i,u<=o||u<=t))&&d.selection.setIsMouseUpSelectionEnabled(!1)},end:function(){var e=d.store,t=e.getState(),o=r.isOpen(t);l&&d.components.layout.isPinned(p)&&!o&&(e.dispatch(s.open("on_drag")),e.dispatch(n.editorPlugins.bi.actions.event(a.events.pinToScreen.DRAG_ATTEMPT,{component_type:g.getSelectedComponentType(t,d.dsRead),component_id:i.get(p[0],"id")})))},type:e.MOUSE_ACTION_TYPES.DRAG_ATTEMPT}}),define("rEditor/utils/lassoMouseMoveActions/lassoDrag",["lodash","util","coreBi","stateManagement","constants"],function(r,s,i,e,t){"use strict";var a=["SITE_PAGES","PAGES_CONTAINER","SITE_HEADER","SITE_FOOTER"],l=4,c=void 0,p=void 0,d=void 0,u=void 0,g=void 0,m=void 0,f=void 0,h=void 0,y=void 0,b=void 0,v=e.editorPlugins.domMeasurements.selectors.translateToViewerCoordinates;function S(e){var t,o,i,n=m.components.layout.getRelativeToScreen(e);return"wysiwyg.viewer.components.WRichText"===m.components.getType(e)&&(t=e,o=n,(i=m.components.layout.getEffectiveTextDimensions(t))&&(o.width=i.width,o.height=i.height,o.bounding.width=i.width,o.bounding.height=i.height,o.x+=i.dx,o.y+=i.dy,o.bounding.x+=i.dx,o.bounding.y+=i.dy)),{component:e,layout:n}}function E(e){return m.components.is.fullWidth(e.component)||m.components.layout.isHorizontallyStretchedToScreen(e.component)?"fullWidth":"standard"}return{start:function(e,t){var o=(m=e).dsRead.pages.getFocusedPageId();h=t.selectedComponents;var i=a.concat(r.map(h,"id")),n=m.components.getAllComponents(o,function(e){return!r.includes(i,e.id)&&!m.components.is.page(e)});f=t.prevSelectedComps,y=f!==h&&t.initMousePosition.isSpecialKeyPressed,b=m.selection.isSingleSelectionComponent(h),u=r.clone(t.initMousePosition),g=!1,p=[],d=r.pick(u,["x","y"]),c=r(n).map(S).groupBy(E).value()},on:function(e){var t,o,i,n,a;(function(e){if(g)return!0;var t=m.store.getState(),o=v(t,e),i=o.pageY,n=o.pageX,a=Math.abs(n-u.x),r=Math.abs(i-u.y);return g=l<a&&l<r})(e)&&(b&&(m.selection.deselectComponents(),b=!1),y&&(m.selection.selectComponentByCompRef(f),y=!1),t=e,o=m.store.getState(),i=v(o,t),n=Math.min(i.pageX,u.x),a=Math.min(i.pageY,u.y),d={x:n,y:a,width:Math.max(i.pageX,u.x)-n,height:Math.max(i.pageY,u.y)-a},c.standard=r.isUndefined(c.standard)?[]:c.standard,c.fullWidth=r.isUndefined(c.fullWidth)?[]:c.fullWidth,p=r(c.standard).concat(c.fullWidth).filter(function(e){return s.layoutUtils.isLayoutIntersectsRect(e.layout.bounding,d)}).filter(function(e){return!m.columns.isColumn(e.component)}).filter(function(e){return m.components.is.selectable(e.component)}).value(),m.lasso.setCandidates(p),m.lasso.setLayout(d))},end:function(e){var t=s.browserUtil.isSpecialKeyPressed(e);if(!r.isEmpty(p)){var o=r.map(p,"component");1<o.length&&(o=r.reject(o,m.selection.isSingleSelectionComponent)),(1<o.length||1===o.length&&f&&0<f.length)&&m.bi.event(i.events.selection.MULTISELECT,{num_of_elements_selected:o.length,selection_method:"lasso"}),m.closeCompPanelIfExists(),t?m.selection.addComponentToSelectionByRef(o):m.selection.selectComponentByCompRef(o)}m.lasso.clear()},type:t.MOUSE_ACTION_TYPES.LASSO}}),define("rEditor/rootComps/mouseCatcher",["reactDOM","create-react-class","prop-types","zepto","lodash","rEditor/rootComps/mouseCatcher.rt","core","util","rEditor/utils/mouseMoveActions/baseDrag","rEditor/utils/mouseMoveActions/dragUtils","rEditor/utils/mouseMoveActions/dragAttempt","rEditor/utils/lassoMouseMoveActions/lassoDrag","constants","stateManagement"],function(e,t,o,i,s,n,a,l,r,c,p,d,u,g){"use strict";var m=l.array.isMultiselect,f=g.editorPlugins.domMeasurements.selectors,h=f.getViewPort,y=f.translateToViewerCoordinates,b=["wysiwyg.viewer.components.PagesContainer","wysiwyg.viewer.components.PageGroup","wysiwyg.common.components.anchor.viewer.Anchor"];function v(e,t){if(!e.components.is.exist(t))return!1;var o=e.selection.getSelectedComponents(),i=e.components.getType(t),n=g.editorPlugins.selection.selectors.getFocusedContainer(e.store.getState());return l.spotlightStageUtils.canSelectCompConsideringSpotlightStage(e,n,t)&&(!e.selection.isComponentSelected(t)||m(o))&&!s.includes(b,i)}function S(e){return!!e.store.getState().lassoLayout}function E(e,t,o){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!o)return!1;var n=e.components.layout.getRelativeToScreen(o),a=!n.fixedPosition,r=h(e.store.getState(),a,e.getLeftBarButtonsBoundingRect()),s=t.isRootComponent(e,o),l=i||(s?20:16);return n.y-l<=r.y-u.UI.VIEWPORT_VERTICAL_MARGINS}return t({displayName:"mouseCatcher",mixins:[a.mixins.editorAPIMixin],propTypes:{selectedComponents:o.oneOfType([o.object,o.arrayOf(o.object)]),config:o.object,onContextMenu:o.func,performingMouseMoveAction:o.bool,hoveredComp:o.object,isDragging:o.bool,isResizing:o.bool,isRotating:o.bool,isPinMode:o.bool,compPanel:o.object,editingAreaLayout:o.object,previewPosition:o.object,previewMode:o.bool.isRequired,attachCandidate:o.object,snapData:o.array,applyModeFromClipboardSuggestion:o.object,tabIndicationState:o.object.isRequired,lassoCandidates:o.array,lassoLayout:o.object,constraintArea:o.object},componentWillMount:function(){this.compsBeforeSelection=null,this.shouldStartDragging=!1,this.shouldDragAndCopy=!1,this.shouldStartLasso=!1,this.initMousePosition=null,this.isWaitingForUpdate=!1},componentDidMount:function(){i(e.findDOMNode(this)).on("mouseenter",this.onMouseEnter)},componentWillUnmount:function(){i(e.findDOMNode(this)).off("mouseenter",this.onMouseEnter)},componentWillReceiveProps:function(e){var t,o,i=this.getEditorAPI();if(this.shouldStartDragging){var n=c.getCompToBeDragged(i,e.selectedComponents),a=!s.isEmpty(n)&&(t=n,(o=i.getCompDragRestrictions(t)).horizontallyMovable||o.verticallyMovable?r:p);a&&i.mouseActions.registerMouseMoveAction(a,{initMousePosition:this.initMousePosition,selectedComp:n,shouldDragAndCopy:this.shouldDragAndCopy})}else this.shouldStartLasso&&i.mouseActions.registerMouseMoveAction(d,{initMousePosition:this.initMousePosition,prevSelectedComps:this.compsBeforeSelection,selectedComponents:e.selectedComponents});this.shouldStartDragging=!1,this.shouldStartLasso=!1,this.shouldDragAndCopy=!1},onMouseDown:function(e){var t=this.getEditorAPI();l.keyboardShortcuts.enable();var o,i,n,a=t.store.getState(),r=y(a,e);this.initMousePosition={x:r.pageX,y:r.pageY,isShiftPressed:e.shiftKey,isSpecialKeyPressed:l.browserUtil.isSpecialKeyPressed(e),isAltKeyPressed:e.altKey},this.shouldStartLasso=t.mouseActions.shouldInitLassoToolOnMouseDown(e),this.shouldStartDragging=!this.shouldStartLasso&&(!t.selection.isMultiSelectKeyPressed(e)||(i=e,n=(o=t).selection.getComponentUnderClickToBeSelected(i.clientX,i.clientY),o.selection.isComponentSelected(n))),this.shouldDragAndCopy=this.shouldStartDragging&&this.initMousePosition.isAltKeyPressed,t.selection.isHiddenComponentDraggedNext()?t.selection.setIsHiddenComponentDraggedNext(!1):S(t)||(this.compsBeforeSelection=this.props.selectedComponents,t.selection.selectComponentByClick(e),this.shouldStartDragging=this.shouldStartDragging&&t.selection.isComponentExplicitlySelected()),t.closeRightClickMenu(),t.panelManager.notifyMouseDown()},onMouseUp:function(e){var t=this.getEditorAPI();2===e.button||(this.deselectClickedCompIfNeeded(e),t.selection.getIsMouseUpSelectionEnabled()&&!S(t)&&t.selection.selectNonGroupCompUnderCursor(e,this.props.siteScale)),t.selection.setIsMouseUpSelectionEnabled(!1),this.initMousePosition=null,this.shouldStartDragging=!1,this.shouldDragAndCopy=!1,this.shouldStartLasso=!1},onMouseMove:function(e){var t=this.getEditorAPI(),o=t.store.getState(),i=y(o,e);this.props.registeredMouseMoveAction||this.updateHoverBox(e),t.cursor.updateMousePosition(i.pageX,i.pageY)},onMouseEnter:function(e){1!==e.which&&this.getEditorAPI().endMouseMoveActionIfNeeded(e)},updateHoverBox:function(o){if(!this.isWaitingForUpdate){this.isWaitingForUpdate=!0;var i=this.getEditorAPI();o.persist(),i.dsActions.waitForChangesApplied(function(){this.isWaitingForUpdate=!1;var e=i.selection.getComponentToBeMarkedByHoverBox(o,this.shouldStartDragging),t=this.props.hoverBoxOverlay;!this.props.hoveredComp&&e?v.call(this,i,e)&&this.props.setHoverBox(e,t):this.props.hoveredComp&&!e?this.props.clearHoverBox():this.props.hoveredComp&&e&&(v.call(this,i,e)?this.props.hoveredComp.id!==e.id&&this.props.setHoverBox(e,t):this.props.clearHoverBox())}.bind(this))}},clearHoverBox:function(){this.props.clearHoverBox()},deselectClickedCompIfNeeded:function(e){var t=this.getEditorAPI();if(t.selection.isMultiSelectKeyPressed(e)&&this.initMousePosition){var o=t.selection.getComponentUnderClickToBeSelected(e),i=!!s.find(this.compsBeforeSelection,o),n=t.store.getState(),a=y(n,e),r=!this.isPointsDistanceBiggerThan(this.initMousePosition,{x:a.pageX,y:a.pageY},2);i&&r&&(t.selection.setIsMouseUpSelectionEnabled(!1),t.selection.deselectComponents(o))}},isPointsDistanceBiggerThan:function(e,t,o){var i=Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2);return Math.sqrt(i)>o},isComponentSelected:function(){return this.getEditorAPI().selection.isComponentSelected()},getComponentLabel:function(){return this.getEditorAPI().getComponentType(this.props.selectedComponents)},isCompDraggable:function(){var e=this.getEditorAPI();if(this.props.performingMouseMoveAction)return!0;var t=this.props.hoveredComp;if(t&&e.components.is.exist(t)){var o=e.components.is.controlledByParent(t);return v.call(this,e,t)&&e.components.is.draggable(o?e.components.getContainer(t):t)}return!1},getContainerToShowMarginsIndicator:function(){var e=this.getEditorAPI();if(this.props.attachCandidate)return this.props.attachCandidate;var t=this.getEditorAPI().selection.getSelectedComponents()[0],o=e.components.getContainer(t);return o&&(this.props.isDragging||this.props.isResizing)&&e.components.layout.isCompExceedingContainerMargin(t,o,0)?o:null},shouldShowContainerMarginsIndicator:function(){var e=this.getEditorAPI(),t=this.getContainerToShowMarginsIndicator();return t&&e.components.is.showMarginsIndicator(t)},getContainerMarginsIndicatorStyles:function(e){var t=this.getEditorAPI(),o=t.components.layout.getRelativeToScreen(e),i=t.components.layout.getCompMargin(e);return{indicator:{top:o.y,left:o.x,width:o.width,height:o.height},marginLeft:Math.max(0,i.left),marginRight:Math.max(0,i.right),inlineWidth:o.width-s.sum(i)}},shouldShowPageMarginsIndicator:function(){var o=this,i=this.getEditorAPI();return(this.props.isDragging||this.props.isResizing)&&s.some(i.selection.getSelectedComponents(),function(e){var t=o.props.attachCandidate||i.components.getContainer(e);return i.components.layout.shouldShowOutOfPageGridlinesWarning(e,t,0)})},getPageMarginsIndicatorStyles:function(){var e=this.getEditorAPI(),t=e.siteSegments.getSiteStructure(),o=e.components.layout.getRelativeToScreen(t),i=e.siteSegments.getPagesContainerAbsLayout(),n=i.x-o.x,a=o.x+o.width-(i.x+i.width);return{indicator:{top:o.y,left:o.x,width:o.width,height:"100%"},marginLeft:n,marginRight:a,inlineWidth:o.width-(n+a)}},isRootComponent:function(e,t){return"SITE_FOOTER"===t.id||"SITE_HEADER"===t.id||t.id===e.dsRead.pages.getFocusedPageId()},isLabelBottom:function(){return E(this.getEditorAPI(),this,this.props.hoveredComp)},isLabelBottomEdit:function(){return!s.isUndefined(s.head(this.props.selectedComponents))&&E(this.getEditorAPI(),this,s.head(this.props.selectedComponents))},isIndicatorBottom:function(){return!s.isUndefined(s.head(this.props.selectedComponents))&&E(this.getEditorAPI(),this,s.head(this.props.selectedComponents),32)},shouldShowSpotlightStage:function(){var e=this.getEditorAPI(),t=g.editorPlugins.selection.selectors.getFocusedContainer(e.store.getState());return e.components.is.spotlightStageContainer(t)},render:n})}),define("rEditor/rootComps/textEditor.rt",["react","lodash","wixRichText"],function(e,t,o){"use strict";return function(){return e.createElement("div",{style:this.getTextEditorStyles(),className:this.props.isResizing?"resizing":""},e.createElement(o.TextEditor,{initialData:"<p></p>",onReady:this.setReady,validateHtml:!1,showToolbar:!1,documentServicesApi:this.getEditorAPI(),onCut:this.onCutOrCopy,onCopy:this.onCutOrCopy,stylesManager:this.getStyleManager(),onDataChange:this.handleDataChange,linksManager:this.getLinksManager(),shouldInjectFontsToDocument:!1}))}}),define("rEditor/rootComps/textEditor",["create-react-class","prop-types","lodash","rEditor/rootComps/textEditor.rt","core","util","platformEvents","coreUtilsLib","stateManagement","textControls"],function(e,t,n,o,i,a,r,s,l,c){"use strict";var p=!1,d="panels.focusPanels.createNewTextBoxPanel",u=l.editorPlugins.text.actions;return e({displayName:"textEditor",propTypes:{openPanels:t.array.isRequired},render:o,mixins:[i.mixins.editorAPIMixin],getComponentDataFromProps:function(e){var t=this.getEditorAPI().components.data,o=this.getTextComponentFromProps(e);return t.get(o)},getTextComponentFromProps:function(e){return(e=e||this.props).selectedTextComp},getValue:function(){if(this.props.selectedTextComp){var e=this.getComponentDataFromProps();return{text:e.text,linkList:e.linkList}}return{text:"",linkList:[]}},setReady:function(e){var t=this;this.manager=e;var o=this.getEditorAPI();o.text.setCurrentTextEditor(this.manager),this.getEditorAPI().store.dispatch(u.textEditor.load(e)),this.manager.execCommand("wixCss",{id:"overFlowCss",value:"body {overflow: hidden !important;}",isLink:!1,force:!1}),this.manager.onAfterCommandExec(function(e){t.manager.isAllSelected()&&t.props.isRepeatedTextComp&&o.store.dispatch(u.invisibleTextEditor.execCmd(e))}),this.manager.onAfterUndo(function(){t.manager.isAllSelected()&&t.props.isRepeatedTextComp&&o.history.undo()}),this.manager.onAfterRedo(function(){t.manager.isAllSelected()&&t.props.isRepeatedTextComp&&o.history.redo()})},componentDidUpdate:function(e){if(this._internalTextValue=this.getValue().text,this.manager&&this.props.selectedTextComp&&!e.isOpenTextEditor&&this.props.isOpenTextEditor){this.editedTextComponent=this.props.selectedTextComp;var t=a.browserUtil.isIE()?"none":"all",o=this.manager;this.manager.setData(this.getValue().text,{validateHtml:!1,cursorLocation:t,removeNestedStyles:!0,callback:function(){"none"===t&&o.commands.selectAll()}}),this.props.styleOnly||this.getEditorAPI().renderPlugins.setHideTextComponent(this.getTextComponentFromProps().id),this.manager.refreshPropsCollector(),this.manager.focus(),this.manager.resetUndo();var i=c.fontUtils.getUploadedUsedFonts(this.getValue().text,this.getEditorAPI().dsRead.theme.fonts.getAll());c.ckUtils.insertUploadedFontsToCk(i,this.manager),this.linksHelper.setCurrentLinks(this.getValue().linkList),this.getEditorAPI().openComponentPanel("textSettingsPanel",{onCmdStateChange:this.manager.onCmdStateChange.bind(this.manager),getCommandsStates:this.manager.getCommandsStates.bind(this.manager),unRegisterListener:this.manager.unRegisterListener.bind(this.manager),getLink:this.linksHelper.getLink.bind(this.linksHelper),saveLink:this.linksHelper.saveLink.bind(this.linksHelper),styleOnly:this.props.styleOnly})}this.manager&&!n.isEqual(this.props.layout,e.layout)&&this.manager.resize(this.props.layout.width,this.props.layout.height)},componentWillUpdate:function(e){(this.props.isOpenTextEditor&&this.props.selectedTextComp&&!n.isEqual(this.props.selectedTextComp,e.selectedTextComp)||this.props.isOpenTextEditor&&!e.isOpenTextEditor)&&this.stopTextEditing()},componentWillUnmount:function(){this.stopTextEditing(),this.getEditorAPI().text.setCurrentTextEditor(void 0),this.getEditorAPI().store.dispatch(u.textEditor.unload())},componentWillReceiveProps:function(e){var t=n.find(this.props.openPanels,{name:d}),o=n.find(e.openPanels,{name:d});t&&!o&&(c.ckUtils.setCkReadOnly(this.manager,!1,!0),this.manager.focus())},stopTextEditing:function(){if(s.wSpy.log("textEditor",["stopTextEditing"]),!p&&n.isEqual(this.editedTextComponent,this.props.selectedTextComp)){if(this.props.isOpenTextEditor&&this.props.selectedTextComp){p=!0;var e=this.getEditorAPI(),t=this;this.stopRichTextInput(),this.getEditorAPI().renderPlugins.setHideTextComponent(null);var o=this.getTextComponentFromProps();e.dsActions.platform.notifyAppsOnCustomEvent(r.factory.textEditBoxClosed({compRef:o})),e.dsActions.waitForChangesApplied(function(){t.deleteTextEditorComponentIfEmpty(o),p=!1})}this.getEditorAPI().text.stopEditing()}},stopRichTextInput:function(){this.clearUnusedLinks()},clearUnusedLinks:function(){if(this.manager){var e=this.linksHelper.getAllLinks(),t=this.manager.getLinkRefsList(),o=n.filter(e,function(e){return n.includes(t,e.id)});this.setComponentData({text:this._internalTextValue,linkList:o})}},handleDataChange:function(e){if(s.wSpy.log("textEditor",["handleDataChange"].concat(Array.prototype.slice.call(arguments))),this.getTextComponentFromProps()&&!n.isEqual(e,this._internalTextValue)){this._internalTextValue=e;var t=this.getEditorAPI();if(this.isHtmlTooLong(e))c.textLimitsUtils.handleTextLengthExceeded(this.getEditorAPI().panelManager,this.manager);else{this.setComponentData({text:e,linkList:this.linksHelper.getAllLinks()}),t.history.debouncedAdd("text data change");var o=c.dataUtils.getTextContentFromHtml(e).length;c.textLimitsUtils.isNewTextLengthLimitExceeded(o)&&c.textLimitsUtils.handleTextLengthExceeded(this.getEditorAPI().panelManager,this.manager),c.textLimitsUtils.setCachedTextReadableLength(o)}}},setComponentData:function(e){var o=this.getComponentDataFromProps();s.wSpy.log("textEditor",["setComponentData"].concat(Array.prototype.slice.call(arguments))),o&&(n.forOwn(e,function(e,t){o[t]=e}),this.getEditorAPI().components.data.update(this.getTextComponentFromProps(),o,!0))},isHtmlTooLong:function(e){var t=this.getEditorAPI().data.getSchema("StyledText");return n.get(t,"text.maxLength")<e.length},deleteTextEditorComponentIfEmpty:function(e){var t=this.getEditorAPI().components.data.get(e);if(t){s.wSpy.log("textEditor",["deleteTextEditorComponentIfEmpty"].concat(Array.prototype.slice.call(arguments)));var o=t.text;c.dataUtils.isEmptyHtmlText(o)&&this.getEditorAPI().components.remove(e)}},componentWillMount:function(){this.linksHelper=new c.LinksHelper([]),this.linksManager=new c.TextLinksManager(this.linksHelper),this.stylesManager={getFonts:n.partial(c.fontUtils.getCurrentSelectableFontsWithParams,this.getEditorAPI(),!1,!0)}},getStyleManager:function(){return this.stylesManager},getLinksManager:function(){return this.linksManager},onCutOrCopy:function(){this.linksHelper.cacheCopiedLinks()},getTextEditorStyles:function(){return this.props.layout.visibility||this.manager?this.props.isResizing?n.assign(this.props.layout,{pointerEvents:"none"}):this.props.layout:n.assign(this.props.layout,{visibility:"hidden"})}})}),define("rEditor/rootComps/invisibleTextEditorMapper",["lodash","textControls","stateManagement"],function(e,r,t){"use strict";var n=t.editorPlugins.text.actions;return{mapStateToProps:function(e){var t=e.editorAPI,o=t.selection.getSelectedComponents();return{comps:o,layout:o.length&&t.components.layout.getRelativeToScreen(o)}},mapDispatchToProps:function(t){return{getFonts:function(){return t(function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return function(e,t,o){var i,n=o.editorAPI;return(i=r.fontUtils).getCurrentSelectableFontsWithParams.apply(i,[n,!1,!0].concat(a))}}.apply(void 0,arguments))},loadTextEditingAPI:function(e){return t((i=e,function(e,t,o){return o.editorAPI.store.dispatch(n.invisibleTextEditor.load(i))}));var i},unloadTextEditingAPI:function(){return t(function(e,t,o){return o.editorAPI.store.dispatch(n.invisibleTextEditor.unload())})},loadLinksHelper:function(e){return t((i=e,function(e,t,o){return o.editorAPI.store.dispatch(n.invisibleTextEditor.loadLinksHelper(i))}));var i},unloadLinksHelper:function(){return t(function(e,t,o){return o.editorAPI.store.dispatch(n.invisibleTextEditor.unloadLinksHelper())})}}}}}),define("rEditor/rootComps/invisibleTextEditor.rt",["react","lodash","wixRichText"],function(e,t,o){"use strict";return function(){return e.createElement("div",{style:{visibility:"hidden"}},e.createElement(o.TextEditor,{initialData:"<p></p>",onReady:this.setReady,validateHtml:!1,showToolbar:!1,stylesManager:this.getStyleManager(),linksManager:this.getLinksManager(),shouldInjectFontsToDocument:!1}))}}),define("rEditor/rootComps/invisibleTextEditor",["create-react-class","prop-types","lodash","util","textControls","rEditor/rootComps/invisibleTextEditorMapper","rEditor/rootComps/invisibleTextEditor.rt"],function(e,t,o,i,n,a,r){"use strict";var s=i.hoc,l=s.connect,c=s.renderWhenMutated,p=s.STORES.EDITOR_API,d=e({displayName:"invisibleTextEditor",propTypes:{loadTextEditingAPI:t.func.isRequired,unloadTextEditingAPI:t.func.isRequired,loadLinksHelper:t.func.isRequired,unloadLinksHelper:t.func.isRequired},setReady:function(e){this.props.loadTextEditingAPI(e)},componentWillUnmount:function(){this.props.unloadLinksHelper(),this.props.unloadTextEditingAPI()},componentWillMount:function(){var e=new n.LinksHelper([]);this.props.loadLinksHelper(e),this.linksManager=new n.TextLinksManager(e),this.stylesManager={getFonts:this.props.getFonts}},getStyleManager:function(){return this.stylesManager},getLinksManager:function(){return this.linksManager},getTextEditorStyles:function(){return this.props.layout},render:r}),u=l(p,a.mapStateToProps,a.mapDispatchToProps)(c(d));return u.pure=d,u}),define("rEditor/rootComps/gridLines/gridLines.rt",["react","lodash"],function(o,e){"use strict";return function(){return o.createElement.apply(this,["svg",{className:"gridLines "+e({fade:this.props.fade}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},e.map(this.props.gridLines,function(e,t){return o.createElement("line",{key:t+"backLine",x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,className:"backLine"})}.bind(this)),e.map(this.props.gridLines,function(e,t){return o.createElement("line",{key:t+"frontLine",x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,className:"frontLine"})}.bind(this))])}}),define("rEditor/rootComps/gridLines/gridLines",["lodash","create-react-class","prop-types","util","rEditor/rootComps/gridLines/gridLines.rt"],function(e,t,o,i,n){"use strict";var a=t({displayName:"gridLines",propTypes:{gridLines:o.arrayOf(o.object),fade:o.bool},getDefaultProps:function(){return{fade:!1}},render:n}),r=i.hoc.renderWhenMutated(a);return r.pure=a,r}),define("rEditor/rootComps/rulers/guide.rt",["react","lodash","baseUI","santa-editor-symbols"],function(e,t,o,i){"use strict";return function(){return e.createElement("div",{className:this.props.rulerDirection+"-guide-container",style:this.getGuideContainerStyle()},e.createElement("div",{className:this.props.rulerDirection+"-guide",style:this.getGuideStyle()}),e.createElement("div",{ref:"guide",className:this.props.rulerDirection+"-guide-catcher",onClick:this.handleGuideClick,onMouseDown:function(e){this.onContainerMouseDown(e)}.bind(this),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},e.createElement("div",{className:this.props.rulerDirection+"-guide-handler"},this.shouldShowSelectedGuide()?e.createElement(i.symbol,{key:"selected",name:"guidesHandler_selected"}):null,this.shouldShowSelectedGuide()?null:e.createElement(i.symbol,{key:"regular",name:"guidesHandler_regular"}))),this.getBubbleMode()?e.createElement(o.bubble,t.assign({},{ref:"bubble",key:"hoverBubble"},this.getBubbleProps())):null)}}),define("rEditor/rootComps/rulers/rulersComputations",["lodash","zepto"],function(e,o){"use strict";var a=22;function s(e,t,o,i){var n=e?0:-t.x;return{vertical:{min:n,max:e?t.width:i-t.x,minInView:n},horizontal:{min:e?0:a,max:o.maxBottomY+o.marginBottom,minInView:e?o.scrollTop:o.scrollTop+a}}}return{getRulerNumbers:function(e,t,o,i,n){for(var a,r,s,l,c,p,d,u=(a=e,r=t,s=o,l=i,p=0,d="vertical"===(c=n)?Math.floor(r.width/100):Math.floor((s+l.top)/100),a||"horizontal"!==c||(p=Math.floor(l.top/100)+1),[p,d]),g=_slicedToArray(u,2),m=g[0],f=g[1],h=[],y=m;y<=f;y++)h.push(100*y);return h},isGuideOutOfLimits:function(e,t,o,i,n,a){var r=s(e,t,o,i);return a<(r="vertical"===n?r.vertical:r.horizontal).min||a>r.max},isGuideOutOfViewLimits:function(e,t,o,i,n,a){var r=s(e,t,o,i);return a<(r="vertical"===n?r.vertical:r.horizontal).minInView||a>r.max},getMobileHorizontalTicksHeight:function(e){return e?e.maxBottomY+e.marginBottom:0},calcNewGuidePosition:function(e,t,o,i,n){return"vertical"===i?n.pageX-e.left-o.x:n.pageY-e.top+t.y},calcHorizontalDraggingPosition:function(e,t){return e-(o(t).offset().top-parseInt(o(t).css("top"),10))},getVerticalTicksWidth:function(e,t){return e?t.width:"calc(100% - "+a+"px)"},getVerticalGuidePosition:function(e,t,o){return e?o:o+t.x}}}),define("rEditor/rootComps/rulers/guide",["reactDOM","create-react-class","prop-types","lodash","santa-editor-utils","constants","rEditor/rootComps/rulers/guide.rt","rEditor/rootComps/rulers/rulersComputations"],function(a,e,t,n,o,r,i,s){"use strict";var l="guideToolTipTrash",c=e({displayName:"guide",propTypes:{rulerDirection:t.string.isRequired,guidePosition:t.number.isRequired,guideId:t.string.isRequired,isSelected:t.bool,isGuideOutOfLimitsFunc:t.func.isRequired,startDrag:t.func.isRequired,isBeingDragged:t.bool.isRequired,endDrag:t.func.isRequired,registerDragCallbacks:t.func.isRequired,isMouseOverRulers:t.bool,toolsHidden:t.bool,disableInteraction:t.bool,pagesContainerAbsLayout:t.object.isRequired,isMobileEditor:t.bool.isRequired,sendBIEvent:t.func.isRequired,selectGuide:t.func.isRequired,deselectGuide:t.func.isRequired,removeGuideById:t.func.isRequired,updateStateOnDragEnd:t.func.isRequired,startGuideDrag:t.func.isRequired,changeGuidePosition:t.func.isRequired,previewSize:t.object.isRequired},getInitialState:function(){return this.preventClickAfterDragEnd=!1,this.props.registerDragCallbacks({onDragStart:this.onDragStart,whileDrag:this.whileDrag,onDragEnd:this.onDragEnd}),{isHoverBubble:!1,mouseOverGuide:!1,guidePosition:this.props.guidePosition,stepperSymbol:l,stepperValueInvalid:!1,selectedDueToHoverBubbleClick:!1,isFirstRender:!0}},componentWillReceiveProps:function(e){this.props.isBeingDragged||this.setState({stepperValueInvalid:!1,guidePosition:e.guidePosition})},componentWillUpdate:function(e,t){!this.props.toolsHidden&&e.toolsHidden&&e.isSelected&&this.props.deselectGuide(),!this.state.isHoverBubble&&t.isHoverBubble&&this.props.sendBIEvent("GUIDE_TOOLTIP_APPEAR",{})},setGuideSelected:function(e){this.state.isFirstRender&&this.setState({isFirstRender:!1}),this.props.selectGuide(this.props.guideId,e),this.setState({stepperValueInvalid:!1,stepperSymbol:l})},shouldShowSelectedGuide:function(){return this.props.isBeingDragged||this.state.mouseOverGuide||this.props.isSelected},getGuideContainerStyle:function(){return"horizontal"===this.props.rulerDirection?{top:this.state.guidePosition}:{left:s.getVerticalGuidePosition(this.props.isMobileEditor,this.props.pagesContainerAbsLayout,this.state.guidePosition)}},getGuideStyle:function(){var e=this.props.previewSize;if("horizontal"!==this.props.rulerDirection)return{height:this.props.isMobileEditor?e.height+r.UI.MOBILE_PREVIEW_TOP:e.height};var t=e.width;return{left:-t,width:t}},removeGuide:function(){this.props.removeGuideById(this.props.guideId)},onDragStart:function(){this.props.startGuideDrag(),this.setState({stepperValueInvalid:!1,stepperSymbol:l})},getDragPosition:function(e){var t=a.findDOMNode(this);return"horizontal"===this.props.rulerDirection?s.calcHorizontalDraggingPosition(e.top,t):e.left-this.props.pagesContainerAbsLayout.x},whileDrag:function(e){var t=this.getDragPosition(e);this.props.isGuideOutOfLimitsFunc(t)?this.props.endDrag():this.setState({guidePosition:t})},onDragEnd:function(e){this.props.updateStateOnDragEnd(this.props.isMouseOverRulers);var t=this.getDragPosition(e);this.props.isGuideOutOfLimitsFunc(t)?(this.props.sendBIEvent("GUIDE_DELETED",{origin:"drag_outside"}),this.removeGuide()):(this.sendDragBIEvent(this.props.guidePosition,t),this.preventClickAfterDragEnd=!0,this.props.changeGuidePosition(this.props.rulerDirection,this.props.guideId,t))},getDragLimits:function(){return"horizontal"===this.props.rulerDirection?{lockedX:!0}:{lockedY:!0}},sendDragBIEvent:function(e,t){var o={xCoordinate_new:0,xCoordinate_old:0,yCoordinate_new:0,yCoordinate_old:0};"vertical"===this.props.rulerDirection?(o.xCoordinate_new=t,o.xCoordinate_old=e):(o.yCoordinate_new=t,o.yCoordinate_old=e),this.props.sendBIEvent("GUIDE_DRAGGED",o)},closeHoverBubble:function(){this.setState({isHoverBubble:!1})},deselectGuide:function(){this.props.isBeingDragged||this.props.deselectGuide()},onStepperValueChangeApproval:function(e){this.props.isGuideOutOfLimitsFunc(n.parseInt(e))||(this.props.changeGuidePosition(this.props.rulerDirection,this.props.guideId,n.parseInt(e)),this.setState({stepperSymbol:"smallVApproval"}),window.setTimeout(this.deselectGuide.bind(this),700))},onStepperSteppingValueChange:function(e){var t=n.parseInt(e),o=!this.props.isGuideOutOfLimitsFunc(t),i=this.props.guidePosition===e;this.sendStepperValueChangeBIEvent(e,o,i),this.setState({stepperValueInvalid:!o}),o?this.props.changeGuidePosition(this.props.rulerDirection,this.props.guideId,t):window.setTimeout(function(){this.setState({stepperValueInvalid:!1})}.bind(this),900)},sendStepperValueChangeBIEvent:function(e,t,o){var i=void 0;i=o?"no_change":t?"accepted":"denied";var n={type:this.props.rulerDirection,value:e,valid_value:i};this.props.sendBIEvent("VALUE_CHANGE_IN_GUIDE_TOOLTIP",n)},stepperSymbolClickFunc:function(){this.state.stepperSymbol===l&&(this.props.sendBIEvent("GUIDE_DELETED",{origin:"trash_icon"}),this.removeGuide())},stepperClick:function(){this.state.isHoverBubble?(this.setState({isHoverBubble:!1,stepperValueInvalid:!1,stepperSymbol:l,selectedDueToHoverBubbleClick:!0}),this.setGuideSelected("click_on_tooltip")):this.setState({stepperValueInvalid:!1,stepperSymbol:l})},getStepperWithSVGProps:function(){return{showSymbol:this.props.isSelected&&!this.state.isFirstRender,stepperClickFunc:this.stepperClick,symbolClickFunc:this.stepperSymbolClickFunc,symbolName:this.state.stepperSymbol,stepperProps:{min:-99999,max:99999,step:1,selectedUnits:"px",units:"px",afterBlur:this.onStepperValueChangeApproval,isInvalidValue:this.state.stepperValueInvalid,valueLink:{value:this.state.guidePosition,requestChange:this.onStepperSteppingValueChange},dynamicInputSize:{characterWidth:10,minWidth:20},inputInFocus:this.state.selectedDueToHoverBubbleClick}}},getOverridePositionAdjustments:function(e){if("horizontal"!==this.props.rulerDirection)return{type:r.UI.TOOLTIP.ALIGNMENT.TOP,value:"hover"===e?3:6}},getBubbleMode:function(){return this.props.isSelected&&!this.state.isFirstRender?"selected":this.state.isHoverBubble&&!this.props.toolsHidden?"hover":null},getHoverBubbleProps:function(){return{closeTrigger:[],hideMethod:this.closeHoverBubble,timeoutForMouseOverBubble:600,mouseLeftTargetNode:!this.props.isBeingDragged&&!this.state.mouseOverGuide,className:"hover-bubble"}},getSelectedBubbleProps:function(){return{closeTrigger:[r.UI.TOOLTIP.TRIGGERS.OUTER_CLICK],hideMethod:this.deselectGuide,timeoutForMouseOverBubble:0,mouseLeftTargetNode:null,className:"selected-bubble"}},getBubbleProps:function(){var e=this.getBubbleMode(),t="hover"===e?this.getHoverBubbleProps():this.getSelectedBubbleProps(),o=this.getOverridePositionAdjustments(e),i="horizontal"===this.props.rulerDirection?5:-5,n="horizontal"===this.props.rulerDirection?r.UI.TOOLTIP.ALIGNMENT.LEFT:r.UI.TOOLTIP.ALIGNMENT.RIGHT;return{value:{classPath:"baseUI.stepperWithSVG",props:this.getStepperWithSVGProps()},styleType:r.UI.TOOLTIP.STYLE_TYPE.NORMAL,alignment:n,noArrow:!0,targetNode:a.findDOMNode(this.refs.guide),closeTriggers:t.closeTrigger,hideMethod:t.hideMethod,marginsFromWindow:0,mouseLeftTargetNode:t.mouseLeftTargetNode,marginsFromElement:i,timeoutForMouseOverBubble:t.timeoutForMouseOverBubble,overridePositionAdjustments:o,customClasses:[t.className]}},onContainerMouseDown:function(e){e.stopPropagation(),this.props.toolsHidden||this.props.startDrag(e,this.getDragLimits())},onMouseLeave:function(){this.setState({mouseOverGuide:!1})},activateHoverBubble:function(){this.state.mouseOverGuide&&this.setState({isHoverBubble:!0,selectedDueToHoverBubbleClick:!1})},onMouseEnter:function(){!this.props.disableInteraction&&(!this.props.isSelected&&!this.props.toolsHidden||this.props.isSelected&&this.state.isFirstRender)&&(this.setState({mouseOverGuide:!0}),window.setTimeout(this.activateHoverBubble,500))},handleGuideClick:function(e){e.stopPropagation(),this.props.disableInteraction||this.props.toolsHidden||(this.state.isHoverBubble&&this.setState({isHoverBubble:!1}),this.preventClickAfterDragEnd?this.preventClickAfterDragEnd=!1:this.setGuideSelected("click_on_guide"))},render:i});return o.hoc.draggable(c)}),define("rEditor/rootComps/rulers/rulers.rt",["react","lodash","rEditor/rootComps/rulers/guide"],function(o,e,i){"use strict";return function(){return o.createElement.apply(this,["div",{className:this.getRootClasses(),ref:"rulerContainer",style:this.getRulersStyle(),onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onContextMenu:this.handleRightClick},this.props.toolsHidden?null:o.createElement("div",{className:this.props.rulerDirection+"-ticks",key:this.props.rulerDirection+"-ruler"},this.props.isMobileEditor||"vertical"!==this.props.rulerDirection?null:o.createElement("div",{className:"rulers-separator-blocker",key:"rulers-separator-blocker"}),this.props.isMobileEditor||"horizontal"!==this.props.rulerDirection?null:o.createElement("div",{className:"rulers-separator "+e({"rulers-separator-hover":this.props.isHovered}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"rulers-separator"}),o.createElement("div",{className:"rulers-background "+e({"rulers-background-hover":this.props.isHovered,"rulers-background-mobile":this.props.isMobileEditor}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},o.createElement("div",{className:"rulers-"+this.props.rulerDirection+"-ticks",style:this.getTicksPositionInBackgroundStyle()}),o.createElement.apply(this,["div",{className:"ruler-numbers-container",style:this.getRulersNumbersStyle()},e.map(this.getRulerNumbers(),function(e,t){return o.createElement("div",{key:"number-"+e,className:"ruler-number"},e)}.bind(this))]))),e.map(this.props.guidesInRuler,function(e,t){return o.createElement(i,{key:e.guideId,rulerDirection:this.props.rulerDirection,guidePosition:e.guidePosition,guideId:e.guideId,isSelected:this.props.selectedGuideId===e.guideId,isGuideOutOfLimitsFunc:this.isGuideOutOfLimits,isMouseOverRulers:this.isMouseOver,toolsHidden:this.props.toolsHidden,startGuideDrag:this.props.startGuideDrag,disableInteraction:this.props.isDragging,pagesContainerAbsLayout:this.props.pagesContainerAbsLayout,isMobileEditor:this.props.isMobileEditor,sendBIEvent:this.props.sendBIEvent,selectGuide:this.props.selectGuide,deselectGuide:this.props.deselectGuide,removeGuideById:this.props.removeGuideById,updateStateOnDragEnd:this.props.updateStateOnDragEnd,changeGuidePosition:this.props.changeGuidePosition,previewSize:this.props.previewSize})}.bind(this))])}}),define("rEditor/rootComps/rulers/rulers",["reactDOM","zepto","create-react-class","prop-types","lodash","util","stateManagement","rEditor/rootComps/rulers/rulers.rt","rEditor/rootComps/rulers/rulersComputations","experiment"],function(t,o,e,i,n,a,r,s,l,c){"use strict";var p=e({displayName:"rulers",propTypes:{rulerDirection:i.string.isRequired,guidesInRuler:i.array.isRequired,selectedGuideId:i.string,isHovered:i.bool,previewHeight:i.number,toolsHidden:i.bool,selectedComponents:i.array,isDragging:i.bool,previewSize:i.object.isRequired,sendBIEvent:i.func.isRequired,isMobileEditor:i.bool.isRequired,previewPosition:i.object.isRequired,siteScroll:i.object.isRequired,pagesContainerAbsLayout:i.object.isRequired,viewPort:i.object,selectedGuideData:i.object,removeGuideViaDelBtn:i.func.isRequired,changeGuidePositionByPixels:i.func.isRequired,deselectGuide:i.func.isRequired,setVerticalGuide:i.func.isRequired,setHorizontalGuide:i.func.isRequired,updateIsHovered:i.func.isRequired,startGuideDrag:i.func.isRequired,openRightClickMenu:i.func},getInitialState:function(){this.isMouseOver=!1,this.verticalRulersComponentWidth=null;var e=a.keyboardShortcuts.extendContext(a.keyboardShortcuts.CONTEXTS.EDITOR,this.getRulersKeyboardShortcuts());return a.keyboardShortcuts.registerContext(a.keyboardShortcuts.CONTEXTS.RULERS,e),{}},componentDidMount:function(){"vertical"===this.props.rulerDirection&&(this.verticalRulersComponentWidth=this.getVerticalRulerWidth())},componentDidUpdate:function(e){!e.isHovered&&this.props.isHovered&&"vertical"===e.rulerDirection&&this.props.sendBIEvent("RULERS_HOVER",{}),n.isEmpty(e.selectedComponents)&&!n.isEmpty(this.props.selectedComponents)&&this.props.selectedGuideId&&this.props.deselectGuide(),"vertical"===this.props.rulerDirection&&(this.verticalRulersComponentWidth=this.getVerticalRulerWidth())},componentWillUnmount:function(){a.keyboardShortcuts.unregisterContext(a.keyboardShortcuts.CONTEXTS.RULERS)},getRulersKeyboardShortcuts:function(){return{"del,backspace":this.props.removeGuideViaDelBtn,"shift + right":n.partial(this.changeGuidePositionViaKeyboard,"vertical",10),"shift + left":n.partial(this.changeGuidePositionViaKeyboard,"vertical",-10),"shift + up":n.partial(this.changeGuidePositionViaKeyboard,"horizontal",-10),"shift + down":n.partial(this.changeGuidePositionViaKeyboard,"horizontal",10),left:n.partial(this.changeGuidePositionViaKeyboard,"vertical",-1),right:n.partial(this.changeGuidePositionViaKeyboard,"vertical",1),up:n.partial(this.changeGuidePositionViaKeyboard,"horizontal",-1),down:n.partial(this.changeGuidePositionViaKeyboard,"horizontal",1)}},changeGuidePositionViaKeyboard:function(e,t){this.isGuideOutOfLimits(this.props.selectedGuideData.guidePosition+t,!1,e)||this.props.changeGuidePositionByPixels(e,t)},getVerticalRulerWidth:function(){var e=this.refs.rulerContainer&&t.findDOMNode(this.refs.rulerContainer);return e?e.getBoundingClientRect().width:0},getRulerNumbers:function(){var e=this.props.previewHeight,t=this.props,o=t.rulerDirection,i=t.previewPosition,n=t.isMobileEditor,a=t.pagesContainerAbsLayout;return l.getRulerNumbers(n,a,e,i,o)},getRulersNumbersStyle:function(){return"vertical"===this.props.rulerDirection?{left:this.props.isMobileEditor?4:this.props.pagesContainerAbsLayout.x+4}:{top:this.props.isMobileEditor?1:100*Math.floor(this.props.previewPosition.top/100)+80+1}},getRootClasses:function(){var e=["rulers",this.props.isMobileEditor&&"mobile-editor-rulers","vertical"===this.props.rulerDirection?"vertical-ruler":"horizontal-ruler"];return n(e).compact().join(" ")},getRulersStyle:function(){if("vertical"!==this.props.rulerDirection)return this.props.isMobileEditor?{height:l.getMobileHorizontalTicksHeight(this.props.viewPort)}:{};var e=this.props.pagesContainerAbsLayout,t={width:l.getVerticalTicksWidth(this.props.isMobileEditor,e)};return this.props.isMobileEditor&&(t.left=e.x),t},getTicksPositionInBackgroundStyle:function(){if("vertical"!==this.props.rulerDirection)return this.props.isMobileEditor?{backgroundPosition:"5px 0"}:{backgroundPosition:"5px -21px"};var e=this.props.pagesContainerAbsLayout;return{backgroundPosition:this.props.isMobileEditor?0:e.x+1}},isGuideOutOfLimits:function(e,t,o){var i=this.props.pagesContainerAbsLayout;return o=o||this.props.rulerDirection,t?l.isGuideOutOfViewLimits(this.props.isMobileEditor,i,this.props.viewPort,this.verticalRulersComponentWidth,o,e,t):l.isGuideOutOfLimits(this.props.isMobileEditor,i,this.props.viewPort,this.verticalRulersComponentWidth,o,e,t)},handleMouseEnter:function(e){o(e.target).hasClass("vertical-guide")||o(e.target).hasClass("horizontal-guide")||(this.isMouseOver=!0,this.props.updateIsHovered(!0))},handleMouseLeave:function(){this.isMouseOver=!1,this.props.isDragging||this.props.updateIsHovered(!1)},handleMouseDown:function(e){if(n.includes(["rulers-vertical-ticks","rulers-horizontal-ticks","ruler-number","ruler-numbers-container"],e.target.className)){var t=l.calcNewGuidePosition(this.props.previewPosition,this.props.siteScroll,this.props.pagesContainerAbsLayout,this.props.rulerDirection,e);this.isGuideOutOfLimits(t,!0)||this.setNewGuide(t)}},handleRightClick:function(e){e.preventDefault(),c.isOpen("se_removeAllGuides")&&this.props.openRightClickMenu(e,this)},setNewGuide:function(e){var t={};t="vertical"===this.props.rulerDirection?(this.props.setVerticalGuide(e),{xCoordinate:e,yCoordinate:0}):(this.props.setHorizontalGuide(e),{xCoordinate:0,yCoordinate:e}),this.props.sendBIEvent("RULERS_CLICKED",t)},render:s}),d=r.editorPlugins.rulers.actions,u=d.changeGuidePosition,g=d.changeGuidePositionByPixels,m=d.updateEditorRulersState,f=d.sendBIEvent,h=d.removeGuideViaDelBtn,y=d.selectGuide,b=d.deselectGuide,v=d.setVerticalGuide,S=d.setHorizontalGuide,E=d.removeGuideById,P=d.removeAllGuidesInRuler,C=d.updateStateOnDragEnd,T=r.editorPlugins.rulers.selectors,_=T.getSelectedGuideData,I=T.getSelectedGuideId,M=T.getHorizontalGuides,A=T.getVerticalGuides,O=r.editorPlugins.siteSegments.selectors.getPagesContainerAbsLayout,R=r.editorPlugins.selection.selectors.getSelectedCompsRefs,w=r.editorPlugins.contextMenu.actions;return a.hoc.connect(a.hoc.STORES.STATE_AND_DS,function(e,t){var o=e.state,i=e.dsRead,n="horizontal"===t.rulerDirection?M(o):A(o);return{previewPosition:r.editorPlugins.domMeasurements.selectors.getPreviewPosition(o),siteScroll:i.site.getScroll(),pagesContainerAbsLayout:O(i),isMobileEditor:r.editorPlugins.leftBar.selectors.isMobileEditor(o),selectedGuideData:_(o),selectedComponents:R(o),guidesInRuler:n,selectedGuideId:I(o)}},function(i){return{sendBIEvent:function(e,t){return i(f(e,t))},removeGuideViaDelBtn:function(){return i(h())},changeGuidePosition:function(e,t,o){return i(u(e,t,o))},changeGuidePositionByPixels:function(e,t){return i(g(e,t))},selectGuide:function(e,t){return i(y(e,t))},deselectGuide:function(){return i(b())},setVerticalGuide:function(e){return i(v(e))},setHorizontalGuide:function(e){return i(S(e))},updateIsHovered:function(e){return i(m("isHovered",e))},startGuideDrag:function(){return i(m("isDragging",!0))},updateStateOnDragEnd:function(e){return i(C(e))},removeGuideById:function(e){return i(E(e))},openRightClickMenu:function(e,t){return i(w.openContextMenu({editorPositionX:e.clientX,editorPositionY:e.clientY,origin:"rulers",removeAllGuidesInRuler:function(){return i(P(t.props.isMobileEditor,"vertical"===t.props.rulerDirection))}}))}}})(p)}),define("rEditor/rootComps/mobileFrame/mobileFrame.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",{className:t({"mobile-frame":!0,previewMode:this.props.previewMode}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),style:this.getFrameStyle()},e.createElement("div",{className:"block-layer bottom"}),e.createElement("div",{className:"mobile-frame-top"}),e.createElement("div",{className:"site-shadow",key:"mobile-site-shadow"}),e.createElement("div",{className:"mobile-frame-bottom",onClick:function(e){this.mobileDeviceBtnClick(e)}.bind(this)}))}}),define("rEditor/rootComps/mobileFrame/mobileFrame",["lodash","create-react-class","prop-types","reactDOM","util","rEditor/rootComps/mobileFrame/mobileFrame.rt"],function(r,e,t,s,o,i){"use strict";var n=e({displayName:"mobileFrame",propTypes:{displayShadow:t.bool,siteScale:t.number,previewMode:t.bool.isRequired,refreshMobileFramePosition:t.func,mobileDeviceBtnClick:t.func,siteX:t.number},componentDidMount:function(){this.updateMobileFramePosition()},componentDidUpdate:function(){this.updateMobileFramePosition()},mobileDeviceBtnClick:function(e){var t=e.clientX,o=window.innerWidth/2;if(Math.abs(t-o)<25){var i=s.findDOMNode(this),n=r.head(i.getElementsByClassName("mobile-frame-bottom")).getBoundingClientRect(),a=e.clientY-n.top;14<a&&a<58&&this.props.mobileDeviceBtnClick()}},updateMobileFramePosition:function(){r(s.findDOMNode(this).getBoundingClientRect()).pick(["top","left","height","width"]).thru(this.props.refreshMobileFramePosition).value()},getFrameStyle:function(){var e={left:this.props.siteX};return this.props.previewMode||1===this.props.siteScale||(e.height=Math.round(100/this.props.siteScale)+"%",e.transform="scale("+this.props.siteScale+")"),e},render:i});return o.hoc.renderWhenMutated(n)}),define("rEditor/utils/mouseMoveActions/baseSpace",["lodash","core","constants"],function(r,e,t){"use strict";var s=e.utils.layoutTransitionsUtil,l=void 0,c=void 0,p=void 0,d=void 0,n=void 0,u=void 0,g=void 0,m=void 0;return{start:function(e,t){d=e,c=t.compsToPush,p=t.snapThreshold||0;var o=r.map(c,"id");d.dsActions.renderPlugins.setCompsToShowOnTop(o);var i=r.omit(d.components.layout.getRelativeToScreen(c),"bounding"),n=r.map(c,function(e){return r.omit(d.components.layout.getRelativeToScreen(e),"bounding")});u=t.minY,g=t.onSpaceEnd,m=t.onSpace;var a={x:t.evt.pageX,y:t.evt.pageY};l=new s.Drag(i,a,n)},on:function(e){var t={x:e.pageX,y:e.pageY},o=l.getLayout(t);o.y=Math.max(o.y,u),o.y-p<=u&&(o.y=u),n=l.getBoundComponentLayouts(o);for(var i=0;i<c.length;i++)d.components.layout.updateRelativeToScreenAndAdjustLayout(c[i],r.pick(n[i],"y"));r.isFunction(m)&&m(t.x,t.y)},end:function(){if(n){for(var e=0;e<c.length;e++)d.components.layout.updateRelativeToScreen(c[e],r.pick(n[e],"y"));n=null}d.dsActions.renderPlugins.setCompsToShowOnTop(null),r.isFunction(g)&&g()},type:t.MOUSE_ACTION_TYPES.SPACER}}),define("rEditor/rootComps/sectionsReorganize/sectionControlsButton.rt",["react","lodash","baseUI"],function(e,t,o){"use strict";return function(){return e.createElement(o.tooltip,{value:this.props.tooltip,styleType:"small",disabled:!this.props.tooltip},e.createElement("div",{className:"section-controls-button "+(this.props.label?"with-label":"")+" "+(this.props.isDisabled?"disabled":""),onClick:function(){this.onClick()}.bind(this),onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},e.createElement(o.symbol,{name:this.props.symbol}),e.createElement("span",{},this.props.label)))}}),define("rEditor/rootComps/sectionsReorganize/sectionControlsButton",["create-react-class","prop-types","lodash","rEditor/rootComps/sectionsReorganize/sectionControlsButton.rt"],function(e,t,o,i){"use strict";return e({displayName:"sectionControlsButton",propTypes:{onClick:t.func,tooltip:t.string,symbol:t.string.isRequired,isDisabled:t.bool},onClick:function(){this.isDisabled||this.props.onClick()},render:i})}),define("rEditor/rootComps/sectionsReorganize/sectionControls.rt",["react","lodash","baseUI","util","rEditor/rootComps/sectionsReorganize/sectionControlsButton","constants"],function(t,o,i,n,a,r){"use strict";return function(){return function(){var e=this.getSectionStyle();return t.createElement("div",{className:o(this.getSectionControlsClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),style:e},t.createElement("div",{className:"highlight "+(this.props.isDragging?"with-shadow":""),style:this.getHighlightStyle(),onMouseDown:this.props.onDragHandleMouseDown}),this.shouldDisplayReorderButtons()?t.createElement("div",{key:"reorder-buttons",className:"section-buttons-wrapper",style:this.getButtonsWrapperStyle()},t.createElement("div",{className:"section-buttons"},t.createElement(a,o.assign({},{onClick:this.props.isFirstSection?o.noop:this.props.onUpClicked,tooltip:"ZoomOut_Section_Tooltip_Move_Up",symbol:"sectionMoveUp",",":!0,isDisabled:this.props.isFirstSection},this.getControlButtonProps())),t.createElement(a,o.assign({},{onClick:this.props.isLastSection?o.noop:this.props.onDownClicked,tooltip:"ZoomOut_Section_Tooltip_Move_Down",symbol:"sectionMoveDown",isDisabled:this.props.isLastSection,",":!0},this.getControlButtonProps())),this.props.isMobileEditor?null:t.createElement(a,o.assign({},{key:"duplicate_btn",onClick:this.props.onDuplicateClicked,tooltip:"ZoomOut_Section_Tooltip_Copy_Section",symbol:"sectionDuplicate"},this.getControlButtonProps())),this.props.isSectionRemovable?t.createElement(a,o.assign({},{key:"remove_btn",onClick:this.props.onDeleteClicked,tooltip:this.props.isMobileEditor?"ZoomOut_Section_Tooltip_Hide_Section":"ZoomOut_Section_Tooltip_Delete_Section",symbol:this.props.isMobileEditor?"sectionMobileHide":"sectionDelete"},this.getControlButtonProps())):null)):null,this.props.isGap&&!this.props.isInCropMode?t.createElement("div",{key:"gap-delete",className:"section-buttons-wrapper",style:this.getButtonsWrapperStyle()},t.createElement("div",{className:"section-buttons"},t.createElement(a,o.assign({},{onClick:this.props.onDeleteClicked,symbol:"sectionDelete",label:n.translate("ZoomOut_Delete_Space_Tooltip")},this.getControlButtonProps())))):null,this.props.isHeader||this.props.isFooter?t.createElement("div",{key:"header-footer-info",className:"section-buttons-wrapper",style:this.getButtonsWrapperStyle()},t.createElement("div",{className:"section-buttons"},!this.props.isHeader||this.props.isMobileEditor&&1===this.props.siteScale?null:t.createElement(i.tooltip,{key:"header-info",value:"ZoomOut_Header_Tooltip",styleType:"small",alignment:r.UI.TOOLTIP.ALIGNMENT.BOTTOM},t.createElement("div",{className:"header-footer-info",onMouseEnter:this.onHeaderOver},t.createElement(i.symbol,{name:"infoIcon",className:"info-icon"}),t.createElement("span",{className:"info-text"},n.translate("ZoomOut_Header")))),this.props.isFooter?t.createElement(i.tooltip,{key:"footer-info",value:"ZoomOut_Footer_Tooltip",styleType:"small",alignment:r.UI.TOOLTIP.ALIGNMENT.TOP},t.createElement("div",{className:"header-footer-info",onMouseEnter:this.onFooterOver},t.createElement(i.symbol,{name:"infoIcon",className:"info-icon"}),t.createElement("span",{className:"info-text"},n.translate("ZoomOut_Footer")))):null)):null)}.apply(this,[])}}),define("rEditor/rootComps/sectionsReorganize/sectionControls",["create-react-class","prop-types","lodash","core","stateManagement","coreBi","rEditor/rootComps/sectionsReorganize/sectionControls.rt"],function(e,t,o,i,n,a,r){"use strict";var s=n.editorPlugins.leftBar.selectors.getDeviceType;return e({displayName:"sectionControls",propTypes:{isMobileEditor:t.bool,layout:t.object.isRequired,siteScale:t.number.isRequired,showDragHighlight:t.bool,isDragging:t.bool,isGap:t.bool,isSpacing:t.bool,isHeader:t.bool,isFooter:t.bool,isStaticSection:t.bool,isInCropMode:t.bool,isSectionRemovable:t.bool,onDragHandleMouseDown:t.func,onUpClicked:t.func,onDownClicked:t.func,onDuplicateClicked:t.func,onDeleteClicked:t.func},mixins:[i.mixins.editorAPIMixin],getDefaultProps:function(){return{isMobileEditor:!1,showDragHighlight:!1}},getInitialState:function(){return{isHoveringControlButton:!1}},componentWillMount:function(){this._setControlButtonHoverState=o.debounce(this.setControlButtonHoverState,100),this.throttledBi=o.throttle(this.bi,50,{leading:!1,trailing:!0})},getSectionControlsClasses:function(){return{"section-controls":!0,"show-highlight":this.props.showDragHighlight||this.state.isHoveringControlButton,"no-drag-handle":this.state.isHoveringControlButton||this.props.isSpacing,"header-footer-blocker":this.props.isHeader||this.props.isFooter||this.props.isStaticSection}},getSectionStyle:function(){return{top:this.props.layout.y*this.props.siteScale,height:this.props.layout.height*this.props.siteScale}},getHighlightStyle:function(){var e={width:"calc("+(this.props.isMobileEditor?"320px":"100%")+" * "+this.props.siteScale+" + 2px)"};return 1===this.props.siteScale&&(e.pointerEvents="none"),e},setControlButtonHoverState:function(e){this.state.isHoveringControlButton!==e&&this.setState({isHoveringControlButton:e})},shouldDisplayReorderButtons:function(){return!(this.props.isHeader||this.props.isFooter||this.props.isStaticSection||this.props.isGap||this.props.isDragging||this.props.isInCropMode)},getControlButtonProps:function(){var e=this;return{onMouseEnter:function(){e._setControlButtonHoverState(!0)},onMouseLeave:function(){e._setControlButtonHoverState(!1)}}},getButtonsWrapperStyle:function(){var e="calc(25% + 100% * "+this.props.siteScale+" + 36px)";return this.props.isMobileEditor&&(e="calc(50% + 320px / 2 * "+this.props.siteScale+" + 36px)"),{height:this.props.layout.height*this.props.siteScale,left:e}},bi:function(e){var t=this.getEditorAPI(),o=t.store.getState();t.store.dispatch(n.editorPlugins.bi.actions.event(e,{editor_view_mode:s(o)}))},onHeaderOver:function(){this.throttledBi(a.events.sectionReorganize.header_tooltip_hover)},onFooterOver:function(){this.throttledBi(a.events.sectionReorganize.footer_tooltip_hover)},render:r})}),define("rEditor/rootComps/recommendedMobileHeaderHeight/recommendedMobileHeaderHeight.rt",["react","lodash","util","baseUI","baseUILib"],function(o,e,t,i,n){"use strict";return function(){return o.createElement("div",{className:e({"recommended-mobile-header-height":!0,selected:this.isHeaderSelected()&&!this.props.isResizing}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},o.createElement("div",{className:"header-footer-info-tooltip",key:"recommended-mobile-header",style:this.getHeaderInfoStyle()},o.createElement(n.Tooltip,{key:"recommended-mobile-header-tooltip",id:"recommended-mobile-header-tooltip",content:"mobile_headerscroll_panel_size_tooltip",alignment:"BOTTOM"},o.createElement("div",{className:"header-tooltip-content"},o.createElement(i.symbol,{name:"infoIcon",className:"info-icon"}),o.createElement("span",{className:"recommended-mobile-header-height-title"},"\n          ",t.translate("mobile_headerscroll_panel_size_title"),"\n        ")))),o.createElement.apply(this,["svg",{className:"header-recommended-height-separator"},e.map(this.getRecommendedHeaderLines(),function(e,t){return o.createElement("line",{key:"recommended-height-separator-"+t,className:"header-recommended-height-separator",x1:e.x1,x2:e.x2,y1:e.y,y2:e.y})}.bind(this))]))}}),define("rEditor/rootComps/recommendedMobileHeaderHeight/recommendedMobileHeaderHeight",["lodash","create-react-class","prop-types","constants","util","rEditor/rootComps/recommendedMobileHeaderHeight/recommendedMobileHeaderHeight.rt"],function(t,e,o,i,n,a){"use strict";var r=n.hoc,s=r.connect,l=r.renderWhenMutated,c=r.STORES.EDITOR_API,p=i.ROOT_COMPS.MOBILE_EDITOR.RECOMMENDED_MOBILE_HEADER_HEIGHT,d=i.ROOT_COMPS.MOBILE_EDITOR.MOBILE_FRAME_WIDTH,u=e({displayName:"recommendedMobileHeaderHeight",propTypes:{isResizing:o.bool,selectedComponents:o.arrayOf(o.object),stageLayout:o.object.isRequired},isHeaderSelected:function(){var e=t.head(this.props.selectedComponents);return e&&"SITE_HEADER"===e.id},getHeaderInfoStyle:function(){var e=this.props.stageLayout,t=n.uiUtils.getScrollbarWidth();return{left:(e.width-t-d)/2+d+36,top:p-14-12+1}},getRecommendedHeaderLines:function(){var e=this.props.stageLayout,t=n.uiUtils.getScrollbarWidth();return n.recommendedMobileHeaderHeightUtils.buildRecommendedHeaderLines(e,t)},render:a}),g=s(c,function(e){return{selectedComponents:e.editorAPI.selection.getSelectedComponents()}})(l(u));return g.pure=u,g}),define("rEditor/rootComps/sectionsReorganize/sectionsReorganize.rt",["react","lodash","baseUI","rEditor/rootComps/sectionsReorganize/sectionControls","experiment","rEditor/rootComps/recommendedMobileHeaderHeight/recommendedMobileHeaderHeight","constants"],function(a,r,i,n,e,s,l){"use strict";return function(){return function(){var e=this.getSections(),t=this.getSpacerProps(e),o=this.getSectionControlsProps(e,t);return a.createElement("div",{className:"sections-reorganize-exp"},a.createElement.apply(this,["svg",{className:"section-separators"},r.map(this.getSeparatorLines(e),function(e,t,o,i,n){return a.createElement("line",{className:r({"section-separator":!0}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"separator-"+n,x1:i.x1,x2:i.x2,y1:i.y,y2:i.y})}.bind(this,e,t,o))]),this.shouldDisplayRecommendedHeaderHeight()?a.createElement(s,{key:"recommendedMobileHeaderHeight",isResizing:this.props.isResizing,stageLayout:this.props.stageLayout}):null,o&&!this.state.isSpacing?a.createElement(n,r.assign({},{key:o.layout.y+"_"+o.layout.height,isMobileEditor:this.props.isMobileEditor},o)):null,!t||this.props.isMobileEditor&&1===this.props.siteScale?null:a.createElement(i.tooltip,{key:"spacer_tooltip",id:"zoom_mode_spacer_id",value:"ZoomOut_Change_Space_Tooltip",alignment:l.UI.TOOLTIP.ALIGNMENT.CENTER,delay:"0",disabled:this.state.isSpacing},a.createElement("div",{key:"spacer",className:"spacer-handle",style:t.style,onMouseDown:t.onMouseDown},a.createElement(i.symbol,{name:"spacerHandleDots"}))))}.apply(this,[])}}),define("rEditor/rootComps/sectionsReorganize/sectionsReorganize",["lodash","create-react-class","prop-types","core","util","baseUI","constants","stateManagement","rEditor/utils/mouseMoveActions/baseSpace","coreBi","rEditor/rootComps/sectionsReorganize/sectionsReorganize.rt"],function(h,e,t,c,l,y,o,p,s,i,n){"use strict";var a=p.editorPlugins.domMeasurements.selectors,d=a.translateToViewerCoordinates,u=a.getStageLayout,b=a.getStageRect,g=p.editorPlugins.leftBar.selectors.getDeviceType,m=i.events.sectionReorganize,f=o.ROOT_COMPS.MOBILE_EDITOR.SEPARATOR_LINE_LENGTH;function v(e){if(this.props.selectedSection)return h.find(e,h.bind(function(e){return h.isEqual(e.comps,this.props.selectedSection.comps)},this));var t=this.state.stageMousePosition;if(t)for(var o=0;o<e.length;o++)if(t.y>=e[o].position.top&&t.y<=e[o].position.bottom)return e[o];return null}function S(e){return this.props.selectedSection&&h.isEqual(e.comps,this.props.selectedSection.comps)}function E(e){return!(e.isCurrentPageLandingPage()||e.dsRead.pages.popupPages.isPopupOpened())}function r(e,t){return t.y>=e.y&&t.y<=e.y+e.height}function P(e){if(!e)return null;var t,o,i,n=h.clone(e),a=this.getEditorAPI();t=a,o=n,i=c.utils.sectionsReorganizeUtil.getHeaderSection(t),o.unshift(i);var r=function(e){if(this.props.selectedSection)return-1;var t=this.state.stageMousePosition;if(t)for(var o=0;o<e.length-1;o++)if(t.y>e[o].position.bottom&&t.y<e[o+1].position.top)return o;return-1}.call(this,n=o);if(-1===r)return null;var s={y:n[r].position.bottom,height:n[r+1].position.top-n[r].position.bottom};return{isGap:!0,isInCropMode:a.imageCrop.isCropMode(),layout:s,siteScale:this.props.siteScale,onDeleteClicked:function(){this.closeGapBetweenSections(n,r)}.bind(this)}}return e({displayName:"sectionsReorganize",propTypes:{isMobileEditor:t.bool.isRequired,sections:t.array,selectedSection:t.object,isSectionDragging:t.bool,isCompDragging:t.bool,stageLayout:t.object.isRequired,siteScale:t.number.isRequired,isResizing:t.bool,isInZoomMode:t.bool},mixins:[c.mixins.editorAPIMixin],getInitialState:function(){return{isSpacing:!1,stageMousePosition:null}},componentDidMount:function(){this._throttledUpdateMousePosition=h.throttle(this.updateMousePosition,100),window.addEventListener("mousemove",this._throttledUpdateMousePosition)},componentWillUnmount:function(){window.removeEventListener("mousemove",this._throttledUpdateMousePosition)},updateMousePosition:function(e){var t,o,i,n=this.getEditorAPI().store.getState(),a=u(n);if(t=a,o=e.clientX,i=e.clientY,o>=t.left&&o<=t.right&&i>=t.top&&i<=t.bottom){e=h.pick(e,["clientX","clientY","pageX","pageY"]);var r=d(n,e),s={x:r.pageX,y:r.pageY};this.setState({stageMousePosition:s})}else this.state.stageMousePosition&&this.setState({stageMousePosition:null})},getSections:function(){return this.props.sections?this.props.sections:c.utils.sectionsReorganizeUtil.getPageSections(this.getEditorAPI())},getSectionControlsProps:function(e,t){return function(){var e=this.state.stageMousePosition;if(!e)return null;var t=this.getEditorAPI();if(!E(t))return null;var o=t.components.layout.getRelativeToScreen(t.dsRead.siteSegments.getHeader()),i=t.components.layout.getRelativeToScreen(t.dsRead.siteSegments.getFooter()),n=void 0;return r(o,e)?n={layout:o,isHeader:!0}:r(i,e)&&(n={layout:i,isFooter:!0}),n?h.assign(n,{siteScale:this.props.siteScale}):null}.call(this)||P.call(this,e)||function(t,e){if(!t||e&&e.isSpacerHovered)return null;var o=v.call(this,t);if(!o)return null;var i=h.findIndex(t,o);if(o.isStaticSection)return{layout:this.getSectionLayout(o),siteScale:this.props.siteScale,isStaticSection:!0};var n=S.call(this,o),a=1!==this.props.siteScale,r=this,s=r.getEditorAPI();function l(e){var t=s.store.getState();s.store.dispatch(p.editorPlugins.bi.actions.event(m.reorder_panel_clicked,{editor_view_mode:g(t),action_clicked:e}))}return{section:o,siteScale:this.props.siteScale,layout:this.getSectionLayout(o),showDragHighlight:!this.props.isMobileEditor||a,isDragging:n,isInZoomMode:s.zoomMode.isInZoomMode(),isInCropMode:s.imageCrop.isCropMode(),isSpacing:this.state.isSpacing,tooltipId:"reorganize-section-tooltip",isFirstSection:0===i||h.get(t,[i-1,"isStaticSection"]),isLastSection:i===t.length-1||h.get(t,[i+1,"isStaticSection"]),isSectionRemovable:o.isRemovable,onDragHandleMouseDown:function(e){r.startSectionDrag(e,t,o)},onDuplicateClicked:function(){c.utils.sectionsReorganizeUtil.duplicateSection(s,t,h.findIndex(t,o)),l("duplicate")},onDeleteClicked:function(){c.utils.sectionsReorganizeUtil.deleteSection(s,t,h.findIndex(t,o)).then(function(e){e&&(s.history.add("Delete Section"),l("delete"))})},onUpClicked:function(){r.shiftSection(t,o,-1),l("up")},onDownClicked:function(){r.shiftSection(t,o,1),l("down")}}}.call(this,e,t)},getSpacerProps:function(t){if((this.props.isCompDragging||this.props.isSectionDragging)&&!this.state.isSpacing)return null;var e=this.state.stageMousePosition;if(!t||!e)return null;var o,i,n,a,r,s=this.getEditorAPI(),l=b(s.store.getState()),c=function(e,t){if(this.state.isSpacing&&this.props.selectedSection)return h.findIndex(e,h.bind(S,this));for(var o=0;o<e.length;o++){var i=0<o?e[o-1]:null;if(t.y<=e[o].position.top+30&&(!i||t.y>i.position.top+30))return o}return-1}.call(this,t,e),p=(o=this.state.stageMousePosition,i=this.props.siteScale,n=this.props.isMobileEditor,a=l,r=void 0,r=n?320*i:(a.right-a.left)*i,o.x*i<=r),d=v.call(this,t),u=h.findIndex(t,d),g=!!d&&function(e){var t,o,i,n,a=function(e){if(!this.state.stageMousePosition)return!1;var t=this.state.stageMousePosition.y;return t>=e.position.top&&t<=e.position.bottom}.call(this,e),r=this.getEditorAPI(),s=b(r.store.getState());return a&&(t=this.state.stageMousePosition,o=this.props.siteScale,i=this.props.isMobileEditor,n=s,(i?320*o:(n.right-n.left)*o)<=t.x*o)}.call(this,d);if(-1===c||!p||g)return null;var m=this,f=this.props.isMobileEditor?"320px":"100%";return{style:{top:this.getSectionLayout(t[c]).y*this.props.siteScale,width:"calc("+f+" * "+this.props.siteScale+" + 2px)"},onMouseDown:function(e){y.tooltipManager.hide("zoom_mode_spacer_id"),m.startSpacing(e,t,c)},isSpacerHovered:c===u}},getSeparatorLines:function(e){var t=function(e,t){var o=h.clone(e),i=[];if(E(t)){var n=c.utils.sectionsReorganizeUtil.getHeaderSection(t);o.unshift(n)}for(var a=0;a<o.length;a++){var r=o[a],s=0<a?o[a-1]:null;s&&s.position.bottom<r.position.top&&i.push(r.position.top),i.push(r.position.bottom)}return i}(e,this.getEditorAPI()),o=this.props.stageLayout,i=l.uiUtils.getScrollbarWidth(),n=(o.width-i)*this.props.siteScale;this.props.isMobileEditor&&(n=320*this.props.siteScale);var a=(o.width-i-n)/2,r=h.get(c.utils.sectionsReorganizeUtil.getHeaderSection(this.getEditorAPI()),["position","bottom"]),s=this.isHeaderSectionResizing();return h.flatMap(t,h.bind(function(e){return e*=this.props.siteScale,[{x1:a-f,x2:a,y:e,isSectionResizing:s&&r===e},{x1:a+n,x2:a+n+f,y:e,isSectionResizing:s&&r===e}]},this))},isHeaderSectionResizing:function(){return this.props.isResizing&&this.isHeaderSectionSelected()},isHeaderSectionSelected:function(){return"SITE_HEADER"===h.get(h.head(this.getEditorAPI().selection.getSelectedComponents()),"id")},shouldDisplayRecommendedHeaderHeight:function(){return this.props.isMobileEditor&&!this.props.isInZoomMode&&this.isHeaderSectionSelected()},closeGapBetweenSections:function(e,t){for(var o=this.getEditorAPI(),i=e[t+1].position.top-e[t].position.bottom,n=t+1;n<e.length;n++)c.utils.sectionsReorganizeUtil.shiftSection(o,e[n],-1*i);o.bi.event(m.SPACE_DELETED,{site_id:o.dsRead.generalInfo.getSiteId(),page_id:o.dsRead.pages.getFocusedPageId(),space_size:i}),o.history.add("Delete Space")},shiftSection:function(e,t,o){var i=h.findIndex(e,t)+o;if(!(i<0||i>=e.length)){var n=t,a=e[i];-1===o&&(n=e[i],a=t),c.utils.sectionsReorganizeUtil.switchSections(this.getEditorAPI(),e,n,a),this.getEditorAPI().history.add("Move Section")}},startSectionDrag:function(e,t,o){var i,n=this.getEditorAPI();n.setPageSections(t,o),n.mouseActions.registerMouseMoveAction(c.utils.sectionDrag,{sections:t,evt:e,minY:(i=n,i.siteSegments.getPagesContainerAbsLayout().y),draggedSection:o,onDragEnd:this.onSectionDragEnd.bind(this,o,o.position.top)},!0)},onSectionDragEnd:function(e,t){var o=this.getEditorAPI();e=this.props.selectedSection||e,o.bi.event(m.REORDER_SECTION,{page_id:o.dsRead.pages.getFocusedPageId(),position_before:t,position_after:e.position.top,section_size:c.utils.sectionsReorganizeUtil.getSectionSizeForBI(e.position.bottom-e.position.top)}),o.clearPageSections()},startSpacing:function(e,t,o){for(var i=this.getEditorAPI(),n=[],a=o;a<t.length;a++)n=n.concat(t[a].comps);if(!h.isEmpty(n)){var r=0===o?0:t[o-1].position.bottom;i.mouseActions.registerMouseMoveAction(s,{evt:e,minY:r,snapThreshold:Math.round(5/this.props.siteScale),compsToPush:n,onSpaceEnd:this.onSpaceEnd}),this.setState({isSpacing:!0}),i.setPageSections(t,t[o]),i.bi.event(m.zoom_mode_spacer_drag)}},onSpaceEnd:function(){this.getEditorAPI().clearPageSections(),this.setState({isSpacing:!1}),this.getEditorAPI().history.add("Change Sections Space")},getSectionLayout:function(e){if(e.layout)return e.layout;if(!this.props.isSectionDragging&&!this.state.isSpacing||h.isEmpty(e.comps))return{y:e.position.top,height:e.position.bottom-e.position.top};var t=this.getEditorAPI().components.layout.getRelativeToScreen(e.comps);return t.bounding||t},render:n})}),define("rEditor/rootComps/pinMode/pinMode.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",{className:"pin-mode"},e.createElement("div",{className:"preview-rect",style:this.props.style}),e.createElement("div",{className:"blocking-layer",onClick:this.exitPinMode}))}}),define("rEditor/rootComps/pinMode/pinMode",["create-react-class","core","lodash","stateManagement","experiment","constants","helpIds","rEditor/rootComps/pinMode/pinMode.rt"],function(e,t,o,i,n,a,r,s){"use strict";var l=i.editorPlugins.userPreferences.selectors.getSessionUserPreferences;return e({displayName:"pinMode",mixins:[t.mixins.editorAPIMixin],render:s,exitPinMode:function(){var e=this.getEditorAPI();if("old"!==n.getValue("se_notificationCenter")&&0===(l(a.USER_PREFS.PIN_TO_SCREEN.PIN_COUNT)(e.store.getState())||0)){e.store.dispatch(i.editorPlugins.notifications.actions.showUserActionNotification({message:"Notifications_Pinned_Mobile_Text",title:"Notifications_Pinned_Mobile_Text",type:"info",link:{caption:"Notifications_Pinned_Mobile_Link",onNotificationLinkClick:function(){e.panelManager.openHelpCenter(r.NOTIFICATIONS.PIN_TO_SCREEN)}}})),e.store.dispatch(i.editorPlugins.userPreferences.actions.setSessionUserPreferences(a.USER_PREFS.PIN_TO_SCREEN.PIN_COUNT,-4))}e.pinMode.closeAndCheckSizeRestrictions()}})}),define("rEditor/rootComps/languageChangeOverlay/languageChangeOverlayMapper",["stateManagement"],function(e){"use strict";var t=e.multilingual,o=t.actions,i=t.selectors;return{mapStateToProps:function(e){var t=e.editorAPI;return{isLanguageChanging:i.isChanging(t.store.getState()),nextLanguage:i.nextLanguage(t.store.getState())}},mapDispatchToProps:function(t){return{setCurrentLanguage:function(e){return t(o.setCurrentLanguageThunk(e))},completeLanguageChange:function(){return t(o.completeLanguageChange())}}}}}),define("rEditor/rootComps/languageChangeOverlay/languageChangeOverlay.rt",["react","lodash","baseUILib"],function(e,t,o){"use strict";return function(){return e.createElement("div",{key:"language-change-overlay",className:"language-change-overlay "+t({active:this.props.isLanguageChanging,animated:this.props.isLanguageChanging||this.state.isCompletingLanguageChange}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onTransitionEnd:this.handleTransitionEnd},e.createElement("div",{className:"preloader"},e.createElement(o.Preloader,{className:"medium"})))}}),define("rEditor/rootComps/languageChangeOverlay/languageChangeOverlay",["create-react-class","util","rEditor/rootComps/languageChangeOverlay/languageChangeOverlayMapper","rEditor/rootComps/languageChangeOverlay/languageChangeOverlay.rt"],function(e,t,o,i){"use strict";var n=t.hoc,a=n.connect,r=n.STORES.EDITOR_API,s=e({displayName:"languageChangeOverlay",getInitialState:function(){return{isCompletingLanguageChange:!1}},handleTransitionEnd:function(){this.setState({isCompletingLanguageChange:this.props.isLanguageChanging}),this.props.nextLanguage&&(this.props.setCurrentLanguage(this.props.nextLanguage),this.props.completeLanguageChange())},render:i}),l=a(r,o.mapStateToProps,o.mapDispatchToProps)(s);return l.pure=s,l}),define("rEditor/rootComps/stage/editorStage.rt",["react","lodash","rEditor/rootComps/mouseCatcher","rEditor/rootComps/textEditor","rEditor/rootComps/invisibleTextEditor","util","uiAnimations","rEditor/rootComps/gridLines/gridLines","rEditor/rootComps/rulers/rulers","rEditor/rootComps/mobileFrame/mobileFrame","rEditor/rootComps/sectionsReorganize/sectionsReorganize","rEditor/rootComps/pinMode/pinMode","rEditor/rootComps/languageChangeOverlay/languageChangeOverlay","experiment"],function(i,o,n,a,r,s,l,c,p,e,d,u,g,t){"use strict";return function(){return function(){var e=this.getEditorAPI(),t=this.props.viewPort;return i.createElement("div",{className:o({"editor-stage":!0,"tools-hidden":this.props.isReorganizeHidden}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),id:this.props.id},i.createElement("div",{className:"scrollable-editor-stage "+(this.isSiteScrollingEnabled()?"":"scrolling-disabled"),ref:"scrollableEditorStage",id:"scrollableEditorStage",onScroll:this._handleScroll},i.createElement("div",{ref:"siteCover",className:"site-cover",style:{height:this.getStageHeight()}},this.isGridLinesVisible()?i.createElement("div",{className:"gridLines",key:"gridLines"},i.createElement(c,{key:"pageGridLines",gridLines:this.getPageGridLines(),fade:this.shouldFadeGridLines()}),this.shouldShowContainerGridLines()?i.createElement(c,{key:"containerGridLines",gridLines:this.getContainerGridLines()}):null):null,i.createElement("div",{className:"scalable",style:this.getScalableAreaStyle()},this.props.previewMode||!this.props.editorIsInit||this.props.imageCrop.isOn?null:i.createElement(n,{ref:"mouseCatcher",key:"mouseCatcher",config:this.props.config,attachCandidate:this.props.attachCandidate,appContainer:this.props.appContainer,onContextMenu:this.props.onContextMenu,editorIsInit:this.props.editorIsInit,isSectionDragging:this.isSectionDragging(),isDragging:this.isDragging(),isResizing:this.isResizing(),isRotating:this.isRotating(),isPinMode:this.props.isPinMode,performingMouseMoveAction:this.props.performingMouseMoveAction,registeredMouseMoveAction:this.props.registeredMouseMoveAction,hoveredComp:this.props.hoveredComp,hoverBoxOverlay:this.props.hoverBoxOverlay,setHoverBox:this.props.setHoverBox,clearHoverBox:this.props.clearHoverBox,selectedComponents:this.props.selectedComponents,compPanel:this.props.panel,previewPosition:this.props.previewPosition,previewMode:this.props.previewMode,siteScale:this.props.siteScale,snapData:this.props.snapData,applyModeFromClipboardSuggestion:this.props.applyModeFromClipboardSuggestion,tabIndicationState:this.props.tabIndicationState,lassoCandidates:this.props.lassoCandidates,lassoLayout:this.props.lassoLayout,constraintArea:this.props.constraintArea}),this.props.imageCrop.isOn?i.createElement(s.lazyComponent,o.assign({},{moduleName:"maskCrop.layer",key:"maskCrop"},{imageCropData:this.props.imageCrop,imageComponent:this.getImageComponent()})):null,i.createElement(a,{key:"textEditorNew",isOpenTextEditor:this.props.isOpenTextEditor,openPanels:this.props.openPanels,selectedTextComp:this.getSelectedTextComp(),isRepeatedTextComp:this.isEditingRepeatedTextComp(),styleOnly:this.isTextEditorInStyleOnlyMode(),layout:this.getTextEditorPosition(),isResizing:this.isResizing()}),i.createElement(r,{}),this.props.viewTools.rulersEnabled&&1===this.props.siteScale&&e.isPreviewReady()?i.createElement(p,{key:"rulers",rulerDirection:"horizontal",previewHeight:this.getStageHeight(),isHovered:this.props.rulers.isHovered,toolsHidden:this.props.hideTools,isDragging:this.props.rulers.isDragging,viewPort:t,previewSize:this.props.previewPosition}):null,i.createElement(g,{})),i.createElement("div",{className:"non-scalable"},1!==this.props.siteScale?i.createElement("div",{className:"block-layer",key:"block-layer"},i.createElement("div",{className:"side left transition",style:this.getSideBlockLayerStyle()}),i.createElement("div",{className:"side right transition",style:this.getSideBlockLayerStyle()}),e.isMobileEditor()?null:i.createElement("div",{key:"block-layer-bottom",className:"side bottom",style:{height:"calc(100% - "+this.getSideBlockLayerHeight()+"px)"}}),this.isSectionDragging()||e.isMobileEditor()?null:i.createElement("div",{key:"scaled-site-shadow",className:"shadow",style:this.getBlockShadowStyle()})):null,this.shouldShowSectionReorganize()?i.createElement(d,{key:"sectionsReorganize",ref:"sectionsReorganize",isMobileEditor:e.isMobileEditor(),sections:this.props.pageSections.sections,selectedSection:this.props.pageSections.selectedSection,isSectionDragging:this.isSectionDragging(),isCompDragging:this.isDragging(),siteScale:this.props.siteScale,isHidden:this.props.isReorganizeHidden,halfOpacityTools:this.props.halfOpacityTools,stageLayout:e.ui.stage.getEditingAreaLayout(),isResizing:this.isResizing(),isInZoomMode:e.zoomMode.isInZoomMode()}):null))),i.createElement("div",{className:"fixed-editor-stage",style:{width:"calc(100% - "+s.uiUtils.getScrollbarWidth()+"px)"}},i.createElement("div",{className:"fixed-editor-stage-contents-wrapper "+(1!==this.props.siteScale?"no-pointer-events":"")},i.createElement("div",{className:"scalable",style:this.getScalableAreaStyle()},this.props.isPinMode?i.createElement(u,{ref:"pinMode",key:"pinMode",style:this.props.pinPreviewRectStyle}):null,this.props.viewTools.rulersEnabled&&1===this.props.siteScale?i.createElement(p,{key:"rulers",rulerDirection:"vertical",isHovered:this.props.rulers.isHovered,toolsHidden:this.props.hideTools,isDragging:this.props.rulers.isDragging,viewPort:t,previewSize:this.props.previewPosition}):null),i.createElement("div",{className:"non-scalable"},e.isMobileEditor()?i.createElement("div",{key:"mobileOpacityLayer",className:"mobile-frame-opacity-layer"}):null,i.createElement(l.panelsAnimation,{},this.shouldDisplayMobileOptimizedTeaser()&!e.zoomMode.isInZoomMode()?function(e,t){var o=s.translate;return i.createElement("div",{key:"teaser",className:"mobile-optimized-teaser"},i.createElement("h1",{},o("mobile_view_notification_title")),"\n                        ",o("mobile_view_notification_text"),"\n                        ",i.createElement("a",{onClick:this.openEditorModePanel},o("mobile_view_notification_text_link")),"\n                        ",o("mobile_view_notification_text2"),"\n                    ")}.apply(this,[e,t]):null)))))}.apply(this,[])}}),define("rEditor/rootComps/stage/editorStage",["reactDOM","lodash","create-react-class","prop-types","core","uiAnimations","constants","stateManagement","experiment","rEditor/rootComps/stage/editorStage.rt"],function(n,l,e,t,i,a,r,s,o,c){"use strict";var p=s.editorPlugins.preview.selectors.getPreviewMode,d=s.editorPlugins.text.selectors.isStyleOnly,u=[r.MOUSE_ACTION_TYPES.RESIZE,r.MOUSE_ACTION_TYPES.RESIZE_PUSH,r.MOUSE_ACTION_TYPES.RESIZE_CROP,r.MOUSE_ACTION_TYPES.RESIZE_PAGE],g=[r.MOUSE_ACTION_TYPES.DRAG,r.MOUSE_ACTION_TYPES.DRAG_PUSH],m=r.ROOT_COMPS.TOPBAR.DROP_PANELS.MOBILE,f=s.editorPlugins.domMeasurements.selectors.getPreviewPosition,h=s.editorPlugins.selection.selectors,y=h.getFocusedContainer,b=h.getSelectedCompsRefs;var v=function(e){return e.components.is.spotlightStageContainer(y(e.store.getState()))};if(!o.isOpen("se_dragAndScroll")){var S=window.document.createElement("style");S.innerHTML="*:not(input):not(textarea) {-moz-user-select: none; -webkit-user-select: none; -ms-user-select: none; user-select: none; }",window.document.head.appendChild(S)}return e({displayName:"EditorStage",mixins:[i.mixins.editorAPIMixin],propTypes:{editorIsInit:t.bool.isRequired,guidesState:t.object,onStageScroll:t.func,previewPosition:t.object,viewTools:t.object.isRequired,imageCrop:t.object.isRequired,hideTools:t.bool.isRequired,registeredMouseMoveAction:t.object,previewMode:t.bool.isRequired,pinPreviewRectStyle:t.object.isRequired,isOpenTextEditor:t.bool.isRequired,selectedComponents:t.array,isPinMode:t.bool,attachCandidate:t.object,siteHeight:t.number,siteScale:t.number.isRequired,snapData:t.array,applyModeFromClipboardSuggestion:t.object,tabIndicationState:t.object.isRequired,lassoCandidates:t.array,lassoLayout:t.object,constraintArea:t.object,hoveredComp:t.object,hoverBoxOverlay:t.bool,setHoverBox:t.func.isRequired,clearHoverBox:t.func.isRequired,scrollTo:t.shape({scrollTop:t.number,scrollLeft:t.number}),animateScrollTo:t.shape({position:t.shape({y:t.number,x:t.number}).isRequired,duration:t.number,onComplete:t.func}),openPanels:t.array.isRequired,viewPort:t.object},componentWillReceiveProps:function(){var e=this.getEditorAPI();!this.props.hoveredComp||e.components.is.exist(this.props.hoveredComp)&&e.components.is.visible(this.props.hoveredComp)||this.props.clearHoverBox()},componentDidUpdate:function(){if(this.props.scrollTo)this.setScroll(this.props.scrollTo);else if(this.props.animateScrollTo){var e=this.props.animateScrollTo,t=e.position,o=e.duration,i=e.onComplete;this.animateScroll(t,o,i)}},shouldDisplayMobileOptimizedTeaser:function(){var e=this.getEditorAPI(),t=e.store.getState();return e.isMobileEditor()&&!p(t)&&!e.isMobileOptimizedSite()},openEditorModePanel:function(){var e=this.getEditorAPI(),t=o.getValue("se_topBarMobileExposure");"topBarLeftSectionToggle"===t||"topBarRightSectionToggle"===t?e.panelManager.openPanel("panels.focusPanels.mobileFriendlyPanel"):e.topBarMenuBar.openDropDown(m)},getStageHeight:function(){return this.getEditorAPI().isPreviewReady()?this.props.siteHeight*this.props.siteScale:"100%"},isLandingPage:function(){return this.getEditorAPI().isCurrentPageLandingPage()},isPopupPage:function(){return Boolean(this.getEditorAPI().dsRead.pages.popupPages.getCurrentPopupId())},isSectionDragging:function(){return this.props.registeredMouseMoveAction&&this.props.registeredMouseMoveAction.type===r.MOUSE_ACTION_TYPES.SECTION_DRAG&&this.props.performingMouseMoveAction},isDragging:function(){return this.props.registeredMouseMoveAction&&l.includes(g,this.props.registeredMouseMoveAction.type)&&this.props.performingMouseMoveAction},isResizing:function(){return this.props.registeredMouseMoveAction&&l.includes(u,this.props.registeredMouseMoveAction.type)},isRotating:function(){return this.props.registeredMouseMoveAction&&this.props.registeredMouseMoveAction.type===r.MOUSE_ACTION_TYPES.ROTATE},getScalableAreaStyle:function(){var e=this.props.siteScale;if(1!==e)return{height:this.props.siteHeight,transform:"scale("+e+")",transformOrigin:"center 0"}},getSideBlockLayerStyle:function(){return this.getEditorAPI().isMobileEditor()?{width:"calc((100% - 320px * "+this.props.siteScale+") / 2)"}:{width:100*(1-this.props.siteScale)/2+"%"}},getSideBlockLayerHeight:function(){return Math.max(0,this.props.siteHeight*this.props.siteScale)},getBlockShadowStyle:function(){var e=100*(1-this.props.siteScale)/2;return{left:e+"%",right:e+"%",height:this.getSideBlockLayerHeight()+"px"}},getImageComponent:function(){return function(e,t){if(t&&1===t.length){var o=t[0];if("Image"===e.components.data.get(o).type)return o}return null}(this.getEditorAPI(),this.props.selectedComponents)},getScroll:function(){return l(this.refs.scrollableEditorStage).thru(n.findDOMNode).pick("scrollTop","scrollLeft").value()},setScroll:function(e){var t=n.findDOMNode(this.refs.scrollableEditorStage);l.isUndefined(e.scrollTop)||(t.scrollTop=e.scrollTop),l.isUndefined(e.scrollLeft)||(t.scrollLeft=e.scrollLeft),this.getEditorAPI().scroll.clearScrollTo()},animateScroll:function(e,t,o){var i=n.findDOMNode(this.refs.scrollableEditorStage);a.scrollTo(e,t,0,i,o),this.getEditorAPI().scroll.clearScrollTo()},_handleScroll:function(e){this.getEditorAPI().scroll.registerNewScrollPosition(this.getScroll()),this.props.onStageScroll&&this.props.onStageScroll(e)},isSiteScrollingEnabled:function(){var e=l.get(this.getEditorAPI().dsRead,["site","isScrollingEnabled"],!0);return!l.isFunction(e)||e()},getSiteCoverSizes:function(){var e=n.findDOMNode(this.refs.siteCover);return{width:e.clientWidth,height:e.clientHeight}},getPageGridLines:function(){var e=this.getEditorAPI(),t=s.editorPlugins.gridLines.selectors.getGridLinesOverrides(e.store.getState(),{gridLinesType:r.GRID_LINES_TYPES.PAGE});if(t)return t;var o=this.isLandingPage()||this.isPopupPage();return i.utils.gridLinesUtil.getPageGridLines(e,o)},getContainerGridLines:function(){var e=this.getEditorAPI(),t=e.store.getState(),o=y(t);return i.utils.gridLinesUtil.getContainerGridLines(e,o)},shouldFadeGridLines:function(){var e=this.getEditorAPI(),t=e.store.getState(),o=y(t),i=b(t);return!!(e.components.is.showMarginsIndicator(o)||"wysiwyg.viewer.components.StripColumnsContainer"===e.components.getType(i)&&1<e.components.getChildren(i).length&&i&&e.components.is.fullWidth(i))},isGridLinesVisible:function(){var e=this.getEditorAPI(),t=e.store.getState(),o=!0;return!(v(e)&&!s.spotlightStage.selectors.getConfig(t).shouldShowGridLines)&&(e.isPreviewReady()&&e.dsRead.pages.popupPages.isPopupOpened()&&(o=e.components.is.gridLinesVisible(e.pages.popupPages.getPopupContainer())),e.isDesktopEditor()&&this.props.viewTools.guidelinesEnabled&&!this.props.isPinMode&&o)},getSelectedTextComp:function(){return function(e,t){if(l.isEmpty(t)||1!==t.length)return!1;var o=l.head(t),i=e.components.data.get(o);return"StyledText"===(i&&i.type)}(this.getEditorAPI(),this.props.selectedComponents)?this.props.selectedComponents[0]:null},isEditingRepeatedTextComp:function(){return this.getEditorAPI().text.isEditingRepeatedTextComp()},isTextEditorInStyleOnlyMode:function(){return d(this.getEditorAPI().store.getState())},getTextEditorPosition:function(){var e={},t=this.getSelectedTextComp();if(t){var o=this.getEditorAPI(),i=o.store.getState(),n=o.components.layout.getRelativeToScreen(t),a=o.components.layout.isShowOnFixedPosition(t);if(e={top:n.y,left:n.x,width:n.width,height:n.height,position:a?"fixed":"absolute"},n.rotationInDegrees){var r="rotate("+n.rotationInDegrees+"deg)";l.assign(e,{transform:r,WebkitTransform:r})}if(a){var s=f(i);e.top+=s.top,e.left+=s.left}}return this.props.isOpenTextEditor&&!this.isTextEditorInStyleOnlyMode()||(e.visibility="hidden"),e},shouldShowSectionReorganize:function(){var e=this.getEditorAPI();return this.props.editorIsInit&&!this.props.isPinMode&&!this.props.isPopupMode&&!v(e)&&(e.isMobileEditor()||1!==this.props.siteScale)},shouldShowContainerGridLines:function(){var e=this.getEditorAPI(),t=e.store.getState(),o=y(t);return e.components.is.showMarginsIndicator(o)},render:c})}),define("rEditor/rootComps/prefetch/prefetch.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("link",{rel:"prefetch prerender",href:this.getHref()})}}),define("rEditor/rootComps/prefetch/prefetch",["create-react-class","rEditor/rootComps/prefetch/prefetch.rt"],function(e,t){"use strict";return e({displayName:"prefetch",render:t,getHref:function(){return this.props.base?this.props.base.replace(/\/$/,"")+"/"+this.props.href.replace(/^\//,""):this.props.href}})}),define("rEditor/rootComps/flyingMusa/flyingMusa",["lodash","create-react-class","prop-types","react","util","stateManagement"],function(e,t,o,i,n,a){"use strict";var r=t({displayName:"flyingMusa",propTypes:{musaStyle:o.object},render:function(){return i.createElement("div",{className:"flying-musa",style:this.props.musaStyle},i.createElement("img",{"data-type":"image",src:"https://static.wixstatic.com/media/2cb119_71a13d37fa584e5e9aa97d1c1ede1d36.gif",width:"143px",height:"72px",style:{objectFit:"cover"}}))}});return n.hoc.connect(n.hoc.STORES.STATE_ONLY,function(e,t){var o=e.state,i=t.musaId;return{musaStyle:a.editorPlugins.easterEggs.selectors.getFlyingMusaStyle(o,i)}})(r)}),define("rEditor/rootComps/unifiedChatWrapper/unifiedChatWrapper",["lodash","create-react-class","util","stateManagement"],function(o,e,t,i){"use strict";var n=i.panels.selectors.selectOpenPanels,a=e({displayName:"UnifiedChatWrapper",componentDidMount:function(){t.chatManager.showChat()},componentWillUnmount:function(){t.chatManager.hideChat()},render:function(){return null}}),r=["panels.focusPanels.newUserIntroVideoPanel","panels.focusPanels.newEditorWelcomeScreenPanel"];return o.flowRight(t.hoc.withConditionalRender(t.hoc.STORES.STATE_ONLY,function(e){var t=e.state;return o(t).thru(n).map("name").intersection(r).isEmpty()}))(a)}),define("rEditor/rootComps/editorView.rt",["react","lodash","topBar","rEditor/rootComps/topBar/zoomModeBar","rEditor/rootComps/topBar/dynamicPagesComboBox","rEditor/rootComps/rightClickMenu/rightClickMenu","rEditor/rootComps/panels/openedPanels","rEditor/rootComps/portal/portal","mobileEditor","baseUI","constants","util","uiAnimations","rEditor/rootComps/stage/editorStage","rEditor/rootComps/mobileFrame/mobileFrame","textControls","rEditor/rootComps/prefetch/prefetch","rEditor/rootComps/flyingMusa/flyingMusa","rEditor/rootComps/unifiedChatWrapper/unifiedChatWrapper","notifications","experiment"],function(r,s,n,a,l,c,p,d,u,g,m,f,h,y,b,v,S,E,P,C,e){"use strict";return function(){function i(e,t,o){var i=this.props.previewMode?"consolePane":"idePane",n=e.developerMode.ui[i].getSplitPosition();return r.createElement(g.splitter,{className:"ide-splitter",layout:"horizontal",splitPosition:n,onDividerClick:this.props.previewMode?null:e.developerMode.ui.idePane.toggleMinimize,statefulResize:!0,onResize:e.developerMode.ui[i].setSplitPosition},r.createElement(g.splitter.Pane,{maxSize:this.shouldShowIdePane()?"calc(100% - "+e.developerMode.ui.topbarHeight+")":"100%"},r.createElement(g.splitter,{className:"left-area-splitter",layout:"vertical",splitPosition:this.getSecondaryLeftAreaWidth()||"180px",statefulResize:!0,onResize:this.setSecondaryLeftAreaWidth},this.getSecondaryLeftAreaContentModule()&&!this.props.hideTools?r.createElement(g.splitter.Pane,{key:"secondaryLeftArea",className:"secondary-left-area",maxSize:"360px",minSize:"135px"},r.createElement(f.lazyComponent,{moduleName:this.getSecondaryLeftAreaContentModule()})):null,r.createElement(g.splitter.Pane,{},r.createElement("div",{ref:"editingArea",id:"editingArea",className:s({"editing-area":!0,"mobile-wizard-editing-area":this.shouldRenderMobileWizard(),"mobile-editor":e.isMobileEditor(),"preview-mode":this.props.previewMode}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},r.createElement("div",{className:s(this.getPreviewFrameCoverClasses()).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},e.isMobileEditor()?r.createElement(b,{key:"mobileFrame",siteScale:this.props.siteScale,displayShadow:!this.isSectionDragging(),previewMode:this.props.previewMode,refreshMobileFramePosition:e.refreshMobileFramePosition,mobileDeviceBtnClick:this.mobileDeviceBtnClick,siteX:e.site.getXPos()}):null,function(e,t,o,i,n){var a=s.invoke(e,"site.getSiteX");return r.createElement("div",{className:"preview-container"},r.createElement("iframe",{ref:"preview",id:"preview",src:this.props.previewUrl,allowFullScreen:!0}),this.shouldHidePreviewOverflow()?r.createElement("div",{className:"mobile-hide-preview-left",style:{width:a},key:"mobile-hide-preview-left"}):null,this.shouldHidePreviewOverflow()?r.createElement("div",{className:"mobile-hide-preview-right",style:{width:a,left:a+m.ROOT_COMPS.MOBILE_EDITOR.MOBILE_FRAME_WIDTH},key:"mobile-hide-preview-right"}):null)}.apply(this,[e,t,o,i,n]),this.shouldRenderEditorStage()?r.createElement(y,{id:"stageContainer",key:"editorStage",ref:"editorStage",config:this.props.config,viewTools:this.props.viewTools,rulers:this.props.rulers,imageCrop:this.props.imageCrop,hideTools:this.props.hideTools,previewMode:this.props.previewMode,pinPreviewRectStyle:this.props.pinPreviewRectStyle,isOpenTextEditor:this.props.isOpenTextEditor,attachCandidate:this.props.attachCandidate,appContainer:this.props.appContainer,editorIsInit:this.props.editorIsInit,onContextMenu:this.onContextMenu,registeredMouseMoveAction:this.props.registeredMouseMoveAction,performingMouseMoveAction:this.props.performingMouseMoveAction,selectedComponents:this.props.selectedComponents,panel:this.getCompPanel(),previewPosition:this.props.previewPosition,siteHeight:this.props.config.previewHeight,siteScale:this.props.siteScale,portalComps:this.props.portalComps,pageSections:this.props.pageSections,halfOpacityTools:this.props.halfOpacityTools,isReorganizeHidden:this.props.isReorganizeHidden,isPopupMode:e.isPopUpMode(),isPinMode:this.props.isPinMode,onStageScroll:e.scroll.handleStageScroll,snapData:this.props.snapData,applyModeFromClipboardSuggestion:this.props.applyModeFromClipboardSuggestion,tabIndicationState:this.props.tabIndicationState,lassoCandidates:this.props.lassoCandidates,lassoLayout:this.props.lassoLayout,constraintArea:this.props.constraintArea,hoveredComp:this.props.hoveredComp,hoverBoxOverlay:this.props.hoverBoxOverlay,setHoverBox:this.setHoverBox,clearHoverBox:this.clearHoverBox,scrollTo:this.props.scrollTo,openPanels:t,animateScrollTo:this.props.animateScrollTo,viewPort:this.props.viewPort}):null),r.createElement(p,{openPanels:t,helpPanelProps:this.props.helpPanelProps,selectedComponents:this.props.selectedComponents,isMobileEditor:this.props.isMobileEditor}),r.createElement(h.leftBarAnimation,{},this.props.previewMode||this.props.isPinMode?null:r.createElement(this.LeftBar,{key:"leftBar"})),s.isEmpty(this.props.portalComps)?null:r.createElement(d,{key:"portalComps",comps:this.props.portalComps}),this.shouldRenderMobileWizard()?r.createElement(o,{key:"mobile-wizard"}):null)))),this.shouldShowIdePane()?function(e,t,o,i,n){var a=this.props.devModeContext.type===m.DEVELOPER_MODE.CONTEXT_TYPES.COLLECTION;return r.createElement(g.splitter.Pane,{className:s({"wix-code-ide-pane":!0,"above-editor":!a&&n.replace("%","")<50}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"wix-code-ide-pane",minSize:e.developerMode.ui.topbarHeight,onClick:this.onIdeClick},this.props.previewMode?null:r.createElement(f.lazyComponent,{moduleName:"wixCode.components.WixCodeIDE",key:"wix-code-ide",id:"wix-code-ide"}),this.props.previewMode?r.createElement(f.lazyComponent,{moduleName:"wixCode.components.console",key:"wix-code-console",id:"wix-code-console"}):null)}.apply(this,[e,t,o,i,n]):null)}return function(){var e=this.getEditorAPI(),t=this.getNonCompPanels(),o=u.mobileWizard;return r.createElement("div",{className:"editor-animation-manager-wrapper",id:"editor",tabIndex:"0"},r.createElement.apply(this,["div",{className:"editor-wrapper "+(1!==this.props.siteScale?"zoom-mode":""),onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onMouseDownCapture:this.onMouseDownCapture},this.props.isPreloaderVisible?r.createElement("div",{key:"init",className:"preloader"}):null,e.developerMode.isEnabled()?r.createElement(f.lazyComponent,{moduleName:"wixCode.components.wixCodeLoader",key:"wix-code-loader",id:"wix-code-loader",wixCodeLoaded:this.props.wixCodeLoaded}):null,r.createElement("div",{className:s({"editor-content-wrapper":!0,"with-top-bar-banner":this.withTopBarBanner(),"hidden-to-top":this.shouldCompletelyHideTools(),"tools-hidden":this.props.hideTools&&!this.props.hideToolsAndMaintainStagePosition}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},r.createElement(g.splitter,{className:"file-pane-splitter",layout:"vertical",splitPosition:e.developerMode.ui.treePane.getSplitPosition(),statefulResize:!0,onResize:e.developerMode.ui.treePane.setSplitPosition},this.shouldShowLeftPane()?r.createElement(g.splitter.Pane,{className:"wix-code-left-pane",collapsed:!e.developerMode.ui.treePane.isOpen(),key:"left-panel-pane",minSize:"150px",maxSize:"296px",automationId:"wix-code-left-pane"},this.props.wixCodeLoaded?r.createElement(f.lazyComponent,{moduleName:"wixCode.components.Tree",key:"wix-code-tree",id:"wix-code-tree",performingMouseMoveAction:this.props.performingMouseMoveAction,context:e.developerMode.getContext()}):null):null,r.createElement(g.splitter.Pane,{},r.createElement(g.splitter,{layout:"vertical"},r.createElement(g.splitter.Pane,{minSize:"calc(100% - "+(this.props.previewMode?m.RIGHT_AREA.WIDTH_PREVIEW:m.RIGHT_AREA.WIDTH)+"px)"},i.apply(this,[e,t,o]),r.createElement(p,{openPanels:s.compact([this.props.fullStagePanel]),helpPanelProps:this.props.helpPanelProps,isMobileEditor:this.props.isMobileEditor,selectedComponents:this.props.selectedComponents,withHelpPanel:!1})),this.shouldShowSectionedPanel()||this.shouldShowPlatformSidePanel()?r.createElement(g.splitter.Pane,{key:"right-area",className:"right-pane",id:"right panel"},this.shouldShowSectionedPanel()?r.createElement(f.lazyComponent,{moduleName:this.props.previewMode?"dockableSections.sectionedPanelPreview":"dockableSections.sectionedPanel",previewMode:this.props.previewMode,key:"sectioned-panel"}):null,this.shouldShowPlatformSidePanel()?r.createElement(f.lazyComponent,{moduleName:"platformPanels.sidePanel",previewMode:this.props.previewMode,key:"platform-side-panel"}):null):null)))),r.createElement("div",{className:"editor-controls"},r.createElement(n.topBar,{key:"topbar",ref:"topbar",onContextMenu:this.onContextMenuPreventDefault,savingStatus:this.props.savingStatus,publishingStatus:this.props.publishingStatus,shouldHideToolsBtnBlink:this.props.shouldHideToolsBtnBlink,isHidden:this.props.hideTools,imageCrop:this.props.imageCrop}),r.createElement(a,{key:"zoomModeBar"}),r.createElement(l,{key:"dynamicPagesComboBox",previewMode:this.props.previewMode,devModeContext:this.props.devModeContext,editorIsInit:this.props.editorIsInit}),r.createElement("div",{className:s({"file-context":"FILE"===s.get(e.developerMode.getContext(),"type")?"hidden":""}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},this.props.viewTools.toolbarEnabled&&!this.props.previewMode?r.createElement(this.Toolbar,{key:"toolBar"}):null,this.props.shouldShowDevModePanels&&this.props.viewTools.developerToolBarEnabled&&!this.props.previewMode?r.createElement(f.lazyComponent,{moduleName:"wixCode.components.developerToolBar",key:"developerToolbar",toolsHidden:this.props.hideTools,isEnabled:this.props.editorIsInit,onContextMenu:this.onContextMenuPreventDefault}):null),r.createElement(g.tooltipsRenderer,{key:"tooltipsRenderer"}),r.createElement(g.floatingBubble,{ref:"floatingBubble",value:this.props.floatingBubble.value,targetLayout:this.props.floatingBubble.targetLayout,bubbleProps:this.props.floatingBubble.bubbleProps,shouldNotHideOnMouseLeaveTarget:this.props.floatingBubble.shouldNotHideOnMouseLeaveTarget,pinMode:this.props.isPinMode}),r.createElement(C.notificationCenter,{}),r.createElement(g.dropDown.options,{})),this.props.editorIsInit?null:r.createElement("div",{className:"preloader-overlap",key:"preloader-overlap"}),this.props.contextMenu?r.createElement(c,{key:this.props.contextMenu.editorMousePosition.x+""+this.props.contextMenu.editorMousePosition.y,clipboard:this.props.clipboard,editorMousePosition:this.props.contextMenu.editorMousePosition,viewerMousePosition:this.props.contextMenu.viewerPosition,origin:this.props.contextMenu.origin,context:this.props.contextMenu.context,removeAllGuidesInRuler:this.props.contextMenu.removeAllGuidesInRuler,previewPosition:this.props.previewPosition,selectedComponents:this.props.selectedComponents,setHoverBox:this.setHoverBox,clearHoverBox:this.clearHoverBox}):null,this.props.languages?r.createElement(v.themeFontsLoader,{key:"theme-font-loader",themeFonts:this.props.themeFonts,documentType:this.props.documentType,languages:this.props.languages}):null,r.createElement(S,{href:"node_modules/editor-organize-images/index.html",base:this.props.editorBase}),s.map(s.values(this.props.flyingMusa),function(e,t,o,i,n){return r.createElement(E,{musaId:i.id,key:i.id})}.bind(this,e,t,o)),this.shouldShowLiveChat()?r.createElement(P,{key:"unifiedChatWrapper"}):null]))}.apply(this,[])}}),define("rEditor/rootComps/editorView",["create-react-class","prop-types","reactDOM","lodash","core","util","constants","higherOrderComponents","rEditor/rootComps/leftBar/leftBar","rEditor/rootComps/toolBar/toolBar","coreUtilsLib","rEditor/utils/isRightClickWithCtrlInDebugMode","stateManagement","baseUI","experiment","coreBi","rEditor/rootComps/editorView.rt"],function(e,t,i,r,o,n,a,s,l,c,p,d,u,g,m,f,h){"use strict";var y=u.editorPlugins.contextMenu.actions,b=u.editorPlugins.hoverBox.actions,v=u.editorPlugins.panels.actions,S=a.MOBILE.MOBILE_WIZARD.OPENING_STATE,E=u.domMeasurements.actions.initDomMeasurements,P=u.editorPlugins.domMeasurements.selectors.translateToViewerCoordinates,C=!1,T=u.editorPlugins.wixCodeIDE.selectors,_=u.editorPlugins.leftTree.selectors,I=u.secondaryLeftArea.selectors,M=u.unifiedChat.selectors,A=u.secondaryLeftArea.actions;return e({displayName:"editorView",propTypes:{previewUrl:t.string.isRequired,viewTools:t.object.isRequired,languages:t.array,editorIsInit:t.bool.isRequired,previewMode:t.bool.isRequired,contextMenu:t.object,halfOpacityTools:t.bool.isRequired,hideTools:t.bool.isRequired,hideToolsAndMaintainStagePosition:t.bool.isRequired,isPinMode:t.bool.isRequired,performingMouseMoveAction:t.bool.isRequired,isMobileEditor:t.bool.isRequired,selectedComponents:t.array,siteScale:t.number.isRequired,portalComps:t.object.isRequired,savingStatus:t.string.isRequired,publishingStatus:t.string.isRequired,previewingStatus:t.string.isRequired,imageCrop:t.object.isRequired,config:t.object.isRequired,previewPosition:t.object.isRequired,pageSections:t.object.isRequired,wixCodeLoaded:t.bool.isRequired,clipboard:t.object.isRequired,shouldHideToolsBtnBlink:t.bool.isRequired,devModeContext:t.object.isRequired,registeredMouseMoveAction:t.object,isUsingWindowMouseEvents:t.bool,shouldShowSectionedPanel:t.bool,isPreloaderVisible:t.bool.isRequired,shouldShowDevModePanels:t.bool.isRequired,fullStagePanel:t.object,documentType:t.string,editorBase:t.string.isRequired,themeFonts:t.object,isReorganizeHidden:t.bool.isRequired,pinPreviewRectStyle:t.object.isRequired,isOpenTextEditor:t.bool.isRequired,attachCandidate:t.object,snapData:t.array,applyModeFromClipboardSuggestion:t.object,tabIndicationState:t.object.isRequired,lassoCandidates:t.array,lassoLayout:t.object,constraintArea:t.object,notifyPreviewReady:t.func.isRequired,helpPanelProps:t.object,floatingBubble:t.object.isRequired,scrollTo:t.shape({scrollTop:t.number,scrollLeft:t.number}),focusEventCounter:t.number.isRequired,clearTextSelectionEventCounter:t.number.isRequired,animateScrollTo:t.shape({position:t.shape({y:t.number,x:t.number}).isRequired,duration:t.number,onComplete:t.func}),flyingMusa:t.object,renderCounter:t.number.isRequired,openDockedSections:t.arrayOf(t.string),viewPort:t.object},mixins:[o.mixins.editorAPIMixin],getPreviewRect:function(){return r.pick(this.refs.preview.getBoundingClientRect(),["top","left","height","width"])},getEditingAreaRect:function(){return r.pick(this.refs.editingArea.getBoundingClientRect(),["top","left","height","width","right","bottom"])},updatePositionsInState:function(){var e=this.getEditorAPI();e.refreshPreviewPosition(this.getPreviewRect()),e.refreshEditingAreaPosition(this.getEditingAreaRect())},receiveFocusEvent:function(e){e>this.props.focusEventCounter&&i.findDOMNode(this).focus()},receiveClerTextSelectionEvent:function(e){if(e>this.props.clearTextSelectionEventCounter){var t=i.findDOMNode(this.refs.preview),o=r.get(t,"contentWindow",{});o.selection?o.selection.empty():o.getSelection&&o.getSelection().removeAllRanges()}},componentWillReceiveProps:function(e){this.receiveFocusEvent(e.focusEventCounter),this.receiveClerTextSelectionEvent(e.clearTextSelectionEventCounter)},componentWillMount:function(){var e=this.getEditorAPI();this.LeftBar=s.overlappedCompTooltip(g.popoverTemplates.quickTip)(l),this.Toolbar=s.overlappedCompTooltip(g.popoverTemplates.quickTip)(c),e.scroll.resetScrollListeners()},componentDidMount:function(){this.updatePositionsInState();var t=i.findDOMNode(this.refs.preview);try{t.contentWindow&&t.contentWindow.documentServices&&this.props.notifyPreviewReady(t.contentWindow.documentServices,t.contentWindow.createSantaPreview,t.contentWindow.compFactory)}catch(e){n.ravenUtils.captureError(e,{tags:{failedOnPreviewIframe:!0}}),p.log.error("can not access preview iframe")}window.addEventListener("message",this.previewMessageHandler),window.viewerStartTimeStamp=(new Date).toISOString();var e=function(e){window.bi&&window.bi.event(735,{autosave_on:!!r.get(window,[t,"documentServicesModel","autoSaveInfo","shouldRestoreDiffs"]),viewer_start_loading_timestamp:window.viewerStartTimeStamp,time_seconds:e})};window.editorLoadTimeouts=[window.setTimeout(r.partial(e,40),4e4),window.setTimeout(r.partial(e,45),45e3),window.setTimeout(r.partial(e,50),5e4),window.setTimeout(r.partial(e,55),55e3),window.setTimeout(r.partial(e,60),6e4)],this.getEditorAPI().store.dispatch(E())},isSectionDragging:function(){return this.props.registeredMouseMoveAction&&this.props.registeredMouseMoveAction.type===a.MOUSE_ACTION_TYPES.SECTION_DRAG&&this.props.performingMouseMoveAction},componentDidUpdate:function(){this.reportRenderDone(),this.props.performingMouseMoveAction||this.updatePositionsInState(),this.getEditorAPI().store.dispatch(E())},componentWillUnmount:function(){this.getEditorAPI().scroll.resetScrollListeners()},reportRenderDone:function(){this.getEditorAPI().onRenderDone(this.props.renderCounter)},setHoverBox:function(e,t){var o=this.getEditorAPI(),i=o.utils.getParentIfCompCanBeSelected(e)||e,n=o.store.getState(),a=u.editorPlugins.hoverBox.selectors.getHoveredComp(n);r.isEqual(a,i)||o.store.dispatch(b.setHoverBox(i,!!t))},clearHoverBox:function(){var e=this.getEditorAPI(),t=e.store.getState();u.editorPlugins.hoverBox.selectors.getHoveredComp(t)&&e.store.dispatch(b.clearHoverBox())},previewMessageHandler:function(e){if(0!==this.props.previewUrl.indexOf(e.origin)||"documentServicesLoaded"!==e.data||C)0===this.props.previewUrl.indexOf(e.origin)&&"mobileConversionFailed_ReloadNeeded"===e.data&&(C=!0,window.location.href=window.location.href+"&autosaveRestore=false");else{var t=i.findDOMNode(this.refs.preview);this.props.notifyPreviewReady(t.contentWindow.documentServices,t.contentWindow.createSantaPreview,t.contentWindow.compFactory),r.forEach(window.editorLoadTimeouts,window.clearTimeout)}},onContextMenu:function(e){if(!d(e)){e.preventDefault();var t=this.getEditorAPI(),o=t.store;o.dispatch(v.closeOpenedPanels()),t.selection.selectComponentByClick(e);var i=o.getState(),n=P(i,e),a=u.editorPlugins.selection.selectors.getSelectedCompsRefs(i);r.isEmpty(a)||o.dispatch(y.openContextMenu({editorPositionX:e.clientX,editorPositionY:e.clientY,viewerPositionX:n.clientX,viewerPositionY:n.clientY,origin:"stage"}))}},getNonCompPanels:function(){var e=this.getEditorAPI(),o=[a.PANEL_TYPES.COMP,a.PANEL_TYPES.FULL_STAGE];return r.reject(e.getOpenPanels(),function(t){return r.find(o,function(e){return r.includes(t.frameType,e)})})},getCompPanel:function(){var e=this.getEditorAPI();return r.find(e.getOpenPanels(),function(e){return r.includes(e.frameType,a.PANEL_TYPES.COMP)})},onContextMenuPreventDefault:function(e){d(e)||e.preventDefault()},shouldRenderMobileWizard:function(){var e=this.getEditorAPI();return e.isPreviewReady()&&e.mobile.mobileWizard.isEnabled()&&e.isMobileEditor()},getMobileWizardOpeningState:function(){var e=this.getEditorAPI().store.getState();return u.editorPlugins.mobile.selectors.mobileWizard.getMobileWizardOpeningState(e)},getPreviewFrameCoverClasses:function(){var e=this.getMobileWizardOpeningState();return{"preview-frame-cover":!0,"mobile-wizard-preview-frame":e===S.IN_PROGRESS,"mobile-wizard-preview-frame-out":e===S.FINISH}},shouldRenderEditorStage:function(){return!this.props.previewMode&&!this.shouldRenderMobileWizard()},shouldCompletelyHideTools:function(){var e=this.getMobileWizardOpeningState()===S.IN_PROGRESS;return this.shouldRenderMobileWizard()&&e},mobileDeviceBtnClick:function(){this.getEditorAPI().bi.event(f.events.mobileEditor.MOBILE_EDITOR_DEVICE_CLICKED)},onIdeClick:function(){this.getEditorAPI().panelManager.closeAllPanels()},onMouseDownCapture:function(e){2===e.button&&e.stopPropagation()},onMouseMove:function(e){this.getEditorAPI().mouseActions.onEditorViewMouseMove(e)},onMouseUp:function(e){this.getEditorAPI().mouseActions.onEditorViewMouseUp(e)},getSiteId:function(){return this.getEditorAPI().dsRead.generalInfo.getSiteId()},shouldShowPackagesView:function(){var e=u.editorPlugins.leftTree.selectors.getOverriddenItems(this.getEditorAPI().store.getState()).packagesView.isHidden;return m.isOpen("se_appStudioPackagesView")&&!e},shouldShowIdePane:function(){var e=T.getOverriddenItems(this.getEditorAPI().store.getState());return this.props.shouldShowDevModePanels&&(this.props.previewMode||e.shouldShow)},shouldShowLeftPane:function(){var e=_.getOverriddenVisibility(this.getEditorAPI().store.getState());return this.props.shouldShowDevModePanels&&!this.props.previewMode&&e},shouldShowLiveChat:function(){return M.isChatLoaded(this.getEditorAPI().store.getState())},shouldShowSectionedPanel:function(){return this.props.previewMode?this.shouldShowSectionedPanelAppStudioPreview():this.props.shouldShowDevModePanels&&0<this.props.openDockedSections.length&&this.props.shouldShowSectionedPanel},shouldShowPlatformSidePanel:function(){return!this.props.previewMode&&0<u.editorPlugins.panels.selectors.selectOpenDockedPlatformPanels(this.getEditorAPI().store.getState()).length},getSecondaryLeftAreaWidth:function(){var e=this.getEditorAPI().store.getState();return I.width(e)},getSecondaryLeftAreaContentModule:function(){if(m.isOpen("se_appBuilderVariations")){var e=this.getEditorAPI().store.getState();return I.contentModule(e)}},setSecondaryLeftAreaWidth:function(e){this.getEditorAPI().store.dispatch(A.setWidth(e))},shouldShowSectionedPanelAppStudioPreview:function(){var e=this.getEditorAPI().dsRead.pages.getFocusedPageId();return this.getEditorAPI().dsRead.pages.isWidgetPage(e)},shouldHidePreviewOverflow:function(){var e=this.getEditorAPI();return e.isMobileEditor()&&!u.mobile.selectors.mobileWizard.getIsMobileWizardEnabled(e.store.getState())},withTopBarBanner:function(){var e=this.getEditorAPI();return!(this.props.hideTools&&!this.props.hideToolsAndMaintainStagePosition)&&u.topBar.selectors.getBannerVisibility(e.store.getState())},render:h})}),define("rEditor/rootComps/editor.rt",["react","lodash","rEditor/rootComps/editorView","stateManagement"],function(o,i,n,a){"use strict";return function(){return function(){var e=this.props.editorAPI.store.getState(),t=a.editorPlugins.mouseActions.selectors;return o.createElement(n,i.assign({},{ref:"editorView",viewTools:e.viewTools,rulers:e.rulers,languages:this.getLanguages(),editorIsInit:e.editorIsInit,contextMenu:e.contextMenu,halfOpacityTools:e.halfOpacityTools,hideTools:e.hideTools,hideToolsAndMaintainStagePosition:e.hideToolsAndMaintainStagePosition,selectedComponents:a.editorPlugins.selection.selectors.getSelectedCompsRefs(e),siteScale:e.siteScale,portalComps:e.portalComps,isPinMode:a.editorPlugins.pinMode.selectors.isOpen(e),performingMouseMoveAction:t.isPerformingMouseMoveAction(e),savingStatus:e.savingStatus,publishingStatus:a.publishingStatus.selectors.getPublishingStatus(e),previewingStatus:e.previewingStatus,isMobileEditor:e.isMobileEditor,topBarCustomization:e.topBarCustomization,imageCrop:e.imageCrop,config:e.config,previewPosition:a.editorPlugins.domMeasurements.selectors.getPreviewPosition(e),shouldShowSectionedPanel:a.sectionedPanel.selectors.shouldShow(e),pageSections:e.pageSections,wixCodeLoaded:e.wixCodeLoaded,clipboard:e.clipboard,shouldHideToolsBtnBlink:e.shouldHideToolsBtnBlink,devModeContext:e.devModeContext,registeredMouseMoveAction:t.isPerformingMouseMoveAction(e)?this.props.editorAPI.mouseActions.getRegisteredMouseMoveAction():null,isUsingWindowMouseEvents:t.isUsingWindowMouseEvents(e),isPreloaderVisible:this.isPreloaderVisible(),shouldShowDevModePanels:this.shouldShowDevModePanels(),fullStagePanel:this.getFullStagePanel(),documentType:this.getDocumentType(),editorBase:this.getEditorBase(),themeFonts:this.getThemeFonts(),pinPreviewRectStyle:this.getPinPreviewRectStyle(e),isOpenTextEditor:a.editorPlugins.text.selectors.isTextEditorOpen(e),previewUrl:this.props.previewUrl,attachCandidate:e.attachCandidate,appContainer:a.editorPlugins.selection.selectors.getAppContainer(e),snapData:e.snapData,applyModeFromClipboardSuggestion:a.editorPlugins.applyModeFromClipboard.selectors.selectApplyModeFromClipboardSuggestion(e),tabIndicationState:e.tabIndicationState,lassoCandidates:e.lassoCandidates,lassoLayout:e.lassoLayout,constraintArea:e.constraintArea,notifyPreviewReady:this.notifyPreviewReady,helpPanelProps:e.helpProps,floatingBubble:e.floatingBubble,hoverBox:e.hoverBox,scrollTo:e.scrollTo,animateScrollTo:e.animateScrollTo,focusEventCounter:e.eventCounters.focus,clearTextSelectionEventCounter:e.eventCounters.clearTextSelection,renderCounter:e.__renderCounter,flyingMusa:e.easterEggs.flyingMusa,openDockedSections:a.sectionedPanel.selectors.openDockedSections(e),viewPort:a.editorPlugins.domMeasurements.selectors.getViewPort(e),hoveredComp:a.editorPlugins.hoverBox.selectors.getHoveredComp(e),hoverBoxOverlay:a.editorPlugins.hoverBox.selectors.getHoverBoxOverlay(e)},this.getEditorViewProps()))}.apply(this,[])}}),define("rEditor/rootComps/editor",["lodash","constants","create-react-class","zepto","util","rEditor/rootComps/keyboard/config/shortcutsConfig","uiAnimations","tpa","prop-types","coreBi","stateManagement","rEditor/rootComps/editor.rt"],function(a,e,t,o,r,i,n,s,l,c,p,d){"use strict";window.bi&&window.bi.event(c.events.editor.EDITOR_LOADED.evid,{prefetch:window.afterEditorPrefetch}),r.performance.mark("editor loaded"),r.performance.measure("main-r started","domLoading","main-r loaded"),r.performance.measure("addPanelData loaded","main-r loaded","addPanelData loaded"),r.performance.measure("editor loaded","addPanelData loaded","editor loaded");var u=!0;function g(){var e=o(window);r.fedopsLogger.appLoaded(),this.props.editorAPI.bi.event(c.events.editor.EDITOR_READY,{is_premium:this.props.editorAPI.site.isPremium(),is_template:this.props.editorAPI.dsRead.generalInfo.isFirstSave(),window_width:e.width(),window_height:e.height(),screen_width:window.screen.width,screen_height:window.screen.height,avail_width:window.screen.availWidth,avail_height:window.screen.availHeight,prefetch:window.afterEditorPrefetch,request_from_adi:this.props.editorAPI.dsRead.generalInfo.isSiteFromOnBoarding(),experiments:a(r.editorModel.runningExperiments).pickBy(function(e){return"new"===e}).keys().sortBy().join(","),ref:window.document.referrer})}return t({displayName:"editor",mixins:[n.animationManager,r.componentUpdatesMixin],propTypes:{previewMode:l.bool.isRequired,editorIsInit:l.bool.isRequired,previewUrl:l.string.isRequired,editorAPI:l.object.isRequired},childContextTypes:{dsRead:l.object,editorAPI:l.object,mediaServices:l.object,bi:l.object,translateFromContext:l.func},getChildContext:function(){return{dsRead:this.props.editorAPI.dsRead,editorAPI:this.props.editorAPI,mediaServices:this.props.editorAPI.mediaServices,bi:window.bi,translateFromContext:r.translate}},notifyEditorInit:function(){s.initEditor(this.props.editorAPI),i.init(this.props.editorAPI)},notifyPreviewReady:function(e,t,o){this.props.editorAPI.onPreviewReady(e,t,o),r.translate.init(this.props.editorAPI),this.props.editorAPI.setEditorMode(this.isMobileViewer(),!0),this.props.editorAPI.updateState({editorIsInit:!0}),u&&(u=!1,g.call(this)),(new window.Image).src="https://fast.fonts.com/t/1.css?apiType=css&projectid=33bd0973-5b82-45be-bb77-837225874dfe",this.props.editorAPI.concurrentUsers.checkForConcurrentUsers(!0),r.performance.mark("editor ready"),r.performance.measure("editor ready","editor loaded","editor ready")},componentWillMount:function(){this.notifyEditorInit()},componentWillUnmount:function(){0},componentDidMount:function(){window.testApi&&window.testApi.domSelectors&&window.testApi.domSelectors.setSearchRoot(this),this.updateKeyboardShortcutContext(),window.history&&(window.history.replaceState({preview:!1},"edit mode"),window.onpopstate=this.onHistoryPopState)},componentDidUpdate:function(e){if(!e.editorIsInit&&this.props.editorIsInit){var t=window.document.getElementById("video-preloader");t&&t.parentNode.removeChild(t)}e.previewMode!==this.props.previewMode&&(window.history.state&&this.props.previewMode&&!window.history.state.preview?this.onEnterPreview():window.history.state&&!this.props.previewMode&&window.history.state.preview&&this.onExitPreview(),this.updateKeyboardShortcutContext(),o(window.document.body).toggleClass("previewMode",this.props.previewMode)),a(this.renderCallbacks).filter(a.isFunction).forEach(function(e){e()})},componentDidCatch:function(e,t){var o=t.componentStack,i=void 0===o?"":o,n=a(i).split("in ").remove(function(e){return 2<a.split(e.trim(),"").length&&"div "!==e}).value()[0];r.ravenUtils.captureError(e,{tags:{whiteScreenOfDeath:!0,throwingComponent:n},extra:{componentStack:i}})},onExitPreview:function(){window.history.replaceState({preview:!1},"edit mode")},onEnterPreview:function(){window.history.pushState({preview:!0},"site preview")},onHistoryPopState:function(e){if(e.state){var t=e.state.preview&&!this.props.previewMode,o=!e.state.preview&&this.props.previewMode;(t||o)&&this.props.editorAPI.preview.togglePreview()}},updateKeyboardShortcutContext:function(){var e=r.keyboardShortcuts.CONTEXTS;r.keyboardShortcuts.setContext(this.props.previewMode?e.PREVIEW:e.EDITOR)},getFullStagePanel:function(){return a.find(this.props.editorAPI.getOpenPanels(),{frameType:e.PANEL_TYPES.FULL_STAGE})},getDocumentType:function(){return this.props.editorAPI.dsRead&&this.props.editorAPI.dsRead.generalInfo.getDocumentType()},isMobileViewer:function(){return this.props.editorAPI.dsRead.viewMode.get()===this.props.editorAPI.dsRead.viewMode.VIEW_MODES.MOBILE},getLanguages:function(){return a.invoke(this.props.editorAPI,"dsRead.theme.fonts.getCharacterSet")},getThemeFonts:function(){return a.invoke(this.props.editorAPI,"dsRead.theme.fonts.getAll")},getEditorBase:function(){return r.editorModel.editorBase},getPinPreviewRectStyle:function(e){return a.cloneDeep(p.editorPlugins.pinMode.selectors.getPinPreviewRectStyle(e))},isPreloaderVisible:function(){return!window.document.getElementById("video-preloader")&&!this.props.editorIsInit},shouldShowDevModePanels:function(){return this.props.editorAPI.store.getState().wixCodeLoaded&&this.props.editorAPI.developerMode.isEnabled()&&!this.props.editorAPI.store.getState().hideTools},getEditorViewProps:function(){var e=this.props.editorAPI.store.getState();return{previewMode:this.props.previewMode,isReorganizeHidden:e.hideTools||this.props.editorAPI.isPopUpMode()}},render:d})}),define("rEditor/app/panelHelpers",["lodash","util","platform","constants","stateManagement","experiment","coreBi","helpIds"],function(u,a,r,s,g,m,f,h){"use strict";var l="old"!==m.getValue("se_notificationCenter")?4:10,c="old"!==m.getValue("se_notificationCenter")?4:1,y="old"!==m.getValue("se_notificationCenter")?4:1,e=g.editorPlugins.userPreferences.selectors,b=e.getSiteUserPreferences,v=e.getSessionUserPreferences,S=g.editorPlugins.panels.actions.openOrganizeImagesPanel;return{create:function(p){var t="panels.focusPanels.aviaryPanel",e="pages.pagesPanel",d={FORBIDDEN_COMP_TYPES:["wysiwyg.common.components.anchor.viewer.Anchor","mobile.core.components.Page","platform.components.AppController"],DESKTOP:{NOTIFICATION_RATE:4,DONT_SHOW_AGAIN_KEY:s.USER_PREFS.OUT_OF_GRID.DESKTOP.OUT_OF_GRID_DONT_SHOW_AGAIN,OUT_OF_GRID_COUNT_KEY:s.USER_PREFS.OUT_OF_GRID.DESKTOP.OUT_OF_GRID_COUNT,PANEL_NAME:"panels.focusPanels.outOfGridDesktopPanel"},MOBILE:{NOTIFICATION_RATE:10,DONT_SHOW_AGAIN_KEY:s.USER_PREFS.OUT_OF_GRID.MOBILE.OUT_OF_GRID_DONT_SHOW_AGAIN,OUT_OF_GRID_COUNT_KEY:s.USER_PREFS.OUT_OF_GRID.MOBILE.OUT_OF_GRID_COUNT,PANEL_NAME:"panels.focusPanels.outOfGridMobilePanel"},CONTAINER:{NOTIFICATION_RATE:4,DONT_SHOW_AGAIN_KEY:s.USER_PREFS.OUT_OF_GRID.CONTAINER.OUT_OF_GRID_DONT_SHOW_AGAIN,OUT_OF_GRID_COUNT_KEY:s.USER_PREFS.OUT_OF_GRID.CONTAINER.OUT_OF_GRID_COUNT,PANEL_NAME:"panels.focusPanels.outOfContainerGridPanel"}};function o(e,t){return{isPreset:p.selection.getSelectedComponentData().metaData.isPreset,imagesChanged:function(e,t){e&&e(t)}.bind(null,t),createImageDataItem:p.dsRead.data.createItem.bind(null,"Image"),galleryType:e}}function i(e,t){n(e)?t&&p.panelManager.updatePanelProps(e,t):p.panelManager.openPanel(e,t)}function n(e){var t=p.panelManager.getOpenPanels();return u.some(t,{name:e})}return{openOrganizeImagesPanel:function(e){p.store.dispatch(S(e))},openOrganizeSocialIconsPanel:function(e){p.panelManager.openPanel("panels.focusPanels.organizeImagesPanel",o("socialIcons",e))},getImagePanelsProps:o,openAviaryPanel:function(e){p.panelManager.openPanel(t,{imageLink:e,onDialogResult:function(){p.panelManager.closePanelByName(t)}},!0)},isPanelOpen:n,isPagesPanelOpen:function(){return n(e)},openPagesPanel:function(e){e=u.assign(e,{token:r.tokenService.generateStaticGlobalPanelToken("pagesPanel")}),p.setForceOpenPagesPanelEventCounter(),i("pages.pagesPanel",e)},closePagesPanel:function(){p.panelManager.closePanelByName(e)},openMobileElementsPanel:function(){if(p.isMobileEditor()){var e={mobileElementId:"mobileView"},t="mobileEditor.mobileElementsPanel",o=(new Date).getTime();e.key=a.lazyComponent.isLoaded(t)?t+o:t+"loading",i(t,e)}},handleOutOfGrid:function(e,t){var o=void 0;o=t?d.CONTAINER:p.isMobileEditor()?d.MOBILE:d.DESKTOP;var i=p.components.getType(p.selection.getSelectedComponents());if(p.bi.event(f.events.stage.OUT_OF_GRIDLINES,{component_type:i,source_name:t?"strip":"page"}),n=i,a=b(o.DONT_SHOW_AGAIN_KEY)(p.store.getState()),r=u.includes(d.FORBIDDEN_COMP_TYPES,n),s=p.dsRead.pages.popupPages.isPopupOpened()&&!p.components.is.gridLinesVisible(p.pages.popupPages.getPopupContainer()),l=p.dsRead.pages.isWidgetPage(p.dsRead.pages.getFocusedPageId()),!(a||r||s||l)){var n,a,r,s,l,c=v(o.OUT_OF_GRID_COUNT_KEY)(p.store.getState())||0;c%o.NOTIFICATION_RATE==0&&("old"===m.getValue("se_notificationCenter")||p.isMobileEditor()?p.panelManager.openPanel(o.PANEL_NAME,e,!0):p.store.dispatch(g.editorPlugins.notifications.actions.showUserActionNotification({message:"Notifications_Gridlines_Text",title:"Out Of Gridlines",type:"info",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){p.panelManager.openHelpCenter(h.NOTIFICATIONS.OUT_OF_GRIDLINES)}}}))),c+=1,p.store.dispatch(g.editorPlugins.userPreferences.actions.setSessionUserPreferences(o.OUT_OF_GRID_COUNT_KEY,c))}},openDragToHeaderPanel:function(e){if(!b(s.USER_PREFS.DRAG_TO_HEADER.DONT_SHOW_AGAIN)(p.store.getState())){var t=v(s.USER_PREFS.DRAG_TO_HEADER.DRAG_COUNT)(p.store.getState())||0;t%l==0&&("old"!==m.getValue("se_notificationCenter")?p.store.dispatch(g.editorPlugins.notifications.actions.showUserActionNotification({message:"Notifications_Attached_Header_Text",title:"Attached To Header",type:"info",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){p.panelManager.openHelpCenter(h.NOTIFICATIONS.ATTACH_TO_HEADER)}}})):p.panelManager.openPanel("panels.focusPanels.dragToHeaderPanel",e)),t+=1,p.store.dispatch(g.editorPlugins.userPreferences.actions.setSessionUserPreferences(s.USER_PREFS.DRAG_TO_HEADER.DRAG_COUNT,t))}},shouldNotificationBeShown:function(e){var t=p.store.getState().notifications,o=u.findKey(t,["message",e]);return!b(s.USER_PREFS.DRAG_TO_HEADER.DONT_SHOW_AGAIN)(p.store.getState())&&!o},openAttachToSOSPPanel:function(){if(!b(s.USER_PREFS.SOSP.PANELS.ATTACH_DO_NOT_SHOW_AGAIN)(p.store.getState())){var e=v(s.USER_PREFS.SOSP.PANELS.ATTACH_COUNT)(p.store.getState())||0;e%c==0&&("old"===m.getValue("se_notificationCenter")?p.panelManager.openPanel("panels.focusPanels.attachToSOSPPanel"):p.store.dispatch(g.editorPlugins.notifications.actions.showUserActionNotification({message:"Notifications_Attached_SOSP_Text",title:"Attached To SOSP",type:"info",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){p.panelManager.openHelpCenter(h.NOTIFICATIONS.ATTACH_TO_SOSP)}}}))),e+=1,p.store.dispatch(g.editorPlugins.userPreferences.actions.setSessionUserPreferences(s.USER_PREFS.SOSP.PANELS.ATTACH_COUNT,e))}},openDetachedFromSOSPPanel:function(){if(!b(s.USER_PREFS.SOSP.PANELS.DETACH_DO_NOT_SHOW_AGAIN)(p.store.getState())){var e=v(s.USER_PREFS.SOSP.PANELS.DETACH_COUNT)(p.store.getState())||0;e%y==0&&("old"===m.getValue("se_notificationCenter")?p.panelManager.openPanel("panels.focusPanels.detachedFromSOSPPanel"):p.store.dispatch(g.editorPlugins.notifications.actions.showUserActionNotification({message:"Notifications_Detached_SOSP_Text",title:"Detached From SOSP",type:"info",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){p.panelManager.openHelpCenter(h.NOTIFICATIONS.DETACH_FROM_SOSP)}}}))),e+=1,p.store.dispatch(g.editorPlugins.userPreferences.actions.setSessionUserPreferences(s.USER_PREFS.SOSP.PANELS.DETACH_COUNT,e))}},openPinModeSizeRestrictionPanel:function(e){b(s.PANELS.PIN_TOO_BIG.PIN_TOO_BIG_DONT_SHOW_AGAIN)(p.store.getState())||("old"===m.getValue("se_notificationCenter")?p.panelManager.openPanel(s.PANELS.PIN_TOO_BIG.PANEL_NAME,e,!0):p.store.dispatch(g.editorPlugins.notifications.actions.showUserActionNotification({message:"Notifications_Pinned_Large_Element_Text",title:"Pinned Large Element",type:"warning",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){p.panelManager.openHelpCenter(h.NOTIFICATIONS.PINNED_TOO_BIG)}}})))},openLinkPanel:function(e,t){p.panelManager.openPanel("panels.toolPanels.linkPanel",a.link.getLinkPanelProps(p,e),!t)},openFirstSaveSitePanel:function(){p.panelManager.openPanel("savePublish.panels.save.saveYourSitePanel",{title:"TOPBAR_SITE_UPGRADE_SAVE_FIRST_MSG_TITLE",messageBody:"TOPBAR_SITE_UPGRADE_SAVE_FIRST_MSG_BODY"},!0)}}}}}),define("rEditor/app/updateOperationsPlugins",["lodash"],function(e){"use strict";function t(){var t=arguments;e.forEach(this.list,function(e){e.apply(null,t)})}return{setHomePagePlugins:{list:[],run:t},updatePagePlugins:{list:[],run:t}}}),define("rEditor/app/componentPlugins/designDataChange/repeaterItemDesignDataChangePlugin",[],function(){"use strict";return function(t,e,o,i){var n=!!o.background;t.components.is.repeaterItem(e)&&!n&&t.components.getSiblings(e).forEach(function(e){t.dsActions.components.design.update(e,o,i)})}}),define("rEditor/app/componentPlugins/selectionChangePlugin/selectionChangePlugin",["lodash"],function(a){"use strict";var r={},s=[];function i(t,o,i){var e=t.components.getType(o),n=r[e];n&&a.invoke(n,i,t),a.forEach(s,function(e){e.predicate(o,t)&&a.invoke(e,i,t)})}return{register:function(e,t,o){a.isString(e)?r[e]={onSelect:t,onDeselect:o}:a.isFunction(e)&&s.push({predicate:e,onSelect:t,onDeselect:o})},unregister:function(e){a.isString(e)?delete r[e]:a.remove(s,e)},execute:function(e,t,o){a.isEmpty(t)||i(e,t,"onDeselect"),a.isEmpty(o)||i(e,o,"onSelect")}}}),define("rEditor/app/componentPlugins/selectionChangePlugin/upgradeToMenuContainerTeaser",["lodash","react","baseUI"],function(e,a,r){"use strict";return{open:function(e){var t=e.components.layout.getRelativeToScreen(e.selection.getSelectedComponents()[0]),o=a.createElement(r.popoverTemplates.quickTip,{symbol:"idea-bulb",text:"Mobile_Menu_Tip_Update_Text",linkActionText:"Mobile_Menu_Tip_Update_Link",linkAction:function(){e.panelManager.openPanel("panels.focusPanels.menuContainerUpgradePanel",{biEventOrigin:"selection"})},closeAction:e.floatingBubble.hide}),i={height:0,width:0,top:t.y+50||0,left:t.x+300||0},n={noArrow:!0,shake:!1,behindPopUps:!0,hideMethod:e.toolsControl.toggleHalfOpacityTools.bind(this,!1),alignment:"bottom"};e.floatingBubble.show(o,i,n,{shouldNotHideOnMouseLeaveTarget:!0,countDisplayTimesOptions:{countBy:"site",maxNum:3,uniqueBubbleId:"quickTipForTinyMenu"},delay:300})},close:function(e){e.floatingBubble.hide()}}}),define("rEditor/app/componentPlugins/selectionChangePlugin/moveToTeaser",["lodash","react","baseUI"],function(e,a,r){"use strict";return{open:function(e){var t=e.components.layout.getRelativeToScreen(e.selection.getSelectedComponents()[0]),o=a.createElement(r.popoverTemplates.quickTip,{symbol:"idea-bulb",text:"Mobile_Menu_Tip_Move_Elements_Text",closeAction:e.floatingBubble.hide}),i={height:0,width:0,top:t.y+50||0,left:t.x+500||0},n={noArrow:!0,shake:!1,behindPopUps:!0,hideMethod:e.toolsControl.toggleHalfOpacityTools.bind(this,!1),alignment:"bottom"};e.floatingBubble.show(o,i,n,{shouldNotHideOnMouseLeaveTarget:!0,countDisplayTimesOptions:{countBy:"site",maxNum:3,uniqueBubbleId:"quickTipForRightClickMoveTo"},delay:300})},close:function(e){e.floatingBubble.hide()}}}),define("rEditor/app/componentsPlugins",["lodash","util","constants","rEditor/rootComps/gfpp/gfppModel","stateManagement","coreBi","rEditor/app/componentPlugins/designDataChange/repeaterItemDesignDataChangePlugin","rEditor/app/componentPlugins/selectionChangePlugin/selectionChangePlugin","rEditor/app/componentPlugins/selectionChangePlugin/upgradeToMenuContainerTeaser","rEditor/app/componentPlugins/selectionChangePlugin/moveToTeaser"],function(f,a,s,l,o,i,n,c,p,h){"use strict";var y=[s.ACTIONS.SCREEN_IN,s.ACTIONS.EXIT,s.ACTIONS.MODE_IN,s.ACTIONS.MODE_EXIT,s.ACTIONS.MODE_CHANGE];function b(e,t){return!!t.isMobileEditor()&&(!(!t.mobile.menuContainer.isExist()||!e||"wysiwyg.viewer.components.MenuToggle"===t.components.getType(e))&&("wysiwyg.viewer.components.MenuContainer"===t.components.getType(e)||t.components.isDescendantOfComp(e,t.siteSegments.getHeader())))}return{register:function(r){var e=r.pluginService;function t(e,t){if(!r.isMobileEditor()){var o=l.getComponentMainActionClick(r,t.comp);f.isFunction(o)&&o(r,t.comp,s.USER_ACTIONS.ORIGIN.DOUBLE_CLICK)}}function d(e,t,o,i){var n,a,r=i.getPage(t),s=f(e).reject(function(e){return f.isEqual(e.root,r)}).map("ref").value();n=o,a=s,f.forEach(a,function(t){f(t).thru(f.bind(n.get,n)).filter(function(e){var t=f.get(e,"behavior.type"),o=f.get(e,"behavior.name");return"widget"===t&&("runCode"===o||"runAppCode"===o)}).forEach(function(e){n.remove(t,e.action,{id:e.behavior.targetId},e.behavior)})})}function u(e,t,o,i){var n,a,r,s=i.modes.getFirstAncestorOrSelfWithModeDefinitions(t),l=f(e).reject(function(e){return f.isEqual(e.ancestor,s)}).map("ref").value();n=o,a=i,r=l,f.forEach(r,function(t){f(t).thru(f.bind(n.get,n)).filter(function(e){return f.includes(y,e.action)}).forEach(function(e){a.behaviors.remove(t,e)})})}function g(e,t){return f(t).thru(function(){return e.getChildren(t.ref,!0).concat(t.ref)}).map(function(e){return{ref:e,root:t.root}}).value()}function m(e,t){return f(t).thru(function(){return e.getChildren(t.ref,!0).concat(t.ref)}).map(function(e){return{ref:e,ancestor:t.ancestor}}).value()}e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,"wysiwyg.viewer.components.WRichText",function(){r.isMobileEditor()?r.openComponentPanel(s.componentPanels.settings):(r.bi.event(i.events.textControls.Text_Panel_opened,{origin:s.USER_ACTIONS.ORIGIN.DOUBLE_CLICK}),r.text.startEditing())}),e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,"wysiwyg.viewer.components.Repeater",f.noop),e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,"wysiwyg.viewer.components.SiteButton",t),e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,"wysiwyg.viewer.components.inputs.DatePicker",t),e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,"wysiwyg.viewer.components.inputs.FileUploader",t),e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,s.MULTISELECT.TYPE,f.noop),e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,"wysiwyg.viewer.components.Group",f.noop),e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,"wysiwyg.viewer.components.inputs.TextInput",t),e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,"mobile.core.components.Page",function(e,t){var o=r.siteSegments.getPagesContainerAbsLayout(),i=t.evt.pageX<o.x||t.evt.pageX>o.x+o.width,n=t.comp[0];if(r.dsRead.pages.popupPages.isPopup(n.id)){var a=l.getComponentMainActionClick(r,t.comp);f.isFunction(a)&&a(r,t.comp,s.USER_ACTIONS.ORIGIN.DOUBLE_CLICK)}else i?r.panelManager.openPanel("rEditor.panels.backgroundPanel"):r.openComponentPanel(s.componentPanels.design)}),r.registerCompNamePlugin("wysiwyg.viewer.components.HoverBox",function(e){for(var t=r.components.modes.getTypes(),o=f.filter(r.components.modes.getModes(e),["type",t.HOVER]),i=r.components.modes.getComponentActiveModeIds(e),n=0;n<o.length;n++)if(i[o[n].modeId])return a.translate("component_label_hover_box_onhover");return a.translate("component_label_hover_box")}),r.registerCompNamePlugin("wysiwyg.viewer.components.RefComponent",function(e){var t=r.components.data.get(e),o=f.get(t,"appDefinitionId"),i=o&&r.dsRead.platform.getAppDataByAppDefId(o);return f.get(i,"appDefinitionName")||a.translate("component_label_RefComponent")}),r.registerCompNamePlugin("wysiwyg.viewer.components.ClipArt",function(){return a.translate("component_label_clipart")}),r.registerCompNamePlugin("wysiwyg.viewer.components.Column",function(e){var t=f(e).thru(r.components.getType).thru(function(e){return e.split(".")}).last(),o=f(e).thru(r.components.getContainer).thru(r.components.getChildren).findIndex(e)+1;return a.translate("component_label_"+t)+" "+o}),r.registerCompNamePlugin("mobile.core.components.Page",function(e){return r.dsRead.pages.popupPages.isPopup(e.id)?a.translate("component_label_Overlay"):a.translate("component_label_Page")}),r.registerCompNamePlugin("wysiwyg.viewer.components.SiteRegionContainer",function(){return a.translate("component_label_members_bar")}),r.registerRemovePlugin("wysiwyg.viewer.components.Column",function(e,t,o){return r.columns.removeColumn(e,t,o)}),r.registerHidePlugin("wysiwyg.viewer.components.QuickActionBar",function(e){r.mobile.mobileOnlyComponents.removeQuickActionBar(e)}),r.registerHidePlugin("wysiwyg.viewer.components.BackToTopButton",r.mobile.mobileOnlyComponents.removeBackToTopButton),r.registerHidePlugin("wysiwyg.viewer.components.MenuToggle",function(e){r.store.dispatch(o.inlinePopup.actions.close(a.inlinePopupUtils.getToggleTarget(r,e))),r.dsActions.mobile.hiddenComponents.hide(e)}),r.registerDuplicatePlugin("wysiwyg.viewer.components.Column",function(e){var t=r.components.getContainer(e);if(!r.components.is.duplicatable(e,t))return[];var o=r.columns.duplicateColumn(f.head(e));return r.dsActions.waitForChangesApplied(function(){r.selection.selectComponentByCompRef(o),r.openFirstTimePanel(o)}),o}),e.registerPlugin("setContainer","*",function(e,t,o,i,n){var a,r,s,l,c=(a=i,r=t,f.flatMap(r,f.partial(g,a))),p=(s=i,l=o,f.flatMap(l,f.partial(m,s)));d(c,e,n,i),u(p,e,n,i)}),e.registerPlugin("designDataChange","*",n),e.registerPlugin(e.pluginConstants.DOUBLE_CLICK,"wysiwyg.viewer.components.WPhoto",function(){r.imageCrop.toggleCropMode(!0)}),c.register(b,h.open,h.close),c.register("wysiwyg.viewer.components.mobile.TinyMenu",p.open,p.close)}}}),define("rEditor/app/APISectionsPlugins/historyPlugins",["constants"],function(e){"use strict";return{register:function(o){o.pluginService.registerPlugin(e.HISTORY.REDO,e.DS_ACTIONS.ADD_PAGE,function(e,t){e.nextPage&&e.nextPage!==o.dsRead.pages.getFocusedPageId()?o.pages.navigateTo(e.nextPage,t):t()})}}}),define("rEditor/app/updateOperationsPlugins/siteSeoUpdateOperationPlugin",["rEditor/app/updateOperationsPlugins"],function(e){"use strict";function o(e,t){t=t&&t.replace(/^#/,"")||e.homePage.get();var o=e.dsRead.pages.data.get(t);return{name:o.pageTitleSEO,description:o.descriptionSEO,keywords:o.metaKeywordsSEO}}function i(e,t){e.site.setSEOSiteName(t.name),e.site.setSEOSiteDescription(t.description),e.site.setSEOSiteKeywords(t.keywords)}return{register:function(){e.setHomePagePlugins.list.push(function(e,t){i(e,o(e,t))}),e.updatePagePlugins.list.push(function(e,t){t===e.homePage.get()&&i(e,o(e,t))})}}}),define("rEditor/app/pluginsRegistrar",["rEditor/app/componentsPlugins","rEditor/app/APISectionsPlugins/historyPlugins","rEditor/app/updateOperationsPlugins/siteSeoUpdateOperationPlugin"],function(t,o,i){"use strict";return{register:function(e){t.register(e),o.register(e),i.register()}}}),define("rEditor/app/APISections/concurrentUsersWrapper",["lodash","coreUtilsLib","util","stateManagement"],function(y,b,v,S){"use strict";return{create:function(r){var a="panels.messagePanels.concurrentUserPanel",s="panels.messagePanels.autopilotUpdatePanel",l="auto_update_service@wix.com",e=window.location.protocol+"//editor."+v.serviceTopology.baseDomain+"/concurrent-editing-session-watcher/watcher/report",c=y.template(e+"?msid=<%= msid %>&esi=<%= esi %>"),n=6e4,p=null,d=null,t=!1,u=null,g=!0;function m(e){var t,o,i;t=S.editorPlugins.savePublish.selectors,y.defaultTo(t.getOverridingShouldCheckForConcurrentUsers(r.store.getState()),!0)&&(o=r.dsRead.generalInfo.getUserInfo(),i=v.cookie.getCookie("wixClient"),o&&o.name&&y.includes(i,o.name)?d=r.dsRead.generalInfo.isFirstSave()?window.setTimeout(function(){m(e)},n):window.setTimeout(function(){!function(e){if(e){var t=r.dsRead.generalInfo.getMetaSiteId(),o=v.editorModel.editorSessionId;i=e,n=c({msid:t,esi:o}),a=null,b.requestsUtil.fetchJson(n).then(function(e){e&&(e.success||-15!==e.errorCode&&-12!==e.errorCode&&-16!==e.errorCode||(g=!1,h()),a=e.otherUsersOnSite||null),i(a)}).catch(function(){return i(a)})}var i,n,a}(y.partial(f,e))},e?0:n):h())}function f(e,t){if(e&&null===u&&(u=y.isEmpty(t)),!y.isEmpty(t)&&!function(e,t){if(e===t)return!0;if(e&&!t||!e&&t||y.size(e)<y.size(t))return!1;var o={},i=e.length;return y.forEach(e,function(e){o[e]=e}),y.forEach(t,function(e){o[e]=e}),i===y.size(o)}(p,t)){var o=function(e,t){var o={};y.forEach(e,function(e){o[e]=o});var i=null;return y.forEach(t,function(e){if(!o[e])return i=e,!1}),i}(p,t);if(n=p=t,y.find(n,function(e){return e===l}))u||r.panelManager.openPanel(s);else{var i={isFirstUser:u,concurrentUsers:t,concurrentUserToDisplay:o};r.panelManager.openPanel(a,i)}}var n;g&&m(!1)}function h(){d&&(window.clearTimeout(d),d=null),p=null,t=!1}return{checkForConcurrentUsers:function(){g=!0,t||m(t=!0)},stopCheckForConcurrentUsers:h}}}}),define("rEditor/app/APISections/themeWrapper",["lodash"],function(n){"use strict";return{create:function(i){return{colors:{get:function(e){return n.includes(e,"color")?i.dsRead.theme.colors.get(e):e}},styles:{getExcludedList:function(){return i.theme.styles.excludedList||[]},setExcluded:function(e){var t=i.theme.styles;t.excludedList||(t.excludedList=[]),t.excludedList.push(e)},update:function(t,o,e){i.updateHooks&&n.forEach(i.updateHooks,function(e){e(t,o)}),i.dsActions.theme.styles.update(t,o),e||i.history.debouncedAdd("Update component style")},getAllIds:function(){var e=i.dsRead.theme.styles;return n.difference(e.getAllIds(),i.theme.styles.getExcludedList())},registerHook:function(e){i.updateHooks=i.updateHooks||[],i.updateHooks.push(e)}}}}}}),define("rEditor/app/APISections/historyWrapper",["lodash","constants","stateManagement","experiment","util"],function(c,p,d,u,e){"use strict";var g=d.editorPlugins.userPreferences.selectors.getSessionUserPreferences,m=e.serviceTopology.dashboardUrl.replace(/create\//,"")+"/";return{create:function(r){var t=["panels.toolPanels.colorPicker.colorPickerPanel","rEditor.panels.backgroundApplyPanel","compPanels.dynamicPanels.pinnedDockPanel","rEditor.panels.slideShowBgApplyPanel","rEditor.panels.stateBoxBgApplyPanel"],n=function(){return d.inlinePopup.selectors.getOpenedInlinePopup(r.store.getState())};function a(e,o){c.assign(o,{isSameEditorMode:o.isMobileEditor===r.isMobileEditor(),selectedComps:r.selection.getSelectedComponents()}),c.forEach(t,r.panelManager.closePanelByName),r.setEditorMode(o.isMobileEditor,!0),e.call(r.dsActions.history),r.dsActions.waitForChangesApplied(function(){var e=n(),t=o.openedInlinePopup;e&&!t?r.store.dispatch(d.inlinePopup.actions.close(e,!0)).then(function(){o.selectedComps=[],r.selection.deselectComponents()}):t&&!e&&r.store.dispatch(d.inlinePopup.actions.open(t,!0)).then(function(){o.selectedComps=[t],i(o)}),o.postAction?o.postAction(o,c.partial(i,o)):i(o)})}function i(e){var t=c.filter(e.selectedComps,r.components.is.exist.bind(r));if(!c.isEmpty(t)){var o=[r.dsRead.pages.getFocusedPageId()];r.dsRead.pages.popupPages.isPopupOpened()||o.push(r.pages.getMasterPageId());var i=c.get(r.components.getPage(t),"id");e.isSameEditorMode&&c.includes(o,i)&&r.selection.selectComponentByCompRef(t)}}function o(e,t){var o=r.pluginService.getPlugin(t,e.actionType);if(t===p.HISTORY.REDO)switch(e.actionType){case p.DS_ACTIONS.ADD_PAGE:e.postAction=o}return e}function s(e,t,o){var i=t();(i=o(i)||i).currentPage===r.dsRead.pages.getFocusedPageId()?a(e,i):r.pages.isPageExist(i.currentPage)?r.pages.navigateTo(i.currentPage,c.partial(a,e,i)):(a(e,i),r.dsActions.waitForChangesApplied(function(){r.pages.navigateTo(i.currentPage)})),l()}function l(){r.store.getState().savingStatus===p.PROGRESS_STATUS.IDLE_SAVED&&r.updateState({savingStatus:p.PROGRESS_STATUS.IDLE}),r.store.dispatch(d.editorPlugins.leavePopup.actions.setLeavePopup(!0))}return{add:function(e,t,o){r.store.dispatch(d.editorPlugins.rulers.actions.resetHistory());var i=r.isMobileEditor();t=c.defaults(t||{},{label:e,currentPage:r.dsRead.pages.getFocusedPageId(),openedInlinePopup:n(),isMobileEditor:i}),r.dsActions.history.add(e,t,o),l()},debouncedAdd:function(e){r.history._debouncedAdd||(r.history._debouncedAdd=c.debounce(r.history.add,500)),r.history._debouncedAdd(e)},undo:function(){d.editorPlugins.rulers.selectors.canUndo(r.store.getState())?r.store.dispatch(d.editorPlugins.rulers.actions.undo()):r.dsActions.waitForChangesApplied(function(){var e=r.dsActions.history;e.canUndo()&&(r.store.dispatch(d.editorPlugins.rulers.actions.resetHistory()),s(e.undo.bind(e),e.getUndoLastSnapshotParams.bind(e),c.noop),function(){if("old"!==u.getValue("se_notificationCenter")){r.store.dispatch(d.editorPlugins.userPreferences.actions.setSiteUserPreferences(p.USER_PREFS.UNDO.UNDO_PREVIOUSLY_USED,!0));var e=g(p.USER_PREFS.UNDO.UNDO_COUNT)(r.store.getState())||1;if(i=e,n=d.editorPlugins.userPreferences.selectors.getSiteUserPreferences("topBarSiteHistoryUsed")(r.store.getState()),a=d.editorPlugins.userPreferences.selectors.getSiteUserPreferences("siteHistoryNotificationAppeared")(r.store.getState()),!c.invoke(r,"dsRead.generalInfo.isFirstSave")&&!a&&!n&&i>=p.USER_PREFS.UNDO.UNDO_THRESHOLD){var t=r.documentServices.generalInfo.getMetaSiteId(),o=m+"history/"+t+"/?referralInfo=EDITOR";r.store.dispatch(d.editorPlugins.notifications.actions.showUserActionNotification({message:"Notifications_Site_History_Text",title:"Notifications_Site_History_Text",type:"info",link:{caption:"Notifications_Site_History_Link",onNotificationLinkClick:function(){window.open(o)}}})),r.store.dispatch(d.editorPlugins.userPreferences.actions.setSiteUserPreferences("siteHistoryNotificationAppeared",!0))}else e+=1,r.store.dispatch(d.editorPlugins.userPreferences.actions.setSessionUserPreferences(p.USER_PREFS.UNDO.UNDO_COUNT,e))}var i,n,a}())})},redo:function(){d.editorPlugins.rulers.selectors.canRedo(r.store.getState())?r.store.dispatch(d.editorPlugins.rulers.actions.redo()):r.dsActions.waitForChangesApplied(function(){var e=r.dsActions.history;e.canRedo()&&(s(e.redo.bind(e),e.getRedoLastSnapshotParams.bind(e),c.partialRight(o,p.HISTORY.REDO)),"old"!==u.getValue("se_notificationCenter")&&(r.store.dispatch(d.editorPlugins.userPreferences.actions.setSessionUserPreferences(p.USER_PREFS.REDO.REDO_PREVIOUSLY_USED,!0)),r.store.dispatch(d.editorPlugins.userPreferences.actions.setSessionUserPreferences(p.USER_PREFS.UNDO.UNDO_COUNT,0))))})},clear:function(){r.dsActions.history.clear()}}}}}),define("rEditor/app/APISections/maskCrop",["lodash","util","coreUtilsLib","coreBi","stateManagement"],function(V,W,f,y,b){"use strict";var e="909695c1e003409ba70b5561666c7c4d.svg";function v(e,t){if("innerHTML"in e)e.innerHTML=t;else{var o=window.document.createRange().createContextualFragment(t);e.appendChild(o)}return e.firstElementChild}return{create:function(B){var h=function(){return B.components.asArray(b.editorPlugins.selection.selectors.getSelectedCompsRefs(B.store.getState()))},F=W.math.rect,U=W.imageCrop,G=W.imageTransform;function H(e,t,o){var i,n,a,r=(i=e,n=t,a=F.getMiddlePoint(i),F.getPointRatioFromRect(a,n));return{x:o.width*r.x,y:o.height*r.y}}function n(e,t){var o=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),i=B.store.getState(),n=h(i)[0],a=t.width,r=t.height,s=t.x,l=t.y;o.setAttribute("viewBox","0 0 "+a+" "+r),o.setAttribute("width",a),o.setAttribute("height",r),o.style.visibility="hidden",o.style.position="absolute";var c=v(o,e),p="mask-svg_"+n.id;c.setAttribute("id",p),window.document.body.appendChild(o);var d=c.getBBox();c.setAttribute("preserveAspectRatio","xMidYMid meet"),c.setAttribute("viewBox",d.x+" "+d.y+" "+d.width+" "+d.height);var u="mask_"+n.id,g=window.document.createElementNS("http://www.w3.org/2000/svg","defs");v(g,W.imageEffects.getMask(u,p,"",{width:a,height:r,x:s,y:l},!0)),o.appendChild(g);var m=o.querySelector("mask").firstElementChild;m.setAttribute("width",a),m.setAttribute("height",r),m.setAttribute("x",s),m.setAttribute("y",l),c.setAttribute("preserveAspectRatio","none"),o.parentElement.removeChild(o),t.svgStr=function(e){if("outerHTML"in e)return e.outerHTML;var t=window.document.createElement("div");return t.appendChild(e),t.innerHTML}(c),t.svgDomId=p,t.svgAspect=d.width/d.height}function A(){return{id:e,svgAspect:1}}function O(e){var t=function(e){var t=B.ui.stage.getEditingAreaLayout();if(e){var o=B.ui.stage.getMobileFrameLayout();return V({left:o.left-t.left,top:o.top-t.top}).defaults(o).thru(F.getRectByBoundingRect).value()}return{x:0,y:0,width:B.site.getSiteWidth(),height:B.site.getHeight()}}(B.isMobileEditor());return{cropArea:U.ensure.areaWithinViewport(t,e),cropOriginArea:e.cropOriginArea}}function l(e){var t,o,i,n,a,r,s,l,c,p,d,u,g,m,f,h,y=B.components.data.get(e),b=B.components.properties.get(e),v=b.displayMode,S=B.components.layout.get(e).rotationInDegrees,E=v===G.fittingTypes.SCALE_TO_FILL,P=V.pick(B.components.layout.getRelativeToScreen(e),["height","width","x","y"]),C={},T=b.overrideCrop||y.crop;if(R(v)){var _=W.layoutUtils.getImageOrCropAspectRatio(y);P=W.layoutUtils.getLayoutWithAspectRatio(P,_,null,!0)}if(T)C=E?(p=P,d=y,u=T,g=U.reverseAutoCrop(p,u),m=U.reverseManualCrop(g,u,d),f=U.reverseAutoCrop(m,d),h=U.manualCrop(f,u,d),{cropOriginArea:f,cropArea:h=U.autoCrop(h,p)}):(r=P,s=y,l=T,{cropOriginArea:c=U.reverseManualCrop(r,l,s),cropArea:U.manualCrop(c,l,s)}),T.svgStr?(C.cropArea.svgStr=T.svgStr,C.cropArea.svgId=T.svgId):T.svgId&&(C.cropArea.svgId=T.svgId),T.flip&&(C.cropArea.flip=T.flip);else{C=E?(o=P,i=y,n=U.reverseAutoCrop(o,i),a=V.assign({},n,{x:0,y:0}),{cropOriginArea:n,cropArea:a=U.autoCrop(a,V.pick(o,["height","width"]))}):{cropOriginArea:t=P,cropArea:V(t).pick(["height","width"]).assign({x:0,y:0}).value()};var I=A();C.cropArea.svgId=I.id,C.cropArea.svgAspect=I.svgAspect,C.cropArea.svgStr=void 0,C.cropArea.svgDomId=void 0}var M=function(e,t){var o=e.cropArea,i=e.cropOriginArea,n=V.clone(o);n.x+=i.x,n.y+=i.y;var a=W.math.getPointAsIfRectWasNotRotated(n,F.getMiddlePoint(i),-t);return{x:a.x-i.width/2,y:a.y-i.height/2}}(C,S);return V.assign(C.cropOriginArea,M),(C=O(C)).originalCropState=V.assign(V.pick(C.cropArea,["svgId","flip"]),w(C.cropArea)),C}function R(e){var t=W.imageTransform.fittingTypes,o=t.SCALE_TO_FILL,i=t.STRETCH;return!V.includes([o,i],e)}function a(e,o){var t=B.store.getState(),i=f.objectUtils.cloneDeep(t.imageCrop),n=h(t),a=(0,b.editorPlugins.userPreferences.selectors.getSessionUserPreferences)("hideTools")(t);if(!V.isEmpty(n)&&i.isOn!==e)if(i.isOn=void 0===e?!i.isOn:e,a)s();else{B.toolsControl.toggleHideTools(i.isOn);var r=B.registerToViewerChange(function(){s(),r()})}function s(){var e,t;i.isOn?function(e,t,o){W.fedopsLogger.interactionStarted(W.fedopsLogger.INTERACTIONS.CROP_MODE),B.autosaveManager.init({enabled:!1}),W.keyboardShortcuts.setContext(W.keyboardShortcuts.CONTEXTS.IMAGE_CROP);var i=B.components.properties.get(e).displayMode;R(i)&&(t.originalDisplayMode=i,B.components.properties.update(e,{displayMode:W.imageTransform.fittingTypes.SCALE_TO_FILL})),V.assign(t,l(e)),B.bi.event(y.events.imageCrop.Open_crop_mode,{fixed_layout:!1}),d(t,o)}(n,i,o):(e=i,t=o,W.fedopsLogger.interactionEnded(W.fedopsLogger.INTERACTIONS.CROP_MODE),B.autosaveManager.init({enabled:!0},!0),W.keyboardShortcuts.setContext(W.keyboardShortcuts.CONTEXTS.EDITOR),V.assign(e,{cropArea:null,cropOriginArea:null,compOriginalValues:null,originalDisplayMode:null}),B.updateState({imageCrop:e},t))}}function r(){return V.clone(B.store.getState().imageCrop.cropArea)}function s(){return V.clone(B.store.getState().imageCrop.cropOriginArea)}function c(){return V.clone(B.store.getState().imageCrop.compOriginalValues)}function w(e){return V(e).pick(["x","y","width","height"]).mapValues(Math.round).value()}function p(e,o){var i=V.assign({},e,{cropArea:V.assign({},e.cropArea,w(e.cropArea)),cropOriginArea:w(e.cropOriginArea)});if(o=o||V.noop,i.cropArea.svgId&&!i.cropArea.svgStr){var t=i.cropArea.svgId;B.documentServices.media.vectorImage.fetchSvg(t,function(e){var t=V.cloneDeep(i);n(e,t.cropArea,t.cropOriginArea),B.updateState({imageCrop:t},o)})}else B.updateState({imageCrop:i},o)}function d(e,t){p(V.assign({},B.store.getState().imageCrop,e),t)}function u(e){var t=B.components.data.get(e),o=B.components.layout.get(e).fixedPosition,i=B.imageCrop.getCropArea(),n=B.imageCrop.getCropOriginArea(),a=B.imageCrop.getCropAreaFinalPosition(o),r=n.width/t.width,s=n.height/t.height,l=V.mapValues({x:i.x/r,y:i.y/s,height:i.height/s,width:i.width/r},Math.round);return i.svgId&&(l.svgId=i.svgId,i.flip&&(l.flip=i.flip)),F.areRectsTheSameSize(t,l)&&0===l.x&&0===l.y&&(!l.svgId||l.svgId===A().id)&&!B.isMobileEditor()&&(l=null),{crop:l,cropAreaLayout:a}}function g(e,t,o){var i=t.crop,n=t.cropAreaLayout;B.isMobileEditor()?B.components.properties.update(e,{overrideCrop:i},o):B.components.data.update(e,{crop:i},o),B.components.layout.update(e,n,o)}function m(e){!function(e){var t=B.store.getState().imageCrop;if(t.originalDisplayMode){var o=t.originalDisplayMode;B.components.properties.update(e,{displayMode:o})}}(e);var t=c();V.isEmpty(t)?(B.documentServices.renderPlugins.showComp(e),a(!1)):(g(e,t),B.documentServices.waitForChangesApplied(function(){window.setTimeout(function(){B.documentServices.renderPlugins.showComp(e),a(!1)},150)}))}return{DEFAULT_MASK_ID:e,isCropAllowed:function(e){var t="("+["png","jpeg","jpg","wix_ico_mp","wix_mp"].join("|")+")$";return e.match(t)},isCropMode:function(){return B.store.getState().imageCrop.isOn},toggleCropMode:a,getCropArea:r,getCropOriginArea:s,getCropAreaFinalPosition:function(e,t){var o=B.store.getState(),i=h(o),n=o.imageCrop,a=n.cropOriginArea,r=n.cropArea,s=B.components.layout.get(i).rotationInDegrees,l=e?{x:0,y:0}:function(e){var t=B.components.getContainer(e),o=B.components.layout.getRelativeToScreen(t);if(B.isMobileEditor())return o;var i=B.components.get.byId("PAGES_CONTAINER"),n=B.components.layout.getRelativeToScreen(i);if(B.columns.isColumn(t)){var a=B.components.layout.getCompMargin(t);o.x+=a.left}else(B.components.is.fullWidth(t)||B.components.isShowOnAllPages(e))&&(o.x+=n.x);return o}(i);if(!n)return null;var c,p,d,u,g,m,f=t?r:(c=r,p=a,d=s,u=F.getMiddlePoint(c),g=V.assign({},p,{x:0,y:0}),{x:(m=W.math.getPointAsIfRectWasNotRotated(g,u,-d)).x-c.width/2,y:m.y-c.height/2});return V(r).pick(["height","width"]).assign({x:f.x+a.x-l.x,y:f.y+a.y-l.y}).value()},setCropOriginArea:function(e,t){p(V.assign({},B.store.getState().imageCrop,{cropOriginArea:e}),t)},setCropArea:function(e,t){var o=B.store.getState().imageCrop;p(V.assign({},o,{cropArea:V.assign({},o.cropArea,e)}),t)},setCropData:d,toggleFlip:function(e){var t=B.store.getState().imageCrop,o=void 0;switch(t.cropArea&&t.cropArea.flip||""){case"":o=e;break;case e:o="";break;case"xy":o="x"===e?"y":"x";break;default:o="xy"}var i=V.assign({},t.cropArea,{flip:o});p(V.assign({},t,{cropArea:i}))},updateCrop:function(e,t){var o,i,n=(o=B.store.getState().imageCrop,i=V.pick(o.cropArea,["x","y","width","height","svgId","flip"]),!V.isEqual(o.originalCropState,i));n?(g(e,u(e)),B.documentServices.waitForChangesApplied(function(){B.documentServices.renderPlugins.showComp(e),a(!1),B.bi.event(y.events.imageCrop.apply_crop,{is_changed:n,origin:t})})):m(e)},previewCrop:function(e){if(V.isEmpty(c())){var t=B.isMobileEditor()?B.components.properties.get(e).overrideCrop:B.components.data.get(e).crop,o=B.components.layout.get(e);i={crop:t,cropAreaLayout:o},a=B.store.getState().imageCrop,p(V.assign({},a,{compOriginalValues:i}),n)}var i,n,a;g(e,u(e),!0)},cancelCrop:m,setResizing:function(e,t){var o=B.store.getState().imageCrop;p(V.assign({},o,{isResizing:e}),t)},getNewCropStateByPercentageFromOriginalImage:function(e,t){var o,i,n,a,r=B.components.data.get(e),s=B.components.layout.get(e),l=s.rotationInDegrees,c=B.components.properties.get(e).displayMode,p=B.imageCrop.getCropOriginArea(),d=B.imageCrop.getCropArea(),u=F.getAspectRatio(s),g=V.assign({},r,{height:r.width*u}),m=c===G.fittingTypes.STRETCH?g:r,f=F.getRectMinDimensionsByContainedInnerRect(m,d),h=(o=t,i=p,n=r,a=100*Math.pow(o/100,2)/F.getAreaRatioPercentage(i,n),F.getResizedByRatio(i,a));h=U.ensure.scaleWithinDimensions(h,d,f);var y,b,v,S,E,P,C,T,_,I,M,A,O,R,w,D,k,x=(y=p,b=h,v=d,S=V.clone(b),E=V.clone(v),P=F.getMiddlePoint(v),C=H(v,y,S),T=C.x-P.x,_=C.y-P.y,E.x+=T,E.y+=_,S.x-=T,S.y-=_,{originArea:S,area:E}),N=U.ensure.areaIsFullyContained(x.originArea,x.area),L=(I=p,M=N.originArea,A=l,O=F.getMiddlePoint(I),R=F.getMiddlePoint(M),w={x:R.x-O.x,y:R.y-O.y},D=W.math.degToRad(A),k=W.math.rotateVectorAround(w,D),{x:W.math.roundToNearestHalf(k.x-w.x),y:W.math.roundToNearestHalf(k.y-w.y)});return N.originArea.x+=L.x,N.originArea.y+=L.y,N},getCropAreaWithShapeAspectRatio:function(){var e=r(),t=s(),o=Math.min(e.height*e.svgAspect,t.width),i=o/e.svgAspect,n=Math.max(Math.min(e.x+(e.width-o)/2,t.width-o),0);return{cropArea:V.assign({},e,{width:o,height:i,x:n})}}}}}}),define("rEditor/app/APISections/siteWrapper",["core","util","stateManagement","lodash","coreUtilsLib"],function(s,l,e,c,p){"use strict";var d=e.editorPlugins.domain.selectors;return{create:function(i){var o=i.store,t="https://editor.wix.com/_api/site-revisions-server/revisions/";function n(i,e){var n=l.url;return e.forEach(function(e){var t,o=n.getParameterByName(e);o&&("experiments"===e||"experimentsoff"===e)&&c.includes(o,":")&&(o=(t=c(o).split(";").filter(function(e){return c.startsWith(e,"viewer")}).map(function(e){return e.split("viewer:")[1]}).join(","))?"viewer:"+t:""),i=o?n.setUrlParam(i,e,o):i}),i}function a(){return!!i.dsRead&&(e.userPreferences.selectors.getSiteUserPreferences("hasSiteBeenADI")(o.getState())||i.dsRead.generalInfo.isSiteFromOnBoarding()||!c.isUndefined(l.editorModel.onboardingEditorUrl))}function r(e){o.getState().canRestoreToAdi!==e&&i.updateState({canRestoreToAdi:e})}return{getCurrentSiteDomain:function(){var e=window.location.hostname.match(/editor\.(.*)/);return e?"www."+e[1]:"www.wix.com"},setSEOSiteName:function(e){return i.dsActions.seo.title.set(e)},setSEOSiteDescription:function(e){return i.dsActions.seo.description.set(e)},getSEOSiteKeywords:function(){return i.dsRead.seo.keywords.get()},setSEOSiteKeywords:function(e){return i.dsActions.seo.keywords.set(e)},getMetaSiteId:function(){return i.dsRead.generalInfo.getMetaSiteId()},isPremium:function(){return 0<c.chain(i.dsRead).invoke("premiumFeatures.get").get("length",0).value()},getXPos:function(){return i.components.layout.getRelativeToScreen(i.dsRead.siteSegments.getPagesContainer()).x},getSiteDomainInfo:function(e,t){var o=i.dsRead.generalInfo.getMetaSiteId();s.premiumServicesAPI.getSiteDomainInfo(o,e,t)},getSitePremiumPackage:function(){return o.getState().site.premiumPackage||-1},getSitePublicUrl:function(){if(!i.dsRead)return null;var e=o.getState(),t=i.dsRead.generalInfo.getPublicUrl()||d.getFreeDomainPrefix(e,i.dsRead)+i.siteName.get();return n(t=t.replace(/^https?/i,d.getSiteProtocol(e,i.dsRead)),["ReactSource","experiments","experimentsoff","viewerexp"])},getSiteWidth:function(){return window.document.getElementById("preview").getBoundingClientRect().width},hasSiteBeenADI:a,init:function(){if(a()){var e=t+"can-restore-to-adi/"+i.dsRead.generalInfo.getSiteId()+"/";p.requestsUtil.fetchJson(e).then(function(e){r(e.canRestoreToAdi)})}else r(!1)},canRestoreToADI:function(){return o.getState().canRestoreToAdi},restoreToADI:function(){var e=t+"restore-to-latest-adi/"+i.dsRead.generalInfo.getSiteId()+"/";return p.requestsUtil.fetchJson(e,{method:"POST"})}}}}}),define("rEditor/bi/events.json",[],function(){return{QUALAROO_DUMMY_EVENT:{evid:9,fields:{testField:"testValue"}},UPGRADE_EVENT:{evid:519,fields:{origin:"string"}},AUTOSAVE_TEST:{src:42,endpoint:"ugc-viewer",evid:362,fields:{type:"string",uuid:"guid"}},IDE_TOPBAR_RESIZE:{endpoint:"platform",src:79,evid:20,fields:{old_hight:"string",new_hight:"string",site_id:"guid"}},LEFT_TREE_TOGGLE:{endpoint:"platform",src:79,evid:21,fields:{state:"string",site_id:"guid"}},PROPERTIES_PANEL_TOGGLE:{endpoint:"code",src:39,evid:141,fields:{state:"string",site_id:"guid"}},BG_IMAGE_SETTINGS_PANEL_SCROLL_EFFECT:{endpoint:"editor",src:38,evid:685,fields:{scroll_type:"string"}}}}),define("rEditor/bi/bi",["lodash","rEditor/bi/events.json"],function(e,t){"use strict";return{events:t,registerEvents:e.noop}}),define("rEditor/app/APISections/developerMode",["lodash","util","rEditor/bi/bi","constants","experiment","coreBi","stateManagement","platformEvents"],function(P,C,u,T,_,t,I,M){"use strict";return{create:function(g){var a=T.UI.WIX_CODE_TOPBAR_HEIGHT,r=54,s=C.splitterAPI,m=function(e){return I.editorPlugins.userPreferences.selectors.getSiteUserPreferences(e)(g.store.getState())},f=function(e,t){return g.store.dispatch(I.editorPlugins.userPreferences.actions.setSiteUserPreferences(e,t))},e=I.sectionedPanel.actions,h=e.openSection,y=e.closeSection,b=function(){var e=(0,I.editorPlugins.topBar.selectors.getOverriddenMenuItems)(g.store.getState()),t=P.get(e,[T.ROOT_COMPS.TOPBAR.MENU_BAR_ITEMS.TOOLS,T.OVERRIDDEN.TOP_BAR.MENU_ITEMS.TOOLS_PROPERTIES_PANEL.KEY]),o=T.OVERRIDDEN.TOP_BAR.MENU_ITEMS.TOOLS_PROPERTIES_PANEL.SHOULD_OPEN_AS_SECTION,i=P.get(t,o,!1);return _.isOpen("se_propertiesAsSection")||i};function v(){var e=g.getViewTools();return!!e&&!!e.developerModeEnabled}function S(e,t){return{type:e,data:t}}function E(e){g.updateState({devModeContext:e})}function n(e){return g.store.getState()[e]||function(e){switch(e){case"ideSplitter_"+T.DEVELOPER_MODE.CONTEXT_TYPES.PAGE:return s.getInitialState("calc(100% - 234px)","bottom");case"ideSplitter_"+T.DEVELOPER_MODE.CONTEXT_TYPES.FILE:case"ideSplitter_"+T.DEVELOPER_MODE.CONTEXT_TYPES.COLLECTION:return s.getInitialState("0","top");case"consoleSplitter":return s.getInitialState("calc(100% - 234px)","bottom");case"fileTreeSplitter":var t=m(T.USER_PREFS.DEVELOPER_MODE.FILE_PANE_SPLITTER);return P.isNil(t)?s.getInitialState("296px",!1):t}}(e)}function l(e,t){var o=P.drop(arguments,2),i=n(e);return t.apply(null,[i].concat(o))}function c(e,t,o,i){var n=l.apply(null,arguments),a={};return a[e]=n,g.updateState(a,i),a}function p(e,t,o,i){var n=o<=r;return i<=o+a?c(e,s.collapse,"bottom"):n?c(e,s.collapse,"top"):c(e,s.setSplitPosition,t)}function o(){var e=c.apply(null,arguments);f(T.USER_PREFS.DEVELOPER_MODE.FILE_PANE_SPLITTER,e.fileTreeSplitter)}function i(e){var t=n(e);return s.isCollapsed(t,"top")?T.DEVELOPER_MODE.CONTAINER_STATES.MAXIMIZED:s.isCollapsed(t,"bottom")?T.DEVELOPER_MODE.CONTAINER_STATES.MINIMIZED:T.DEVELOPER_MODE.CONTAINER_STATES.CUSTOM}function d(e){var t=P.tail(arguments);return e.apply(null,["ideSplitter_"+g.store.getState().devModeContext.type].concat(t))}return{createContext:S,setContext:E,getContext:function(){if(!g.isPreviewReady())return S(T.DEVELOPER_MODE.CONTEXT_TYPES.UNKNOWN);var e=g.store.getState().devModeContext;if(e.type===T.DEVELOPER_MODE.CONTEXT_TYPES.PAGE){var t=g.dsRead.pages.getFocusedPageId(),o={id:g.dsRead.pages.getFocusedPageId(),displayName:g.pages.getPageTitle(t),isPopup:g.dsRead.pages.popupPages.isPopup(t)};e=S(T.DEVELOPER_MODE.CONTEXT_TYPES.PAGE,o)}return e},isEnabled:v,enableWithMarketingConfig:function(){if(!m(T.USER_PREFS.DEVELOPER_MODE.FIRST_TIME)){var e={developerModeEnabled:!0,developerToolBarEnabled:!b(),showHiddenComponents:!0};f(T.USER_PREFS.DEVELOPER_MODE.FIRST_TIME,!0),f(T.USER_PREFS.VIEW_TOOLS.DEVELOPER_MODE_ENABLED,e.developerModeEnabled),f(T.USER_PREFS.VIEW_TOOLS.DEVELOPER_TOOLBAR_ENABLED,e.developerToolBarEnabled),E(S(T.DEVELOPER_MODE.CONTEXT_TYPES.PAGE)),g.dsActions.documentMode.showHiddenComponents(e.showHiddenComponents),g.dsActions.documentMode.showControllers(!0),o("fileTreeSplitter",s.collapse,"right"),b()&&g.store.dispatch(h(T.DOCKED_PANEL_SECTIONS.PROPERTIES)),g.updateEditorViewTools(e),g.developerMode.ui.idePane.unMinimize(),g.bi.event(t.events.topbar.top_bar_CODE_menu_click,{category:"dev_mode",status:!0,origin:"auto",is_data_on:!1})}},toggle:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.showWelcomePanel,o=void 0===t||t,i=e.notifyApps,n=void 0===i||i;g.wixCode.isProvisioned()||C.fedopsLogger.interactionStarted(C.fedopsLogger.INTERACTIONS.CODE_TOP_BAR_FIRST_INSTALL);var a,r,s,l,c=!v(),p=c&&!b(),d={developerModeEnabled:c,developerToolBarEnabled:p};if(f(T.USER_PREFS.VIEW_TOOLS.DEVELOPER_MODE_ENABLED,c),f(T.USER_PREFS.VIEW_TOOLS.DEVELOPER_TOOLBAR_ENABLED,p),a=T.USER_PREFS.DEVELOPER_MODE.EXPOSED_TO_WIX_CODE,I.editorPlugins.userPreferences.selectors.getGlobalUserPreferences(a)(g.store.getState())||(r=T.USER_PREFS.DEVELOPER_MODE.EXPOSED_TO_WIX_CODE,s=!0,g.store.dispatch(I.editorPlugins.userPreferences.actions.setGlobalUserPreferences(r,s))),c&&g.store.getState().viewTools.toolbarEnabled&&(d.toolbarEnabled=!1),c&&!m(T.USER_PREFS.DEVELOPER_MODE.FIRST_TIME)&&(l=o,g.selection.deselectComponents(),l&&g.panelManager.openPanel("wixCode.panels.developerWelcomePanel",{linkedVideoData:C.translate("corvid_welcome_lb_video_link_turnon_url")}),f(T.USER_PREFS.DEVELOPER_MODE.FIRST_TIME,!0),f(T.USER_PREFS.VIEW_TOOLS.SHOW_HIDDEN_COMPS,!0)),d.showHiddenComponents=m(T.USER_PREFS.VIEW_TOOLS.SHOW_HIDDEN_COMPS),c||(g.selection.deselectComponents(),g.panelManager.closeAllPanelsOfType(T.PANEL_TYPES.FULL_STAGE)),E(S(T.DEVELOPER_MODE.CONTEXT_TYPES.PAGE)),g.dsActions.documentMode.showHiddenComponents(d.showHiddenComponents),g.dsActions.documentMode.showControllers(c),b()&&(c?g.store.dispatch(h(T.DOCKED_PANEL_SECTIONS.PROPERTIES)):g.store.dispatch(y(T.DOCKED_PANEL_SECTIONS.PROPERTIES))),g.updateEditorViewTools(d),n){var u=g.platform.getInstalledEditorApps();P.forEach(u,function(e){return g.dsActions.platform.notifyApplication(e.applicationId,M.factory.developerModeChanged({value:c}))})}},ui:{idePane:{getSplitPosition:P.partial(d,l,s.getSplitPosition),setSplitPosition:function(e,t,o){var i,n;i=t,n=o,g.bi.event(u.events.IDE_TOPBAR_RESIZE,{old_hight:g.developerMode.ui.idePane.getSplitPosition(),new_hight:(100*i/n).toPrecision(4)+"%",site_id:g.dsRead.generalInfo.getSiteId()}),d(p,e,t,o)},maximize:P.partial(d,c,s.collapse,"top"),unMaximize:P.partial(d,c,s.unCollapse,"top"),toggleMaximize:P.partial(d,c,s.toggleCollapse,"top"),minimize:P.partial(d,c,s.collapse,"bottom"),unMinimize:P.partial(d,c,s.unCollapse,"bottom"),toggleMinimize:P.partial(d,c,s.toggleCollapse,"bottom"),revertSize:P.partial(d,c,s.unCollapse),getState:P.partial(d,i)},consolePane:{getSplitPosition:P.partial(l,"consoleSplitter",s.getSplitPosition),setSplitPosition:P.partial(p,"consoleSplitter"),minimize:P.partial(c,"consoleSplitter",s.collapse,"bottom"),unMinimize:P.partial(c,"consoleSplitter",s.unCollapse,"bottom"),minimizedByUser:P.partial(function(){var e="consoleSplitter",t=i(e);return g.store.getState()[e]&&t===T.DEVELOPER_MODE.CONTAINER_STATES.MINIMIZED}),getState:P.partial(i,"consoleSplitter")},treePane:{getSplitPosition:P.partial(l,"fileTreeSplitter",s.getSplitPosition),setSplitPosition:P.partial(o,"fileTreeSplitter",s.setSplitPosition),toggle:function(e){var t;t=g.developerMode.ui.treePane.isOpen?"close":"open",g.bi.event(u.events.LEFT_TREE_TOGGLE,{state:t,site_id:g.dsRead.generalInfo.getSiteId()}),o("fileTreeSplitter",s.toggleCollapse,"left",e)},isOpen:P.negate(P.partial(l,"fileTreeSplitter",s.isCollapsed,"left"))},topbarHeight:a+"px"}}}}}),define("rEditor/app/APISections/selectedComponent",["lodash","stateManagement","experiment","helpIds"],function(s,p,d,u){"use strict";var l=p.editorPlugins.selection.selectors,g=p.editorPlugins.bi.actions.event;return{create:function(c){function t(e){var t,o,i,n,a,r,s=c.components.layout.get(e),l=!s.fixedPosition;return c.components.layout.setFixed(e,l),a=e[0].id,r=s,"old"!==d.getValue("se_notificationCenter")&&!r.fixedPosition&&200<r.height&&("SITE_HEADER"===a||"SITE_FOOTER"===a)&&(t=c,i=u.NOTIFICATIONS.FROZEN_HEADER,n="SITE_HEADER"===o?"Notifications_Frozen_Header_Text":"Notifications_Frozen_Footer_Text",t.store.dispatch(p.editorPlugins.notifications.actions.showUserActionNotification({message:n,title:n,type:"warning",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){t.panelManager.openHelpCenter(i)}}}))),l}return{sendSelectedComponentBI:function(e,t){var o=c.store,i=o.getState(),n=l.getSelectedCompsRefs(i);if(e&&!s.isEmpty(n)){var a=l.getSelectedComponentType(i,c.dsRead),r={component_id:s.head(n).id,component_type:a};t&&s.merge(r,t),o.dispatch(g(e,r))}},copy:function(){return c.copyPaste.copy(c.selection.getSelectedComponents())},duplicate:function(){return c.copyPaste.duplicate(c.selection.getSelectedComponents())},cut:function(){var e=c.selection.getSelectedComponents();return c.selection.isComponentSelected()&&c.components.cut(e),e},remove:function(){if(c.selection.isComponentSelected()){var e=c.selection.getSelectedComponents();return c.components.remove(e)}return Promise.resolve(!1)},toggleFixedPosition:function(){var e=c.selection.getSelectedComponents();return!(!e||!c.components.layout.canBeFixedPosition(e))&&t(e)}}}}}),define("rEditor/app/APISections/savePublishWrapper",["lodash","constants","stateManagement","coreBi","coreUtilsLib","util","experiment"],function(b,v,S,E,n,l,a){"use strict";function P(e){return e()}var c=S.editorPlugins.domain.selectors,p=S.savePublish.actions,d=S.publishingStatus.actions,u=S.savePublish.selectors,C=S.applicationStudio.selectors;return{create:function(g){var m=g.store,e=!1;function t(){return u.getIsPublishInProgress(m.getState())}function o(){return u.getIsSaveInProgress(m.getState())}function i(){return!(t()||o()||u.getIsBuildInProgress(m.getState())||e)}var f=[function(){g.store.dispatch(S.editorPlugins.userPreferences.actions.loadSitePreferences(g.dsRead.generalInfo.getSiteId(),!0)),g.store.dispatch(S.editorPlugins.leftBar.actions.collapseMenu())}],h=v.PROGRESS_STATUS;function y(){return g.pages.data.get("masterPage").autoDomReorder}function r(){m.dispatch(d.setPublishingStatus(h.IN_PROGRESS))}function s(e){m.dispatch(d.setPublishingStatus(h[e])),window.setTimeout(function(){m.dispatch(d.setPublishingStatus(h.IDLE))},v.SAVE_PUBLISH.DURATION_TO_SHOW_RESULT)}return{build:function(i){var e=g.store,n=e.dispatch,a=e.getState;return new Promise(function(e,t){l.fedopsLogger.interactionStarted(l.fedopsLogger.INTERACTIONS.APP_STUDIO_BUILD),n(p.setIsBuildInProgress(!0)),r();var o=C.getAppName(a());g.dsActions.appStudio.build(e,t,i,o)}).then(function(){l.fedopsLogger.interactionEnded(l.fedopsLogger.INTERACTIONS.APP_STUDIO_BUILD),n(p.setIsBuildInProgress(!1)),s("DONE_SUCCESS")}).catch(function(e){throw s("DONE_FAILED"),n(p.setIsBuildInProgress(!1)),e})},save:function(p,d,u){return new Promise(function(e,a){var t=b.now();g.updateState({savingStatus:h.IN_PROGRESS});var o,r=g.dsRead.generalInfo.isFirstSave(),i=(o=p,r?"first":o?"full":"partial"),n=y();b.set(u,"shouldReorderDOM",!!b.isUndefined(n)||n),g.bi.event(E.events.save.saveProcess.SAVE_CLICK,{origin:d});var s={save_type:i};function l(){s.duration=b.now()-t,g.bi.event(E.events.save.saveProcess.SUCCESS_SAVE_PROCESS,s),r&&b.forEach(f,P),g.isSavedInCurrentSession=!0,e(),g.concurrentUsers.checkForConcurrentUsers(),g.updateState({savingStatus:h.DONE_SUCCESS}),m.dispatch(S.editorPlugins.leavePopup.actions.setLeavePopup(!1)),window.setTimeout(function(){var e=g.autosaveManager.shouldShowAutosaveUI()?h.IDLE_SAVED:h.IDLE;g.updateState({savingStatus:e})},v.SAVE_PUBLISH.DURATION_TO_SHOW_RESULT)}function c(e){var t,o,i,n;t=e,o=r,i=p,n={failedServices:b.keys(t).join(","),errorTypes:b.compact(b.map(t,"errorType")).join(","),errorCodes:b.compact(b.map(t,"errorCode")).join(",")},o?g.dsActions.bi.error(E.errors.FIRST_SAVE_ERROR,n):i?g.dsActions.bi.error(E.errors.FULL_SAVE_ERROR,n):g.dsActions.bi.error(E.errors.SAVE_ERROR,n),a(e),g.updateState({savingStatus:h.DONE_FAILED}),m.dispatch(S.editorPlugins.leavePopup.actions.setLeavePopup(!0)),window.setTimeout(function(){g.updateState({savingStatus:h.IDLE})},v.SAVE_PUBLISH.DURATION_TO_SHOW_RESULT)}g.bi.event(E.events.save.saveProcess.START_SAVE_PROCESS,s),b.defer(function(){g.dsActions.save(l,c,p,u)})})},saveAsTemplate:function(e,t){g.dsActions.saveAsTemplate(function(){e&&e()},function(e){t&&t(e),n.log.info("Failed saving as template ",e)})},publish:function(){return new Promise(function(t,o){r();var i={publish_type:g.dsRead.generalInfo.isSitePublished()?"publish":"first_publish"};g.bi.event(E.events.publish.START_PUBLISH,i);var e={},n=y();b.set(e,"shouldReorderDOM",!!b.isUndefined(n)||n),g.dsActions.publish(function(e){g.bi.event(E.events.publish.SUCCESS_PUBLISH,i),a.isOpen("se_fixPublishFlow")||b.forEach(g.sitePublishedCallbacks,function(e){e()}),t(e),s("DONE_SUCCESS")},function(e){o(e),s("DONE_FAILED")},e)})},publishRC:function(){return new Promise(function(e,t){r(),g.dsActions.publish(function(){e(),s("DONE_SUCCESS")},function(e){t(e),s("DONE_FAILED")},{publishRC:!0})})},registerFirstSaveCallback:function(e){f.push(e)},getSiteState:function(){var e=m.getState(),t=c.isDomainConnected(e,g.dsRead);return b.merge({isFirstSave:g.dsRead.generalInfo.isFirstSave(),isSitePublished:g.dsRead.generalInfo.isSitePublished(),isDomainConnected:t,domain:t?g.dsRead.generalInfo.getPublicUrl():c.getFreeDomainPrefix(m.getState(),g.dsRead)+g.siteName.get(),isSitePremium:g.site.isPremium()},e.sitePremiumState)},setSitePremiumState:function(e){g.updateState({sitePremiumState:e})},lockSavePublish:function(){e=!0},unlockSavePublish:function(){e=!1},isSavePublishLocked:function(){return e},canDiffSave:function(){return!(u.getIsDiffSaveInProgress(m.getState())||o()||t()||e)},canUserPublish:function(){var e=g.dsRead&&g.dsRead.canUserPublish();return!b.isBoolean(e)||e},canSaveOrPublish:i,canPackage:function(){return i()&&!C.isPackageInProgress(g.store.getState())},setSaveProgress:function(e){m.dispatch(p.setIsSaveInProgress(e))},setPublishProgress:function(e){m.dispatch(p.setIsPublishInProgress(e))},setDiffSaveProgress:function(e){m.dispatch(p.setIsDiffSaveInProgress(e))},isSaveInProgress:o,isPublishInProgress:t,isSaveReminderPanelEnabled:function(){return!b.get(u.getOverridingSaveReminderPanel(m.getState()),"disabled",!1)}}}}}),define("rEditor/app/APISections/componentsFacade/layoutWrapper",["lodash","experiment","core","util","santa-editor-utils","constants","stateManagement"],function(f,h,y,b,e,v,S){"use strict";var t=b.array,i=t.validateForSome,E=t.applyForAll,P=t.asArray,C=t.applyForFirstAndThrowIfMulti,T=e.math.rect,_=S.editorPlugins.components.selectors;return{create:function(u){var a=u.store;function n(e,t,o){var i,n,a,r=(i=e,n=t,a=u.components.layout.getRelativeToScreen(i),y.utils.updateLayoutUtil.getLayoutRelativeToScreenAfterConstraints(u,i,n,a)),s=b.layoutUtils.getLayoutRelativeToParentFromRelativeToScreen(u,e,r);u.dsActions.components.layout.update(e,s),o||u.history.debouncedAdd("component - update layout")}function r(e,t){var o=u.components.layout.get(e);return y.utils.updateLayoutUtil.getLayoutAfterConstraints(u,e,t,o)}function g(e,t){var o=b.math.getSquaresIntersection(e,t);return o&&b.math.rect.getAreaRatioPercentage(o,t)}function o(e){if(e.length<=1)return!0;var t=u.components.getSiblings(f.head(e)),o=f.tail(e);return f.every(o,function(e){return!!f.find(t,e)})}function m(e,t){return S.editorPlugins.components.selectors.getLayoutRelativeToScreen(u.dsRead,e,t)}function t(t,e){var o=u.components.asArray(e);return!f.isEmpty(o)&&f.every(o,function(e){return t(e)})}function s(e,t,o){var i=l(e,b.layoutUtils.getLayoutsXYDiff(o,t));f.forEach(i,function(e){u.components.layout.update(e.component,e.newLayout)})}function l(e,o){return f.map(e,function(e){var t=f.pick(u.components.layout.get(e),["x","y"]);return{component:e,newLayout:b.layoutUtils.addXYOffsetsToLayout(t,o)}})}function c(e,a,t){f.defaults(a,t.layout),f.forEach(t.children,function(e){var t,o,i,n=(t=e,o=a,i=b.layoutUtils.calcLayoutFromLayoutAndRatio(o,t.proportions),b.layoutUtils.addXYOffsetsToLayout(i,o));u.components.layout.updateRelativeToScreenAndPreserveProportions(e.component,n,e)})}function p(e,t,o){var i=P(e);if(1<i.length){if(!u.components.layout.containsSiblingsOnly(i))throw new Error("Selected components do not share the same parent and therefore cannot be positioned relative to their container");c(0,b.layoutUtils.getLayoutRelativeToScreenFromRelativeToParent(u,i,t),o)}else u.dsActions.components.layout.updateAndPreserveProportions(t,o,!0)}function d(e){return C("getDock",u.dsRead.components.layout.getDock,e)}return{get:function(e){var t=P(e);if(1<t.length){if(!o(t))throw new Error("Cannot get layout for non-siblings components");return u.dsRead.components.layout.getSnugLayout(t)}return u.dsRead.components.layout.get(f.head(t))},isRenderedInFixedPosition:function(e){var t=u.components.asArray(e);return f.every(t,function(e){return u.dsRead.components.layout.isRenderedInFixedPosition(e)})},isAncestorRenderedInFixedPosition:function(e){var t=u.components.asArray(e);return f.every(t,function(e){return u.dsRead.components.layout.isAncestorRenderedInFixedPosition(e)})},getClosestAncestorRenderedInFixedPosition:function(e){var t=f.head(u.components.asArray(e));return u.dsRead.components.layout.getClosestAncestorRenderedInFixedPosition(t)},isShowOnFixedPosition:function(e){var t=u.components.asArray(e);return f.every(t,function(e){return u.dsRead.components.layout.isShowOnFixedPosition(e)})},isHorizontallyStretchedToScreen:function(e){var t=u.components.asArray(e);return f.every(t,function(e){return u.dsRead.components.layout.isHorizontallyStretchedToScreen(e)})},isDocked:function(e){var t=u.components.asArray(e);return f.every(t,function(e){return u.dsRead.components.layout.isDocked(e)})},isDockedToScreen:function(e){var t=u.components.asArray(e);return f.every(t,function(e){return u.dsRead.components.layout.isDockedToScreen(e)})},unDock:function(e){C("undock",u.dsActions.components.layout.unDock,e)},isRotated:function(e){var t=u.components.asArray(e);return f.every(t,function(e){return u.dsRead.components.layout.isRotated(e)})},isPinned:function(e){var t=u.components.asArray(e);return!u.components.is.fixedNonPinned(e)&&S.editorPlugins.componentMetaData.selectors.isPinned(t,u.dsRead)},canBeFixedPosition:function(e){return f.every(P(e),u.dsRead.components.layout.canBeFixedPosition)},getRelativeToScreen:m,getRelativeToScreenConsideringScroll:function(e){return _.getRelativeToScreenConsideringScroll(e,u.dsRead)},getRelativeToStructure:function(e){var t=P(e);return 1<t.length?u.dsRead.components.layout.getSnugLayoutRelativeToStructure(t):u.dsRead.components.layout.getRelativeToStructure(f.head(t))},getResizableSides:function(e){var t=P(e);if(1<t.length)return u.components.is.proportionallyResizable(t)?f.values(u.dsRead.components.layout.RESIZE_SIDES):[];var o=f.head(t);if(S.editorPlugins.pinMode.selectors.isOpen(a.getState()))return[];if(u.components.is.group(o))return f.values(u.dsRead.components.layout.RESIZE_SIDES);var i=u.dsRead.components.layout.getResizableSides(o),n=d(o);return n&&(i=function(e,t,o){if(h.isOpen("se_screenWidthEditBox")&&u.components.layout.isHorizontallyStretchedToScreen(e))return t;var i={left:u.dsRead.components.layout.RESIZE_SIDES.LEFT,right:u.dsRead.components.layout.RESIZE_SIDES.RIGHT,top:u.dsRead.components.layout.RESIZE_SIDES.TOP,bottom:u.dsRead.components.layout.RESIZE_SIDES.BOTTOM},n=f.map(o,function(e,t){return i[t]});return f.difference(t,n)}(e,i,n)),i},getResizableWithAnchors:function(e){return t(u.components.is.resizableWithAnchors,e)},getResizableDiagonally:function(e){return t(u.components.is.resizableDiagonally,e)},getProportionStructure:function(e,t){var o,r,s,i=P(e);return 1<i.length?(r=t,{component:null,layout:s=m(o=i),children:f.map(o,function(e){var t=m(e),o=b.layoutUtils.getLayoutsXYDiff(t,s),i=f.defaults(o,t),n=b.layoutUtils.getChildContainerLayoutRatio(i,s),a=u.components.layout.getProportionStructure(e,r);return a.proportions=n,a.minLayout=f.omit(a.minLayout,["x","y"]),a})}):u.dsRead.components.layout.getProportionStructure(i[0],t)},update:function(e,t,o){if(t){var i=r(e,t),n=P(e);if(n.length<=1)u.dsActions.components.layout.update(n[0],i);else{if(!u.components.layout.containsSiblingsOnly(e))throw new Error("Selected components do not share the same parent and therefore cannot be positioned relative to their container");s(e,u.dsRead.components.layout.getSnugLayout(e),i)}o||u.history.debouncedAdd("component - update layout")}},updateRelativeToStructure:function(e,t,o){var i=P(e);if(1<i.length)s(i,f.pick(u.components.layout.getRelativeToStructure(i),["x","y"]),t);else{var n=f.head(i),a=b.layoutUtils.getLayoutRelativeToParentFromRelativeToStructure(u,n,t);u.components.layout.update(n,a,o)}},updateRelativeToScreen:function(e,t,o){var i=P(e);1<i.length?s(i,f.pick(u.components.layout.getRelativeToScreen(i),["x","y"]),t):n(f.head(i),t,o)},updateRelativeToStructureAndPreserveProportions:function(e,t,o){var i=P(e);if(1<i.length)c(0,b.layoutUtils.getLayoutRelativeToScreenFromRelativeToStructure(u,i,t),o);else{var n=f.head(i);p(n,b.layoutUtils.getLayoutRelativeToParentFromRelativeToStructure(u,n,t),o)}},updateRelativeToScreenAndPreserveProportions:function(e,t,o){var i=P(e);if(1<i.length)c(0,t,o);else{var n=f.head(i);p(n,b.layoutUtils.getLayoutRelativeToParentFromRelativeToScreen(u,n,t),o)}},updateAndPreserveProportions:p,updateAndAdjustLayout:function(e,t,o){var i=r(e,t),n=P(e),a=void 0;return 1<n.length?function(e,t){if(!u.components.layout.containsSiblingsOnly(e))throw new Error("Cannot update and adjust layout of non-siblings components");var o=u.dsRead.components.layout.getSnugLayout(e);o=f.pick(o,"y");var i=b.layoutUtils.getLayoutsXYDiff(t,o),n=l(e,i);f.forEach(n,function(e){u.dsActions.components.layout.updateAndAdjustLayout(e.component,e.newLayout)})}(n,t):a=u.dsActions.components.layout.updateAndAdjustLayout(f.head(n),i),o||u.history.debouncedAdd("component - update layout"),a},updateRelativeToScreenAndAdjustLayout:function(e,t,o){var i=b.layoutUtils.getLayoutRelativeToParentFromRelativeToScreen(u,e,t);return u.components.layout.updateAndAdjustLayout(e,i,o)},resetCompLayoutToAspectRatio:function(e,t,o){var i=u.components.layout.getRelativeToStructure(e),n=f.mapValues(i.docked,function(){return!0});n.center=n.vCenter||n.hCenter||f.isEmpty(n)&&o;var a=T.getRectBoundWithAspectRatio(i,t,null,n);u.components.layout.updateRelativeToStructure(e,a,!0)},setFixed:function(e,t){var o=P(e),i=f.map(o,function(e){return y.utils.fixedPositionUtils.setFixedPosition(u,e,t)});return 1<o.length?i:f.head(i)},isStretchedToScreen:function(e){return i(u.dsRead.components.layout.isHorizontallyStretchedToScreen,e)},setDock:function(e,t){return C("setDock",function(e){return u.dsActions.components.layout.setDock(e,t)},e)},getDock:d,updateDock:function(e,t){return C("updateDock",function(e){return u.dsActions.components.layout.updateDock(e,t)},e)},updateAspectRatio:function(e){return E(u.dsActions.components.layout.updateAspectRatio,e)},removeAspectRatio:function(e){return E(u.dsActions.components.layout.removeAspectRatio,e)},isAspectRatioOn:function(e){var t=u.components.asArray(e);return f.every(t,function(e){return u.dsRead.components.layout.isAspectRatioOn(e)})},shouldShowOutOfPageGridlinesWarning:function(e,t,o){var i,n,a,r,s,l,c,p,d=[u.components.layout.isPinned,u.components.is.repeaterItem,function(e){return!u.components.is.page(e)&&!u.components.is.horizontallyResizable(e)}];return i=o,n=m(e),a=m(u.dsRead.siteSegments.getPagesContainer()),r=u.isMobileEditor()?v.SIZE_LIMITS.MOBILE_DRAG_CONSTRAINT_MARGINS:0,s=a.x+r,l=a.x+a.width-r,c={x:0,y:a.y,width:s,height:a.height},p={x:l,y:a.y,width:s,height:a.height},((g(c,n)||0)>i||(g(p,n)||0)>i)&&u.components.is.horizontallyResizable(e)&&!u.components.layout.isPinned(e)&&!f.some(d,function(e){return e(t)||u.utils.findAncestorMatchesCondition(t,e)})},getCompMargin:function(e){var t=m(e),o=u.components.layout.getRelativeToStructure(e),i=t.width-o.width,n=u.site.getSiteX(),a=o.x+n-t.x;return{left:a,right:i-a}},isCompExceedingContainerMargin:function(e,t,o){var i=u.components.layout.getRelativeToScreen(t),n=u.components.layout.getCompMargin(t),a=u.components.layout.getRelativeToScreen(e),r=f.assign({},i,{width:n.left}),s=f.assign({},i,{x:i.x+i.width-n.right,width:n.right});return(g(r,a)||0)>o||(g(s,a)||0)>o},containsSiblingsOnly:o}}}}),define("rEditor/app/APISections/componentsFacade/arrangementFacade",["constants","platformEvents","util"],function(o,i,e){"use strict";var a=e.array.asArray;return{create:function(n){return{moveForward:function(e){var t=a(e);if(!n.components.arrangement.canMoveForward(t))return null;n.dsActions.components.arrangement.moveForward(t[0]),n.history.add("component - move forward"),n.dsActions.platform.notifyAppsOnCustomEvent(i.factory.componentArrangementChanged({compRef:t[0]}))},moveBackward:function(e){var t=a(e);if(!n.components.arrangement.canMoveBackward(t))return null;n.dsActions.components.arrangement.moveBackward(t[0]),n.history.add("component - move backward"),n.dsActions.platform.notifyAppsOnCustomEvent(i.factory.componentArrangementChanged({compRef:t[0]}))},moveToFront:function(e){var t=a(e);if(!n.components.arrangement.canMoveForward(t))return null;n.dsActions.components.arrangement.moveToFront(t[0]),n.history.add("component - move to front"),n.dsActions.platform.notifyAppsOnCustomEvent(i.factory.componentArrangementChanged({compRef:t[0]}))},moveToBack:function(e){var t=a(e);if(!n.components.arrangement.canMoveBackward(t))return null;n.dsActions.components.arrangement.moveToBack(t[0]),n.history.add("component - move to back"),n.dsActions.platform.notifyAppsOnCustomEvent(i.factory.componentArrangementChanged({compRef:t[0]}))},moveToIndex:function(e,t,o){var i=a(e);n.dsActions.components.arrangement.moveToIndex(i[0],t),o||n.history.add("component - move to index")},canMoveBackward:function(e){var t=a(e);return!(1<t.length||!n.components.is.arrangeable(e))&&!(n.components.getType(t)===o.COMP_TYPES.ANCHOR)&&n.dsRead.components.arrangement.canMoveBackward(t[0])},canMoveForward:function(e){var t=a(e);return!(1<t.length||!n.components.is.arrangeable(e))&&!(n.components.getType(t)===o.COMP_TYPES.ANCHOR)&&n.dsRead.components.arrangement.canMoveForward(t[0])}}}}}),define("rEditor/app/APISections/componentsFacade/behaviorsFacade",["lodash","stateManagement","platformEvents","util"],function(r,e,n,i){"use strict";var s=i.array.asArray,t=e.editorPlugins.components.selectors.getBehaviors,l=i.array.applyForAll;return{create:function(a){return{update:function(e,t,o,i){l(function(e){a.dsActions.components.behaviors.update(e,t,o,i),a.dsActions.platform.notifyAppsOnCustomEvent(n.factory.componentBehaviorChanged({compRef:e}))})(e)},get:function(e){return t(e,a.dsRead)},remove:function(e,t,o,i){l(function(e){return a.dsActions.components.behaviors.remove(e,t,o,i)})(e)},removeAll:function(e){l(a.dsActions.components.behaviors.removeAll,e)},previewAnimation:function(e,o,i){var n=s(e),t=r.map(n,function(e,t){return a.dsActions.components.behaviors.previewAnimation(e,r.cloneDeep(o),t===n.length-1?i:r.noop)});return 1<t.length?t:r.head(t)},stopPreviewAnimation:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;r(e).castArray().forEach(function(e){return a.dsActions.components.behaviors.stopPreviewAnimation(e,t)})},execute:function(e,t,o,i){1<s(e).length&&(i=r.noop),l(function(e){return a.dsActions.components.behaviors.execute(e,t,o,i)})(e)},getRuntimeState:function(e){var t=i.array.asArray(e),o=r.map(t,a.dsRead.components.behaviors.getRuntimeState);return 1<t.length?o:r.head(o)}}}}}),define("rEditor/componentsMetaData/components/bgImageStrip",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/footer",[],function(){"use strict";return{pinnable:!1,showLegacyFixedPosition:!0}}),define("rEditor/componentsMetaData/components/header",[],function(){"use strict";return{pinnable:!1,showLegacyFixedPosition:!1}}),define("rEditor/componentsMetaData/components/screenWidthContainer",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/stripShowcase",[],function(){"use strict";return{pinnable:!1,allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/stripSlideshowGallery",[],function(){"use strict";return{pinnable:!1,allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/blogComponents",["coreUtilsLib","lodash","wix-ui-santa/editorComponentsData.bundle.min"],function(e,i,t){"use strict";var n=e.blogAppPartNames,o=t.editorDataResolver,a=o.editorDataFunction,r=o.componentInstanceData;return{pinnable:!1,selectable:a((0,o.experiment)("se_blogHeroImage"),r("componentData"),r("appPartExtraData"),function(e,t,o){if(e&&(t.appPartName===n.HERO_IMAGE&&o))return i.head(o.items).coverImageData.isHeroImage;return!0}),containable:a(r("componentData"),function(e){var t=[n.FEED,n.SINGLE_POST,n.RELATED_POSTS];return!i.includes(t,e.appPartName)})}}),define("rEditor/componentsMetaData/components/rssButton",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/tpaGluedWidget",["lodash","wix-ui-santa/editorComponentsData.bundle.min"],function(i,e){"use strict";var n=["14517e1a-3ff0-af98-408e-2bd6953c36a2"],t=e.editorDataResolver,o=t.editorDataFunction,a=t.componentInstanceData;return{pinnable:!1,selectable:o((0,t.environment)("isMobileEditor"),a("tpaAppData"),function(e,t){var o=i.includes(n,t.appDefinitionId);return!e||e&&!o}),customizeTranslate:!0}}),define("rEditor/rootComps/overlay/overlayWithHole.rt",["react","lodash"],function(e,t){"use strict";return function(){return e.createElement("div",{style:{position:"absolute",height:"100%",width:"100%"}},e.createElement("div",{style:this.getStyles()}))}}),define("rEditor/rootComps/overlay/overlayWithHole",["create-react-class","lodash","core","rEditor/rootComps/overlay/overlayWithHole.rt"],function(e,t,o,i){"use strict";return e({displayName:"overlayWithHole",mixins:[o.mixins.editorAPIMixin],getHoleLayout:function(){return this.props.hole?this.getEditorAPI().components.layout.getRelativeToScreen(this.props.hole):{}},getStyles:function(){var e=this.getHoleLayout(),t={width:e.width,height:e.height,top:e.y,left:e.x,position:"absolute",boxShadow:"0 0 0 9999px "+this.props.background};return e.rotationInDegrees&&(t.transform="rotate("+e.rotationInDegrees+"deg)"),t},render:i})}),define("rEditor/rootComps/overlay/overlayWithQuickTip",["react","create-react-class","lodash","core","baseUI","stateManagement"],function(r,e,s,t,l,c){"use strict";return e({displayName:"overlayWithQuickTip",mixins:[t.mixins.editorAPIMixin],componentWillMount:function(){this.quickTipShowTimeoutId=this.showQuickTip()},showQuickTip:function(){var i=this.getEditorAPI(),n=this.props.quickTipSession.id+this.props.hoveredComp.id,a=c.editorPlugins.userPreferences.selectors.getSessionUserPreferences(n)(i.store.getState())||0;return this.sessionDisabledId=n+"-disabled",a>=this.props.quickTipSession.maxNum||c.editorPlugins.userPreferences.selectors.getSessionUserPreferences(this.sessionDisabledId)(i.store.getState())?null:window.setTimeout(function(){var e,t={height:0,width:0,top:(e=i.cursor.get()).y||0,left:e.x||0},o=r.createElement(l.popoverTemplates.quickTip,s.assign(this.props.templateInfo,{closeAction:this.closeQuickTip}));this.quickTipShowTimeoutId=null,this.isQuickTipShown=!0,i.store.dispatch(c.editorPlugins.userPreferences.actions.setSessionUserPreferences(n,a+1)),i.showFloatingBubble(o,t,this.props.propsForBubble,this.props.shouldNotHideOnMouseLeaveTarget)}.bind(this),this.props.delayBeforeShow)},closeQuickTip:function(){this.getEditorAPI().hideFloatingBubble(),this.getEditorAPI().overlay.enableUpdate(),this.isQuickTipShown=!1},componentWillUnmount:function(){var e,t,o;this.isQuickTipShown&&(this.props.delayBeforeNext&&(e=this.getEditorAPI(),t=this.sessionDisabledId,o=this.props.delayBeforeNext,e.store.dispatch(c.editorPlugins.userPreferences.actions.setSessionUserPreferences(t,!0)),window.setTimeout(function(){e.store.dispatch(c.editorPlugins.userPreferences.actions.setSessionUserPreferences(t,!1))},o)),this.closeQuickTip()),this.quickTipShowTimeoutId&&window.clearTimeout(this.quickTipShowTimeoutId)},render:function(){return this.props.children}})}),define("rEditor/componentsMetaData/components/popupOverlay",["lodash","react","constants","rEditor/rootComps/overlay/overlayWithHole","rEditor/rootComps/overlay/overlayWithQuickTip","wix-ui-santa/editorComponentsData.bundle.min"],function(n,a,r,s,l,e){"use strict";var t=e.editorDataResolver,o=t.editorDataFunction,i=t.componentInstanceData,c=t.environment;return{pinnable:!1,shouldBeOverlayed:o(i("isPopup"),c("isMobileEditor"),function(e,t){return!t&&e}),getOverlay:function(e,t){var o,i=a.createElement(s,{hole:e.pages.popupPages.getPopupContainer(),background:"rgba(127, 204, 247, 0.4)"});return a.createElement(l,n.assign({hoveredComp:t},(o=e,{delayBeforeShow:500,delayBeforeNext:1500,quickTipSession:{id:"popupOverlayQuickTipShownFor-",maxNum:4},shouldNotHideOnMouseLeaveTarget:!1,templateInfo:{text:"POPUPS_OVERLAY_HOVER_TOOLTIP",symbol:"idea-bulb"},propsForBubble:{noArrow:!0,shake:!1,behindPopUps:!0,alignment:r.UI.TOOLTIP.ALIGNMENT.RIGHT,closeTriggers:[r.UI.TOOLTIP.TRIGGERS.CLICK],onMouseLeave:o.overlay.enableUpdate,onMouseEnter:o.overlay.disableUpdate}})),i)},getOverlayProperties:{enter:{duration:300,delay:500},leave:{duration:300}}}}),define("rEditor/componentsMetaData/components/page",["lodash","rEditor/componentsMetaData/components/popupOverlay","wix-ui-santa/editorComponentsData.bundle.min"],function(e,t,o){"use strict";var i=o.editorDataResolver,n={pinnable:!1,selectable:(0,i.editorDataFunction)((0,i.componentInstanceData)("isWidgetPage"),e.identity),allowConnectToDB:!0};return e.assign(n,t)}),define("rEditor/componentsMetaData/components/boxSlideShow",["constants"],function(e){"use strict";return{nestedBackgroundDesign:!0,slidesContainer:!0,focusable:!0,canContain:!1,canContainByStructure:!1,overridesWhenReferred:{gfpp:{disableMainActionsByLabel:[e.BOX_SLIDE_SHOW.GFPP.ACTIONS.LABELS.REGULAR_SLIDESHOW_SETTINGS_MANAGE_SLIDES]}}}}),define("rEditor/componentsMetaData/components/stripSlideShowMetaData",[],function(){"use strict";return{nestedBackgroundDesign:!0,slidesContainer:!0,focusable:!0,canContain:!1,canContainByStructure:!1,allowLassoOnContainer:!0,pinnable:!1}}),define("rEditor/componentsMetaData/components/boxSlideShowSlide",[],function(){"use strict";return{selectable:!1,slideContainer:!0}}),define("rEditor/componentsMetaData/components/stripSlideShowSlide",[],function(){"use strict";return{selectable:!1,slideContainer:!0}}),define("rEditor/componentsMetaData/components/stateBox",[],function(){"use strict";return{nestedBackgroundDesign:!0,slidesContainer:!0,focusable:!0,exposesSlideAsInnerComponent:!0,canContain:!1,canContainByStructure:!1}}),define("rEditor/componentsMetaData/components/stateStrip",[],function(){"use strict";return{nestedBackgroundDesign:!0,slidesContainer:!0,focusable:!0,canContain:!1,exposesSlideAsInnerComponent:!0,canContainByStructure:!1,allowLassoOnContainer:!0,pinnable:!1}}),define("rEditor/componentsMetaData/components/stateBoxState",[],function(){"use strict";return{selectable:!1,slideContainer:!0}}),define("rEditor/componentsMetaData/components/stateBoxFormState",[],function(){"use strict";return{selectable:!1,slideContainer:!0}}),define("rEditor/componentsMetaData/components/stateStripState",[],function(){"use strict";return{selectable:!1,slideContainer:!0}}),define("rEditor/componentsMetaData/components/anchor",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/collage",[],function(){"use strict";return{pinnable:!1,allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/wRichText",["wix-ui-santa/editorComponentsData.bundle.min","stateManagement","constants"],function(e,t,o){"use strict";var i=e.editorDataResolver,n=i.editorDataFunction,a=i.environment,r=t.editorPlugins.text.selectors,s=r.isTextEditorOpen,l=r.isStyleOnly,c=function(e){return!(s(e)&&!l(e))};return{pinnable:!0,verticallyResizable:n(a("isMobileEditor"),function(e){return!e}),disabledKnobs:n(a("isMobileEditor"),function(e){return e?[o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM]:[o.RESIZE_SIDES.TOP]}),resizableWithAnchors:!1,resizableDiagonally:!1,allowConnectToDB:!0,overrideProportionalResize:!1,horizontallyMovable:function(e){var t=e.store;return c(t.getState())},verticallyMovable:function(e){var t=e.store;return c(t.getState())}}}),define("rEditor/componentsMetaData/components/group",[],function(){"use strict";return{pinnable:!1,selectedBeforeDescendants:!0}}),define("rEditor/componentsMetaData/components/stripContainer",[],function(){"use strict";return{pinnable:!1}}),define("rEditor/componentsMetaData/components/stripColumnsContainer",["lodash","stateManagement"],function(n,e){"use strict";var t=e.editorPlugins.selection.selectors,a=t.getFocusedContainer,r=t.getSelectedCompsRefs;return{selectedBeforeDescendants:function(e,t,o){return e.columns.isMultiColumnsStrip(t)&&e.columns.isColumn(o)},nestedBackgroundDesign:function(e,t){return e.columns.isSingleColumnStrip(t)},showMarginsIndicator:function(e){var t=e.store.getState(),o=a(t);if(o){var i=n.head(r(t));if(n.isEqual(i,o))return e.isDesktopEditor()&&e.components.is.fullWidth(o)&&1===e.components.getChildren(o).length}},focusable:!0,allowLassoOnContainer:!0,pinnable:!1,allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/tpaSection",[],function(){"use strict";return{pinnable:!1,customizeTranslate:!0}}),define("rEditor/componentsMetaData/components/column",["lodash","stateManagement","constants","wix-ui-santa/editorComponentsData.bundle.min"],function(a,e,t,o){"use strict";var i=o.editorDataResolver,n=i.editorDataFunction,r=i.environment,s=e.editorPlugins.selection.selectors,l=s.getFocusedContainer,c=s.getSelectedCompsRefs;function p(e,t){return e.components.getSiblings(t).length}return{showMarginsIndicator:function(e){var t=e.store.getState(),o=l(t);if(o){var i=a.head(c(t)),n=e.components.getContainer(o);return a.isEqual(i,o)?e.components.is.fullWidth(n)&&!!p(e,i):e.isDesktopEditor()&&e.components.is.fullWidth(n)}},focusable:!0,selectable:p,horizontallyMovable:!1,movable:!1,verticallyMovable:!1,allowLassoOnContainer:!0,disabledKnobs:n(r("isMobileEditor"),function(e){return e?a.values(t.RESIZE_SIDES):a(t.RESIZE_SIDES).omit("BOTTOM").values().value()}),controlledByParent:!0,allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/popupCloseIconButton",[],function(){"use strict";return{duplicatable:!1}}),define("rEditor/componentsMetaData/components/popupCloseTextButton",[],function(){"use strict";return{duplicatable:!1}}),define("rEditor/componentsMetaData/components/popupContainerMetaData",["wix-ui-santa/editorComponentsData.bundle.min"],function(e){"use strict";var t=e.editorDataResolver,o=t.editorDataFunction,i=t.componentInstanceData,n={nineGrid:function(e){return"center"===e.horizontalAlignment},fullWidth:function(){return!0},fullHeight:function(){return!1}};return{pinnable:!1,gridLinesVisible:o(i("componentProperties"),function(e){var t=n[e.alignmentType];if(t)return t(e)}),focusable:!0}}),define("rEditor/componentsMetaData/components/mediaBoxMetaData",[],function(){"use strict";return{allowLassoOnContainer:function(e,t){var o=e.components.getPage(t);return e.dsRead.pages.isWidgetPage(o.id)}}}),define("rEditor/componentsMetaData/components/mediaControlsContainer",["lodash","constants","wix-ui-santa/editorComponentsData.bundle.min"],function(e,t,o){"use strict";var i=o.editorDataResolver,n=i.editorDataFunction,a=i.environment,r=i.componentInstanceData;return{horizontallyMovable:!1,movable:!1,verticallyMovable:!1,verticallyResizable:!1,multiselectable:!1,disabledKnobs:e.values(t.RESIZE_SIDES),controlledByParent:!0,selectable:n(a("isMobileEditor"),r("skin"),function(e,t){return!(e||"skins.viewer.mediaControlsNoControlsSkin"===t)})}}),define("rEditor/componentsMetaData/components/mediaOverlayControls",[],function(){"use strict";return{verticallyMovable:!1,controlledByParent:!0,multiselectable:!1,selectable:!0,overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/mediaPlayer",[],function(){"use strict";return{allowLassoOnContainer:!1,overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/quickActionBarItem",[],function(){"use strict";return{selectable:!1}}),define("rEditor/componentsMetaData/components/quickActionBar",[],function(){"use strict";return{selectable:!0}}),define("rEditor/componentsMetaData/components/tinyMenu",["lodash"],function(o){"use strict";return{pinnable:!1,showLegacyFixedPosition:!0,skinParamsToIgnore:function(e,t){return!o.chain(t).thru(e.components.data.get).get("loginSocialBarRef").isEmpty().value()?[]:o.keys(e.theme.skins.getSkinDefinition("wysiwyg.viewer.skins.mobile.TinyMenuMemberSectionSkin"))},overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/repeaterMetaData",[],function(){"use strict";return{selectedBeforeDescendants:!0,focusable:!0,allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/popoverMetadata",["lodash","wix-ui-santa/editorComponentsData.bundle.min"],function(t,e){"use strict";var o=e.editorDataResolver;return{selectedBeforeDescendants:!0,isDirectChildrenSelectable:!1,selectable:(0,o.editorDataFunction)((0,o.componentInstanceData)("activeModeIds"),function(e){return!t.isEmpty(e)})}}),define("rEditor/componentsMetaData/components/siteRegionContainerMetaData",[],function(){"use strict";return{focusable:!0}}),define("rEditor/componentsMetaData/components/radioGroupMetaData",["lodash","wix-ui-santa/editorComponentsData.bundle.min"],function(t,e){"use strict";var o=["txt2","fnt2","txtlblrq"],i=e.editorDataResolver;return{skinParamsToIgnore:(0,i.editorDataFunction)((0,i.componentInstanceData)("componentData"),function(e){return!t.isEmpty(t.get(e,"label"))?[]:o}),allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/pageGroup",[],function(){"use strict";return{selectable:!1}}),define("rEditor/componentsMetaData/components/pagesContainer",[],function(){"use strict";return{selectable:!1}}),define("rEditor/componentsMetaData/components/appWidgetMetaData",["experiment","util"],function(o,e){"use strict";var i=e.appStudioUtils.isWidgetController;return{isDirectChildrenSelectable:!1,selectedBeforeDescendants:!0,focusable:!0,allowConnectToDB:function(e,t){return o.isOpen("se_connectAppWidget")&&i(e,t)}}}),define("rEditor/componentsMetaData/components/checkbox",["lodash","wix-ui-santa/editorComponentsData.bundle.min"],function(t,e){"use strict";var o=["txt","fnt"],i=e.editorDataResolver;return{skinParamsToIgnore:(0,i.editorDataFunction)((0,i.componentInstanceData)("componentData"),function(e){return!t.isEmpty(t.get(e,"label"))?[]:o}),allowConnectToDB:!0,overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/siteButtonMetaData",[],function(){"use strict";return{allowConnectToDB:!0,overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/textInputMetaData",["lodash","wix-ui-santa/editorComponentsData.bundle.min"],function(t,e){"use strict";var o=["txtlbl","fntlbl","txtlblrq"],i=e.editorDataResolver;return{a11yConfigurable:!1,skinParamsToIgnore:(0,i.editorDataFunction)((0,i.componentInstanceData)("componentData"),function(e){return!t.isEmpty(t.get(e,"label"))?[]:o}),allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/textAreaInputMetaData",["lodash","wix-ui-santa/editorComponentsData.bundle.min"],function(t,e){"use strict";var o=["txtlbl","fntlbl","txtlblrq"],i=e.editorDataResolver;return{skinParamsToIgnore:(0,i.editorDataFunction)((0,i.componentInstanceData)("componentData"),function(e){return!t.isEmpty(t.get(e,"label"))?[]:o}),allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/videoMetaData",[],function(){"use strict";return{allowConnectToDB:!0,overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/TPA3DGalleryMetaData",[],function(){"use strict";return{allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/TPA3DCarouselMetaData",[],function(){"use strict";return{allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/accordionMetaData",[],function(){"use strict";return{allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/slideShowGalleryMetaData",[],function(){"use strict";return{allowConnectToDB:!0,overrideProportionalResize:!0,overridesWhenReferred:{gfpp:{disableActions:["DESIGN"]}}}}),define("rEditor/componentsMetaData/components/datePickerMetaData",["lodash","wix-ui-santa/editorComponentsData.bundle.min"],function(t,e){"use strict";var o=["txtlbl","fntlbl","txtlblrq"],i=e.editorDataResolver;return{skinParamsToIgnore:(0,i.editorDataFunction)((0,i.componentInstanceData)("componentData"),function(e){return!t.isEmpty(t.get(e,"label"))?[]:o}),allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/fileUploaderMetaData",["lodash","wix-ui-santa/editorComponentsData.bundle.min"],function(t,e){"use strict";var o=["txtlbl","fntlbl","txtlblrq"],i=e.editorDataResolver;return{skinParamsToIgnore:(0,i.editorDataFunction)((0,i.componentInstanceData)("componentData"),function(e){return!t.isEmpty(t.get(e,"label"))?[]:o}),allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/freeStyleMetaData",[],function(){"use strict";return{allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/gridMetaData",[],function(){"use strict";return{allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/honeyCombMetaData",[],function(){"use strict";return{allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/imageMetaData",[],function(){"use strict";return{allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/imageButtonMetaData",["lodash","wix-ui-santa/editorComponentsData.bundle"],function(e,t){"use strict";var o=t.editorDataResolver;return{allowConnectToDB:(0,o.editorDataFunction)((0,o.experiment)("se_addImageButtonConnect"),e.identity),overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/legacyImageButtonMetaData",[],function(){"use strict";return{overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/optionsListInputMetaData",[],function(){"use strict";return{allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/radioButtonMetaData",[],function(){"use strict";return{allowConnectToDB:!0,overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/wPhotoMetaData",["wix-ui-santa/editorComponentsData.bundle.min","util"],function(e,t){"use strict";var o=e.editorDataResolver,i=o.editorDataFunction,n=o.componentInstanceData,a=t.imageTransform.fittingTypes,r=a.STRETCH,s=a.LEGACY_FULL;return{allowConnectToDB:!0,overrideProportionalResize:i(n("componentProperties"),function(e){return!e.autoFill&&e.displayMode!==r&&e.displayMode!==s})}}),define("rEditor/componentsMetaData/components/comboBoxInputMetaData",["lodash","wix-ui-santa/editorComponentsData.bundle.min"],function(i,e){"use strict";var n=["txtlbl","fntlbl","txtlblrq"],t=e.editorDataResolver,o=t.editorDataFunction,a=t.componentInstanceData;return{skinParamsToIgnore:o((0,t.experiment)("sv_comboboxPlaceholderStyle"),a("componentData"),function(e,t){var o=!i.isEmpty(i.get(t,"label"));return[].concat(e?[]:["txt_placeholder"],o?[]:n)}),allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/richTextBoxMetaData",[],function(){"use strict";return{allowConnectToDB:!0,overrideProportionalResize:!1}}),define("rEditor/componentsMetaData/components/toggleSwitchMetaData",[],function(){"use strict";return{allowConnectToDB:!0,overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/impressMetaData",[],function(){"use strict";return{allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/masonryMetaData",[],function(){"use strict";return{allowConnectToDB:!0,overridesWhenReferred:{gfpp:{disableActions:["DESIGN"]}}}}),define("rEditor/componentsMetaData/components/thumbnailsMetaData",[],function(){"use strict";return{allowConnectToDB:!0,overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/matrixGalleryMetaData",[],function(){"use strict";return{allowConnectToDB:!0,overrideProportionalResize:!0,overridesWhenReferred:{gfpp:{disableActions:["DESIGN"]}}}}),define("rEditor/componentsMetaData/components/paginatedGridGalleryMetaData",[],function(){"use strict";return{allowConnectToDB:!0,overrideProportionalResize:!0,overridesWhenReferred:{gfpp:{disableActions:["DESIGN"]}}}}),define("rEditor/componentsMetaData/components/sliderGalleryMetaData",[],function(){"use strict";return{allowConnectToDB:!0,overridesWhenReferred:{gfpp:{disableActions:["DESIGN"]}}}}),define("rEditor/componentsMetaData/components/tpaWidget",["lodash"],function(i){"use strict";var n=["142bb34d-3439-576a-7118-683e690a1e0d"];return{customizeTranslate:!0,allowConnectToDB:function(e,t){var o=(e.components.data.get(t)||{}).widgetId;return i.includes(n,o)}}}),define("rEditor/componentsMetaData/components/clipArtMetaData",[],function(){"use strict";return{overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/svgShapeMetaData",[],function(){"use strict";return{overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/vectorImageMetaData",["lodash","wix-ui-santa/editorComponentsData.bundle.min"],function(e,t){"use strict";var o=t.editorDataResolver;return{allowConnectToDB:(0,o.editorDataFunction)((0,o.experiment)("se_addVectorImageConnect"),e.identity),overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/videoPlayerMetaData",[],function(){"use strict";return{overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/tagsMetaData",[],function(){"use strict";return{overrideProportionalResize:!0}}),define("rEditor/componentsMetaData/components/mediaContainer",[],function(){"use strict";return{allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/backToTopButtonMetaData",[],function(){"use strict";return{overrideProportionalResize:!0,fixedNonPinned:!0,arrangeable:!1}}),define("rEditor/componentsMetaData/components/menuContainerMetaData",[],function(){"use strict";return{inlinePopup:!0,fixedNonPinned:!0,spotlightStageContainer:!0,focusable:!0,movable:!1,verticallyMovable:!1,horizontallyMovable:!1,resizableWithAnchors:!1,duplicatable:!1,pinnable:!1,rotatable:!1,groupable:!1,alignable:!1,draggable:!1,multiselectable:!1,proportionallyResizable:!1,selectWhenDeselectingChildren:!0}}),define("rEditor/componentsMetaData/components/menuToggleMetaData",[],function(){"use strict";return{showLegacyFixedPosition:!0}}),define("rEditor/componentsMetaData/components/checkboxGroupMetaData",[],function(){"use strict";return{allowConnectToDB:!0}}),define("rEditor/componentsMetaData/components/googleMap",["experiment"],function(e){"use strict";return{allowConnectToDB:function(){return e.isOpen("se_googleMapDatabinding")}}}),define("rEditor/componentsMetaData/components/refComponentMetaData",["experiment","util"],function(){"use strict";return{isDirectChildrenSelectable:!0,selectedBeforeDescendants:!1,selectable:!1}}),define("rEditor/componentsMetaData/metaDataMap",["rEditor/componentsMetaData/components/bgImageStrip","rEditor/componentsMetaData/components/footer","rEditor/componentsMetaData/components/header","rEditor/componentsMetaData/components/screenWidthContainer","rEditor/componentsMetaData/components/stripShowcase","rEditor/componentsMetaData/components/stripSlideshowGallery","rEditor/componentsMetaData/components/blogComponents","rEditor/componentsMetaData/components/rssButton","rEditor/componentsMetaData/components/tpaGluedWidget","rEditor/componentsMetaData/components/page","rEditor/componentsMetaData/components/boxSlideShow","rEditor/componentsMetaData/components/stripSlideShowMetaData","rEditor/componentsMetaData/components/boxSlideShowSlide","rEditor/componentsMetaData/components/stripSlideShowSlide","rEditor/componentsMetaData/components/stateBox","rEditor/componentsMetaData/components/stateStrip","rEditor/componentsMetaData/components/stateBoxState","rEditor/componentsMetaData/components/stateBoxFormState","rEditor/componentsMetaData/components/stateStripState","rEditor/componentsMetaData/components/anchor","rEditor/componentsMetaData/components/collage","rEditor/componentsMetaData/components/wRichText","rEditor/componentsMetaData/components/group","rEditor/componentsMetaData/components/stripContainer","rEditor/componentsMetaData/components/stripColumnsContainer","rEditor/componentsMetaData/components/tpaSection","rEditor/componentsMetaData/components/column","rEditor/componentsMetaData/components/popupCloseIconButton","rEditor/componentsMetaData/components/popupCloseTextButton","rEditor/componentsMetaData/components/popupContainerMetaData","rEditor/componentsMetaData/components/mediaBoxMetaData","rEditor/componentsMetaData/components/mediaControlsContainer","rEditor/componentsMetaData/components/mediaOverlayControls","rEditor/componentsMetaData/components/mediaPlayer","rEditor/componentsMetaData/components/quickActionBarItem","rEditor/componentsMetaData/components/quickActionBar","rEditor/componentsMetaData/components/tinyMenu","rEditor/componentsMetaData/components/repeaterMetaData","rEditor/componentsMetaData/components/popoverMetadata","rEditor/componentsMetaData/components/siteRegionContainerMetaData","rEditor/componentsMetaData/components/radioGroupMetaData","rEditor/componentsMetaData/components/pageGroup","rEditor/componentsMetaData/components/pagesContainer","rEditor/componentsMetaData/components/appWidgetMetaData","rEditor/componentsMetaData/components/checkbox","rEditor/componentsMetaData/components/siteButtonMetaData","rEditor/componentsMetaData/components/textInputMetaData","rEditor/componentsMetaData/components/textAreaInputMetaData","rEditor/componentsMetaData/components/videoMetaData","rEditor/componentsMetaData/components/TPA3DGalleryMetaData","rEditor/componentsMetaData/components/TPA3DCarouselMetaData","rEditor/componentsMetaData/components/accordionMetaData","rEditor/componentsMetaData/components/slideShowGalleryMetaData","rEditor/componentsMetaData/components/datePickerMetaData","rEditor/componentsMetaData/components/fileUploaderMetaData","rEditor/componentsMetaData/components/freeStyleMetaData","rEditor/componentsMetaData/components/gridMetaData","rEditor/componentsMetaData/components/honeyCombMetaData","rEditor/componentsMetaData/components/imageMetaData","rEditor/componentsMetaData/components/imageButtonMetaData","rEditor/componentsMetaData/components/legacyImageButtonMetaData","rEditor/componentsMetaData/components/optionsListInputMetaData","rEditor/componentsMetaData/components/radioButtonMetaData","rEditor/componentsMetaData/components/wPhotoMetaData","rEditor/componentsMetaData/components/comboBoxInputMetaData","rEditor/componentsMetaData/components/richTextBoxMetaData","rEditor/componentsMetaData/components/toggleSwitchMetaData","rEditor/componentsMetaData/components/impressMetaData","rEditor/componentsMetaData/components/masonryMetaData","rEditor/componentsMetaData/components/thumbnailsMetaData","rEditor/componentsMetaData/components/matrixGalleryMetaData","rEditor/componentsMetaData/components/paginatedGridGalleryMetaData","rEditor/componentsMetaData/components/sliderGalleryMetaData","rEditor/componentsMetaData/components/tpaWidget","rEditor/componentsMetaData/components/clipArtMetaData","rEditor/componentsMetaData/components/svgShapeMetaData","rEditor/componentsMetaData/components/vectorImageMetaData","rEditor/componentsMetaData/components/videoPlayerMetaData","rEditor/componentsMetaData/components/tagsMetaData","rEditor/componentsMetaData/components/mediaContainer","rEditor/componentsMetaData/components/backToTopButtonMetaData","rEditor/componentsMetaData/components/menuContainerMetaData","rEditor/componentsMetaData/components/menuToggleMetaData","rEditor/componentsMetaData/components/checkboxGroupMetaData","rEditor/componentsMetaData/components/googleMap","rEditor/componentsMetaData/components/refComponentMetaData"],function(e,t,o,i,n,a,r,s,l,c,p,d,u,g,m,f,h,y,b,v,S,E,P,C,T,_,I,M,A,O,R,w,D,k,x,N,L,B,F,U,G,H,V,W,z,q,j,Y,K,X,Z,Q,J,$,ee,te,oe,ie,ne,ae,re,se,le,ce,pe,de,ue,ge,me,fe,he,ye,be,ve,Se,Ee,Pe,Ce,Te,_e,Ie,Me,Ae,Oe,Re,we){"use strict";return{"wysiwyg.viewer.components.BgImageStrip":e,"wysiwyg.viewer.components.FooterContainer":t,"wysiwyg.viewer.components.HeaderContainer":o,"wysiwyg.viewer.components.ScreenWidthContainer":i,"tpa.viewer.components.StripSlideshow":a,"tpa.viewer.components.StripShowcase":n,"wixapps.integration.components.AppPart":r,"wysiwyg.common.components.rssbutton.viewer.RSSButton":s,"wysiwyg.viewer.components.tpapps.TPAGluedWidget":l,"mobile.core.components.Page":c,"wysiwyg.viewer.components.BoxSlideShow":p,"wysiwyg.viewer.components.StripContainerSlideShow":d,"wysiwyg.viewer.components.BoxSlideShowSlide":u,"wysiwyg.viewer.components.StripContainerSlideShowSlide":g,"wysiwyg.viewer.components.StateBox":m,"wysiwyg.viewer.components.StateStrip":f,"wysiwyg.viewer.components.StateBoxState":h,"wysiwyg.viewer.components.StateBoxFormState":y,"wysiwyg.viewer.components.StateStripState":b,"wysiwyg.common.components.anchor.viewer.Anchor":v,"tpa.viewer.components.Collage":S,"wysiwyg.viewer.components.WRichText":E,"wysiwyg.viewer.components.Group":P,"wysiwyg.viewer.components.StripContainer":C,"wysiwyg.viewer.components.StripColumnsContainer":T,"wysiwyg.viewer.components.tpapps.TPASection":_,"wysiwyg.viewer.components.tpapps.TPAMultiSection":_,"wysiwyg.viewer.components.Column":I,"wysiwyg.viewer.components.PopupCloseIconButton":M,"wysiwyg.viewer.components.PopupCloseTextButton":A,"wysiwyg.viewer.components.PopupContainer":O,"wysiwyg.viewer.components.MediaBox":R,"wysiwyg.viewer.components.MediaControls":w,"wysiwyg.viewer.components.MediaOverlayControls":D,"wysiwyg.viewer.components.MediaPlayer":k,"wysiwyg.viewer.components.QuickActionBarItem":x,"wysiwyg.viewer.components.QuickActionBar":N,"wysiwyg.viewer.components.mobile.TinyMenu":L,"wysiwyg.viewer.components.Repeater":B,"wysiwyg.viewer.components.Popover":F,"wysiwyg.viewer.components.SiteRegionContainer":U,"wysiwyg.viewer.components.inputs.RadioGroup":G,"wysiwyg.viewer.components.PageGroup":H,"wysiwyg.viewer.components.PagesContainer":V,"platform.components.AppWidget":W,"wysiwyg.viewer.components.inputs.Checkbox":z,"wysiwyg.viewer.components.Video":K,"wysiwyg.viewer.components.SiteButton":q,"wysiwyg.viewer.components.tpapps.TPA3DGallery":X,"wysiwyg.viewer.components.tpapps.TPA3DCarousel":Z,"tpa.viewer.components.Accordion":Q,"wysiwyg.viewer.components.SlideShowGallery":J,"wysiwyg.viewer.components.inputs.DatePicker":$,"wysiwyg.viewer.components.inputs.FileUploader":ee,"tpa.viewer.components.Freestyle":te,"wysiwyg.viewer.components.Grid":oe,"tpa.viewer.components.Honeycomb":ie,"core.components.Image":ne,"wixapps.integration.components.ImageButton":re,"wysiwyg.common.components.imagebutton.viewer.ImageButton":ae,"wysiwyg.common.components.inputs.OptionsListInput":se,"wysiwyg.viewer.components.inputs.TextInput":j,"wysiwyg.viewer.components.inputs.TextAreaInput":Y,"wysiwyg.viewer.components.inputs.RadioButton":le,"wysiwyg.viewer.components.WPhoto":ce,"wysiwyg.viewer.components.inputs.ComboBoxInput":pe,"wixui.RichTextBox":de,"wixui.ToggleSwitch":ue,"tpa.viewer.components.Impress":ge,"tpa.viewer.components.Masonry":me,"tpa.viewer.components.Thumbnails":fe,"wysiwyg.viewer.components.MatrixGallery":he,"wysiwyg.viewer.components.PaginatedGridGallery":ye,"wysiwyg.viewer.components.SliderGallery":be,"wysiwyg.viewer.components.tpapps.TPAWidget":ve,"wysiwyg.viewer.components.ClipArt":Se,"wysiwyg.viewer.components.svgshape.SvgShape":Ee,"wysiwyg.viewer.components.VectorImage":Pe,"wixui.VideoPlayer":Ce,"wixui.Tags":Te,"wysiwyg.viewer.components.MediaContainer":_e,"wysiwyg.viewer.components.BackToTopButton":Ie,"wysiwyg.viewer.components.MenuContainer":Me,"wysiwyg.viewer.components.MenuToggle":Ae,"wysiwyg.viewer.components.inputs.CheckboxGroup":Oe,"wysiwyg.viewer.components.GoogleMap":Re,"wysiwyg.viewer.components.RefComponent":we}}),define("rEditor/app/APISections/singleCompHandlers/componentsMetaData",["lodash","constants","util","stateManagement","rEditor/componentsMetaData/metaDataMap","wix-ui-santa/editorComponentsData.bundle.min","experiment"],function(l,a,n,r,s,c,e){"use strict";var o=r.editorPlugins.components.selectors,p=o.getCompType,t=o.isChildOfControllingParent,d=o.getEditorData,i=c.components,u={};for(var g in i)if(Object.prototype.hasOwnProperty.call(i,g)){var m=i[g],f=l.get(m,"metadata.metadataOverride.overrideViewerType");if(f){var h=l.get(m,"metadata.metadataOverride.editorExperimentKey");e.isOpen(h)&&(u[f]=m.metadata)}}var y=r.editorPlugins.componentMetaData.selectors,b=y.isPlatformShowFocusBox,v=y.isHorizontallyMovable,S=n.array.asArray,E={pinnable:!0,fixedNonPinned:!1,showLegacyFixedPosition:!1,duplicatable:!0,crossSiteDuplicatable:!0,controlledByParent:!1,containable:!0,canContain:!0,containableByStructure:!0,canContainByStructure:!0,focusable:!1,movable:!0,verticallyMovable:!0,horizontallyMovable:!0,resizable:!0,verticallyResizable:!0,horizontallyResizable:!0,rotatable:!0,flippable:!1,selectable:!0,multiselectable:!0,slidesContainer:!1,slideContainer:!1,showMarginsIndicator:!1,selectedBeforeDescendants:!1,disabledKnobs:[],resizeOnlyProportionally:!1,overrideProportionalResize:null,resizableWithAnchors:!0,resizableDiagonally:!0,shouldBeOverlayed:!1,allowLassoOnContainer:!1,skinParamsToIgnore:[],allowedToContainMoreChildren:!0,isDirectChildrenSelectable:!0,allowConnectToDB:!1,gfppMargins:l.constant(0),nestedBackgroundDesign:!1,customizeTranslate:!1,spotlightStageContainer:!1,selectWhenDeselectingChildren:!1,inlinePopup:!1,arrangeable:!0,a11yConfigurable:!0,dataEditOptions:a.META_DATA.DATA_EDIT_OPTIONS.DEFAULT};function P(e,t){if(e&&u[e])return l.has(u[e],t)?l.get(u[e],t):E[t];var o=["components",n.path.suffix(e),"metadata",t];if(l.has(c,o))return l.get(c,o);var i=[e,t];return l.has(s,i)?l.get(s,i):E[t]}function C(e,t,o){for(var i=arguments.length,n=Array(3<i?i-3:0),a=3;a<i;a++)n[a-3]=arguments[a];var r=P(p(o,e.dsRead),t);if(l.isFunction(r)){if(c.editorDataResolver.isEditorDataFunction(r))return d.apply(void 0,[r,e].concat([o].concat(n)));var s=l.toArray(arguments);return s.splice(1,1),r.apply(null,s)}return r}return{create:function(n){var i={getRestrictions:function(o,e){return l.reduce(e,function(e,t){return e[t]=i.is[t](o),e},{})},is:{controlledByParent:function(e){return C(n,"controlledByParent",e)||t(e,n.dsRead)},fixed:function(e){return n.dsRead.components.layout.get(e).fixedPosition},exist:function(e){return n.dsRead.components.is.exist(e)},container:function(e){return n.dsRead.components.is.container(e)},selectable:function(e){var t=o.getContainer(e,n.dsRead);return!!C(n,"isDirectChildrenSelectable",t)&&C(n,"selectable",e)},multiselectable:function(e){return C(n,"multiselectable",e)},siteSegment:function(e){var t=n.siteSegments.getRefs();return l.find(t,e)},removable:function(e){return n.dsRead.components.is.removable(e)},anchorableFrom:function(e){return n.dsRead.components.is.anchorableFrom(e)},anchorableTo:function(e){return n.dsRead.components.is.anchorableTo(e)},duplicatable:function(e,t){return C(n,"duplicatable",e,t)&&n.dsRead.components.is.duplicatable(e,t)},crossSiteDuplicatableByStructure:function(e){return n.dsRead.components.is.crossSiteDuplicatableByStructure(e)},containable:function(e,t){return C(n,"containable",e,t)&&C(n,"canContain",t,e)&&n.dsRead.components.is.containable(e,t)},containableByStructure:function(e,t){var o=P(e.componentType,"containableByStructure");return(l.isFunction(o)?o(e,t):o)&&C(n,"canContainByStructure",t,e)&&n.dsRead.components.is.containableByStructure(e,t)},styleCanBeApplied:function(e,t){return n.dsRead.components.is.styleCanBeApplied(e,t)},movable:function(e){return C(n,"movable",e)&&n.dsRead.components.is.movable(e)},verticallyMovable:function(e){return C(n,"verticallyMovable",e)&&n.dsRead.components.is.verticallyMovable(e)&&!n.components.layout.isPinned(e)},horizontallyMovable:function(e){return C(n,"horizontallyMovable",e)&&v(S(e),n.dsRead)},focusable:function(e){return C(n,"focusable",e)||b(e,n.dsRead)},fullWidth:function(e){return n.dsRead.components.is.fullWidth(e)},rotatable:function(e){return C(n,"rotatable",e)&&n.dsRead.components.is.rotatable(e)},flippable:function(e){return n.dsRead.components.is.flippable(e)},slidesContainer:function(e){return C(n,"slidesContainer",e)},exposesSlideAsInnerComponent:function(e){return C(n,"exposesSlideAsInnerComponent",e)},slideContainer:function(e){return C(n,"slideContainer",e)},hoverBox:function(e){return C(n,"hoverBox",e)},resizable:function(e){return C(n,"resizable",e)&&n.dsRead.components.is.resizable(e)},horizontallyResizable:function(e){return!n.components.layout.isHorizontallyStretchedToScreen(e)&&C(n,"horizontallyResizable",e)&&(n.dsRead.components.is.horizontallyResizable(e)||n.components.is.group(e))},verticallyResizable:function(e){return C(n,"verticallyResizable",e)&&(n.dsRead.components.is.verticallyResizable(e)||n.components.is.group(e))},proportionallyResizable:function(e){return!n.components.is.fullWidth(e)&&!n.components.layout.isPinned(e)&&!n.components.is.controlledByParent(e)&&n.components.is.horizontallyResizable(e)&&n.components.is.verticallyResizable(e)},overrideProportionalResize:function(e){return C(n,"overrideProportionalResize",e)},repeaterItem:function(e){return!!e&&o.isRepeaterItem(e,n.dsRead)},descendantOfRepeaterItem:function(e){return n.components.is.repeatedComponent(e)},resizeOnlyProportionally:function(e){return n.dsRead.components.is.resizeOnlyProportionally(e)},group:function(e){return n.dsRead.components.is.exist(e)?n.dsRead.components.is.group(e):null},groupable:function(e){return n.dsRead.components.is.groupable(e)&&!C(n,"controlledByParent",e)},topMost:function(e,t){return n.dsRead.components.is.topMost(e,t)},leftMost:function(e,t){return n.dsRead.components.is.leftMost(e,t)},groupedComponent:function(e){return n.dsRead.components.is.groupedComponent(e)},animatable:function(e,t){return n.dsRead.components.is.animatable(e,t)},allowedToContainMoreChildren:function(e){return C(n,"allowedToContainMoreChildren",e)&&n.dsRead.components.is.allowedToContainMoreChildren(e)},fixedNonPinned:function(e){return C(n,"fixedNonPinned",e)},pinnable:function(e){return C(n,"pinnable",e)&&n.components.layout.canBeFixedPosition(e)&&!n.components.is.fullWidth(e)&&!n.components.layout.isHorizontallyStretchedToScreen(e)&&!n.components.is.controlledByParent(e)&&!n.components.is.descendantOfRepeaterItem(e)&&!n.components.isShowOnSomePages(n.components.getContainer(e))},stretchable:function(e){return n.dsRead.components.layout.canBeStretched(e)&&!n.components.layout.isPinned(e)&&!n.components.isShowOnSomePages(e)},showLegacyFixedPosition:function(e){return C(n,"showLegacyFixedPosition",e)},alignable:function(e){return n.dsRead.components.is.alignable(e)&&n.components.is.movable(e)},draggable:function(e){return n.components.is.movable(e)&&!n.components.layout.isPinned(e)&&!n.components.is.page(e)},allowLassoOnContainer:function(e){return C(n,"allowLassoOnContainer",e)},showMarginsIndicator:function(e){return C(n,"showMarginsIndicator",e)},allowConnectToDB:function(e){return C(n,"allowConnectToDB",e)},selectedBeforeDescendants:function(e,t){return C(n,"selectedBeforeDescendants",e,t)},disabledKnobs:function(e){return C(n,"disabledKnobs",e)},getDataEditOptions:function(e){return l.get(n.platform.controllers.getConnectedComponentStageData(e),["behavior","dataEditOptions"],E.dataEditOptions)},shouldBeOverlayed:function(e){return C(n,"shouldBeOverlayed",e)},getOverlay:function(e,t){return C(n,"getOverlay",e,t)},getOverlayProperties:function(e){return C(n,"getOverlayProperties",e)},gridLinesVisible:function(e){return C(n,"gridLinesVisible",e)},resizableWithAnchors:function(e){return C(n,"resizableWithAnchors",e)},resizableDiagonally:function(e){return C(n,"resizableDiagonally",e)},skinParamsToIgnore:function(e){return C(n,"skinParamsToIgnore",e)},gfppMargins:function(e){var t=n.components.properties.get(e),o=n.components.data.get(e),i=n.documentMode.getComponentPreviewState()[e[0].id];return C(n,"gfppMargins",e,{compData:o,compProps:t,previewState:i})},nestedBackgroundDesign:function(e){return C(n,"nestedBackgroundDesign",e)},customizeTranslate:function(e){return C(n,"customizeTranslate",e)},canReparent:function(e){return n.dsRead.components.is.canReparent(e)},spotlightStageContainer:function(e){return C(n,"spotlightStageContainer",e)},selectWhenDeselectingChildren:function(e){return C(n,"selectWhenDeselectingChildren",e)},inlinePopup:function(e){return C(n,"inlinePopup",e)},arrangeable:function(e){return C(n,"arrangeable",e)},a11yConfigurable:function(e){return C(n,"a11yConfigurable",e)&&n.dsRead.components.getA11ySchema(e[0])},overridesWhenReferred:function(e){return C(n,"overridesWhenReferred",e)}}};return i.is=l.mapValues(i.is,function(t,o){return function(){return l.get((e=arguments.length<=0?void 0:arguments[0],r.editorPlugins.componentsStore.selectors.getComponentStoreData(n.store.getState(),{comp:e,key:a.COMPONENTS_STORE_KEYS.META_DATA_OVERRIDES})),o,t.apply(void 0,arguments));var e}}),i}}}),define("rEditor/app/APISections/componentsFacade/componentsMetaDataFacade",["lodash","util","rEditor/app/APISections/singleCompHandlers/componentsMetaData"],function(a,e,t){"use strict";var o=e.array,r=o.validateForAll,s=o.checkSingleAndValidate,l=o.validateForSome,c=o.applyForFirstAndThrowIfMulti,p=o.asArray;return{create:function(i){var n=t.create(i);return{controlledByParent:function(e){return!a.isEmpty(e)&&r(n.is.controlledByParent,e)},fixed:function(e){return!a.isEmpty(e)&&r(n.is.fixed,e)},exist:function(e){return!a.isEmpty(e)&&r(n.is.exist,e)},container:function(e){return s(n.is.container,e)},selectable:function(e){var t=p(e);return 1<t.length||n.is.selectable(a.head(t))},multiselectable:function(e){return!a.isEmpty(e)&&r(n.is.multiselectable,e)},siteSegment:function(e){return s(n.is.siteSegment,e)},siblings:function(e){if(a.includes(e,void 0))return!1;var t=e.pop(),o=i.components.getSiblings(t);return a.every(e,function(e){return a.find(o,e)})},removable:function(e){return r(n.is.removable,e)},duplicatable:function(e,t){return!a.isEmpty(e)&&r(function(e){return n.is.duplicatable(e,t)},e)},crossSiteDuplicatableByStructure:function(e){return!a.isEmpty(e)&&r(function(e){return n.is.crossSiteDuplicatableByStructure(e)},e)},allowConnectToDB:function(e){return s(n.is.allowConnectToDB,e)},showMarginsIndicator:function(e){return s(n.is.showMarginsIndicator,e)},showLegacyFixedPosition:function(e){return s(n.is.showLegacyFixedPosition,e)},containable:function(e,t){return!a.isEmpty(e)&&r(function(e){return n.is.containable(e,t)},e)},containableByStructure:function(e,t){return r(function(e){return n.is.containableByStructure(e,t)},e)},styleCanBeApplied:function(e){return s(n.is.styleCanBeApplied,e)},movable:function(e){return!a.isEmpty(e)&&r(n.is.movable,e)},verticallyMovable:function(e){return!a.isEmpty(e)&&r(n.is.verticallyMovable,e)},horizontallyMovable:function(e){return!a.isEmpty(e)&&r(n.is.horizontallyMovable,e)},fullWidth:function(e){return r(n.is.fullWidth,e)},resizable:function(e){return s(n.is.resizable,e)},horizontallyResizable:function(e){return r(n.is.horizontallyResizable,e)},verticallyResizable:function(e){return r(n.is.verticallyResizable,e)},proportionallyResizable:function(e){var t=p(e);return a.every(t,n.is.proportionallyResizable.bind(i))},repeaterItem:function(e){return s(n.is.repeaterItem,e)},descendantOfRepeaterItem:function(e){return l(n.is.descendantOfRepeaterItem,e)},resizeOnlyProportionally:function(e){return r(n.is.resizeOnlyProportionally,e)},overrideProportionalResize:function(e){var t=p(e);return 1!==t.length?null:n.is.overrideProportionalResize(a.head(t))},group:function(e){return s(n.is.group,e)},groupable:function(e){return r(n.is.groupable,e)},page:function(e){return s(function(e){return i.pages.isPageExist(e.id)},e)},topMost:function(e,t){return l(function(e){return n.is.topMost(e,t)},e)},leftMost:function(e,t){return l(function(e){return n.is.leftMost(e,t)},e)},groupedComponent:function(e){return r(n.is.groupedComponent,e)},rotatable:function(e){return s(n.is.rotatable,e)},flippable:function(e){return s(n.is.flippable,e)},animatable:function(e,t){return r(function(e){return n.is.animatable(e,t)},e)},pinnable:function(e){return s(n.is.pinnable,e)},stretchable:function(e){return s(n.is.stretchable,e)},focusable:function(e){return s(n.is.focusable,e)},slidesContainer:function(e){return s(n.is.slidesContainer,e)},slideContainer:function(e){return s(n.is.slideContainer,e)},hoverBox:function(e){return s(n.is.hoverBox,e)},alignable:function(e){return r(n.is.alignable,e)},draggable:function(e){return r(n.is.draggable,e)},allowLassoOnContainer:function(e){return s(n.is.allowLassoOnContainer,e)},anchorableFrom:function(e){var t=l(n.is.anchorableFrom,e),o=p(e);return 1<o.length?t&&i.components.layout.containsSiblingsOnly(o):t},anchorableTo:function(e){var t=l(n.is.anchorableTo,e),o=p(e);return 1<o.length?t&&i.components.layout.containsSiblingsOnly(o):t},potentialContainerForScreenWidthComp:function(e){return s(i.dsRead.components.is.potentialContainerForScreenWidthComp,e)},selectedBeforeDescendants:function(e,t){return s(function(e){return n.is.selectedBeforeDescendants(e,t)},e)},disabledKnobs:function(e){var t=p(e);return 1===t.length?n.is.disabledKnobs(a.head(t)):a.filter(t,function(e){return!a.isEmpty(n.is.disabledKnobs(e))}).length?a.values(i.dsRead.components.layout.RESIZE_SIDES):[]},shouldBeOverlayed:function(e){return n.is.shouldBeOverlayed(e)},getOverlay:function(e){return n.is.getOverlay(e)},getOverlayProperties:function(e){return n.is.getOverlayProperties(e)},getDataEditOptions:function(e){return s(n.is.getDataEditOptions,e)},gridLinesVisible:function(e){return n.is.gridLinesVisible(e)},resizableWithAnchors:function(e){return n.is.resizableWithAnchors(e)},resizableDiagonally:function(e){return n.is.resizableDiagonally(e)},skinParamsToIgnore:function(e){return c("skinParamsToIgnore",n.is.skinParamsToIgnore,e)},allowedToContainMoreChildren:function(e){return n.is.allowedToContainMoreChildren.call(i,e)},gfppMargins:function(e){return n.is.gfppMargins(e)},nestedBackgroundDesign:function(e){return n.is.nestedBackgroundDesign(e)},customizeTranslate:function(e){return n.is.customizeTranslate(e)},canReparent:function(e){return r(n.is.canReparent,e)},spotlightStageContainer:function(e){return!a.isEmpty(e)&&1===a(e).castArray().get("length")&&n.is.spotlightStageContainer(e)},inlinePopup:function(e){return!a.isEmpty(e)&&n.is.inlinePopup(e)},selectWhenDeselectingChildren:function(e){return n.is.selectWhenDeselectingChildren(e)},fixedNonPinned:function(e){return l(n.is.fixedNonPinned,e)},exposesSlideAsInnerComponent:function(e){return s(n.is.exposesSlideAsInnerComponent,e)},arrangeable:function(e){return n.is.arrangeable(e)},a11yConfigurable:function(e){return n.is.a11yConfigurable(e)},overridesWhenReferred:function(e){return n.is.overridesWhenReferred(e)}}}}}),define("rEditor/app/serializedComponentPlugins",["lodash"],function(r){"use strict";function s(t,e,o){var i,n,a=(i=o[t],n=e.componentType,[].concat(i[n]||[],i["*"]||[]));return"Container"===(e=r.reduce(a,function(e,t){return t(o,e)},e)).type&&(e.components=r.map(e.components,function(e){return s(t,e,o)})),e}return{runCopyPluginOnSerializedComponent:function(e,t,o){var i=e.componentType;return o.copyComponentPlugins[i]&&(e=o.copyComponentPlugins[i](t,e)),e},runPastePluginOnSerializedComponent:s.bind(null,"pasteComponentPlugins"),runSerializeComponentPlugin:s.bind(null,"serializeComponentPlugins")}}),define("rEditor/app/APISections/galleriesData/galleriesData",[],function(){"use strict";return{map:{"tpa.viewer.components.Masonry":{"wysiwyg.viewer.skins.TPAMasonrySkin":"add_preset_Galleries_Grid_Galleries_1"},"wysiwyg.viewer.components.MatrixGallery":[{"wysiwyg.viewer.skins.gallerymatrix.TextBottomCustomHeightSkin":"add_preset_Galleries_Grid_Galleries_4"},{"wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryCircleSkin":"add_preset_Galleries_Grid_Galleries_6"},{"wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryLiftedShadow":"add_preset_Galleries_Grid_Galleries_20"},{"skins.viewer.gallerymatrix.MatrixGalleryIronSkin":"add_preset_Galleries_Grid_Galleries_21"},{"skins.viewer.gallerymatrix.MatrixGalleryScotchTapeSkin":"add_preset_Galleries_Grid_Galleries_22"},{"wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryTextSlideUpSkin":"add_preset_Galleries_Grid_Galleries_10"},{"wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryTransparentSkin":"add_preset_Galleries_Grid_Galleries_12"}],"tpa.viewer.components.StripSlideshow":{"wysiwyg.viewer.skins.TPAStripSlideshowSkin":"add_preset_Galleries_Full_Width_Galleries_1"},"wysiwyg.viewer.components.PaginatedGridGallery":[{"wysiwyg.viewer.skins.paginatedgrid.PaginatedGridArrowsOutside":"add_preset_Galleries_Grid_Galleries_7"},{"wysiwyg.viewer.skins.paginatedgrid.PaginatedGridTextBottom":"add_preset_Galleries_Grid_Galleries_8"},{"wysiwyg.viewer.skins.paginatedgrid.PaginatedGridDefaultSkin":"add_preset_Galleries_Grid_Galleries_15"},{"wysiwyg.viewer.skins.paginatedgrid.PaginatedGridRibbonArrows":"add_preset_Galleries_Grid_Galleries_16"},{"wysiwyg.viewer.skins.paginatedgrid.PaginatedGridOverlay":"add_preset_Galleries_Grid_Galleries_19"}],"tpa.viewer.components.StripShowcase":{"wysiwyg.viewer.skins.TPAStripShowcaseSkin":"add_preset_Galleries_Full_Width_Galleries_2"},"wysiwyg.viewer.components.SlideShowGallery":[{"skins.viewer.gallery.SlideShowCleanAndSimple":"add_preset_Galleries_Slider_Galleries_2"},{"wysiwyg.viewer.skins.gallery.SlideShowTextBottom":"add_preset_Galleries_Slider_Galleries_4"},{"wysiwyg.viewer.skins.gallery.SlideShowTextRight":"add_preset_Galleries_Slider_Galleries_5"},{"wysiwyg.viewer.skins.gallery.SlideShowPolaroid":"add_preset_Galleries_Slider_Galleries_8"},{"wysiwyg.viewer.skins.gallery.SlideShowTextOverlay":"add_preset_Galleries_Slider_Galleries_13"},{"wysiwyg.viewer.skins.gallery.SlideShowGalleryLiftedShadowSkin":"add_preset_Galleries_Slider_Galleries_14"},{"skins.viewer.gallery.SlideShowIron":"add_preset_Galleries_Slider_Galleries_17"}],"tpa.viewer.components.Accordion":{"wysiwyg.viewer.skins.TPAAccordionSkin":"add_preset_Galleries_Slider_Galleries_7"},"tpa.viewer.components.Impress":{"wysiwyg.viewer.skins.TPAImpressSkin":"add_preset_Galleries_Slider_Galleries_9"},"wysiwyg.viewer.components.SliderGallery":[{"wysiwyg.viewer.skins.galleryslider.SliderGalleryDefaultSkin":"add_preset_Galleries_Slider_Galleries_10"},{"wysiwyg.viewer.skins.galleryslider.SliderGalleryCircleSkin":"add_preset_Galleries_Slider_Galleries_6"},{"wysiwyg.viewer.skins.galleryslider.SliderGalleryScotchTapeSkin":"add_preset_Galleries_Slider_Galleries_15"},{"wysiwyg.viewer.skins.galleryslider.SliderGalleryIronSkin":"add_preset_Galleries_Slider_Galleries_16"}],"wysiwyg.viewer.components.tpapps.TPA3DCarousel":{"wysiwyg.viewer.skins.TPA3DCarouselSkin":"add_preset_Galleries_3D_Galleries_1"},"wysiwyg.viewer.components.tpapps.TPA3DGallery":{"wysiwyg.viewer.skins.TPA3DGallerySkin":"add_preset_Galleries_3D_Galleries_2"},"tpa.viewer.components.Freestyle":{"wysiwyg.viewer.skins.TPAFreestyleSkin":"add_preset_Galleries_3D_Galleries_3"}}}}),define("rEditor/app/APISections/componentsWrapper",["lodash","core","util","coreUtilsLib","platformEvents","rEditor/utils/removeUtil","rEditor/app/APISections/componentsFacade/layoutWrapper","rEditor/app/APISections/componentsFacade/arrangementFacade","rEditor/app/APISections/componentsFacade/behaviorsFacade","rEditor/app/APISections/componentsFacade/componentsMetaDataFacade","rEditor/app/serializedComponentPlugins","rEditor/app/APISections/galleriesData/galleriesData","stateManagement","coreBi","constants","experiment"],function(T,p,f,d,u,h,e,l,y,b,v,S,_,I,M,A){"use strict";var t=f.array,O=t.applyForAll,R=t.applyForFirstAndThrowIfMulti,w=t.asArray,D=t.isMultiselect,k=t.validateForAll,x=_.editorPlugins.selection.selectors.getFocusedContainer,o=_.editorPlugins.selection.actions,N=o.setFocusedContainer,L=o.setAppContainer,B=_.editorPlugins.components.actions.onSelectedCompPropertiesChange,F=_.editorPlugins.components.selectors,i=_.editorPlugins.components.selectors,U=i.getProperties,G=i.getData,H=i.getSkin,V=i.getDesign;return{create:function(E){var s={DEFAULT:!0,HOVER:!0};function o(e){if(!D(e))return!0;var t=T.head(e),o=T.tail(e),n=E.dsRead.components.getPage(t);return T.every(o,function(e){return t=e,o=n,i=E.dsRead.components.getPage(t),T.isEqual(i,o);var t,o,i})}function c(o,e){return T.every(e,function(e,t){return T.isEqual(o[t],e)})}function i(e,t,o){var i=E.selection.getSelectedComponents(),n=E.store.getState(),a=x(n);T.isEmpty(i)||E.dsRead.components.modes.isComponentDisplayedInModes(T.head(i),[t])||E.selection.selectComponentByCompRef(a),t?E.dsActions.components.modes.activateComponentMode(e,t):o&&E.dsActions.components.modes.deactivateComponentMode(e,o)}function n(e){var i=w(e),n=T.clone(i);return T.forEach(i,function(t,e){var o=i.slice(e+1);T.forEach(o,function(e){if(E.components.isDescendantOfComp(t,e))return T.remove(n,t),!1;E.components.isDescendantOfComp(e,t)&&T.remove(n,e)})}),n}function P(e){return!T.isEmpty(E.components.modes.getModes(e))}function g(e){var t=w(e);return 1===t.length||E.components.layout.containsSiblingsOnly(t)?E.dsRead.components.getContainer(t[0]):null}function m(e,t){return k(function(e){return E.dsRead.components.isDescendantOfComp(e,t)},e)}function t(e,t){return E.components.is.alignable(e)&&E.dsRead.components.alignment.canAlign(e,t)}function a(e,t){return E.dsRead.components.multiComponents.canDistribute(e,t)}function r(e,t){return E.dsRead.components.multiComponents.canMatchSize(e,t)}function C(e){O(function(e){var t,o,i,n,a=E.dsRead.components.modes.getFirstAncestorWithActiveModes(e);if(a&&(t=a,o=E.dsRead.components.modes.getModes(t),i=E.dsRead.components.modes.getComponentActiveModeIds(t),n=T.filter(o,function(e){return T.has(i,e.modeId)}),T.every(n,function(e){return T.get(s,e.type,!1)}))){var r={defaultInAnimtaion:{action:"modeIn",name:"FadeIn",delay:0,duration:.35},defaultOutAnimtaion:{action:"modeOut",name:"FadeOut",delay:0,duration:.35}};E.components.is.animatable(e,r.defaultInAnimtaion.action)&&(E.dsActions.components.behaviors.update(e,r.defaultInAnimtaion),E.dsActions.components.behaviors.update(e,r.defaultOutAnimtaion))}})(e)}return{getAllComponents:function(e,t){return F.filterVisibleComponents(E.dsRead.components.getAllComponents(e,t),E.dsRead)},getAncestorRepeaterItem:function(e){if(!E.components.is.repeatedComponent(T.isArray(e)?T.head(e):e))return null;var t=E.dsRead.components.getAncestors(T.isArray(e)?T.head(e):e);return T.find(t,function(e){return E.components.is.repeaterItem(e)})},get:{byXYRelativeToStructure:function(e,t,o,i){return F.filterVisibleComponents(E.dsRead.components.get.byXYRelativeToStructure(e,t,o,i),E.dsRead)},byXYRelativeToScreen:function(e,t,o,i){return F.getComponentsByXYRelativeToScreen(e,t,o,i,E.dsRead)},byType:function(e,t){return F.getComponentsByType(e,t,E.dsRead)}},canBeMasterChild:function(e,t){var o=w(e);if(1<o.length)return!1;var i=T.head(o);return t?E.dsRead.layouters.canBeMasterChild(i,t):E.dsRead.layouters.canBeMasterChild(i,"wysiwyg.viewer.components.BoxSlideShow")||E.dsRead.layouters.canBeMasterChild(i,"wysiwyg.viewer.components.StripContainerSlideShow")},onPreviewReady:function(){var e=p.utils.componentPreviewReadyPlugins;T.forEach(e,function(e){e(E)})},getPage:function(e){var t=w(e);return 1===t.length||o(t)?E.dsRead.components.getPage(T.head(t)):null},asArray:w,getComponentsWhichDontHaveAncestorsInTheArray:n,reset:function(){E.clipboard.removeItem()},isShowOnAllPages:function(e){return k(E.dsRead.components.isShowOnAllPages,e)},isShowOnSomePages:function(e){return k(E.dsRead.components.isShowOnSomePages,e)},hasRuntimeData:function(e){return T.some(T.castArray(e),function(e){return T.get(E.dsRead.components.data.getRuntime(e),"id")!==T.get(E.dsRead.components.data.get(e),"id")})},serialize:function(e,t,o,i,n,a,r){var s=E.dsRead.components.serialize(e,t,o,i,n,a,r);if(s)return v.runSerializeComponentPlugin(s,E)},cut:function(e){var t=E.selection.getSelectedComponents();t=n(t),e=n(e),T.isEqual(t,e)&&E.selection.deselectComponents(),E.isMobileEditor()?E.openCantCopyPastePanel():E.components.is.duplicatable(e)&&(E.copyPaste.copy(e,!0),T.forEach(e,function(e){h.cutComponent(E.dsRead,E.dsActions,e,E.cutComponentPlugins)}))},add:function(e,t,o,i,n,a){a=a||{},E.mouseActions.turnOffMouseEvents();var r=p.utils.addUtil.addComponent(E,E.dsActions.components.add,e,t,o,i,n,a.optionalIndex);if(E.dsActions.platform.notifyAppsOnCustomEvent(u.factory.componentAddedToStage({compRef:r,componentType:t.componentType})),E.utils.isSameRef(e,E.dsRead.siteSegments.getHeader())&&!1!==a.showAddToHeaderPanel&&E.panelHelpers.openDragToHeaderPanel(),f.keyboardShortcuts.isPressed.command()?E.bi.event(I.events.shortcuts.keep_add_panel_open_add_comp):E.panelManager.closePanelByName("addPanelInfra.addPanel"),P(e)&&r.id){var s=E.components.modes.getComponentActiveModeIds(e);E.components.modes.showComponentOnlyInModesCombination(r,T.keys(s)),E.tabIndicationState.activateAddAnimation(!0),C(r)}return r},addAndAdjustLayout:function(e,t,o,i){return p.utils.addUtil.addComponent(E,E.dsActions.components.addAndAdjustLayout,e,t,o,i)},remove:function(e,t){var o=E.store.getState(),i=x(o),n=w(e);if(!E.components.is.removable(n))return T.forEach(n,function(e){var t=E.components.getType(e);E.cannotRemovePlugins[t]&&E.cannotRemovePlugins[t](e)}),Promise.resolve(!1);var a,r,s=E.selection.getSelectedComponents(),l=f.appStudioUtils.isAppStudio()&&E.isMobileEditor()&&!A.isOpen("se_hiddenElementsInBuilder");if(i&&!T.find(n,i))E.selection.selectComponentByCompRef(i);else if(!(t&&t.isReplacingComp||l)){var c=n.concat((a=n,r=s,T.filter(r,function(t){return T.some(a,function(e){return m(t,e)})})));E.selection.deselectComponents(c)}C(e);var p=T.noop,d=g(e);E.components.is.controlledByParent(e)&&T.isEqual(d,s&&s[0])&&(p=function(){E.components.is.exist(d)?(E.panelManager.closeAllPanels(),E.selection.selectComponentByCompRef(d)):E.selection.deselectComponents()});var u=h.removeComponent(E,E.dsRead,E.dsActions,E.removePlugins,n,t).then(function(){return p(),!0});return P(d)&&E.dsActions.waitForChangesApplied(function(){E.tabIndicationState.activateDeleteAnimation()}),u},setContainer:function(e,c,p){var t,o,i,n,a,r=E.components.isShowOnAllPages(e),s=w(e),l=T.map(s,E.components.getPage),d=T.map(s,E.components.modes.getFirstAncestorWithActiveModes),u=(t=s,o=c,i=E.components.isShowOnAllPages(t),n=E.components.isShowOnAllPages(o),a=!i&&n,T.reduce(t,function(e,t){return"platform.components.AppController"===E.dsRead.components.getType(t)?a?e.unshift(t):e.push(t):a?e.push(t):e.unshift(t),e},[])),g=E.components.getContainer(s);E.editorEventRegistry.dispatch(E.editorEventRegistry.constants.events.SET_CONTAINER_BEFORE,E,u,c);var m,f,h,y,b=T.map(u,function(e){return E.dsActions.components.setContainer(e,c)}),v=(m=b,f=l,T.zipWith(m,f,function(e,t){return{ref:e,root:t}})),S=(h=b,y=d,T.zipWith(h,y,function(e,t){return{ref:e,ancestor:t}}));return!r&&E.utils.isSameRef(c,E.dsRead.siteSegments.getHeader())&&E.panelHelpers.openDragToHeaderPanel(),E.dsActions.waitForChangesApplied(function(){E.pluginService.getPlugin("setContainer","*")(c,v,S,E.components,E.behaviors),p||E.selection.selectComponentByCompRef(b);var e=E.selection.getParentToFocus(b);E.store.dispatch(N(e));var t,o,i,n,a,r,s,l=D(b)?null:F.getFirstAppContainerIfNeeded(T.head(b),e,E.dsRead);E.store.dispatch(L(l)),E.utils.isSameRef(e,c)&&P(c)&&E.tabIndicationState.activateAddAnimation(!0),t=b,o=c,i=g,n=E.components.getType(i),a=E.components.is.repeatedComponent(i),r=E.components.getType(o),s=E.components.is.repeatedComponent(o),T.forEach(t,function(e){var t=E.components.getType(e);E.bi.event(I.events.stage.ATTACH_TO,{origin:"stage",component_type:t,source_component:n,target_component:r,is_target_repeated:s,is_source_repeated:a})}),C(b),E.components.is.group(g)&&1===E.components.getChildren(g).length&&E.components.ungroup(g)}),1<b.length?b:T.head(b)},reparentComponentToPage:function(e,t){var o=w(e),i=T.map(o,function(e){return E.dsActions.components.reparentComponentToPage(e,t)});return 1<o.length?i:i[0]},getType:function(e){return _.editorPlugins.components.selectors.getCompType(e,E.dsRead)},getSiblings:function(e){var t=w(e);if(1===t.length)return E.dsRead.components.getSiblings(t[0]);if(1<t.length){if(!E.components.layout.containsSiblingsOnly(t))throw new Error("Cannot obtain siblings of the given components since they are not siblings");var o=E.dsRead.components.getSiblings(t[0]);return T.reject(o,function(e){return T.some(t,{id:e.id})})}},getChildren:function(e,t){var o=w(e);return 1<o.length?[]:E.dsRead.components.getChildren(o[0],t)},getDisplayName:function(e){var t=E.dsRead.components.getType(e),o=E.dsRead.components.getDefinition(t);if(T.get(o,"labelDisplayName"))return f.translate(o.labelDisplayName);if(T.has(S.map,t)){var i=H(e,E.dsRead);if(T.some(S.map[t],i))return f.translate(T.find(S.map[t],i)[i]);if(T.has(S.map[t],i))return f.translate(S.map[t][i])}return F.getPlatformDisplayName(e,E.dsRead)||(E.compNamePlugins[t]?E.compNamePlugins[t](e):f.translate("component_label_"+t.split(".").pop()))},getNickname:function(e){return F.getNickname(e,E.dsRead)},ungroup:function(e){var t=w(e);E.components.is.exist(t[0])&&(E.dsActions.components.ungroup(t[0]),E.history.add("ungroup"))},getIconInfo:function(e,t){var o=E.dsRead.components.getType(e);return E.compIconPlugins[o]?E.compIconPlugins[o](e):f.compIcon.getCompIconInfo(e,o,t,E)},getContainer:g,moveToFooter:function(e){var t=T.negate(E.components.is.controlledByParent),o=t(e)?e:E.utils.findAncestorMatchesCondition(e,t),i=E.components.layout.getRelativeToStructure(o),n=E.dsRead.siteSegments.getFooter(),a=E.components.layout.get(n),r=E.components.setContainer(o,n);E.components.layout.update(r,{y:i.y-i.bounding.y+15}),a.height<i.bounding.height+15&&E.components.layout.update(n,{height:i.bounding.height+30})},isDescendantOfComp:m,isAscendantOfComp:function(e,t){return T.some(e,function(e){return E.components.isDescendantOfComp(t,e)})},getDefaultBiParams:function(e){var t=w(e);return{componentType:E.components.getType(e),component_id:t[0].id}},areComponentsOfSamePage:o,flip:function(e,t){if(E.components.is.flippable(e)){var o=T.get(E.components.layout.get(e),"rotationInDegrees",0),i=T.get(E.components.properties.get(e),"flip","none"),n=void 0;switch(i){case"x":case"y":n=i!==t?"xy":"none";break;case"xy":n={x:"y",y:"x"}[t];break;default:n=t}E.components.layout.update(e,{rotationInDegrees:360-o},!0),E.components.properties.update(e,{flip:n})}},data:{update:function(e,t,o){return d.wSpy.log("editorUpdateData",["updateData"].concat(Array.prototype.slice.call(arguments))),R("updateData",function(e){return function(e,t,o){var i=E.components.data.get(e);t.type=t.type||T.get(i,"type"),t=p.utils.updateDataUtil.fixData(t);var n=!i||!c(i,t);d.wSpy.log("editorUpdateData",["updateSingleCompData",n,i,t].concat(Array.prototype.slice.call(arguments))),n&&(E.dsActions.components.data.update(e,t),o||E.history.debouncedAdd("comp data changed"),E.dsActions.platform.notifyAppsOnCustomEvent(u.factory.componentDataChanged({compRef:e})))}(e,t,o)},e)},get:function(e){return G(e,E.dsRead)},remove:function(e,t){R("removeData",E.dsActions.components.data.remove,e),t||E.history.add("comp data removed")}},design:{update:function(e,t,o,i){return d.wSpy.log("editorUpdateDesign",["updateDesign"].concat(Array.prototype.slice.call(arguments))),O(function(e){return function(e,t,o,i){t.type=t.type||E.components.design.get(e).type,t=p.utils.updateDataUtil.fixData(t);var n=E.components.design.get(e);(!n||!c(n,t))&&(E.dsActions.components.design.update(e,t,o),i||E.history.debouncedAdd("comp design changed"),E.pluginService.getPlugin("designDataChange","*")(E,e,t,o),E.dsActions.platform.notifyAppsOnCustomEvent(u.factory.componentDesignChanged({compRef:e})))}(e,t,o,i)},e)},get:function(e){return V(e,E.dsRead)},remove:function(e,t){R("removeDesign",E.dsActions.components.design.remove,e),t||E.history.add("comp design removed")}},properties:{update:function(e,s,l){return d.wSpy.log("editorUpdateProperties",["updateProperties"].concat(Array.prototype.slice.call(arguments))),R("updateProperties",function(e){return t=e,o=s,i=l,n=E.dsRead.components.properties.get(t),a=!n||!c(n,o),r=E.dsRead.components.properties.mobile.isForked(t),void(a&&(o.type=T.get(o,"type")||T.get(n,"type"),o=p.utils.updatePropertiesUtil.fixProperties(o,t,E.dsRead,E.dsActions,E.isMobileEditor()),E.isMobileEditor()&&n&&!r&&E.dsActions.components.properties.mobile.fork(t),E.dsActions.components.properties.update(t,o),E.dsActions.platform.notifyAppsOnCustomEvent(u.factory.componentPropsChanged({compRef:t})),i||E.history.debouncedAdd("comp properties changed"),E.store.dispatch(B(t,o))));var t,o,i,n,a,r},e)},get:function(e){return U(e,E.dsRead)}},alignment:{align:function(e,t){var o=w(e);1<o.length?E.dsActions.components.alignment.alignComponents(o,t):E.dsActions.components.alignment.alignInContainer(T.head(o),t),E.history.add("component - align - "+t)},canAlign:t,canAlignAllDirections:function(e){return e&&T.every(M.COMP_ALIGNMENT_OPTIONS,T.partial(t,e))}},multiComponents:{distribute:function(e,t){var o=w(e);1<o.length&&E.dsActions.components.multiComponents.distribute(o,t),E.history.add("component - distribute - "+t)},matchSize:function(e,t){var o=w(e);1<o.length&&E.dsActions.components.multiComponents.matchSize(o,t),E.history.add("component - matchSize - "+t)},canDistribute:a,canDistributeAllDirections:function(e){return e&&T.every(M.COMP_ALIGNMENT_OPTIONS,T.partial(a,e))},canMatchSize:r,canMatchAllSizes:function(e){return e&&T.every(M.COMP_MATCH_SIZE_OPTIONS,T.partial(r,e))}},layout:e.create(E),style:{get:function(e){var t=w(e);if(D(t))throw new Error("components.style.get isn't supported for multi select");return E.dsRead.components.style.get(t[0])},update:function(e,t,o){var i=w(e);if(D(i))throw new Error("components.style.update isn't supported for multi select");var n=E.dsActions.components.style.update(i[0],t);return E.dsActions.platform.notifyAppsOnCustomEvent(u.factory.componentStyleChanged({compRef:i[0]})),o||E.history.debouncedAdd("Update component style"),n},fork:function(e,t){var o=w(e);if(D(o))throw new Error("components.style.forkStyle isn't supported for multi select");return E.dsActions.components.style.fork(o[0],t)}},arrangement:l.create(E),getRestrictions:function(e,t){var o=w(e);return T.reduce(t,function(e,t){return e[t]=E.components.is[t](o),e},{})},is:b.create(E),behaviors:y.create(E),code:{setNickname:function(e,t){E.dsActions.components.code.setNickname(e,t),E.history.debouncedAdd("comp nick name changed")}},canToggleShowOnAllPages:function(e){return e&&function(e){e=w(e);var t=E.dsRead.siteSegments.getSiteStructure(),o=E.components.is.containable(e,t)&&!T.some(e,E.components.is.controlledByParent),i=T.some(e,E.dsRead.components.is.groupedComponent),n=E.components.is.descendantOfRepeaterItem(e);return!E.isCurrentPageLandingPage()&&o&&!i&&!E.dsRead.pages.popupPages.isPopupOpened()&&!n&&!T.some(e,E.components.isShowOnSomePages)}(e)&&(t=e,o=E.dsRead.pages.getFocusedPage(),E.components.is.containable(t,o)&&!E.components.isDescendantOfComp(t,E.dsRead.siteSegments.getFooter()));var t,o},shouldDisableShowOnAllPages:function(e){return!(!e||!E.components.isShowOnAllPages(e))&&(E.components.isDescendantOfFrozen(e,E.dsRead.siteSegments.getHeader())||E.components.isDescendantOfFrozen(e,E.dsRead.siteSegments.getFooter())||function(e){if("masterPage"!==E.components.getPage(e).id)return!1;var t=E.dsRead.siteSegments.getSiteStructure(),o=E.utils.findAncestorMatchesCondition(e,function(e){return E.utils.isSameRef(t,E.components.getContainer(e))}),i=E.dsRead.siteSegments.getPagesContainer(),n=E.components.getChildren(t),a=T.findIndex(n,function(e){return E.utils.isSameRef(e,o)});return T.findIndex(n,function(e){return E.utils.isSameRef(e,i)})<a}(e))},isDescendantOfFrozen:function(e,t){return E.components.isDescendantOfComp(e,t)&&E.components.layout.isFixedPosition(t)},setShowOnAllPages:function(e,t){var o=void 0;return e=n(e),o=t?E.dsRead.siteSegments.getSiteStructure():E.dsRead.pages.getReference(E.dsRead.pages.getPrimaryPageId()),E.components.setContainer(e,o)},toggleShowOnAllPages:function(e){var t=E.selection.getSelectedComponents(),o=!E.components.isShowOnAllPages(e),i=E.components.setShowOnAllPages(e,o);return t===e&&E.selection.selectComponentByCompRef(i),E.history.add(o?"Show component on all pages":"Show component on current page"),o},modes:{getModes:function(e){return E.dsRead.components.modes.getModes(e)},activateComponentMode:function(e,t){i(e,t),E.panelManager.closePanelByName("compPanels.dynamicPanels.applyPanel")},deactivateComponentMode:function(e,t){i(e,null,t),E.panelManager.closePanelByName("compPanels.dynamicPanels.applyPanel")},applyCurrentToAllModes:function(e){T.isEmpty(e)||(O(E.dsActions.components.modes.applyCurrentToAllModes)(e),E.dsActions.waitForChangesApplied(function(){E.tabIndicationState.activateApplyAnimation(!1)}),E.history.add("comp applyCurrentToAllModes"))},applyComponentToMode:function(e,t){E.dsActions.components.modes.applyComponentToMode(d.objectUtils.cloneDeep(e),t)},isCompDefaultModeActive:function(e){var t=E.dsRead.components.modes.getTypes().DEFAULT,o=T.head(E.dsRead.components.modes.getModesByType(e,t));if(o){var i=E.dsRead.components.modes.getComponentActiveModeIds(e);return T.includes(T.keys(i),o.modeId)}return!1},addDefaultSingleModeAnimations:C,getFirstAncestorOrSelfWithModeDefinitions:function(e){for(var t=e;t&&!E.components.modes.getModes(t);)t=E.components.getContainer(t);return t},areComponentsOfSameModefulContainer:function(e){var t=w(e);if(t.length<=1)return!0;var o=T.map(t,E.components.modes.getFirstAncestorWithActiveModes);return T.every(o,T.partial(T.isEqual,o[0]))}}}}}}),define("rEditor/app/APISections/tabIndicationState",[],function(){"use strict";return{create:function(t){function o(){t.updateState({tabIndicationState:{indication:"INACTIVE",activeMode:void 0}})}return{activateDeleteAnimation:function(){t.updateState({tabIndicationState:{indication:"DELETE",activeMode:void 0}},o)},activateAddAnimation:function(e){t.updateState({tabIndicationState:{indication:"ADD",activeMode:e}},o)},activateApplyAnimation:function(e){t.updateState({tabIndicationState:{indication:"APPLY",activeMode:e}},o)},getState:function(){return t.store.getState().tabIndicationState}}}}}),define("rEditor/app/APISections/feedback",["lodash","constants","coreUtilsLib","util"],function(e,r,s,l){"use strict";return{create:function(i){var e=l.serviceTopology.feedbackServiceUrl,n=e+"/getNewCommentsCount/",t=e+"/siteIsShared/";function a(e){i.store.getState().unreadComments!==e&&i.updateState({unreadComments:e})}function o(){var e,t,o=(e=i.dsRead.generalInfo.getSiteId(),t=i.dsRead.generalInfo.getMetaSiteId(),n+e+"?metaSiteId="+t);s.requestsUtil.fetchJson(o).then(function(e){return a(e.count)}).catch(function(e){s.log.error(e)})}return{init:function(){if(i.account.isUserOwner()){var e=t+i.dsRead.generalInfo.getSiteId()+"?metaSiteId="+i.dsRead.generalInfo.getMetaSiteId();s.requestsUtil.fetchJson(e).then(function(e){e.shared?(a(e.count),o(),window.setInterval(o,r.FEEDBACK.CHECK_COMMENTS_INTERVAL)):window.setTimeout(i.feedback.init,r.FEEDBACK.CHECK_SITE_SHARED_INTERVAL)})}},getNewCommentsCounter:function(){return i.store.getState().unreadComments}}}}}),define("rEditor/app/APISections/mainMenuWrapper",["lodash","pagesMenu","experiment"],function(m,e,f){"use strict";return{create:function(s){var o,i,l=e.specialPages.menuLogic,a=/Link$/;function c(e){return e.replace("#","")}function p(){var t={},e=s.dsRead.routers.get.all();return m.forOwn(e,function(e){m.forOwn(e.pages,function(e){t[e]=!0})}),t}function d(e){var t=e.link&&e.link.type,o=e.link&&e.link.pageId,i="PageLink"===t,n=o&&s.dsRead.pages.popupPages.isPopup(o.replace("#",""));return{raw:t,isDropdown:!t,isLink:!i&&a.test(t)||n,isPage:i&&!n}}function u(e,t,o){return{id:e.id,type:d(e),label:e.label,parent:o,isVisible:e.isVisible,isVisibleMobile:e.isVisibleMobile,pageData:t,link:e.link}}function g(e,n,a,r){var s=[];return m.forEach(e,function(e){var t=void 0,o=d(e),i=void 0;i=f.isOpen("pagesPanelOpenCollapsed")?o.isPage?n.pagesDataMap[c(e.link.pageId)]:null:o.isPage?m.find(n.pagesDataList,["id",c(e.link.pageId)]):null,a&&!a(e,i)||(t=u(e,i,n.parent),0<e.items.length?t.items=g(e.items,m.defaults({parent:t},n),a,r):t.items=[],s.push(t),r&&r(t))}),s}return{hasOnlyLastPageMenuItem:function(){var t=p(),e=s.dsRead.pages.getPagesData();return 1===m.filter(e,function(e){return!l.isSpecialPage(s,e,t)}).length},getMenuItemsTreeForPagesFixed:function(){var i=s.dsRead.mainMenu.getMenu(!0),n=s.dsRead.pages.getPagesData(),t=l.getSectionPagesIds(s,n),o=[],a=Array.prototype.push,r=p(),e=s.mainMenu.extendMenuItemsTreeWithPageData(n,function(e,t){return!(!t&&0===e.items.length||t&&l.isSpecialPage(s,t,r))},function(e){e.pageData&&m.includes(t,e.pageData.id)&&o.push(e)},i);return m.forEach(o,function(e){var t=l.getSpecialPagesListBySectionPageOrBySibling(s,e.pageData,n),o=s.mainMenu.convertPagesDataListToMenuItemsList(t,i);a.apply(e.items,o)}),e},getFirstNonHomePageMenuItem:function(e){return function o(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=void 0;return m.some(e,function(e){var t=e.pageData.id;return!e.type.isPage||s.pages.isHomePage(t)||m.includes(i,t)?!!(e.items&&e.items.length&&(n=o(e.items)))||void 0:(n=e,!0)}),n}(s.mainMenu.getMenuItemsTreeForMainMenu(),e)},getMenuItemsTreeForMainMenu:function(e){if(!s.dsRead)return[];e=e||s.dsRead.pages.getPagesData();var o=p();return s.mainMenu.extendMenuItemsTreeWithPageData(e,function(e,t){return!t||!l.isSpecialPage(s,t,o)})},extendMenuItemsTreeWithPageData:function(e,t,o,i){if(i=i||s.dsRead.mainMenu.getMenu(!0),f.isOpen("pagesPanelOpenCollapsed")){var n=m.keyBy(e,"id");return g(i,{parent:null,homePageId:s.homePage.get(),pagesDataMap:n},t,o)}return g(i,{parent:null,homePageId:s.homePage.get(),pagesDataList:e},t,o)},convertPagesDataListToMenuItemsList:function(n,e){var a=[];return function t(e){var o=void 0,i=void 0;m.forEach(e,function(e){d(e).isPage&&-1<(i=m.findIndex(n,{id:c(e.link.pageId)}))&&(o=n[i],a[i]=u(e,o)),0<e.items.length&&t(e.items)})}(e||s.dsRead.mainMenu.getMenu(!0)),m.compact(a)},panelContext:(o=!1,i={},{setOpened:function(e){var t=e.selectedMenuItem;i.selectedMenuItem=t,o=!0},setSelectedMenuItem:function(e){o&&(i.selectedMenuItem=e)},getSelectedMenuItem:function(){if(o)return i.selectedMenuItem},setClosed:function(){o=!(i={})}})}}}}),define("rEditor/app/APISections/menuWrapper",["lodash","core","util","coreUtilsLib","experiment"],function(C,T,_,I,M){"use strict";return{create:function(h){var c=T.utils.menuLogic,a=/Link$/,s=_.translate("Pages_Menu_Add_New_Page"),r=_.translate("Pages_Menu_Add_New_Link"),n=_.translate("Pages_Menu_Add_New_Category");function y(e){return e.replace("#","")}function b(e){var t=e.link&&e.link.type,o=e.link&&e.link.pageId,i="PageLink"===t,n=o&&h.dsRead.pages.popupPages.isPopup(o.replace("#",""));return{raw:t,isDropdown:!t,isLink:!i&&a.test(t)||n,isPage:i&&!n,isPopupLink:n}}function v(e,u,g,m){var f={items:[],pagesCount:0};return C.forEach(e,function(e,t){var o,i,n,a,r,s,l=b(e),c=l.isPage?u[y(e.link.pageId)]:null;if(!g||g(e,c)){var p=(o=e,i=c,n=m,a=t,r=C.get(i,"tpaApplicationId"),s=r?h.dsRead.tpa.app.getData(r).appDefinitionId:null,{id:o.id,type:b(o),label:o.label,parent:n,isVisible:o.isVisible,isVisibleMobile:o.isVisibleMobile,pageData:i?C.pick(i,["id","tpaApplicationId","managingAppDefId","tpaPageId","pageSecurity","title"]):null,link:o.link,position:a,appDefinitionId:s,isHomePage:h.pages.isHomePage(C.get(i,"id")),isOldBlog:!!C.get(i,"appInnerID")&&T.utils.blogTypeUtils.isBlog(h,i)});if(0<e.items.length){var d=v(e.items,u,g,p);p.items=d.items,f.pagesCount+=d.pagesCount}else p.items=[];l.isPage&&f.pagesCount++,f.items.push(p)}}),f}function u(e,t){return C.find(e.items,t)?e:C.find(e.items,function(e){return C.find(e.items,t)})}function l(e,t,o,i,n,a){var r=u(e,{id:t}),s=C.findIndex(r.items,{id:t}),l=r.items[s];r.items.splice(s,1);var c,p,d=o?(c=e,p={id:o},C.find(u(c,p).items,p)):e;(d=d||e).items=d.items||[],d.items.splice(i,0,l),h.dsActions.waitForChangesApplied(function(){h.dsActions.menu.update(e.id,e),n&&h.history.add("moving a page"),C.isFunction(a)&&h.dsActions.waitForChangesApplied(a),e.appId&&h.dsActions.platform.notifyApplication(e.appId,{eventType:"appMenuReorder",eventPayload:{menuId:e.id,menuItemId:t,parentId:o,index:i}})})}function p(t,e){return C.find(e,function(e){return e.link&&e.link.pageId==="#"+t})}function g(e,t,o,i){var n=function e(t,o,i){for(var n={itemIndex:null,parentId:i},a=0;a<t.length;a++){var r=t[a];if(r.id===o)return n.itemIndex=a,n;if(r.items&&r.items.length){var s=e(r.items,o,r.id);if(null!==s.itemIndex)return s}}return n}(e.items,o,null);l(e,t,n.parentId,n.itemIndex+1,!1,i)}function m(o,i,n,a){var e,t,r,s,l,c=(e=i,t=h.pages.duplicate(e),r=h.pages.serialize(e),s=T.utils.pageTitleUtils.generateDuplicatedTitle(r.data.title),l=(h.dsRead.generalInfo.urlFormat.isSlash()?h.pages.data.pageUriSEO:T.utils.pageTitleUtils).convertPageNameToUrl(s),h.pages.data.update(t.id,{title:s,pageUriSEO:l},!0),M.isOpen("se_multilingual")&&h.dsRead.language.multilingual.isEnabled()&&h.dsActions.waitForChangesApplied(function(){h.dsActions.language.patchDataItemTranslations("masterPage",t.id,function(e){return C.assign({},e,{title:T.utils.pageTitleUtils.generateDuplicatedTitle(e.title)})})}),t.id);h.dsActions.waitForChangesApplied(function(){var e=h.menu.getById(o,!0),t=p(c,e.items);g(e,t.id,n,function(){h.pages.navigateTo(c),h.history.add("duplicating a page",{currentPage:i}),a(t.id,c)}),h.dsActions.language.patchDataItemTranslations("masterPage",t.id,function(e){return C.assign({},e,{label:T.utils.pageTitleUtils.generateDuplicatedTitle(e.label)})})})}function d(e,t,o){h.pages.data.update(e,t),h.history.debouncedAdd(o)}function f(e,t){h.openLinkPanel({visibleSections:{NoLink:!1},hidePageLinks:!0,link:t,showAllPopups:!0,pageTabTitle:"LINK_PANEL_TAB_ANCHOR",pageTabPageDropDownTitle:"PLATFORM_LINK_MENU_PAGE_PAGE_OPTION",anchorTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_PAGELINK_LABEL",title:"What do you want to link to?",callback:C.once(e)})}function S(e,t,o){return{id:e.id,type:o||b(e),label:e.label,pageData:t?{id:t.id}:null}}function E(e,t,o,i){return function n(e,a,r,s){var l=[];return C.forEach(e,function(e){var t=void 0,o=b(e),i=o.isPage?a[y(e.link.pageId)]:null;r&&!r(e,i)||(t=S(e,i,o),0<e.items.length?t.items=n(e.items,a,r,s):t.items=[],l.push(t),s&&s(t,i))}),l}(i,C.keyBy(e,"id"),t,o)}function P(){var t={},e=h.dsRead.routers.get.all();return C.forOwn(e,function(e){C.forOwn(e.pages,function(e){t[e]=!0})}),t}return{getExtendedMenuItemsTree:function(e,t){t=t||h.dsRead.pages.getPagesData();var o=C.keyBy(t,"id"),i=P(),n=v(e.items,o,function(e,t){return!t||!c.isSpecialPage(h,t,i)});return n.multiplePagesInMenu=1<n.pagesCount,n},duplicateMenuItem:function(e,t,o){var i,n,a,r,s,l,c,p,d,u;t.type.isPage?m(e,t.pageData.id,t.id,o):t.type.isDropdown?(l=e,c=t,p=o,d=T.utils.pageTitleUtils.generateDuplicatedTitle(c.label),u=h.dsActions.menu.addItem(l,{link:c.link,label:d,isVisible:c.isVisible,isVisibleMobile:c.isVisibleMobile}),h.dsActions.waitForChangesApplied(function(){g(h.menu.getById(l,!0),u,c.id,function(){h.history.add("duplicating a dropdown"),p(u)})})):t.type.isLink?(i=e,n=t,a=o,r=T.utils.pageTitleUtils.generateDuplicatedTitle(n.label),s=h.dsActions.menu.addItem(i,{link:n.link,label:r,isVisible:n.isVisible,isVisibleMobile:n.isVisibleMobile}),h.dsActions.waitForChangesApplied(function(){g(h.menu.getById(i,!0),s,n.id,function(){h.history.add("duplicating a link"),a(s)})})):I.log.error("not supported menu type")},moveMenuItem:l,canDuplicate:function(e){return e.type.isPage&&e.pageData?h.pages.isDuplicable(e.pageData.id):e.type.isDropdown||e.type.isLink},removeMenuItem:function(e,t,o){if(t.pageData)if(o){var i=h.dsRead.pages.getFocusedPageId();h.pages.remove(t.pageData.id,function(){h.history.add("removing a page",{currentPage:i})})}else h.panelManager.openPanel("panels.messagePanels.deleteLastPageMessage",{isLastPage:!0},!0);else h.pages.navigateTo(h.homePage.get(),function(){h.dsActions.menu.removeItem(e,t.id,!0),h.history.add("removing menu item")})},updateLink:function(t,o,e){f(function(e){h.dsActions.menu.updateItem(t,o.id,{link:e}),h.history.add("updating menu link")},e)},renamePage:function(t,e,o){var i={title:o};if(o&&e!==o)if(function(e){var t=!h.dsRead.generalInfo.urlFormat.isSlash()||!h.dsRead.generalInfo.isSitePublished()||e===_.translate("Pages_Menu_Add_New_Page");if(M.isOpen("se_multilingual")){var o=h.dsRead.language;if(o.multilingual.isEnabled())return!o.isCurrentLanguageSecondary()&&t}return t}(e)){var n=h.dsRead.generalInfo.urlFormat.isSlash()?h.pages.data.pageUriSEO:T.utils.pageTitleUtils,a=n.convertPageNameToUrl(o);a?(i.pageUriSEO=a,d(t,i,"Rename Page")):_.googleTranslate(o,function(e){(a=n.convertPageNameToUrl(e))&&(i.pageUriSEO=a,i.translationData=C.assign({},{uriSEOTranslated:!0})),d(t,i,"Rename Page")})}else d(t,i,"Rename Page")},getSelectedMenuItemByPageId:function(e,a){var r=null;return C.some(e,function(e){var t=e.id,o=e.menuItems,i=C.flatMap(o,function(e){return[e].concat(_toConsumableArray(e.items))}),n=C.find(i,["pageData.id",a]);return r={id:C.get(n,"id"),menuId:t},n})?r:{}},findMenuItemById:function(e,t){return C.flatMap(e,function(e){return[e].concat(_toConsumableArray(e.items))}).find(function(e){return e.id===t})},addPage:function(e,t,o){var i=void 0,n=void 0,a=void 0,r=h.pages.add(s);return h.dsActions.waitForChangesApplied(function(){i=h.menu.getById(e,!0),a=i.items,n=p(r.id,a),g(i,n.id,t,function(){h.history.add("adding new page",{actionType:"addPage",nextPage:r.id}),h.pages.navigateTo(r.id,C.partial(o,n.id,r.id))})}),r},addLink:function(o,i,n){f(function(e){var t=h.dsActions.menu.addItem(o,{link:e,label:r});h.dsActions.waitForChangesApplied(function(){g(h.menu.getById(o,!0),t,i,function(){n(t),h.history.add("adding new link")})})})},addFolder:function(e,t,o){var i=h.dsActions.menu.addItem(e,{label:n,link:null});h.dsActions.waitForChangesApplied(function(){g(h.menu.getById(e,!0),i,t,function(){o(i),h.history.add("adding new page header")})})},getMenuItemsForIdeTree:function(){var r=h.dsRead.menu.getById("CUSTOM_MAIN_MENU").items,s=h.dsRead.pages.getPagesData(),t=C.keyBy(c.getSectionPagesIds(h,s)),o=[],l=Array.prototype.push,i=P(),e=E(s,function(e,t){return!(!t&&0===e.items.length||t&&c.isSpecialPage(h,t,i))},function(e){e.pageData&&e.pageData.id&&t[e.pageData.id]&&o.push(e)},r);return C.forEach(o,function(e){var n,a,t=C.find(s,{id:e.pageData.id}),o=C.reject(c.getSpecialPagesListBySectionPageOrBySibling(h,t,s),C.partial(T.utils.tpaTypeUtils.isPageNotVisibleInPagesMenu,h.dsRead)),i=(n=o,a=[],function t(e){var o=void 0,i=void 0;C.forEach(e,function(e){b(e).isPage&&-1<(i=C.findIndex(n,{id:y(e.link.pageId)}))&&(o=n[i],a[i]=S(e,o)),0<e.items.length&&t(e.items)})}(r),C.compact(a));l.apply(e.items,i)}),e},moveMenuItemAfterTarget:g,getMenuItemByPageId:p}}}}),define("rEditor/app/APISections/addPanelAPI",["lodash","util"],function(r,s){"use strict";var l=["cs","hi","th","zh","uk"];return{loadAndCreate:function(n,o){var e,t,i,a=(e=["addPanelInfra","addPanel"],t=s.languages.getLanguageCode(),i=t&&"addPanelSections"+t.toUpperCase(),t&&"en"!==t.toLowerCase()&&!r.includes(l,t)?e.concat(i):e);require(a,function(i,e,t){n.addPanelInfra=i,t&&e.sections.applyTranslatedSections(t),o({registerToOverrideSectionItemsForCategory:function(e,t){i.addPanelData.manager.override.sections.register(e,t)},registerOverrideCategoryAttributes:function(e,t,o){i.addPanelData.manager.override.attributes.register(e,t,o)},registerToAddSectionAtTheStartOfCategory:function(e,t){i.addPanelData.manager.start.register(e,t)},registerToAddSectionAtTheEndOfCategory:function(e,t){i.addPanelData.manager.end.register(e,t)},getCategory:function(e){return i.addPanelData.getCategory(n,e)},getSectionsByComponentType:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return i.addPanelData.getSectionsByComponentType(e,t,n,o)},getDesignPanelTitleByComp:function(e,t){return i.addPanelData.getDesignPanelTitleByComp(e,t,n)}})})}}}),define("rEditor/app/APISections/selection",["lodash","util","constants","stateManagement","coreBi","rEditor/app/componentPlugins/selectionChangePlugin/selectionChangePlugin"],function(N,L,B,F,U,G){"use strict";var e=L.array,H=e.isMultiselect,V=e.asArray,W=400,z=5,t=F.editorPlugins.components.actions,q=t.ignoreComponentsHiddenProperty,j=t.ignoreComponentsCollapsedProperty,Y=F.editorPlugins.components.selectors,o=F.editorPlugins.selection.selectors,K=o.isFocusableModeContainer,X=o.getSelectedCompsRefs,Z=o.getFocusedContainer,i=F.editorPlugins.selection.actions,Q=i.setLastSelectionClickPos,J=i.setFocusedContainer,$=i.setAppContainer,ee=i.sendBiOnSelectPopupOverlay,te=F.editorPlugins.inlinePopup.actions,oe=F.editorPlugins.domMeasurements.selectors.translateToViewerCoordinates;return{create:function(y){var b=y.store.dispatch,r="compPanels.panels.MultiSelect.layoutPanel",p=2,t=L.browserUtil,o=!1,i=!1,d=null,u=null,g=function(e){return F.editorPlugins.components.selectors.isAppWidget(e,y.dsRead)},v=function(e,t,o){var i=e.components.getType(o);!t&&o&&"wysiwyg.viewer.components.MenuContainer"===i&&b(te.close(o))};function s(e){y.store.dispatch(F.highlights.actions.clearExternalHighlights());var t,o,i,n,a,r,s,l,c,p,d,u=Z(y.store.getState()),g=S(e);t=e,o=u,i=L.inlinePopupUtils.getToggleTarget(y,t),n=i&&y.utils.isSameRef(i,o),a=y.components.is.spotlightStageContainer(o),(0!==t.length&&a||n)&&(g&&y.store.dispatch(F.highlights.actions.addExternalHighlight(g)),g=u),r=e,s=y.store.getState(),l=Z(s),c=r&&1===r.length&&r[0],p=X(s),d=p&&1===p.length&&p[0],l&&!N.isEqual(d,c)&&N.isEqual(c,l)&&y.panelManager.closeAllPanelsOfType("compPanelFrame");var m=w(),f=function(e){var t=y.store.getState,o=X(t()),i=N.has(e,["selectedComponents"])&&!N.isEqual(o,e.selectedComponents);if(i){var n=y.getCompRestrictions(e.selectedComponents);b(F.editorPlugins.selection.actions.selectComponents(e.selectedComponents,n))}return i}({selectedComponents:e});b(J(g,u,v));var h=H(e)?null:Y.getFirstAppContainerIfNeeded(N.head(e),g,y.dsRead);b($(h)),f&&(b(q(e)),b(j(e)),b(ee(e)),G.execute(y,m,e))}function S(e){var t,o,i,n=V(e);if(n&&2<=n.length&&(t=n,o=y.components,i=o.getContainer(N.head(t)),!N(t).tail().every(function(e){return N.isEqual(o.getContainer(e),i)})))return null;for(var a,r=N.head(n);r&&(a=r,!y.components.is.focusable(a)&&!K(a,y.dsRead));)r=y.components.getContainer(r);return r}function m(e,t){return k(e)?t.button===p?null:D(e):(y.closeCompPanelIfExists(),R(e))}function f(e,t){y.closeCompPanelIfExists();var o=y.utils.getParentIfCompCanBeSelected(e);o&&(e=o);var i=y.components.getType(e);L.ravenUtils.breadcrumb("clicked on compononet",{compToBeSelected:e,compType:i,isLeftClick:t}),O(e),t&&y.openFirstTimePanel(e)}function h(e){var t,o=(t=e,y.utils.findAncestorMatchesCondition(t,y.components.is.selectedBeforeDescendants)),i=o?N(o).thru(h).flatten().value():[];return N.compact([o].concat(i))}function n(e,t,o){function i(e){return t&&y.components.isDescendantOfComp(t,e)}var n,a;if(k(e))return e;if(!y.utils.isSameRef(e,t)){var r=(n=e,a=C(o),a=N.filter(a,y.components.is.selectable),a=N.reject(a,function(e){return N.includes(["SITE_PAGES","PAGES_CONTAINER"],e.id)||y.utils.isPage(e)||N.isEqual(n,e)||"wysiwyg.viewer.components.Column"===y.components.getType(e)||y.components.is.descendantOfRepeaterItem(e)||y.components.is.group(y.components.getContainer(e))||Y.isDescendantOfAppWidget(e,y.dsRead)}),N.head(a));if(function(e,t){if(!t||!T(t))return!1;var o,i,n=y.components.layout.getRelativeToScreenConsideringScroll(e),a=y.components.layout.getRelativeToScreenConsideringScroll(t),r=n.width*n.height,s=a.width*a.height;return i=a,(o=n).bounding.x<=i.bounding.x&&i.bounding.x+i.bounding.width<=o.bounding.x+o.bounding.width&&o.bounding.y<=i.bounding.y&&i.bounding.y+i.bounding.height<=o.bounding.y+o.bounding.height&&s<=.7*r}(e,r))return r}var s=h(e);if(0===s.length)return e;var l,c,p=N.head(s),d=N.last(s);return i(p)?e:i(d)||(l=d,c=t,y.utils.isSameRef(l,c)&&g(c))?p:d}var a=function(){var i={timeStamp:-W},o=null;function n(e,t){return{clientX:e.clientX,clientY:e.clientY,timeStamp:t}}return{get:function(e,t){return function(e){if(e.timeStamp-i.timeStamp>W)return!1;var t=e.clientX-i.clientX,o=e.clientY-i.clientY;return t*t+o*o<z}(n(t,e.timeStamp||L.performance.now()))?o:null},set:function(e,t){i=n(t,L.performance.now()),o=e}}}();function E(e){return e.shiftKey||t.isSpecialKeyPressed(e)}function c(e){var t=y.components.getType(e);return N.includes(B.MULTISELECT.SINGLE_SELECTION_COMPONENT_TYPES,t)||y.components.layout.isShowOnFixedPosition(e)||!y.components.is.multiselectable(e)}function P(e){o=e}function l(e,t){return Y.getComponentsByXY(e,t,y.dsRead)}function C(e){var t=y.store.getState(),o=oe(t,e),i=a.get(e,o);return i||(i=l(o.clientX,o.clientY),a.set(i,o)),i}function T(e){var t=F.editorPlugins.selection.selectors.getFocusedContainer(y.store.getState());return L.spotlightStageUtils.canSelectCompConsideringSpotlightStage(y,t,e)}function _(e){var t=N.filter(C(e),function(e){return T(e)});if(N.isEmpty(t))return null;var o=0,i=t[o];if(i)for(var n=y.layouters.getParentCompWithOverflowHidden(i);y.components.is.group(i)||!y.components.is.selectable(i)||n&&!N.includes(N.map(t,"id"),n.id);)n=(i=t[++o])?y.layouters.getParentCompWithOverflowHidden(i):null;else for(;y.components.is.group(i)||!y.components.is.selectable(i);)i=t[++o];return i||null}function I(e){var t=_(e),o=N.head(w());if(t)return t=n(t,o,e);var i=y.pages.getFocusedPage();return y.dsRead.pages.isWidgetPage(i.id)?N.head(y.components.getChildren(i)):null}function M(e){var t,o,i,n,a,r,s,l=V(e);return l.length<=1||(s=l,!N.some(s,c)&&(a=l,r=y.components.getAncestorRepeaterItem(N.head(a)),!N.some(N.drop(a),function(e){var t=y.components.getAncestorRepeaterItem(e);return!(!t&&!r||y.utils.isSameRef(t,r))}))&&(t=l,o=N.head(t),i=N.drop(t),n=Y.getFirstAppWidget(o,y.dsRead),i.every(function(e){return N.isEqual(e,n)||N.isEqual(n,Y.getFirstAppWidget(e,y.dsRead))})))}function A(o){return N.isEmpty(o)?[]:N.reject(o,function(e){var t=function(e){for(var t=y.components.getContainer(e);t&&!y.components.is.group(t);)t=y.components.getContainer(t);return t}(e);return t&&!!N.find(o,t)})}function O(e){var t,o,i,n=V(e);if(n=N.uniqBy(n,"id"),i=n,N.some(i,g)&&(t=n,o=N.filter(t,g),n=N.reject(t,function(t){return N.some(o,function(e){return y.dsRead.components.isDescendantOfComp(t,e)})})),!(30<n.length)&&(!(0<n.length)||y.components.is.selectable(n))&&M(n)){n=A(n),n=N.filter(n,y.dsRead.components.is.visible);var a=N.find(y.panelManager.getOpenPanels(),{name:r});N.size(n)<2&&a&&y.panelManager.closePanelByName(r),y.components.layout.isPinned(n)?L.keyboardShortcuts.setContext(L.keyboardShortcuts.CONTEXTS.PIN_MODE):L.keyboardShortcuts.getContext()===L.keyboardShortcuts.CONTEXTS.PIN_MODE&&L.keyboardShortcuts.setContext(L.keyboardShortcuts.CONTEXTS.EDITOR),s(n)}}function R(e){var t=V(e),o=w()||[],i=o.concat(t);return 1<i.length&&y.bi.event(U.events.selection.MULTISELECT,{num_of_elements_selected:i.length,selection_method:"keyboard"}),O(i),o}function w(){var e=y.store.getState();return X(e)}function D(e){L.keyboardShortcuts.getContext()===L.keyboardShortcuts.CONTEXTS.PIN_MODE&&L.keyboardShortcuts.setContext(L.keyboardShortcuts.CONTEXTS.EDITOR);var t=!e,o=V(e);G.execute(y,o,null);var i,n,a,r,s,l,c=w(),p=N.reject(c,function(e){return t||N.some(o,e)}),d=Z(y.store.getState());d&&(i=d,n=c,a=p,r=y.utils.isSameRef(n,i),s=y.components.is.selectWhenDeselectingChildren(i),l=!N.isEmpty(n)&&!r,N.isEmpty(a)&&l&&s)?O(d):O(p)}function k(e){var t=w();if(N.isEmpty(e))return!N.isEmpty(t);var o=V(e);return N.every(o,function(e){return N.some(t,e)})}function x(e){b(Q(e))}return{isMultiSelectKeyPressed:E,isSingleSelectionComponent:c,setIsMouseUpSelectionEnabled:P,getIsMouseUpSelectionEnabled:function(){return o},setIsHiddenComponentDraggedNext:function(e){i=!!e},isHiddenComponentDraggedNext:function(){return i},isComponentExplicitlySelected:function(){return null!==d},getAnchorsUnderClick:function(e,t){return Y.getAnchorsUnderClick(e,t,y.dsRead)},getComponentsByXY:l,getComponentsUnderClick:C,getNonGroupCompUnderCursor:_,getComponentUnderClickToBeSelected:I,getComponentToBeMarkedByHoverBox:function(e,t){var o=t&&d||function(e){var t=_(e);if(!t)return null;var o=w(),i=n(t,N.head(o),e);return N.find(o,i)?t:i}(e);return u&&o?u:o},getSelectedPopup:function(e){return N.find(e,function(e){return y.components.getType(e)===B.COMP_TYPES.POPUP_CONTAINER})},isPopupPageSelected:function(e){return Boolean(y.dsRead.pages.popupPages.getCurrentPopupId())&&1===N.size(e)&&"mobile.core.components.Page"===y.components.getType(N.head(e))},selectComponentByClick:function(e){var t=I(e);d=u&&t&&u.id!==t.id?(t=u,null):t;var o=k(t),i=w(),n=e.button!==p;if(t)if(E(e)&&!o)m(t,e),x(null);else{if(!H(i)){var a=y.components.layout.isShowOnFixedPosition(t),r=void 0,s=y.store.getState(),l=oe(s,e);if(a)r={x:l.clientX,y:l.clientY};else{var c=y.ui.scroll.getScroll();r={x:l.clientX+c.scrollLeft,y:l.clientY+c.scrollTop}}x(r)}if(o)return void P(!0);f(t,n)}else D()},selectNonGroupCompUnderCursor:function(e){var t=_(e);t=t&&u?u:t;var o=e.button!==p;return k(t)?null:E(e)?m(t):f(t,o)},selectComponentByCompRef:O,addComponentToSelectionByRef:R,getSelectedComponentId:function(){var e=N.head(w());return N.get(e,"id")},getSelectedComponents:w,getParentToFocus:function(e){return S(e)},getSelectedComponentType:function(){var e=w();return N.isEmpty(e)?null:Y.getCompTypeSuffix(N.head(e),y.dsRead)},selectAll:function(){var e,t,o,i,n=w(),a=void 0,r=void 0;a=y.components.layout.containsSiblingsOnly(n)&&k()?y.components.is.siteSegment(n)||(o=n,"Page"===(i=Y.getCompTypeSuffix(o,y.dsRead))||"AppPage"===i)?y.components.getChildren(n):(e=n,t=y.components.getSiblings(e),r=N.reject(t,function(e){return y.components.is.siteSegment(e)}),n.concat(r)):(n||[]).concat(y.components.getChildren(y.pages.getFocusedPage())),N.isEmpty(a)||(y.closeCompPanelIfExists(),1<a.length&&y.bi.event(U.events.selection.MULTISELECT,{num_of_elements_selected:a.length,selection_method:"keyboard"}),O(a))},getSelectedComponentData:function(){var e=w();return e?y.components.data.get(e):null},deselectComponents:D,isComponentSelected:k,isSelectedCompUnderCursorAndBeneathSiteSegment:function(e,t){var i=C(t),o=y.dsRead.pages.getReference(y.dsRead.pages.getPrimaryPageId()),n=y.siteSegments.getRefs().concat(o),a=N.findIndex(i,function(e){return N.some(n,e)});return-1!==a&&N.some(e,function(o){return N.some(i,function(e,t){return N.isEqual(o,e)&&a<t})})},setModalComponent:function(e){u=e}}}}}),define("rEditor/app/APISections/databaseEditor",["lodash","experiment"],function(r,s){"use strict";return{create:function(i){function n(e,t,o){i.panelManager.openPanel("compPanels.panels.AppPart2.databaseEditorPanel",{selectedComponentType:o,listId:e,compRef:t,autoSave:!s.isOpen("disableDbEditorAutoSave")})}function a(){i.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"PUBLISH_ERROR_TITLE_LABEL",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["SAVE_PUBLISH_ERROR_OPTION_1","SAVE_PUBLISH_ERROR_OPTION_2"],helpMessage:"SAVE_ERROR_LEARN_MORE_LABEL",helpLinkMessage:"SAVE_PUBLISH_ERROR_LEARN_MORE_LINK",helpLink:"http://www.wix.com/"})}return{openDatabaseEditor:function(e,t){var o=i.selection.getSelectedComponentType();!s.isOpen("disableDbEditorAutoSave")&&i.dsRead.generalInfo.isFirstSave()?i.saveManager.saveInBackground(r.partial(n,e,t,o),a):n(e,t,o)}}}}}),define("rEditor/app/APISections/welcomeScreens/meshWelcomeScreens",["lodash","constants","util","stateManagement","experiment"],function(n,i,e,a,t){"use strict";var o=function(){return"true"===e.url.getParameterByName("forceMeshMigration")},r=function(e){return s()&&!l(e)&&!e.site.isSiteLayoutMesh()},s=function(){return t.isOpen("se_migrateToMeshScreen")},l=function(e){return n.size(e.pages.getPageIdList())>=c()},c=function(){var e=t.getValue("se_migrateToMeshScreen");return"all"===e?Number.MAX_VALUE:parseInt(e,10)||25},p=function(e){var t,o=(t=e,a.editorPlugins.userPreferences.selectors.getSiteUserPreferences(i.USER_PREFS.MESH.NUMBER_OF_CANCELLATIONS)(t.store.getState())||0);e.store.dispatch(a.editorPlugins.userPreferences.actions.setSiteUserPreferences(i.USER_PREFS.MESH.NUMBER_OF_CANCELLATIONS,o+1))},d=function(e){e.history.add("before-mesh-migration"),e.store.dispatch(a.editorPlugins.dynamicPages.actions.setPreventFetch(!0)),e.initAutosave({enabled:!1})},u=function(e){e.store.dispatch(a.editorPlugins.dynamicPages.actions.setPreventFetch(!1)),e.initAutosave({enabled:!0})},g=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(n.isPlainObject(t)){var o=m(e,t);o&&e.store.dispatch(a.meshMigration.actions.update(o))}},m=function(e,t){var o={init:function(){return{value:t.value,maxValue:t.maxValue}},done:function(){return{isDone:!0}},"view-mode":function(){return{viewMode:t.viewMode}},"page-migrated":function(){return{value:a.meshMigration.selectors.getValue(e.store.getState())+1}}};return o[t.status]?o[t.status]():null},f=function(i){var e=n.partial(g,i);i.site.migrateSiteToMesh(function(){u(i),P(i),E(i)},function(e){var t,o;u(i),o=e,(t=i).history.undo(),t.panelManager.closePanelByName("panels.focusPanels.meshMigrationProgressPanel"),o&&console.log("Mesh Migration aborted [reason]:",o),h(i,e)},{updateCallback:e,isMigrationForced:o()})},h=function(e,t){y(t)?v(e):S(e)},y=function(e){return"CANCELLED"===e},b=function(e){var t={onAbort:function(){p(e),e.site.cancelSiteToMeshMigration()},canUserAbort:!0};e.panelManager.openPanel("panels.focusPanels.meshMigrationProgressPanel",t)},v=function(e){e.panelManager.openPanel("panels.focusPanels.failPanel",{title:"Mesh_Migration_Update_Cancelled_Notification_Box_Header",bodyText:"Mesh_Migration_Update_Cancelled_Notification_Box_Text",closeButtonText:"Mesh_Migration_Update_Cancelled_Notification_Box_Close_Button",closePanel:e.panelManager.closePanelByName})},S=function(e){e.panelManager.openPanel("panels.focusPanels.failPanel",{title:"Mesh_Migration_Error_UpdateFailed_Header",bodyText:"Mesh_Migration_Error_UpdateFailed_Text",closeButtonText:"Mesh_Migration_Error_UpdateFailed_OK_Button",closePanel:e.panelManager.closePanelByName})},E=function(e){e.panelManager.openPanel("panels.focusPanels.migratedToMeshSuccessPanel",{title:"Mesh_Migration_Success_Popup_Title",subTitle:"Mesh_Migration_Success_Popup_Subtitle",bodyText:["Mesh_Migration_Success_Popup_Text","Mesh_Migration_Success_Popup_Text2"],illustrationSymbol:"mesh-migration-complete",closeButtonText:"Mesh_Migration_Success_Popup_Done_Button",closePanel:e.panelManager.closePanelByName})},P=function(e){return e.history.clear()};return{shouldShowMeshMigrationScreen:function(e){return r(e)||o()},showMeshMigrationWelcomeScreen:function(t){var o="panels.focusPanels.migrateToMeshWelcomeScreenPanel";t.panelManager.openPanel(o,{onConfirm:function(){d(t),f(t),b(t)},onCancel:function(){p(t),t.panelManager.closePanelByName(o)},onHelp:function(){var e={panel_name:o,origin:null};t.panelManager.openHelpCenter("015964b3-1f9d-4691-893f-99f18f6ba31a",{},e)},canUserDecline:!0})}}}),define("rEditor/app/APISections/welcomeScreensWrapper",["lodash","util","stateManagement","coreBi","experiment","constants","rEditor/app/APISections/welcomeScreens/meshWelcomeScreens"],function(a,r,s,l,c,p,d){"use strict";function n(e){return"na"===e}function u(e){var t=e.account.getEditorVersionsInfo();return!!t&&t.isEligibleForSwitch&&(e.compatibility.hasOldApp()||e.compatibility.hasAppPage())}function g(e){var t=e.account.getEditorVersionsInfo(),o=!1===window.editorModel.firstSave&&!1===t.isEligibleForSwitch;return t&&!t.isNewUser&&!o}function i(e,t){o(e,e.account.getEditorVersionsInfo().isEligibleForSwitch?"START_NOW_CLICK_WITH_BACK_OPTION":"START_NOW_CLICK_WITHOUT_BACK_OPTION",t),r.cookie.setUserPetriOverrideCookie("SantaEditorUserOverride","new")}function m(e,t){o(e,"BACK_TO_OLD_EDITOR_CLICK",t),r.cookie.setUserPetriOverrideCookie("SantaEditorUserOverride","old"),r.windowInteractionUtils.reloadPageWithoutQuestion()}function o(e,t,o){var i=l.events.newEditorWelcomeScreens[t],n={site_id:e.dsRead.generalInfo.getSiteId()};i.fields.duration&&(n.duration=Date.now()-o),e.bi.event(i,n)}function f(e){if(!g(e))return!1;var t=e.account.getEditorVersionsInfo(),o="new"===t.userOverride,i="old"===t.userOverride&&t.isEligibleForSwitch;return!o&&!i}function h(e){return g(e)&&a((t=e).components.get.byType("wixapps.integration.components.AppPart2")).map(t.components.data.get).map("appPartName").map(t.dsRead.wixapps.appbuilder.data.lists.getListVersion).some(function(e){return!e||"1.0"===e});var t}function y(e){var t=p.USER_PREFS.DEVELOPER_MODE.EXPOSED_TO_WIX_CODE,o=s.editorPlugins.userProfile.selectors.getUserProfile(e.store.getState()),i=s.editorPlugins.userPreferences.selectors.getGlobalUserPreferences(t)(e.store.getState()),n=s.editorPlugins.userPreferences.selectors.getGlobalUserPreferences("didPassNewUserVideoCheck")(e.store.getState());return!i&&!n&&a.get(o,["wix_code_exposure_flag","value"])}var b=void 0;function v(e){e.panelManager.openPanel("panels.focusPanels.newUserIntroVideoPanel",{linkedVideoData:b,title:r.translate("Intro_video_new_user_dialog_title"),subtitle:r.translate("Intro_video_new_user_dialog_sub_heading"),buttonLabel:"Intro_video_new_user_button"})}function S(e){var t=e.account.getEditorVersionsInfo(),o=h(e);e.panelManager.openPanel("panels.focusPanels.newEditorWelcomeScreenPanel",{isEligibleForSwitch:t.isEligibleForSwitch,onNextClick:o?E.bind(this,e):i.bind(this,e,Date.now()),nextBtnLabel:o?"Notification_Box_Next":"Notification_Box_Start_Now",onBackClick:m.bind(this,e,Date.now())})}function E(e){var t=e.account.getEditorVersionsInfo();e.panelManager.openPanel("panels.focusPanels.newEditorListWelcomeScreenPanel",{isEligibleForSwitch:t.isEligibleForSwitch,onNextClick:i.bind(this,e,Date.now()),onBackClick:m.bind(this,e,Date.now())})}function P(e){e.panelManager.openPanel("wixCode.panels.developerWelcomePanel",{linkedVideoData:r.translate("corvid_welcome_lb_video_link_exposure_url")}),e.store.dispatch(s.editorPlugins.userPreferences.actions.setGlobalUserPreferences("didPassNewUserVideoCheck",!0))}function C(e){var t=e.dsRead.siteName.getUsed(),o=!t||0===t.length,i=!!s.editorPlugins.userPreferences.selectors.getGlobalUserPreferences("didPassNewUserVideoCheck")(e.store.getState());return b=r.translate("Intro_video_new_user_video_link"),!i&&!n(b)&&(e.store.dispatch(s.editorPlugins.userPreferences.actions.setGlobalUserPreferences("didPassNewUserVideoCheck",!0)).catch(a.noop),o&&!s.editorPlugins.userPreferences.selectors.getGlobalUserPreferences(_)(e.store.getState()))}function T(e){var t,o,i,n,a=s.editorPlugins.userPreferences.selectors.getGlobalUserPreferences("didPassNewFeaturesVideoCheck")(e.store.getState());return!(!c.isOpen("newFeaturesIntroVideo")||a)&&(!g(e)&&(o=(t=e).account.getEditorVersionsInfo(),i=t.dsRead.siteName.getUsed(),n=!i||0===i.length,o&&"old"!==o.userOverride&&!n))}var _="didPassCameFromADIVideo",t=void 0;function I(e){return t=r.translate("Intro_video_new_user_new_video_link"),e.dsRead.generalInfo.isSiteFromOnBoarding()&&!s.editorPlugins.userPreferences.selectors.getGlobalUserPreferences(_)(e.store.getState())&&!n(t)}function M(e){e.store.dispatch(s.editorPlugins.userPreferences.actions.setGlobalUserPreferences("didPassNewFeaturesVideoCheck",!0)).catch(a.noop),e.panelManager.openPanel("panels.focusPanels.newFeaturesVideoPanel",{linkedVideoData:r.translate("Notification_Box__video_url_EN"),title:r.translate("Notification_Box_New_Editor_Features_Title"),subtitle:r.translate("Notification_Box_New_Editor_Features_Subtitle"),buttonLabel:"Intro_video_new_user_button"})}function A(e){e.store.dispatch(s.editorPlugins.userPreferences.actions.setGlobalUserPreferences(_,!0)).catch(a.noop),e.panelManager.openPanel("panels.focusPanels.cameFromADIVideoPanel",{linkedVideoData:t,title:r.translate("Notification_Box_ADI_Migration_Title"),subtitle:r.translate("Notification_Box_ADI_Migration_Subtitle"),buttonLabel:"Notification_Box_ADI_Migration_Button"})}return{initWelcomeScreen:function(t){var e=s.editorPlugins.welcomeScreen.selectors.getWelcomeScreenOverride(t.store.getState()).panels,o=[{shouldShow:y,show:P},{shouldShow:I,show:A},{shouldShow:C,show:v},{shouldShow:T,show:M},{shouldShow:u,show:function(){t.panelManager.openPanel("panels.focusPanels.editorMigrationFailedPanel",{})}},{shouldShow:f,show:S},{shouldShow:h,show:E},{shouldShow:d.shouldShowMeshMigrationScreen,show:d.showMeshMigrationWelcomeScreen}],i=a.concat(a.isEmpty(e)?o:e,{shouldShow:function(){return!0},show:a.noop}),n="true"===r.url.getParameterByName("disableWelcomeScreen");t.wixStores.isSiteInWixStoreTestDrive()||n||a.find(i,function(e){return e.shouldShow(t)}).show(t)}}}),define("rEditor/utils/copyPaste/copyPasteValidationPlatformUtils",["lodash","stateManagement"],function(p,e){"use strict";var t=e.editorPlugins.components.selectors,n=t.isAppWidget,d=t.getFirstAppWidget;function r(e,t){var o=e.platform.controllers.connections.getPrimaryConnection(t);if(o){var i=o.controllerRef;if(n(i,e.dsRead))return i}}return{getComponentsThatHasConnectionToAppWidget:function(a,e){return p.reduce(e,function(t,e){var o=e.compRef,i=r(a,o);i&&t.push({appWidgetRef:i,componentRef:o});var n=a.components.getChildren(o,!0);return p.forEach(n,function(e){(i=r(a,e))&&t.push({appWidgetRef:i,componentRef:e})}),t},[])},isPastedTargetIsInTheAppWidget:function(e,t,o,i,n,a,r){var s=d(t,e.dsRead);if(!p.isEqual(s,o))return!1;var l=r(i,n,a),c=d(l,e.dsRead);return!(!p.isEqual(l,o)&&!p.isEqual(c,o))}}}),define("rEditor/utils/copyPaste/collectMediaIds",["lodash"],function(n){"use strict";var a=function(e){return e},r=function(e){return[]},s={Image:!0,VectorImage:!0,MusicPlayerData:!0,VideoPlayer:!0,WixVideo:!0,WixAudio:!0,StylableButton:!0},l={Image:function(e){return[e.uri]},VectorImage:function(e){return[e.svgId]},StylableButton:function(e){return[e.svgId]},MusicPlayerData:function(e){return[e.coverRef.uri,e.audioRef.uri]},VideoPlayer:function(e){return[e.videoRef.videoId]},WixVideo:function(e){return[e.videoId]},WixAudio:function(e){return[e.uri]}},c=function(e){return n.last(e.split("/"))};return function(e){var i=[];return function t(o,i){if(Array.isArray(o))return o.forEach(function(e){return t(e,i)});n.isObject(o)&&(i(o)||Object.keys(o).forEach(function(e){return t(o[e],i)}))}(e,function(e){return!(!(t=e).type||!s[t.type]||(i.push.apply(i,_toConsumableArray((l[(o=e).type]||r)(o).filter(a).map(c))),0));var t,o}),n.uniq(i)}}),define("rEditor/utils/theme/collectThemeFromSerializedComponents",["lodash"],function(a){"use strict";return function(o,e){var t=[];function i(e){a.isString(e.style)&&t.push(e.style),a.isArray(e.components)&&e.components.forEach(i)}e.forEach(function(e){i(e.serializedComp)});var n=t.reduce(function(e,t){return a.merge(e,_defineProperty({},t,o.dsRead.theme.styles.get(t)))},{});return{colors:o.dsRead.theme.colors.getAll(),fonts:o.dsRead.theme.fonts.getAll(),styles:n}}}),define("rEditor/utils/theme/applyThemeToSerializedComponents",["lodash","textControls"],function(c,p){"use strict";function o(e,t){if(c.isPlainObject(e))return d(e,t);if(function(e){try{var t=JSON.parse(e);return c.isPlainObject(t)}catch(e){return!1}}(e)){var o=JSON.parse(e);return JSON.stringify(d(o,t))}var i,n,a,r,s=(i=e,(n=t.fonts)[i]?n[i]:Object.entries(n).reduce(function(e,t){var o=_slicedToArray(t,2),i=o[0],n=o[1];return c.isString(e)?e.replace("["+i+"]",n):e},i));return a=s,(r=t.colors)[a]?r[a]:Object.entries(r).reduce(function(e,t){var o=_slicedToArray(t,2),i=o[0],n=o[1];return c.isString(e)?e.replace("{"+i+"}",n):e},a)}function d(e,t){return c.mapValues(e,function(e){return o(e,t)})}return function t(e,o){return c.merge({},e,{data:e.data?(a=e.data,l=o,c.merge({},a,"StyledText"===a.type?{text:a.text.replace(/(?:style="([/():;.a-z0-9 _-]+)"\s)?class="((font|color)_\d+)"(?:\sstyle="([/():;.a-z0-9 _-]+)")?/gi,function(e,t,o,i,n){var a=t||n||"",r="";if("font"===i){var s=l.fonts[o];r=p.fontUtils.createFontStyleString(s,l.colors)}else"color"===i&&(r="color:"+l.colors[o]+";");return'style="'+r+a+'"'})}:void 0)):void 0,design:e.design?(i=e.design,n=o,d(i,n)):void 0,style:e.style?function(e,t){var o=c.isString(e)?t.styles[e]:e;if(o)return c.merge({},o,{style:{properties:d(o.style.properties,t),propertiesSource:c.mapValues(o.style.propertiesSource,function(){return"value"})}})}(e.style,o):void 0,components:e.components?e.components.map(function(e){return t(e,o)}):void 0});var i,n,a,l}}),define("rEditor/app/APISections/copyPasteWrapper",["lodash","core","experiment","rEditor/app/serializedComponentPlugins","boxSlideshow","constants","stateManagement","util","coreBi","helpIds","rEditor/utils/copyPaste/copyPasteValidationPlatformUtils","rEditor/utils/copyPaste/collectMediaIds","rEditor/utils/theme/collectThemeFromSerializedComponents","rEditor/utils/theme/applyThemeToSerializedComponents"],function(O,y,R,w,e,b,D,k,n,x,v,N,S,L){"use strict";var B=D.editorPlugins.mouseActions.selectors.isPerformingMouseMoveAction,F=D.editorPlugins.components.selectors.getStyleId,U=D.boxSlideShow.selectors.findCurrentSlide;return{create:function(C){var t=["wysiwyg.viewer.components.tpapps.TPAGluedWidget"],p=e.utils.boxSlideShowUtils,r=48,s=y.utils.AttachHandler;function E(e,t){if(e.originalGrandParent&&C.components.is.slidesContainer(e.originalGrandParent)){var o=C.components.get.byXYRelativeToStructure(t.x,t.y);return!!O.find(o,e.originalGrandParent)}return!1}function c(e,t,o){var i=C.pasteLogic.pasteContext.getPastePosition(C,e.snugLayoutRelativeToStructure,t);return i.x-=o.scrollLeft,i.y-=o.scrollTop,i}function P(e,t,o,i){var n=e.serializedComp,a=u(n.componentType),r=C.dsRead.pages.getReference(a?C.pages.getMasterPageId():t);return{overridePasteContainer:function(e,t,o){if(E(e,t))return U(C.dsRead,e.originalGrandParent);var i=new s(C,{comp:e.serializedComp,layout:O.pick(o,["width","height"])},s.TYPES.STRUCTURE).getCurrentAttachCandidate(o),n=i.candidateRef;return i.candidateStatus===s.ATTACH_CANDIDATE_STATUSES.INVALID?C.pages.getPrimaryContainer():n}(e,i,_(n,O.clone(o||i),o,r)),pasteContainer:r}}function l(e,t,o){var i=C.ui.scroll.getScroll(),n=C.pages.getPrimaryContainer().id,a=c(e,n,i),r=P(t,n,o=d(o)?o:null,a),s=C.utils.isPage(r.overridePasteContainer),l=r.pasteContainer;return O.isEqual(r.overridePasteContainer,r.pasteContainer)&&s||(l=r.overridePasteContainer),l}function T(e,t){if(O.isEmpty(e))return!1;if(R.isOpen("se_appWidget")&&!function(o,i){var e=C.components.asArray(O.cloneDeep(o.components)),t=v.getComponentsThatHasConnectionToAppWidget(C,e),n=O(t).map("appWidgetRef").compact().uniqWith(O.isEqual).value();if(1<n.length)return!1;if(0===n.length)return!0;var a=O.head(n),r=O(t).map("componentRef").compact().uniqWith(O.isEqual).value();return O.every(e,function(e){var t=e.compRef;return!O.includes(r,t)||v.isPastedTargetIsInTheAppWidget(C,t,a,o,e,i,l)})}(e,t))return!1;var o=C.isMobileEditor(),i=C.dsRead.pages.getPrimaryPageId(),n=C.dsRead.pages.isLandingPage(i),a=O.some(e.components,"isShowOnAllPages");return!(o||n&&a)}function d(e){return O.has(e,"x")&&O.has(e,"y")}function u(e){return O.includes(t,e)}function _(e,t,o,i){var n=void 0;if(!o)return n={x:t.x,y:t.y,width:e.layout.width,height:e.layout.height};if(n={x:o.x,y:o.y-e.layout.height,width:e.layout.width,height:e.layout.height},"Container"===e.type&&(n.y=o.y-r),!C.utils.isPage(i)){var a=C.components.layout.getRelativeToScreenConsideringScroll(i);n.x-=a.x,n.y-=a.y}return n}function I(e,f){var h=C.ui.scroll.getScroll(),y=C.pages.getPrimaryContainer().id,b=[],t=C.components.asArray(O.cloneDeep(e.components)),o=C.dsRead.siteSegments.getPagesContainer(),v=C.components.layout.getRelativeToScreen(o);f=d(f)?f:null;var S=c(e,y,h);return O.forEach(t,function(e){var t=e.serializedComp,o=P(e,y,f,S),i=o.overridePasteContainer,n=o.pasteContainer,a=O.clone(f||S),r=_(t,a,f,n),s=void 0,l=C.utils.isPage(i);if(O.isEqual(i,n)&&l)a.x=r.x-v.x+h.scrollLeft,a.y=r.y-v.y+h.scrollTop;else{var c=C.components.layout.getRelativeToScreenConsideringScroll(i);a.x=r.x-c.x,a.y=r.y-c.y,C.components.is.fullWidth(i)&&(a.x-=v.x),n=i}var p=O.clone(a);t.layout.x=p.x+e.positionRelativeToSnug.x,t.layout.y=p.y+e.positionRelativeToSnug.y;var d,u,g,m=E(d=e,S)?O.isEqual(U(C.dsRead,d.originalGrandParent),d.originalParent)?null:d.relativeToParentPosition:null;m&&(t.layout.x=m.x,t.layout.y=m.y),t=w.runPastePluginOnSerializedComponent(t,C),C.components.is.containableByStructure(t,n)&&(u=n,g=t,s=C.addComponentPlugins[g.componentType]?C.addComponentPlugins[g.componentType](C,u,g):C.components.add(u,g,g.id),b.push({translationData:e.translationData,dataItemIds:e.dataItemIds,newPointer:s}))}),b}function g(e){e.styleId&&(e.previousStyleId=e.styleId)}function a(e,a){var r=C.components.layout.getRelativeToScreen(e),t=C.pages.getPrimaryContainer(),o=C.utils.isPage(t),i=C.ui.scroll.getScroll();if(!o){var n=C.components.layout.getRelativeToScreen(t);r.x-=n.x,r.y-=n.y}C.pasteLogic.pasteContext.setPasteData(r,t.id,i);var s=O.map(e,function(e){var t=void 0;t=!!R.isOpen("se_multilingual")||void 0,D.editorPlugins.components.selectors.isRefComponent(e)&&(e=C.components.getContainer(e));var o=C.components.serialize(e,null,!1,a,null,g,t);f(e,o);var i=C.components.layout.getRelativeToScreen(e);o=w.runCopyPluginOnSerializedComponent(o,e,C);var n=function(e){var t={compRef:e};if(C.components.canBeMasterChild(e)){var o=p.getSlideShowParent(C,e),i=p.getSlideShowSlideParent(C,e);if(i){t.originalParent=i,t.originalGrandParent=o;var n=C.components.layout.getRelativeToStructure(e),a=C.components.layout.getRelativeToStructure(i);t.relativeToParentPosition={x:n.x-a.x,y:n.y-a.y}}}return R.isOpen("se_multilingual")&&(t.translationData=C.language.component.getTranslations(e),t.dataItemIds=k.dataUtils.getDataItemIds(C,e)),t}(e);return O.merge({serializedComp:o,positionRelativeToSnug:{x:i.x-r.x,y:i.y-r.y},isShowOnAllPages:C.components.isShowOnAllPages(e)},n)}),l={snugLayoutRelativeToStructure:r,originalScrollPosition:i,theme:S(C,s),components:s},c=function(e){if(e&&0<e.length){var t=C.components.modes.getFirstAncestorWithActiveModes(O.head(e)),o=O.curry(O.isEqual)(t);if(O(e).tail().map(C.components.modes.getFirstAncestorWithActiveModes).every(o))return t}}(e);return c&&(l.containerWithModes=c),l}function m(e){var s=C.pages.getPrimaryContainer().id,t=C.dsRead.siteSegments.getPagesContainer(),l=C.dsRead.siteSegments.layout.get(t),c=C.ui.scroll.getScroll();return O.map(e,function(e){var t=void 0;t=!!R.isOpen("se_multilingual")||void 0;var o=C.components.serialize(e,null,!1,void 0,null,void 0,t);f(e,o);var i=function(e,t,o,i,n){var a=C.dsRead.components.get.byId(t),r=C.utils.isPage(a),s=C.components.layout.getRelativeToStructure(e).bounding;if(!r){var l=C.components.layout.getRelativeToStructure(a).bounding;s.x-=l.x,s.y-=l.y}C.pasteLogic.duplicateContext.setPasteData(s,t,o);var c=C.pasteLogic.duplicateContext.getPastePosition(C,s,t);return u(i)||(c.y-=n.y),c}(e,s,c,o.componentType,l);o.layout.x=i.x,o.layout.y=i.y,o=w.runCopyPluginOnSerializedComponent(o,e,C),o=w.runPastePluginOnSerializedComponent(o,C);var n,a,r=(n=s,a=u(o.componentType),C.dsRead.pages.getReference(a?C.pages.getMasterPageId():n));return{newPointer:C.components.add(r,o),translationData:C.language.component.getTranslations(e),dataItemIds:k.dataUtils.getDataItemIds(C,e)}})}function f(e,t){if("system"===O.get(t,"style.styleType")){var o=F(e,C.dsRead);o&&(t.style=o)}}function o(e){return!(!e||!R.isOpen("se_enablePageCrossSiteCopyPaste"))&&!C.dsRead.pages.isWidgetPage(e)&&C.dsRead.pages.isDuplicable(e)}function M(e){var t=void 0,o=void 0;switch(e.hasMediaContent){case!0:t="Yes";break;case!1:t="No";break;default:t="NULL"}o=1<e.clipboardCompData.components.length?"multiselect":O.get(e.clipboardCompData.components[0],"serializedComp.componentType"),C.bi.event(n.events.copyPaste.CROSS_SITE_PASTE,{component_type:o,media_content:t,paste_option:e.origin,success:e.success,error_type:e.error,theme:e.shouldApplyTargetTheme?"target":"origin"})}function i(){C.updateState({applyModeFromClipboardSuggestion:void 0})}function A(){var e=C.clipboard.getItem(),t=e.type===b.CLIPBOARD_ITEM_TYPE.COMPONENT,o=e.value;if(t&&o&&o.containerWithModes){var i=C.components,n=C.store.getState(),a=D.editorPlugins.selection.selectors.getSelectedCompsRefs(n);if(a&&1===a.length){var r=a[0];if(O.isEqual(r,o.containerWithModes)){var s=i.modes.getModes(r);if(s&&0<s.length){var l=i.modes.getComponentActiveModeIds(r);if(1===O.size(l)){var c=O.keys(l)[0],p=O(s).reject({modeId:c}).map("modeId").value();return O(o.components).map("compRef").every(function(t){return O.some(p,function(e){return i.modes.isComponentDisplayedInModes(t,[e])})&&!i.modes.isComponentDisplayedInModes(t,[c])})}}}}}return!1}function h(){return C.clipboard.hasItemOfType(b.CLIPBOARD_ITEM_TYPE.PAGE)}return{copy:function(e,t){if(e){var o=C.components.asArray(e);if(o=C.components.getComponentsWhichDontHaveAncestorsInTheArray(o),i=o,C.components.is.duplicatable(i)){var i,n=a(o,t);C.clipboard.setItem(n,b.CLIPBOARD_ITEM_TYPE.COMPONENT)}else C.isMobileEditor()&&C.openCantCopyPastePanel()}},paste:function(e,t,o,i){var n,a,r,s,l=A(),c=C.store.getState(),p=D.editorPlugins.selection.selectors.getSelectedCompsRefs(c),d=C.clipboard.isCrossSite(),u=C.clipboard.getItem(),g=u.metaData,m=u.value;if(!T(m,e))return C.isMobileEditor()&&C.openCantCopyPastePanel(),void(d&&M({clipboardCompData:m,origin:i,shouldApplyTargetTheme:o,error:"prohibited",success:!1}));if(d){var f=m.components.length;s=m;var h=(m=O.assign({},s,{components:s.components.filter(function(e){return C.components.is.crossSiteDuplicatableByStructure(e.serializedComp)})})).components.length;if(h<f&&(a={title:"Notifications_CantPasteElements_Text",message:"Notifications_CantPasteElements_Text",type:"error",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:(r=x.HELP_CENTER.CANNOT_PASTE_COMPONENTS,function(){return C.panelManager.openHelpCenter(r)})}},C.store.dispatch(D.editorPlugins.notifications.actions.showUserActionNotification(a))),0===h)return void M({clipboardCompData:m,origin:i,shouldApplyTargetTheme:o,error:"filtered",success:!1});if(o||(n=m,m=O.merge({},n,{components:n.components.map(function(e){return{serializedComp:L(e.serializedComp,n.theme)}})})),!C.clipboard.isAlreadyPasted(g.guid)){var y=C.pages.getPrimaryContainer().id,b=m,v=b.snugLayoutRelativeToStructure,S=b.originalScrollPosition;C.clipboard.setLastPasted(g.guid),C.pasteLogic.pasteContext.setPasteData(v,y,S)}}C.panelManager.closeAllPanels();var E=I(m,e),P=O.map(E,"newPointer");B(c)||C.dsActions.waitForChangesApplied(function(){C.selection.selectComponentByCompRef(P),C.openFirstTimePanel(P),l&&C.updateState({applyModeFromClipboardSuggestion:{selectedComponents:P,container:p}})}),C.waitForChangesApplied(function(){if(R.isOpen("se_multilingual")&&O.forEach(E,function(e){var t=e.newPointer,o=e.translationData,i=e.dataItemIds,n=O.zipObject(i,k.dataUtils.getDataItemIds(C,t));C.dsActions.language.copyTranslationData(t,o,n)}),d){var e=N(m);0<e.length&&C.mediaServices.transferMediaItems(e,g.siteUploadToken),M({clipboardCompData:m,origin:i,shouldApplyTargetTheme:o,success:!0,components:m.components,hasMediaContent:0<e.length})}var t;t=P,O.forEach(C.afterPasteComponentCallbacks,function(e){e(C,t)})})},hideApplyModeFromClipboardSuggestion:i,canApplyModeFromClipboard:A,removePastedComponentAndApplyModeFromClipboard:function(){var e=C.store.getState(),t=D.editorPlugins.applyModeFromClipboard.selectors.selectApplyModeFromClipboardSuggestion(e),o=t.container;i(),C.components.remove(t.selectedComponents),C.dsActions.waitForChangesApplied(function(){C.copyPaste.applyModeFromClipboard(o)})},applyModeFromClipboard:function(e){var t=C.clipboard.getItem().value,o=O.map(t.components,function(e){return{compRef:e.compRef,compDefinition:e.serializedComp}});if(e&&1===e.length){var i=C.components,n=e[0];if(O.isEqual(n,t.containerWithModes)){var a=i.modes.getModes(n);if(a&&0<a.length){var r=i.modes.getComponentActiveModeIds(n);if(1===O.size(r)){var s=O.keys(r)[0];i.modes.applyComponentToMode(o,s);var l=O.map(o,"compRef");C.dsActions.waitForChangesApplied(function(){C.selection.selectComponentByCompRef(l)})}}}}C.history.add("apply mode from clipboard"),C.tabIndicationState.activateApplyAnimation(!0)},duplicate:function(e){if(O.isEmpty(e))return[];C.panelManager.closeAllPanels();var t=C.selection.getSelectedComponents(),o=C.components.asArray(e),i=C.components.getType(t);if(C.duplicatePlugins[i])return C.duplicatePlugins[i](t);t=C.components.getComponentsWhichDontHaveAncestorsInTheArray(t),o=C.components.getComponentsWhichDontHaveAncestorsInTheArray(o);var n=C.components.getContainer(e);if(!C.components.is.duplicatable(o,n))return[];O.isEqual(o,t)&&C.selection.deselectComponents();var a=m(o),r=O.map(a,"newPointer");return C.dsActions.waitForChangesApplied(function(){R.isOpen("se_multilingual")&&O.forEach(a,function(e){var t=e.newPointer,o=e.translationData,i=e.dataItemIds,n=O.zipObject(i,k.dataUtils.getDataItemIds(C,t));C.dsActions.language.copyTranslationData(t,o,n)}),C.selection.selectComponentByCompRef(r),C.openFirstTimePanel(r)}),r},canCopyPage:o,copyPage:function(e){if(o(e)){var t=C.pages.serialize(e);C.clipboard.setItem(t,b.CLIPBOARD_ITEM_TYPE.PAGE)}},pastePage:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).menuItemToPasteAfter;if(h()){var t,o,i,n,a,r,s=C.clipboard.getItem().value,l=(t=s,o={isCrossSite:C.clipboard.isCrossSite()},i=o.isCrossSite,n=y.utils.pageTitleUtils.generateDuplicatedTitle(t.data.title),a=Object.assign({},t.data,i?{title:n,cacheMaxAgeHours:null,cacheMode:"auto"}:{title:n}),r=i?void 0:t.style,Object.assign({},t,{data:a,style:r})),c=C.pages.add(l.data.title,l);C.dsActions.waitForChangesApplied(function(){var t;Promise.all([function(e,t){if(!t)return Promise.resolve();var o=t.parent?t.parent.id:t.id,i=C.dsRead.menu.getById("CUSTOM_MAIN_MENU"),n=C.menus.getMenuItemByPageId(e,i.items).id;return new Promise(function(e){C.menus.moveMenuItemAfterTarget(i,n,o,e)})}(c.id,e),(t=c.id,new Promise(function(e){C.pages.navigateTo(t,e)}))]).then(function(){C.openPagesPanel({renameEnabled:!0})})})}},hasComponentToPaste:function(){return C.clipboard.hasItemOfType(b.CLIPBOARD_ITEM_TYPE.COMPONENT)},hasPageToPaste:h}}}}),define("rEditor/app/APISections/wixStoresFlowAPI",["lodash","util"],function(e,t){"use strict";return{create:function(){return{isSiteInWixStoreTestDrive:function(){return e.includes(t.editorModel.metaSiteFlags,"EComTestDrive")}}}}}),define("rEditor/app/APISections/editorUI",[],function(){"use strict";return{create:function(i){return{scroll:{getScroll:function(){return i.scroll.get()},setScroll:function(e){return i.scroll.scrollTo(e)},animateScroll:function(e,t,o){i.scroll.animateScrollTo(e,t,o)},addListener:function(e){return i.scroll.addScrollListener(e)},removeListener:function(e){return i.scroll.removeScrollListener(e)}},stage:{getEditingAreaLayout:function(){return i.getEditingAreaPosition()},getMobileFrameLayout:function(){return i.getMobileFramePosition()}},focus:{setOnEditor:function(){i.setFocus()}}}}}}),define("rEditor/app/APISections/wixCode",["lodash","constants","stateManagement"],function(r,s,l){"use strict";return{create:function(a){var e="wixCodeLoaded",t=[];return{isLoaded:function(){return a.store.getState()[e]},onCodeEditorLoaded:function(){t.forEach(function(e){return e()})},registerToCodeEditorLoaded:function(e){t.push(e)},setLoaded:function(){a.toggleEditorStateParam(e,!0)},prepareBeforePreview:function(e){var t="previewingStatus";if(a.wixCode.isProvisioned()){a.savePublish.lockSavePublish(),a.toggleEditorStateParam(t,s.PROGRESS_STATUS.IN_PROGRESS);var o=function(){return function(e){var t,o,i=l.editorPlugins.dynamicPages.selectors.getRouterId(a.store.getState());if(i)return t={innerRoute:l.editorPlugins.dynamicPages.selectors.getSelectedInnerRoute(a.store.getState()),routerId:i},o=a.dsRead.data.createItem("DynamicPageLink"),r.assign(o,{innerRoute:t.innerRoute||"/",routerId:t.routerId}),void a.pages.navigateTo(o,e);e()}(function(){n(),i()})};a.wixCode.isLoaded()?(a.wixCode.console.clear(),a.wixCode.fileSystem.flush({origin:a.wixCode.fileSystem.FLUSH_ORIGINS.PREVIEW}).then(o).catch(function(){a.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"WixCode_PreviewSaveFail_Title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",stepsTitle:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION_BOLD",steps:["SAVE_PUBLISH_ERROR_OPTION_1","WixCode_PreviewSaveFail_Step2_Text","WixCode_DeveloperModeFail_Step3_Text"],helpMessage:"WixCode_PreviewSaveFail_Learn_More_Label",helpLinkMessage:"WixCode_PreviewSaveFail_Learn_More_Link",helpLink:"",errorCode:"1234"}),a.savePublish.unlockSavePublish(),n()})):o()}else i();function i(){a.savePublish.unlockSavePublish(),e()}function n(){a.toggleEditorStateParam(t,s.PROGRESS_STATUS.IDLE)}}}}}}),define("rEditor/app/APISections/columns",["lodash","stateManagement","util","rEditor/app/serializedComponentPlugins"],function(P,e,C,T){"use strict";var c=e.editorPlugins.components.selectors;return{create:function(u){var o="compPanels.panels.StripColumnsContainer.managePanel",d=5,g=P.times(d,function(){return 1}),m={LEFT:0,CENTER:50,RIGHT:100},i={BoxSlideShow:!0,StripContainerSlideShow:!0},a={background:{type:"BackgroundMedia",mediaRef:null,alignType:"center",fittingType:"fill",color:"#FFFFFF",colorOpacity:0,colorOverlay:"",colorOverlayOpacity:1,imageOverlay:""}},f=!1;function n(e){return e.components=P.reject(e.components,u.components.is.fullWidthByStructure),P.forEach(e.components,n),e}function h(e){var t=P.sum(e);return P.map(e,function(e){return 100*e/t})}function r(e){var t=P(e).thru(u.components.getChildren).keyBy("id").mapValues(u.components.layout.get).mapValues("width").value(),o=P.reduce(t,function(e,t){return e+t},0);return P.mapValues(t,function(e){return Math.round(100*e/o)})}function y(e,o,t){var i,n,a=b(e),r=u.components.getChildren(e);i=o,n=980/P.sum(i),o=P.map(i,function(e){return e*n}),P.forEach(r,function(e,t){u.components.layout.update(e,{width:o[t]},!0)}),E(r,a,h(o)),t||u.history.add("Change Columns Proportions")}function b(e){var t=u.components.getChildren(e);return h(P(t).map(u.components.layout.get).map("width").value())}function s(a){var e=P.partialRight(u.components.serialize,null,null,null,null,null,!0),t=P(a).thru(e).thru(n).value(),r=u.components.getContainer(a),o=u.components.getChildren(r);if(o.length!==d&&!f){f=!0;var s=P.findIndex(o,a)+1,l=b(r);l.splice(s,0,l[s-1]);var c=h(l);t=T.runCopyPluginOnSerializedComponent(t,a,u),t=T.runPastePluginOnSerializedComponent(t,u);var p=u.components.add(r,t);return u.dsActions.waitForChangesApplied(function(){var e,t,o,i,n;e=p,t=s,o=!0,P.isUndefined(t)||u.components.arrangement.moveToIndex(e,t,o),i=r,n=!0,u.components.getChildren(i).length===d&&y(i,g,n),E(u.components.getChildren(r),l,c),f=!1,u.dsActions.waitForChangesApplied(function(){var e=u.dsRead.language.component.getTranslations(a);if(!P.isEmpty(e)){var t=P.zipObject(C.dataUtils.getDataItemIds(u,a),C.dataUtils.getDataItemIds(u,p));u.dsActions.language.copyTranslationData(a,e,t)}u.dsActions.waitForChangesApplied(function(){u.history.add("added column")})})}),p}}function l(e){var t=c.getCompTypeSuffix(e,u.dsRead);return!!i[t]}function v(e){var t=u.components.getChildren(e);return P(t).reject(l).flatMap(v).union(t).value()}function S(e,t,o,i){var n=u.components.layout.getRelativeToStructure(t),a=n.x-e.x,r=n.width,s=u.components.is.resizable(t)?r*o:r,l={width:s};if(!u.components.is.group(t)){if(i===m.LEFT)l.x=a*o;else if(i===m.CENTER){var c=(a+r/2)*o;l.x=c-s/2}else{var p=(a+r)*o;l.x=p-s}l.x+=e.x,u.components.layout.updateRelativeToStructure(t,l,!0)}}function E(e,p,d){P.forEach(e,function(e,t){var o,i,n,a,r=(o=p,n=d[i=t],a=o[i],n&&a?n/a:null);if(r){var s=v(e),l=u.components.properties.get(e).alignment,c=u.components.layout.getRelativeToStructure(e);P.forEach(s,function(e){S(c,e,r,l)})}})}function t(e){return 1===u.components.getChildren(e).length}return{isColumn:function(e){return"wysiwyg.viewer.components.Column"===u.components.getType(e)},isStrip:function(e){return"wysiwyg.viewer.components.StripColumnsContainer"===u.components.getType(e)},isMultiColumnsStrip:function(e){return!t(e)},isSingleColumnStrip:t,addColumn:function(e){var t=u.components.getChildren(e),o=P.last(t);if(t.length!==d)return s(o)},duplicateColumn:s,removeColumn:function(e,t,o){var i=o||P.partial(u.dsActions.components.remove,e),n=u.components.getContainer(e),s=u.components.getChildren(n),l=r(n);return i(),new Promise(function(t){u.dsActions.waitForChangesApplied(function(){var e=r(n);P.forEach(e,function(e,t){var o=e/l[t],i=P.find(s,{id:t}),n=v(i),a=u.components.properties.get(i).alignment,r=u.components.layout.getRelativeToStructure(i);P.forEach(n,function(e){S(r,e,o,a)})}),1===P.keys(e).length&&u.components.design.update(n,a,void 0,!0),t()})})},canAdd:function(e){return u.components.getChildren(e).length<d},proportions:{set:y,get:b,flip:function(e){y(e,b(e).reverse())},toPercentages:h},columnAlignment:{set:function(e,t){u.components.properties.update(e,{alignment:t})},get:function(e){return u.components.properties.get(e).alignment}},move:{left:function(e){u.components.arrangement.moveBackward(e)},right:function(e){u.components.arrangement.moveForward(e)}},manage:{setManagedColumn:function(e,t){u.updateState({managedColumnPointer:e},t)},getManagedColumn:function(){var e=u.store.getState().managedColumnPointer;return e&&u.components.is.exist(e)?e:null},openPanel:function(e,t){P.isArray(t)&&(t=P.head(t)),t=t||P(e).thru(u.components.getChildren).head(),u.columns.manage.setManagedColumn(t,function(){u.selection.selectComponentByCompRef(e),u.panelManager.openComponentPanel(o,{selectedComponent:e})})},closePanel:function(){u.columns.manage.setManagedColumn(null,function(){u.panelManager.closePanelByName(o)})}}}}}}),define("rEditor/app/APISections/pagesWrapper",["experiment","lodash","core","util","rEditor/utils/removeUtil","rEditor/app/updateOperationsPlugins","platform","platformEvents","constants","stateManagement"],function(E,P,n,C,p,d,u,g,T,m){"use strict";var f=m.editorPlugins.preview.selectors.getPreviewMode,_=C.dataRouterPagesMenuItemPrefixUtils,I=C.collectionNamespaceUtils,h=C.addPageRouterActionUtils;return{create:function(b){function i(e,t){var o,i;o=e,i=t,C.keyboardShortcuts.enable(),P(b.pageNavigationCallbacks).concat(i).compact().forEach(function(e){e(o)}),a();var n=b.dsRead.pages.getReference(e);b.dsActions.platform.notifyAppsOnCustomEvent(g.factory.focusedPageChanged({pageRef:n})),C.fedopsLogger.interactionEnded(C.fedopsLogger.INTERACTIONS.NAVIGATE_TO_PAGE)}function a(){var e=b.store.getState();f(e)||(b.shouldUpdateEditorScrollAfterHeightUpdate=!0,b.applyPreviewScrollToEditorScroll())}function s(e,o){return P.reduce(e,function(e,t){return P.isObject(t)?e.push(P.defaults(t,{category:o,id:t.event||t.title||t.type})):e.push({title:C.translate(t),type:t,id:t,category:o}),e},[])}function t(e,t){var o=e.pages.data.get(t);return P.get(o,"title")||""}function v(){return C.translate("DYNAMIC_PAGES_APP_TYPE_DATA_BINDING")}function S(e,t){var o=b.dsRead.platform.editorApps.DATA_BINDING.appDefId,i=b.dsRead.platform.editorApps.SANTA_MEMBERS.appDefId;switch(e){case o:return v();case i:var n=b.dsRead.platform.getAppManifest(i);return P.get(n,"routers.pagesGroups."+t+".label")}return C.translate("DYNAMIC_PAGES_APP_TYPE_CUSTOM_ROUTER")}function r(e,t,o){C.fedopsLogger.interactionStarted(C.fedopsLogger.INTERACTIONS.ADD_PAGE),t&&(t.data.pageUriSEO=b.dsRead.pages.data.pageUriSEO.getValid("",t.data.pageUriSEO));var i=b.dsActions.pages.add(e,t,o);return C.fedopsLogger.interactionEnded(C.fedopsLogger.INTERACTIONS.ADD_PAGE),i}function e(){return b.dsRead?b.dsRead.pages.getCurrentUrlPageId():null}function l(e,o){var t,i,n=P.filter(e,function(e){var t=e.type;return P.includes(o,t)}),a=P.find(n,{type:u.constants.pages.page_settings.pageInfo.type}),r=P.find(n,{type:u.constants.pages.page_settings.seo.type}),s=[];return a&&s.push((t=a,P.assign(t,{title:C.translate("Pages_Actions_Page_Settings"),icon:"settingsAction"}))),r&&s.push((i=r,P.assign(i,{icon:"seoSettingsAction"}))),s}function c(e){return P(e).map(function(e){switch(e.type){case u.constants.members.router_actions.view_site_members.type:return function(e){if(b.dsRead.generalInfo.isTemplate())return null;var t=b.site.getMetaSiteId();return P.assign(e,{title:C.translate(u.constants.members.router_actions.view_site_members.title),icon:u.constants.members.router_actions.view_site_members.icon,callback:function(){window.open("https://www.wix.com/my-account/sites/"+t+"/contacts/?tag=contacts-site_members_approved")}})}(e);case u.constants.members.router_actions.open_signup_settings.type:return o=e,P.assign(o,{title:C.translate(u.constants.members.router_actions.open_signup_settings.title),icon:u.constants.members.router_actions.open_signup_settings.icon,callback:function(){b.panelManager.openPanel("panels.focusPanels.siteMembersSettingsPanel",{panelName:"panels.focusPanels.siteMembersSettingsPanel"},!0)}});case u.constants.pages.page_actions.rename.type:return t=e,P.assign(t,{icon:u.constants.pages.page_actions.rename.icon,title:C.translate(u.constants.pages.page_actions.rename.title)});default:return e}var t,o}).compact().value()}var o=function(e,t,o){return c(s(b.platform.getPagesDataFromAppManifest(e,t,{advanced:b.developerMode.isEnabled(),mobile:b.isMobileEditor()},o),t))||[]};return{add:r,navigateTo:function(e,t,o){C.fedopsLogger.interactionStarted(C.fedopsLogger.INTERACTIONS.NAVIGATE_TO_PAGE),b.store.dispatch(m.inlinePopup.actions.closeAll(!0)),b.selection.deselectComponents(),C.keyboardShortcuts.disable(),b.dsActions.pages.navigateTo(e),b.dsActions.waitForChangesApplied(function(){i(b.dsRead.pages.getFocusedPageId(),t)}),o||b.developerMode.setContext(b.developerMode.createContext(T.DEVELOPER_MODE.CONTEXT_TYPES.PAGE))},navigateToAndScroll:function(e,t,o){C.fedopsLogger.interactionStarted(C.fedopsLogger.INTERACTIONS.NAVIGATE_TO_PAGE),b.selection.deselectComponents(),b.dsActions.pages.navigateToAndScroll(e,t,a),b.dsActions.waitForChangesApplied(P.partial(i,e,o)),b.developerMode.setContext(b.developerMode.createContext(T.DEVELOPER_MODE.CONTEXT_TYPES.PAGE))},getCurrentUrlPageTitle:function(){return b.dsRead?t(b.dsRead,e()):null},getCurrentUrlPageId:e,getPageTitle:function(e){return t(b.dsRead,e)},remove:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:P.noop,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:P.noop,i=arguments[3];C.ravenUtils.breadcrumb(C.fedopsLogger.INTERACTIONS.REMOVE_PAGE,{isRemovingTpa:i,pageId:e}),C.fedopsLogger.interactionStarted(C.fedopsLogger.INTERACTIONS.REMOVE_PAGE),b.selection.deselectComponents(),p.removePage(b,b.dsRead,b.dsActions,b.removePagePlugins,e,function(){t(),C.fedopsLogger.interactionEnded(C.fedopsLogger.INTERACTIONS.REMOVE_PAGE)},function(){o(),C.fedopsLogger.interactionEnded(C.fedopsLogger.INTERACTIONS.REMOVE_PAGE)},i)},beforePagesRemoveHook:function(e,t){var o=b.homePage.get(),i=void 0;if(P.includes(e,o)){var n=b.mainMenu.getFirstNonHomePageMenuItem(e);if(n)i=n.pageData.id;else{var a=r(C.translate("Pages_Menu_Add_New_Page"));i=a.id}b.dsActions.waitForChangesApplied(function(){b.homePage.set(i),o=i.replace(/^#/,""),b.pages.navigateTo(o,t)})}else b.pages.navigateTo(o,t)},isPageExist:function(e){return b.dsRead.pages.doesPageExist(e)},getPrimaryContainer:function(){var e=m.editorPlugins.pages.selectors.getFocusedPage(b.store.getState());if(!b.dsRead.pages.isWidgetPage(e.id))return e;var t,o=function(e){return P(e).filter(function(e){return b.dsRead.components.is.container(e)}).head()},i=o(b.components.getChildren(e));return t=i,"platform.components.AppWidget"===b.components.getType(t)&&(i=o(b.components.getChildren(i))),i||e},isHomePage:function(e){return e===b.homePage.get()},serialize:function(e){return b.dsRead.pages.serialize(e,!0)},data:{update:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];t.isLandingPage&&b.selection.deselectComponents(),t.pageUriSEO&&(t.pageUriSEO=b.dsRead.pages.data.pageUriSEO.getValid(e,t.pageUriSEO)),t=n.utils.updateDataUtil.fixData(t),b.dsActions.pages.data.update(e,t,o),b.dsActions.waitForChangesApplied(function(){d.updatePagePlugins.run(b,e)})}},background:{update:function(e,t,o){t=n.utils.updateDataUtil.fixData(t),b.dsActions.pages.background.update(e,t,o)}},transitions:{set:function(e){b.dsActions.pages.transitions.set(e),b.history.add("page transition")}},popupPages:{close:function(){b.hideFloatingBubble();var e=b.dsRead.pages.getPrimaryPageId();b.pages.navigateTo(e)},getCurrentPopup:function(){var e=b.dsRead.pages.popupPages.getCurrentPopupId();return b.components.get.byId(e)},getCurrentPopupData:function(){var e=b.dsRead.pages.popupPages.getCurrentPopupId();return b.dsRead.pages.data.get(e)},getPopupContainer:function(e){if(!(e=e||b.dsRead.pages.popupPages.getCurrentPopupId()))return null;var t=b.dsRead.components.get.byId(e);return P.head(b.dsRead.components.get.byType(T.COMP_TYPES.POPUP_CONTAINER,t))},getOpenBehaviorsForPopups:function(){var e,t,o,i=(e=["type","name"],t=b.actions.getDefinition("load"),o=b.behaviors.getDefinition("openPopup"),{action:P.pick(t,e),behavior:P.pick(o,e)});return P(b.dsRead.pages.getPageIdList(!0)).map(P.ary(b.components.get.byId,1)).flatMap(P.ary(b.behaviors.get,1)).filter(i).map(function(e){return{pageId:e.action.sourceId,popupId:e.behavior.targetId,params:e.behavior.params}}).value()},getOpenBehaviorsForPopupWithId:function(e){return P.filter(b.pages.popupPages.getOpenBehaviorsForPopups(),{popupId:e})},getDataListOrdered:function(){return P.sortBy(b.dsRead.pages.popupPages.getDataList(),"id")},isFullWidthPopupOpened:function(){if(!b.dsRead.pages.popupPages.isPopupOpened())return!1;var e=b.components.properties.get(b.pages.popupPages.getPopupContainer());return e&&"fullWidth"===e.alignmentType}},dynamicPages:{getMenuItems:function(){function r(e,t){return{id:t.id,label:t.title,type:{isPage:!0,isDynamicPage:!0,routerType:e},isVisible:!0,isVisibleMobile:!0,pageData:t}}function i(e,t){return P.upperFirst(e)+" "+C.translate("DYNAMIC_PAGES_ROUTER_PAGES")+" ("+t+")"}function n(e){var t=e.id,o=e.label,i=e.prefix,n=e.routerType,a=e.pages;return{id:t,isRoot:!0,isVisible:!0,isVisibleMobile:!0,label:o,prefix:i,routerType:n,type:{isRouter:!0},items:P.map(a,P.partial(r,n))}}function e(e){return P(e).reject("hide").map(function(e,t){return n({id:"router_"+t,label:e.label||i(e.prefix,S(e.appDefinitionId,e.group)),prefix:e.prefix,routerType:(o=e.appDefinitionId,o===b.dsRead.platform.editorApps.DATA_BINDING.appDefId?T.ROUTER_TYPES.DATA_BINDING:T.ROUTER_TYPES.CUSTOM_ROUTER),pages:e.pages});var o}).value()}var t,l,o,a,c,p,s,d,u=(t=b.dsRead.routers.pages.getDynamicPagesList(),l=[],o=P.groupBy(t,"appDefinitionId"),P.forEach(o,function(e){var t=P.groupBy(e,"group");t[void 0]&&(l=l.concat(t[void 0]),delete t[void 0]),P.forEach(t,function(e){var t,o,i,n,a,r=(t=e[0].appDefinitionId,o=e[0].appDefinitionName,i=e[0].group,n=b.dsRead.platform.getAppManifest(t),(a=P.get(n,"routers.pagesGroups."+i+".label"))?a+" "+C.translate("DYNAMIC_PAGES_ROUTER_PAGES"):o+" ("+i+")"),s=P.reduce(e,function(e,t){return e.pages=e.pages.concat(t.pages),e},P.assign({},e[0],{prefix:e[0].prefix,label:r,pages:[]}));l=l.concat(s)})}),l);if(E.isOpen("se_groupDataRouterPagesByNamespaceOrCollection")){var g=(s=u,d=b.dsRead.platform.editorApps.DATA_BINDING.appDefId,P.groupBy(s,function(e){return e.appDefinitionId===d?"dataRouters":"nondataRouters"})),m=g.dataRouters,f=g.nondataRouters,h=(a=m,c={},p={},P.forEach(a,function(e){var t=b.dsRead.routers.getRouterRef.byPrefix(e.prefix),o=b.dsRead.routers.get.byRef(t),r=o.config,s=o.pages;e.pages.forEach(function(t){var e=P.findKey(s,function(e){return e===t.id}),o=P.find(r.patterns,{pageRole:e}).config.collection;if(I.doesCollectionIdHaveNamespace(o)){var i=I.getNamespaceFromCollectionId(o),n=c[i]||[];c[i]=n.concat(t)}else{var a=p[o]||[];p[o]=a.concat(t)}})}),{pagesByCollectionNamespace:c,pagesByNamespacelessCollectionId:p}),y=h.pagesByNamespacelessCollectionId;return[].concat(_toConsumableArray(P(h.pagesByCollectionNamespace).map(function(e,t){return n({id:"collection_namespace_"+t,label:i(t,v()),prefix:_.createPrefixForCollectionNamespace(t),routerType:T.ROUTER_TYPES.DATA_BINDING,pages:P.sortBy(e,"title")})}).sortBy("label").value()),_toConsumableArray(P(y).map(function(e,t){return n({id:"collection_id_"+t,label:i(t,v()),prefix:_.createPrefixForCollectionId(t),routerType:T.ROUTER_TYPES.DATA_BINDING,pages:P.sortBy(e,"title")})}).sortBy("label").value()),_toConsumableArray(e(f)))}return e(u)},getRouterPageType:function(e){var t=b.dsRead.routers.getRouterDataForPageIfExist(e);return t?S(t.appDefinitionId,t.group):""},getDynamicPageActions:function(e,t,o){var i=b.dsRead.pages.getReference(e);if(!i)return[];var n=b.dsRead.routers.getRouterRef.byPage(i);if(!n)return[];var a=b.dsRead.routers.get.byRef(n),r=c(s(b.platform.routers.getDataFromRoutersAppManifest(a.appDefinitionId,t),t));return"pageSettings"!==t||P.isEmpty(o)||(r=l(r,o)),r||[]},getRouterActionByPrefix:function(e){if(E.isOpen("se_groupDataRouterPagesByNamespaceOrCollection")&&_.isValidPrefix(e))return s([h.getAddDataRouterPageAction(b)]);var t=b.dsRead.routers.getRouterRef.byPrefix(e);if(!t)return[];var o,i,n=b.dsRead.routers.get.byRef(t),a=c(s(b.platform.routers.getDataFromRoutersAppManifest(n.appDefinitionId,"routerActions"),"routerActions"));return o=a,i=n,(P.isEmpty(i.pages)?o:o?P.reject(o,{event:"removeRouterClicked"}):[])||[]},getActionByAppDefId:function(e,t,o){var i=c(s(b.platform.routers.getDataFromRoutersAppManifest(e,t),t));return"pageSettings"!==t||P.isEmpty(o)||(i=l(i,o)),i||[]}},appPages:{getApplicationSettings:function(e){return b.platform.getPagesDataFromAppManifest(e,"applicationSettings",{advanced:b.developerMode.isEnabled(),mobile:b.isMobileEditor()})},getApplicationActions:function(e){return o(e,"applicationActions")},getPageActions:function(e,t){return o(e,"pageActions",t)},getPageSettings:function(e,t,o){var i=b.platform.getPagesDataFromAppManifest(e,"pageSettings",{advanced:b.developerMode.isEnabled(),mobile:b.isMobileEditor()},o);return!P.isEmpty(t)&&i?l(i,t):i||[]},getPageDescriptor:function(e,t){return b.platform.getPagesDataFromAppManifest(e,"pageDescriptors",{advanced:b.developerMode.isEnabled(),mobile:b.isMobileEditor()},t)}}}}}}),define("rEditor/app/APISections/layoutersWrapper",["util"],function(e){"use strict";var o=e.array.checkSingleAndValidate;return{create:function(t){return{getNonMasterChildren:function(e){return o(t.dsRead.layouters.getNonMasterChildren,e)},getParentCompWithOverflowHidden:function(e){return o(t.dsRead.layouters.getParentCompWithOverflowHidden,e)}}}}}),define("rEditor/app/APISections/platformWrapper",["lodash","util"],function(a,r){"use strict";return{create:function(i){function n(e,t){var o=i.dsRead.platform.getAppManifest(e);return a.get(o,t)}return i.editorEventRegistry.register(i.editorEventRegistry.constants.events.ADD_PANEL_LOADED,function(){i.dsActions.platform.registerToManifestAdded(function(e,i){var t=a.get(e,"controllersStageData.langs");a.forEach(t,function(e,t){var o={};o[i.applicationId+"_"+t]=e,r.translate.addLangs(o)})})}),{routers:{getDataFromRoutersAppManifest:function(e,t){return n(e,["routers",t,"default"])||[]}},controllers:{getFirstTimeExperienceFromStageData:function(e){return a.get(i.platform.controllers.getStageData(e),"firstTimeExperience")}},collections:{collectionsTree:{getContextMenuActions:function(){return a.reduce(i.dsRead.platform.getInstalledEditorApps(),function(e,t){var o=t.appDefinitionId,i=t.applicationId;return e.concat(a.map(n(o,"collections.collectionsTree.contextMenuActions"),function(e){return a.assign({},e,{applicationId:i})}))},[])}}}}}}}),define("rEditor/app/APISections/pinModeWrapper",["lodash","util","stateManagement","experiment","constants","helpIds"],function(r,s,l,c,o,p){"use strict";var i=l.editorPlugins.pinMode.actions,n=l.editorPlugins.preview.selectors.getPreviewMode,d=l.editorPlugins.userPreferences.selectors.getSessionUserPreferences;return{create:function(a){var t=a.store.dispatch;return{closeAndCheckSizeRestrictions:function(){var e;"old"!==c.getValue("se_notificationCenter")&&0===(d(o.USER_PREFS.PIN_TO_SCREEN.PIN_COUNT)(a.store.getState())||0)&&(a.store.dispatch(l.editorPlugins.notifications.actions.showUserActionNotification({message:"Notifications_Pinned_Mobile_Text",title:"Notifications_Pinned_Mobile_Text",type:"info",link:{caption:"Notifications_Pinned_Mobile_Link",onNotificationLinkClick:function(){a.panelManager.openHelpCenter(p.NOTIFICATIONS.PIN_TO_SCREEN)}}})),a.store.dispatch(l.editorPlugins.userPreferences.actions.setSessionUserPreferences(o.USER_PREFS.PIN_TO_SCREEN.PIN_COUNT,-4))),t(i.close()),e=a.store.getState(),n(e)||a.dsActions.waitForChangesApplied(function(){var e=a.store.getState(),t=l.editorPlugins.selection.selectors.getSelectedCompsRefs(e),o=a.components.layout.getDock(t);if(!r.isUndefined(o)){var i=s.pinModeUtils.getDockedDirection(o),n=a.components.layout.get(t);"old"===c.getValue("se_notificationCenter")&&s.pinModeUtils.checkSizeRestrictions(i,n)&&a.panelHelpers.openPinModeSizeRestrictionPanel({state:"on pin",title:"Notification_Box_PinToScreen_ElementTooLarge_postPin_Title",content:"Notification_Box_PinToScreen_ElementTooLarge_postPin_Message"})}})},checkSizeRestrictionsAndShowNotification:function(){var e=a.store.getState();n(e)||a.dsActions.waitForChangesApplied(function(){var e=a.store.getState(),t=l.editorPlugins.selection.selectors.getSelectedCompsRefs(e),o=a.components.layout.getDock(t);if(!r.isUndefined(o)){var i=s.pinModeUtils.getDockedDirection(o),n=a.components.layout.get(t);s.pinModeUtils.checkSizeRestrictions(i,n)&&a.store.dispatch(l.editorPlugins.notifications.actions.showUserActionNotification({message:"Notifications_Pinned_Large_Element_Text",title:"Notifications_Pinned_Large_Element_Text",type:"warning",link:{caption:"Notifications_Learn_More_Link",onNotificationLinkClick:function(){a.panelManager.openHelpCenter(p.NOTIFICATIONS.PINNED_TOO_BIG)}}}))}})}}}}}),define("rEditor/app/APISections/promotionsWrapper",["lodash","util","staticAssets","stateManagement","coreBi","constants","experiment"],function(r,i,s,o,l,c,p){"use strict";return{create:function(n){var a=void 0;function e(e){var t=r.template("panels/focusPanels/<%= promotionName %>PromotionPopup.png"),o=r.template("panels/focusPanels/<%= promotionName %>PromotionPopupRetina.png");return 2<=i.browserUtil.getDevicePixelRatio()?i.media.getMediaUrl(s.staticAssetsMap[o({promotionName:e})]):i.media.getMediaUrl(s.staticAssetsMap[t({promotionName:e})])}function t(){var e="photo-promo-popup-displayed";o.editorPlugins.userPreferences.selectors.getSessionUserPreferences(e)(n.store.getState())||(n.store.dispatch(o.editorPlugins.userPreferences.actions.setSessionUserPreferences(e,!0)),n.promotions.photography.displayPopup())}return{initPromotions:function(){var e;a=(e=o.editorPlugins.userProfile.selectors.getUserProfile(n.store.getState()),r.get(e,["post_reg_category","value"])||"").toLowerCase(),function(){if(p.isOpen("musicPromotionFixed")||p.isOpen("musicPromotionRotation")){var e=n.promotions.music;n.dsRead.tpa.app.registerOnInstalled(c.MUSIC_PROMO.APP_DEFINITION_ID,e.displayPopup),e.isActive()&&e.displayPopup()}}(),(p.isOpen("photographyPromotionFixed")||p.isOpen("photographyPromotionRotation"))&&r.forEach(c.PHOTOGRAPHY_PROMO.APP_DEFINITION_IDS,function(e){n.dsRead.tpa.app.registerOnInstalled(e,t)})},music:{isActive:function(){if(p.isOpen("musicPromotionFixed")||p.isOpen("musicPromotionRotation")){var e=n.dsRead.generalInfo.getSiteOriginalTemplateId(),t=r.includes(c.MUSIC_PROMO.TEMPLATE_IDS,e),o=n.dsRead.tpa.app.isInstalled(c.MUSIC_PROMO.APP_DEFINITION_ID);return t||o||r.includes(a,"music")}return!1},displayPopup:function(){n.panelManager.openPanel("panels.focusPanels.promotionModalPanel",{className:"music-promo-popup",headerFirstLineText:"MUSIC_PROMOTION_HEADER_2",imageSrc:e("music"),bodyText:"MUSIC_PROMOTION_BODY_LINE1",bodyLinkText:"MUSIC_PROMOTION_BODY_B4_ENDS",bodyBottomText:"MUSIC_PROMOTION_BODY_EASY",actionText:"MUSIC_PROMOTION_BUTTON_SUBMIT",actionUrl:"MUSIC_PROMOTION_BUTTON_SUBMIT_URL",biEvent:l.events.musicPromotionPopup.submit_video_clicked})}},photography:{isActive:function(){if(p.isOpen("photographyPromotionFixed")||p.isOpen("photographyPromotionRotation")){var e=n.dsRead.generalInfo.getSiteOriginalTemplateId().toUpperCase(),t=r.includes(c.PHOTOGRAPHY_PROMO.TEMPLATE_IDS,e),o=r.some(c.PHOTOGRAPHY_PROMO.APP_DEFINITION_IDS,r.bind(n.dsRead.tpa.app.isInstalled,n)),i=r.includes(a,"photography")||r.includes(a,"design");return t||o||i}return!1},displayPopup:function(){n.panelManager.openPanel("panels.focusPanels.promotionModalPanel",{className:"photo-promo-popup",headerFirstLineText:"PHOTO_PROMO_POP_HEADER1",headerSecondLineText:"PHOTO_PROMO_POP_HEADER2",imageSrc:e("photo"),bodyText:"PHOTO_PROMO_POP_TEXT1",isImageLinkActive:!1,actionText:"PHOTO_PROMO_POP_BUTTON_TEXT",actionUrl:"PHOTO_PROMO_POP_BUTTON_URL",biEvent:l.events.photographyPromotionPopup.submit_video_clicked})}}}}}}),define("rEditor/app/APISections/togglePreviewWrapper",["lodash","baseUI","constants","platformEvents","util","stateManagement"],function(l,c,p,n,d,u){"use strict";var a=u.editorPlugins.preview.selectors.getPreviewMode;return{create:function(r){var s=[];function o(e){var t,o,i,n,a=l.isFunction(e)?[e]:[];r.developerMode.setContext(r.developerMode.createContext(p.DEVELOPER_MODE.CONTEXT_TYPES.PAGE)),t=r.store.getState().eventCounters,o=l.defaults({clearTextSelection:t.clearTextSelection+1},t),r.store.dispatch(u.editorPlugins.services.actions.setState({eventCounters:o})),c.tooltipManager.hide(p.ROOT_COMPS.TOOLTIPS.FIRST_TIME_EXIT_POPUP_MODE),d.keyboardShortcuts.setContext(d.keyboardShortcuts.CONTEXTS.PREVIEW),i=a,n=s.concat(i),r.updateState({previewMode:!0,contextMenu:null},function(){l.invokeMap(n,Function.call),r.dsActions.waitForChangesApplied(function(){r.enableNativeComponentsForPreview(!0),r.actions.executeAnimationsInPage(),d.fedopsLogger.interactionEnded(r.isMobileEditor()?d.fedopsLogger.INTERACTIONS.GO_TO_MOBILE_PREVIEW:d.fedopsLogger.INTERACTIONS.GO_TO_DESKTOP_PREVIEW)})})}function t(e){var t=i();d.ravenUtils.breadcrumb("Clicked on go to Editor/Preview",{isGoingToPreviewMode:t}),r.isMobileEditor()?d.fedopsLogger.interactionStarted(t?d.fedopsLogger.INTERACTIONS.GO_TO_MOBILE_PREVIEW:d.fedopsLogger.INTERACTIONS.GO_TO_MOBILE_EDITOR):d.fedopsLogger.interactionStarted(t?d.fedopsLogger.INTERACTIONS.GO_TO_DESKTOP_PREVIEW:d.fedopsLogger.INTERACTIONS.GO_TO_DESKTOP_EDITOR),t&&(r.panelManager.closeAllPanels(),r.selection.deselectComponents()),t||r.enableNativeComponentsForPreview(t),r.prepareDocumentForPreviewMode(t),r.setRenderPlugins(t),r.store.dispatch(u.inlinePopup.actions.closeAll(!0)),r.dsActions.waitForChangesApplied(function(){t?o(e):function(e){r.dsActions.components.modes.resetAllActiveModes();var t=r.site.getScroll();r.scroll.scrollTo({scrollLeft:t.x,scrollTop:t.y}),r.updateState({previewMode:!1},function(){r.hideFloatingBubble(),d.keyboardShortcuts.setContext(d.keyboardShortcuts.CONTEXTS.EDITOR),r.isMobileEditor()?(r.mobile.afterMovingToMobileEditorCallback(!1),d.fedopsLogger.interactionEnded(d.fedopsLogger.INTERACTIONS.GO_TO_MOBILE_EDITOR)):d.fedopsLogger.interactionEnded(d.fedopsLogger.INTERACTIONS.GO_TO_DESKTOP_EDITOR),l.isFunction(e)&&e(),r.dsActions.platform.notifyAppsOnCustomEvent(n.factory.switchedFromPreview({}))}),r.mobile.mobileWizard.isEnabled()&&r.store.dispatch(u.editorPlugins.mobile.actions.mobileWizard.disableMobileWizard())}(e),d.ravenUtils.setGlobalTagForErrors({isPreview:t})})}function e(){var e=r.store.getState();return!!a(e)}function i(){return!e()}return{registerToGoToPreview:function(e){s.push(e)},togglePreview:function(e){i()?r.wixCode.prepareBeforePreview(l.partial(t,e)):t(e)},isInPreviewMode:e}}}}),define("rEditor/app/APISections/account",["lodash","util","rEditor/bi/bi","stateManagement","constants"],function(n,r,s,l,c){"use strict";return{create:function(a){var i=r.serviceTopology.dashboardUrl.replace(/create\//,"")+"/",o=r.serviceTopology.businessManagerUrl;function e(e,t){a.panelManager.openPanel("rEditor.panels.siteSettingsPanel",{helpId:"49cebc11-f15c-4cf8-82d9-2c36c5397520",tab:e,referrer:t})}function t(){var e=a.dsRead.generalInfo.getMetaSiteId(),t=i+"history/"+e+"/?referralInfo=EDITOR";window.open(t)}return{isUserOwner:function(){var e=r.editorModel.permissionsInfo;return e&&e.ownerId===e.loggedInUserId},isUserContributor:function(){return!a.account.isUserOwner()},openConnectDomain:function(e,t){var o=a.dsRead.generalInfo.isFirstSave();t=n.isBoolean(t)?t:!a.dsRead.generalInfo.isSitePublished();var i=a.site.isPremium();a.panelManager.openPanel("savePublish.panels.connectDomain",{isFirstSave:o,isFirstPublish:t,isPremium:i,title:"PREMIUM_PUBLISH_TITLE",subtitle:i?"PREMIUM_PUBLISH_SUBTITLE":"CONNECT_DOMAIN_DIALOG_FREE_SUBTITLE",flowId:e},!0)},openSettings:e,openRevisions:function(){l.editorPlugins.userPreferences.selectors.getSiteUserPreferences(c.USER_PREFS.SITE_REVISIONS.SITE_HISTORY_DONT_SHOW_AGAIN)(a.store.getState())?t():a.panelManager.openPanel("panels.messagePanels.siteRevisionsPanel",{onButtonClick:function(e){e&&a.account.openSiteHistory()}})},openReleaseManager:function(){e("release-manager")},manage:function(){var e=a.dsRead.generalInfo.getMetaSiteId();window.open(o+"/"+e+"/home?referralInfo=EDITOR")},myAccountAction:function(e){var t=a.dsRead.generalInfo.getMetaSiteId();window.open(o+"/"+t+"/home?referrer==EDITOR&action="+e)},openPremiumSettings:function(e){var t=a.dsRead.generalInfo.getMetaSiteId();window.open(i+"sites/"+t+"/manage-premium/"+e+"?referralAdditionalInfo=DA_managePremium")},openSiteHistory:t,upgrade:function(e){var t=e.replace(/edhtml_/,"")||"unknown";a.bi.event(s.events.UPGRADE_EVENT,{origin:t});var o=a.dsRead.generalInfo.getMetaSiteId(),i=e?"referralAdditionalInfo="+e:"",n=r.serviceTopology.premiumServerUrl||"https://premium.wix.com";n+="/wix/api/premiumStart?"+i+"&siteGuid="+o,window.open(n)},getEditorVersionsInfo:function(){return window.editorVersionsInfo||null},getWixSEOWizURL:function(e){var t=a.dsRead.generalInfo.getMetaSiteId(),o=i+"sites/"+t+"/app/1480c568-5cbd-9392-5604-1148f5faffa0?app=seo";return e?o+"&referralInfo="+e:o},openWixSEOWiz:function(e){window.open(a.account.getWixSEOWizURL(e),"_blank")}}}}}),define("rEditor/app/APISections/mobileEditor",["lodash","coreUtilsLib","util","baseUI","mobileEditor","constants","stateManagement","coreBi"],function(f,h,y,e,b,v,S,E){"use strict";var P=e.tooltipManager,C={action:"",duration:.3,name:"FadeIn"},T=v.USER_PREFS.MOBILE_EDITOR.USER_WAS_IN_MOBILE_EDITOR,_=v.USER_PREFS.MOBILE_EDITOR.MOBILE_WIZARD.DONT_SHOW_AGAIN,I=v.USER_PREFS.MOBILE_EDITOR.FIRST_TIME_PANEL.DONT_SHOW_AGAIN;return{create:function(r){var o=null,s=r.store,i=s.dispatch,l=function(e){return S.editorPlugins.userPreferences.selectors.getSiteUserPreferences(e)(s.getState())},c=function(e,t){return i(S.editorPlugins.userPreferences.actions.setSiteUserPreferences(e,t))},p=function(e){var t=y.url.isQA();return"true"===y.url.getParameterByName(e)||!t};function n(e,t){var o=f.assign({},s.getState().mobile,{reAddedHiddenElement:{compRef:e,addingPhase:t}});r.updateState({mobile:o})}function t(){return s.getState().mobile.isHiddenItemsCounterVisible}function d(){if(r.dsRead.pages.getFocusedPageId()){var e=t()?b.hiddenItemsUtils.getFocusedPageHiddenComps(r,r.dsRead.pages.getFocusedPageId()).length:0;i(S.editorPlugins.leftBar.actions.setNotificationsCount("mobileEditor.hiddenItemsPanel",e))}}function a(){n(null,v.LEFT_BAR.MOBILE_HIDDEN_ELEMENTS.PROGRESS.IDLE)}function u(t){var e=f.defaults({targetId:t.id},C);r.components.behaviors.previewAnimation(t,e,function(){return e=t,r.selection.selectComponentByCompRef(e),r.dsActions.documentMode.setComponentVisibility(e.id,!0),n(e,v.LEFT_BAR.MOBILE_HIDDEN_ELEMENTS.PROGRESS.FINISH),window.clearTimeout(o),void(o=window.setTimeout(a,v.LEFT_BAR.MOBILE_HIDDEN_ELEMENTS.TOOLTIP_TIMEOUT));var e})}var g=function(){i(S.editorPlugins.mobile.actions.mobileWizard.enableMobileWizard())},m=function(){return l(_)};return{mobileWizard:{isEnabled:function(){return S.editorPlugins.mobile.selectors.mobileWizard.getIsMobileWizardEnabled(s.getState())},enable:g,disable:function(){i(S.editorPlugins.mobile.actions.mobileWizard.disableMobileWizard())}},mobileOnlyComponents:{enableBackToTopButton:function(e){r.dsActions.mobile.mobileOnlyComponents.enableBackToTopButton(e)},removeQuickActionBar:function(){r.dsActions.mobile.qab.clearActions(),f.some(r.panelManager.getPanelsOfType("leftPanelFrame"),{name:"mobileEditor.mobileElementsPanel"})||P.show("mobileElementsPanel_quickActionBar_afterRemove")},removeBackToTopButton:function(){r.dsActions.mobile.mobileOnlyComponents.toggleBackToTopButton(!1),P.show("BacktoTop_Button_MobileTools_Postdelete_Tooltip")}},hiddenComponents:{get:function(e){return r.dsRead.mobile.hiddenComponents.get(e)},show:function(e,t){r.dsActions.documentMode.setComponentVisibility(e,!1),r.dsActions.mobile.hiddenComponents.show(e,t),r.dsActions.waitForChangesApplied(function(){return function(e){var t=r.components.get.byId(e);n(t,v.LEFT_BAR.MOBILE_HIDDEN_ELEMENTS.PROGRESS.IN_PROGRESS);var o=r.components.layout.getRelativeToScreen(t).y-50,i=h.scrollUtils.calcScrollDuration(r.site.getScroll().y,o,r.isMobileEditor());r.scroll.animateScrollTo({y:o},i,function(){return u(t)})}(e)})},getReAddedHiddenElement:function(){return s.getState().mobile.reAddedHiddenElement}},initMobileEditorFlag:function(){var e=r.dsRead.generalInfo.isFirstSave();l(I)?c(T,!0):e&&c(T,r.isMobileEditor())},afterMovingToMobileEditorCallback:function(e){var t,o,i,n,a;e||(d(),S.editorPlugins.mobile.selectors.intros.areEnabled(s.getState())&&(n=e,a=f.some(r.pages.getPagesData(),function(e){return!e.isLandingPage}),f.isUndefined(l(T))||n||!p("qa_mobileWizard")||m()||!a?(t=e,o=l(I),i=f.every(r.pages.getPagesData(),"isLandingPage"),o||!p("qa_1stTimeMobileOn")||t||!i||m()||(c(I,!0),r.panelManager.openPanel("panels.focusPanels.mobileEditorFirstTimeVideoPanel",{},!0))):window.setTimeout(function(){r.isMobileEditor()&&(c(_,!0),g())},1e3)),c(T,!0),r.bi.event(E.events.mobileEditor.MOBILE_EDITOR_READY))},hideHiddenItemsCounter:function(){t()&&r.updateState({mobile:f.defaults({isHiddenItemsCounterVisible:!1},s.getState().mobile)},function(){i(S.editorPlugins.leftBar.actions.setNotificationsCount("mobileEditor.hiddenItemsPanel",0))})},optimizeLayout:function(){var e,t=r.dsRead.pages.getFocusedPageId();r.mobile.reLayoutPage(t),r.history.add("relayout"),r.bi.event(E.events.mobileEditor.hiddenElements.HIDDEN_ELEMENTS_REFRESH_LAYOUT_CLICK,{current_page_name:t}),p("qa_magicLayoutTooltip")&&(e=v.ROOT_COMPS.TOPBAR.DROP_PANELS.CUSTOM.MOBILE_OPTIMIZE_LAYOUT_UNDO,r.topBarMenuBar.openDropDown(e),window.setTimeout(r.topBarMenuBar.closeDropDown.bind(r,e),5e3))},updateLeftBarNotificationsCount:d,isMobileAnimationsEnabled:function(){return f.get(r.dsRead.data.getById("masterPage"),"mobileSettings.animationsEnabled")}}}}}),define("rEditor/app/APISections/mouseActions",["lodash","util","stateManagement"],function(c,p,e){"use strict";var t=e.editorPlugins.mouseActions.actions,d=t.setUsingWindowMouseEvents,u=t.setPerformingMouseAction,o=e.editorPlugins.mouseActions.selectors,g=o.isPerformingMouseMoveAction,m=o.isUsingWindowMouseEvents,f=e.editorPlugins.selection.actions.setLastSelectionClickPos,h=e.editorPlugins.selection.selectors.getSelectedCompsRefs;return{create:function(a){var i=null,e=a.store,n=e.dispatch,r=e.getState;function s(e){var t=r();i&&c.isFunction(i.on)&&(!g(t)&&(c.isFunction(i.setContext)?i.setContext():p.keyboardShortcuts.disable(),n(u(!0)),n(f(null))),i.on(e))}function l(e){i&&c.isFunction(i.end)&&i.end(e),i&&c.isFunction(i.unsetContext)?i.unsetContext():p.keyboardShortcuts.enable(),t()}function t(){var e=r();window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",l);var t=g(e),o=m(e);(t||o)&&(n(u(!1)),n(d(!1))),i=null}return{onMouseMove:s,onMouseUp:l,onEditorViewMouseMove:function(e){var t=r();i&&!m(t)&&s(e)},onEditorViewMouseUp:function(e){var t=r();i&&!m(t)&&l(e)},turnOffMouseEvents:t,registerMouseMoveAction:function(e,t,o){c.isFunction(e.start)&&e.start(a,t),o&&(window.addEventListener("mousemove",s),window.addEventListener("mouseup",l)),i=e,n(d(!!o))},shouldInitLassoToolOnMouseDown:function(e){var t=h(r());if(a.selection.isSelectedCompUnderCursorAndBeneathSiteSegment(t,e))return!1;var o=a.selection.getComponentUnderClickToBeSelected(e);if(p.browserUtil.isSpecialKeyPressed(e))return!0;if(a.selection.isHiddenComponentDraggedNext())return!1;if(a.components.is.siteSegment(o)||a.components.is.page(o))return!0;var i=a.components.is.container(o)||a.components.is.containableByStructure(o),n=a.components.is.allowLassoOnContainer(o);return!(!i||!n||!a.components.isDescendantOfComp(t,o)&&(a.columns.isColumn(o)||a.components.is.draggable(o)&&a.selection.isComponentSelected(o)))},getRegisteredMouseMoveAction:function(){return i},setRegisteredMouseMoveAction:function(e){i=e}}}}}),define("rEditor/app/APISections/tpaWrapper",["lodash","util","tpa","platform"],function(s,p,d,l){"use strict";return{create:function(c){return{addApplication:function(s,l){return new Promise(function(a,r){d.services.tpaAddAppService.isAppInstalled(c,s,!0)?r(new Error("Application already installed.")):c.dsRead.tpa.appMarket.getDataAsync(s).then(function(e){if(e){if(e.error){var t=new Error(e.error+", errorType: "+e.errorType+", errorMsg: "+e.errorMessage);return r(t),void p.ravenUtils.captureError(t,{tags:{appDefIdMissing:!0,appDefIdErrorType:e.errorType,appDefIdErrorMessage:e.errorMessage}})}var o="Wix"===e.by;if(o){var i=e.hasSection?d.constants.APP.TYPE.SECTION:d.constants.APP.TYPE.WIDGET,n=d.constants.BI.initiator.PLATFORM;d.services.tpaAddAppService.addApp(c,s,e.name,null,i,n,!o,{adding_method:"platform"},l,function(e){e.onError||!e.instanceId?r(new Error(e.onError)):a(e)})}else r(new Error("Only wix apps are allowed"))}else r(new Error("Application with "+s+" appDefinitionId do not exist."))})})},addComponent:function(e){return new Promise(function(t,o){d.services.tpaAddComponentService.addComponent(c,null,e,function(e){e.onError?o(new Error(e.onError)):t(e)})})},installAppIfNeeded:function(r){return new Promise(function(t,o){if(c.platform.isPlatformAppInstalled(r))return t(c.platform.getAppDataByAppDefId(r));var e=d.constants.BI.initiator.EDITOR,i=d.constants.APP.TYPE.PLATFORM_ONLY,n={originType:d.constants.BI.type.ADD_APP_ADD_PANEL},a={initiator:l.constants.ORIGIN.INITIATOR.EDITOR,info:{type:l.constants.ORIGIN.TYPE.ADD_PANEL}};d.services.tpaAddAppService.addApp(c,r,null,null,i,e,!1,{},n,function(e){return s.get(e,"success")?t(e):o(e)},a)})},bi:{consts:d.constants},services:{tpaAddAppService:d.services.tpaAddAppService,tpaAlertsService:d.services.tpaAlertsService,tpaAppInstallingService:d.services.tpaAppInstallingService},superApps:{openDashboardUrl:d.superApps.openDashboardUrl,refreshAppCompsForAppDefId:d.superApps.refreshAppCompsForAppDefId,consts:d.superAppsConstants}}}}}),define("rEditor/app/APISections/mediaWrapper",["util"],function(e){"use strict";var o=e.array.applyForFirstAndThrowIfMulti;return{create:function(t){return{vectorImage:{getSvgOriginalAspectRatio:function(e){return o("getSvgOriginalAspectRatio",t.dsRead.media.vectorImage.getSvgOriginalAspectRatio,e)}}}}}}),define("rEditor/app/APISections/clipboardStorage/clipboardStorage",["lodash","constants","experiment"],function(s,l,e){"use strict";return{createInstance:function(i){if(!i)throw new Error("You must to provide editorAPI to create an instance of clipboardStorage");var a=l.CLIPBOARD_SCOPE.GENERAL;function r(){var o=function(){return s.cloneDeep(i.store.getState().clipboard)},t=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a;i.updateState({clipboard:Object.assign({},o(),_defineProperty({},t,e))})};return{get:function(){var e=o();return s.isObject(e)?e[a]:void 0},set:function(e){t(e)},remove:function(){t(void 0)}}}return function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}}()&&e.isOpen("se_enableCrossSiteCopyPaste")?function(){var o={LocalStorage:"LocalStorage",InMemoryStorage:"InMemoryStorage"},i=o.LocalStorage,n=function(){var i=window.localStorage;function n(){var e=i.getItem(l.LOCAL_STORAGE_TYPE.CLIPBOARD);return e?JSON.parse(e):{}}function t(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a,o=n()||{};i.setItem(l.LOCAL_STORAGE_TYPE.CLIPBOARD,JSON.stringify(Object.assign({},o,_defineProperty({},t,e))))}return{get:function(){var e=n();return s.isObject(e)?e[a]:void 0},set:function(e){t(e)},remove:function(){t(void 0)}}}();function e(t){if(i!==o.InMemoryStorage)try{n.set(t)}catch(e){i=o.InMemoryStorage,(n=r()).set(t)}else n.set(t)}return{get:function(){return n.get()},set:e,remove:function(){e(void 0)}}}():r()}}}),define("rEditor/app/APISections/clipboardWrapper",["lodash","coreUtilsLib","stateManagement","experiment","rEditor/app/APISections/clipboardStorage/clipboardStorage"],function(a,r,e,s,t){"use strict";var l=e.featuresOverridden.selectors.isPasteDisabled;return{create:function(i){var n=t.createInstance(i);function o(){if(l(i.store.getState()))return{};var e=n.get();return e||{}}return{setItem:function(e,t){var o=s.isOpen("se_enableCrossSiteCopyPaste")?{guid:r.guidUtils.getGUID(),siteId:i.dsRead.generalInfo.getSiteId(),siteUploadToken:i.mediaServices.getSiteUploadToken()}:void 0;n.set({type:t,value:e,metaData:o})},removeItem:function(){n.remove()},getItem:o,hasItem:function(){var e=o().value;return Boolean(e)},hasItemOfType:function(e){var t=o();return Boolean(t.value)&&t.type===e},isCrossSite:function(){var e=o().metaData;if(!e)return!1;var t=i.dsRead.generalInfo.getSiteId();return e.siteId!==t},isAlreadyPasted:function(e){return e===i.store.getState().clipboard.lastPasted},setLastPasted:function(e){var t=i.store.getState().clipboard,o=a.assign({},t,{lastPasted:e});i.updateState({clipboard:o})}}}}}),define("rEditor/app/services/compFactoryService",[],function(){"use strict";return{create:function(t){var o={};return{registerComp:function(e,t){o[e]=t},getCompClass:function(e){return o[e]||t.getCompReactClass(e)}}}}}),define("rEditor/app/pluginService",["lodash"],function(n){"use strict";return{create:function(){var i={};return{pluginConstants:{DOUBLE_CLICK:"doubleClick",ADD_PANEL_DROP:"addPanelDrop"},registerPlugin:function(e,t,o){n.set(i,[e,t],o)},getPlugin:function(e,t){return n.get(i,[e,t])},getAllPluginsOfType:function(e){return n.get(i,[e])}}}}}),define("rEditor/app/updateThemePlugins/tinyMenu",["lodash"],function(r){"use strict";return function(e,t){if(t&&t.style&&t.style.properties){var o=t.style.properties,i=t.style.propertiesSource,n=o["alpha-txt"];if(r.isUndefined(n)||(r.isUndefined(o["alpha-iconcolor"])&&(o["alpha-iconcolor"]=n),r.isUndefined(o["alpha-bordercolor"])&&(o["alpha-bordercolor"]=n)),delete o["alpha-txt"],delete o["alpha-txts"],i){var a=i["alpha-txt"];i["alpha-iconcolor"]=i["alpha-iconcolor"]||a,i["alpha-bordercolor"]=i["alpha-bordercolor"]||a,delete i["alpha-txt"],delete i["alpha-txts"]}}}}),define("rEditor/app/updateThemePlugins/designDataThemeChangeHandler",["lodash","util"],function(t,n){"use strict";return function(i,e){var o=e.values;"COLOR"===e.type&&t(i.dsRead.components.getAllComponents()).reduce(function(e,t){var o=i.components.design.get(t);return o&&e.push({pointer:t,data:o}),e},[]).forEach(function(e){var t=e.data;n.designData.updateThemeColors(t,o),i.components.design.update(e.pointer,t,!0)})}}),define("rEditor/app/updateThemePlugins",["lodash","rEditor/app/updateThemePlugins/tinyMenu","rEditor/app/updateThemePlugins/designDataThemeChangeHandler"],function(o,e,i){"use strict";var n={"wysiwyg.viewer.skins.mobile.TinyMenuSkin":e};function a(e,t){var o=n[t.skin];o&&o(e,t)}return{register:function(e){e.theme.styles.registerHook(a);var t=o.bind(i,{},e);e.dsActions.theme.events.onChange.addListener(t)}}}),define("rEditor/pasteLogic/pasteLogicCalculations",[],function(){"use strict";var a={xOffset:40,yOffset:30,newStackOffset:{x:60,y:40},bottomThreshold:80,rightThreshold:80};function r(e,t,o){var i=e.dsRead.siteSegments.getPagesContainer(),n=e.dsRead.siteSegments.layout.get(i);return{x:(n.width-o.width)/2,y:(t.stageLayout.height-o.height)/2+t.scrollTop-n.y}}function s(e,t){return{x:(e.width-t.width)/2,y:(e.height-t.height)/2}}return{getNextComponentPosition:function(e){return a.xOffset=20,a.yOffset=20,{x:e.x+a.xOffset,y:e.y+a.yOffset}},getNewStackComponentPosition:function(e){return{x:e.x+a.newStackOffset.x,y:e.y-a.newStackOffset.y}},cannotFitIntoViewPort:function(e,t,o){var i=a.rightThreshold,n=a.bottomThreshold;return o&&(n=i=0),t.x+i>e.rightX||t.y+n>e.stageLayout.bottom+e.scrollTop},getCenteredCompPosition:r,isComponentInViewPort:function(e,t){return t.y>=e.stageLayout.top&&t.y+a.bottomThreshold<=e.stageLayout.bottom-e.stageLayout.top+e.scrollTop},cannotFitIntoPageHeight:function(e,t,o){var i=e.dsRead.siteSegments.getPagesContainer(),n=e.dsRead.siteSegments.layout.get(i);return o.y>n.height+t.stageLayout.top},getCenteredPositionInContainer:s,getCenteredPositionInContainerAndViewPort:function(e,t,o,i){var n=r(e,o,i);return{x:s(t,i).x,y:n.y-t.y}},cannotFitInContainer:function(e,t,o){return e.y+t.height>o.height}}}),define("rEditor/pasteLogic/ComponentPasteLogic",["lodash","stateManagement","rEditor/pasteLogic/pasteLogicCalculations"],function(l,e,c){"use strict";var p=e.editorPlugins.domMeasurements.selectors.getViewPort;function d(){return l.isEmpty(this.firstCompPosition)}function u(e){return e!==this.lastCompContainer}function g(e){return e.y<0}function n(e,t,o,i){var n,a,r,s={};if(function(e,t,o){return this.centerOnFirstPaste||u.call(this,o)&&c.cannotFitIntoPageHeight(e,t,this.originalCompPosition)}.call(this,e,t,i))g(s=c.getCenteredCompPosition(e,t,o))&&(s.y=0);else if(u.call(this,i))s=this.originalCompPosition,n=e,a=t,r=s,c.isComponentInViewPort(a,r)||n.ui.scroll.setScroll({scrollLeft:0,scrollTop:r.y});else{var l=e.ui.scroll.getScroll();s={x:this.originalCompPosition.x||0,y:(this.originalCompPosition.y||0)-this.originalScrollPosition+l.scrollTop}}return this.firstCompPosition=s}function m(e,t,o){var i=p(e.store.getState(),!0);return d.call(this)?n.call(this,e,i,o,t):function(e){var t=c.getNextComponentPosition(this.lastCompPosition);return c.cannotFitIntoViewPort(e,t)&&(t=c.getNewStackComponentPosition(this.firstCompPosition),this.firstCompPosition=t),t}.call(this,i)}function t(e){e=e||{},this.originalCompPosition={},this.originalScrollPosition=0,this.firstCompPosition={},this.lastCompPosition={},this.lastCompContainer="",this.centerOnFirstPaste=e.centerOnFirstPaste||!1,this.lastScrollPosition=null}return t.prototype.setPasteData=function(e,t,o){this.originalScrollPosition=o.scrollTop,this.originalCompPosition={x:e.x,y:e.y},this.firstCompPosition={x:e.x,y:e.y},this.lastCompPosition={x:e.x,y:e.y},this.lastCompContainer=t,this.lastScrollPosition=o},t.prototype.resetPastePosition=function(){this.firstCompPosition={},this.lastCompPosition={}},t.prototype.getPastePosition=function(e,t,o){var i=e.ui.scroll.getScroll();l.isEqual(i,this.lastScrollPosition)||this.resetPastePosition();var n=l.pick(t,["width","height"]),a=e.components.get.byId(o),r=e.utils.isPage(a);(function(e){this.lastCompContainer||(this.lastCompContainer=e),u.call(this,e)&&this.resetPastePosition()}).call(this,o);var s=r?m.call(this,e,o,n):function(e,t,o){var i,n,a={},r=e.components.layout.getRelativeToScreen(t),s=p(e.store.getState(),!0),l=!1;return d.call(this)?(i=s,a=r.height>i.stageLayout.height?c.getCenteredPositionInContainerAndViewPort(e,r,s,o):c.getCenteredPositionInContainer(r,o),l=!0):(a=c.getNextComponentPosition(this.lastCompPosition),c.cannotFitInContainer(a,o,r)&&(a=c.getNewStackComponentPosition(this.firstCompPosition),l=!0)),g(a)&&(a.y=0),n=r,a.x>n.width&&(a.x=r.width-o.width),l&&(this.firstCompPosition=a),a}.call(this,e,a,n);return this.lastCompPosition=s,this.lastCompContainer=o,this.lastScrollPosition=i,l.clone(s)},t}),define("rEditor/pasteLogic/AddPanelPasteLogic",["rEditor/pasteLogic/ComponentPasteLogic"],function(n){"use strict";function e(){n.call(this,{centerOnFirstPaste:!0}),this.lastCompTypeAdded=""}return((e.prototype=Object.create(n.prototype)).constructor=e).prototype.getPastePosition=function(e,t,o,i){return i!==this.lastCompTypeAdded&&this.resetPastePosition(),this.lastCompTypeAdded=i,n.prototype.getPastePosition.call(this,e,t,o)},e}),define("rEditor/pasteLogic/pasteLogicContext",["lodash","rEditor/pasteLogic/ComponentPasteLogic","rEditor/pasteLogic/AddPanelPasteLogic"],function(e,t,o){"use strict";return{pasteContext:new t,duplicateContext:new t,addContext:new t({centerOnFirstPaste:!0}),addPanelPasteLogic:new o}}),define("rEditor/utils/openPanelByURLData",["lodash"],function(r){"use strict";var e,t={addPanel:{name:"addPanelInfra.addPanel",propsGenerator:function(e,t){return{category:e,section:t}}},siteSettingsPanel:{name:"rEditor.panels.siteSettingsPanel",propsGenerator:function(e){return{tab:e}}},pagesPanel:{name:"pages.pagesPanel",propsGenerator:function(e){return{initialSettingsTabType:e}}},feedMe:{name:"panels.focusPanels.feedbackPanel"},blog:{name:"blog.menuPanel"},newBlog:{name:"blog.newMenuPanel"},background:{name:"rEditor.panels.backgroundPanel"},wixStore:{name:"wixStore.panels.wixStorePanel",shouldOpenPanelByRestrictions:function(e){return e.dsRead.tpa.app.isInstalled("1380b703-ce81-ff05-f115-39571d94dfcd")}},accessibilityPanel:{name:"panels.focusPanels.accessibilityPanel"},mobileFriendlyPanel:{name:"panels.focusPanels.mobileFriendlyPanel"},media:{name:"rEditor.panels.mediaManagerPanel",propsGenerator:function(){for(var a={},e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return r.forEach(t,function(e){var t=r.split(e,"-"),o=_slicedToArray(t,2),i=o[0],n=o[1];switch(i){case"withmediastudio":a.shouldOpenMediaStudioOnMount=!0;break;case"withvideomaker":a.shouldOpenVideoMakerOnMount=!0;break;case"withmediamanager":a.shouldOpenMediaManagerOnMount=!0,n&&(a.mediaManagerOpenPathSourceOnMount=n)}}),a}}},o={mobileHidden:{name:"mobileEditor.hiddenItemsPanel"},mobileBackground:{name:"rEditor.panels.backgroundPanel"},mobileSiteSettingsPanel:{name:"rEditor.panels.siteSettingsPanel",propsGenerator:function(e){return{tab:e}}},mobileElements:{name:"mobileEditor.mobileElementsPanel",propsGenerator:function(e){return{mobileElementId:e}}},mobileLayoutOptimizer:{name:"mobileEditor.layoutOptimizerPanel"}};return{allPanels:(e=r.merge({},t,o),r.mapKeys(e,function(e,t){return t.toLowerCase()})),mobilePanels:r.mapKeys(o,function(e,t){return t.toLowerCase()})}}),define("rEditor/utils/openPanelByURL",["lodash","rEditor/utils/openPanelByURLData"],function(r,e){"use strict";var s=e.allPanels,a=e.mobilePanels;function l(e){var t=r.mapKeys(e,function(e,t){return t.toLowerCase()}).openpanel;return t?t.toLowerCase():""}return{shouldLoadMobileEditor:function(e){var t,o=l(e),i=o?o.split("."):"",n=i?i[0]:"";return"mobile"===n||(t=n)&&!!a[t]},openPanel:function(e,t){var o=l(e);if(function(e,t){if(e){var o=e.split(".")[0],i=!r.isFunction(r.get(s[o],"shouldOpenPanelByRestrictions"))||s[o].shouldOpenPanelByRestrictions(t);return!!s[o]&&i}}(o,t)){var i=s[o.split(".")[0]].name,n=function(e){var t=e.split("."),o=t[0],i=t.slice(1),n=s[o];if(n&&r.isFunction(n.propsGenerator)&&i.length){var a=n.propsGenerator.apply(null,i);return r.omit(a,r.isUndefined)}return{}}(o);t.panelManager.openPanel(i,n)}}}}),define("rEditor/app/APISections/floatingBubbleWrapper",["lodash","stateManagement"],function(h,y){"use strict";return{create:function(d){var u=void 0,g="session",m="site";function f(e,t,o,i){d.updateState({floatingBubble:h.assign({},d.store.getState().floatingBubble,{value:e,targetLayout:t,bubbleProps:o,shouldNotHideOnMouseLeaveTarget:i})})}return{show:function(n,a,r,e){var s=e.shouldNotHideOnMouseLeaveTarget,l=e.countDisplayTimesOptions,t=e.delay,c=e.onComplete,p=void 0;l&&(p=function(e){var t=0,o=e.countBy,i=e.maxNum,n=e.uniqueBubbleId;if(h.isEmpty(o)||!i||h.isEmpty(n))throw new Error("please provide all parameters for countDisplayTimesOptions");if(o===g)t=y.editorPlugins.userPreferences.selectors.getSessionUserPreferences(n)(d.store.getState())||0;else{if(o!==m)throw new Error("please provide correct countBy method for countDisplayTimesOptions");t=y.editorPlugins.userPreferences.selectors.getSiteUserPreferences(n)(d.store.getState())||0}return t}(l))>=l.maxNum||(u=window.setTimeout(function(){var e,t,o,i;u=null,f(n,a,r,s),l&&(t=p,o=(e=l).countBy,i=e.uniqueBubbleId,o===g?d.store.dispatch(y.editorPlugins.userPreferences.actions.setSessionUserPreferences(i,t+1)):o===m&&d.store.dispatch(y.editorPlugins.userPreferences.actions.setSiteUserPreferences(i,t+1))),h.isFunction(c)&&c()},t))},hide:function(){var e={value:null,targetLayout:null,bubbleProps:{},shouldNotHideOnMouseLeaveTarget:!1};h.isEqual(d.store.getState().floatingBubble,e)||d.updateState({floatingBubble:e}),u&&window.clearTimeout(u)},showImmediate:f}}}}),define("rEditor/app/EditorAPI",["coreUtilsLib","lodash","baseUI","panels","util","tpa","platformEvents","wixStore","mediaServices","compPanelInfra","rEditor/app/panelHelpers","rEditor/app/updateOperationsPlugins","rEditor/app/pluginsRegistrar","savePublish","gfppData","platform","rEditor/rootComps/gfpp/gfppModel","rEditor/app/APISections/concurrentUsersWrapper","rEditor/app/APISections/themeWrapper","rEditor/app/APISections/historyWrapper","rEditor/app/APISections/maskCrop","rEditor/app/APISections/siteWrapper","rEditor/app/APISections/developerMode","rEditor/app/APISections/selectedComponent","rEditor/app/APISections/savePublishWrapper","rEditor/app/APISections/componentsWrapper","rEditor/app/APISections/tabIndicationState","rEditor/app/APISections/feedback","rEditor/app/APISections/mainMenuWrapper","rEditor/app/APISections/menuWrapper","rEditor/app/APISections/addPanelAPI","rEditor/app/APISections/selection","rEditor/app/APISections/databaseEditor","rEditor/app/APISections/welcomeScreensWrapper","rEditor/app/APISections/copyPasteWrapper","rEditor/app/APISections/wixStoresFlowAPI","rEditor/app/APISections/editorUI","rEditor/app/APISections/wixCode","rEditor/app/APISections/columns","rEditor/app/APISections/pagesWrapper","rEditor/app/APISections/layoutersWrapper","rEditor/app/APISections/platformWrapper","rEditor/app/APISections/pinModeWrapper","rEditor/app/APISections/promotionsWrapper","rEditor/app/APISections/togglePreviewWrapper","rEditor/app/APISections/account","rEditor/app/APISections/mobileEditor","rEditor/app/APISections/mouseActions","rEditor/app/APISections/tpaWrapper","rEditor/app/APISections/mediaWrapper","rEditor/app/APISections/clipboardWrapper","rEditor/app/services/compFactoryService","rEditor/app/pluginService","rEditor/app/updateThemePlugins","rEditor/pasteLogic/pasteLogicContext","rEditor/utils/openPanelByURL","textControls","blog","editorEventRegistry","experiment","constants","rEditor/bi/bi","stateManagement","coreBi","wixData","rEditor/app/APISections/floatingBubbleWrapper","santa-editor-utils","MediaImageStudio"],function(W,z,q,j,Y,K,X,Z,Q,J,$,ee,te,oe,ie,ne,ae,re,se,le,ce,pe,de,ue,ge,me,fe,he,ye,be,ve,Se,Ee,Pe,Ce,Te,_e,Ie,Me,Ae,Oe,Re,we,De,ke,xe,Ne,Le,Be,Fe,Ue,Ge,He,Ve,We,ze,qe,je,Ye,Ke,Xe,Ze,Qe,Je,$e,et,a,tt){"use strict";var ot=Y.serviceTopology.dashboardUrl.replace(/create\//,"")+"/"||"http://www.wix.com/my-account/",it=Qe.domMeasurements.actions.initDomMeasurements,nt=Qe.editorPlugins.domain.selectors,at=Qe.editorPlugins.components.selectors,rt=Qe.editorPlugins.services.selectors.getViewerRendersCounter,st=Qe.editorPlugins.panels.selectors.selectOpenPanels,e=Qe.panels.actions,c=e.updateOrOpenPanel,p=e.setPanelType,lt=Qe.editorPlugins.text.selectors,ct=Qe.editorPlugins.selection.actions.setSelectedCompsRestrictions,t=Qe.editorPlugins.text.actions,pt=t.openTextEditor,dt=t.closeTextEditor,ut=Qe.editorPlugins.selection.selectors.getSelectedCompsRefs,o=Y.array,gt=o.isMultiselect,mt=o.asArray,ft=Qe.editorPlugins.mouseActions.selectors.isPerformingMouseMoveAction,i=Qe.editorPlugins.domMeasurements.selectors,ht=i.getPreviewPosition,yt=i.getSiteScale,bt=Qe.editorPlugins.domMeasurements.actions.updatePreviewPos,n=Qe.editorPlugins.preview.selectors,vt=n.isPreviewReady,St=n.getPreviewMode,r=Qe.sectionedPanel.actions,Et=r.openSection,Pt=r.closeSection,d=Xe.LIVE_CHAT.WIDGET_ID,s=function(e){var t=window.document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=Y.serviceTopology.scriptsLocationMap["react-dealer-viewer"]+"/dealer-react-viewer.min.css",t.onload=function(){e.isDealerCssLoaded=!0},window.document.head.appendChild(t)},l=function(){return new Promise(function(o,e){requirejs(["wixReactDealerViewer","wixDealerClientApi"],function(e,t){o({wixReactDealerViewer:e,wixDealerClientApi:t})},e)})};var Ct={toolbarEnabled:!0,developerModeEnabled:!1,showHiddenComponents:!0,guidelinesEnabled:!0,sectionsHandlesEnabled:!0,snapToEnabled:!0,rulersEnabled:void 0},Tt=["latin"],_t=null,It={};function Mt(e,t){return t?e.dsRead.generalInfo.media.getSiteUploadToken():e.dsRead.generalInfo.getSiteToken()}function At(n){l().then(function(e){var t=e.wixReactDealerViewer,o=e.wixDealerClientApi;n.wixReactDealerViewer=t,n.wixDealerClientApi=o,Ot(n);var r,s,l,i=!Ke.isOpen("se_unifiedChatWidget")&&(Ke.isOpen("se_liveChat")||Ke.isOpen("se_liveChat_no_panel"));!Y.appStudioUtils.isAppStudio()&&i&&(s=function(e){return r.store.dispatch(Qe.editorPlugins.bi.actions.event(Je.events.liveChat.open_widget,{open_method:e,current_platform:"Editor",lang:"en",module_name:"CHAT",source_name:"1_"+d,referral_url:window.location.href}))},l=function(e){return r.store.dispatch(Qe.editorPlugins.bi.actions.event(Je.events.liveChat.successfully_created,{current_platform:"Editor",ticket_id:e,lang:"en",module_name:"CHAT",source_name:"1_"+d,referral_url:window.location.href}))},function(e){if(g(e))return Y.dealerUtils.loadDealerOffers(e.wixDealerClientApi,Y.dealerUtils.bannerPositions.LIVE_CHAT,e.site.getMetaSiteId()).then(function(e){return z.some(e.offers,{payload:{value:"true"}})}).catch(function(){var e=Y.dealerUtils.bannerPositions.LIVE_CHAT+" failed to load";return a.ravenUtils.sendMessage(e,a.ravenUtils.LOG_LEVEL.WARNING),!1})}(r=n).then(function(e){if(e)if(Ke.isOpen("se_liveChat_no_panel"))Y.chatManager.init(r,z.noop,z.noop,l,!1);else{var t=function(){var e=Qe.editorPlugins.panels.selectors.selectOpenPanels(r.store.getState());return z.find(e,{name:"panels.chatPanel"})},o=function(e,t){r.store.dispatch(c("panels.chatPanel",{shouldSendBi:e,openMethod:t},!0))},i=function(e,t){return z.throttle(z.partial(o,e,t),100)},n=z.throttle(function(){z.get(t(),"isHidden")&&(r.store.dispatch(p("panels.chatPanel",Xe.PANEL_TYPES.CHAT,!0,!0,!1)),s("agent"))},300),a=Ke.isOpen("se_liveChat_available_agent")?i(!0,"api"):z.noop;Y.chatManager.init(r,function(){t()?n():i(!0,"agent")()},a,l)}}))}),s(n)}function u(e){var t=e.editorAPI,o=e.isUsingDealer,i=e.description,n=e.stage;z.invoke(t,["bi","event"],Je.events.dealer.content_presented_by_dealer,{description:o?"":i,content_presented_by_dealer:o,stage:n,category:"upgrade"})}var g=function(e){return z.get(e.wixDealerClientApi,"DealerAssetsLoader")&&z.invoke(e,["dsRead","generalInfo","getMetaSiteId"])};function Ot(o,e){g(o)&&Y.dealerUtils.loadDealerAsset(o.wixDealerClientApi,Y.dealerUtils.bannerPositions.POST_PUBLISH,e,o.site.getMetaSiteId()).then(function(e){var t=e.assetExist();u({editorAPI:o,isUsingDealer:t,stage:"prefetch",description:t?"":"banner data pre fetch asset does not exist error"}),o.store.dispatch(Qe.savePublish.actions.setIsDealerLoaded(t))}).catch(function(e){u({editorAPI:o,isUsingDealer:!1,stage:"prefetch",description:"banner data pre fetch "+z.get(e,"message","unknown")+" error"})})}return{create:function(b,l){var t={scrollTop:0,scrollLeft:0},i=function(e,t){return b.dispatch(Qe.editorPlugins.userPreferences.actions.setSiteUserPreferences(e,t))},s=function(e){return Qe.editorPlugins.userPreferences.selectors.getSiteUserPreferences(e)(b.getState())},v=function(){return!!V.dsRead.generalInfo.isFirstSave()&&(V.panelHelpers.openFirstSaveSitePanel(),!0)};function S(e){V.addPanel=e;var t,o,i,n,a,r=V.editorEventRegistry.constants.events.ADD_PANEL_LOADED;ne.onAddPanelLoaded(V),K.onPreviewReady(V),Z.onPreviewReady(V),je.onPreviewReady(V),$e.onPreviewReady(V),J.onPreviewReady(V),Y.automationObserver.onPreviewReady(V),V.bi.event(Je.events.editor.Add_PANEL_LOADED,{}),V.editorEventRegistry.dispatch(r,V),a=["shoutOut","wixBookings","compPanels"],Y.appStudioUtils.isAppStudio()&&a.push("appStudio"),require(a,function(e,t,o,i){t.onPreviewReady(V),e.onPreviewReady(V),Y.appStudioUtils.isAppStudio()&&V.pluginService.registerPlugin(V.pluginService.pluginConstants.ADD_PANEL_DROP,"widgetPage",i.plugins.addPanelDropWidgetPagePlugin)}),t=V,o=Y.url.parseUrl(window.document.location.href).query||"",i=z.mapKeys(o,function(e,t){return t.toLowerCase()}),n=z.partial(ze.openPanel,i,t),i.pageid?t.pages.navigateTo(i.pageid,n):n()}function E(){var e=V.dsRead.seo.title.get()||"",t=V.dsRead.seo.description.get()||"",o=V.dsRead.seo.keywords.get()||"",i=V.homePage.get(),n=V.dsRead.pages.data.get(i);n.pageTitleSEO=e,n.descriptionSEO=t,n.metaKeywordsSEO=o,V.pages.data.update(i,n)}function P(e){var t,o,i=void 0;i=Ke.isOpen("cachedDocumentServices")&&e.withCache?e.withCache():e,t=V,o=i,z.defaultsDeep(t,z.omit(o,"history")),V.documentServices=i;var n=b.dispatch(Qe.editorPlugins.services.actions.loadDocumentServices(i)),a=n.dsRead,r=n.dsActions,s="true"===Ke.getValue("specs.media.mediamanager3");b.dispatch(Qe.uploadedFonts.actions.loadWixmpSdk(a.generalInfo.media.getUserUploadToken(),s)),z.assign(V,{dsRead:a,dsActions:r}),window.documentServicesReady=!0,window.testApi&&z.assign(window.testApi,{dsRead:a,dsActions:r}),l&&Y.measuring.measureAndReportFrameRate(b.getState,rt,b.dispatch,ft,V.mouseActions.getRegisteredMouseMoveAction,Qe.editorPlugins.bi.actions.event,Je.events.editor,2)}function C(e){V.store.dispatch(Qe.editorPlugins.services.actions.loadService("createSantaPreview",e))}function T(){te.register(V),Ve.register(V)}var o=void 0,_=function(){if(o)return o;var e=(Y.serviceTopology.wixStoresMigrationServiceUrl.replace(/ecommerce-migration-web\//,"bi-profile-webapp/userprofile")||"https://editor.wix.com/_api/wix-bi-profile-webapp/userprofile")+"?fields=post_reg_category,post_reg_sub_category,wix_code_exposure_flag&accept=json";return W.requestsUtil.fetchJson(e).then(function(e){o=Promise.resolve(e)}).catch(function(e){o=Promise.reject(e)}).then(function(){return o})},n=function(){var e=(0,Qe.editorPlugins.topBar.selectors.getOverriddenMenuItems)(V.store.getState()),t=z.get(e,[Xe.ROOT_COMPS.TOPBAR.MENU_BAR_ITEMS.TOOLS,Xe.OVERRIDDEN.TOP_BAR.MENU_ITEMS.TOOLS_PROPERTIES_PANEL.KEY]),o=Xe.OVERRIDDEN.TOP_BAR.MENU_ITEMS.TOOLS_PROPERTIES_PANEL.SHOULD_OPEN_AS_SECTION,i=z.get(t,o,!1);return Ke.isOpen("se_propertiesAsSection")||i};function p(e){var t=b.getState(),o=z.isUndefined(e)?t.hideTools&&!t.hideToolsAndMaintainStagePosition:e,i=Xe.UI.TOPBAR_HEIGHT;return o&&(i-=Xe.UI.OFFSET_TOP_WHEN_TOOLS_HIDDEN),V.isMobileEditor()&&(i+=Xe.UI.MOBILE_PREVIEW_TOP),i}var e=z.curry(function(e,t){if(!z.isUndefined(t)&&!z.isEqual(t,b.getState()[e])){var o={};o[e]=t,b.dispatch(Qe.editorPlugins.services.actions.setState(o))}});function a(e){V.updateState({scrollTo:e})}function c(){return st(b.getState())}var d=function(){return V.dsRead.viewMode&&V.dsRead.viewMode.get()};function I(){var e=b.getState();e.editorIsInit||g(!1);var t=ut(e),o=V.getPendingStateChanges();V.pendingStateChanges={},V.pendingEditorStateUpdateCallbacks=[];var i=z.filter(t,V.dsRead.components.is.rendered),n=!z.isEqual(i,t);n&&V.mouseActions.turnOffMouseEvents();var a=d()===V.dsRead.viewMode.VIEW_MODES.MOBILE,r=ht(e),s=z.defaults({config:z.defaults({previewHeight:V.dsRead.site.getHeight()},b.getState().config),editorIsInit:!0,isMobileEditor:a},o);b.dispatch(Qe.editorPlugins.services.actions.setState(s)),b.dispatch(bt(z.defaults({top:p()},r))),n?V.selection.selectComponentByCompRef(i):ft(e)||b.dispatch(ct(w(ut(b.getState())))),b.dispatch(Qe.editorPlugins.highlights.actions.updateHighlights()),b.dispatch(Qe.editorPlugins.dynamicPages.actions.updateDynamicPagesState()),V.shouldUpdateEditorScrollAfterHeightUpdate&&(V.applyPreviewScrollToEditorScroll(),V.shouldUpdateEditorScrollAfterHeightUpdate=!1);var l=V.dsRead.pages.getFocusedPage(),c=!1;l&&!z.isEqual(Qe.editorPlugins.pages.selectors.getFocusedPage(b.getState()),l)&&(b.dispatch(Qe.editorPlugins.pages.actions.setFocusedPage(l)),c=!0),ft(e)||(z(b.getState()).thru(Qe.editorPlugins.componentsStore.selectors.getComponentsList).reject(V.components.is.exist).thru(Qe.editorPlugins.componentsStore.actions.removeComponentsStore).thru(b.dispatch).value(),b.dispatch(Qe.editorPlugins.applicationStudio.actions.applyApplicationStudioBehaviors(c))),b.dispatch(Qe.editorPlugins.services.actions.onViewerChanged()),b.flush()}function r(e){return V.dsRead.tpa.isTpaByCompType(e)}function M(e){V.sitePublishedCallbacks.push(e)}function u(e){var r=b.getState();V.dsActions.renderPlugins.allowSiteOverflow(e),V.dsActions.renderPlugins.setExtraSiteHeight(e||V.isMobileEditor()?0:V.editorConfig.extraSiteHeight),V.dsActions.renderPlugins.setPreviewTooltipCallback(function(e,t){var o,i,n,a=(o=e,i=ht(r).top,(n=z.pick(o,["top","left","height","width"])).top+=i,n);V.showFloatingBubble(t,a),_t=window.setTimeout(V.hideFloatingBubble,Xe.PREVIEW.FLOATING_BUBBLE_TIMEOUT)}),V.dsActions.renderPlugins.setErrorPagesPopUp(function(e){V.preview.isInPreviewMode&&V.panelManager.openPanel("panels.errorPages.errorPagePanel",{errorInfo:e,routerAddress:e.routerUrl})})}function g(e){var t=d()===V.dsRead.viewMode.VIEW_MODES.MOBILE,o=e&&!t,i=V.dsActions.documentMode;V.dsActions.components.modes.resetAllActiveModes(),i.enablePlaying(e),i.enableZoom(e),i.enableSocialInteraction(!1),i.enableExternalNavigation(!1),i.enableSlideShowGalleryClick(e),i.enableTinyMenuOpening(e),i.enableRenderFixedPositionContainers(e),i.enableRenderFixedPositionBackgrounds(e),i.enableBackToTopButton(e),i.enablePageProtection(!1),i.toggleWixAds(e&&!Qe.editorPlugins.wixAd.selectors.getOverriddenItems(b.getState()).alwaysHidden),i.enableSiteMembersDialogsOpening(e),i.enableResetGalleryToOriginalState(e),i.enableResetComponent(!e),i.resetBehaviors(e),i.enableAction("screenIn",e),i.enableAction("viewportEnter",e),i.enableAction("viewportLeave",e),i.enableAction("load",e),i.enableAction("scrollScrub",e),i.enableAction("modeChange",e),i.enableAction("exit",e),i.enableAction("bgScrub",o),i.setExtraSiteHeight(e||t?0:V.editorConfig.extraSiteHeight),i.enableShouldUpdateJsonFromMeasureMap(!e),i.allowSiteOverflow(e),e||(V.dsActions.pages.animations.stopAll(),i.runtime.reset()),i.setComponentViewMode(e?"preview":"editor"),i.allowWixCodeInitialization(e),i.showHiddenComponents(e?!e:V.getViewTools().showHiddenComponents),i.showControllers(e?!e:V.getViewTools().developerModeEnabled)}function m(){return St(b.getState())}function f(e){V.waitForChangesApplied(function(){return y(!1,e)})}function h(e){q.tooltipManager.hide(Xe.ROOT_COMPS.TOOLTIPS.FIRST_TIME_EXIT_POPUP_MODE),V.waitForChangesApplied(function(){return y(!0,e)})}function y(t,e){var o=t===V.isMobileEditor(),i=!t&&V.mobile.mobileWizard.isEnabled();if(t&&Ke.isOpen("se_removeSameViewMode")&&V.dsActions.waitForChangesApplied(function(){V.mobile.afterMovingToMobileEditorCallback(m())}),!o&&!i){z.invokeMap(V.deviceTypeChangeCallbacks,z.call),t||V.updateState({isMobileEditor:!1,mobileFramePosition:null}),Y.fedopsLogger.interactionStarted(t?Y.fedopsLogger.INTERACTIONS.CHANGE_EDITOR_MODE_TO_MOBILE:Y.fedopsLogger.INTERACTIONS.CHANGE_EDITOR_MODE_TO_DESKTOP);var n=t?V.dsRead.viewMode.VIEW_MODES.MOBILE:V.dsRead.viewMode.VIEW_MODES.DESKTOP;o||V.developerMode.getContext().type!==Xe.DEVELOPER_MODE.CONTEXT_TYPES.PAGE||V.panelManager.closeAllPanels(),V.selection.deselectComponents();var a=m();a&&V.dsActions.documentMode.enableAction("screenIn",!1),V.dsActions.viewMode.set(n);var r=V.dsActions.documentMode;V.dsActions.waitForChangesApplied(function(){var e=a&&!t;r.resetBehaviors(a),r.enableAction("screenIn",a),r.enableAction("load",a),r.enableAction("scrollScrub",a),r.enableAction("viewportEnter",a),r.enableAction("viewportLeave",a),r.enableAction("modeChange",a),r.enableAction("exit",a),r.enableAction("bgScrub",e),r.enableAction("pageTransition",a),r.updateAnimationsViewMode(n),t&&!Ke.isOpen("se_removeSameViewMode")&&V.mobile.afterMovingToMobileEditorCallback(a),t&&V.dsActions.platform.notifyAppsOnCustomEvent(X.factory.switchedToMobileView({})),Y.fedopsLogger.interactionEnded(t?Y.fedopsLogger.INTERACTIONS.CHANGE_EDITOR_MODE_TO_MOBILE:Y.fedopsLogger.INTERACTIONS.CHANGE_EDITOR_MODE_TO_DESKTOP),Y.ravenUtils.setGlobalTagForErrors({isDesktopEditor:!t,isMobileEditor:t})}),u(m()),!e&&t&&V.dsActions.history.canUndo()&&V.history.add("mobile structure was updated");var s=m();r.setExtraSiteHeight(s||t?0:V.editorConfig.extraSiteHeight),r.resetBehaviors(s),V.store.dispatch(Qe.editorPlugins.rulers.actions.resetHistory()),V.dsActions.waitForChangesApplied(function(){V.store.dispatch(Qe.inlinePopup.actions.closeAll(!0))}),t||V.dsActions.components.modes.resetAllActiveModes()}}var A=["MenuToggle"];function O(e){var t=b.getState();return!e||Qe.editorPlugins.pinMode.selectors.isOpen(t)?{horizontallyMovable:!1,verticallyMovable:!1}:V.components.getRestrictions(e,["verticallyMovable","horizontallyMovable"])}function R(e){var t=O(e);return e&&z.assign(t,{canMoveForward:V.components.arrangement.canMoveForward(e),canMoveBackward:V.components.arrangement.canMoveBackward(e)}),t}function w(e){if(z.isEmpty(e))return{};var t=R(e),o=V.components.layout.isPinned(e),i=b.getState().isOpenTextEditor,n=["container","containable","movable","alignable","resizable","disabledKnobs","duplicatable","fixed","showLegacyFixedPosition","anchorableFrom","anchorableTo","controlledByParent","flippable"];return o||n.push("horizontallyResizable","verticallyResizable","rotatable","duplicatable"),i||n.push("removable"),z.assign(t,V.components.getRestrictions(e,n)),o&&(t.horizontallyResizable=!1,t.verticallyResizable=!1,t.rotatable=!1,t.duplicatable=!1),i&&(t.removable=!1),z.assign(t,{resizeableSides:V.components.layout.getResizableSides(e),canBeFixed:V.components.layout.canBeFixedPosition(e),resizeOnlyProportionally:V.resizeOnlyProportionally(e),canToggleShowOnAllPages:V.components.canToggleShowOnAllPages(e),canResizeWithAnchors:V.components.layout.getResizableWithAnchors(e),canResizeDiagonally:V.components.layout.getResizableDiagonally(e)}),t}function D(){return vt(b.getState())}function k(e,t){b.dispatch(Qe.editorPlugins.bi.actions.event(e,t))}function x(e,t){var o=mt(e),i=mt(t);if(gt(o)||gt(i)){if(o.length!==i.length)return!1;var n=z.sortBy(o,"id"),a=z.sortBy(i,"id");return z.every(n,function(e,t){return V.dsRead.utils.isSameRef(e,a[t])})}return V.dsRead.utils.isSameRef(z.head(o),z.head(i))}function N(e,t){var o=b.getState().topBar;o.dropPanelDisabled||(U({topBar:z.defaults({openedDropPanel:e,shouldDropPanelRemainOpen:t},o)}),V.openPanelTimeout&&window.clearTimeout(V.openPanelTimeout),e&&e!==Xe.ROOT_COMPS.TOPBAR.DROP_PANELS.LANGUAGE_DROP_PANEL&&(V.openPanelTimeout=window.setTimeout(function(){V.bi.event(Je.events.topbar.TOP_BAR_PANEL_OPENED,{menu_name:e})},3e3)))}function L(e){return V.panelHelpers.openPagesPanel(e)}var B=[],F=-1;function U(e,t){z.isFunction(t)&&(null===z.last(B)&&(B=[],F=-1),B.push(t));var o=z.defaults({__renderCounter:B.length},e);b.dispatch(Qe.editorPlugins.services.actions.setState(o))}var G={};function H(e,t){return o=V.components.getType(e),i=t,G[o]&&G[o][i]||null;var o,i}var V={store:b,onPreviewReady:function(e,t,o){if(V.store.dispatch(Qe.editorPlugins.services.actions.setState({previewReady:!0})),e){P(e),V.bi.event=k;var i=!V.dsRead.generalInfo.isFirstSave();V.store.dispatch(Qe.editorPlugins.leavePopup.actions.setLeavePopup(!i)),V.dsActions.renderPlugins.setPremiumNavigationHandler(v)}Y.appStudioUtils.isAppStudio()&&(Y.ravenUtils.setGlobalTagForErrors({isAppStudio:!0}),Y.fedopsLogger.interactionStarted(Y.fedopsLogger.INTERACTIONS.APP_STUDIO_INIT),V.store.dispatch(Qe.applicationStudio.actions.openApplicationStudio()).then(function(){Y.fedopsLogger.interactionEnded(Y.fedopsLogger.INTERACTIONS.APP_STUDIO_INIT)}).catch(function(e){Y.ravenUtils.captureError(e,{tags:{failedOnOpenAppStudio:!0}})})),Y.localModeUtils.isLocalModeEnabled()&&V.store.dispatch(Qe.localMode.actions.openLocalMode()),t&&C(t),o&&V.store.dispatch(Qe.editorPlugins.services.actions.loadService("compFactoryService",Ge.create(o))),I(),_().then(function(e){var t=e.payload&&e.payload.fields;b.dispatch(Qe.editorPlugins.userProfile.actions.setUserProfile(z.keyBy(t,"name")))}).catch(function(e){W.log.error(e)}),ne.init(V,ae.registerGfppActions,ie.registerComponent),V.store.dispatch(Qe.platform.actions.fetchFreshAppsData());var n,a,r,s,l,c,p,d,u,g,m=V.updateUserPreferencesOnPreviewReady();if(V.store.dispatch(Qe.editorPlugins.welcomeScreen.actions.getRemoteWelcomeScreenConfig()),M(function(){var e=V.store.getState(),t=Qe.editorPlugins.welcomeScreen.selectors.getWelcomeScreenConfig(e);!z.get(t,"error")&&Ke.isOpen("se_mobileWelcomeScreenPanel")&&V.store.dispatch(Qe.editorPlugins.welcomeScreen.actions.publishRemoteWelcomeScreenConfig())}),n=V,a="true"===Ke.getValue("specs.media.mediamanager3")||"true"===Ke.getValue("specs.media.mediamanager3migrate"),r={siteMediaToken:Mt(n,a),version:a?"G6":"G5",languageCode:Y.editorModel.languageCode},n.mediaServices.initMediaManager(r),n.savePublish.registerFirstSaveCallback(function(){n.mediaServices.mediaManager.updateSiteMediaToken(Mt(n,a))}),s=V,l=Ke.isOpen("specs.media.MediaManager3")||Ke.isOpen("specs.media.MediaManager3Migrate"),s.mediaServices.initUserFeedback({siteToken:Mt(s,l),metasiteId:s.dsRead.generalInfo.getMetaSiteId(),initiator:"editor",origin:"EDITOR"}),c=V,p=Ke.isOpen("specs.media.MediaManager3")||Ke.isOpen("specs.media.MediaManager3Migrate"),c.mediaServices.initMediaStudio({siteToken:Mt(c,p),metasiteId:c.dsRead.generalInfo.getMetaSiteId(),saveStrategy:tt.SaveStrategy.Upload,initiator:"editor"}),V.mediaServices.initVideoMaker(),At(V),Ke.isOpen("se_unifiedChatWidget")&&!Y.appStudioUtils.isAppStudio()){var f=V.documentServices.platform.getAppDataByApplicationId(Xe.APPLICATIONS.META_SITE_APPLICATION_ID),h=V.dsRead.generalInfo.getMetaSiteId();Y.chatManager.initUnifiedChatWidget(f,h)}Ke.isOpen("se_stylablePanel")&&(d=V,u=Qe.editorPlugins.stylableEditor.actions,g=d.documentServices.components.stylable.getEditorInstance(),d.store.dispatch(u.load(g)));var y=V.store.dispatch(Qe.editorPlugins.appInstaller.actions.installChosenApps());Promise.all([m,y]).then(function(){V.autosaveManager.init(),z.includes(z.get(window,"location.href"),"&blogMigration")&&V.panelManager.openPanel("blog.newMenuPanel")}),y.then(function(){"ie11"===Y.browserUtil.getDeprecatedBrowser()?V.registerInitUserPrefsCallback(function(){return function e(){return b.dispatch(Qe.editorPlugins.panels.actions.updateOrOpenPanel("panels.messagePanels.browserDeprecationMessageForIE",{openHelpCenter:V.panelManager.openHelpCenter,onConfirm:function(){return window.setInterval(e,18e5,!0)}}))}()}):Y.browserUtil.isDeprecatedBrowser()&&V.registerInitUserPrefsCallback(function(){var e;(e=V).panelManager.openPanel("panels.messagePanels.browserDeprecationMessage",{openHelpCenter:e.panelManager.openHelpCenter,browser:Y.browserUtil.getDeprecatedBrowser()},!0)}),V.registerInitUserPrefsCallback(function(){return V.initWelcomeScreen()}),V.components.onPreviewReady(),E(),V.saveManager.setTimerForSaveReminder(),V.feedback.init(),V.site.init(),V.dsActions.registerToSiteChanged(V.notifyViewerUpdate),V.dsActions.documentMode.enableAction("screenIn",!1),V.dsActions.documentMode.enableAction("scrollScrub",!1),V.dsActions.documentMode.enableAction("viewportEnter",!1),V.dsActions.documentMode.enableAction("viewportLeave",!1),V.dsActions.documentMode.enableAction("modeChange",!1),V.dsActions.documentMode.enableAction("load",!1),V.dsActions.documentMode.enableAction("exit",!1),V.dsRead.generalInfo.isFirstSave()||V.store.dispatch(Qe.editorPlugins.leftBar.actions.collapseMenu()),Je.registerEvents(V),T(),V.campaigns.personalSale.fetchInfo(),V.dsRead.generalInfo.isFirstSave()&&V.initTemplateCharacterSet(),Ke.isOpen("se_multilingual")&&V.store.dispatch(Qe.editorPlugins.multilingual.actions.checkLanguageStatusThunk()).then(function(e){if(e.payload.status)return V.store.dispatch(Qe.editorPlugins.multilingual.actions.loadLanguagesThunk())}),V.store.dispatch(Qe.editorPlugins.uploadedFonts.actions.init()),_().then(V.promotions.initPromotions).catch(function(e){W.log.error(e)}),ve.loadAndCreate(V,S),Ke.isOpen("se_load_native_panel_components")&&V.store.dispatch(Qe.editorPlugins.componentsLoadService.actions.load(["wixui.baseui.ToggleSwitch"])),V.store.dispatch(Qe.editorPlugins.services.actions.onPreviewReady()),V.dsActions.waitForChangesApplied(function(){V.store.dispatch(Qe.inlinePopup.actions.closeAll(!0))}),Ke.isOpen("specs.wos.PrefetchBizMgrFromEditor")&&V.store.dispatch(Qe.editorPlugins.businessManager.actions.prefetchBizMgr()),Y.ravenUtils.setGlobalTagForErrors({editorLoaded:!0})}).catch(function(e){Y.ravenUtils.captureError(e,{tags:{failedOnPreviewReady:!0}})})},onRenderDone:function(e){var t=void 0;for(t=F+1;t<e;t++)F++,z.isFunction(B[t])&&B[t](),B[t]=null},updateState:U,isMetaSiteFlagOpen:function(e){return z.includes(Y.editorModel.metaSiteFlags,e)},synchronizeSiteSEOToMainPageSEO:E,initTemplateCharacterSet:function(){var e,t,o=V.dsRead.theme.fonts.getCharacterSet();if(t=o,z.isEqual(t,Tt)||(e=o,z.includes(e,"arabic")&&z.includes(e,"hebrew"))){var i=V.dsRead.theme.fonts.getLanguageCharacterSet(Y.languages.getLanguageCode());if(i)V.dsActions.theme.fonts.updateCharacterSet(i);else{var n=V.dsRead.theme.fonts.getCharacterSetByGeo();V.dsActions.theme.fonts.updateCharacterSet(n)}}},setDocumentServices:P,setSantaPreviewCreator:C,initPlugins:T,getViewTools:function(){return z.clone(b.getState().viewTools)},updateUserPreferencesOnPreviewReady:function(){var e=V.dsRead.generalInfo.getSiteId(),t=void 0,o=void 0,i=V.dsRead.generalInfo.isFirstSave();function n(t){V.userPreferencesInitCallbacksInvoked=!0,V.userPreferencesLoaded=t,z.forEach(V.userPreferencesInitCallbacks,function(e){e(t)})}function a(){_().then(function(){t=Qe.editorPlugins.userPreferences.selectors.getGlobalPrefFetchStatus(V.store.getState()),o=Qe.editorPlugins.userPreferences.selectors.getSitePrefFetchStatus(V.store.getState()),t&&(o||i)&&n(!0)}).catch(function(e){W.log.error(e),n(!1)})}return b.dispatch(Qe.editorPlugins.userPreferences.actions.loadGlobalPreferences()).then(function(){b.dispatch(Qe.editorPlugins.userPreferences.actions.setGlobalPrefFetchStatus(!0)),a()}).catch(function(e){W.log.error(e),b.dispatch(Qe.editorPlugins.userPreferences.actions.setGlobalPrefFetchStatus(!1))}),i?Promise.resolve():b.dispatch(Qe.editorPlugins.userPreferences.actions.loadSitePreferences(e,!1)).then(function(){a()}).catch(function(){a()})},initWelcomeScreen:function(){V.newEditorWelcomeScreenWrapper.initWelcomeScreen(V)},initViewToolsFromUserPrefs:function(){var e=Xe.USER_PREFS.VIEW_TOOLS,t={showHiddenComponents:s(e.SHOW_HIDDEN_COMPS),developerModeEnabled:s(e.DEVELOPER_MODE_ENABLED),developerToolBarEnabled:s(e.DEVELOPER_TOOLBAR_ENABLED)&&!n(),guidelinesEnabled:s(e.GUIDELINES_ENABLED),sectionsHandlesEnabled:s(e.SECTIONS_HANDLES_ENABLED),snapToEnabled:s(e.SNAPTO_ENABLED),rulersEnabled:s(e.RULERS_ENABLED)};t.toolbarEnabled=s(e.TOOLBAR_ENABLED),z.defaults(t,Ct),b.dispatch(Qe.editorPlugins.services.actions.setState({viewTools:t})),n()&&(s(e.DEVELOPER_TOOLBAR_ENABLED)?V.store.dispatch(Et(Xe.DOCKED_PANEL_SECTIONS.PROPERTIES)):V.store.dispatch(Pt(Xe.DOCKED_PANEL_SECTIONS.PROPERTIES))),b.dispatch(Qe.editorPlugins.rulers.actions.initRulersFromUserPreferences()),b.dispatch(Qe.editorPlugins.rulers.actions.resetHistory())},initUserAddedColors:function(){var e,t,o=V.dsRead.theme.colors.getCustomUsedInSkins(),i=Xe.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED;e=i,t=o,b.dispatch(Qe.editorPlugins.userPreferences.actions.setSessionUserPreferences(e,t))},refreshNavControlsSize:e("navControlsSize"),refreshPreviewPosition:function(e){return b.dispatch(bt(e))},refreshEditingAreaPosition:e("editingAreaPosition"),refreshMobileFramePosition:e("mobileFramePosition"),setEditBoxRotateKnobRect:e("editBoxRotateKnobRect"),getOpenPanels:c,notifyViewerUpdate:function(t){var e=b.getState();Qe.platform.selectors.getIsApplicationInstallationStatus(e)&&Ke.isOpen("se_blockOnViewerChangedDuringPlatformAppInstallation")||z.forEach(V.viewerUpdateCallbacks,function(e){e(t)})},setStateWaitForViewer:function(e){z.assign(V.pendingStateChanges,e)},setStateUpdateCallback:function(e){V.pendingEditorStateUpdateCallbacks.push(e)},getPendingStateChanges:function(){return z.reduce(V.pendingEditorStateUpdateCallbacks,function(e,t){return z.assign(e,t())},V.pendingStateChanges)},preventMouseDown:function(){window.addEventListener("mousedown",V.preventEvent,!0),V.preventMouseDownTimeout=window.setTimeout(V.allowMouseDown,5e3)},allowMouseDown:function(){window.clearTimeout(V.preventMouseDownTimeout),window.removeEventListener("mousedown",V.preventEvent,!0)},preventEvent:function(e){e.stopPropagation(),e.preventDefault()},onViewerChanged:I,registerInitUserPrefsCallback:function(e){V.userPreferencesInitCallbacksInvoked?e(!!V.userPreferencesLoaded):V.userPreferencesInitCallbacks.push(e)},exitEditor:function(){window.open(ot+"?referralInfo=EDITOR","_self")},isTpa:r,registerToViewerChange:function(t){return V.viewerUpdateCallbacks.push(t),function(){var e=V.viewerUpdateCallbacks.indexOf(t);-1!==e&&V.viewerUpdateCallbacks.splice(e,1)}},registerRemovePlugin:function(e,t){V.removePlugins[e]=t},registerRemovePagePlugin:function(e,t){V.removePagePlugins[e]=t},registerComponentsRemoveHandlerPlugin:function(e){V.componentsRemoveHandlerPlugins.push(e)},registerHidePlugin:function(e,t){V.hidePlugins[e]=t},registerDuplicatePlugin:function(e,t){V.duplicatePlugins[e]=t},registerCannotRemovePlugin:function(e,t){V.cannotRemovePlugins[e]=t},registerCopyComponentPlugin:function(e,t){V.copyComponentPlugins[e]=t},registerAddComponentPlugin:function(e,t){V.addComponentPlugins[e]=t},registerAfterPasteComponentCallback:function(e){V.afterPasteComponentCallbacks.push(e)},registerPasteComponentPlugin:function(e,t){V.pasteComponentPlugins[e]=V.pasteComponentPlugins[e]||[],V.pasteComponentPlugins[e].push(t)},registerSerializeComponentPlugin:function(e,t){V.serializeComponentPlugins[e]=V.serializeComponentPlugins[e]||[],V.serializeComponentPlugins[e].push(t)},registerCutComponentPlugin:function(e,t){V.cutComponentPlugins[e]=t},registerPageNavigationCallback:function(e){V.pageNavigationCallbacks.push(e)},registerCompNamePlugin:function(e,t){V.compNamePlugins[e]=t},registerCompIconPlugin:function(e,t){V.compIconPlugins[e]=t},registerSitePublishedCallbacks:M,registerDeviceTypeChangeCallbacks:function(e){V.deviceTypeChangeCallbacks.push(e)},applyPreviewScrollToEditorScroll:function(){if(!m()){var e=V.site.getScroll();a({scrollLeft:e.x,scrollTop:e.y})}},setRenderPlugins:u,prepareDocumentForPreviewMode:g,getNavControlsSize:function(){return b.getState().navControlsSize},getEditBoxRotateKnobRect:function(){return b.getState().editBoxRotateKnobRect},getEditingAreaPosition:function(){return b.getState().editingAreaPosition},getMobileFramePosition:function(){return b.getState().mobileFramePosition},isCurrentPageLandingPage:function(){var e=V.pages.getCurrentPageId();return V.dsRead.pages.isLandingPage(e)},isDesktopEditor:function(){return!Qe.editorPlugins.leftBar.selectors.isMobileEditor(b.getState())},isMobileEditor:function(){return Qe.editorPlugins.leftBar.selectors.isMobileEditor(b.getState())},resizeOnlyProportionally:function(e){return V.components.is.resizeOnlyProportionally(e)},openCantCopyPastePanel:function(){s(Xe.USER_PREFS.CANT_MAKE_CHANGES.MOBILE_CANT_MAKE_CHANGE_DONT_SHOW_AGAIN)||V.panelManager.openPanel("mobileEditor.panels.cantMakeChangeMobile",{},!0)},setDesktopEditor:f,setMobileEditor:h,setEditorMode:function(e,t){return(e?h:f)(t)},isMobileOptimizedSite:function(){return!(!V.dsRead||!V.dsRead.mobile)&&V.dsRead.mobile.isOptimized()},setMobileOptimizedSite:function(e){V.dsActions&&V.dsActions.mobile&&V.dsActions.mobile.enableOptimizedView(e)},groupComponents:function(e){if(!V.components.is.groupedComponent(e)){V.selection.deselectComponents();var t=V.components.groupComponents(e);V.closeCompPanelIfExists(),V.history.add("group components"),V.dsActions.waitForChangesApplied(function(){V.selection.selectComponentByCompRef(t)})}},getLeftBarButtonsBoundingRect:function(){return b.getState().leftBar.buttonsBoundingRect},closeRightClickMenu:function(e){U({contextMenu:null},e)},disableRightClickMenuCloseOnOuterClick:function(){V.rightClickMenuCloseOnOuterClickDisabled=!0},enableRightClickMenuCloseOnOuterClick:function(){V.rightClickMenuCloseOnOuterClickDisabled=!1},closeCompPanelIfExists:function(){V.panelManager.getPanelsOfType("compPanelFrame").length&&V.panelManager.closeAllPanelsOfType("compPanelFrame")},openFirstTimePanel:function(e){var t=z.isArray(e)?z.head(e):e,o=at.getCompTypeSuffix(t,V.dsRead),i="AppWidget"===o||"AppController"===o,n={};if(i){var a=V.selection.getSelectedComponentData();z.assign(n,{controllerType:z.get(a,"controllerType",""),appDefId:z.get(a,"applicationId",""),componentRef:t})}var r=s("firstTimePanelsNotToShow")||{};(i?r[n.appDefId+"_"+n.controllerType]:r[o])||V.isMobileEditor()&&!z.includes(A,o)||V.panelManager.openFirstTimePanel(o,n)},toggleShowOnAllPages:function(e){var t=void 0;return t=V.components.isShowOnAllPages(e)?V.dsRead.pages.getReference(V.dsRead.pages.getPrimaryPageId()):V.dsRead.siteSegments.getSiteStructure(),V.components.setContainer(e,t)},getCompDragRestrictions:O,getCompMoveRestrictions:R,getCompRestrictions:w,isPopUpMode:function(){return Boolean(D()&&V.dsRead.pages.popupPages.getCurrentPopupId())},reportAddMenuDrag:function(e){V.bi.event(Je.events.addPanel.ADD_MENU_DRAG_COMPONENT,e)},editorIsInit:function(){return b.getState().editorIsInit},navigateAndOpenPagesPanel:function(e,t,o){V.pages.navigateTo(e,function(){L(t),o&&o()})},openComponentPanel:function(e,t){t=t||{};var o=ut(b.getState()),i=z.get(t,"selectedComponent",o),n=at.getCompTypeSuffix(i,V.dsRead);return b.dispatch(Qe.editorPlugins.panels.actions.openComponentPanelFromType(n,e,t))},replaceComponentPanel:function(e,t){t=t||{};var o=ut(b.getState()),i=at.getCompTypeSuffix(o,V.dsRead);b.dispatch(Qe.editorPlugins.panels.actions.openComponentPanelFromType(i,e,z.assign({},t,{useLastPanelPosition:!0})))},openCompOutOfGridPanelIfNeeded:function(e){var t=V.utils.findAncestorMatchesCondition(e,V.components.is.showMarginsIndicator),o=V.components.getContainer(e);t&&V.components.layout.isCompExceedingContainerMargin(e,t,10)?(V.panelHelpers.handleOutOfGrid({},!0),V.bi.event(Je.events.columns.COLUMNS_ELEMENTS_PLACED_IN_DEAD_SPOT)):!t&&V.components.layout.shouldShowOutOfPageGridlinesWarning(e,o,50)&&V.panelHelpers.handleOutOfGrid()},openLinkPanel:function(){return V.panelHelpers.openLinkPanel.apply(this,arguments)},openPagesPanel:L,openColorPicker:function(e,t,o){var i=72,n=-12;V.panelManager.openPanel("panels.toolPanels.colorPicker.colorPickerPanel",{value:e,onChange:o.onChange,onClose:o.onClose,customInstanceColors:o.customInstanceColors,history:!1!==o.enableHistory&&V.history,palettePresets:!1!==o.allowPaletteEditing&&V.theme.colors.getColorPresets(),updateSitePalette:!1!==o.allowPaletteEditing&&V.theme.colors.update,previewOnHover:!1!==o.previewOnHover,top:t.top+i,left:t.left+n},!0)},setForceOpenPagesQuickNavigationEventCounter:function(){var e=b.getState().eventCounters,t=z.assign({},e,{forceOpenPagesQuickNavigation:e.forceOpenPagesQuickNavigation+1});b.dispatch(Qe.editorPlugins.services.actions.setState({eventCounters:t}))},getForceOpenPagesQuickNavigationEventCounter:function(){return b.getState().eventCounters.forceOpenPagesQuickNavigation},openQuickNavigation:function(e,t){e.setForceOpenPagesQuickNavigationEventCounter(),e.bi.event(Je.events.pages.quick_navigation_clicked,{origin:t})},setForceOpenPagesPanelEventCounter:function(){var e=b.getState().eventCounters,t=z.assign({},e,{forceOpenPagesPanel:e.forceOpenPagesPanel+1});b.dispatch(Qe.editorPlugins.services.actions.setState({eventCounters:t}))},getForceOpenPagesPanelEventCounter:function(){return b.getState().eventCounters.forceOpenPagesPanel},openLearnMore:function(e){e&&"string"==typeof e&&W.log.info("opening learn more with key - ",e)},isPreviewReady:D,setPortalChildren:function(e,t){var o=z.cloneDeep(b.getState().portalComps);z.isEmpty(t)?delete o[e]:o[e]=t,U({portalComps:o})},hasExternalDesign:function(e){return V.dsRead.tpa.isTpaByCompType(V.components.getType(e))},setAttachCandidate:function(e,t){t?U({attachCandidate:e}):V.setStateWaitForViewer({attachCandidate:e})},setConstraintArea:function(e){V.setStateWaitForViewer({constraintArea:e})},setPageSections:function(e,t){var o=z.clone(b.getState().pageSections);z.assign(o,{sections:e,selectedSection:t}),V.updateState({pageSections:o})},clearPageSections:function(){V.setPageSections(null,null)},sectionsHandles:{areSectionsHandlesEnabled:function(){return b.getState().viewTools.sectionsHandlesEnabled},toggleSectionsHandles:function(e,t){var o=!V.sectionsHandles.areSectionsHandlesEnabled();V.updateEditorViewTools("sectionsHandlesEnabled",o),i(Xe.USER_PREFS.VIEW_TOOLS.SECTIONS_HANDLES_ENABLED,o).then(e).catch(t)}},setSiteScale:function(e,t){V.store.dispatch(Qe.inlinePopup.actions.closeAll()),e!==b.getState().siteScale&&V.updateState({siteScale:e}),V.dsActions.site.setScrollAndScale(0,t,e,.5),V.ui.scroll.animateScroll({x:0,y:t},.5)},zoomMode:{enterZoomMode:function(){q.tooltipManager.hide(Xe.ROOT_COMPS.TOOLTIPS.FIRST_TIME_EXIT_POPUP_MODE),V.setSiteScale(.5,0),V.dsActions.documentMode.allowShowingFixedComponents(!1),Y.keyboardShortcuts.setContext(Y.keyboardShortcuts.CONTEXTS.ZOOM_MODE)},exitZoomMode:function(){V.setSiteScale(1,0),V.dsActions.documentMode.allowShowingFixedComponents(!0),Y.keyboardShortcuts.setContext(Y.keyboardShortcuts.CONTEXTS.EDITOR)},isInZoomMode:function(){return 1!==b.getState().siteScale}},snapData:{set:function(e,t){t?V.updateState({snapData:e}):V.setStateWaitForViewer({snapData:e})},clear:function(e){e?V.updateState({snapData:null}):V.setStateWaitForViewer({snapData:null})}},lasso:{setCandidates:function(e){V.updateState({lassoCandidates:e})},setLayout:function(e){V.updateState({lassoLayout:e})},clear:function(){V.updateState({lassoLayout:null,lassoCandidates:[]})}},text:{startEditing:function(){if(V._currentTextManager&&(CKEDITOR&&!CKEDITOR.wixDocumentServices&&(CKEDITOR.wixDocumentServices=V),!lt.isTextEditorOpen(b.getState()))){var e=V.selection.getSelectedComponents(),t=z.head(e);Y.ravenUtils.breadcrumb("Text Editor Opened",{textCompForEdit:t});var o=V.components.is.getDataEditOptions(t)===Xe.META_DATA.DATA_EDIT_OPTIONS.TEXT.STYLE_ONLY;qe.migrationUtils.isOldTextComponent(t,V.dsRead)?(V.bi.error(Je.errors.OLD_TEXT_MIGRATION),qe.migrationUtils.migrateComponent(t,V.dsRead,V.dsActions),V.dsActions.waitForChangesApplied(function(){b.dispatch(pt(o))})):b.dispatch(pt(o))}},stopEditing:function(){lt.isTextEditorOpen(b.getState())&&b.dispatch(dt())},setCurrentTextEditor:function(e){V._currentTextManager=e},isEditingText:function(){return lt.isTextEditorOpen(b.getState())},isEditingRepeatedTextComp:function(){var e=z.head(V.selection.getSelectedComponents());if("WRichText"===V.selection.getSelectedComponentType())return 1<V.components.getRepeatedComponents(e).length},undo:function(){V._currentTextManager.undo()},canUndo:function(){return V._currentTextManager.hasUndo},redo:function(){V._currentTextManager.redo()},canRedo:function(){return V._currentTextManager.hasRedo}},help:{openHelpCenter:function(e,t,o,i){W.log.error("editorAPI.help.openHelpCenter is deprecated. Use panelManager.openHelpCenter instead"),V.panelManager.openHelpCenter(e,o,i)}},utils:{isSameRef:x,isPage:function(e){var t=mt(e);return!gt(t)&&V.dsRead.utils.isPage(t[0])},isSiteSegment:function(e){var t=mt(e);if(gt(t))return!1;var o=[V.dsRead.siteSegments.getHeader(),V.dsRead.siteSegments.getFooter(),V.dsRead.siteSegments.getSiteStructure()];return!!z.find(o,function(e){return x(e,t[0])})},getParentIfCompCanBeSelected:function(e){return V.components.is.selectable(e)?null:V.components.getContainer(e)},findAncestorMatchesCondition:function(e,t){if(!e)return null;for(var o=V.components.getContainer(e);o&&!t(o,e);)o=V.components.getContainer(o);return o}},siteName:{validate:function(e){var t=V.dsRead.siteName.validate(e),o={};return o[V.dsRead.siteName.ERRORS.SITE_NAME_IS_EMPTY]="SAVE_SITE_NAME_IS_EMPTY",o[V.dsRead.siteName.ERRORS.SITE_NAME_IS_NOT_STRING]="SITE_NAME_IS_NOT_STRING",o[V.dsRead.siteName.ERRORS.SITE_NAME_INVALID_CHARS]="SAVE_SITE_NAME_INVALID_CHARS",o[V.dsRead.siteName.ERRORS.SITE_NAME_ENDS_WITH_HYPHEN]="SAVE_SITE_NAME_ENDS_WITH_HYPHEN",o[V.dsRead.siteName.ERRORS.SITE_NAME_TOO_SHORT]="SAVE_SITE_NAME_TOO_SHORT",o[V.dsRead.siteName.ERRORS.SITE_NAME_TOO_LONG]="SAVE_SITE_NAME_TOO_LONG",o[V.dsRead.siteName.ERRORS.SITE_NAME_ALREADY_EXISTS]="SAVE_SITE_NAME_ALREADY_EXISTS",t.errorMessage=o[t.errorCode],t},set:function(e){V.dsActions.siteName.set(e);var t=V.store.getState();nt.isDomainConnected(t,V.dsRead)||V.dsActions.generalInfo.setPublicUrl(nt.getFreeDomainPrefix(t,V.dsRead)+e)},sanitize:function(e){return V.dsActions.siteName.sanitize(e)},rename:function(t,o,e){var i=Y.serviceTopology.editorServerRoot||"//editor.wix.com/html/editor/web";i+="/meta-site-proxy/rename/"+V.dsRead.generalInfo.getMetaSiteId();var n=new FormData;n.append("newName",t),W.requestsUtil.fetch(i,{method:"POST",credentials:"same-origin",body:new URLSearchParams(n)}).then(function(){var e=V.store.getState();V.dsActions.siteName.set(t),Ot(V,!0),nt.isDomainConnected(e,V.dsRead)||V.dsActions.generalInfo.setPublicUrl(nt.getFreeDomainPrefix(e,V.dsRead)+t),o&&o()}).catch(e||z.noop)}},updateEditorViewTools:function(e,t){var o=z.isString(e)?_defineProperty({},e,t):e,i=z.defaults(o,V.getViewTools());V.updateState({viewTools:i})},toolbar:{isToolbarEnabled:function(){return b.getState().viewTools.toolbarEnabled},toggleToolbar:function(){var e=!V.toolbar.isToolbarEnabled();V.updateEditorViewTools("toolbarEnabled",e),i(Xe.USER_PREFS.VIEW_TOOLS.TOOLBAR_ENABLED,e)}},developerToolBar:{isEnabled:function(){return b.getState().viewTools.developerToolBarEnabled},toggle:function(){if(n())b.dispatch(Qe.sectionedPanel.actions.toggleSection(Xe.DOCKED_PANEL_SECTIONS.PROPERTIES));else{var e=!V.developerToolBar.isEnabled(),t=e?"open":"close";V.bi.event(Ze.events.PROPERTIES_PANEL_TOGGLE,{site_id:V.dsRead.generalInfo.getSiteId(),state:t}),V.updateEditorViewTools("developerToolBarEnabled",e),i(Xe.USER_PREFS.VIEW_TOOLS.DEVELOPER_TOOLBAR_ENABLED,e)}}},developerHiddenComponents:{isEnabled:function(){return b.getState().viewTools.showHiddenComponents},toggle:function(){var e=!V.developerHiddenComponents.isEnabled();V.updateEditorViewTools("showHiddenComponents",e),V.dsActions.documentMode.showHiddenComponents(e),i(Xe.USER_PREFS.VIEW_TOOLS.SHOW_HIDDEN_COMPS,e)}},grid:{guidelines:{isGuidelinesEnabled:function(){return b.getState().viewTools.guidelinesEnabled},toggleGuidelines:function(e,t){var o=!V.grid.guidelines.isGuidelinesEnabled();V.updateEditorViewTools("guidelinesEnabled",o),i(Xe.USER_PREFS.VIEW_TOOLS.GUIDELINES_ENABLED,o).then(e).catch(t)}},snapTo:{isSnapToEnabled:function(){return b.getState().viewTools.snapToEnabled},toggleSnapTo:function(e,t){var o=!V.grid.snapTo.isSnapToEnabled();V.updateEditorViewTools("snapToEnabled",o),i(Xe.USER_PREFS.VIEW_TOOLS.SNAPTO_ENABLED,o).then(e).catch(t)}}},siteSegments:{getRefs:function(){var e=V.dsRead.siteSegments;return[e.getFooter(),e.getHeader(),e.getPagesContainer(),e.getSiteStructure()]},getPagesContainerAbsLayout:function(){return Qe.editorPlugins.siteSegments.selectors.getPagesContainerAbsLayout(V.dsRead)}},tooltipTextService:{registerTooltipText:function(e,t,o){z.isUndefined(G[e])&&(G[e]={}),G[e][t]=o},getSelectedComponentTooltipText:function(e){return H(V.selection.getSelectedComponents(),e)},getComponentTooltipText:H},homePage:{get:function(){return V.dsRead.homePage.get()},set:function(e){V.dsActions.homePage.set(e),ee.setHomePagePlugins.run(V,e)}},openEditorVersionInfoPanel:function(){V.panelManager.openPanel("rEditor.panels.editorVersionInfoPanel")},styles:{openApplyStylePanel:function(e){V.panelManager.openPanel("rEditor.panels.applyStylePanel",{selectedComp:e})}},bi:{getComponentsBIParams:function(e){return z.map([].concat(e),function(e){var t={};if(e){t.component_id=e.id;var o=V.components.getType(e);(t.component_type=o)&&V.isTpa(o)&&z.assign(t,V.bi.getTpaComponentBIParams(e))}return t})},getTpaComponentBIParams:function(e){var t={};if(!z.isEmpty(e)&&r(V.components.getType(e))){var o=V.components.data.get(e)||{},i=V.dsRead.tpa.app.getData(o.applicationId);t.app_id=""+i.appDefinitionId,t.app_site_id=""+i.instanceId,t.instance_id=""+e.id,t.widget_id=""+o.widgetId;var n="TPAWidget"===o.type,a=V.dsRead.tpa.app.isLastAppComp(o.applicationId)||!(n||V.dsRead.tpa.app.isMultiSectionInstalled(o.applicationId));t.is_last_tpa=a?1:0}return t},reportBI:function(o,e,t){!t||z.isFunction(t)&&t()?z.forEach(e,z.bind(function(e){var t=z.isFunction(e)?e():e;t.is_last=t.is_last||t===V,V.bi.event(o,t)},e[e.length-1])):z.isFunction(t)&&V.biConditionedEventsQueue.push({event:o,biParamArray:e,condition:t})},tryFlushingConditionedEvents:function(){if(!z.isEmpty(V.biConditionedEventsQueue)){var e=z.remove(V.biConditionedEventsQueue,function(e){return z.isFunction(e.condition)&&e.condition()});z.forEach(e,function(e){V.bi.reportBI(e.event,e.biParamArray)})}}},campaigns:{fetchCampaignInfo:function(){var e=Y.serviceTopology.dealerUrl+"/salesSystemResolver";W.requestsUtil.fetchJson(e).then(function(e){e&&(V.campaignInfo={id:e.payload.campaignId,type:e.payload.type})}).catch(function(e){W.log.error(e)})},getActiveCampaignInfo:function(){return V.campaignInfo},isActiveCampaign:function(e){return!!V.campaigns.getActiveCampaignInfo()&&z.includes(V.campaigns.getActiveCampaignInfo().id,e.id)},getDiscountValue:function(e){var t=V.campaigns.getActiveCampaignInfo().id.split("_");return 1===t.length?e.defaultDiscount:z.last(t)},personalSale:{fetchInfo:function(){var e=Y.serviceTopology.dealerUrl+"/saleInfo";return V.dsRead.generalInfo.isFirstSave()||(e+="?siteGuid="+V.dsRead.generalInfo.getMetaSiteId()),W.requestsUtil.fetchJson(e).then(function(e){e&&(V.personalSaleInfo={hasSale:e.payload.hasSale,discountPercentage:e.payload.discountPercentage},V.personalSaleInfo.hasSale&&!z.includes([30,40,50],V.personalSaleInfo.discountPercentage)&&(V.personalSaleInfo.hasSale=!1))}).catch(function(e){W.log.error(e)})},getSaleInfo:function(){return V.personalSaleInfo},isActiveCampaign:function(){return z.get(V.campaigns.personalSale.getSaleInfo(),"hasSale",!1)},getDiscountValue:function(){return z.get(V.campaigns.personalSale.getSaleInfo(),"discountPercentage")},getAssetPath:function(){return Xe.CAMPAIGNS.PERSONAL_SALE.assetPath}}},newEditorWelcomeScreenWrapper:Pe,showFloatingBubble:function(e,t,o,i){V.floatingBubble.showImmediate(e,t,o,i)},hideFloatingBubble:function(){V.floatingBubble.hide(),window.clearTimeout(_t)},blockingPopupLayer:{show:function(){var e=Xe.EDITOR_API.BLOCKING_LAYER_STYLE;V.dsActions.renderPlugins.setCompsToShowOnTop(z.map(V.selection.getSelectedComponents(),"id")),V.dsActions.renderPlugins.setBlockingPopupLayer(e)},hide:function(){V.dsActions.renderPlugins.setCompsToShowOnTop(null),V.dsActions.renderPlugins.setBlockingPopupLayer(null)}},getSiteScale:function(){return yt(b.getState())},endMouseMoveActionIfNeeded:function(e){V.mouseActions.getRegisteredMouseMoveAction()&&V.mouseActions.onMouseUp(e)},isVerticalScrollbarHidden:function(){var e=window.document.body.clientHeight>window.innerHeight;return!e||e&&window.document.body.clientWidth===window.innerWidth},onCollectionAdded:function(){V.toggleEditorStateParam("hasDatabaseCollections",!0)},toggleEditorStateParam:function(e,t){var o={};o[e]=void 0===t?!b.getState()[e]:t,V.updateState(o)},toolsControl:{toggleHalfOpacityTools:function(e){V.toggleEditorStateParam("halfOpacityTools",e)},toggleHideToolsBtnBlink:function(e){V.toggleEditorStateParam("shouldHideToolsBtnBlink",e)},toggleHideTools:function(e,t){var o=b.getState();t=t||o.hideToolsAndMaintainStagePosition;var i=void 0===e?!o.hideTools:e,n=c();V.hideFloatingBubble();var a=ht(o),r=t?a:z.defaults({top:p(i)},a);return V.updateState({hideToolsAndMaintainStagePosition:i?t:i,hideTools:i,halfOpacityTools:!1,shouldHideToolsBtnBlink:!1}),b.dispatch(bt(r)),i&&(q.tooltipManager.hideAll(),z(n).reject({frameType:Xe.PANEL_TYPES.COMP}).reject({name:"panels.toolPanels.linkPanel"}).forEach(function(e){V.panelManager.closePanelByName(e.name)})),i},areToolsHiddenAndStagePositionMaintained:function(){return b.getState().hideToolsAndMaintainStagePosition},areToolsHidden:function(){return b.getState().hideTools},isHalfOpacityTools:function(){return b.getState().halfOpacityTools}},blog:{add:function(e,t){je.installApp(V,e||"MediaLeftPage",t)}},cursor:{get:function(){return It},set:function(e){It=e},updateMousePosition:function(e,t){var o={x:e,y:t};V.cursor.set(o)}},overlay:{disableUpdate:function(){V.updateState({shouldOverlayUpdate:!1})},enableUpdate:function(){V.updateState({shouldOverlayUpdate:!0})},shouldUpdate:function(){return b.getState().shouldOverlayUpdate}},topBarMenuBar:{openDropDown:N,closeDropDown:function(e){if(!b.getState().topBar.shouldDropPanelRemainOpen){var t=b.getState().topBar.openedDropPanel;e&&e!==t||N(null)}},getOpenedDropDown:function(){return b.getState().topBar.openedDropPanel}},topBarPagesFilter:{set:function(e){U({topBarPagesFilter:e})},get:function(){return b.getState().topBarPagesFilter}},scroll:{get:function(){return t},registerNewScrollPosition:function(e){t=e,V.site.setScroll(e.scrollLeft,e.scrollTop)},scrollTo:a,animateScrollTo:function(e,t,o){V.updateState({animateScrollTo:{position:e,duration:t,onComplete:o}})},clearScrollTo:function(){V.updateState({scrollTo:null,animateScrollTo:null})},resetScrollListeners:function(){V.scrollListeners=[]},handleStageScroll:function(e){z.invokeMap(V.scrollListeners,z.call,null,e),b.dispatch(it())},addScrollListener:function(e){V.scrollListeners.push(e)},removeScrollListener:function(e){V.scrollListeners=z.without(V.scrollListeners,e)}},setFocus:function(){var e=b.getState().eventCounters,t=z.assign(e,{focus:e.focus+1});b.dispatch(Qe.editorPlugins.services.actions.setState({eventCounters:t}))},enableNativeComponentsForPreview:function(e){V.dsActions.documentMode.enableNativeComponentsForPreview(e)}};return V.clipboard=Ue.create(V),V.pluginService=He.create(),V.editorEventRegistry=Ye.create(),V.history=le.create(V),V.pinMode=we.create(V),V.imageCrop=ce.create(V),V.ui=_e.create(V),V.promotions=De.create(V),V.preview=ke.create(V),V.pages=Ae.create(V),V.wixCode=Ie.create(V),V.wixStores=Te.create(),V.selection=Se.create(V),V.layouters=Oe.create(V),V.savePublish=ge.create(V),V.tabIndicationState=fe.create(V),V.site=pe.create(V),V.mainMenu=ye.create(V),V.menus=be.create(V),V.components=me.create(V),V.copyPaste=Ce.create(V),V.concurrentUsers=re.create(V),V.columns=Me.create(V),V.account=xe.create(V),V.platform=Re.create(V),V.databaseEditor=Ee.create(V),V.selectedComponent=ue.create(V),V.developerMode=de.create(V),V.feedback=he.create(V),V.theme=se.create(V),V.mobile=Ne.create(V),V.panelHelpers=$.create(V),V.mouseActions=Le.create(V),V.tpa=Be.create(V),V.media=Fe.create(V),V.floatingBubble=et.create(V),V.documentServices=null,V.editorConfig={topBarHeight:Xe.UI.TOPBAR_HEIGHT,previewHeight:null,previewWidth:null,languages:["latin"],extraSiteHeight:40},V.pendingStateChanges={},V.pendingEditorStateUpdateCallbacks=[],V.removePlugins={},V.removePagePlugins={},V.componentsRemoveHandlerPlugins=[],V.hidePlugins={},V.duplicatePlugins={},V.compNamePlugins={},V.compIconPlugins={},V.cannotRemovePlugins={},V.copyComponentPlugins={},V.pasteComponentPlugins={},V.cutComponentPlugins={},V.addComponentPlugins={},V.serializeComponentPlugins={},V.pageNavigationCallbacks=[V.mobile.updateLeftBarNotificationsCount],V.afterPasteComponentCallbacks=[],V.viewerUpdateCallbacks=[I],V.userPreferencesInitCallbacks=[function(){var e,t=Xe.USER_PREFS.DEVELOPER_MODE.EXPOSED_TO_WIX_CODE,o=Qe.editorPlugins.userProfile.selectors.getUserProfile(V.store.getState()),i=z.get(o,["wix_code_exposure_flag","value"]),n=(e=t,Qe.editorPlugins.userPreferences.selectors.getGlobalUserPreferences(e)(b.getState()));!Ke.isOpen("excludeFromWixCodeMarketingFlow")&&!n&&i&&V.generalInfo.isFirstSave()&&V.developerMode.enableWithMarketingConfig()},V.mobile.initMobileEditorFlag,V.initViewToolsFromUserPrefs,V.initUserAddedColors,function(){var e=s(Xe.USER_PREFS.VIEW_TOOLS.SHOW_HIDDEN_COMPS);V.dsActions.documentMode.showHiddenComponents(e),V.dsActions.documentMode.showControllers(V.getViewTools().developerModeEnabled)}],V.sitePublishedCallbacks=[],V.deviceTypeChangeCallbacks=[],V.biConditionedEventsQueue=[],V.registeredHideBubbleOnPreview=!1,V.isSavedInCurrentSession=!1,V.pasteLogic=We,V.mediaServices=Q.create(V),V.panelManager=j.PanelManager.create(b),V.saveManager=oe.createSaveManager(V,W.log),V.publishManager=oe.createPublishManager(V),V.autosaveManager=oe.createAutosaveManager(V),V.scroll.resetScrollListeners(),V}}}),define("rEditor/utils/previewUrl",["lodash","util","rEditor/utils/openPanelByURL","coreBi","experiment"],function(y,b,v,p,S){"use strict";var E=/\/([a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12})/,P=["metaSiteId","ReactSource","BoltSource","SantaVersions","baseVersion","isqa","editorSessionId","layoutMechanism","experiments","experimentsoff","viewerexp","suppressbi","WixCodeRuntimeSource","sampleratio","hot","dsQTrace","autosaveRestore","disableSave","debugApp","closeSectionGaps","editorSdkSource","editorPlatformAppSources","viewerPlatformAppSources","PlatformContainerSource","PlatformContainerHttp","esi","configName","wixCodeForceKibanaReport"];function d(e,t,o){var i=e.editorServerRoot||"http://editor.wix.com/html/editor/web",n=i+"/renderer/render/",a=n+"document/",r=n+"template/",s=i+"/renderer/new?",l=0===t.href.indexOf(s)?r:a,c=b.url.parseUrl(t.href).query;c.debug="editor"===c.debug?"":c.debug,c.editorSessionId=o.editorSessionId,c.esi=o.editorSessionId;var p,d,u=y(c).keys().find(function(e){return"showmobileview"===e.toLowerCase()}),g=y.pickBy(c,function(e,t){return y.endsWith(t,"-override")}),m=P,f=new b.UrlBuilder(l+(c.siteId||(p=t.href,d=p.match(E),d&&d.length&&d[1]))).param("isEdited","true").param("isSantaEditor","true").param("dsOrigin",b.dsOrigin.getDsOrigin()).param("controllersUrlOverride",c.controllersUrlOverride).ifParam(c.debugViewer,"debug",c.debugViewer).ifParam(c.petri_ovr,"petri_ovr",c.petri_ovr).ifParam(S.isOpen("wixstaff"),"iswixsite","true").ifParam(u||v.shouldLoadMobileEditor(c),"showMobileView","true").ifParam(S.isOpen("se_wixCodeLocalMode")&&c.localServerPort,"localServerPort",c.localServerPort).ifParam(S.isOpen("se_wixCodeLocalMode")&&c.shouldSkipLocalModeEncoding,"shouldSkipLocalModeEncoding",c.shouldSkipLocalModeEncoding).param("lang",o.languageCode).paramsObj(y.pick(c,m)).paramsObj(g);if(b.appStudioUtils.isAppStudio()){var h=b.appStudioUtils.getAppDefIdIfExists();f.ifParam(h,"firstSaveExtraPayload",JSON.stringify({devSiteAppDefId:h})),f.param("configName","appStudio").param("applicationStudio","open")}return S.isOpen("se_multilingual")&&f.param("languages",c.languages),S.isOpen("se_excludeLocalModeBolt")&&c.localServerPort&&(c.petri_ovr?c.petri_ovr.contains("UseBoltInPreview")?f.param("petri_ovr",c.petri_ovr.replace("specs.UseBoltInPreview:true","specs.UseBoltInPreview:false")):f.param("petri_ovr",c.petri_ovr.concat(";specs.UseBoltInPreview:false")):f.param("petri_ovr","specs.UseBoltInPreview:false")),f.url()}return{getPreviewUrl:function(e,t,o,i,n){var a,r,s,l=d(i,e,o);if(t){var c={prefetched_preview_url:t,client_preview_url:l,does_match:(a=t,r=l,s=["hash","host","hostname","path","port","protocol","query"],y.isEqual(y.pick(b.url.parseUrl(a),s),y.pick(b.url.parseUrl(r),s)))};return n(p.events.editor.PREVIEW_PREFETCH_COMPARISON,c),t}return l}}}),define("rEditor/rootComps/editorMain",["reactDOM","lodash","util","react","react-dom/test-utils","reduxLibs","rEditor/rootComps/editor","rEditor/app/EditorAPI","rEditor/utils/previewUrl","baseUI","constants","stateManagement","experiment"],function(u,g,m,f,h,e,c,y,p,b,v,S,E){"use strict";var d=e.reactRedux,P=S.editorPlugins.preview.selectors.getPreviewMode;return{render:function(e){var t=e.editorAPI,o=e.store,i=g.get(window.document.getElementById("preview-prefetch"),"href"),n={previewUrl:p.getPreviewUrl(window.document.location,i,m.editorModel,m.serviceTopology,function(e,t){window.bi.event(e.evid,t)}),editorAPI:t},a=window.document.getElementById("root"),r=d.connect(function(e){var t=e.state;return{editorIsInit:t.editorIsInit,previewMode:P(t)}},g.noop,null,{pure:!1})(c),s=f.createElement(r,n),l=f.createElement(d.Provider,{store:o},s);window.rendered=u.render(l,a)},build:function(e){var t=m.editorModel.firstSave?m.translate(v.TAB_TITLE_KEYS.EDITOR):m.browserUtil.getEditorTitleBySiteName(m.editorModel.metaSiteData.siteName);m.browserUtil.setTabTitle(m.appStudioUtils.isAppStudio()?m.translate(v.TAB_TITLE_KEYS.APP_BUILDER):t),m.imageTransform.init(),m.polyfills.register(),E.isOpen("qualaroo")&&m.qualaroo.start(),m.fullStory.start(),m.fedopsLogger.create();var o=!!m.url.getParameterByName("debug")||"true"===m.url.getParameterByName("isqa"),i={panelsWorkerService:{},tooltipManager:b.tooltipManager,wixmpFonts:{uploadQueue:[]}},n=S.createEditorStore(o,i),a=S.throttledStore(m.animationFrameUtils.request,m.animationFrameUtils.cancel,n),r=y.create(a,!0);n.dispatch(S.editorPlugins.services.actions.loadService("editorAPI",r));var s,l,c,p,d=g.defaults({getState:function(){return{state:a.getState(),dsRead:i.dsRead||{},editorAPI:r}}},a);return window.addEventListener("focus",function(e){a.dispatch(S.window.actions.onFocus(e))}),l=a,c=r,(s=e).qaAutomation&&(s.qaAutomation=s.qaAutomation(f,u,h,"reactDOMServer is not defined",!0).qaAutomation),s.debugTools&&(window.testApi=g.assign({},window.testApi,{domSelectors:s.qaAutomation.getDomSelectors(s.react,s.reactDOM,s.reactTestUtils),helpers:s.debugTools.helpers,clientSelectors:s.debugTools.clientSelectors,publishState:{isPublishedInSession:!1},stateManagement:S},s.debugTools.createAutomationApi(l),{editorAPI:c})),s.qaAutomation&&s.qaAutomation.init(window),s.tpaIntegrationEditor&&s.tpaIntegrationEditor.init(window,s.tpa,s.util,s.savePublish,s.panels),s.uiLibIntegrationEditor&&s.uiLibIntegrationEditor.init(window,s.tpa,s.util,s.savePublish,s.panels),s.platformIntegrationEditor&&s.platformIntegrationEditor.init(window,s.platform,s.tpa),p=r,m.url.getParameterByName("debug")&&(window.editorAPI=p),{editorAPI:r,store:d,stateManagement:S}}}}),define("rEditor/rootComps/panels/popup/overlaySettingsPanel/overlaySettingsPanel.rt",["react","lodash","baseUILib","baseUI","util","core","compPanelInfra"],function(n,a,r,e,t,o,s){"use strict";return function(){return function(){var e,t,o,i=this.getPopupProps()||{};return n.createElement(s.compPanelFrame,(e={title:"Popups_OverlaySettings_Panel_Header",className:"popup-overlay-settings-panel",contentClass:"settings-panel",helpId:this.getHelpId()},t=this.getFrameProps(),o=a.assign({},e,t),e.hasOwnProperty("style")&&(o.style=a.defaults(o.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(o.className=t.className+" "+e.className),o),n.createElement(r.Divider,{long:!1}),n.createElement(r.Composites.ToggleSwitch,{key:"clickClosesOverlay2"},n.createElement(r.ToggleSwitch,{value:this.linkPopupPropsValue(i,"closeOnOverlayClick").value,label:"Popups_OverlaySettings_ClickCloses_Toggle",onChange:this.linkPopupPropsValue(i,"closeOnOverlayClick").requestChange})))}.apply(this,[])}}),define("rEditor/rootComps/panels/popup/overlaySettingsPanel/overlaySettingsPanel",["create-react-class","lodash","compPanelInfra","helpIds","coreBi","rEditor/rootComps/panels/popup/overlaySettingsPanel/overlaySettingsPanel.rt"],function(e,n,t,o,i,a){"use strict";return e({displayName:"overlaySettingsPanel",mixins:[t.compPanelMixin],render:a,componentDidMount:function(){this.getEditorAPI().bi.event(i.events.popups.setup_overlay_clicked,{})},getHelpId:function(){return o.UTILS.getSettingsHelpId(o.COMP_TYPES.POPUP_OVERLAY,this.getEditorAPI().isMobileEditor())},getPage:function(){return this.getEditorAPI().pages.popupPages.getCurrentPopup()},getPopupProps:function(){return n.get(this.getEditorAPI().pages.properties.get(this.getPage()),"popup",{})},openHelpPanelFrame:function(){this.openHelpCenter(this.getHelpId(),!0)},linkPopupPropsValue:function(e,i){return{value:e&&e[i],requestChange:function(e){var t=this.getEditorAPI(),o=t.pages.properties.get(this.getPage());n.set(o,["popup",i],e),t.pages.properties.update(this.getPage(),o),t.history.add("toggle close popup by click on overlay")}.bind(this)}}})}),define("rEditor/rootComps/panels/thumbNailItemRow.rt",["react","lodash","baseUI"],function(e,t,o){"use strict";return function(){return e.createElement("li",{onClick:this.props.onClick,className:"panel-button"},e.createElement("div",{className:"panel-button-inner"},e.createElement("div",{className:"label"},e.createElement(o.symbol,{name:this.props.itemName}),e.createElement("span",{className:"button-label"},this.props.itemLabel)),e.createElement("div",{className:"action"},e.createElement(o.symbol,{name:"arrowWithStates"}))))}}),define("rEditor/rootComps/panels/thumbNailItemRow",["create-react-class","prop-types","lodash","rEditor/rootComps/panels/thumbNailItemRow.rt"],function(e,t,o,i){"use strict";return e({propTypes:{onClick:t.func,itemName:t.string,itemLabel:t.string},displayName:"myUploadItem",render:i})}),define("rEditor/rootComps/panels/myMediaPanel.rt",["react","lodash","baseUI","baseUILib","util","core","panels","rEditor/rootComps/panels/thumbNailItemRow"],function(o,e,t,i,n,a,r,s){"use strict";return function(){return o.createElement(r.frames.leftPanelFrame,{className:"panel-background",panelName:this.props.panelName,panelClass:"my-uploads-panel",panelIndex:this.props.panelIndex,label:n.translate("MY_UPLOADS_PANEL_HEADER_TITLE"),helpId:"e1df1248-6bd6-4497-ad2a-2a42cd357eae"},o.createElement("div",{className:"listWrapper"},o.createElement(i.CustomScroll,{addScrolledClass:!0,heightRelativeToParent:"100%"},o.createElement.apply(this,["ul",{},e.map(this.getUploadItems(),function(e,t){return o.createElement(s,{key:e.itemName,onClick:e.onClick,itemName:e.itemName,itemLabel:n.translate(e.itemLabel)})}.bind(this))]))))}}),define("rEditor/rootComps/panels/myMediaPanelAddCompData",[],function(){"use strict";var o={pdf:"40d80b8089c8418a961cb75d96d491f7.png",doc:"b8964aa7650d463fac3b77e0d00e8f12.png",docx:"b8964aa7650d463fac3b77e0d00e8f12.png",ppt:"a41192b40f324972a1d919a8350965f8.png",ppx:"a41192b40f324972a1d919a8350965f8.png",xls:"757aeccaa7f4409b93913c55e36a194d.png",xlsx:"757aeccaa7f4409b93913c55e36a194d.png",odp:"ac1fbe0592434c58889947de5714b3c7.png",odt:"ac1fbe0592434c58889947de5714b3c7.png",other:"046956f7d55f4143a30b3b54669ee243.png"};return{picture:function(e){var t=e.width,o=e.height,i=Math.min(600/t,600/o);return(600<t||600<o)&&(t=Math.floor(t*i),o=Math.floor(o*i)),{componentType:"wysiwyg.viewer.components.WPhoto",layout:{width:t,height:o},data:{width:e.width,height:e.height,alt:"",uri:e.uri,title:e.title,type:"Image",description:""}}},document:function(e){var t=e.uri.split(".").pop();return{componentType:"wysiwyg.viewer.components.documentmedia.DocumentMedia",layout:{width:90,height:140},data:{title:e.title,uri:o[t]||o.other,description:"",width:105,height:141,type:"Image",link:{docId:e.uri,name:e.title,type:"DocumentLink"}},style:"dm1",props:{type:"DocumentMediaProperties",showTitle:!1}}},music:function(e){return{componentType:"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer",layout:{width:304,height:60},data:{originalFileName:e.title,uri:e.uri,type:"SingleAudioPlayer"},props:{autoplay:!1,loop:!1,showArtist:!0,showTrack:!0,volume:50,type:"SingleAudioPlayerProperties"},style:"SingleAudioPlayer_1"}},shape:function(e){return{layout:{width:200,height:200},props:{type:"VectorImageProperties",displayMode:"fit"},skin:"skins.viewer.VectorImageSkin",componentType:"wysiwyg.viewer.components.VectorImage",data:{type:"VectorImage",svgId:e.uri},design:{type:"VectorImageDesignData",shapeStyle:{opacity:1},overrideColors:null},style:{type:"TopLevelStyle",style:{groups:{},properties:{},propertiesSource:{}},componentClassName:"wysiwyg.viewer.components.VectorImage",styleType:"custom",skin:"skins.viewer.VectorImageSkin"}}}}}),define("rEditor/rootComps/panels/myMediaPanel",["create-react-class","lodash","constants","core","util","rEditor/rootComps/panels/myMediaPanel.rt","rEditor/rootComps/panels/myMediaPanelAddCompData","coreUtilsLib","stateManagement","coreBi","experiment"],function(e,g,t,o,n,i,a,m,r,f,s){"use strict";var h=r.editorPlugins.bi.actions.event,y=n.backgroundUtils,b=f.events.singleVideoPlayer,v=r.editorPlugins.userPreferences.actions.setSessionUserPreferences,S=t.VECTOR_IMAGE_DEFAULTS.VECTOR_SHAPE_COLOR_DEFAULT,l={IMAGE:"my_uploads_images",VECTOR_ART:"my_uploads_vector_art",VIDEO_BOX:"my_uploads_videos",DOCUMENT:"my_uploads_documents"};return e({displayName:"MyMediaPanel",mixins:[o.mixins.editorAPIMixin,n.blockOuterScrollMixin],titleMap:{IMAGE:"MY_UPLOADS_MMGR_IMAGE_MANAGE_TITLE",VECTOR_ART:"MY_UPLOADS_MMGR_VECTOR_ART_MANAGE_TITLE",VIDEO:"MY_UPLOADS_MMGR_VIDEO_MANAGE_TITLE",MUSIC:"MY_UPLOADS_MMGR_MUSIC_MANAGE_TITLE",DOCUMENT:"MY_UPLOADS_MMGR_DOCUMENT_MANAGE_TITLE"},mediaManagerOpen:function(e){var t=this.getEditorAPI(),o=l[e];t.bi.event(f.events.myMediaPanel.my_uploads_panel_section_click,{section:e});var i=r.editorPlugins.userPreferences.selectors.getSessionUserPreferences("last_media_path_"+e)(t.store.getState());t.mediaServices.mediaManager.open(e,o,{multiSelect:!0,callback:this.onItemsSelected.bind(this,e),translation:{title:n.translate(this.titleMap[e])},path:i})},fontsManagerOpen:function(){this.getEditorAPI().panelManager.openPanel("panels.toolPanels.fontsUploadPanel",{},!0)},onItemsSelected:function(i,e,n){if(e){var t=this.getEditorAPI();t.pasteLogic.addContext.resetPastePosition(),t.store.dispatch(v("last_media_path_"+i,n.path||"")),g.forEach(e,g.bind(function(e,t,o){this.addComponent(i,n,e,t,o)},this)),t.mediaServices.setFocusToEditor()}},addComponent:function(r,e,s,l,c){var p=this.getEditorAPI(),d=p.store.dispatch,u=function(e,t,o){var i=a[e.mediaType];if(i)return i(e,t,o);m.log.error("Unsupported media type",e.mediaType)}(s,e,p),t=p.dsRead.pages.getFocusedPageId(),o=p.pasteLogic.addContext.getPastePosition(p,u.layout,t);g.merge(u.layout,o);var i=p.dsRead.pages.getReference(t);p.dsActions.waitForChangesApplied(function(){p.components.add(i,u,void 0,function(e){if(l===c.length-1&&(p.selection.selectComponentByCompRef(e),p.history.add("added component")),d(h(f.events.addPanel.COMPONENT_ADDED_TO_STAGE,{origin:"my_uploads",category:g.get(p,["mediaServices.mediaManager",r,"mmgrParams.mediaType"]),component_type:u.componentType,component_id:e.id,adding_method:"click"})),"video"===r.toLowerCase()&&d(h(b.video_player_video_changed,y.getChangeVideoBiEventFields(s,"my_uploads"))),g.includes(["VECTOR_ART","VECTOR_ART_UGC"],r)){var t=p.media.vectorImage.getSvgInfoFromCache(s.uri),o=g.get(t,"svgType");if(g.includes(["shape","tint"],o)){var i=S.color1,n=p.components.design.get(e),a=g.assign({},n,{overrideColors:{color1:i}});p.components.design.update(e,a,!0,!0)}}})}),p.store.dispatch(v("last_media_path_"+s.uri,e.path||""))},isWixMusic:function(){return this.getEditorAPI().dsRead.tpa.app.isInstalled("13bb5d67-1add-e770-a71f-001277e17c57")},getUploadItems:function(){var e=this,t=this.getEditorAPI().mediaServices.mediaManager.categories,o=[{itemName:"my_uploads_images",itemLabel:"MY_UPLOADS_MY_IMAGES_LINK_LABEL",onClick:function(){return e.mediaManagerOpen(t.IMAGE)},shouldDisplay:!0},{itemName:"my_uploads_vector_images",itemLabel:"MY_UPLOADS_MY_VECTOR_ART_LINK_LABEL",onClick:function(){return e.mediaManagerOpen(t.VECTOR_ART)},shouldDisplay:!0},{itemName:"my_uploads_video",itemLabel:"MY_UPLOADS_MY_VIDEOS_LINK_LABEL",onClick:function(){return e.mediaManagerOpen(t.VIDEO_BOX)},shouldDisplay:!0},{itemName:"my_uploads_fonts",itemLabel:"MY_UPLOADS_MY_FONTS_LINK_LABEL",onClick:function(){return e.fontsManagerOpen()},shouldDisplay:!s.isOpen("removeFontsFromMyUploads")},{itemName:"my_uploads_docs",itemLabel:"MY_UPLOADS_MY_DOCUMENT_LINK_LABEL",onClick:function(){return e.mediaManagerOpen(t.DOCUMENT)},shouldDisplay:!0},{itemName:"my_uploads_single_tracks",itemLabel:"MY_UPLOADS_MY_MUSIC_LINK_LABEL",onClick:function(){return e.mediaManagerOpen(t.MUSIC)},shouldDisplay:!0}];return g.filter(o,"shouldDisplay")},render:i})}),define("rEditor/rootComps/panels/backgroundPanel/backgroundDesktopPresets.json",[],function(){return[{presetIndex:1,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Electric Darkness",videoId:"video/11062b_6a134fc09ea34833a17d295e295ab517",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_6a134fc09ea34833a17d295e295ab517f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:6,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_24}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_880a3209e3744cd0a96b66835a01b8c5.png",width:256,height:256},colorOverlay:"#0AFCFC",colorOverlayOpacity:.2}},{presetIndex:2,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Floating Particles",videoId:"video/11062b_03c50f8fe4a34cc297a984e483a282ef",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_03c50f8fe4a34cc297a984e483a282eff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:18,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"#000000",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#02B0AD",colorOverlayOpacity:.3,imageOverlay:""}},{presetIndex:3,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Bananas",uri:"8034aa3291a54c489a7b7a3121d994f9.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:1177,height:1200,artist:{id:"",name:""}},color:"#8BD0CD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:4,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Rain Clouds",videoId:"video/11062b_8e792646ca71495b96677c20e27e9122",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_8e792646ca71495b96677c20e27e9122f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:14,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47427758",name:"bisgtock"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#000000",colorOverlayOpacity:.4,imageOverlay:""}},{presetIndex:5,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Deep Sea Waves",videoId:"video/11062b_f1fbf8b243e942a692e564fac5382513",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_f1fbf8b243e942a692e564fac5382513f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:10,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47427890",name:"bisgtock"}},color:"#052F5B",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_4371c7e64a49489bb88c536f515f2040.png",width:6,height:6},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:6,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Divers Underwater",uri:"bbde6e2b4387431ca37f8e093bcb0e8e.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4368,height:2912,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:7,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Dot Pattern",uri:"70127753074e4bf694b4b889710f0b7a.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:202,artist:{id:"",name:""}},color:"#002E5D",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:8,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Aurelia Jellyfish",uri:"884454ad07cf46a5bb7fb6aef2e02358.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:2700,height:2160,artist:{id:"",name:""}},color:"#002E5D",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:9,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Swaying Palms",videoId:"video/11062b_d013b164dadb47ec8e746ab178aacfbb",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_d013b164dadb47ec8e746ab178aacfbbf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:29,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v51654467",name:"bigstock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_880a3209e3744cd0a96b66835a01b8c5.png",width:256,height:256},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:10,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Girl in the Window",uri:"acb4853a0d8543b3ac291da735e9959b.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:6048,height:4032,artist:{id:"",name:""}},color:"#002E5D",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:11,path:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"In the Office",videoId:"video/11062b_6743da5900054f1f8e69f53302930a6a",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_6743da5900054f1f8e69f53302930a6af000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_17}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"color_11",colorOverlayOpacity:.25,imageOverlay:""}},{presetIndex:12,path:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Winter Sports",videoId:"video/11062b_14ca44a138d942f78374f7751ac5942f",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_14ca44a138d942f78374f7751ac5942ff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",width:1920,height:1080},opacity:1,duration:31,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"vD19_13_002&vD187_89_019&vD116_16_121&vD116_16_117&vD116_16_051&v17A041_676",name:"Dissolve&Dissolve&Dissolve&Dissolve&Dissolve&Dissolve"}},color:"#2BFCF9",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:13,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Boats in the Water",uri:"edafc906071647ad940aad43e3fdbe07.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:3500,height:2318,artist:{id:"",name:""}},color:"#CCE2E2",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:14,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Water Drop",videoId:"video/11062b_830709c744404d6ea7a10dcfd88e3a48",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_830709c744404d6ea7a10dcfd88e3a48f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:15,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v81193529",name:"bigstock"}},color:"#439CE6",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:15,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Submerged",videoId:"video/11062b_64ae2a899006496dac01c2e81fac97f1",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_64ae2a899006496dac01c2e81fac97f1f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:24,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47427800",name:"bisgtock"}},color:"{color_17}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#439CE6",colorOverlayOpacity:.3,imageOverlay:""}},{presetIndex:16,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Blue Checkers",uri:"a60710612bbc4609ac93e78a1fa234c0.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:400,height:400,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:17,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Road Trip",videoId:"video/11062b_1c6001b9888a4ba89939a510eee406d1",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_1c6001b9888a4ba89939a510eee406d1f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:21,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"vD330_2_176",name:"dissolve"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#8AEDFF",colorOverlayOpacity:.2,imageOverlay:""}},{presetIndex:18,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Mountain Landscape",uri:"0bb83114d47e4ca0a9fa5a9ea6a16530.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4442,height:2961,artist:{id:"",name:""}},color:"#EEFDFF",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:19,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Sparkling Water",videoId:"video/11062b_7bb9944945af4723ad2aefa5caed46a4",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_7bb9944945af4723ad2aefa5caed46a4f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:18,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47421608",name:"bisgtock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:20,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Rolling Tide",videoId:"video/11062b_f0d5e0c342cc49dca298de0225d2247c",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_f0d5e0c342cc49dca298de0225d2247cf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:17,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47428379",name:"bisgtock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:21,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Abstract Horizon",uri:"5afe60462baf41e79586f3fdaf78d664.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:1980,height:1200,artist:{id:"",name:""}},color:"#006C6D",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:22,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Misty Slopes",uri:"99ec98fdb81945c29c25a3ad6c5606b1.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:1920,height:1280,artist:{id:"",name:""}},color:"#114C22",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:23,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Blurred Beach",uri:"a97014d3cac6454b822f786b7d1f2878.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:2351,height:1302,artist:{id:"",name:""}},color:"#8BD0CD",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:24,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Blue to Cream Gradient",uri:"356d0cee84164a4cb8304d44630a7ea6.png",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:8e3,height:4500,artist:{id:"",name:""}},color:"#8BD0CD",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:25,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Vintage Gramophone",videoId:"video/11062b_bd026287ff784f5198fbfdbbbbba2489",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_bd026287ff784f5198fbfdbbbbba2489f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},opacity:1,duration:7,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v50768873",name:"bigstock"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_d3e25a05cedd404f807528f6a4750388.png",width:56,height:56},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:26,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropical Plant",uri:"117d700ff79f490587e0bbaad89bc84f.jpeg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:2507,height:1674,artist:{id:"",name:""}},color:"#1C8A43",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:27,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graph Paper",uri:"1beffca589a04014a3e62f00a022b875.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:192,height:192,artist:{id:"",name:""}},color:"#CAE9BD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:28,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Leaves Pattern",uri:"278019192ae045d191a9430cf507c7f6.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:974,height:966,artist:{id:"",name:""}},color:"#F1FFF6",alignType:"center",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:29,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropic Birds",uri:"b59b6c0afac149c1825e76ad4381c9ca.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:552,height:552,artist:{id:"",name:""}},color:"#002E5D",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:30,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Rainforest Canopy",videoId:"video/11062b_7488edba38234bd69b0603ad498efdf5",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_7488edba38234bd69b0603ad498efdf5f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:35,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v50652950",name:"bigstock"}},color:"#BFBF43",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:31,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Hand-sketched Lines",uri:"3978993e99184d5e8c21f0204cd07bca.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:150,height:150,artist:{id:"",name:""}},color:"#CAE9BD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:32,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Palm Trees",uri:"3cd1de924697419088c1e033bb3384ef.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:1920,height:1280,artist:{id:"",name:""}},color:"#BDBF37",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:33,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Snowfall",videoId:"video/11062b_7124ff06fc56498d96722413f5f4846f",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_7124ff06fc56498d96722413f5f4846ff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i2800",name:"pexels"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:34,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"City Park",videoId:"video/11062b_ed5fd19d3b3c4a979ecfd7aa035320eb",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_ed5fd19d3b3c4a979ecfd7aa035320ebf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_d3e25a05cedd404f807528f6a4750388.png",width:56,height:56}}},{presetIndex:35,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Dogs in the Park",videoId:"video/11062b_dadf974a47664e5cb42f939b7f17bec8",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_dadf974a47664e5cb42f939b7f17bec8f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:26,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:""}},{presetIndex:36,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"House Cat",videoId:"video/11062b_be8b8d6a9d5a4bc59aa76a8b25fd9888",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_be8b8d6a9d5a4bc59aa76a8b25fd9888f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:26,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"#DAB89C",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#D9B79C",colorOverlayOpacity:.2,imageOverlay:""}},{presetIndex:37,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tree Stump",uri:"11a91072527049689406d272d5a6d6c4.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:1280,height:768,artist:{id:"",name:""}},color:"#114C22",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:38,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Asparagus",uri:"4d24dcfa04684a81bf3f1701a847af81.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:2e3,height:1333,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:39,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Tropical Light",videoId:"video/11062b_af392b5325e7416eb2d8b6f9b1b3c634",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_af392b5325e7416eb2d8b6f9b1b3c634f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:20,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i158598041",name:"shutterstock"}},color:"{color_16}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:40,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Gold Bunnies",uri:"6060bf9757224155bc8cbd95029ee720.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:459,height:287,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:41,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Pineapple Pattern",uri:"eeef56698522480caf7deba849718afe.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:534,height:809,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:42,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Yellow to Blue Gradient",uri:"98e04ee03335423bb5a47bd2f377df2e.png",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:8e3,height:4500,artist:{id:"",name:""}},color:"#35EBE7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:43,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Black Spades",uri:"7d0fa0c9f87547b0a75b80f38ed48183.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:300,height:267,artist:{id:"",name:""}},color:"color_31",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:44,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Urban View",videoId:"video/11062b_3e2f37c297534f9ead156265242fbca8",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_3e2f37c297534f9ead156265242fbca8f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:20,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v49780622&v493478872&v49737086&v318347",name:"bigstock&bigstock&bigstock&clipcanvas"}},color:"{color_31}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#F0C930",colorOverlayOpacity:.3,imageOverlay:""}},{presetIndex:45,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Light Spots",videoId:"video/11062b_2042bb7351284f0f982e4787d37415e6",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_2042bb7351284f0f982e4787d37415e6f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:14,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"#FFF369",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#FFF269",colorOverlayOpacity:.2,imageOverlay:""}},{presetIndex:46,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Pink Particles",videoId:"video/11062b_155feccf8d494b18b70adcd7716b6646",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_155feccf8d494b18b70adcd7716b6646f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:50,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_31}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#FFCC00",colorOverlayOpacity:.5,imageOverlay:""}},{presetIndex:47,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Sunflowers",videoId:"video/11062b_7fb923cf2d6748e195e980d74c4059f2",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_7fb923cf2d6748e195e980d74c4059f2f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i145590430",name:"shutterstock"}},color:"color_29",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_880a3209e3744cd0a96b66835a01b8c5.png",width:256,height:256},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:48,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Flower in Sunlight",uri:"175c71a9a7384ca68d97b39947203da8.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:1920,height:1080,artist:{id:"",name:""}},color:"#F17424",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:49,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Golden Dots",uri:"80e0917312df4df5853a6c2a861e7a63.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:466,height:766,artist:{id:"",name:""}},color:"#FAEECD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:50,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Lifeguard Tower",uri:"f7f8700159f142b3b23e349c23338337.jpeg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4608,height:3072,artist:{id:"",name:""}},color:"#F9C7A7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:51,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Meadow",videoId:"video/11062b_84f0c9aa252b4b2ab1114febc012eacb",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_84f0c9aa252b4b2ab1114febc012eacbf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i144673559",name:"shutterstock"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:52,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Lakeside",videoId:"video/11062b_10927dd4d14046e4ac23f51f0a5448b3",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_10927dd4d14046e4ac23f51f0a5448b3f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:20,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i205250962",name:"shutterstock"}},color:"#FFF5A8",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:53,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Zebra Crossing",uri:"fd559363ad5645958cc2ccdc6005fbd6.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:5682,height:3990,artist:{id:"",name:""}},color:"#F1CC01",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:54,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Paradise Serenity",videoId:"video/11062b_46d3e749db4d4169987b00279493eaa7",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_46d3e749db4d4169987b00279493eaa7f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:10,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i152767760",name:"shutterstock"}},color:"{color_31}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:55,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Zigzag",uri:"4d24ad2c7b8f47bbbfe14399bd41dc54.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:64,height:50,artist:{id:"",name:""}},color:"#FAC2D2",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:56,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Miami Beach",videoId:"video/11062b_75ff30e8c38545348bad91473b78ab7c",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_75ff30e8c38545348bad91473b78ab7cf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:20,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i100070693",name:"shutterstock"}},color:"#D41746",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#D41746",colorOverlayOpacity:.3,imageOverlay:""}},{presetIndex:57,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropical Leaves",uri:"0396af7423c344a39107ad593c4500f8.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:3264,height:2448,artist:{id:"",name:""}},color:"#B22087",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:58,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Grey Geometric Shapes",uri:"f833450526164f5e80b7e8ef0f50844c.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:300,height:300,artist:{id:"",name:""}},color:"#F2668F",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:59,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Pink to Orange Gradient",uri:"af7a8b002af842f8bab87691c1d8640f.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:1920,height:1080,artist:{id:"",name:""}},color:"#C37DB3",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:60,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rain Drops",uri:"95f3448913a746f28b30670b23da4157.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:216,height:216,artist:{id:"",name:""}},color:"#C65AA5",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:61,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Cotton Candy",videoId:"video/11062b_808b40c463104f22943c284c625d31c3",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_808b40c463104f22943c284c625d31c3f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:4,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_30}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#E31B22",colorOverlayOpacity:.25,imageOverlay:""}},{presetIndex:62,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Ink and Water",videoId:"video/11062b_74ef3d923f9b451492d3ed9278991873",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_74ef3d923f9b451492d3ed9278991873f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v50768402",name:"bigstock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:63,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Red Confetti",uri:"21ff2961e4d94522b96543b873b063dc.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:121,height:107,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:64,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Woman Running Legs",uri:"0983ceb77a4e49c6978e4515d8a454f6.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1980,height:1200,artist:{id:"",name:""}},color:"#F9C7A7",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:65,path:"public/491df47b-5958-4dc7-9029-37f428755d45/c2a37dfc-36cf-4bfd-b940-55bac7bdc9e6",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Flamingos",uri:"88d74a1559c84402a4a957527a839260.png",description:"public/491df47b-5958-4dc7-9029-37f428755d45/c2a37dfc-36cf-4bfd-b940-55bac7bdc9e6",width:1920,height:1080,artist:{id:"",name:""}},color:"#DAF2FF",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:66,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Foxes and Rabbits",uri:"f7c0cc732a8e458caf88ad42b251fbdf.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:571,height:514,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:67,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Ink Splash",videoId:"video/11062b_aa1eeb25fbd3484dbde611d71d7c5747",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_aa1eeb25fbd3484dbde611d71d7c5747f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47428268",name:"bisgtock"}},color:"#F1F1F1",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_4371c7e64a49489bb88c536f515f2040.png",width:6,height:6},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:68,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Palm Trees Beach View",uri:"2465a22a212e41cd96a05e3e3fe5adc4.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:1980,height:1200,artist:{id:"",name:""}},color:"#DAF2FF",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:69,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Moon Jellyfish",videoId:"video/11062b_77c6bfa45ec6417fa8b1b37fd3f7a108",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_77c6bfa45ec6417fa8b1b37fd3f7a108f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:10,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v50790908",name:"bigstock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:70,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Modern Chicago Skyline",uri:"5b7e139d046c40c1a1acde7162607721.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4085,height:2696,artist:{id:"",name:""}},color:"#FAC2D2",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:71,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Pink Jellyfish",videoId:"video/11062b_ea61c0ecc8b34ecd942c42470507e640",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_ea61c0ecc8b34ecd942c42470507e640f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:20,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47440688",name:"bigstock"}},color:"{color_19}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_2326357be59441978a570bec687a94d0.png",width:3,height:3},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:72,path:"public/8e256233-1752-4026-9341-54036e7f875e/a85e50b3-f78c-4792-a226-040ce52b983c",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Spaceman",videoId:"video/11062b_fcd00d59140f45d5b2295fe8a4c17edb",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_fcd00d59140f45d5b2295fe8a4c17edbf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/a85e50b3-f78c-4792-a226-040ce52b983c",width:1920,height:1080},opacity:1,duration:25,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"i111095258&i241509286",name:"shutterstock&shutterstock"}},color:"{color_20}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_d3e25a05cedd404f807528f6a4750388.png",width:56,height:56},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:73,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Rotating Crystal Glass",videoId:"video/11062b_58249d8a53aa452492e328c962b036e9",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_58249d8a53aa452492e328c962b036e9f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},opacity:1,duration:14,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47440709",name:"bisgtock"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_8b89980121844d37be099f0dbe33e3e3.png",width:6,height:6},colorOverlay:"#5C3B1B",colorOverlayOpacity:.4}},{presetIndex:74,path:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Spinning Record",videoId:"video/11062b_0f1e951461494c1894d86c9ab85a11cf",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_0f1e951461494c1894d86c9ab85a11cff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",width:1920,height:1080},opacity:1,duration:10,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v560888",name:"clipcanvas"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_8fae2cc5b7bf477fb13faa1f2582dbd2.png",width:4,height:6},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:75,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Vegan Trio",uri:"180ba81999a64ad3aa42735d409ecab6.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4253,height:2825,artist:{id:"",name:""}},color:"#DBB89A",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:76,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Hand-drawn Feathers",uri:"8eee3a6c7d5842429beba0f7eaeef38c.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:77,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Rotating Gears",videoId:"video/11062b_d9801124f3cb4deca350acfd66b547cf",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_d9801124f3cb4deca350acfd66b547cff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},opacity:1,duration:7,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v50768483",name:"bigstock"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#F0C930",colorOverlayOpacity:.05,imageOverlay:""}},{presetIndex:78,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graphic Design Workspace",uri:"fa34b31dc6244a4a854ef6eb8f02ff74.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4e3,height:3e3,artist:{id:"",name:""}},color:"#B7121B",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:79,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Triangles",uri:"d59a233b62cf44b2bf1ebed57aac24de.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:343,height:410,artist:{id:"",name:""}},color:"#DBB89A",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:80,path:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Wood",uri:"1149de6bf15f40c587573bf9311dc32c.jpg",description:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",width:4990,height:3326,artist:{id:"",name:""}},color:"#DBB89A",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:81,path:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Classical Compilation",videoId:"video/11062b_35727d5e825d405bbb007bc615000a15",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_35727d5e825d405bbb007bc615000a15f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",width:1920,height:1080},opacity:1,duration:19,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v51653993&v795016&v639989&v249088&v527322",name:"bigstock&clipcanvas&clipcanvas&clipcanvas&clipcanvas"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#ffffff",colorOverlayOpacity:.2,imageOverlay:""}},{presetIndex:82,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Metal Stairs on Wooden Facade",uri:"cf8156766df64118b0653b3ac4bd5605.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1920,height:1440,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:83,path:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Illustrator",videoId:"video/11062b_ebcab620e7584e1693f939e597be3777",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_ebcab620e7584e1693f939e597be3777f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",width:1920,height:1080},opacity:1,duration:30,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_880a3209e3744cd0a96b66835a01b8c5.png",width:256,height:256},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:84,path:"public/921f85b0-261d-4406-964a-cf47e2744c69/bd176e29-5534-4d9f-87a6-a8177517ea4f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graphic Pattern",uri:"5c688cc2a5ec4ad2b86ed53d5df46f47.png",description:"public/921f85b0-261d-4406-964a-cf47e2744c69/bd176e29-5534-4d9f-87a6-a8177517ea4f",width:1920,height:1080,artist:{id:"",name:""}},color:"#3D9BE9",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:85,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Tiger",videoId:"video/11062b_6ceb80744f45401caf9eb666caeb9887",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_6ceb80744f45401caf9eb666caeb9887f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},opacity:1,duration:28,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v49350467",name:"bigstock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:""}},{presetIndex:86,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Subway",videoId:"video/11062b_8b85f288687943b59677b4e3e56ef8f8",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_8b85f288687943b59677b4e3e56ef8f8f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:3,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v342278662",name:"pexels"}},color:"#303030",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#000000",colorOverlayOpacity:.45,imageOverlay:""}},{presetIndex:87,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Stack of Magazines",uri:"d532b29bc0c448b29f47672da7b07613.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1920,height:1280,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:88,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graphic Design Office",uri:"d1c5cd0055c94e3bb1acee9e2fda9f0e.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1920,height:1280,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:89,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Record Player",uri:"ee15442532e84041a495a5e46c465b12.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:5616,height:3744,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:90,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Floating Shapes Gray",videoId:"video/11062b_d2398715eb2e43348e6907b6b3383815",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_d2398715eb2e43348e6907b6b3383815f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:28,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:91,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Forest Clouds",videoId:"video/11062b_2e77c1d1a7d84393becbcecd189fe80e",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_2e77c1d1a7d84393becbcecd189fe80ef000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:25,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47440175",name:"bisgtock"}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:""}},{presetIndex:92,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Metronome",videoId:"video/11062b_80a0d0745a884541ae8fae22c02c9e74",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_80a0d0745a884541ae8fae22c02c9e74f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},opacity:1,duration:17,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v49780622",name:"bigstock"}},color:"#271504",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_8b89980121844d37be099f0dbe33e3e3.png",width:6,height:6},colorOverlay:"#ffffff",colorOverlayOpacity:.25}},{presetIndex:93,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Grey Dots",uri:"92533e06635940e5b152eb4b0f9c1c4b.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:180,height:101,artist:{id:"",name:""}},color:"#232323",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:94,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Backstage",uri:"8a6b22a6b8d84e728c2253794ee37f98.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4500,height:3e3,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:95,path:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Melting Ice",videoId:"video/11062b_9480d9d800bd4bda938057d5ac1ebc42",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_9480d9d800bd4bda938057d5ac1ebc42f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",width:1920,height:1080},opacity:1,duration:18,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47428211",name:"bisgtock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_4371c7e64a49489bb88c536f515f2040.png",width:6,height:6},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:96,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Black Crosses",uri:"56adecff887f459297d81ee5a451ca0e.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#4F4F4F",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:97,path:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Street Sports",videoId:"video/11062b_b3ee9353cba84f2fba11b18497edd49c",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_b3ee9353cba84f2fba11b18497edd49cf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",width:1920,height:1080},opacity:1,duration:27,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"vD26_7_556&vD26_7_549&vD26_7_021&vD200_3_014&vD187_87_017",name:"dissolve&dissolve&dissolve&dissolve&dissolve"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_9dd9479cdafd4871b1944d50caa91db0.png",width:6,height:6},colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:98,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Mist Over the Bridge",videoId:"video/11062b_66b9234563324488b85be02dcf1db183",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_66b9234563324488b85be02dcf1db183f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},opacity:1,duration:21,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v523546",name:"clipcanvas"}},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:99,path:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Marble Surface",uri:"bc3ec7bc825c4e6ca746c659189cea83.jpg",description:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",width:1920,height:1080,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:100,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Suit",uri:"8ca1d4b1209f4712a582d259e1d041c4.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:232,height:200,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:101,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Flowing Viscous Liquid",videoId:"video/11062b_9f421918574743b48202cb0dacbd77d4",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_9f421918574743b48202cb0dacbd77d4f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:17,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v47428877",name:"bisgtock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:102,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Concrete Facade",uri:"d05d3b5e9b8c442f8616127098f1e7b0.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1980,height:1200,artist:{id:"",name:""}},color:"#232323",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:103,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Horizontal Stripes",uri:"251cb06bbba2403296cacacc122c1833.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:105,height:88,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:104,path:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Dance Studio",videoId:"video/11062b_58d9b7991aa04b99a4f1580a1efc4f7f",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_58d9b7991aa04b99a4f1580a1efc4f7ff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",width:1920,height:1080},opacity:1,duration:34,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_4371c7e64a49489bb88c536f515f2040.png",width:6,height:6}}},{presetIndex:105,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Cat Pattern",uri:"e62cc2e57d9e4debae58f332bc5f7c13.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:1001,height:780,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:106,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Popsicles",uri:"16bc88db91d04e34969d6d9ff99d4f27.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:400,height:400,artist:{id:"",name:""}},color:"#232323",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:107,path:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Gray Waterfall",videoId:"video/11062b_18eee1c4914c4ef79687cd68f3cf6990",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_18eee1c4914c4ef79687cd68f3cf6990f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",width:1920,height:1080},opacity:1,duration:3,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"v49347887",name:"bigstock"}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",imageOverlay:{type:"Image",title:"",uri:"0da768_d3e25a05cedd404f807528f6a4750388.png",width:4,height:6},colorOverlay:"color_11",colorOverlayOpacity:.5}},{presetIndex:108,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"NYC Skyline BW",uri:"ea66f0de45ec4109b5eb190bed2244d1.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:1980,height:1200,artist:{id:"",name:""}},color:"#4F4F4F",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:109,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Zebras",uri:"049b8cffb8e449e19cce019a499e72b3.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:650,height:593,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:110,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/bc345090-ef04-4363-9211-3642d0f687f8",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Triangles Pattern",uri:"09ad59ce71ae4243bc54251181afab81.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/bc345090-ef04-4363-9211-3642d0f687f8",width:94,height:89,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:111,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Cloudy Fog",uri:"d8b91ec474404d93a7be5aefff9abd54.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4928,height:3264,artist:{id:"",name:""}},color:"#4F4F4F",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:112,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Grey Arrows",uri:"be48a6ed702649778e0248921b018462.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:113,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Floating Particles",uri:"65361f1a835843df8f46f809b1b05a7a.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#F7F7F7",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0,imageOverlay:""}},{presetIndex:114,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"WixVideo",title:"Falling shapes White",videoId:"video/11062b_2ed9e9ea388343a59c387bccf3539098",qualities:[{quality:"480p",width:854,height:480,formats:["mp4","webm"]},{quality:"720p",width:1280,height:720,formats:["mp4","webm"]},{quality:"1080p",width:1920,height:1080,formats:["mp4","webm"]}],posterImageRef:{type:"Image",title:"",uri:"/11062b_2ed9e9ea388343a59c387bccf3539098f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},opacity:1,duration:28,loop:!0,autoplay:!0,preload:"auto",mute:!0,artist:{id:"",name:""}},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"#D5D4D6",colorOverlayOpacity:.35,imageOverlay:""}}]}),define("rEditor/rootComps/panels/backgroundPanel/backgroundMobilePresets.json",[],function(){return[{presetIndex:1,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Electric Darkness",uri:"/11062b_6a134fc09ea34833a17d295e295ab517f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_24}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:2,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Floating Particles",uri:"/11062b_03c50f8fe4a34cc297a984e483a282eff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"#000000",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:3,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Bananas",uri:"8034aa3291a54c489a7b7a3121d994f9.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:1177,height:1200,artist:{id:"",name:""}},color:"#8BD0CD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:4,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rain Clouds",uri:"/11062b_8e792646ca71495b96677c20e27e9122f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:5,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Deep Sea Waves",uri:"/11062b_f1fbf8b243e942a692e564fac5382513f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"#052F5B",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:6,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Divers Underwater",uri:"bbde6e2b4387431ca37f8e093bcb0e8e.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4368,height:2912,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:7,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Dot Pattern",uri:"70127753074e4bf694b4b889710f0b7a.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:202,artist:{id:"",name:""}},color:"#002E5D",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:8,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Aurelia Jellyfish",uri:"884454ad07cf46a5bb7fb6aef2e02358.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:2700,height:2160,artist:{id:"",name:""}},color:"#002E5D",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:9,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Swaying Palms",uri:"/11062b_d013b164dadb47ec8e746ab178aacfbbf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:10,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Girl in the Window",uri:"acb4853a0d8543b3ac291da735e9959b.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:6048,height:4032,artist:{id:"",name:""}},color:"#002E5D",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:11,path:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"In the Office",uri:"/11062b_6743da5900054f1f8e69f53302930a6af000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",width:1920,height:1080},color:"{color_17}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:12,path:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Winter Sports",uri:"/11062b_14ca44a138d942f78374f7751ac5942ff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",width:1920,height:1080},color:"#2BFCF9",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:13,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Boats in the Water",uri:"edafc906071647ad940aad43e3fdbe07.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:3500,height:2318,artist:{id:"",name:""}},color:"#CCE2E2",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:14,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Water Drop",uri:"/11062b_830709c744404d6ea7a10dcfd88e3a48f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"#439CE6",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:15,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Submerged",uri:"/11062b_64ae2a899006496dac01c2e81fac97f1f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_17}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:16,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Blue Checkers",uri:"a60710612bbc4609ac93e78a1fa234c0.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:400,height:400,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:17,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Road Trip",uri:"/11062b_1c6001b9888a4ba89939a510eee406d1f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:18,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Mountain Landscape",uri:"0bb83114d47e4ca0a9fa5a9ea6a16530.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4442,height:2961,artist:{id:"",name:""}},color:"#EEFDFF",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:19,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Sparkling Water",uri:"/11062b_7bb9944945af4723ad2aefa5caed46a4f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:20,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rolling Tide",uri:"/11062b_f0d5e0c342cc49dca298de0225d2247cf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:21,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Abstract Horizon",uri:"5afe60462baf41e79586f3fdaf78d664.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:1980,height:1200,artist:{id:"",name:""}},color:"#006C6D",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:22,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Misty Slopes",uri:"99ec98fdb81945c29c25a3ad6c5606b1.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:1920,height:1280,artist:{id:"",name:""}},color:"#114C22",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:23,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Blurred Beach",uri:"a97014d3cac6454b822f786b7d1f2878.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:2351,height:1302,artist:{id:"",name:""}},color:"#8BD0CD",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:24,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Blue to Cream Gradient",uri:"356d0cee84164a4cb8304d44630a7ea6.png",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:8e3,height:4500,artist:{id:"",name:""}},color:"#8BD0CD",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:25,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Vintage Gramophone",uri:"/11062b_bd026287ff784f5198fbfdbbbbba2489f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:26,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropical Plant",uri:"117d700ff79f490587e0bbaad89bc84f.jpeg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:2507,height:1674,artist:{id:"",name:""}},color:"#1C8A43",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:27,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graph Paper",uri:"1beffca589a04014a3e62f00a022b875.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:192,height:192,artist:{id:"",name:""}},color:"#CAE9BD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:28,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Leaves Pattern",uri:"278019192ae045d191a9430cf507c7f6.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:974,height:966,artist:{id:"",name:""}},color:"#F1FFF6",alignType:"center",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:29,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropic Birds",uri:"b59b6c0afac149c1825e76ad4381c9ca.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:552,height:552,artist:{id:"",name:""}},color:"#002E5D",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:30,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rainforest Canopy",uri:"/11062b_7488edba38234bd69b0603ad498efdf5f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"#BFBF43",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:31,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Hand-sketched Lines",uri:"3978993e99184d5e8c21f0204cd07bca.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:150,height:150,artist:{id:"",name:""}},color:"#CAE9BD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:32,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Palm Trees",uri:"3cd1de924697419088c1e033bb3384ef.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:1920,height:1280,artist:{id:"",name:""}},color:"#BDBF37",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:33,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Snowfall",uri:"/11062b_7124ff06fc56498d96722413f5f4846ff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:34,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"City Park",uri:"/11062b_ed5fd19d3b3c4a979ecfd7aa035320ebf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:35,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Dogs in the Park",uri:"/11062b_dadf974a47664e5cb42f939b7f17bec8f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:36,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"House Cat",uri:"/11062b_be8b8d6a9d5a4bc59aa76a8b25fd9888f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"#DAB89C",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:37,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tree Stump",uri:"11a91072527049689406d272d5a6d6c4.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:1280,height:768,artist:{id:"",name:""}},color:"#114C22",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:38,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Asparagus",uri:"4d24dcfa04684a81bf3f1701a847af81.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:2e3,height:1333,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:39,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropical Light",uri:"/11062b_af392b5325e7416eb2d8b6f9b1b3c634f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_16}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:40,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Gold Bunnies",uri:"6060bf9757224155bc8cbd95029ee720.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:459,height:287,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:41,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Pineapple Pattern",uri:"eeef56698522480caf7deba849718afe.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:534,height:809,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:42,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Yellow to Blue Gradient",uri:"98e04ee03335423bb5a47bd2f377df2e.png",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:8e3,height:4500,artist:{id:"",name:""}},color:"#35EBE7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:43,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Black Spades",uri:"7d0fa0c9f87547b0a75b80f38ed48183.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:300,height:267,artist:{id:"",name:""}},color:"color_31",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:44,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Urban View",uri:"/11062b_3e2f37c297534f9ead156265242fbca8f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_31}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:45,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Light Spots",uri:"/11062b_2042bb7351284f0f982e4787d37415e6f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"#FFF369",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:46,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Pink Particles",uri:"/11062b_155feccf8d494b18b70adcd7716b6646f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_31}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:47,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Sunflowers",uri:"/11062b_7fb923cf2d6748e195e980d74c4059f2f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"color_29",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:48,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Flower in Sunlight",uri:"175c71a9a7384ca68d97b39947203da8.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:1920,height:1080,artist:{id:"",name:""}},color:"#F17424",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:49,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Golden Dots",uri:"80e0917312df4df5853a6c2a861e7a63.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:466,height:766,artist:{id:"",name:""}},color:"#FAEECD",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:50,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Lifeguard Tower",uri:"f7f8700159f142b3b23e349c23338337.jpeg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4608,height:3072,artist:{id:"",name:""}},color:"#F9C7A7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:51,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Meadow",uri:"/11062b_84f0c9aa252b4b2ab1114febc012eacbf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:52,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Lakeside",uri:"/11062b_10927dd4d14046e4ac23f51f0a5448b3f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"#FFF5A8",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:53,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Zebra Crossing",uri:"fd559363ad5645958cc2ccdc6005fbd6.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:5682,height:3990,artist:{id:"",name:""}},color:"#F1CC01",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:54,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Paradise Serenity",uri:"/11062b_46d3e749db4d4169987b00279493eaa7f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_31}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:55,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Zigzag",uri:"4d24ad2c7b8f47bbbfe14399bd41dc54.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:64,height:50,artist:{id:"",name:""}},color:"#FAC2D2",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:56,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Miami Beach",uri:"/11062b_75ff30e8c38545348bad91473b78ab7cf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"#D41746",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:57,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tropical Leaves",uri:"0396af7423c344a39107ad593c4500f8.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1f0bcd55-6ccc-49e7-a743-30179f6f3783",width:3264,height:2448,artist:{id:"",name:""}},color:"#B22087",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:58,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Grey Geometric Shapes",uri:"f833450526164f5e80b7e8ef0f50844c.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:300,height:300,artist:{id:"",name:""}},color:"#F2668F",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:59,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Pink to Orange Gradient",uri:"af7a8b002af842f8bab87691c1d8640f.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:1920,height:1080,artist:{id:"",name:""}},color:"#C37DB3",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:60,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rain Drops",uri:"95f3448913a746f28b30670b23da4157.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:216,height:216,artist:{id:"",name:""}},color:"#C65AA5",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:61,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Cotton Candy",uri:"/11062b_808b40c463104f22943c284c625d31c3f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_30}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:62,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Ink and Water",uri:"/11062b_74ef3d923f9b451492d3ed9278991873f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:63,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Red Confetti",uri:"21ff2961e4d94522b96543b873b063dc.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:121,height:107,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:64,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Woman Running Legs",uri:"0983ceb77a4e49c6978e4515d8a454f6.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1980,height:1200,artist:{id:"",name:""}},color:"#F9C7A7",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:65,path:"public/491df47b-5958-4dc7-9029-37f428755d45/c2a37dfc-36cf-4bfd-b940-55bac7bdc9e6",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Flamingos",uri:"88d74a1559c84402a4a957527a839260.png",description:"public/491df47b-5958-4dc7-9029-37f428755d45/c2a37dfc-36cf-4bfd-b940-55bac7bdc9e6",width:1920,height:1080,artist:{id:"",name:""}},color:"#DAF2FF",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:66,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Foxes and Rabbits",uri:"f7c0cc732a8e458caf88ad42b251fbdf.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:571,height:514,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:67,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Ink Splash",uri:"/11062b_aa1eeb25fbd3484dbde611d71d7c5747f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"#F1F1F1",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:68,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Palm Trees Beach View",uri:"2465a22a212e41cd96a05e3e3fe5adc4.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:1980,height:1200,artist:{id:"",name:""}},color:"#DAF2FF",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:69,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Moon Jellyfish",uri:"/11062b_77c6bfa45ec6417fa8b1b37fd3f7a108f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:70,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Modern Chicago Skyline",uri:"5b7e139d046c40c1a1acde7162607721.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4085,height:2696,artist:{id:"",name:""}},color:"#FAC2D2",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:71,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Pink Jellyfish",uri:"/11062b_ea61c0ecc8b34ecd942c42470507e640f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"{color_19}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:72,path:"public/8e256233-1752-4026-9341-54036e7f875e/a85e50b3-f78c-4792-a226-040ce52b983c",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Spaceman",uri:"/11062b_fcd00d59140f45d5b2295fe8a4c17edbf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/a85e50b3-f78c-4792-a226-040ce52b983c",width:1920,height:1080},color:"{color_20}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:73,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rotating Crystal Glass",uri:"/11062b_58249d8a53aa452492e328c962b036e9f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:74,path:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Spinning Record",uri:"/11062b_0f1e951461494c1894d86c9ab85a11cff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:75,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Vegan Trio",uri:"180ba81999a64ad3aa42735d409ecab6.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4253,height:2825,artist:{id:"",name:""}},color:"#DBB89A",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:76,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Hand-drawn Feathers",uri:"8eee3a6c7d5842429beba0f7eaeef38c.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:77,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Rotating Gears",uri:"/11062b_d9801124f3cb4deca350acfd66b547cff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:78,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graphic Design Workspace",uri:"fa34b31dc6244a4a854ef6eb8f02ff74.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4e3,height:3e3,artist:{id:"",name:""}},color:"#B7121B",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:79,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Triangles",uri:"d59a233b62cf44b2bf1ebed57aac24de.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:343,height:410,artist:{id:"",name:""}},color:"#DBB89A",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:80,path:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Wood",uri:"1149de6bf15f40c587573bf9311dc32c.jpg",description:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",width:4990,height:3326,artist:{id:"",name:""}},color:"#DBB89A",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:81,path:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Classical Compilation",uri:"/11062b_35727d5e825d405bbb007bc615000a15f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/305292cb-8a7a-4825-87ca-52882fbdf8ff",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:82,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Metal Stairs on Wooden Facade",uri:"cf8156766df64118b0653b3ac4bd5605.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1920,height:1440,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:83,path:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Illustrator",uri:"/11062b_ebcab620e7584e1693f939e597be3777f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/db9e3e42-59d2-461f-b589-6cbbf7c2c06e",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:84,path:"public/921f85b0-261d-4406-964a-cf47e2744c69/bd176e29-5534-4d9f-87a6-a8177517ea4f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graphic Pattern",uri:"5c688cc2a5ec4ad2b86ed53d5df46f47.png",description:"public/921f85b0-261d-4406-964a-cf47e2744c69/bd176e29-5534-4d9f-87a6-a8177517ea4f",width:1920,height:1080,artist:{id:"",name:""}},color:"#3D9BE9",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:85,path:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Tiger",uri:"/11062b_6ceb80744f45401caf9eb666caeb9887f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/09309800-7aa0-4352-8f8a-101028e04bf1",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:86,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Subway",uri:"/11062b_8b85f288687943b59677b4e3e56ef8f8f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"#303030",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:87,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Stack of Magazines",uri:"d532b29bc0c448b29f47672da7b07613.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1920,height:1280,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:88,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Graphic Design Office",uri:"d1c5cd0055c94e3bb1acee9e2fda9f0e.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1920,height:1280,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:89,path:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Record Player",uri:"ee15442532e84041a495a5e46c465b12.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/660a54c1-0fe7-46ec-b502-d9e7c53554d9",width:5616,height:3744,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:90,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Floating Shapes Gray",uri:"/11062b_d2398715eb2e43348e6907b6b3383815f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:91,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Forest Clouds",uri:"/11062b_2e77c1d1a7d84393becbcecd189fe80ef000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:92,path:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Metronome",uri:"/11062b_80a0d0745a884541ae8fae22c02c9e74f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/babd428d-abdf-463a-ac71-a23e3cafaffa",width:1920,height:1080},color:"#271504",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:93,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Grey Dots",uri:"92533e06635940e5b152eb4b0f9c1c4b.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:180,height:101,artist:{id:"",name:""}},color:"#232323",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:94,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Backstage",uri:"8a6b22a6b8d84e728c2253794ee37f98.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:4500,height:3e3,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:95,path:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Melting Ice",uri:"/11062b_9480d9d800bd4bda938057d5ac1ebc42f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:96,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Black Crosses",uri:"56adecff887f459297d81ee5a451ca0e.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#4F4F4F",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:97,path:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Street Sports",uri:"/11062b_b3ee9353cba84f2fba11b18497edd49cf000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:98,path:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Mist Over the Bridge",uri:"/11062b_66b9234563324488b85be02dcf1db183f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/f219085a-ca93-4f05-bc3f-5146ce3e6c8f",width:1920,height:1080},color:"{color_15}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:99,path:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Marble Surface",uri:"bc3ec7bc825c4e6ca746c659189cea83.jpg",description:"public/a0c10733-b2a6-4330-a431-537a9f05c353/c9440526-5aa9-4a6f-8d66-9cf5fa50020d",width:1920,height:1080,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:100,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Suit",uri:"8ca1d4b1209f4712a582d259e1d041c4.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:232,height:200,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:101,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Flowing Viscous Liquid",uri:"/11062b_9f421918574743b48202cb0dacbd77d4f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:102,path:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Concrete Facade",uri:"d05d3b5e9b8c442f8616127098f1e7b0.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/37fb1297-82aa-4be6-a319-4195d317efe3",width:1980,height:1200,artist:{id:"",name:""}},color:"#232323",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:103,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Horizontal Stripes",uri:"251cb06bbba2403296cacacc122c1833.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:105,height:88,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:104,path:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Dance Studio",uri:"/11062b_58d9b7991aa04b99a4f1580a1efc4f7ff000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/bfa1c2d0-17a0-425d-9a6b-15cc467f0736",width:1920,height:1080},color:"#FFFFFF",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:105,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Cat Pattern",uri:"e62cc2e57d9e4debae58f332bc5f7c13.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:1001,height:780,artist:{id:"",name:""}},color:"#A7A7A7",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:106,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Popsicles",uri:"16bc88db91d04e34969d6d9ff99d4f27.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:400,height:400,artist:{id:"",name:""}},color:"#232323",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:107,path:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Gray Waterfall",uri:"/11062b_18eee1c4914c4ef79687cd68f3cf6990f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/5abaf36e-05be-41b2-8a0c-e9999bc48c51",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}},{presetIndex:108,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"NYC Skyline BW",uri:"ea66f0de45ec4109b5eb190bed2244d1.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:1980,height:1200,artist:{id:"",name:""}},color:"#4F4F4F",alignType:"center",fittingType:"fill",scrollType:"fixed",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:109,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Zebras",uri:"049b8cffb8e449e19cce019a499e72b3.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:650,height:593,artist:{id:"",name:""}},color:"{color_11}",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:110,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/bc345090-ef04-4363-9211-3642d0f687f8",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Triangles Pattern",uri:"09ad59ce71ae4243bc54251181afab81.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/bc345090-ef04-4363-9211-3642d0f687f8",width:94,height:89,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"center",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:111,path:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Cloudy Fog",uri:"d8b91ec474404d93a7be5aefff9abd54.jpg",description:"public/491df47b-5958-4dc7-9029-37f428755d45/1fc8b92f-8f6a-403a-a60b-26f7e3bed04f",width:4928,height:3264,artist:{id:"",name:""}},color:"#4F4F4F",alignType:"center",fittingType:"fill",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:112,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Grey Arrows",uri:"be48a6ed702649778e0248921b018462.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#FFFFFF",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:113,path:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Floating Particles",uri:"65361f1a835843df8f46f809b1b05a7a.png",description:"public/6d05b962-a2eb-42f1-afe4-7981bca4bff1/ea934aee-5729-4c5e-aed1-ac25f5489914",width:200,height:200,artist:{id:"",name:""}},color:"#F7F7F7",alignType:"top_left",fittingType:"legacy_tile",scrollType:"scroll",colorOverlay:"",colorOverlayOpacity:0}},{presetIndex:114,path:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",ref:{type:"BackgroundMedia",mediaRef:{type:"Image",title:"Falling shapes White",uri:"/11062b_2ed9e9ea388343a59c387bccf3539098f000.jpg",description:"public/8e256233-1752-4026-9341-54036e7f875e/3892dca7-115f-4b62-ba8d-11a7b220ab76",width:1920,height:1080},color:"{color_11}",alignType:"center",fittingType:"fill",scrollType:"fixed"}}]}),define("rEditor/rootComps/panels/backgroundPanel/backgroundPanel.rt",["react","lodash","baseUI","baseUILib","panels","uiAnimations","backgroundPresets"],function(n,e,a,i,r,s,l){"use strict";return function(){return n.createElement("div",{},this.isPartOfTheLeftBar()?function(){var e=this.getData(),t=this.getCurrentSubPanel(),o=this.getEditorAPI().isMobileEditor();return n.createElement(r.frames.leftPanelFrame,{className:"bg-panel",panelName:this.props.panelName,label:this.getTranslation("TITLE"),key:"leftPanelFrame",ref:"leftPanelFrame",panelClass:"bg-panel",helpId:o?"f0d8190e-e2da-48be-9f44-7ecff4518a82":"f11a3bb9-cff0-46d4-92ff-cc8cd9d30468"},function(e,t,o){var i=this.getMediaType(e.ref);return n.createElement("div",{className:"bg-panel-top"},n.createElement("div",{className:"bg-panel-preview",onContextMenu:function(e,t,o,i,n){n.preventDefault()}.bind(this,e,t,o,i)},n.createElement("div",{className:"bg-panel-preview-media",style:this.getCurrentColor(e)}),n.createElement("div",{ref:"previewMedia",className:"bg-panel-preview-media",style:this.getCurrentMedia(e)}),n.createElement("div",{className:"bg-panel-preview-overlay",style:this.getOverlayStyle(e.ref)}),n.createElement("div",{className:"bg-panel-preview-buttons"},i!==this.mediaTypes.COLOR?n.createElement(a.tooltip,{disabled:!!this.getCurrentSubPanel(),value:this.getSettingTranslation(i),alignment:"top",className:"control-tooltip-small",key:"settings-tooltip"},n.createElement("div",{className:"bg-panel-preview-button"},n.createElement(s.rotatePartAnimation,{selector:".gear-wheel",play:this.isSettingsPanelOpen()},n.createElement(a.toggle,{name:"settings-icon",label:this.getSettingsButtonTranslation(i),valueLink:this.toggleSubPanel(i),labelAfterSymbol:!0})))):null,i===this.mediaTypes.VIDEO?n.createElement(a.tooltip,{key:"video-controls",id:"video-play-tooltip",disabled:this.isPlayBtnTooltipDisabled(i),alignment:"top",className:"control-tooltip-small",value:this.getPlayBtnTranslation()},n.createElement("div",{className:"bg-panel-preview-button"},n.createElement(a.toggle,{name:"play-video",disabled:this.getVideoReadyState()===this.videoReadyStates.IN_PROCESS,valueLink:this.toggleVideoPlayback(this.isVideoPlaying())}),this.getVideoReadyState()===this.videoReadyStates.IN_PROCESS?n.createElement(a.preloader,{key:"play-spinner"}):null)):null),i===this.mediaTypes.IMAGE?n.createElement("div",{onClick:function(e,t,o,i,n){this.replaceColor(n,e)}.bind(this,e,t,o,i),className:"bg-panel-preview-color",style:this.getCurrentColor(e),key:"bg-fold"},n.createElement(a.symbol,{name:"fold-clipart"})):null),n.createElement("div",{className:"bg-panel-top-actions"},n.createElement("div",{className:"bg-panel-action"},n.createElement(a.button2,{className:"default bg-panel-action-btn",label:"BGPP_PANEL_COLOR_BUTTON",symbolName:"color-btn",onClick:function(e,t,o,i,n){this.changeColor(n,e)}.bind(this,e,t,o,i)})),n.createElement("div",{className:"bg-panel-action"},n.createElement(a.button2,{onClick:function(e,t,o,i){this.changeMedia(this.mediaTypes.IMAGE)}.bind(this,e,t,o,i),className:"default bg-panel-action-btn",symbolName:"image-btn",label:"BGPP_PANEL_IMAGE_BUTTON"})),n.createElement(a.tooltip,{disabled:!o,value:"BGPP_PANEL_VIDEO_BUTTON_MOBILE_TOOLTIP",alignment:"top",className:"control-tooltip-small"},n.createElement("div",{className:"bg-panel-action"},n.createElement(a.button2,{onClick:function(e,t,o,i){o||this.changeMedia(this.mediaTypes.VIDEO)}.bind(this,e,t,o,i),disabled:o,className:"default bg-panel-action-btn",symbolName:"video-btn",label:"BGPP_PANEL_VIDEO_BUTTON"})))))}.apply(this,[e,t,o]),n.createElement(i.CustomScroll,{addScrolledClass:!0},n.createElement("div",{className:"bg-panel-preset-list"},n.createElement("div",{className:"bg-panel-preset-list-sections sections","data-tooltip-bounds":"true"},n.createElement(l,this.getPresetsProps())))),n.createElement("div",{className:"bg-panel-bottom"},n.createElement(a.button2,{label:"BGPP_PANEL_APPLY_TO_OTHER_BUTTON",onClick:function(e,t,o){this.handleApplyToOtherClick()}.bind(this,e,t,o),disabled:this.isOnePager(),className:"default"})))}.apply(this,[]):null,this.isPartOfTheLeftBar()?null:function(){var e=this.getData(),t=this.getCurrentSubPanel(),o=this.getEditorAPI().isMobileEditor();return n.createElement(r.frames.tpaSettingsPanelFrame,{className:"bg-panel",panelName:this.props.panelName,shouldAddScroll:!0,title:this.getTranslation("TITLE"),key:"bgPanelFrame",panelClass:"bg-panel",ref:"bgPanelFrame",helpId:o?"f0d8190e-e2da-48be-9f44-7ecff4518a82":"f11a3bb9-cff0-46d4-92ff-cc8cd9d30468"},function(e,t,o){var i=this.getMediaType(e.ref);return n.createElement("div",{className:"bg-panel-top"},n.createElement("div",{className:"bg-panel-preview",onContextMenu:function(e,t,o,i,n){n.preventDefault()}.bind(this,e,t,o,i)},n.createElement("div",{className:"bg-panel-preview-media",style:this.getCurrentColor(e)}),n.createElement("div",{ref:"previewMedia",className:"bg-panel-preview-media",style:this.getCurrentMedia(e)}),n.createElement("div",{className:"bg-panel-preview-overlay",style:this.getOverlayStyle(e.ref)}),n.createElement("div",{className:"bg-panel-preview-buttons"},i!==this.mediaTypes.COLOR?n.createElement(a.tooltip,{disabled:!!this.getCurrentSubPanel(),value:this.getSettingTranslation(i),alignment:"top",className:"control-tooltip-small",key:"settings-tooltip"},n.createElement("div",{className:"bg-panel-preview-button"},n.createElement(s.rotatePartAnimation,{selector:".gear-wheel",play:this.isSettingsPanelOpen()},n.createElement(a.toggle,{name:"settings-icon",label:this.getSettingsButtonTranslation(i),valueLink:this.toggleSubPanel(i),labelAfterSymbol:!0})))):null,i===this.mediaTypes.VIDEO?n.createElement(a.tooltip,{key:"video-controls",id:"video-play-tooltip",disabled:this.isPlayBtnTooltipDisabled(i),alignment:"top",className:"control-tooltip-small",value:this.getPlayBtnTranslation()},n.createElement("div",{className:"bg-panel-preview-button"},n.createElement(a.toggle,{name:"play-video",disabled:this.getVideoReadyState()===this.videoReadyStates.IN_PROCESS,valueLink:this.toggleVideoPlayback(this.isVideoPlaying())}),this.getVideoReadyState()===this.videoReadyStates.IN_PROCESS?n.createElement(a.preloader,{key:"play-spinner"}):null)):null),i===this.mediaTypes.IMAGE?n.createElement("div",{onClick:function(e,t,o,i,n){this.replaceColor(n,e)}.bind(this,e,t,o,i),className:"bg-panel-preview-color",style:this.getCurrentColor(e),key:"bg-fold"},n.createElement(a.symbol,{name:"fold-clipart"})):null),n.createElement("div",{className:"bg-panel-top-actions"},n.createElement("div",{className:"bg-panel-action"},n.createElement(a.button2,{className:"default bg-panel-action-btn",label:"BGPP_PANEL_COLOR_BUTTON",symbolName:"color-btn",onClick:function(e,t,o,i,n){this.changeColor(n,e)}.bind(this,e,t,o,i)})),n.createElement("div",{className:"bg-panel-action"},n.createElement(a.button2,{onClick:function(e,t,o,i){this.changeMedia(this.mediaTypes.IMAGE)}.bind(this,e,t,o,i),className:"default bg-panel-action-btn",symbolName:"image-btn",label:"BGPP_PANEL_IMAGE_BUTTON"})),n.createElement(a.tooltip,{disabled:!o,value:"BGPP_PANEL_VIDEO_BUTTON_MOBILE_TOOLTIP",alignment:"top",className:"control-tooltip-small"},n.createElement("div",{className:"bg-panel-action"},n.createElement(a.button2,{onClick:function(e,t,o,i){o||this.changeMedia(this.mediaTypes.VIDEO)}.bind(this,e,t,o,i),disabled:o,className:"default bg-panel-action-btn",symbolName:"video-btn",label:"BGPP_PANEL_VIDEO_BUTTON"})))))}.apply(this,[e,t,o]),n.createElement(i.CustomScroll,{addScrolledClass:!0},n.createElement("div",{className:"bg-panel-preset-list"},n.createElement("div",{className:"bg-panel-preset-list-sections sections","data-tooltip-bounds":"true"},n.createElement(l,this.getPresetsProps())))),n.createElement("div",{className:"bg-panel-bottom"},n.createElement(a.button2,{label:"BGPP_PANEL_APPLY_TO_OTHER_BUTTON",onClick:function(e,t,o){this.handleApplyToOtherClick()}.bind(this,e,t,o),disabled:this.isOnePager(),className:"default"})))}.apply(this,[]))}}),define("rEditor/rootComps/panels/backgroundPanel/backgroundPanel",["reactDOM","create-react-class","lodash","core","baseUI","util","color","constants","panelUtils","stateManagement","rEditor/rootComps/panels/backgroundPanel/backgroundDesktopPresets.json","rEditor/rootComps/panels/backgroundPanel/backgroundMobilePresets.json","coreBi","experiment","rEditor/rootComps/panels/backgroundPanel/backgroundPanel.rt"],function(i,e,g,t,a,o,n,r,s,l,c,p,d,u,m){"use strict";var f=l.editorPlugins.preview.selectors.getPreviewMode,h=o.translate,y=o.imageTransform,b=o.guidUtils,v=o.blockOuterScrollMixin,S=o.url,E=o.serviceTopology,P=o.backgroundUtils,C=l.editorPlugins,T=C.leftBar,_=C.background.actions.updatePageBackground,I=T.selectors.getDeviceType,M=P.biEvents,A=P.getColorValue,O=P.getOverlayStyle,R=P.getVideoBackgroundObject,w=P.getImageBackgroundObject,D=r.MEDIA_TYPES,k={Image:"background_image",WixVideo:"background_video"},x={IMAGE_SETTINGS:"rEditor.panels.bgImageSettingsPanel",VIDEO_SETTINGS:"rEditor.panels.bgVideoSettingsPanel",APPLY:"rEditor.panels.backgroundApplyPanel"},N={APPLY_PANEL:"applyPanel",IMAGE_PANEL:"imagePanel",VIDEO_PANEL:"videoPanel",PRESET:"preset",MEDIA:"media",REMOVE:"remove",COLOR:"color"},L={BG_PRESETS:"bg_presets",BG_COLOR_PICKER:"bg_color_picker",BG_MEDIA_MANAGER_WIXVIDEO:"bg_media_manager_video",BG_MEDIA_MANAGER_IMAGE:"bg_media_manager_image",BG_IMAGE_SETTINGS:"bg_image_settings",BG_VIDEO_SETTINGS:"bg_video_settings"},B={TITLE:{mobile:"BGPP_PANEL_HEADER_MOBILE_TITLE",desktop:"BGPP_PANEL_HEADER_DSKTOP_TITLE"}},F={Image:"BGPP_PANEL_IMAGE_SETTINGS_BUTTON",WixVideo:"BGPP_PANEL_VIDEO_SETTINGS_BUTTON"},U=r.VIDEO_READY_STATES,G={id:"SITE_BACKGROUND"},H=l.editorPlugins.userPreferences.actions.setSessionUserPreferences,V=l.editorPlugins.userPreferences.selectors.getSessionUserPreferences;function W(e,t,o){var i=e.dsRead.pages.getPrimaryPageId();e.store.dispatch(H("bg_panel_last_media_path_"+i,{type:t,path:o.path}))}function z(e,t){var o=e.dsRead.pages.getPrimaryPageId(),i=t===D.VIDEO?"bg_video_settings_data_changed_":"bg_image_settings_data_changed_";e.store.dispatch(H(i+o,!1)),e.store.dispatch(H("bg_video_settings_pattern_state_"+o,!1))}return e({displayName:"backgroundPanel",mixins:[t.mixins.editorAPIMixin,v,s.linkColorPickerMixin],panelBoundingRect:{},mediaTypes:D,getMediaType:P.getMediaType,subPanels:x,videoReadyStates:null,componentDidMount:function(){var e=this.isPartOfTheLeftBar()?this.refs.leftPanelFrame:this.refs.bgPanelFrame;this.panelBoundingRect=i.findDOMNode(e).getBoundingClientRect(),this.registerPlayerState(),this.markMobileDataDuplications()},componentWillUnmount:function(){this.closeSubPanel(this.getCurrentSubPanel()),this.unregisterPlayerState(),this.pauseVideo();var e=this.getData().ref;M.changedBackgroundBiEvent(this.getEditorAPI(),d.events.backgroundPanel.panel_background_changed,e,this.biEventsParams)},getInitialState:function(){return this.videoReadyStates=U,this.biEventsParams={origin:null,presetIndex:null},{readyState:this.videoReadyStates.NO_VIDEO,playbackState:"waiting",isVideoPlaying:!1,videoReadyState:this.videoReadyStates.IDLE}},componentDidUpdate:function(){this.getVideoReadyState()===this.videoReadyStates.IDLE&&a.tooltipManager.hide("video-play-tooltip")},registerPlayerState:function(){this.getEditorAPI().dsActions.media.mediaState.register("bg_panel",G,this.handlePlayerStateChange)},unregisterPlayerState:function(){this.getEditorAPI().dsActions.media.mediaState.unregister("bg_panel",G)},getNormalizePlayState:function(e){return g.includes(["playing","seek_playing","play_preview"],e)?"playing":e},handlePlayerStateChange:function(e){var t=this.getNormalizePlayState(e.playbackState);e.playbackState===this.state.playbackState&&e.mediaReadyState===this.state.readyState||this.setState({playbackState:t,readyState:e.mediaReadyState})},previewVideo:function(){this.getEditorAPI().components.behaviors.execute(G,"play")},pauseVideo:function(){var e=this.getEditorAPI(),t=e.store.getState();f(t)||e.components.behaviors.execute(G,"stop")},isVideoPlaying:function(){return"playing"===this.state.playbackState},isPartOfTheLeftBar:function(){return!u.isOpen("removeBGButton")},getVideoReadyState:function(){return this.state.readyState},playingStatusChanged:function(){this.forceUpdate()},videoReadyStateChanged:function(){this.forceUpdate()},linkedBackgroundColor:function(t,o,i){return{value:o[i].replace(/[\{\}]/g,""),requestChange:function(e){o[i]=/color_/.test(e)?"{"+e+"}":e,this.biEventsParams.origin=L.BG_COLOR_PICKER,this.onRequestChange(t)}.bind(this)}},getCurrentSubPanel:function(){var e=this.getEditorAPI().getOpenPanels(),t=g.find(e,function(e){return g.includes(x,e.name)});return t&&t.name},isSettingsPanelOpen:function(){var e=this.getCurrentSubPanel();return e===x.IMAGE_SETTINGS||e===x.VIDEO_SETTINGS},closeSubPanel:function(e){var t=this.getEditorAPI();e&&t.panelManager.closePanelByName(e)},getData:function(e){var t=this.getEditorAPI(),o=t.store.getState();e=e||I(o);var i=t.dsRead.pages.getPrimaryPageId();return t.dsRead.pages.background.get(i,e)},onRequestChange:function(e,t,o){var i,n,a,r=this.getEditorAPI(),s=r.store.getState(),l=I(s);o=o||r.pages.getPrimaryPageId(),e.ref.id=(i=e,a=n=o,r.homePage.get()!==a||i.ref.mediaRef?i.ref.id:b.getUniqueId(n,"_")+"_bg"),r.store.dispatch(_(l,e,o)),this.undoHandler(t),this.state.isVideoPlaying&&(this.pauseVideo(),this.setState({isVideoPlaying:!1}))},undoHandler:function(e){var t=this.getEditorAPI(),o=g.values(N);g.includes(o,e)&&t.history.add("background panel - "+e)},toggleSubPanel:function(t){var e=this.getCurrentSubPanel();return{value:e&&e!==this.subPanels.APPLY,requestChange:function(){var e=t===D.VIDEO?this.subPanels.VIDEO_SETTINGS:this.subPanels.IMAGE_SETTINGS;this.toggleSubPanelChange(e)}.bind(this)}},toggleSubPanelChange:function(e){var t=this.getCurrentSubPanel();e===t?this.closeSubPanel(e):(this.closeSubPanel(t),this.openSubPanel(e))},openSubPanel:function(e){var t,o,i,n=this.getEditorAPI();t=e,o=n,i=this.biEventsParams,t===x.APPLY?M.applyToOtherClick(o,d.events.backgroundPanel.panel_apply_to_other_pages_click):i.origin=L["BG_"+g.invert(x)[t].toUpperCase()];var a=this.getSubPanelProps();n.panelManager.openPanel(e,a,!0)},getSubPanelProps:function(e){var t=this.isPartOfTheLeftBar()?this.refs.leftPanelFrame:this.refs.bgPanelFrame,o=i.findDOMNode(t).getBoundingClientRect();return{requestChange:this.onRequestChange,undoHandler:this.undoHandler,undoOrigins:N,getData:this.getData,panelName:e,contentStyle:{top:o.top-window.pageYOffset+"px",left:o.left-window.pageXOffset+362+"px",width:"290px"},style:{zIndex:"auto"}}},getCurrentMedia:function(e){var t={},o=void 0,i=void 0;if(e.ref.mediaRef){o=this.getMediaType(e.ref)===D.IMAGE?e.ref.mediaRef:e.ref.mediaRef.posterImageRef,i=P.isSmallerFromContainer(o.width,o.height,600,600)?y.fittingTypes.TILE:y.fittingTypes.SCALE_TO_FILL;var n=P.getImageDisplayData(i,e.ref.alignType,o.uri,o.width,o.height,352,184);t.backgroundImage="url("+S.joinURL(E.staticMediaUrl,n.uri)+")",t.opacity=o.opacity,g.assign(t,n.css.container)}return g.assign(t,this.getCurrentColor(e)),t},getCurrentColor:function(e){return{backgroundColor:A(this.getEditorAPI(),e.ref.color)}},toggleVideoPlayback:function(e){return{value:e,requestChange:function(e){e?this.previewVideo():this.pauseVideo()}.bind(this)}},replaceColor:function(e,t){this.setColorPicker(e,t,this.colorPickerPanelHandleReplace,!0)},changeColor:function(e,t){var o=!t.ref.mediaRef;this.setColorPicker(e,t,this.colorPickerPanelHandleChange,o)},setColorPicker:function(e,t,o,i){var n=i?t.ref.color.replace(/[\[\{\}\]]/g,""):"noColor",a={top:e.clientY,left:e.clientX};this.openColorPicker(o,n,!0,a,i,!0)},colorPickerPanelHandleReplace:function(e){this.closeSubPanel(this.getCurrentSubPanel());var t=this.getData();/color_/.test(e)?t.ref.color="{"+e+"}":/rgba/.test(e)?t.ref.color=new n(e).hexString():t.ref.color=e,this.biEventsParams.origin=L.BG_COLOR_PICKER,this.onRequestChange(t)},colorPickerPanelHandleChange:function(e){this.closeSubPanel(this.getCurrentSubPanel());var t=this.getData();t.ref.mediaRef&&(t.ref.mediaRef=null,z(this.getEditorAPI(),D.VIDEO),z(this.getEditorAPI(),D.IMAGE),P.clearOverlayData(t),this.undoHandler(N.REMOVE)),/color_/.test(e)?t.ref.color="{"+e+"}":/rgba/.test(e)?t.ref.color=new n(e).hexString():t.ref.color=e,this.biEventsParams.origin=L.BG_COLOR_PICKER,this.onRequestChange(t)},selectPreset:function(e,t,o){var i=this.getData(),n=this.getEditorAPI();a.tooltipManager.hideAll(),this.closeSubPanel(this.getCurrentSubPanel()),g.assign(e,g.omit(i,"ref")),e.path&&W(n,this.getMediaType(e.ref),{path:e.path}),delete e.path,delete e.presetIndex,z(n,D.VIDEO),z(n,D.IMAGE),this.biEventsParams={presetIndex:o,origin:L.BG_PRESETS},this.onRequestChange(e,N.PRESET)},onMediaManagerCallback:function(e,t,o){if(t){var i,n,a,r,s=void 0,l=void 0,c=this.getEditorAPI(),p=this.getData();W(c,e,o),e===D.VIDEO?(s=R(g.head(t),o),function(e,t){e.ref.scrollType="fixed";var o=t.dsRead.pages.getPrimaryPageId();V("bg_video_settings_data_changed_"+o)(t.store.getState())||P.clearOverlayData(e)}(p,c),z(c,D.IMAGE),l=s.posterImageRef,p.ref.scrollType="fixed"):e===D.IMAGE&&(s=w(g.head(t),o),i=s,n=p,r=(a=c).dsRead.pages.getPrimaryPageId(),V("bg_image_settings_data_changed_"+r)(a.store.getState())&&(i.opacity=n.ref.mediaRef&&n.ref.mediaRef.opacity||1),P.clearOverlayData(n),z(c,D.VIDEO),l=s);var d=P.isSmallerFromContainer(l.width,l.height,600,600),u=void 0;u=e===D.IMAGE&&d?y.fittingTypes.LEGACY_BG_FIT_AND_TILE:y.fittingTypes.SCALE_TO_FILL,p.ref.fittingType=u,p.ref.alignType=y.alignTypes.CENTER,p.ref.mediaRef=s,this.biEventsParams.origin=L["BG_MEDIA_MANAGER_"+e.toUpperCase()],this.onRequestChange(p,N.MEDIA)}},openMediaManager:function(e,o){if(e){var t,i,n=this.getEditorAPI(),a=n.mediaServices,r=a.mediaManager,s=k[e],l=void 0,c=(i=(t=n).dsRead.pages.getPrimaryPageId(),V("bg_panel_last_media_path_"+i)(t.store.getState())||{}),p=c.type===e&&c.path||"";e===D.IMAGE?l=r.categories.BG_IMAGE:e===D.VIDEO&&(l=r.categories.BG_VIDEO),this.closeSubPanel(this.getCurrentSubPanel()),r.open(l,s,{callback:function(e,t){o(e,t),a.setFocusToEditor()},path:p,translation:{submitButton:h("MMGR_submitbutton_background_uploads_change")}})}},changeMedia:function(e){this.openMediaManager(e,this.onMediaManagerCallback.bind(this,e))},closePanel:function(){this.getEditorAPI().panelManager.closePanel(this.props.panelName)},getTranslation:function(e){var t=this.getEditorAPI().store.getState(),o=I(t);return h(B[e][o])},getSettingsButtonTranslation:function(e){return F[e]},handleApplyToOtherClick:function(){this.isOnePager()||this.toggleSubPanelChange(this.subPanels.APPLY)},isOnePager:function(){return 1===this.getEditorAPI().dsRead.pages.getPageIdList().length},markMobileDataDuplications:function(){var e=this.getEditorAPI(),t=this.getData("mobile").ref.id;if(!V("bg_panel_mobile_data_duplications_"+t)(e.store.getState())){for(var o=e.dsRead.pages.getPrimaryPageId(),i=0,n=e.dsRead.pages.getPagesData(),a=0;a<n.length;a++)n[a].id!==o&&n[a].pageBackgrounds.mobile.ref.id===t&&i++;e.store.dispatch(H("bg_panel_mobile_data_duplications_"+t,{count:i})),i&&M.mobileDataDuplicationError(this.getEditorAPI(),d.errors.BG_MOBILE_DATA_DUPLICATION_ERROR)}},isPlayBtnTooltipDisabled:function(){return this.getVideoReadyState()===this.videoReadyStates.IDLE},getPlayBtnTranslation:function(){var e="",t=this.getVideoReadyState();return t===this.videoReadyStates.PLAYING_PREVIEW?e="BGPP_PANEL_VIDEO_PLAYBACK_PREVIEW_READY_TOOLTIP":t===this.videoReadyStates.IN_PROCESS&&(e="BGPP_PANEL_VIDEO_PLAYBACK_NOT_READY_TOOLTIP"),e},getSettingTranslation:function(e){var t="";return e===D.IMAGE?t="BGPP_PANEL_IMAGE_SETTINGS_BUTTON_TOOLTIP":e===D.VIDEO&&(t="BGPP_PANEL_VIDEO_SETTINGS_BUTTON_TOOLTIP"),t},getPresetsProps:function(){return{desktopPresets:c,mobilePresets:p,title:h("BGPP_PANEL_SELECTED_SECTION_TITLE"),infoTooltip:"BGPP_PANEL_SELECTED_SECTION_TOOLTIP",onSelectPreset:this.selectPreset,columns:4}},getOverlayStyle:function(e){return O(e,this.getEditorAPI())},render:function(){return m.apply(this)}})}),define("rEditor/rootComps/panels/mediaManagerPanel/mediaManagerPanelMapper",["lodash","constants","stateManagement"],function(n,a,r){"use strict";return{mapStateToProps:function(e){var i=e.editorAPI,t=i.mediaServices.mediaManager,o=i.dsRead.pages.getFocusedPageId();return{mediaManager:t,siteMediaToken:i.dsRead.generalInfo.media.getSiteUploadToken(),metaSiteId:i.dsRead.generalInfo.getMetaSiteId(),metaSiteInstance:n.get(i.dsRead.platform.getAppDataByApplicationId(a.APPLICATIONS.META_SITE_APPLICATION_ID),"instance"),userId:i.dsRead.generalInfo.getUserId(),siteId:i.dsRead.generalInfo.getSiteId(),language:i.dsRead.generalInfo.getLanguage(),mediaManagerCategories:t.categories,focusedPageId:o,focusedPageReference:i.dsRead.pages.getReference(o),userFeedback:i.mediaServices.userFeedback,mediaStudio:i.mediaServices.mediaStudio,videoMaker:i.mediaServices.videoMaker,editorWorkingMode:i.viewMode.get(),isTemplateSite:i.dsRead.generalInfo.isTemplate(),editorGetPasteComponentPosition:function(e){return i.pasteLogic.addContext.getPastePosition(i,e,o)},editorSetFocusToEditor:function(){return i.mediaServices.setFocusToEditor()},editorResetPastePosition:function(){return i.pasteLogic.addContext.resetPastePosition()},editorAddComponent:function(e,t,o){return i.components.add(t,e,void 0,o)},editorGetComponentType:function(e){return i.components.getType(e)},editorBuildDefaultComponentStructure:function(e){return i.components.buildDefaultComponentStructure(e)},editorSelectComponentByCompRef:function(e){return i.selection.selectComponentByCompRef(e)},editorAddHistory:function(e){return i.history.add(e)},editorGetState:function(){return i.store.getState()},editorGetSvgInfoFromCache:function(e){return i.media.vectorImage.getSvgInfoFromCache(e)},editorGetComponentDesign:function(e){return i.components.design.get(e)},editorUpdateComponentDesign:function(e,t){return i.components.design.update(e,t,!0,!0)},editorClosePanel:function(e){return i.panelManager.closePanelByName(e)},getSiteUserPreferences:function(e){return r.editorPlugins.userPreferences.selectors.getSiteUserPreferences(e)(i.store.getState())}}},mapDispatchToProps:function(o){return{sendBi:function(e,t){return o(r.bi.actions.event(e,t))},editorDispatchAction:function(e){return o(e)},setSiteUserPreferences:function(e,t){return o(r.editorPlugins.userPreferences.actions.setSiteUserPreferences(e,t))}}}}}),define("rEditor/rootComps/panels/mediaManagerPanel/mediaManagerPanel.rt",["react","lodash","baseUI","baseUILib","santa-editor-symbols","panels","mediaManagerPanelInfra","addPanelInfra"],function(n,o,e,i,a,r,s,l){"use strict";return function(){function t(e,t,o,i){return function(e,t,o){var i=this.sections[t];return[this.isRegularSection(t)&&this.sectionCanBeShown(i)?n.createElement("li",{className:"media-manager-panel__section",ref:this.getSectionRef(t),key:i.id},n.createElement(s.presets.presetSection,{id:i.id,title:i.title,items:i.items,action:i.action,options:i.options,key:i.id})):null,this.isRecommendedMediaSection(t)&&this.recommendedMediaSectionCanBeShown(i)?n.createElement("li",{className:"media-manager-panel__section media-manager-panel__recommended-section",ref:this.getSectionRef(t),key:this.getRecommendedMediaSectionKey()},n.createElement(s.presets.recommendedMediaSection,{id:i.id,title:i.title,items:i.items,action:i.action,options:i.options,visibleItemsCount:this.recommendedSectionVisibleItemsCount,onSettingsOpen:this.handleRecommendedMediaSectionSettingsButtonClick,onShowMoreClick:this.handleRecommendedMediaSectionShowMoreButtonClick,key:i.id})):null,this.isCreateMediaSection(t)&&this.createMediaSectionCanBeShown()?n.createElement("li",{className:"media-manager-panel__section",ref:this.getSectionRef(t),key:t},n.createElement(s.presets.createMediaSection,{onCreateImageClick:this.handleCreateImageActionClicked,onCreateVideoClick:this.handleCreateVideoActionClicked})):null,this.isAddMediaSection(t)&&this.shouldRenderAddMediaSection()?n.createElement("li",{className:"media-manager-panel__section media-manager-panel__add-media-section",ref:this.getSectionRef(t),key:e.id},this.isNewAddSectionExperimentEnabled?null:n.createElement(s.presets.addMediaSection,{title:e.title,onButtonClick:this.handleAddMediaButtonClick,key:"add-section-old"}),this.isNewAddSectionExperimentEnabled?n.createElement(s.presets.addMediaSectionNew,{onButtonClick:this.handleAddMediaButtonClick,key:"add-section-new"}):null):null,this.isRecommendedMediaCard(t)&&this.shouldRenderRecommendedMediaCard?n.createElement("li",{className:"media-manager-panel__recommended-media-card",key:"recommended-media-card"},n.createElement(s.presets.recommendedMediaCard,{categories:this.recommendedCardTopics,initiallySelectedCategories:this.selectedRecommendedMediaCategories,onDotsClick:this.handleRecommendedMediaCardThreeDotsClick,dotsActions:this.getRecommendedMediaCardActions(),onApply:this.handleRecommendedMediaCardApplyClick,onSeeAll:this.handleRecommendedCategoriesSeeAllButtonClick})):null]}.apply(this,[e,t,o])}return n.createElement(r.frames.leftPanelFrame,{panelClass:"media-manager-panel",panelName:this.props.panelName,panelIndex:this.props.panelIndex,helpId:"d08b3ca9-adcd-487a-a707-d06a3aa81b85",label:this.panelTitle},n.createElement("div",{className:"media-manager-panel__content "+o({"search-state":this.isSearching}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),onContextMenu:this.preventRightClick},this.isPanelLoadedWithError?n.createElement("div",{className:"media-manager-panel__error-info-wrapper",key:"errorInfoContainer"},n.createElement(a.symbol,{name:"media-manager-panel-error-illustration"}),n.createElement("div",{className:"media-manager-panel__error-title"},n.createElement(i.TextLabel,{value:this.errorTitle,type:"T09",enableEllipsis:!1})),n.createElement("div",{className:"media-manager-panel__error-text"},n.createElement(i.TextLabel,{value:this.errorText,type:"T02",enableEllipsis:!1})),this.isNotAuthorized?null:n.createElement("div",{key:"tryAgainButton"},n.createElement(i.Button,{className:"media-manager-panel__error-try-again-button btn-text",onClick:this.reloadSections},"\n          ",this.tryAgainButtonText,"\n        "))):null,this.shouldRenderNavigation?n.createElement(l.anchorsNavigation,o.assign({},{key:"navigation"},this.getAnchorsNavigationProps())):null,this.isPanelLoadedWithError?null:n.createElement("div",{className:"media-manager-panel__content-inner "+o({"with-sticky-search-box":this.isSearchBoxSticky}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"contentContainer"},!this.areAllRegularSectionsLoaded&&!this.isSearching||this.isExtendedSearchExperimentEnabled?null:n.createElement("div",{className:"media-manager-panel__search-box",key:"searchBox"},n.createElement("div",{className:"media-manager-panel__search"},n.createElement(s.presets.search,{value:this.searchQuery,onSearchStart:this.startSearch,onClearSearchButtonClick:this.clearSearch,onBlur:this.handleSearchBlur}))),(this.areAllRegularSectionsLoaded||this.isSearching)&&this.isExtendedSearchExperimentEnabled?n.createElement("div",{className:"media-manager-panel__search-box extended "+o({sticky:this.isSearchBoxSticky}).transform(function(e,t,o){t&&e.push(o)},[]).join(" "),key:"searchBox"},n.createElement("div",{className:"media-manager-panel__search"},n.createElement("div",{className:"media-manager-panel__extended-search-message"},n.createElement(i.TextLabel,{value:"Media_Panel_Search_Media_Label"})),n.createElement("div",{className:"media-manager-panel__search-wrapper"},n.createElement(s.presets.search,{value:this.searchQuery,placeholder:this.searchPlaceholder,onSearchStart:this.startSearch,onClearSearchButtonClick:this.clearSearch,onBlur:this.handleSearchBlur})))):null,this.areAllRegularSectionsLoaded?null:n.createElement("div",{className:"media-manager-panel__preloader",key:"preloader"},n.createElement(i.Composites.Preloader,{},n.createElement(i.Preloader,{className:"medium"}),n.createElement(i.TextLabel,{value:this.loaderText}))),n.createElement("div",{className:"media-manager-panel__scroll-wrapper "+o({extended:this.isExtendedSearchExperimentEnabled}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},this.areAllRegularSectionsLoaded?n.createElement(i.CustomScroll,{ref:"customScroll",onScroll:function(e){this.onScroll(e)}.bind(this),heightRelativeToParent:"100%",key:"dataSections"},this.hasFoundNothing?n.createElement("div",{className:"media-manager-panel__no-search-results-wrapper",key:"noSearchResults"},n.createElement(a.symbol,{name:"media-panel-no-search-results-illustration"}),n.createElement("div",{className:"media-manager-panel__no-search-results-title"},n.createElement(i.TextLabel,{value:"Media_Panel_Results_No_Results_Title",type:"T09",enableEllipsis:!1})),n.createElement("div",{className:"media-manager-panel__no-search-results-text"},n.createElement(i.TextLabel,{value:"Media_Panel_Results_No_Results_Text",type:"T02",enableEllipsis:!1}))):null,this.areAllRegularSectionsLoaded&&!this.hasFoundNothig?function(){var e=this.addMediaSection;return n.createElement.apply(this,["ul",{className:"media-manager-panel__sections",key:"panelContent"},o.map(this.sectionsOrder,t.bind(this,e))])}.apply(this,[]):null,n.createElement("div",{className:"media-manager-panel__list-upload-button-divider"}),n.createElement("div",{className:"media-manager-panel__upload-button-container"},n.createElement(e.button2,{label:"Media_Panel_Upload_Media_Button",onClick:this.handleUploadMediaButtonClick,className:"default media-manager-panel__upload-button","data-hook":"media-manager-panel-upload_button"}))):null))))}}),define("rEditor/rootComps/panels/mediaManagerPanel/mediaManagerPanel",["react","reactDOM","prop-types","lodash","uiAnimations","stateManagement","coreUtilsLib","experiment","wixmp","UserFeedbackOpener","MediaImageStudio","videoMakerOpener","util","constants","coreBi","mediaManagerPanelInfra","rEditor/rootComps/panels/mediaManagerPanel/mediaManagerPanelMapper","rEditor/rootComps/panels/mediaManagerPanel/mediaManagerPanel.rt"],function(t,o,e,u,n,i,a,r,d,s,l,c,g,p,m,f,h,y){"use strict";var b=g.translate,v=g.hoc,S=g.fedopsLogger,E=g.ravenUtils,P=v.connect,C=v.STORES.EDITOR_API,T=v.withDragToStage,_=f.constants,I=f.utils,M=f.purchaseUtils,A=m.events.mediaEditorPanel,O=u.once(function(e){return new d.Socket(e.blackArrowConfig)}),R=p.VECTOR_IMAGE_DEFAULTS.VECTOR_SHAPE_COLOR_DEFAULT,w=p.MEDIA_MANAGER_MEDIA_TYPES,D=s.OpenerEventTypes,k=s.CloseReason,x=l.MediaImageStudioEvents,N=l.MediaImageStudioMode,L=_.MEDIA_MANAGER_PANEL_TITLE,B=_.SHUTTERSTOCK_MEDIA_TYPE,F=_.MEDIA_MANAGER_PANEL_SECTION_ID,U=_.SECTIONS_TITLES_MAP,G=_.SECTIONS_MEDIA_FROM_WIX_TITLES_MAP,H=_.SEARCH_SECTIONS_TITLES_MAP,V=_.SEARCH_SECTIONS_MEDIA_FROM_WIX_TITLES_MAP,W=_.ITEMS_TO_LOAD_COUNT,z=_.RECOMMENDED_ITEMS_TO_LOAD_COUNT,q=_.RECOMMENDED_SECTION_INITIAL_VISIBLE_ITEMS_COUNT,j=_.PRICE_INFO_URLS,Y=_.PUBLIC_MEDIA_ROOT,K=_.PUBLIC_MEDIA_ROOT_MEDIA_TYPE_MAP,X=_.SHUTTERSTOCK_PAYMENT_API,Z=_.MEDIA_SOURCES,Q=_.BLACK_ARROW_CONFIG,J=_.SOCKET_STATUSES,$=_.TRANSCODING_STATUSES,ee=_.NAVIGATION_TOOLTIP_KEYS,te=_.NAVIGATION_MFW_TOOLTIP_KEYS,oe=_.MEDIA_MANAGER_OPEN_SOURCE_BASE,ie=_.MEDIA_MANAGER_OPEN_OPTIONS_WHEN_SEARCH,ne=_.MEDIA_MANAGER_OPEN_OPTIONS,ae=_.MEDIA_MANAGER_MEDIA_TYPES_SHUTTER_STOCK_MEDIA_TYPES_MAP,re=_.MEDIA_MANAGER_UPLOAD_SOURCES,se=_.WIX_MEDIA_SECTIONS_LIST_FOR_FULL_INFO,le=_.ADD_TO_STAGE_METHOD,ce=_.RECOMMENDED_CARD_TOPICS,pe=_.RECOMMENDED_MEDIA_QUESTION,de=_.RECOMMENDED_MEDIA_SECTION_ITEMS_WIX_MEDIA_ROOTS,ue=_.RECOMMENDED_MEDIA_BUTTONS,ge=_.MEDIA_PANEL_NEVER_SHOW_RECOMMENDED_CARD_KEY,me=_.RECOMMENDED_MEDIA_PRESENCE_TYPE,fe={paging:{size:W}},he=[F.SITE_FILES,F.ADD_MEDIA],ye=[F.ADD_MEDIA,F.SITE_FILES],be=[F.RECOMMENDED_MEDIA_CARD,F.RECOMMENDED_MEDIA,F.CREATE_MEDIA,F.WIX_IMAGES,F.WIX_VIDEOS,F.WIX_VECTOR_ART,F.WIX_ILLUSTRATIONS,F.WIX_SOCIAL_ICONS,F.SHUTTERSTOCK_IMAGES,F.SHUTTERSTOCK_VIDEOS],ve=function(e){function p(e){var t,o;_classCallCheck(this,p);var i=_possibleConstructorReturn(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,e));i.openTimeStart=I.timeNow(),i.regularSectionsLoadingFinishTime=null,i.recommendedMediaLoadingTime=null,i.addMediaSection={id:F.ADD_MEDIA,title:b(U[F.ADD_MEDIA])},i.createMediaSection={id:F.CREATE_MEDIA},i.sectionsOrder=i.isAddSectionShouldBeFirstExperimentEnabled?u.concat(ye,be):u.concat(he,be);var n=i.getPreviousPanelState()||{},a=e.getSiteUserPreferences(ge);i.state=u.defaults(u.pick(n,["isSearching","searchQuery","recommendedMediaCategories","recommendedMediaCacheId","recommendedTopicsList","recommendedSectionVisibleItemsCount","shouldHideRecommendedMediaCardForCurrentSession"]),{areAllRegularSectionsLoaded:!1,isSearching:!1,isSearchBoxSticky:!1,searchQuery:"",sections:{},mediaPriceInfo:{shutterStock:(t={},_defineProperty(t,B.IMAGE,{}),_defineProperty(t,B.VIDEO,{}),t),wix:(o={},_defineProperty(o,w.PICTURE,{}),_defineProperty(o,w.VIDEO,{}),o)},isRecommendedSectionLoadWithMocks:!0,recommendedTopicsList:[],recommendedMediaCacheId:i.generateRecommendedMediaCacheId(),recommendedMediaCategories:null,recommendedSectionVisibleItemsCount:q,shouldHideRecommendedMediaCardForCurrentSession:!1,neverShowRecommendedMedia:Boolean(a),selectedNavigationSection:null,loadingError:null});var r={siteMediaToken:e.siteMediaToken,version:"G6",useNewSiteFilesEndpoints:!0},s=u.assign({},r,{thumbnailSizes:{thumbnail:{width:90,height:90}}});if(i.privateMediaAdapter=d.createSource(d.PrivateSite,r),i.publicMediaAdapter=d.createSource(d.Public,s),i.shutterStockAdapter=d.createSource(d.Shutterstock,r),i.isRecommendedMediaExperimentEnabled&&!i.isTemplateSite&&(i.recommendedMediaAdapter=n.recommendedMediaAdapter||d.createSource(d.Recommended,u.assign({xsrfToken:g.cookie.getCookie("XSRF-TOKEN"),itemsCacheCapacity:1,apiUrl:window.location.protocol+"//editor.wix.com",topicsListApiUrl:window.location.protocol+"//editor.wix.com"},r))),i.socket=O({blackArrowConfig:Q}),i.publicMediaFoldersTreePromise=null,i.publicMediaSubCategoryPublicMediaRootMap=null,i.sectionToPublicMediaSubcateogyPathMap={},i.sectionsGaps=null,i.purchasableItemSearchQuery=null,i.isRecommendedMediaExperimentEnabled){var l={id:ue.DO_THIS_LATER,label:b("Media_Panel_Recommended_Section_EmptyState_Later"),onClick:function(){return i.handleRecommendedMediaCardDoThisLaterClick()}},c={id:ue.DONT_SHOW_AGAIN,label:b("Media_Panel_Recommended_Section_EmptyState_DontShowAgain"),onClick:function(){return i.handleRecommendedMediaCardDontShowThisAgainClick()}};i.recommendedMediaCardDotsActions=[l,c]}return u.bindAll(i,["setSections","setAllRegularSectionsLoaded","startSearch","clearSearch","loadDataAndCreateSection","loadRecommendedMedia","reloadSections","getItemPrice","buyItem","startItemDrag","preventRightClick","loadWixMediaItemsFullInfoAndUpdateSections","onScroll","handleLoadingError","handleAddMediaButtonClick","handleUploadMediaButtonClick","handleItemClick","handleSocketMessage","handleSearchBlur","handleRecommendedMediaCardApplyClick","handleRecommendedCategoriesSeeAllButtonClick","handleRecommendedMediaSectionSettingsButtonClick","handleRecommendedMediaCardThreeDotsClick","handleRecommendedMediaSectionShowMoreButtonClick","handleCreateImageActionClicked","handleCreateVideoActionClicked","trackFedopsInteractionStarted","trackFedopsInteractionEnded","openMediaStudio","openMediaStudioOnMountIfNecessary","openVideoMaker","openVideoMakerOnMountIfNecessary","openMediaManagerOnMountIfNecessary"]),i}return _inherits(p,t.Component),_createClass(p,[{key:"getRecommendedMediaSectionKey",value:function(){return F.RECOMMENDED_MEDIA+"_"+u.join(this.recommendedMediaCategories,",")+"_"+this.recommendedSectionVisibleItemsCount}},{key:"generateRecommendedMediaCacheId",value:function(){return u.uniqueId("emp-cache-")}},{key:"updateRecommendedMediaCacheId",value:function(){this.setState({recommendedMediaCacheId:this.generateRecommendedMediaCacheId()})}},{key:"setRecommendedSectionVisibleItemsCount",value:function(e){this.setState({recommendedSectionVisibleItemsCount:e})}},{key:"setRecommendedSectionLoadWithMocks",value:function(e){this.setState({isRecommendedSectionLoadWithMocks:e})}},{key:"resetPurchasableItemSearchQuery",value:function(){this.purchasableItemSearchQuery=null}},{key:"getSessionUserPreferences",value:function(e){return i.editorPlugins.userPreferences.selectors.getSessionUserPreferences(e)(this.props.editorGetState())}},{key:"setSessionUserPreferences",value:function(e,t){this.props.editorDispatchAction(i.editorPlugins.userPreferences.actions.setSessionUserPreferences(e,t))}},{key:"getPreviousPanelState",value:function(){return this.getSessionUserPreferences("media_editor_panel_previous_state")}},{key:"savePanelStateBeforeClose",value:function(){var e=this.state,t=u.pick(e,[].concat(_toConsumableArray(this.isSearching?["isSearching","searchQuery"]:[]),_toConsumableArray(this.isRecommendedMediaExperimentEnabled?["shouldHideRecommendedMediaCardForCurrentSession","recommendedMediaCategories","recommendedMediaCacheId","recommendedTopicsList","recommendedSectionVisibleItemsCount"]:[])));this.isRecommendedMediaExperimentEnabled&&!this.isTemplateSite&&(t.recommendedMediaAdapter=this.recommendedMediaAdapter),this.setSessionUserPreferences("media_editor_panel_previous_state",t)}},{key:"isAddMediaSection",value:function(e){return I.isAddMediaSection(e)}},{key:"isRecommendedMediaCard",value:function(e){return I.isRecommendedMediaCard(e)}},{key:"isRecommendedMediaSection",value:function(e){return I.isRecommendedMediaSection(e)}},{key:"recommendedMediaSectionCanBeShown",value:function(e){return!this.isSearching&&e&&!u.isEmpty(this.recommendedMediaCategories)}},{key:"isCreateMediaSection",value:function(e){return I.isCreateMediaSection(e)}},{key:"createMediaSectionCanBeShown",value:function(){return this.isShowCreateMediaSectionExperimentEnabled&&!this.isSearching}},{key:"isRegularSection",value:function(e){return!(this.isAddMediaSection(e)||this.isRecommendedMediaCard(e)||this.isRecommendedMediaSection(e)||this.isCreateMediaSection(e))}},{key:"sectionCanBeShown",value:function(e){return e&&e.items.length}},{key:"isSocialIconsRoot",value:function(e){return I.isSocialIconsRoot(this.publicMediaSubCategoryPublicMediaRootMap[e])}},{key:"getSectionRef",value:function(e){return"Section_"+e}},{key:"getSectionInstance",value:function(e){return o.findDOMNode(this.refs[this.getSectionRef(e)])}},{key:"setSelectedNavigationSection",value:function(e){this.setState({selectedNavigationSection:e})}},{key:"setSections",value:function(e){this.setState({sections:e})}},{key:"setRecommendedMediaCategoriesAndClearRecommendedMediaSection",value:function(e){this.setState({recommendedMediaCategories:e,sections:u.isEmpty(e)?this.sections:this.clearRecommendedMediaSection()})}},{key:"updateSingleSection",value:function(e){this.setState({sections:u.assign({},this.sections,_defineProperty({},e.id,e))})}},{key:"clearSingleSection",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return u.assign({},this.sections,_defineProperty({},e,this.createEmptySection(e,t)))}},{key:"setAllRegularSectionsLoaded",value:function(){this.setState({areAllRegularSectionsLoaded:!0})}},{key:"hasSectionItems",value:function(){var e=this.state.sections;return e&&u.sumBy(u.map(e,"items"),"length")}},{key:"shouldRenderAddMediaSection",value:function(){return!this.isSearching}},{key:"preventRightClick",value:function(e){"INPUT"!==e.target.nodeName&&e.preventDefault()}},{key:"handleLoadingError",value:function(e){E.captureError(e,{tags:{panelName:"MediaManagerPanel",action:"PanelLoading"}}),this.setState({areAllRegularSectionsLoaded:!1,isSearching:!1,searchQuery:"",sections:{},loadingError:e})}},{key:"getRecommendedMediaCardActions",value:function(){return this.recommendedMediaCardDotsActions}},{key:"updateRecommendedMediaCategories",value:function(e){return this.recommendedMediaAdapter.preferences.updateMediaCategories(e,{msid:this.props.metaSiteId})}},{key:"loadSiteRecommendedTopics",value:function(){return this.recommendedMediaCategories?Promise.resolve(this.recommendedMediaCategories):this.recommendedMediaAdapter.preferences.mediaCategories({msid:this.props.metaSiteId}).then(function(e){return u.get(e,"data",[])})}},{key:"loadAllRecommendedTopics",value:function(){return u.isEmpty(this.recommendedTopicsList)?this.recommendedMediaAdapter.topics.list({locale:this.props.language}).then(function(e){return e.data}):Promise.resolve(this.recommendedTopicsList)}},{key:"handleRecommendedCategoriesApply",value:function(e){var t=this;this.setRecommendedSectionVisibleItemsCount(q),this.setRecommendedMediaCategoriesAndClearRecommendedMediaSection(e),this.updateRecommendedMediaCacheId(),this.updateRecommendedMediaCategories(e).then(function(){t.loadRecommendedMediaDataAndCreateSection()})}},{key:"handleRecommendedMediaCardApplyClick",value:function(e){this.trackRecommendedSectionButtonClicked(ue.APPLY,e),this.handleRecommendedCategoriesApply(e)}},{key:"handleRecommendedMediaCardDoThisLaterClick",value:function(){this.trackRecommendedSectionButtonClicked(ue.DO_THIS_LATER,this.recommendedMediaCategories),this.setState({shouldHideRecommendedMediaCardForCurrentSession:!0})}},{key:"handleRecommendedMediaCardDontShowThisAgainClick",value:function(){this.trackRecommendedSectionButtonClicked(ue.DONT_SHOW_AGAIN,this.recommendedMediaCategories),this.props.setSiteUserPreferences(ge,!0),this.setState({neverShowRecommendedMedia:!0,shouldHideRecommendedMediaCardForCurrentSession:!0})}},{key:"openRecommendedCategoriesSelectWindow",value:function(e){var a=this,t=this.props.userFeedback;t.showQuestion(u.merge({},pe,{feedbackModel:{answer:{tags:I.selectExpandedCategories(e,this.recommendedTopicsList)}}}));var r=t.addListener(D.Closed,function(e){var t=e.closeEventPayload;r.remove();var o=t.closeReason,i=t.questionResult;if(u.isEqual(o,k.Canceled))a.trackRecommendedSectionButtonClicked(ue.FEEDBACK_CANCEL,a.recommendedMediaCategories);else if(u.isEqual(o,k.FinishedFlow)){var n=u.map(u.get(i,["questionAnswer","output","tags"]),"id");a.trackRecommendedSectionButtonClicked(ue.FEEDBACK_APPLY,n),a.handleRecommendedCategoriesApply(n)}})}},{key:"handleRecommendedCategoriesSeeAllButtonClick",value:function(e){this.trackRecommendedSectionButtonClicked(ue.SEE_ALL,this.recommendedMediaCategories),this.openRecommendedCategoriesSelectWindow(e)}},{key:"handleRecommendedMediaSectionSettingsButtonClick",value:function(){this.trackRecommendedSectionButtonClicked(ue.SETTINGS,this.recommendedMediaCategories),this.openRecommendedCategoriesSelectWindow(this.recommendedMediaCategories)}},{key:"handleRecommendedMediaCardThreeDotsClick",value:function(){this.trackRecommendedSectionButtonClicked(ue.DOTS,this.recommendedMediaCategories)}},{key:"handleRecommendedMediaSectionShowMoreButtonClick",value:function(e){this.trackRecommendedSectionButtonClicked(ue.SHOW_MORE,this.recommendedMediaCategories),this.setRecommendedSectionVisibleItemsCount(e)}},{key:"loadRecommendedMedia",value:function(){var n=this,e=I.timeNow();if(this.recommendedMediaLoadingTime={start:e,end:e},this.isRecommendedMediaExperimentEnabled&&!(this.isSearching||this.shouldHideRecommendedMediaCardForCurrentSession||this.isTemplateSite||this.neverShowRecommendedMedia))return Promise.all([this.loadSiteRecommendedTopics(),this.loadAllRecommendedTopics()]).then(function(e){var t=_slicedToArray(e,2),o=t[0],i=t[1];if(u.isEmpty(n.recommendedTopicsList)&&n.setState({recommendedTopicsList:i}),n.setRecommendedMediaCategoriesAndClearRecommendedMediaSection(o),n.saveRecommendedMediaLoadingEndTime(),!u.isEmpty(o))return n.loadRecommendedMediaDataAndCreateSection()})}},{key:"loadRecommendedMediaDataAndCreateSection",value:function(){var t=this,e=F.RECOMMENDED_MEDIA;return this.loadDataAndCreateSection({sectionId:e,sectionDataLoader:this.loadRecommendedSectionData(),sectionOptions:{onItemClick:this.handleItemClick,startItemDrag:this.startItemDrag,getItemPrice:this.getItemPrice,buyItem:this.buyItem},action:function(){t.handleShowMoreButtonClicked(e)}}).then(function(e){return t.setRecommendedSectionLoadWithMocks(!1),t.updateSingleSection(e)}).then(function(){return t.saveRecommendedMediaLoadingEndTime()})}},{key:"handleAddMediaButtonClick",value:function(e){this.trackFedopsInteractionStarted(S.INTERACTIONS.MEDIA_MANAGER_PANEL_ADD_MEDIA_CLICK);var t=function(e){return"external/"+e},o=I.isUploadAddMediaSource(e),i={path:t(e)};I.isImportAddMediaSource(e)&&(i.path=t(re.COMPUTER)),I.isManageAddMediaSource(e)&&(i.path=Z.PRIVATE),this.sendMediaPanelBi(A.UPLOAD_BUTTON_CLICK,{button:o?"section_main":e}),this.openMediaManager(F.SITE_FILES,i,I.generateMediaManagerAddMediaSectionOpenSource(e)),this.trackFedopsInteractionEnded(S.INTERACTIONS.MEDIA_MANAGER_PANEL_ADD_MEDIA_CLICK)}},{key:"handleUploadMediaButtonClick",value:function(){this.trackFedopsInteractionStarted(S.INTERACTIONS.MEDIA_MANAGER_PANEL_ADD_MEDIA_CLICK),this.sendMediaPanelBi(A.UPLOAD_BUTTON_CLICK,{button:"main"}),this.openMediaManager(F.SITE_FILES,{path:"external/"+re.COMPUTER},oe+"_upload_media_button"),this.trackFedopsInteractionEnded(S.INTERACTIONS.MEDIA_MANAGER_PANEL_ADD_MEDIA_CLICK)}},{key:"handleShowMoreButtonClicked",value:function(e){var t=this.state.searchQuery,o=this.sectionToPublicMediaSubcateogyPathMap[e],i=this.isSearching?ie[e](t,o):ne[e](o);I.isRecentlyAddedSection(e)&&!this.isSearching&&(i=u.assign({},i,{path:this.lastUsedPrivateMediaPath})),this.sendEditorBi(m.events.myMediaPanel.my_uploads_panel_section_click,{section:I.sectionIdToBiField(e)}),this.openMediaManager(e,i)}},{key:"componentDidMount",value:function(){var e=this;this.loadSections().then(function(){return e.trackPanelOpened()}),this.loadMediaPricesInfo(),this.openMediaStudioOnMountIfNecessary(),this.openVideoMakerOnMountIfNecessary(),this.openMediaManagerOnMountIfNecessary()}},{key:"openMediaStudio",value:function(){var e=this,t=this.props.mediaStudio;t.once(x.UploadedFile,function(){e.reloadSections()}),t.show({isUpload:!0,mode:N.Transform,initiator:oe})}},{key:"openMediaStudioOnMountIfNecessary",value:function(){this.props.shouldOpenMediaStudioOnMount&&this.openMediaStudio()}},{key:"handleCreateImageActionClicked",value:function(){this.openMediaStudio()}},{key:"openVideoMaker",value:function(){var e=this,t=this.props.videoMaker,o={siteMediaToken:this.props.siteMediaToken,metaSiteId:this.props.metaSiteId,userId:this.props.userId,locale:this.props.language,scenario:c.Scenarios.Generic,template:c.Templates.Empty,videoData:{script:c.VideoScripts.GENERAL_TEMPLATE,business:{},scriptData:{},sources:[]},opener:oe,origin:"EDITOR"};t.open(o),t.once(c.parentIncomingActions.closeRequest,function(){e.reloadSections()})}},{key:"openVideoMakerOnMountIfNecessary",value:function(){this.props.shouldOpenVideoMakerOnMount&&this.openVideoMaker()}},{key:"handleCreateVideoActionClicked",value:function(){this.openVideoMaker()}},{key:"openMediaManagerOnMountIfNecessary",value:function(){this.props.shouldOpenMediaManagerOnMount&&this.openMediaManagerByEditorUrl()}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.reloadTimeout),this.savePanelStateBeforeClose(),this.unsubscribeSocketEvents()}},{key:"initSocketIfNecessary",value:function(){var e=this.socket.getStatus();e!==J.OPENED&&e!==J.OPEN_STARTED&&(this.socket.on("message",this.handleSocketMessage),this.socket.open().catch(u.noop))}},{key:"unsubscribeSocketEvents",value:function(){this.socket.off("message",this.handleSocketMessage)}},{key:"handleSocketMessage",value:function(e){if("status_update"===e.type){var t=e.file,o=t.op_status,i=t.file_name;if(o===$.READY||o===$.FAILED)(this.isFilePresentInSiteFilesSection(i)||!this.isSearching||this.searchQuery===this.purchasableItemSearchQuery)&&(this.resetPurchasableItemSearchQuery(),this.reloadSections())}}},{key:"isFilePresentInSiteFilesSection",value:function(e){var t=this.sections[F.SITE_FILES].items;return u.some(t,["id",e])}},{key:"loadMediaPricesInfo",value:function(){var l=this,e=this.props,t=e.metaSiteId,o=e.metaSiteInstance;Promise.all([I.requestShutterStockItemsPrice(j.SHUTTERSTOCK[B.IMAGE],t,o),I.requestShutterStockItemsPrice(j.SHUTTERSTOCK[B.VIDEO],t,o),I.requestShutterStockItemsPrice(j.WIX[w.PICTURE],t,o),I.requestShutterStockItemsPrice(j.WIX[w.VIDEO],t,o)]).then(function(e){var t,o,i=_slicedToArray(e,4),n=i[0],a=i[1],r=i[2],s=i[3];l.setState({mediaPriceInfo:{shutterStock:(t={},_defineProperty(t,B.IMAGE,n),_defineProperty(t,B.VIDEO,a),t),wix:(o={},_defineProperty(o,w.PICTURE,r),_defineProperty(o,w.VIDEO,s),o)}})}).catch(u.noop)}},{key:"getItemPrice",value:function(e){var t=I.isPublicMediaItem(e);if(t&&!I.isPublicMediaFilePaid(e))return null;var o=this.state.mediaPriceInfo,i=t?o.wix[e.mediaType]:o.shutterStock[ae[e.mediaType]];if(!i)return null;var n=/&#\d+;/.exec(i.currencySymbol);return{value:i.priceValue,symbol:n?u.head(n):null}}},{key:"buyItem",value:function(e,t){var o=this,i=this.props.siteMediaToken;this.sendMediaPanelBi(A.SHUTTERSTOCK_PURCHASE_BUTTON_CLICK,{fileId:e.id,category:e.mediaType,section:I.sectionIdToBiField(t),mediaProducer:I.getMediaProducer(e)}),this.initSocketIfNecessary(),this.trackFedopsInteractionStarted(S.INTERACTIONS.MEDIA_MANAGER_PANEL_BUY_ITEM);var n=I.isPublicMediaItem(e);(this.isNewCheckoutFlowExperimentEnabled?M.purchaseItemNewFlow(e,{siteToken:i,origin:oe,tab:oe+"-"+t+(this.isSearching?"-search":""),locale:this.props.language,publicMediaRoot:u.values(Y).join(",")}):n?M.buyWixMediaItem(e,{siteMediaToken:i}):M.buyShutterStockItem(e,{siteMediaToken:i,shutterStockPaymentAPI:X})).then(function(e){o.purchasableItemSearchQuery=o.searchQuery,o.sendMediaPanelBi(A.MEDIA_PURCHASE_COMPLETED,{fileId:e.id,name:e.name,section:I.sectionIdToBiField(t),mediaType:e.mediaType,mediaProducer:I.getMediaProducer(e),fileFormat:I.getFileExtension(e)}),o.trackFedopsInteractionEnded(S.INTERACTIONS.MEDIA_MANAGER_PANEL_BUY_ITEM)}).catch(function(){o.trackFedopsInteractionEnded(S.INTERACTIONS.MEDIA_MANAGER_PANEL_BUY_ITEM)})}},{key:"startSearch",value:function(e){var t=this,o=this.state,i=o.isSearching,n=o.searchQuery,a=e.length;(!i&&a||i&&e!==n)&&(this.searchTimeStart=I.timeNow(),this.setState({isSearching:Boolean(a),areAllRegularSectionsLoaded:!1,searchQuery:e},function(){t.sendMediaPanelBi(A.SEARCH_START,{target:e}),t.trackFedopsInteractionStarted(S.INTERACTIONS.MEDIA_MANAGER_PANEL_SEARCH),t.loadSections().then(function(){return t.trackSearchFinish()})}))}},{key:"trackSearchFinish",value:function(){this.sendMediaPanelBi(A.SEARCH_FINISH,{target:this.searchQuery,success:!this.hasFoundNothing,loadingTime:I.timeNow()-this.searchTimeStart,jsonData:this.sectionsJSONData}),this.trackFedopsInteractionEnded(S.INTERACTIONS.MEDIA_MANAGER_PANEL_SEARCH)}},{key:"clearSearch",value:function(){var e=this;this.isSearching&&(this.trackFedopsInteractionStarted(S.INTERACTIONS.MEDIA_MANAGER_PANEL_CLEAR_SEARCH),this.sendMediaPanelBi(A.SEARCH_CANCEL,{target:this.state.searchQuery}),this.setState({isSearching:!1,areAllRegularSectionsLoaded:!1,searchQuery:""},function(){e.loadSections()}),this.trackFedopsInteractionEnded(S.INTERACTIONS.MEDIA_MANAGER_PANEL_CLEAR_SEARCH))}},{key:"createEmptySection",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=this.isMediaFromWixExperimentEnabled,i=this.isSearching,n=u.assign({shouldDisplayPresetName:!1},t);return{id:e,title:b((o?i?V:G:i?H:U)[e]),items:[],action:null,options:n}}},{key:"clearRecommendedMediaSection",value:function(){return this.clearSingleSection(F.RECOMMENDED_MEDIA,{shouldShowLoaderWhenNoItems:!0,mockLoadingItemsCount:this.isRecommendedSectionLoadWithMocks?q:0})}},{key:"loadDataAndCreateSection",value:function(e){var a=this,r=e.sectionId,t=e.sectionDataLoader,o=e.sectionOptions,s=void 0===o?{}:o,l=e.action;return t.then(function(e){var t=e.data,o=e.paging,i=e._folderId,n=a.createEmptySection(r);return n.items=t,n.options=u.assign({folderId:i},s),n.action=l||(o.cursor?function(){a.handleShowMoreButtonClicked(r)}:null),n})}},{key:"loadRecommendedSectionData",value:function(){return this.recommendedMediaAdapter.items.list({cacheId:this.recommendedMediaCacheId,wixMediaRoots:de,paging:{size:z}})}},{key:"loadRecentlyAddedSectionData",value:function(){return this.privateMediaAdapter.items.recent(u.assign({},fe,{mediaType:u.values(w).join(",")}))}},{key:"searchRecentlyAddedSectionData",value:function(e){return this.privateMediaAdapter.items.search(null,e,u.assign({},fe,{mediaType:u.values(w).join(",")}))}},{key:"getPublicMediaFoldersTree",value:function(){var o=this;return this.publicMediaFoldersTreePromise||(this.publicMediaFoldersTreePromise=this.publicMediaAdapter.folders.tree(Y.IMAGES+","+Y.VECTOR_ART+","+Y.ILLUSTRATIONS+","+Y.SOCIAL_ICONS+","+Y.VIDEOS,{levels:-1}).then(u.once(function(e){var t=e.data;return o.publicMediaSubCategoryPublicMediaRootMap=I.mapPublicMediaSubcategoryToRoot(t),t}))),this.publicMediaFoldersTreePromise}},{key:"getPublicMediaSubcategoryInfo",value:function(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return this.getPublicMediaFoldersTree().then(function(e){var t=u.find(e,{id:n}),o=u.get(t,"subFolders["+a+"]"),i=u.get(o,"subFolders["+r+"]");return{categoryId:o.id,id:i.id}})}},{key:"saveCategoryInfoToPublicMediaPathsMap",value:function(e,t){return this.sectionToPublicMediaSubcateogyPathMap[t]=e.categoryId+"/"+e.id,e}},{key:"loadWixSectionData",value:function(o,t){var i=this;return this.getPublicMediaSubcategoryInfo(o).then(function(e){return i.saveCategoryInfoToPublicMediaPathsMap(e,t),e.id}).then(function(t){var e=u.assign({},fe,{language:i.props.language,mediaType:K[o]},i.isMediaFromWixExperimentEnabled?{filters:{pricing:"all"}}:{filters:{pricing:"free"}});return i.publicMediaAdapter.items.list(t,e).then(function(e){return u.assign({},e,{_folderId:t})})})}},{key:"searchWixSectionData",value:function(e,o,t){var i=this;return this.getPublicMediaSubcategoryInfo(e).then(function(e){return i.saveCategoryInfoToPublicMediaPathsMap(e,t),e.id}).then(function(t){return i.publicMediaAdapter.items.search(t,o,u.assign({},fe,{language:i.props.language,mediaType:K[e]},i.isMediaFromWixExperimentEnabled?{filters:{pricing:"all"}}:{filters:{pricing:"free"}})).then(function(e){return u.assign({},e,{_folderId:t})})})}},{key:"loadInitialWixMediaItemsFullInfoAndUpdateSections",value:function(){var t=this,e=u([].concat(_toConsumableArray(se),[F.RECOMMENDED_MEDIA])).map(function(e){return t.sections[e]}).compact().value();return this.loadWixMediaItemsFullInfoAndUpdateSections(e)}},{key:"loadWixMediaItemsFullInfoAndUpdateSections",value:function(t){var o=this,e=u.join(I.filterOutSectionsItemsIds(t,function(e){return I.isPublicMediaItem(e)&&I.isVideoItem(e)}),",");if(!u.isEmpty(e))return this.loadWixMediaItemsFullInfo(e).then(function(e){o.updateSectionsWithWixMediaItemsFullInfo(t,e)})}},{key:"loadWixMediaItemsFullInfo",value:function(e){return this.publicMediaAdapter.item.get(e,{language:this.props.language}).then(function(e){return u.keyBy(e.data,"id")})}},{key:"updateSectionsWithWixMediaItemsFullInfo",value:function(e,n){var t=u.reduce(e,function(e,t){var o=u.map(t.items,function(e){return n[e.id]||e}),i=u.assign({},t,{items:o});return u.assign(e,_defineProperty({},t.id,i))},{}),o=u.assign({},this.sections,t);this.setSections(o)}},{key:"_loadItemsRecursively",value:function(n,a){var r=this,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return n(a).then(function(e){var t=e.data,o=e.paging,i=u.take([].concat(_toConsumableArray(s),_toConsumableArray(t)),W);return i.length>=W||null===o.cursor?u.assign({},e,{data:i}):r._loadItemsRecursively(n,u.merge({paging:o},a),i)})}},{key:"loadShutterStockSectionData",value:function(t){var o=this;return this._loadItemsRecursively(function(e){return o.shutterStockAdapter.items.list(t+"_any_any",e)},fe)}},{key:"searchShutterStockSectionData",value:function(t,o){var i=this;return this._loadItemsRecursively(function(e){return i.shutterStockAdapter.items.search(t+"_any_any",o,e)},fe)}},{key:"loadSections",value:function(){var t=this,e=this.isSearching;this.trackFedopsInteractionStarted(S.INTERACTIONS.MEDIA_MANAGER_PANEL_LOAD_DATA),this.setRecommendedSectionLoadWithMocks(!0),this.sectionsGaps=null;var o=this.createGeneralSectionsSettings(),i=e?this.createSearchingSectionsSettings():[],n=u.map([].concat(_toConsumableArray(o),_toConsumableArray(i)),this.loadDataAndCreateSection);return Promise.all(n).then(function(e){return I.sectionsListToObj(e)}).then(function(e){return t.setSections(e)}).then(function(){return t.setAllRegularSectionsLoaded()}).then(function(){return t.saveRegularSectionsLoadingFinishTime()}).then(function(){return t.selectNavigationSection(0)}).then(function(){return t.loadRecommendedMedia()}).then(function(){return t.loadInitialWixMediaItemsFullInfoAndUpdateSections()}).then(function(){return t.trackFedopsInteractionEnded(S.INTERACTIONS.MEDIA_MANAGER_PANEL_LOAD_DATA)}).catch(function(e){return t.handleLoadingError(e)})}},{key:"reloadSections",value:function(){var e=this;this.setState({areAllRegularSectionsLoaded:!1,loadingError:null},function(){e.loadSections()})}},{key:"createSearchingSectionsSettings",value:function(){var e=this.searchQuery;return[{sectionId:F.WIX_ILLUSTRATIONS,sectionDataLoader:this.searchWixSectionData(Y.ILLUSTRATIONS,e,F.WIX_ILLUSTRATIONS),sectionOptions:{onItemClick:this.handleItemClick,startItemDrag:this.startItemDrag,getItemPrice:this.getItemPrice,buyItem:this.buyItem}},{sectionId:F.WIX_VECTOR_ART,sectionDataLoader:this.searchWixSectionData(Y.VECTOR_ART,e,F.WIX_VECTOR_ART),sectionOptions:{onItemClick:this.handleItemClick,startItemDrag:this.startItemDrag,getItemPrice:this.getItemPrice,buyItem:this.buyItem}},{sectionId:F.WIX_SOCIAL_ICONS,sectionDataLoader:this.searchWixSectionData(Y.SOCIAL_ICONS,e,F.WIX_SOCIAL_ICONS),sectionOptions:{onItemClick:this.handleItemClick,startItemDrag:this.startItemDrag,getItemPrice:this.getItemPrice,buyItem:this.buyItem,shouldPresetHaveBlueBackground:!0}}]}},{key:"createGeneralSectionsSettings",value:function(){var e=this.isSearching,t=this.searchQuery;return[{sectionId:F.SITE_FILES,sectionDataLoader:e?this.searchRecentlyAddedSectionData(t):this.loadRecentlyAddedSectionData(),sectionOptions:{shouldDisplayPresetName:!0,onItemClick:this.handleItemClick,startItemDrag:this.startItemDrag}},{sectionId:F.WIX_IMAGES,sectionDataLoader:e?this.searchWixSectionData(Y.IMAGES,t):this.loadWixSectionData(Y.IMAGES,F.WIX_IMAGES),sectionOptions:{onItemClick:this.handleItemClick,startItemDrag:this.startItemDrag,getItemPrice:this.getItemPrice,buyItem:this.buyItem}},{sectionId:F.WIX_VIDEOS,sectionDataLoader:e?this.searchWixSectionData(Y.VIDEOS,t):this.loadWixSectionData(Y.VIDEOS,F.WIX_VIDEOS),sectionOptions:{onItemClick:this.handleItemClick,startItemDrag:this.startItemDrag,getItemPrice:this.getItemPrice,buyItem:this.buyItem}},{sectionId:F.SHUTTERSTOCK_IMAGES,sectionDataLoader:e?this.searchShutterStockSectionData(B.IMAGE,t):this.loadShutterStockSectionData(B.IMAGE),sectionOptions:{getItemPrice:this.getItemPrice,buyItem:this.buyItem}},{sectionId:F.SHUTTERSTOCK_VIDEOS,sectionDataLoader:e?this.searchShutterStockSectionData(B.VIDEO,t):this.loadShutterStockSectionData(B.VIDEO),sectionOptions:{getItemPrice:this.getItemPrice,buyItem:this.buyItem}}]}},{key:"openMediaManager",value:function(o){var i=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";this.props.mediaManager.open(this.props.mediaManagerCategories.ALL_MEDIA,t||I.generateMediaManagerOpenSource(o,this.isSearching),u.assign({multiSelect:!0,callback:function(e,t){return i.onMediaManagerSessionEnded(o,e,t)}},e))}},{key:"openMediaManagerByEditorUrl",value:function(){var e=this.props.mediaManagerOpenPathSourceOnMount,t=oe+"_by_editor_url",o={path:I.generateMediaManagerOpenPathFromUrlParam(e)},i=I.getMediaManagerSectionIdBasedOnUrlParam(e);this.openMediaManager(i,o,t)}},{key:"onMediaManagerSessionEnded",value:function(e,t,o){u.isEmpty(t)?this.onMediaManagerClosed():this.onItemsSelected(e,t,o)}},{key:"onMediaManagerClosed",value:function(){this.reloadSections()}},{key:"onItemsSelected",value:function(t,e,o){var i=this;this.props.editorResetPastePosition(),I.isRecentlyAddedSection(t)&&this.setSessionUserPreferences("last_media_path_"+t,o.path||"");var n=u.last(e),a=I.extractFolderIdFromPath(o.path),r=this.isSocialIconsRoot(a),s={addingMethod:le.MEDIA_MANAGER};r?this.addComposedComponent(t,a,e,o,s):u.forEach(e,function(e){i.addSingleComponent(t,a,e,o,u.assign({isLast:u.isEqual(e,n)},s))}),this.props.editorSetFocusToEditor()}},{key:"getCompDef",value:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=I.getComponentStructureCreator(e,{isSocialIcon:this.isSocialIconsRoot(t)});if(u.isFunction(i))return i(e,o,this.props.editorBuildDefaultComponentStructure);a.log.error("Unsupported media type",e.mediaType)}},{key:"getComposedCompDef",value:function(e,t){var o=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).folderId,i=I.getComposedComponentStructureCreator({isSocialIcon:this.isSocialIconsRoot(o)});if(i)return i(e,t);a.log.error("Unsupported composed component definition",u.map(e,"mediaType").join(","))}},{key:"trackComponentAddedToStage",value:function(e){var t=e.presetId,o=e.category,i=e.componentId,n=e.componentType,a=e.presetTags,r=e.sectionId,s=e.addingMethod,l=void 0===s?le.CLICK:s,c=e.presetSkin,p=e.targetComponentType,d=void 0===p?null:p,u=I.sectionIdToBiField(r);this.sendEditorBi(m.events.addPanel.COMPONENT_ADDED_TO_STAGE,{origin:oe,category:o,section:this.isSearching?u+"_search":u,component_type:n,component_id:i,preset_id:t,adding_method:l,preset_data_skin:c,preset_data_tags:I.tagsToString(a),page_id:this.props.focusedPageId,target_component:d})}},{key:"addSingleComponent",value:function(a,e,r,t){var s=this,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};this.trackFedopsInteractionStarted(S.INTERACTIONS.ADD_COMP_FROM_MEDIA_MANAGER_PANEL);var o=l.pastePosition,i=l.isLast,c=void 0===i||i,n=l.targetComponentRef,p=void 0===n?{}:n,d=l.compDef||this.getCompDef(r,e,t);d&&this.addComponent(d,t,{uri:r.uri,pastePosition:o}).then(function(e){if(c&&(s.props.editorSelectComponentByCompRef(e),s.props.editorAddHistory("added component")),s.trackComponentAddedToStage({addingMethod:l.addingMethod,presetId:r.id,category:r.mediaType,componentId:e.id,componentType:d.componentType,presetTags:r.labels,presetSkin:I.getComponentStructureSkin(d),targetComponentType:s.props.editorGetComponentType(p),sectionId:I.generateBiSectionId(a,r)}),r.mediaType===w.SHAPE){var t=s.props.editorGetSvgInfoFromCache(r.uri).svgType;if(u.includes(["shape","tint"],t)){var o=R.color1,i=s.props.editorGetComponentDesign(e),n=u.assign({},i,{overrideColors:{color1:o}});s.props.editorUpdateComponentDesign(e,n,!0,!0)}}s.trackFedopsInteractionEnded(S.INTERACTIONS.ADD_COMP_FROM_MEDIA_MANAGER_PANEL)})}},{key:"addComposedComponent",value:function(o,e,i,t,n){var a=this;this.trackFedopsInteractionStarted(S.INTERACTIONS.ADD_COMP_FROM_MEDIA_MANAGER_PANEL);var r=this.getComposedCompDef(i,t,{folderId:e});r&&this.addComponent(r,t).then(function(e){var t=_slicedToArray(i,1)[0];a.props.editorSelectComponentByCompRef(e),a.props.editorAddHistory("added component"),a.trackComponentAddedToStage({presetId:u.map(i,"id").join(","),category:t.mediaType,componentId:e.id,componentType:r.componentType,sectionId:I.generateBiSectionId(o,u.head(i)),presetSkin:I.getComponentStructureSkin(r),addingMethod:n.addingMethod}),a.trackFedopsInteractionEnded(S.INTERACTIONS.ADD_COMP_FROM_MEDIA_MANAGER_PANEL)})}},{key:"addComponent",value:function(t,e){var o=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=this.props.focusedPageReference,a=i.pastePosition||this.props.editorGetPasteComponentPosition(t.layout);return u.merge(t.layout,a),i.uri&&this.setSessionUserPreferences("last_media_path_"+i.uri,e.path||""),this.closePanel(),new Promise(function(e){return o.props.editorAddComponent(t,n,e)})}},{key:"saveRegularSectionsLoadingFinishTime",value:function(){this.regularSectionsLoadingFinishTime=I.timeNow()}},{key:"saveRecommendedMediaLoadingEndTime",value:function(){this.recommendedMediaLoadingTime.end=I.timeNow()}},{key:"getRecommendedMediaPresenceType",value:function(){return!this.isRecommendedMediaExperimentEnabled||this.neverShowRecommendedMedia?me.NO:u.isEmpty(this.recommendedMediaCategories)?me.AS_CARD:me.AS_SECTION}},{key:"trackPanelOpened",value:function(){var e=this.recommendedMediaLoadingTime,t=this.regularSectionsLoadingFinishTime-this.openTimeStart,o=this.isPanelLoadedWithError?0:e.end-e.start,i=this.getRecommendedMediaPresenceType();this.sendMediaPanelBi(A.OPENED,{jsonData:this.sectionsJSONData,loadingTime:t,loadingTimeRecommended:o,recommendedSectionExists:i,recentlySectionExists:this.hasRecentlyAddedSection})}},{key:"trackRecommendedSectionButtonClicked",value:function(e,t){this.sendMediaPanelBi(A.RECOMMENDED_BUTTON_CLICK,{button_name:e,target:oe,origin:oe,selection:u.join(t,","),editor_working_mode:this.props.editorWorkingMode,viewmode:this.props.editorWorkingMode})}},{key:"sendMediaPanelBi",value:function(e,t){this.props.sendBi(e,u.assign({},{msid:this.props.metaSiteId},t))}},{key:"sendEditorBi",value:function(e,t){this.props.sendBi(e,u.assign({},{site_id:this.props.siteId},t))}},{key:"trackFedopsInteractionStarted",value:function(e){S.interactionStarted(e)}},{key:"trackFedopsInteractionEnded",value:function(e){S.interactionEnded(e)}},{key:"prepareItemBeforeAddComponent",value:function(e){return I.prepareItemBeforeAddComponent(e)}},{key:"handleItemClick",value:function(e){var t=e.id,o=e.folderId,i=e.item;this.trackFedopsInteractionStarted(S.INTERACTIONS.MEDIA_MANAGER_PANEL_ITEM_CLICK);var n=this.isSearching?ie:ne,a=I.isRecentlyAddedSection(t)?{path:this.lastUsedPrivateMediaPath}:n[t](this.searchQuery),r=this.prepareItemBeforeAddComponent(i);this.addSingleComponent(t,o,r,a),this.trackFedopsInteractionEnded(S.INTERACTIONS.MEDIA_MANAGER_PANEL_ITEM_CLICK)}},{key:"startItemDrag",value:function(e){var i=this,n=e.id,a=e.folderId,t=e.event,o=e.dragItemInfo,r=o.item,s=o.rect;this.trackFedopsInteractionStarted(S.INTERACTIONS.MEDIA_MANAGER_PANEL_START_DRAG_ITEM);var l=this.prepareItemBeforeAddComponent(r),c=this.getCompDef(l,a),p={dragOrigin:oe,itemId:l.id,tags:I.tagsToString(l.labels),rect:s,structure:c,categoryId:l.mediaType,sectionTitle:I.sectionIdToBiField(n),onDrop:function(e,t,o){i.addSingleComponent(n,a,l,{},{isLast:!0,pastePosition:e,compDef:c,addingMethod:le.DRAG,targetComponentRef:o})}};this.props.startItemDrag(t,p),this.trackFedopsInteractionEnded(S.INTERACTIONS.MEDIA_MANAGER_PANEL_START_DRAG_ITEM)}},{key:"_sectionToAnchorNavigationSection",value:function(e){var t=e.id;return{id:t,title:(this.isMediaFromWixExperimentEnabled?te:ee)[t],sectionName:e.title,help:{hide:!0,text:""},hide:!1,showSectionHeader:!0,type:"MEDIA_MANAGER_PANEL_SECTION"}}},{key:"getAnchorsNavigationProps",value:function(){var t=this;if(this.isSearching)return null;var e=u.map(this.visibleSections,function(e){return t._sectionToAnchorNavigationSection(e)});return{categoryId:"MEDIA_MANAGER_PANEL_CATEGORY",allSections:e,sectionsWithHeaders:e,selected:this.state.selectedNavigationSection,notifyCategoryViewOnStateChange:u.noop,setTopSection:this.selectNavigationSection.bind(this)}}},{key:"toggleSearchBoxState",value:function(e){e<=50&&this.isSearchBoxSticky&&this.setState({isSearchBoxSticky:!1}),50<e&&!this.isSearchBoxSticky&&this.setState({isSearchBoxSticky:!0})}},{key:"selectNavigationSection",value:function(e){if(!this.isSearching){var t=this.visibleSections[e];if(t){var o=this.customScrollRef.getScrolledElement();if(o){this.setSelectedNavigationSection(t),this.animationInProcess=!0;var i=this.getSectionInstance(t.id).offsetTop-this.customScrollOffsetTop;this.toggleSearchBoxState(i),n.scrollTo({y:i},.5,0,o,function(){this.animationInProcess=!1}.bind(this))}}}}},{key:"onScroll",value:function(e){var t=this;if(!this.animationInProcess){var o=e.target.scrollTop;if(this.toggleSearchBoxState(o),!this.isSearching){var i=this.visibleSections,n=this.customScrollOffsetTop;this.sectionsGaps||(this.sectionsGaps=I.shiftDOMInstanceIntervals(I.transformSectionsDOMInstancesToDimensionIntervals(u.map(i,function(e){return t.getSectionInstance(e.id)})),n));var a=i[I.getTopVisibleSectionIndex(this.sectionsGaps,o,this.customScrollInstance.offsetHeight)];a!==this.state.selectedNavigationSection&&this.setSelectedNavigationSection(a)}}}},{key:"handleSearchBlur",value:function(e){this.trackFedopsInteractionStarted(S.INTERACTIONS.MEDIA_MANAGER_PANEL_BLUR_SEARCH),e.length||this.clearSearch(),this.trackFedopsInteractionEnded(S.INTERACTIONS.MEDIA_MANAGER_PANEL_BLUR_SEARCH)}},{key:"closePanel",value:function(){this.props.editorClosePanel(this.props.panelName)}},{key:"render",value:function(){return y.call(this)}},{key:"panelTitle",get:function(){return b(L)}},{key:"sections",get:function(){return this.state.sections}},{key:"areAllRegularSectionsLoaded",get:function(){return this.state.areAllRegularSectionsLoaded}},{key:"isSearching",get:function(){return this.state.isSearching}},{key:"searchQuery",get:function(){return this.state.searchQuery}},{key:"isPanelLoadedWithError",get:function(){return Boolean(this.state.loadingError)}},{key:"hasFoundNothing",get:function(){return this.isSearching&&this.areAllRegularSectionsLoaded&&!this.hasSectionItems()}},{key:"tryAgainButtonText",get:function(){return b("Media_Panel_Server_Error_Link")}},{key:"isNotAuthorized",get:function(){var e=this.state.loadingError;return Boolean(e)&&401===e.code||403===e.code}},{key:"loaderText",get:function(){return this.state.isSearching?"Media_Panel_Results_Loader":"Media_Panel_Loading"}},{key:"errorTitle",get:function(){return this.isNotAuthorized?"Media_Panel_Error_Timed_Out_Title":"Media_Panel_Server_Error_Title"}},{key:"errorText",get:function(){return this.isNotAuthorized?"Media_Panel_Error_Timed_Out_Text":"Media_Panel_Server_Error_Text"}},{key:"hasRecentlyAddedSection",get:function(){return Boolean(u.get(this.sections[F.SITE_FILES],"items.length",0))}},{key:"sectionsJSONData",get:function(){var n=this.sections,e=this.sectionsOrder,t=u.reduce(e,function(e,t){var o=u.get(n,t,{}),i=u.map(u.get(o,"items",[]),"id");return i.length?u.assign({},e,_defineProperty({},I.sectionIdToBiField(t),i)):e},{});return JSON.stringify(t)}},{key:"selectedNavigationSection",get:function(){return this.state.selectedNavigationSection}},{key:"customScrollOffsetTop",get:function(){return this.customScrollInstance.offsetTop||0}},{key:"customScrollInstance",get:function(){return o.findDOMNode(this.customScrollRef)}},{key:"customScrollRef",get:function(){return this.refs.customScroll}},{key:"visibleSections",get:function(){var i=this,n=this.state.sections;return u.reduce(this.sectionsOrder,function(e,t){if(i.isAddMediaSection(t))return[].concat(_toConsumableArray(e),[i.addMediaSection]);if(i.isCreateMediaSection(t)&&i.createMediaSectionCanBeShown())return[].concat(_toConsumableArray(e),[i.createMediaSection]);var o=n[t];return o&&!u.isEmpty(o.items)?[].concat(_toConsumableArray(e),[o]):e},[])}},{key:"shouldRenderNavigation",get:function(){return!this.isSearching&&this.areAllRegularSectionsLoaded&&this.selectedNavigationSection}},{key:"lastUsedPrivateMediaPath",get:function(){return this.getSessionUserPreferences("last_media_path_"+F.SITE_FILES)||Z.PRIVATE}},{key:"isMediaFromWixExperimentEnabled",get:function(){return r.isOpen("se_mediaPanelShowPaidMediaFromWix")}},{key:"isRecommendedMediaExperimentEnabled",get:function(){return r.isOpen("se_mediaPanelShowRecommendedMedia")}},{key:"isExtendedSearchExperimentEnabled",get:function(){return r.isOpen("se_mediaPanelExtendedSearch")}},{key:"isShowCreateMediaSectionExperimentEnabled",get:function(){return r.isOpen("se_mediaPanelShowCreateMediaSection")}},{key:"isAddSectionShouldBeFirstExperimentEnabled",get:function(){var e=r.getValue("se_mediaPanelAddSection");return"B"===e||"C"===e}},{key:"isNewAddSectionExperimentEnabled",get:function(){return"C"===r.getValue("se_mediaPanelAddSection")}},{key:"isNewCheckoutFlowExperimentEnabled",get:function(){return r.isOpen("specs.media-manager-g6.NewCheckout")}},{key:"isSearchBoxSticky",get:function(){return this.state.isSearchBoxSticky}},{key:"searchPlaceholder",get:function(){return this.isExtendedSearchExperimentEnabled?"Media_Panel_Search_Media_Placeholder":null}},{key:"recommendedTopicsList",get:function(){return this.state.recommendedTopicsList}},{key:"recommendedCardTopics",get:function(){var t=u.keyBy(this.recommendedTopicsList,"id");return u(ce).map(function(e){return t[e]}).compact().value()}},{key:"isRecommendedSectionLoadWithMocks",get:function(){return this.state.isRecommendedSectionLoadWithMocks}},{key:"shouldRenderRecommendedMediaCard",get:function(){var e=this.recommendedMediaCategories;return!this.shouldHideRecommendedMediaCardForCurrentSession&&!this.neverShowRecommendedMedia&&!this.isSearching&&!u.isNull(e)&&u.isEmpty(e)}},{key:"recommendedMediaCategories",get:function(){return this.state.recommendedMediaCategories}},{key:"recommendedMediaCacheId",get:function(){return this.state.recommendedMediaCacheId}},{key:"recommendedSectionVisibleItemsCount",get:function(){return this.state.recommendedSectionVisibleItemsCount}},{key:"shouldHideRecommendedMediaCardForCurrentSession",get:function(){return this.state.shouldHideRecommendedMediaCardForCurrentSession}},{key:"neverShowRecommendedMedia",get:function(){return this.state.neverShowRecommendedMedia}},{key:"isTemplateSite",get:function(){return this.props.isTemplateSite||I.isSiteMediaTokenFromTemplateSite(this.props.siteMediaToken)}}]),p}();ve.propTypes={siteMediaToken:e.string.isRequired,siteId:e.string.isRequired};var Se=u.flowRight(P(C,h.mapStateToProps,h.mapDispatchToProps),T)(ve);return Se.pure=ve,Se}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgImageSettingsPanel.rt",["react","lodash","baseUI","baseUILib","santa-editor-symbols","panels","experiment","util"],function(n,a,r,s,e,l,t,c){"use strict";return function(){return function(){var e,t,o,i=this.props.getData();return n.createElement(l.frames.toolPanelFrame,a.assign({},{helpId:"54c7eb1c-a6c7-46c9-9261-96eecf3bb0eb",contentWrapperClass:"background-image-settings-panel background-sub-panel",headerTitle:c.translate("BGPP_SETTINGS_IMAGE_PANEL_HEADER_TITLE")},a.omit(this.props,"children")),n.createElement(s.CustomScroll,{},n.createElement("div",{className:"bg-image-settings-panel-scrollbox bg-settings-panel-scrollbox"},n.createElement(r.slider,{valueLink:this.linkedBackgroundOpacityData(i),label:"BGPP_SETTINGS_IMAGE_OPACITY_TITLE",min:0,max:100,step:1}),n.createElement(s.Divider,{long:!0}),n.createElement("div",{className:"color-picker-input-wrapper"},n.createElement(r.colorPickerInput,(e={label:"BGPP_SETTINGS_IMAGE_BG_COLOR_TITLE",ref:"bgColorPickerInput",className:"label-left",valueLink:this.linkedBackgroundColor(i,i.ref,"color")},t=this.getColorPickerProps(),o=a.assign({},e,t),e.hasOwnProperty("style")&&(o.style=a.defaults(o.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(o.className=t.className+" "+e.className),o))),n.createElement(s.Divider,{long:!0}),n.createElement(r.sectionDividerLabeled,{label:"BGPP_SETTINGS_IMAGE_SCROLL_SECTION_TITLE",infoText:"BGPP_SETTINGS_IMAGE_SCROLL_SECTION_TOOLTIP"}),n.createElement(s.Divider,{long:!0}),n.createElement(s.Composites.Thumbnails,{},n.createElement(s.Thumbnails,{value:this.linkedBackgroundScrollType(i).value,onChange:this.linkedBackgroundScrollType(i).requestChange,className:"with-labels",maxThumbsPerRow:3,options:this.getEffectsThumbOptions()})),n.createElement(s.Divider,{long:!0}),n.createElement(r.sectionDividerLabeled,{label:"BGPP_SETTINGS_IMAGE_LAYOUT_SECTION_TITLE"}),n.createElement(s.Divider,{long:!0}),n.createElement.apply(this,[r.dropDown.select,{valueLink:this.linkedBackgroundFittingType(i),label:"BGPP_SETTINGS_IMAGE_FITTING_TITLE"},a.map(this.getFittingOptions(i.ref.scrollType),function(e,t,o){return n.createElement(r.dropDown.option,{key:"fittingTypeOption"+o,value:t.value},t.label)}.bind(this,i))]),n.createElement(s.Divider,{long:!0}),n.createElement(r.alignment,{options:r.commonData.ALIGNMENT_MODES_XY,valueLink:this.linkedBackgroundAlignType(i),label:"BGPP_SETTINGS_IMAGE_ALIGN_TITLE"}))))}.apply(this,[])}}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgImageSettingsPanel",["core","create-react-class","prop-types","lodash","react","santa-editor-symbols","util","panelUtils","rEditor/bi/bi","stateManagement","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgImageSettingsPanel.rt"],function(e,t,o,r,i,n,a,s,l,c,p){"use strict";var d=a.backgroundUtils,u=a.imageTransform.fittingTypes,g=[{label:"BGPP_SETTINGS_IMAGE_FITTING_SCALE_TO_FILL",value:u.SCALE_TO_FILL},{label:"BGPP_SETTINGS_IMAGE_FITTING_SCALE_TO_FIT",value:u.SCALE_TO_FIT},{label:"BGPP_SETTINGS_IMAGE_FITTING_ORIGINAL_SIZE",value:u.LEGACY_BG_NORMAL},{label:"BGPP_SETTINGS_IMAGE_FITTING_TILE",value:u.LEGACY_BG_FIT_AND_TILE},{label:"BGPP_SETTINGS_IMAGE_FITTING_TILE_HORIZONTALLY",value:u.LEGACY_BG_FIT_AND_TILE_HORIZONTAL},{label:"BGPP_SETTINGS_IMAGE_FITTING_TILE_VERTICALLY",value:u.LEGACY_BG_FIT_AND_TILE_VERTICAL}],m=[{label:"BGPP_SETTINGS_IMAGE_FITTING_SCALE_TO_FILL",value:u.SCALE_TO_FILL},{label:"BGPP_SETTINGS_IMAGE_FITTING_STRETCH",value:u.STRETCH},{label:"BGPP_SETTINGS_IMAGE_FITTING_SCALE_TO_FIT",value:u.SCALE_TO_FIT},{label:"BGPP_SETTINGS_IMAGE_FITTING_TILE",value:u.LEGACY_BG_FIT_AND_TILE}],f=[{label:"BGPP_SETTINGS_IMAGE_FITTING_SCALE_TO_FILL",value:u.SCALE_TO_FILL},{label:"BGPP_SETTINGS_IMAGE_FITTING_SCALE_TO_FIT",value:u.SCALE_TO_FIT},{label:"BGPP_SETTINGS_IMAGE_FITTING_TILE",value:u.LEGACY_BG_FIT_AND_TILE}],h=r.transform([{label:"BGPP_SETTINGS_IMAGE_FITTING_ORIGINAL_SIZE",value:u.LEGACY_BG_NORMAL},{label:"BGPP_SETTINGS_IMAGE_FITTING_TILE_HORIZONTALLY",value:u.LEGACY_BG_FIT_AND_TILE_HORIZONTAL},{label:"BGPP_SETTINGS_IMAGE_FITTING_TILE_VERTICALLY",value:u.LEGACY_BG_FIT_AND_TILE_VERTICAL}],function(e,t){e[t.value]=t},{}),y=[{value:"scroll",label:"BGPP_SETTINGS_IMAGE_SCROLL_NONE",illustration:i.createElement(n.symbol,{name:"thumb-none"})},{value:"parallax",label:"BGPP_SETTINGS_IMAGE_SCROLL_PARALLAX",illustration:i.createElement(n.symbol,{name:"scroll-fx-site-bg-parallax"})},{value:"fixed",label:"BGPP_SETTINGS_IMAGE_SCROLL_FREEZE",illustration:i.createElement(n.symbol,{name:"scroll-fx-site-bg-freeze"})}],b=[{value:"scroll",label:"BGPP_SETTINGS_IMAGE_SCROLL_NONE",illustration:i.createElement(n.symbol,{name:"thumb-none"})},{value:"fixed",label:"BGPP_SETTINGS_IMAGE_SCROLL_FREEZE",illustration:i.createElement(n.symbol,{name:"scroll-fx-site-bg-freeze"})}],v=[{label:"BGPP_SETTINGS_IMAGE_FITTING_SCALE_TO_FILL",value:u.SCALE_TO_FILL},{label:"BGPP_SETTINGS_IMAGE_FITTING_TILE",value:u.LEGACY_BG_FIT_AND_TILE}],S=[u.LEGACY_BG_FIT_AND_TILE,u.LEGACY_BG_FIT_AND_TILE_HORIZONTAL,u.LEGACY_BG_FIT_AND_TILE_VERTICAL],E={opacity:1,fittingType:u.SCALE_TO_FILL,alignType:"center",scrollType:"scroll"};function P(e){var t=e.dsRead.pages.getPrimaryPageId();e.store.dispatch(c.editorPlugins.userPreferences.actions.setSessionUserPreferences("bg_image_settings_data_changed_"+t,!0))}return t({displayName:"bgImageSettingsPanel",mixins:[e.mixins.editorAPIMixin,s.linkColorPickerMixin],childContextTypes:{reportUIChange:o.func},getInitialState:function(){return this.lastScrollingType=null,{}},shouldComponentUpdate:function(e){var t=this.getEditorAPI(),o=e.getData();return!(!o.ref.mediaRef||"Image"!==o.ref.mediaRef.type)||(t.panelManager.closePanelByName(e.panelName),!1)},getChildContext:function(){return{reportUIChange:this.onUIChange}},onUIChange:function(e){"slider"===e&&this.props.undoHandler(this.props.undoOrigins.IMAGE_PANEL)},linkedBackgroundAlignType:function(t){return{value:r.get(t,["ref","alignType"])||E.alignType,requestChange:function(e){r.set(t,["ref","alignType"],e),this.props.requestChange(t,this.props.undoOrigins.IMAGE_PANEL),P(this.getEditorAPI())}.bind(this)}},linkedBackgroundScrollType:function(t){var o=r.get(t,["ref","scrollType"])||E.scrollType;return{value:o,requestChange:function(e){e!==o&&this.getEditorAPI().bi.event(l.events.BG_IMAGE_SETTINGS_PANEL_SCROLL_EFFECT,{scroll_type:e}),"parallax"===e?r.set(t,["ref","fittingType"],this.getFittingTypeForParallax(t)):"fixed"===e&&this.getEditorAPI().isMobileEditor()&&r.set(t,"mediaSizing","viewport"),r.set(t,["ref","scrollType"],e),this.props.requestChange(t,this.props.undoOrigins.IMAGE_PANEL),P(this.getEditorAPI())}.bind(this)}},linkedBackgroundFittingType:function(i){var e=r.get(i,["ref","fittingType"])||E.fittingType,t=r.get(i,"mediaSizing","viewport");return{value:e===u.SCALE_TO_FILL&&"document"===t?u.STRETCH:e,requestChange:function(e){var t=e,o="viewport";this.getEditorAPI().isMobileEditor()&&e===u.STRETCH&&(o="document",t=u.SCALE_TO_FILL),r.set(i,["ref","fittingType"],t),r.set(i,"mediaSizing",o),this.props.requestChange(i,this.props.undoOrigins.IMAGE_PANEL),P(this.getEditorAPI())}.bind(this)}},linkedBackgroundOpacityData:function(t){var e=r.get(t,"ref.mediaRef.opacity",E.opacity);return{value:Math.round(100*e),requestChange:function(e){e/=100,r.set(t,"ref.mediaRef.opacity",e),this.props.requestChange(t),P(this.getEditorAPI())}.bind(this)}},linkedBackgroundColor:function(t,o,i){return{value:o[i].replace(/[\{\}]/g,""),requestChange:function(e){o[i]=/color_/.test(e)?"{"+e+"}":e,this.props.requestChange(t),P(this.getEditorAPI())}.bind(this)}},getColorPickerProps:function(){return{useMouseEvent:!0,colorResolver:this.resolveColor,openColorPicker:this.openColorPicker,previewOnHover:!0}},getFittingOptions:function(e){return"parallax"===e?v:this.getEditorAPI().isMobileEditor()?this.getFittingMobileOptions():g},getFittingMobileOptions:function(){var e="scroll"===r.get(this.props.getData(),["ref","scrollType"])?m:f,t=r.get(this.props.getData(),["ref","fittingType"]),o=h[t];return o?r.union(e,[o]):e},getEffectsThumbOptions:function(){return this.getEditorAPI().isMobileEditor()?b:y},getFittingTypeForParallax:function(e){var t=e.ref.fittingType,o=e.ref.mediaRef,i=u.LEGACY_BG_FIT_AND_TILE,n=u.SCALE_TO_FILL,a=d.isSmallerFromContainer(o.width,o.height,600,600);return r.includes(S,t)||a&&t!==n?i:n},render:p})}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgVideoSettingsPanel.rt",["react","lodash","baseUI","baseUILib","santa-editor-symbols","panels","util"],function(n,o,a,i,e,r,s){"use strict";return function(){return function(){var e=this.props.getData(),t=s.translate;return n.createElement(r.frames.toolPanelFrame,o.assign({},{helpId:"7f54f04e-6e0b-4f73-96e2-6c98dd28e822",contentWrapperClass:"background-video-settings-panel background-sub-panel",headerTitle:s.translate("BGPP_SETTINGS_VIDEO_PANEL_HEADER_TITLE")},o.omit(this.props,"children")),n.createElement(i.CustomScroll,{},n.createElement("div",{className:"bg-video-settings-panel-scrollbox bg-settings-panel-scrollbox"},n.createElement("div",{className:"background-video-patterns-control"},n.createElement(i.Composites.Thumbnails,{},n.createElement(i.TextLabel,{value:"BGPP_SETTINGS_VIDEO_OVERLAY_PATTERN_TITLE"}),n.createElement(i.Thumbnails,{value:this.getValue(e.ref.imageOverlay),onChange:function(e,t,o){this.onChange(e,o)}.bind(this,e,t),maxThumbsPerRow:4,borderType:"thumbnail",fixedRatio:!0,noneThumbnailProps:{value:null},options:this.thumbPatternOptions})),e.ref.imageOverlay?n.createElement(a.buttonsGroup,{className:"overlay-pattern-btn-group",valueLink:this.applyInversePattern(e,e.ref.imageOverlay),options:this.getInvertPatternOption(),key:"inversePattern"}):null),n.createElement(i.Divider,{long:!0}),n.createElement(i.Composites.ToggleSwitch,{},n.createElement(i.ToggleSwitch,{value:this.applyOverlayColor(e).value,label:"BGPP_SETTINGS_VIDEO_OVERLAY_COLOR_TITLE",onChange:this.applyOverlayColor(e).requestChange})),this.isColorOverlay(e)?n.createElement(i.Divider,{long:!1,key:"color-picker-input-divider"}):null,this.isColorOverlay(e)?n.createElement(a.colorPickerInputWithOpacity,o.assign({},{ref:"bgColorPickerInput",key:"color-picker-input",label:"BGPP_SETTINGS_VIDEO_COLOR_OPACITY_TITLE",valueLink:this.linkColorWithOpacity(e,e.ref)},this.getColorPickerProps())):null,n.createElement(i.Divider,{long:!0}),n.createElement(a.sectionDividerLabeled,{label:"BGPP_SETTINGS_VIDEO_PLAYBACK_SECTION_TITLE"}),this.getEditorAPI().isDesktopEditor()?n.createElement(i.Divider,{long:!0,key:"whptoDividerImageDesc"}):null,n.createElement.apply(this,[a.dropDown.select,{valueLink:this.linkedBackgroundData(e,e.ref.mediaRef,"playbackSpeed"),label:s.translate("BGPP_SETTINGS_VIDEO_PLAYBACK_TITLE"),shouldTranslate:!1},o.map(this.getPlaybackOptions(),function(e,t,o,i){return n.createElement(a.dropDown.option,{key:"playbackOption"+i,value:o.value},o.label,"\n                \n            ")}.bind(this,e,t))]),n.createElement(i.Divider,{long:!0}),n.createElement(i.Composites.ToggleSwitch,{},n.createElement(i.ToggleSwitch,{value:this.linkedBackgroundData(e,e.ref.mediaRef,"loop").value,label:"BGPP_SETTINGS_VIDEO_LOOP_TITLE",onChange:this.linkedBackgroundData(e,e.ref.mediaRef,"loop").requestChange})))))}.apply(this,[])}}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgVideoSettingsPanel",["react","create-react-class","prop-types","core","lodash","panelUtils","util","stateManagement","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgVideoSettingsPanel.rt"],function(e,t,o,i,n,a,r,s,l){"use strict";for(var c="rEditor/backgroundPanel/overlayPatternIcons/",p=[{value:"",illustration:e.createElement("img",{src:r.media.getMediaUrl(c+"v-overlay-pat-1-icon.png")})},{value:"",illustration:e.createElement("img",{src:r.media.getMediaUrl(c+"v-overlay-pat-2-icon.png")})},{value:"",illustration:e.createElement("img",{src:r.media.getMediaUrl(c+"v-overlay-pat-3-icon.png")})},{value:"",illustration:e.createElement("img",{src:r.media.getMediaUrl(c+"v-overlay-pat-4-icon.png")})},{value:"",illustration:e.createElement("img",{src:r.media.getMediaUrl(c+"v-overlay-pat-5-icon.png")})},{value:"",illustration:e.createElement("img",{src:r.media.getMediaUrl(c+"v-overlay-pat-6-icon.png")})},{value:"",illustration:e.createElement("img",{src:r.media.getMediaUrl(c+"v-overlay-pat-7-icon.png")})}],d=[{uri:"0da768_8b89980121844d37be099f0dbe33e3e3.png",width:6,height:6},{uri:"0da768_4371c7e64a49489bb88c536f515f2040.png",width:6,height:6},{uri:"0da768_361994b0f154464682a0aaf9724471cc.png",width:56,height:56},{uri:"0da768_880a3209e3744cd0a96b66835a01b8c5.png",width:256,height:256},{uri:"0da768_2729bfbce3874276a7dd057098f93949.png",width:6,height:6},{uri:"0da768_8fae2cc5b7bf477fb13faa1f2582dbd2.png",width:4,height:6},{uri:"0da768_2326357be59441978a570bec687a94d0.png",width:3,height:3}],u=[{uri:"0da768_5810e2bd76f64c77a67904ad2b073444.png",width:6,height:6},{uri:"0da768_46b55443eb984c0eacfbdcb1b67a2b7b.png",width:6,height:6},{uri:"0da768_d3e25a05cedd404f807528f6a4750388.png",width:56,height:56},{uri:"0da768_95dbd595356148718d5876246a20fe90.png",width:256,height:256},{uri:"0da768_0ffcd1b0986d43b4aaa061b8b17d4040.png",width:6,height:6},{uri:"0da768_0c0d2dc79bc14f6b8275c3b72fec1ab6.png",width:4,height:6},{uri:"0da768_09a75bbb10944eafb4539206b6a3c615.png",width:3,height:3}],g=0;g<d.length;g++)d[g].type="Image",u[g].type="Image";var m=[{value:.25,label:"0.25x"},{value:.5,label:"0.50x"},{value:1,label:r.translate("BGPP_SETTINGS_VIDEO_PLAYBACK_NORMAL")},{value:1.25,label:"1.25x"},{value:1.5,label:"1.50x"},{value:2,label:"2.00x"}],f=[{value:!1,label:"BGPP_SETTINGS_VIDEO_OVERLAY_PATTERN_DARKER"},{value:!0,label:"BGPP_SETTINGS_VIDEO_OVERLAY_PATTERN_LIGHTER"}],h={loop:!0,uri:null,colorOverlay:"#ffffff",colorOverlayOpacity:.2,scrollType:"scroll",playbackSpeed:1};function y(e,t){var o=e.dsRead.pages.getPrimaryPageId();e.store.dispatch(s.editorPlugins.userPreferences.actions.setSessionUserPreferences("bg_video_settings_pattern_state_"+o,t))}function b(e){var t=e.dsRead.pages.getPrimaryPageId();e.store.dispatch(s.editorPlugins.userPreferences.actions.setSessionUserPreferences("bg_video_settings_data_changed_"+t,!0))}function v(e){return e===u}return t({displayName:"bgVideoSettingsPanel",mixins:[i.mixins.editorAPIMixin,a.linkColorPickerMixin],propTypes:{getData:o.func,undoHandler:o.func,requestChange:o.func,undoOrigins:o.shape({VIDEO_PANEL:o.string})},childContextTypes:{reportUIChange:o.func},getInitialState:function(){this.lastColor="",this.lastColorOpacity=null;var e=this.props.getData();return this.currentPatterns=function(e,t){if(e.ref.imageOverlay)return n.find(d,{uri:e.ref.imageOverlay.uri})?d:u;var o=t.dsRead.pages.getPrimaryPageId();return s.editorPlugins.userPreferences.selectors.getSessionUserPreferences("bg_video_settings_pattern_state_"+o)(t.store.getState())?u:d}(e,this.getEditorAPI()),this.patternState=v(this.currentPatterns),this.thumbPatternOptions=this.fillThumbPatternOptions(this.currentPatterns),null},getChildContext:function(){return{reportUIChange:this.onUIChange}},onUIChange:function(e){"slider"===e.toLowerCase()&&this.props.undoHandler(this.props.undoOrigins.VIDEO_PANEL)},getValue:function(e){return e&&e.uri||null},onChange:function(e,t){if(t){var o=n.find(this.currentPatterns,{uri:t});this.patternState=v(this.currentPatterns),e.ref.imageOverlay=e.ref.imageOverlay||{},n.assign(e.ref.imageOverlay,o)}else e.ref.imageOverlay=null;y(this.getEditorAPI(),this.patternState),this.props.requestChange(e,this.props.undoOrigins.VIDEO_PANEL),b(this.getEditorAPI())},applyInversePattern:function(o,i){return{value:this.patternState,requestChange:function(e){var t=n.findIndex(this.currentPatterns,{uri:i.uri});this.currentPatterns=e?u:d,this.fillThumbPatternOptions(this.currentPatterns),n.assign(o.ref.imageOverlay,this.currentPatterns[t]),this.patternState=e,y(this.getEditorAPI(),e),this.props.requestChange(o,this.props.undoOrigins.VIDEO_PANEL),b(this.getEditorAPI())}.bind(this)}},isColorOverlay:function(e){return!n.isEmpty(e.ref.colorOverlay)&&n.isNumber(e.ref.colorOverlayOpacity)},applyOverlayColor:function(t){return{value:this.isColorOverlay(t),requestChange:function(e){t.ref.colorOverlayOpacity=e?(t.ref.colorOverlay=this.lastColor?this.lastColor:t.ref.color,n.isNumber(this.lastColorOpacity)?this.lastColorOpacity:h.colorOverlayOpacity):(this.lastColor=t.ref.colorOverlay,this.lastColorOpacity=t.ref.colorOverlayOpacity,t.ref.colorOverlay="",0),this.props.requestChange(t,this.props.undoOrigins.VIDEO_PANEL),b(this.getEditorAPI())}.bind(this)}},linkColorWithOpacity:function(t,o){return{value:{color:o.colorOverlay.replace(/[\{\}]/g,""),alpha:o.colorOverlayOpacity},requestChange:function(e){o.colorOverlay=/color_/.test(e.color)?"{"+e.color+"}":e.color,o.colorOverlayOpacity=e.alpha,this.props.requestChange(t),b(this.getEditorAPI())}.bind(this)}},getColorPickerProps:function(){return{colorResolver:this.resolveColor,openColorPicker:this.openColorPicker,previewOnHover:!0,useMouseEvent:!0,enableHistory:!0}},shouldComponentUpdate:function(e){var t=e.getData(),o=this.getEditorAPI();return!(!t.ref.mediaRef||"WixVideo"!==t.ref.mediaRef.type)||(o.panelManager.closePanelByName(e.panelName),!1)},linkedBackgroundData:function(t,o,i){return{value:o&&void 0!==o[i]?o[i]:h[i],requestChange:function(e){o[i]=e,this.props.requestChange(t,this.props.undoOrigins.VIDEO_PANEL),b(this.getEditorAPI())}.bind(this)}},getPlaybackOptions:function(){return m},fillThumbPatternOptions:function(o){return n.forEach(o,function(e,t){p[t].value=o[t].uri}),p},getInvertPatternOption:function(){return f},render:l})}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanelPageItem.rt",["react","lodash","baseUI","baseUILib","santa-editor-symbols","core"],function(i,n,a,r,s,l){"use strict";return function(){return function(){var e=this.props.page,t=this.initialBgData,o=this.getEditorAPI();return i.createElement("div",{className:n(this.getItemClassNames(e)).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},i.createElement("label",{className:"item-label"},t?i.createElement(r.Checkbox,{key:"normal-checkbox",value:this.state.checked,onChange:this.handleToggleChanged,disabled:this.props.isCurrentPage,labelAfterSymbol:!0}):null,t?i.createElement("span",{className:"page-preview",key:"page-preview",style:this.getBgImageUrl(this.state.checked?this.props.currentPageBgData:t)},this.isMediaVideo()?i.createElement("div",{key:"page-preview-video-controls",className:"page-preview-video-controls"},i.createElement(a.symbol,{name:"bgVideoIndicator"})):null):null,i.createElement("span",{className:"page-name"},e.label),e.pageData&&o.pages.isHomePage(e.pageData.id)?i.createElement(s.symbol,{name:"pageItemHomeIcon",key:"isHome"}):null,e.pageData&&l.utils.tpaTypeUtils.isTPA(e.pageData)&&!l.utils.tpaTypeUtils.isTPASpecialPage(o.dsRead,e.pageData)?i.createElement(s.symbol,{name:"actionButtonSpecialPages",key:"isTpaPage"}):null,e.pageData&&l.utils.blogTypeUtils.isBlogSectionPage(o,e.pageData)?i.createElement(s.symbol,{name:"actionButtonBlogPages",key:"isBlogPage"}):null,e.type.isLink?i.createElement(s.symbol,{name:"pageItemLinkIcon",key:"isLink"}):null,e.type.isDropdown?i.createElement(s.symbol,{name:"pageItemDropdownIcon",key:"isDropDown"}):null,e.isVisible?null:i.createElement(s.symbol,{name:"pageItemHideIcon",key:"isHidden"})))}.apply(this,[])}}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanelPageItem",["react-addons-linked-state-mixin","create-react-class","prop-types","core","lodash","util","constants","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanelPageItem.rt"],function(e,t,o,i,r,n,a,s){"use strict";var l=n.imageTransform,c=n.url,p=n.serviceTopology,d=n.backgroundUtils,u=d.getColorValue,g=d.getMediaType,m=a.MEDIA_TYPES;return t({mixins:[i.mixins.editorAPIMixin,e],displayName:"bgApplyPanelPageItem",propTypes:{page:o.object.isRequired,itemBgData:o.object,currentPageBgData:o.object,valueLink:o.object,currentPageId:o.string,isCurrentPage:o.bool,isSubMenu:o.bool,isSubMenuLast:o.bool},getInitialState:function(){return this.initialBgData=this.props.itemBgData,{checked:this.props.isCurrentPage}},componentWillReceiveProps:function(e){this.isValueChanged(e)&&this.setState({checked:e.valueLink.value})},componentStateChanged:function(){this.props.valueLink.requestChange(this.state.checked,this.props.page.pageData.id,this.initialBgData)},handleToggleChanged:function(e){this.setState({checked:e},this.componentStateChanged)},shouldComponentUpdate:function(e,t){return!this.props.isCurrentPage&&(this.isCheckedStateChanged(t)||this.isValueChanged(e))},isValueChanged:function(e){return null!==e.valueLink.value&&this.props.valueLink.value!==e.valueLink.value},isCheckedStateChanged:function(e){return e.checked!==this.state.checked},getItemClassNames:function(e){return{"bg-apply-panel-item":!0,"item-hidden":!e.isVisible,"current-page":this.props.isCurrentPage,"item-first-level":!this.props.isSubMenu,"item-second-level":this.props.isSubMenu,"item-second-level-last":this.props.isSubMenuLast,"item-is-page":e.type.isPage}},isMediaVideo:function(){return g(this.state.checked?this.props.currentPageBgData.ref:this.initialBgData.ref)===m.VIDEO},getBgImageUrl:function(e){var t={backgroundColor:u(this.getEditorAPI(),e.ref.color)},o=g(e.ref);if(o!==m.COLOR){var i=o===m.IMAGE?e.ref.mediaRef:e.ref.mediaRef.posterImageRef,n=d.isSmallerFromContainer(i.width,i.height,50,35),a=d.getImageDisplayData(n?l.fittingTypes.TILE:l.fittingTypes.SCALE_TO_FILL,e.ref.alignType,i.uri,i.width,i.height,50,35);t.backgroundImage="url("+c.joinURL(p.staticMediaUrl,a.uri)+")",r.assign(t,a.css.container)}return t},render:s})}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanel.rt",["react","lodash","util","baseUI","baseUILib","panels","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanelPageItem","santa-editor-symbols"],function(a,r,o,e,i,n,s,t){"use strict";return function(){function t(e,t,o){return a.createElement("li",{key:"page"+o},a.createElement(s,r.assign({},{valueLink:this.pagesStateChange(),ref:"page"+o},this.getPagesProps(t))),t.items&&t.items.length?a.createElement.apply(this,["ul",{key:"pageItems"},r.map(t.items,function(e,t,o,i,n){return a.createElement("li",{key:"page"+o+"subPage"+n},a.createElement(s,r.assign({},{valueLink:this.pagesStateChange(),ref:"page"+o+"subPage"+n},this.getSubPagesProps(i,n,t.items.length-1))))}.bind(this,e,t,o))]):null)}return function(){var e=this.props.getData();return a.createElement(n.frames.toolPanelFrame,r.assign({},{helpId:"18df7de7-066e-49e6-b005-f01c72d4f680",contentWrapperClass:"bg-apply-panel background-sub-panel",headerTitle:o.translate("BGPP_SETTINGS_APLLY_PANEL_HEADER_TITLE")},r.omit(this.props,"children")),a.createElement("div",{className:"bg-apply-panel-wrapper"},a.createElement("div",{className:"bg-apply-panel-description"},"\n            ",o.translate("BGPP_SETTINGS_APLLY_PANEL_DESCRIPTION"),"\n        "),a.createElement("div",{className:"bg-apply-panel-all"},a.createElement(i.Checkbox,{labelAfterSymbol:!0,value:this.state.markAllPagesDisplay,onChange:this.handleSelectAllChange,indeterminate:this.state.indeterminate,label:"BGPP_SETTINGS_APLLY_TO_ALL"})),a.createElement(i.CustomScroll,{},a.createElement("div",{className:"bg-apply-panel-scrollbox bg-settings-panel-scrollbox"},a.createElement.apply(this,["ul",{className:"bg-apply-panel-scrollbox-list"},r.map(this.siteMenuItems,t.bind(this,e))])))))}.apply(this,[])}}),define("rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanel",["react-addons-linked-state-mixin","create-react-class","lodash","util","core","pagesMenu","coreBi","stateManagement","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanel.rt"],function(e,t,l,o,c,i,n,a,r){"use strict";var p=i.specialPages.menuLogic,s=o.backgroundUtils.biEvents,d=a.editorPlugins.leftBar.selectors.getDeviceType;function u(e){var t=e.pages.dynamicPages.getMenuItems();return l.flatMap(t,"items")}function g(e,t){var o=e.store.getState(),i=d(o);return e.dsRead.pages.background.get(t,i)}function m(e,t,o){var i=o.store.getState(),n=d(i),a=o.dsRead.pages.background.get(t,n);return e.ref.mediaRef&&a.ref.mediaRef&&e.ref.mediaRef.type===a.ref.mediaRef.type?(e.ref.mediaRef.id=a.ref.mediaRef.id,"WixVideo"===e.ref.mediaRef.type&&(e.ref.mediaRef.posterImageRef.id=a.ref.mediaRef.posterImageRef.id,e.ref.imageOverlay&&(e.ref.imageOverlay.id=a.ref.imageOverlay&&a.ref.imageOverlay.id))):e.ref.mediaRef?(delete e.ref.mediaRef.id,"WixVideo"===e.ref.mediaRef.type&&(delete e.ref.mediaRef.posterImageRef.id,e.ref.imageOverlay&&delete e.ref.imageOverlay.id)):(e.ref.mediaRef=null,e.ref.colorOverlay="",e.ref.imageOverlay=null,e.ref.scrollType="scroll"),e.ref.id=a.ref.id,e}return t({displayName:"backgroundApplyPanel",mixins:[c.mixins.editorAPIMixin,o.draggableMixin,e],getInitialState:function(){return this.selectedItems=[],this.appliedPages=[],this.currentPageId=this.getEditorAPI().dsRead.pages.getPrimaryPageId(),this.currentPageBgData=g(this.getEditorAPI(),this.currentPageId),this.siteMenuItems=this.getTrimmedMenuItems(),this.flatSitePages=this.getFlatPagesList(),this.itemsProps=this.getItemsProps(),{markAllPagesDisplay:!1,indeterminate:!1}},shouldComponentUpdate:function(e,t){return this.state.markAllPagesDisplay!==t.markAllPagesDisplay||this.state.indeterminate!==t.indeterminate||0<this.appliedPages.length},updatePages:function(){var t,o,i,e,n;t=this.props,o=this.getEditorAPI(),i=this.currentPageBgData,e=this.appliedPages,n=void 0,l.forEach(e,function(e){n=e.checked?m(l.cloneDeep(i),e.pageId,o):m(l.cloneDeep(e.originalPageBgData),e.pageId,o),t.requestChange(n,null,e.pageId)}),0<e.length&&t.undoHandler(t.undoOrigins.APPLY_PANEL),this.appliedPages=[]},componentWillUnmount:function(){s.applyToOtherClosed(this.getEditorAPI(),n.events.backgroundPanel.panel_apply_to_other_pages_ok,{all_pages_selected:(this.flatSitePages.length===this.selectedItems.length+1).toString(),num_unselected_pages:this.flatSitePages.length-this.selectedItems.length,num_selected_pages:this.selectedItems.length})},handleSelectAllChange:function(o){l.forEach(this.itemsProps,l.bind(function(e){var t=e.page.pageData.id;t!==this.currentPageId&&(o?l.includes(this.selectedItems,t)||(this.selectedItems.push(t),this.appliedPages.push({checked:o,originalPageBgData:e.itemBgData,pageId:t})):l.includes(this.selectedItems,t)&&(l.pull(this.selectedItems,t),this.appliedPages.push({checked:o,originalPageBgData:e.itemBgData,pageId:t})))},this)),this.setState({markAllPagesDisplay:o,indeterminate:!1},this.updatePages)},pagesStateChange:function(){var e=null;return this.flatSitePages.length===this.selectedItems.length+1&&(e=!0),0===this.selectedItems.length&&(e=!1),{value:e,requestChange:function(e,t,o){e&&t!==this.currentPageId?l.includes(this.selectedItems,t)||this.selectedItems.push(t):l.pull(this.selectedItems,t),this.appliedPages.push({checked:e,originalPageBgData:o,pageId:t});var i=this.flatSitePages.length===this.selectedItems.length+1,n=!i&&0<this.selectedItems.length;if(i!==this.state.markAllPagesDisplay||n!==this.state.indeterminate){var a={markAllPagesDisplay:i,indeterminate:n};this.setState(a,this.updatePages)}else this.updatePages()}.bind(this)}},getFlatPagesList:function(){var e=this.getEditorAPI(),t=e.dsRead.pages.getPagesData(),o=e.mainMenu.getMenuItemsTreeForMainMenu(t);o=o.concat(u(this.getEditorAPI()));var i=p.getSectionPagesIds(e,t),n=e.dsRead.mainMenu.getMenu();return function o(e,i,n,a){return i=i||[],l.forEach(e,l.bind(function(e){if(e.pageData&&(i.push(e),l.includes(n,e.pageData.id))){var t=this.getEditorAPI().mainMenu.convertPagesDataListToMenuItemsList(p.getSpecialPagesListBySectionPageOrBySibling(this.getEditorAPI(),e.pageData),a);o.call(this,t,i,n,a)}o.call(this,e.items,i,n,a)},this)),l.uniqBy(i,"id")}.call(this,o,[],i,n)},getTrimmedMenuItems:function(){var e,o,i,n,a,r,s,t=this.getMenuItemsTreeWithPagesOnly();return e=t,o=this.getEditorAPI(),i=!1,n=o.dsRead.mainMenu.getMenu(),a=o.dsRead.pages.getPagesData(),r=p.getSectionPagesIds(o,a),s=void 0,l.forEach(e,function(e){var t=void 0;if(e.pageData&&l.includes(r,e.pageData.id)){if(t=c.utils.tpaTypeUtils.isTPA(e.pageData),i&&t)return;s=o.mainMenu.convertPagesDataListToMenuItemsList(p.getSpecialPagesListBySectionPageOrBySibling(o,e.pageData,a),n),e.items=e.items.concat(s),t&&(i=!0)}}),t=t.concat(u(this.getEditorAPI()))},buildDynamicPagesIdsMap:function(){var t={},e=this.getEditorAPI().dsRead.routers.get.all();return l.forOwn(e,function(e){l.forOwn(e.pages,function(e){t[e]=!0})}),t},getMenuItemsTreeWithPagesOnly:function(){var o=this.getEditorAPI(),i=this.buildDynamicPagesIdsMap();return o.mainMenu.extendMenuItemsTreeWithPageData(o.dsRead.pages.getPagesData(),function(e,t){return t&&!p.isSpecialPage(o,t,i)||!t&&0<e.items.length})},getItemsProps:function(){var t=[];return l.forEach(this.flatSitePages,l.bind(function(e){t.push({page:e,currentPageId:this.currentPageId,currentPageBgData:this.currentPageBgData,itemBgData:g(this.getEditorAPI(),e.pageData.id),isCurrentPage:this.currentPageId===(e.type.isPage&&e.pageData.id)})},this)),t},getPagesProps:function(e){var t=l.find(this.itemsProps,{page:{id:e.id}});return t||(t={page:e}),t},getSubPagesProps:function(e,t,o){var i=l.find(this.itemsProps,{page:{id:e.id}});return i.isSubMenu=!0,i.isSubMenuLast=t===o,i},render:r})}),define("rEditor/rootComps/panels/siteSettings/siteSettingsPanel.rt",["react","lodash","baseUI","panels"],function(e,t,o,i){"use strict";return function(){return e.createElement("div",{},e.createElement(i.frames.focusPanelFrame,{shouldNotCloseOnBlur:!0,panelName:this.props.panelName,width:"95%",height:"95%",shouldHideHeader:!0,className:"site-settings-panel"},e.createElement("iframe",{ref:"siteSettingsFrame",width:"100%",height:"100%",src:this.getSettingsIframeUrl(),frameBorder:"0"}),e.createElement(o.preloader,{className:t({hidden:!this.state.showLoader}).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")})))}}),define("rEditor/rootComps/panels/siteSettings/siteSettingsPanel",["reactDOM","create-react-class","prop-types","util","constants","core","lodash","rEditor/rootComps/panels/siteSettings/siteSettingsPanel.rt","coreBi","stateManagement"],function(t,e,o,i,n,a,r,s,l,c){"use strict";var p="CLOSE",d="OPEN_HELP",u="SET_METATAGS",g="VALIDATE_METATAGS",m="GET_METATAGS",f="NOTIFY_SITENAME_CHANGED",h=["https://www.wix.com","http://www.wix.com"];function y(e){t.findDOMNode(this.refs.siteSettingsFrame).contentWindow.postMessage(JSON.stringify(e),"*")}function b(e,t){y.call(this,{isValid:t,callId:e.callId})}var v=e({displayName:n.PANEL_TYPES.SITE_SETTINGS,render:s,mixins:[a.mixins.editorAPIMixin],propTypes:{tab:o.string,referrer:o.string},getInitialState:function(){return{showLoader:!0}},getDefaultProps:function(){return{tab:"overview"}},componentWillMount:function(){window.addEventListener("message",this.handlePostMessage,!1)},componentWillUnmount:function(){window.removeEventListener("message",this.handlePostMessage,!1)},handlePostMessage:function(t){var e,o=this.getEditorAPI();if(r.includes(h,t.origin)&&!r.isEmpty(t.data)&&r.isString(t.data))try{this.hideLoader();var i="string"==typeof t.data&&JSON.parse(t.data);i&&(e=i,r.isObject(e)&&!r.isEmpty(e.action)&&r.isString(e.action))&&function(e,t){switch(e.action){case m:y.call(this,{payload:t.dsRead.seo.headTags.get(),callId:e.callId});break;case u:t.dsActions.seo.headTags.set(e.value,r.noop,r.noop);break;case g:t.dsRead.seo.headTags.clientSideValidation(e.value,b.bind(this,e,!0),b.bind(this,e,!1));break;case f:t.siteName.set(e.value);break;case p:this.props.close();break;case d:this.props.openHelpCenter()}}.call(this,i,o)}catch(e){o.dsActions.bi.error(l.errors.SITE_SETTINGS_JSON_PARSE_ERROR,{dsc:'message: "'+e.message+'" data: "'+t.data+'"',errscp:this.constructor.displayName})}},getSettingsIframeUrl:function(){var e=this.getEditorAPI(),t=i.serviceTopology.businessManagerUrl,o=e.dsRead.generalInfo.getMetaSiteId();return"business"===this.props.tab?t+"/"+o+"/settings/?viewMode=editor":"favicon"===this.props.tab?t+"/"+o+"/settings/?focus=favicon&viewMode=editor":"release-manager"===this.props.tab?t+"/"+o+"/release-manager-client/?&viewMode=editor":t+"/"+o+"/manage-website/"+this.props.tab+"/?viewMode=editor"},hideLoader:function(){this.state.showLoader&&this.setState({showLoader:!1})}});return c.editorPlugins.panels.hoc.panelFrame(n.PANEL_TYPES.SITE_SETTINGS)(v)}),define("rEditor/rootComps/panels/editorVersionInfoPanel/editorVersionInfoPanel.rt",["react","lodash","baseUI","panels","util"],function(e,t,o,i,n){"use strict";return function(){return e.createElement(i.frames.focusPanelFrame,{panelName:this.props.panelName,title:"Editor Version Info",frameClassName:"editorVersionInfoPanel"},e.createElement("div",{className:"content"},e.createElement("div",{className:"row"},e.createElement("label",{},"Editor Version:"),e.createElement("span",{},this.getEditorVersion())),e.createElement("div",{className:"row"},e.createElement("label",{},"Viewer Version:"),e.createElement("span",{},this.getViewerVersion()))),e.createElement("div",{className:"panel-footer"},e.createElement(o.button,{type:"button",shouldTranslate:!1,label:"OK",className:"done-button",onClick:this.close})))}}),define("rEditor/rootComps/panels/editorVersionInfoPanel/editorVersionInfoPanel",["lodash","create-react-class","core","util","zepto","rEditor/rootComps/panels/editorVersionInfoPanel/editorVersionInfoPanel.rt"],function(e,t,o,i,n,a){"use strict";function r(e){return e.split("/").pop()||"unknown"}return t({displayName:"editorVersionInfoPanel",panelName:"editorVersionInfoPanel",mixins:[o.mixins.editorAPIMixin],getEditorVersion:function(){return r(e.get(i,"editorModel.editorBase",""))},getViewerVersion:function(){return r(e.get(n("#preview")[0],"contentWindow.siteModel.santaBase"))},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render:a})}),define("rEditor/rootComps/panels/applyStylePanel/applyStylePanel.rt",["react","lodash","panels","baseUI","baseUILib","util","santa-editor-symbols"],function(t,o,i,e,n,a,r){"use strict";return function(){return function(){var e=this.getEditorAPI().addPanelInfra.designPanelLiveComponentSection;return t.createElement(i.frames.confirmationPanelFrame,{panelName:this.props.panelName,className:"apply-style-panel",onConfirm:this.onConfirm,onCancel:this.onCancel,shouldHideHeader:!0,confirmLabel:"COPY_DESIGN_APPLY",ref:"frame",cancelLabel:"COPY_DESIGN_APPLY_CANCEL"},t.createElement("header",{className:"save-publish-panel-header"},t.createElement("button",{className:"close",onClick:this.close},t.createElement(r.symbol,{name:"headerCloseButton"})),t.createElement("button",{className:"help",onClick:this.openHelpCenter,key:"help"},"?"),t.createElement("span",{className:"title"},a.translate("COPY_DESIGN_TITLE")),t.createElement("span",{className:"subtitle"},a.translate("COPY_DESIGN_DESCRIPTION_LINE1"))),t.createElement("div",{className:"panel-content"},t.createElement("div",{className:"current-style-container container-wrapper"},t.createElement("div",{className:"current-style-header header"},t.createElement("span",{className:"text"},a.translate("COPY_DESIGN_LABEL_LEFT"))),t.createElement("div",{className:"current-style comp-container"},t.createElement(e,this.getSelectedCompProps()))),t.createElement("div",{className:"applied-styles-container container-wrapper"},0<this.getThemeAndPersonalizeStylesToRender().length?t.createElement("div",{key:"applyStyleHeader",className:"applied-styles-header header"},t.createElement("span",{className:"text"}," ",a.translate("COPY_DESIGN_LABEL_RIGHT"))):null,t.createElement(n.CustomScroll,{},t.createElement("div",{className:"comp-themed-styles comp-container"},0<this.getThemeAndPersonalizeStylesToRender().length?t.createElement(e,o.assign({},{key:"appliesStylesLiveSections"},this.getThemeAndPersonalizeStylesProps())):null,0===this.getThemeAndPersonalizeStylesToRender().length?t.createElement("div",{className:"empty-styles",key:"emptyStylesKey"},t.createElement(r.symbol,{name:"nothingToEditASP"}),t.createElement("div",{className:"empty-style-text text"},a.translate("COPY_DESIGN_EMPTY_LABEL"))):null)))))}.apply(this,[])}}),define("rEditor/rootComps/panels/applyStylePanel/applyStylePanel",["create-react-class","lodash","core","rEditor/rootComps/panels/applyStylePanel/applyStylePanel.rt","coreBi","constants","experiment"],function(e,d,u,t,g,o,m){"use strict";var s=["wysiwyg.viewer.skins.page.TransparentPageSkin","wysiwyg.viewer.skins.screenwidthcontainer.TransparentHalfScreen","wysiwyg.viewer.skins.screenwidthcontainer.TransparentScreen","wysiwyg.viewer.skins.area.TransparentArea"],l=["wysiwyg.viewer.skins.photo.NoSkinPhoto","wysiwyg.viewer.skins.VideoSkin"],c=["wysiwyg.viewer.components.MatrixGallery","wysiwyg.viewer.components.SlideShowGallery","wysiwyg.viewer.components.SliderGallery","wysiwyg.viewer.components.PaginatedGridGallery"],p={"wysiwyg.viewer.components.HeaderContainer":{scale:.5},"wysiwyg.viewer.components.FooterContainer":{scale:.5},"wysiwyg.viewer.components.ScreenWidthContainer":{scale:.5},"mobile.core.components.Page":{compOverrideType:"pageContainer"},"wysiwyg.viewer.components.Video":{scale:.5},"wysiwyg.viewer.components.VerticalLine":{maxFontSize:10},"wysiwyg.viewer.components.FiveGridLine":{maxFontSize:10},fiveGridLineFullWidth:{maxFontSize:10},"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":{maxFontSize:10},"wysiwyg.viewer.components.AudioPlayer":{maxFontSize:10},"wysiwyg.viewer.components.menus.DropDownMenu":{maxFontSize:15},"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":{maxFontSize:15},"wysiwyg.viewer.components.SiteButton":{maxFontSize:22},"mobile.core.components.Container":{scale:.5},"core.components.Container":{scale:.5},"core.components.ContainerOBC":{scale:.5},"wysiwyg.viewer.components.BgImageStrip":{scale:.5},"wysiwyg.viewer.components.ContactForm":{scale:.5},"wysiwyg.viewer.components.DynamicContactForm":{scale:.5},"wysiwyg.common.components.subscribeform.viewer.SubscribeForm":{scale:.5},"wysiwyg.viewer.components.GoogleMap":{scale:.5},"wysiwyg.viewer.components.WPhoto":{scale:.5},"wysiwyg.viewer.components.MatrixGallery":{scale:.25,maxFontSize:12},"wysiwyg.viewer.components.SlideShowGallery":{scale:.25,maxFontSize:12},"wysiwyg.viewer.components.SliderGallery":{scale:.25,maxFontSize:12},"wysiwyg.viewer.components.PaginatedGridGallery":{scale:.25,maxFontSize:12}},f={"mobile.core.components.Container":["core.components.Container","core.components.ContainerOBC"],"core.components.Container":["mobile.core.components.Container","core.components.ContainerOBC"],"core.components.ContainerOBC":["mobile.core.components.Container","core.components.Container"]};function h(i,e){var t=d.union([e],f[e]);return d.reduce(t,function(t,e){var o=d(u.styleManager.getThemedStyleForComp(i.theme,i.components,e)).union().flatten().value();return d.forEach(o,function(e){t.push({styleItem:e,compPtr:null})}),t},[])}function y(o,e){var i=u.styleManager.getUniqueCustomStylesAndCompPtr(o.theme,o.components,e);return f[e]&&d.forEach(f[e],function(e){var t=u.styleManager.getUniqueCustomStylesAndCompPtr(o.theme,o.components,e);i=i.concat(t)}),i}function b(e){return p[e]&&p[e].compOverrideType?p[e].compOverrideType:e}function a(i,e,t,o,n,a){var r={additionalBehaviours:{iconEnabledForComps:[],infoIcon:"none",labelMode:"none"},help:{hide:!0},categoryId:t.substring(t.lastIndexOf(".")+1),hide:!1,id:e,onClick:a,onItemDrag:function(){},parentType:"ADD_PANEL",props:{compTypes:b(t),horizontalMargin:20,verticalMargin:30,scaleProportion:{x:p[t]&&p[t].scale?p[t].scale:1,y:p[t]&&p[t].scale?p[t].scale:1}},showSectionHeader:!1,stylesForSection:o,additionalScaling:1,selectedItemKey:d.map(n,"itemKey"),getAdditionalElementProps:function(e){var t=u.styleManager.getCompDefStyle(e,i),o={};return d.includes(s,t.skin)?(o.text="DESIGN_LABEL_NO_COLOR",o.className="design-panel-transparent-skin-item"):d.includes(l,t.skin)&&(o.text="Design_Label_No_Frame",o.className="design-panel-no-frame-skin-item"),o}};return p[t]&&p[t].maxFontSize&&(r.props.maxFontSize=p[t].maxFontSize),r}return e({displayName:"applyStylePanel",mixins:[u.mixins.editorAPIMixin],getInitialState:function(){return{selectedItems:[]}},close:function(){var e=this.getEditorAPI();e.panelManager.closePanelByName(this.props.panelName);var t=this.props.selectedComp;e.bi.event(g.events.applyStyle.COPY_STYLE_CANCEL,{component_id:t.id,component_type:e.components.getType(t)})},onCancel:function(){var e=this.getEditorAPI(),t=this.props.selectedComp;e.bi.event(g.events.applyStyle.COPY_STYLE_CANCEL,{component_id:t.id,component_type:e.components.getType(t)})},onConfirm:function(){var s=this.getEditorAPI(),l=s.components.getType(this.props.selectedComp),c=s.components.style.get(this.props.selectedComp),p=this.props.selectedComp;s.bi.event(g.events.applyStyle.COPY_STYLE_APPLY,{num_of_styles_chosen:this.state.selectedItems.length,component_id:p.id,component_type:s.components.getType(p)}),d.forEach(this.state.selectedItems,function(e){var o=void 0;if(e.compPtr)o=s.components.style.get(e.compPtr);else{var t=e.itemKey.split("."),i=t[t.length-1],n=i.substring(i.indexOf("_")+1);o=u.styleManager.getStyleById(s.theme,s.components,n,s.components.getType(p))}var a=[{compPtr:e.compPtr,styleItem:o}],r=u.styleManager.getDuplicateToStyleList(s.theme,s.components,o,l);d.forEach(f[l],function(e){var t=u.styleManager.getDuplicateToStyleList(s.theme,s.components,o,e,f[l]);r=r.concat(t)}),m.isOpen("se_studioCopyDesign")&&(r=d.filter(r,{styleItem:{styleType:"custom"}})),a=a.concat(r),d.forEach(a,function(e){var t={skin:c.skin,style:c.style,type:e.styleItem.type};"system"===e.styleItem.styleType?s.theme.styles.update(e.styleItem.id,t):s.components.style.update(e.compPtr,t)})})},getSelectedCompProps:function(){var e=this.getEditorAPI(),t=this.props.selectedComp,o=e.components.getType(t),i="selectedComp"+t.id,n=e.components.style.get(t);return a(e,i,o,[{styleId:n.id,styleDef:n,compType:b(o)}],this.state.selectedItems,d.noop)},getThemeAndPersonalizeStylesProps:function(){var e=this.getEditorAPI(),t=this.props.selectedComp;return a(e,"themeAndMyForComp"+t.id,e.components.getType(t),this.themeAndPersonalizedStylesToRender?this.themeAndPersonalizedStylesToRender:this.getThemeAndPersonalizeStylesToRender(),this.state.selectedItems,this.updateListOfStyleToUpdate)},getThemeAndPersonalizeStylesToRender:function(){if(this.themeAndPersonalizedStylesToRender)return this.themeAndPersonalizedStylesToRender;var e,t=this.getEditorAPI(),o=this.props.selectedComp,i=t.components.getType(o),n=t.components.style.get(o),a=[];if(m.isOpen("se_studioCopyDesign"))a=h(t,i);else if(d.includes(c,i))a=y(t,i);else{a=h(t,i).concat(y(t,i))}e=a,a=d.filter(e,function(e){return!d.includes(l,e.styleItem.skin)});var r=[];return d.forEach(a,function(e){var t=e.styleItem,o=!u.styleManager.isEqualWithoutTypeConsideration(t,n);(m.isOpen("se_studioCopyDesign")||o)&&r.push({compType:b(i),styleId:t.id,styleDef:t,compPtr:e.compPtr})}),this.themeAndPersonalizedStylesToRender=r},updateListOfStyleToUpdate:function(e,t,o,i){var n=d.clone(this.state.selectedItems),a=i.split("."),r=a[a.length-1],s=r.substring(r.indexOf("_")+1),l=d.includes(d.mapValues(n,"itemKey"),i);l?d.remove(n,{itemKey:i}):n.push({itemKey:i,compPtr:e.compPtr});var c=this.props.selectedComp,p=this.getEditorAPI();p.bi.event(g.events.applyStyle.COPY_STYLE_CHOOSE_STYLES_TO_REPLACE_CLICK,{style_id:s,status:!l,component_id:c.id,component_type:p.components.getType(c)}),this.setState({selectedItems:n})},openHelpCenter:function(){var e=this.getEditorAPI(),t={panel_name:this.props.panelName,component:e.selection.getSelectedComponentType(),origin:o.BI.HELP.ORIGIN.PANEL,learn_more:!1};e.panelManager.openHelpCenter("b853c294-8ff1-418f-b4d2-29d7b59a85c3",null,t)},render:t})}),define("rEditor/rootComps/panels/boxSlideShowPanels/boxSlideShowManageSlidesPanel.rt",["react","lodash","util","baseUI","baseUILib","compPanelInfra","helpIds"],function(e,t,o,i,n,a,r){"use strict";return function(){return e.createElement(a.compPanelFrame,t.assign({},{contentClass:"box-slide-show-manage-slides-panel",title:"Regular_Slideshow_Slides_Title",helpId:r.EXTERNAL.BOX_SLIDE_SHOW_MANAGE_SLIDES},this.getFrameProps()),e.createElement(n.SortByDragList,{selectable:!0,value:this.getSlides(),selectItem:this.selectSlide,menuActionsOverrides:this.getMenuActionsOverrides(),enableEditValue:!1,enableSetAsDefault:!1,labelValidator:o.validate.notEmptyString,labelInvalidMessage:"Box_slide_show_slides_invalid_slide_name",itemMoved:this.moveSlide,duplicateItem:this.duplicateSlide,deleteItem:this.deleteSlide,itemChanged:this.changeSlideName}),e.createElement("div",{className:"button-wrapper"},e.createElement(i.button,{className:"mainButton",label:"Regular_Slideshow_Slides_Add_Duplicate_Slide",onClick:this.duplicateCurrentSlide}),e.createElement(i.button,{className:"secondaryButton btn-text",label:"Regular_Slideshow_Slides_Add_New_Slide",onClick:this.addNewSlide})))}}),define("rEditor/rootComps/panels/boxSlideShowPanels/boxSlideShowManageSlidesPanel",["create-react-class","prop-types","lodash","util","compPanelInfra","boxSlideshow","coreBi","stateManagement","rEditor/rootComps/panels/boxSlideShowPanels/boxSlideShowManageSlidesPanel.rt"],function(e,t,a,o,i,n,r,s,l){"use strict";var c=s.boxSlideShow.selectors,p=c.getAllSlides,d=c.findCurrentSlide,u=s.selection.selectors.getFocusedContainer,g=n.utils.boxSlideShowUtils,m="title";function f(){return this.getEditorAPI().components.getDefaultBiParams(this.props.boxSlideShow)}function h(e,t,o){var i,n,a={id:t.id,label:(i=e,n=t,i.components.data.get(n)[m]),pointer:t};return a.id===o.id&&(a.selected=!0),a}function y(t,e,o){var i=p(t.dsRead,e);return a.map(i,function(e){return h(t,e,o)})}var b=e({displayName:"boxSlideShowManageSlidesPanel",mixins:[i.compPanelMixin,o.translationMixin],propTypes:{boxSlideShow:t.object},getInitialState:function(){var e=d(this.getEditorAPI().dsRead,this.props.boxSlideShow);return this.isCurrentlyInOperation=!1,{selectedSlide:e}},componentWillMount:function(){this.slides=this.getSlides()},componentWillUpdate:function(e,t){this.slides=y(this.getEditorAPI(),this.props.boxSlideShow,t.selectedSlide)},componentWillReceiveProps:function(e){this.slides=y(this.getEditorAPI(),e.boxSlideShow,this.state.selectedSlide);var t=d(this.getEditorAPI().dsRead,e.boxSlideShow);a.isEqual(t,this.state.selectedSlide)||this.setState({selectedSlide:t})},getSlides:function(){return y(this.getEditorAPI(),this.props.boxSlideShow,this.state.selectedSlide)},getSelectedSlideItem:function(){return a.find(this.slides,{id:this.state.selectedSlide.id})},startOperation:function(){this.getEditorAPI().preventMouseDown(),this.isCurrentlyInOperation=!0},endOperation:function(){this.getEditorAPI().allowMouseDown(),this.isCurrentlyInOperation=!1},isInOperation:function(){return this.isCurrentlyInOperation},selectSlide:function(e,t){var o=this;if(!this.isInOperation()){var i=this.getEditorAPI();this.startOperation(),this.setState({selectedSlide:e.pointer},function(){i.components.behaviors.execute(o.props.boxSlideShow,"moveToSlide",{slide:t},o.endOperation)}),g.hideQuickTip(i),g.identifyComponentsOutOfSlideshow(i,this.props.boxSlideShow),i.bi.event(r.events.boxSlideShow.SLIDES_NAVIGATION,a.assign({origin:"slideManager"},f.call(this)))}},moveSlide:function(e,t){if(e!==t&&!this.isInOperation()){var o=this.getEditorAPI(),i=a.findIndex(this.getSlides(),{selected:!0}),n=this.slides[e].pointer;o.components.arrangement.moveToIndex(n,t,!1),o.bi.event(r.events.boxSlideShow.MANAGE_SLIDES_SLIDE_REORDERED,f.call(this)),o.dsActions.waitForChangesApplied(function(){var e=a.findIndex(this.getSlides(),{selected:!0});i!==e&&(this.startOperation(),o.components.behaviors.execute(this.props.boxSlideShow,"moveToSlide",{slide:e},this.endOperation))}.bind(this))}},addSlide:function(e,t){var o=this.getEditorAPI(),i=o.components.add(this.props.boxSlideShow,e);o.components.arrangement.moveToIndex(i,t,!0),this.getEditorAPI().history.add("added a slide to slide show"),o.dsActions.waitForChangesApplied(function(){var e=h(o,i,this.state.selectedSlide);this.selectSlide(e,t)}.bind(this))},duplicateSlide:function(e,t){var o=this.getEditorAPI().components.serialize(e.pointer),i={curr_slide_title:o.data[m]};o.data[m]=this.translateTemplate("Regular_Slideshow_Slides_Copy_Slide_Label",i,this.getEditorAPI()),this.addSlide(o,t+1)},duplicateCurrentSlide:function(){var e=this.getSelectedSlideItem(),t=this.slides.length;this.duplicateSlide(e,t-1),this.getEditorAPI().bi.event(r.events.boxSlideShow.MANAGE_SLIDES_DUPLICATE_CURRENT_SLIDE,f.call(this))},deleteSlide:function(e,t,o){var i=this;if(!(o.length<=1)){var n=this.getEditorAPI();n.components.remove(e.pointer).then(function(){n.history.add("removed a slide from slide show");var e=d(n.dsRead,i.props.boxSlideShow);i.setState({selectedSlide:e})})}},changeSlideName:function(e){var t=e.label,o=this.getEditorAPI(),i={};i[m]=t,o.components.data.update(e.pointer,i)},addNewSlide:function(){var e=this.getEditorAPI(),t=this.getSelectedSlideItem(),o=e.components.serialize(t.pointer);o.components=[];var i=this.slides.length,n={curr_slide:i+1};o.data[m]=this.translateTemplate("Regular_Slideshow_Slides_New_Slide_Label",n,e),this.addSlide(o,i),e.bi.event(r.events.boxSlideShow.MANAGE_SLIDES_ADD_NEW_SLIDE,f.call(this))},getMenuActionsOverrides:function(){return{toggleDefault:{enable:!1},toggleEditValue:{enable:!1},toggleEditLabel:{priority:3,label:o.translate("Regular_Slideshow_Slides_Rename")},duplicate:{priority:2,label:o.translate("Regular_Slideshow_Slides_Duplicate")},delete:{priority:1,label:o.translate("Regular_Slideshow_Slides_Delete"),enable:1<this.slides.length}}},render:l});return o.hoc.connect(o.hoc.STORES.STATE_AND_DS,function(e){var t=e.state;return{boxSlideShow:u(t)}},null,null,!1)(b)}),define("rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanelItem.rt",["react","lodash","baseUI","baseUILib","santa-editor-symbols","core"],function(i,n,a,r,e,t){"use strict";return function(){return function(){var e=this.props.slide,t=this.getCurrentSlideData(),o=this.initialBgData;return i.createElement("div",{className:n(this.getItemClassNames(e)).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},i.createElement("label",{className:"item-label"},o?i.createElement(r.Checkbox,{key:"normal-checkbox",value:this.state.checked,onChange:this.handleToggleChanged,disabled:this.isCurrentSlide(),labelAfterSymbol:!0}):null,o?i.createElement("span",{className:"slide-preview",key:"slide-preview",style:this.getBgImageUrl(this.state.checked?t:o)},this.getMediaType(this.state.checked?t:o)===this.mediaTypes.VIDEO?i.createElement("div",{key:"slide-preview-video-controls",className:"slide-preview-video-controls"},i.createElement(a.symbol,{name:"bgVideoIndicator"})):null):null,i.createElement("span",{className:"slide-name"},this.props.slideTitle)))}.apply(this,[])}}),define("rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanelItem",["react-addons-linked-state-mixin","create-react-class","prop-types","core","lodash","util","constants","rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanelItem.rt"],function(e,t,o,i,r,s,n,a){"use strict";var l=s.imageTransform,c=s.serviceTopology,p=s.backgroundUtils,d=p.getColorValue,u=p.getMediaType,g=n.MEDIA_TYPES;return t({mixins:[i.mixins.editorAPIMixin,e],displayName:"slideShowBgApplyPanelItem",propTypes:{slide:o.object.isRequired,slideTitle:o.string.isRequired,itemBgData:o.object,isCurrentSlide:o.bool,currentSlideBgData:o.object,valueLink:o.object},mediaTypes:g,getInitialState:function(){return this.origin=this.props.origin,this.initialBgData=this.props.itemBgData,{checked:this.isCurrentSlide()}},isCurrentSlide:function(){return this.props.isCurrentSlide},componentWillReceiveProps:function(e){this.isValueChanged(e)&&this.setState({checked:e.valueLink.value})},componentStateChanged:function(){this.props.valueLink.requestChange(this.state.checked,this.props.slide,this.initialBgData)},handleToggleChanged:function(e){this.setState({checked:e},this.componentStateChanged)},shouldComponentUpdate:function(e,t){return!this.isCurrentSlide()&&(this.isCheckedStateChanged(t)||this.isValueChanged(e))},isValueChanged:function(e){return null!==e.valueLink.value&&this.props.valueLink.value!==e.valueLink.value},isCheckedStateChanged:function(e){return e.checked!==this.state.checked},getItemClassNames:function(){return{"slideShow-apply-panel-item":!0,"current-slide":this.isCurrentSlide()}},getMediaType:function(e){return u(e)},getCurrentSlideData:function(){return this.props.currentSlideBgData},getBgStyleByBackgroundType:function(e){var t={backgroundColor:d(this.getEditorAPI(),e.color)},o=this.getMediaType(e);if(o!==g.COLOR){var i=o===g.IMAGE?e.mediaRef:e.mediaRef.posterImageRef,n=p.isSmallerFromContainer(i.width,i.height,50,35),a=p.getImageDisplayData(n?l.fittingTypes.TILE:l.fittingTypes.SCALE_TO_FILL,e.alignType,i.uri,i.width,i.height,50,35);t.backgroundImage="url("+s.url.joinURL(c.staticMediaUrl,a.uri)+")",r.assign(t,a.css.container)}return t},getBgImageUrl:function(e){var t=void 0;switch(this.origin){case"strip":case"box":t=this.getBgStyleByBackgroundType(e)}return t},render:a})}),define("rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanel.rt",["react","lodash","util","baseUI","baseUILib","panels","rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanelItem","helpIds"],function(i,n,a,e,r,s,l,c){"use strict";return function(){return i.createElement(s.frames.bgSubPanelFrame,(e={helpId:c.EXTERNAL.BOX_SLIDE_SHOW_BG_APPLY,className:"slide-show-apply-panel",label:"Regular_Slideshow_Apply_Panel_Header_Title"},t=n.omit(this.props,"children"),o=n.assign({},e,t),e.hasOwnProperty("style")&&(o.style=n.defaults(o.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(o.className=t.className+" "+e.className),o),i.createElement("div",{className:"slide-show-apply-panel-wrapper"},i.createElement("div",{className:"slide-show-apply-panel-description"},"\n            ",a.translate("Regular_Slideshow_Apply_Panel_Header_Description"),"\n        "),i.createElement("div",{className:"slide-show-apply-panel-all"},i.createElement(r.Checkbox,{label:"Regular_Slideshow_Apply_To_All",value:this.state.markAllSlidesDisplay,onChange:this.handleSelectAllChange,indeterminate:this.state.indeterminate,labelAfterSymbol:!0})),i.createElement(r.CustomScroll,{},i.createElement("div",{className:"slide-show-apply-panel-scrollbox slide-show-settings-panel-scrollbox"},i.createElement.apply(this,["ul",{className:"slide-show-apply-panel-scrollbox-list"},n.map(this.allSlides,function(e,t){return i.createElement("li",{key:"slide"+t},i.createElement(l,n.assign({},{valueLink:this.slidesStateChange(),ref:"slide"+t},this.getSlideProps(e))))}.bind(this))])))));var e,t,o}}),define("rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanel",["create-react-class","prop-types","core","lodash","util","coreBi","stateManagement","rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanel.rt"],function(e,t,o,c,i,n,a,r){"use strict";var s=i.hoc,l=s.connect,p=s.STORES.EDITOR_API,d=a.boxSlideShow.selectors,u=d.getAllSlides,g=d.findCurrentSlide;function m(e,t){var o=t.originalSlideBgData;return e.mediaRef&&o.mediaRef&&e.mediaRef.type===o.mediaRef.type?(e.mediaRef.id=o.mediaRef.id,"WixVideo"===e.mediaRef.type&&(e.mediaRef.posterImageRef.id=o.mediaRef.posterImageRef.id,e.imageOverlay&&(e.imageOverlay.id=o.imageOverlay&&o.imageOverlay.id))):e.mediaRef?(delete e.mediaRef.id,"WixVideo"===e.mediaRef.type&&(delete e.mediaRef.posterImageRef.id,e.imageOverlay&&delete e.imageOverlay.id)):(e.mediaRef=null,e.colorOverlay="",e.imageOverlay=null),e.id=o.id,e}var f=e({displayName:"slideShowBgApplyPanel",mixins:[o.mixins.editorAPIMixin],propTypes:{boxSlideShow:t.object},getAllSlides:function(){var e=this.getEditorAPI();return u(e.dsRead,this.props.boxSlideShow)},getInitialState:function(){var e=this.getEditorAPI();return this.selectedItems=[],this.appliedSlides=[],this.origin=this.props.origin,this.currentSlide=g(e.dsRead,this.props.boxSlideShow),this.currentSlideBgData=this.getSlideBgData(this.currentSlide),this.allSlides=this.getAllSlides(),this.itemsProps=this.getItemsProps(),{markAllSlidesDisplay:!1,indeterminate:!1}},getSlideBgData:function(e){var t=this.getEditorAPI();switch(this.origin){case"strip":case"box":return t.components.design.get(e).background}},shouldComponentUpdate:function(e,t){return this.state.markAllSlidesDisplay!==t.markAllSlidesDisplay||this.state.indeterminate!==t.indeterminate||0<this.appliedSlides.length},handleSelectAllChange:function(i){c.forEach(this.itemsProps,c.bind(function(e){var t=e.slide,o=t.id;o!==this.currentSlide.id&&(i?c.includes(this.selectedItems,o)||(this.selectedItems.push(o),this.appliedSlides.push({checked:i,originalSlideBgData:e.itemBgData,slide:t})):c.includes(this.selectedItems,o)&&(c.pull(this.selectedItems,o),this.appliedSlides.push({checked:i,originalSlideBgData:e.itemBgData,slide:t})))},this)),this.setState({markAllSlidesDisplay:i,indeterminate:!1},this.updateSlides)},getItemsProps:function(){var t=[],o=this.getEditorAPI();return c.forEach(this.allSlides,c.bind(function(e){t.push({slide:e,slideTitle:o.components.data.get(e).title,currentSlideBgData:this.currentSlideBgData,itemBgData:this.getSlideBgData(e),isCurrentSlide:this.currentSlide.id===e.id})},this)),t},getSlideProps:function(e){var t=c.find(this.itemsProps,{slide:{id:e.id}});return t.origin=this.origin,t},updateSlides:function(){var a,e,r,s,l,t=this.getEditorAPI();a=this.currentSlideBgData,e=this.appliedSlides,r=t,s=this.origin,l=void 0,c.forEach(e,function(e){switch(l=e.checked?m(c.cloneDeep(a),e):m(c.cloneDeep(e.originalSlideBgData),e),s){case"strip":i=l,n=e.slide,r.components.design.update(n,{background:i});break;case"box":t=l,o=e.slide,r.components.design.update(o,{background:t})}var t,o,i,n});var o=c.assign({total_slides:this.getAllSlides().length,num_selected_slides:this.appliedSlides.length,all_slides_selected:this.state.markAllSlidesDisplay},t.components.getDefaultBiParams(this.props.boxSlideShow));t.bi.event(n.events.boxSlideShow.APPLY_ON_OTHER_SLIDES_SELECTED_SLIDES,o),this.appliedSlides=[]},slidesStateChange:function(){var e=null;return this.allSlides.length===this.selectedItems.length+1&&(e=!0),0===this.selectedItems.length&&(e=!1),{value:e,requestChange:function(e,t,o){var i=t.id;e&&i!==this.currentSlide.id?c.includes(this.selectedItems,i)||this.selectedItems.push(i):c.pull(this.selectedItems,i),this.appliedSlides.push({checked:e,originalSlideBgData:o,slide:t});var n=this.allSlides.length===this.selectedItems.length+1,a=!n&&0<this.selectedItems.length;if(n!==this.state.markAllSlidesDisplay||a!==this.state.indeterminate){var r={markAllSlidesDisplay:n,indeterminate:a};this.setState(r,this.updateSlides)}else this.updateSlides()}.bind(this)}},render:r});return l(p,function(e,t){var o=e.editorAPI;return c.defaults({boxSlideShow:c.head(o.selection.getSelectedComponents())},t)})(f)}),define("rEditor/rootComps/panels/stateBoxPanels/stateBoxBgApplyPanelItem.rt",["react","lodash","baseUI","baseUILib","santa-editor-symbols","core"],function(i,n,a,r,e,t){"use strict";return function(){return function(){var e=this.props.state,t=this.getCurrentStateData(),o=this.initialBgData;return i.createElement("div",{className:n(this.getItemClassNames(e)).transform(function(e,t,o){t&&e.push(o)},[]).join(" ")},i.createElement("label",{className:"item-label"},o?i.createElement(r.Checkbox,{key:"normal-checkbox",value:this.state.checked,onChange:this.handleToggleChanged,disabled:this.isCurrentState(),labelAfterSymbol:!0}):null,o?i.createElement("span",{className:"slide-preview",key:"slide-preview",style:this.getBgImageUrl(this.state.checked?t:o)},this.getMediaType(this.state.checked?t:o)===this.mediaTypes.VIDEO?i.createElement("div",{key:"slide-preview-video-controls",className:"slide-preview-video-controls"},i.createElement(a.symbol,{name:"bgVideoIndicator"})):null):null,i.createElement("span",{className:"slide-name"},this.props.stateTitle)))}.apply(this,[])}}),define("rEditor/rootComps/panels/stateBoxPanels/stateBoxBgApplyPanelItem",["react-addons-linked-state-mixin","create-react-class","prop-types","core","lodash","util","constants","rEditor/rootComps/panels/stateBoxPanels/stateBoxBgApplyPanelItem.rt"],function(e,t,o,i,r,s,n,a){"use strict";var l=s.imageTransform,c=s.serviceTopology,p=s.backgroundUtils,d=p.getColorValue,u=p.getMediaType,g=n.MEDIA_TYPES;return t({mixins:[i.mixins.editorAPIMixin,e],displayName:"stateBoxBgApplyPanelItem",propTypes:{state:o.object.isRequired,stateTitle:o.string.isRequired,itemBgData:o.object,isCurrentState:o.bool,currentStateBgData:o.object,valueLink:o.object},mediaTypes:g,getInitialState:function(){return this.origin=this.props.origin,this.initialBgData=this.props.itemBgData,{checked:this.isCurrentState()}},isCurrentState:function(){return this.props.isCurrentState},componentWillReceiveProps:function(e){this.isValueChanged(e)&&this.setState({checked:e.valueLink.value})},componentStateChanged:function(){this.props.valueLink.requestChange(this.state.checked,this.props.state,this.initialBgData)},handleToggleChanged:function(e){this.setState({checked:e},this.componentStateChanged)},shouldComponentUpdate:function(e,t){return!this.isCurrentState()&&(this.isCheckedStateChanged(t)||this.isValueChanged(e))},isValueChanged:function(e){return null!==e.valueLink.value&&this.props.valueLink.value!==e.valueLink.value},isCheckedStateChanged:function(e){return e.checked!==this.state.checked},getItemClassNames:function(){return{"slideShow-apply-panel-item":!0,"current-slide":this.isCurrentState()}},getMediaType:function(e){return u(e)},getCurrentStateData:function(){return this.props.currentStateBgData},getBgStyleByBackgroundType:function(e){var t={backgroundColor:d(this.getEditorAPI(),e.color)},o=this.getMediaType(e);if(o!==g.COLOR){var i=o===g.IMAGE?e.mediaRef:e.mediaRef.posterImageRef,n=p.isSmallerFromContainer(i.width,i.height,35),a=p.getImageDisplayData(n?l.fittingTypes.TILE:l.fittingTypes.SCALE_TO_FILL,e.alignType,i.uri,i.width,i.height,50,35);t.backgroundImage="url("+s.url.joinURL(c.staticMediaUrl,a.uri)+")",r.assign(t,a.css.container)}return t},getBgImageUrl:function(e){var t=void 0;switch(this.origin){case"strip":case"box":t=this.getBgStyleByBackgroundType(e)}return t},render:a})}),define("rEditor/rootComps/panels/stateBoxPanels/stateBoxBgApplyPanel.rt",["react","lodash","util","baseUI","baseUILib","panels","rEditor/rootComps/panels/stateBoxPanels/stateBoxBgApplyPanelItem","helpIds"],function(i,n,a,e,r,s,l,c){"use strict";return function(){return i.createElement(s.frames.bgSubPanelFrame,(e={helpId:c.EXTERNAL.STATE_BOX_BG_APPLY,className:"slide-show-apply-panel",label:"multiStateBox_ChangeBackground_ApplyOther_Button"},t=n.omit(this.props,"children"),o=n.assign({},e,t),e.hasOwnProperty("style")&&(o.style=n.defaults(o.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(o.className=t.className+" "+e.className),o),i.createElement("div",{className:"slide-show-apply-panel-wrapper"},i.createElement("div",{className:"slide-show-apply-panel-description"},"\n            ",a.translate("multiStateBox_ApplyOtherStates_ApplyBackground_Label"),"\n        "),i.createElement("div",{className:"slide-show-apply-panel-all"},i.createElement(r.Checkbox,{label:"multiStateBox_ApplyOtherStates_AllStatesCheckbox_Label",value:this.state.markAllStatesDisplay,onChange:this.handleSelectAllChange,indeterminate:this.state.indeterminate,labelAfterSymbol:!0})),i.createElement(r.CustomScroll,{},i.createElement("div",{className:"slide-show-apply-panel-scrollbox slide-show-settings-panel-scrollbox"},i.createElement.apply(this,["ul",{className:"slide-show-apply-panel-scrollbox-list"},n.map(this.allStates,function(e,t){return i.createElement("li",{key:"state"+t},i.createElement(l,n.assign({},{valueLink:this.statesStateChange(),ref:"state"+t},this.getStateProps(e))))}.bind(this))])))));var e,t,o}}),define("rEditor/rootComps/panels/stateBoxPanels/stateBoxBgApplyPanel",["create-react-class","prop-types","core","lodash","util","coreBi","stateManagement","rEditor/rootComps/panels/stateBoxPanels/stateBoxBgApplyPanel.rt"],function(e,t,o,l,i,n,a,r){"use strict";var s=i.hoc,c=s.connect,p=s.STORES.EDITOR_API,d=a.boxSlideShow.selectors,u=d.getAllSlides,g=d.findCurrentSlide,m=a.stateBox.selectors.getStateTitle;var f=e({displayName:"stateBoxBgApplyPanel",mixins:[o.mixins.editorAPIMixin],propTypes:{stateBox:t.object,getStateTitle:t.func},getAllStates:function(){var e=this.getEditorAPI();return u(e.dsRead,this.props.stateBox)},getInitialState:function(){var e=this.getEditorAPI();return this.selectedItems=[],this.appliedStates=[],this.origin=this.props.origin,this.currentState=g(e.dsRead,this.props.stateBox),this.currentStateBgData=this.getBgData(this.currentState),this.allStates=this.getAllStates(),this.itemsProps=this.getItemsProps(),{markAllStatesDisplay:!1,indeterminate:!1}},getBgData:function(e){return this.getEditorAPI().components.design.get(e).background},shouldComponentUpdate:function(e,t){return this.state.markAllStatesDisplay!==t.markAllStatesDisplay||this.state.indeterminate!==t.indeterminate||0<this.appliedStates.length},handleSelectAllChange:function(i){l.forEach(this.itemsProps,l.bind(function(e){var t=e.state,o=t.id;o!==this.currentState.id&&(i?l.includes(this.selectedItems,o)||(this.selectedItems.push(o),this.appliedStates.push({checked:i,original:e.itemBgData,state:t})):l.includes(this.selectedItems,o)&&(l.pull(this.selectedItems,o),this.appliedStates.push({checked:i,original:e.itemBgData,state:t})))},this)),this.setState({markAllStatesDisplay:i,indeterminate:!1},this.updateStates)},getItemsProps:function(){var t=[];return l.forEach(this.allStates,l.bind(function(e){t.push({state:e,stateTitle:this.props.getStateTitle(e),currentStateBgData:this.currentStateBgData,itemBgData:this.getBgData(e),isCurrentState:this.currentState.id===e.id})},this)),t},getStateProps:function(e){var t=l.find(this.itemsProps,{state:{id:e.id}});return t.origin=this.origin,t},updateStates:function(){var r,e,s,t=this.getEditorAPI();r=this.currentStateBgData,e=this.appliedStates,s=t,this.origin,l.forEach(e,function(e){var t,o,i=e.state,n=e.checked,a=e.original;return s.components.design.update(i,(t=l.cloneDeep({background:n?r:a}),o=a,t.mediaRef&&o&&o.mediaRef&&t.mediaRef.type===o.mediaRef.type?(t.mediaRef.id=o.mediaRef.id,"WixVideo"===t.mediaRef.type&&(t.mediaRef.posterImageRef.id=o.mediaRef.posterImageRef.id,t.imageOverlay&&(t.imageOverlay.id=o.imageOverlay&&o.imageOverlay.id))):t.mediaRef?(delete t.mediaRef.id,"WixVideo"===t.mediaRef.type&&(delete t.mediaRef.posterImageRef.id,t.imageOverlay&&delete t.imageOverlay.id)):(t.mediaRef=null,t.colorOverlay="",t.imageOverlay=null),o&&(t.id=o.id),t))});var o=l.assign({total_states:this.getAllStates().length,num_selected_states:this.appliedStates.length,all_states_selected:this.state.markAllStatesDisplay},t.components.getDefaultBiParams(this.props.stateBox));t.bi.event(n.events.boxSlideShow.APPLY_ON_OTHER_SLIDES_SELECTED_SLIDES,o),this.appliedStates=[]},statesStateChange:function(){var e=null;return this.allStates.length===this.selectedItems.length+1&&(e=!0),0===this.selectedItems.length&&(e=!1),{value:e,requestChange:function(e,t,o){var i=t.id;e&&i!==this.currentState.id?l.includes(this.selectedItems,i)||this.selectedItems.push(i):l.pull(this.selectedItems,i),this.appliedStates.push({checked:e,original:o,state:t});var n=this.allStates.length===this.selectedItems.length+1,a=!n&&0<this.selectedItems.length;if(n!==this.state.markAllStatesDisplay||a!==this.state.indeterminate){var r={markAllStatesDisplay:n,indeterminate:a};this.setState(r,this.updateStates)}else this.updateStates()}.bind(this)}},render:r});return c(p,function(e,t){var o=e.editorAPI,i=e.dsRead,n=t.stateBox||l.head(o.selection.getSelectedComponents());return l.defaults({stateBox:n,getStateTitle:function(e){return m(i,n,e)}},t)})(f)}),define("rEditor/rootComps/panels/stateBoxPanels/stateBoxManageStatesPanel.rt",["react","lodash","baseUI","baseUILib","compPanelInfra","helpIds"],function(e,t,o,i,n,a){"use strict";return function(){return e.createElement(n.compPanelFrame,t.assign({},{contentClass:"box-slide-show-manage-slides-panel",title:"multiStateBox_ManageStates_Header_Label",helpId:a.EXTERNAL.STATE_BOX_MANAGE_STATES},this.getFrameProps()),e.createElement(i.SortByDragList,{selectable:!0,value:this.getStates(),selectItem:this.selectState,menuActionsOverrides:this.getMenuActionsOverrides(),enableSetAsDefault:!1,labelValidator:this.getEditIdValidators(),valueValidator:this.getEditIdValidators(),itemMoved:this.moveState,duplicateItem:this.duplicateState,deleteItem:this.deleteState,itemChanged:this.changeStateName,itemValuePrefix:"ID",itemLabelPrefix:this.getLabelValuePrefix(),onValueEditStart:this.valueEditStart,onLabelEditStart:this.valueEditStart,onValueEditEnd:this.valueEditEnd,onLabelEditEnd:this.valueEditEnd,labelPlaceholder:"multiStateBox_ManageStates_State_Invalid_Name_Placeholder",valuePlaceholder:"multiStateBox_ManageStates_State_Invalid_Name_Placeholder"}),e.createElement("div",{className:"button-wrapper"},e.createElement(o.button,{className:"mainButton",label:"multiStateBox_ManageStates_State_Duplicate_Button",onClick:this.duplicateCurrentState}),e.createElement(o.button,{className:"secondaryButton btn-text",label:"multiStateBox_ManageStates_State_AddState_Link",onClick:this.addNewState})))}}),define("rEditor/rootComps/panels/stateBoxPanels/stateBoxManageStatesPanel",["create-react-class","prop-types","lodash","util","compPanelInfra","boxSlideshow","coreBi","stateManagement","rEditor/rootComps/panels/stateBoxPanels/stateBoxManageStatesPanel.rt"],function(e,t,r,o,i,n,s,c,a){"use strict";var l=o.hoc,p=l.connect,d=l.STORES.EDITOR_API,u=c.boxSlideShow.selectors,g=u.getAllSlides,m=u.findCurrentSlide,f=c.selection.selectors.getFocusedNonAppWidgetContainer,h=c.stateBox.selectors,y=h.getStateTitle,b=h.hasTitles,v=n.utils.boxSlideShowUtils;function S(e,t,o,i,n){var a=r.assign({id:o.id,label:e.getStateTitle(o),pointer:o},n&&{value:e.getNickname(o)});return a.id===i.id&&(a.selected=!0),a}function E(t,e,o,i,n){return r.map(e,function(e){return S(t,0,e,i,n)})}var P=e({displayName:"StateBoxManageStatesPanel",mixins:[i.compPanelMixin,o.translationMixin],propTypes:{stateBox:t.object,allStatesPointers:t.array,statesHasTitle:t.bool,sendBi:t.func,preventMouseDown:t.func,allowMouseDown:t.func,hideQuickTip:t.func,utils:t.object},getInitialState:function(){var e=m(this.getEditorAPI().dsRead,this.props.stateBox);return this.isCurrentlyInOperation=!1,{selectedState:e,editIndex:-1}},componentWillMount:function(){this.states=this.getStates()},componentWillUpdate:function(e,t){this.states=E(this.props.utils,this.props.allStatesPointers,this.props.stateBox,t.selectedState,this.props.statesHasTitle)},componentWillReceiveProps:function(e){this.states=E(this.props.utils,this.props.allStatesPointers,e.stateBox,this.state.selectedState,this.props.statesHasTitle);var t=m(this.getEditorAPI().dsRead,e.stateBox);r.isEqual(t,this.state.selectedState)||this.setState({selectedState:t})},getStates:function(){return E(this.props.utils,this.props.allStatesPointers,this.props.stateBox,this.state.selectedState,this.props.statesHasTitle)},getSelectedStateItem:function(){return r.find(this.states,{id:this.state.selectedState.id})},startOperation:function(){this.props.preventMouseDown(),this.isCurrentlyInOperation=!0},endOperation:function(){this.props.preventMouseDown(),this.isCurrentlyInOperation=!1},isInOperation:function(){return this.isCurrentlyInOperation},selectState:function(e,t){var o=this;if(!this.isInOperation()){var i=this.getEditorAPI();this.startOperation(),this.setState({selectedState:e.pointer},function(){i.components.behaviors.execute(o.props.stateBox,"changeState",{stateIndex:t},o.endOperation)}),this.props.hideQuickTip()}},moveState:function(e,t){var o=this;if(e!==t&&!this.isInOperation()){var i=this.getEditorAPI(),n=r.findIndex(this.getStates(),{selected:!0}),a=this.states[e].pointer;i.components.arrangement.moveToIndex(a,t,!1),this.props.sendBi(s.events.boxSlideShow.MANAGE_SLIDES_SLIDE_REORDERED),i.dsActions.waitForChangesApplied(function(){var e=r.findIndex(o.getStates(),{selected:!0});n!==e&&(o.startOperation(),i.components.behaviors.execute(o.props.stateBox,"changeState",{stateIndex:t},o.endOperation))})}},addState:function(e,t){var o=this,i=this.getEditorAPI(),n=i.components.add(this.props.stateBox,e);i.components.arrangement.moveToIndex(n,t,!0),this.getEditorAPI().history.add("added a state to state show"),i.dsActions.waitForChangesApplied(function(){var e=S(i,o.props.stateBox,n,o.state.selectedState);o.selectState(e,t)})},duplicateState:function(e,t){var o=this.getEditorAPI().components.serialize(e.pointer);this.addState(o,t+1)},duplicateCurrentState:function(){var e=this.getSelectedStateItem(),t=this.states.length;this.duplicateState(e,t-1),this.props.sendBi(s.events.boxSlideShow.MANAGE_SLIDES_DUPLICATE_CURRENT_SLIDE)},deleteState:function(e,t,o){var i=this;if(!(o.length<=1)){var n=this.getEditorAPI();n.components.remove(e.pointer).then(function(){n.history.add("removed a state from state show");var e=m(n.dsRead,i.props.stateBox);i.setState({selectedState:e})})}},changeStateName:function(e){var t=this,o=e.value||e.label,i=this.getEditorAPI();i.components.code.setNickname(e.pointer,o),i.dsActions.waitForChangesApplied(function(){i.selection.selectComponentByCompRef(t.props.stateBox)})},addNewState:function(){var e=this.getEditorAPI(),t=this.getSelectedStateItem(),o=e.components.serialize(t.pointer);o.components=[];var i=this.states.length;this.addState(o,i),this.props.sendBi(s.events.boxSlideShow.MANAGE_SLIDES_ADD_NEW_SLIDE)},getEditIdValidators:function(){return[{validator:o.validate.notEmptyString,invalidMessage:"multiStateBox_ManageStates_State_Invalid_Name"},{validator:this.isEditingValueUnique,invalidMessage:"multiStateBox_ManageStates_State_Invalid_Name_Unique"},{validator:o.validate.eventName,invalidMessage:"multiStateBox_ManageStates_State_Invalid_Name_Characters"}]},valueEditStart:function(e){this.setState({editIndex:e})},valueEditEnd:function(){this.setState({editIndex:-1})},isEditingValueUnique:function(e){return-1===this.state.editIndex||!r.includes(this.getEditExistingValues(),e)},getEditExistingValues:function(){var e=this.states.map(function(e){return e.value||e.label});return e.splice(this.state.editIndex,1),e},getLabelValuePrefix:function(){return!this.props.statesHasTitle&&"ID"},getMenuActionsOverrides:function(){var e=this.props.statesHasTitle;return{toggleDefault:{enable:!1},toggleEditValue:{priority:3,label:o.translate("multiStateBox_ManageStates_State_Rename"),enable:e},toggleEditLabel:{priority:3,label:o.translate("multiStateBox_ManageStates_State_Rename"),enable:!e},duplicate:{priority:2,label:o.translate("multiStateBox_ManageStates_State_Duplicate")},delete:{priority:1,label:o.translate("multiStateBox_ManageStates_State_Delete"),enable:1<this.states.length}}},render:a});return p(d,function(e,t,o){var i=e.editorAPI,n=e.state,a=e.dsRead,r=f(n,a),s=i.components.getDefaultBiParams(r),l=g(a,r);return{stateBox:r,allStatesPointers:l,statesHasTitle:b(a,r,l),sendBi:function(e){return o(c.editorPlugins.bi.actions.event(e,s))},preventMouseDown:function(){return i.preventMouseDown()},allowMouseDown:function(){return i.allowMouseDown()},hideQuickTip:function(){return v.hideQuickTip(i)},utils:{getStateTitle:function(e){return y(a,r,e)},getNickname:function(e){return c.editorPlugins.components.selectors.getNickname(e,a)}}}})(P)}),define("rEditor/rootComps/panels/panels",["rEditor/rootComps/panels/popup/overlaySettingsPanel/overlaySettingsPanel","rEditor/rootComps/panels/myMediaPanel","rEditor/rootComps/panels/backgroundPanel/backgroundPanel","rEditor/rootComps/panels/mediaManagerPanel/mediaManagerPanel","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgImageSettingsPanel","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgVideoSettingsPanel","rEditor/rootComps/panels/backgroundPanel/backgroundSubPanels/bgApplyPanel","rEditor/rootComps/panels/siteSettings/siteSettingsPanel","rEditor/rootComps/panels/editorVersionInfoPanel/editorVersionInfoPanel","rEditor/rootComps/panels/applyStylePanel/applyStylePanel","rEditor/rootComps/panels/boxSlideShowPanels/boxSlideShowManageSlidesPanel","rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanel","rEditor/rootComps/panels/boxSlideShowPanels/slideShowBgApplyPanelItem","rEditor/rootComps/panels/stateBoxPanels/stateBoxBgApplyPanel","rEditor/rootComps/panels/stateBoxPanels/stateBoxBgApplyPanelItem","rEditor/rootComps/panels/stateBoxPanels/stateBoxManageStatesPanel"],function(e,t,o,i,n,a,r,s,l,c,p,d,u,g,m,f){"use strict";return{myMediaPanel:t,backgroundPanel:o,mediaManagerPanel:i,bgImageSettingsPanel:n,bgVideoSettingsPanel:a,backgroundApplyPanel:r,siteSettingsPanel:s,popup:{overlaySettingsPanel:e},editorVersionInfoPanel:l,applyStylePanel:c,boxSlideShowManageSlidesPanel:p,slideShowBgApplyPanel:d,slideShowBgApplyPanelItem:u,stateBoxBgApplyPanel:g,stateBoxBgApplyPanelItem:m,stateBoxManageStatesPanel:f}}),define("rEditor",["rEditor/rootComps/editorMain","rEditor/rootComps/editor","rEditor/rootComps/panels/panels","rEditor/app/EditorAPI","rEditor/app/APISections/menuWrapper","rEditor/rootComps/gfpp/gfppModel"],function(e,t,o,i,n,a){"use strict";return{editorMain:e,editorComp:t,panels:o,EditorAPI:i,menuWrapper:n,gfppModel:a}});
//# sourceMappingURL=rEditor.min.js.map