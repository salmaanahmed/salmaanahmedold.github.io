define("documentServices-santa",["lodash","coreUtils","componentsCore","skins","zepto","experiment","santa-core-utils","utils","mobx","compUtils","core","layout","document-services-implementation","color","document-services-schemas","coreMultilingual","host-platform-api","wixappsClassics","tpa","wixImmutable","memoizeAPI","document-services","speakingurl","mobileCore","wix-ui-santa/componentsMetaData.bundle.min"],function(t,e,n,i,o,s,a,r,u,l,c,p,d,h,g,f,m,P,y,v,I,A,S,D,b){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=700)}({0:function(e,n){e.exports=t},1:function(t,n){t.exports=e},10:function(t,e){t.exports=a},127:function(t,e,n){var i,o;i=[n(0),n(226),n(227),n(1),n(16),n(8)],void 0===(o=function(t,e,n,i,o,s){"use strict";var a=new i.SiteDataPrivates;function r(e,i,r){var u=e;r||(u=t.merge(new o.FullSiteData,e)),n.call(this,u,i),a.set(this,u),this.createDisplayedPage=function(t){i.createDisplayedPage(t)},this.createDisplayedNode=function(t){i.createDisplayedNode(t)},this.activateModeById=function(t,e,n){i.modes.activateModeById(t,e,n)},this.deactivateModeById=function(t,e,n){i.modes.deactivateModeById(t,e,n)},this.isExperimentOpen=s.isOpen,this.getSiteAnimationsService=function(){return u.animations}}function u(){return a.get(this).getAllPossiblyRenderedRoots()}return r.prototype=t.create(n.prototype,t.assign(e(t.noop),{constructor:r,hasPendingFonts:function(){return!1},isComponentRenderedOnSite:function(){return!0},navigateToPage:t.noop,scrollToComponent:t.noop,getAllRenderedRootIds:u,getRootIdsWhichShouldBeRendered:u})),r}.apply(e,i))||(t.exports=o)},16:function(t,e){t.exports=r},20:function(t,e){t.exports=u},22:function(t,e){t.exports=l},223:function(t,e,n){var i,o;i=[n(0),n(224),n(703),n(127),n(705),n(706),n(228),n(229),n(230),n(28),n(231),n(8),n(710)],void 0===(o=function(t,e,n,i,o,s,a,r,u,l,c,p){"use strict";var d=l.bi,h=l.constants;function g(n,s){var l=s.siteData,p=s.siteDataAPI;n.shouldRender||(this.siteAPI=n.isTest?new o(l,p):new i(l,p),this.setOperationsQueue=new a),this.config=t(n).omit(["modules"]).cloneDeep(),this.runtimeConfig={stylesPerPage:f(this.config,l.getAllPageIds().length,l),shouldThrowOnDeprecation:!1,nextHistorySnapshotId:null,firstSaveExtraPayload:{},trace:{isTracing:!1,log:[],readLog:[],shouldLogConsoleTraces:!1,lastRecordedUploadedHandleIndex:0},supportMobile:!!t.isUndefined(n.supportMobile)||n.supportMobile};var h=t.pick(n,["pathsInJsonData","isReadOnly","origin","nonUndoableInitialDataPaths","disableMobileConversion"]),g=s.cache,m=g.getBoundCacheInstance(!0);this.pointers=s.pointers;var P=new e({siteData:l,fullJson:s.fullPagesData},s.dataLoadedRegistrar,m,h),y=new u(P,this.pointers,s.displayedDal),v=p.updateDisplayedNodesLayout.bind(p),I=new c(s.fullPagesData,s.displayedDal,m,g.getBoundCacheInstance(!1),s.pointers,v);this.dal=new r(P,s.displayedDal,y,I,s.pointers,d.error.bind(this)),this.siteDataAPI=p}function f(e,n,i){if("onboarding"===t.get(e,["origin"])&&!p.isOpen("ADI_MoveCustomStyleFromMasterPage"))return!1;if(t.get(i.getMasterPageStyleSettings(),"stylesPerPage")===h.STYLES.STYLES_PER_PAGE_VER)return!0;var o=p.getValue("moveCustomStyleFromMasterPage");return!(!o||"old"===o)&&(!p.isOpen("revertStylesBackToMasterPage")&&("ALL"===o||n<=parseInt(o,10)))}return g.prototype.initiateSiteAPI=function(t){this.siteAPI=new n(t),this.setOperationsQueue=new s(this)},g}.apply(e,i))||(t.exports=o)},224:function(t,e,n){var i,o;i=[n(0),n(20),n(1),n(702),n(28),n(225)],void 0===(o=function(t,e,n,i,o,s){"use strict";var a=o.constants,r=n.objectUtils.cloneDeep;function u(n,o,a,r){if(0!==arguments.length){this.jsonsRootsMap=function(e){var n=e.pathsInJsonData,i={};return t.forEach(n,function(e,n){t.forEach(e,function(e){var o=t.get(e,"path.0");i[o]=n})}),i}(r),this.jsonData=n,this.pathsCache=a;var u,c,p=t(r.pathsInJsonData).values().flatten().map(function(e){return t.assign({},e,{path:b(e.path,this.jsonsRootsMap)})}.bind(this)).value();t.forEach(r.pathsInJsonData,function(e,n){var i,o;i=e,o=this.jsonData[n],t(i).reject("optional").map("path").forEach(function(t){s.validatePath(t,o)})}.bind(this)),this.isReadOnly=!!r.isReadOnly,this.nonUndoableInitialDataPaths=r.nonUndoableInitialDataPaths,this.immutableSiteJsons=i.fromJS((u=p,c=this.jsonData,t(u).reject("optional").map("path").filter(l.bind(null,c)).transform(function(n,i){var o=e.toJS(t.get(c,i),!1);t.set(n,i,o)},{}).value())),this.isReadOnly||this.setByPath(["origin"],r.origin),this.historyDictionary={},this.persistentInitialData=[],this.takeSnapshot("initialState"),this.immutable=t.mapValues(C,function(t){return t.bind(this)}.bind(this)),o&&o(d.bind(this))}}function l(t,e,n){return s.validatePathExist(t,e,n)}function c(t){return t[0]===a.JSON_TYPES.FULL}function p(e,n){if(c(n)){var i=[].concat(n),o=i.pop(),s=t.get(e,i);t.isArray(s)?s.splice(o,1):delete s[o]}}function d(t,e){t=b(t,this.jsonsRootsMap),y.call(this,t,e),this.persistentInitialData.push({path:t,immutableData:i.fromJS(e)})}var h=["deletedPagesMap"];function g(e,n,i){return!t.isUndefined(e.getIn(i.path))||function(e,n,i){var o=t.findIndex(i,function(t){return"pagesData"===t});if(-1===o)return!1;var s=i[o+1],a=b(h,n).concat(s);return e.getIn(a)}(e,n,i.path)}function f(e,n,o){return n.length?t(n).sortBy(function(t){return-t.path.length}).reject(g.bind(null,e,o)).reduce(function(e,n){return e.updateIn(n.path,t.constant(n.immutableData))},i.fromJS({})):{}}function m(t){return t&&t.toJSON?t.toJSON():t}function P(e,n){if(e instanceof i.Map&&n instanceof i.Map){var o=t.difference(e.keySeq().toJS(),n.keySeq().toJS());return o.length&&(e=t.reduce(o,function(t,e){return t.remove(e)},e)),e.merge(n)}return n}function y(t,e){v(t=b(t,this.jsonsRootsMap),this.jsonData,this.jsonsRootsMap);var n=i.fromJS(e);return this.immutableSiteJsons=this.immutableSiteJsons.updateIn(t,function(t){return P(t,n)}),S(this.jsonData,r(e),t,this.pathsCache),!0}function v(e,n,i){var o=t.head(e),a=t.values(i),r=t.includes(a,o),u=r?n[o]:n;e=r?e.slice(1):e,s.validatePath(e,u)}function I(e,n,o){return this.immutableSiteJsons=this.immutableSiteJsons.updateIn(e,function(s){if(!(s instanceof i.List))throw new Error("item at path - "+e+" is not an array");if(t.isNumber(o)){if(o>s.size||o<0)throw new Error("Index out of bound");return s.splice(o,0,i.fromJS(n))}return s.push(i.fromJS(n))}),D(this.jsonData,this.immutableSiteJsons,e,this.pathsCache).length-1}function A(e,n){if(!t.isPlainObject(n))throw new Error(n+" is not an object");return this.immutableSiteJsons=this.immutableSiteJsons.updateIn(e,function(t){if(!(t instanceof i.Map))throw new Error("value in path - "+e+" is not an object");return t.merge(i.fromJS(n))}),D(this.jsonData,this.immutableSiteJsons,e,this.pathsCache),!0}function S(e,n,i,o){c(i)&&(t.set(e,i,n),o&&o.resetValidations())}function D(t,e,n,i){var o=e.getIn(n);if(!c(n))return o.size;var s=m(o);return S(t,s,n,i),s}function b(e,n){if(!e||!t.isArray(e))return e;var i=n[t.head(e)];return e.length>1&&n[e[1]]===e[0]||i||(console.error("path is not defined in json config: "+e),i="siteData"),i?[i].concat(e):e}var C={getSnapshotByTagAndIndex:function(t,e){if(!this.historyDictionary[t]||this.historyDictionary[t].length<=e||e<0)throw new Error("requested index in history stack is out of bound");var n=this.historyDictionary[t][e],i=f(n,this.persistentInitialData,this.jsonsRootsMap);return n.mergeDeep(i).flatten(1)},getLastSnapshotByTagName:function(t){return this.historyDictionary[t]&&this.historyDictionary[t].length?this.immutable.getSnapshotByTagAndIndex(t,this.historyDictionary[t].length-1):null},getInitialSnapshot:function(){return this.immutable.getSnapshotByTagAndIndex("initialState",0)},getCurrentSnapshot:function(){var t=this.immutableSiteJsons,e=f(t,this.persistentInitialData,this.jsonsRootsMap);return t.mergeDeep(e).flatten(1)},getByPath:function(t){return v(t=b(t,this.jsonsRootsMap),this.jsonData,this.jsonsRootsMap),this.immutableSiteJsons.getIn(t)}};return u.prototype={setByPath:function(e,n){if(this.isReadOnly)throw new Error("DAL is in read only state, can't set");if(!t.isArray(e))throw new Error("path type is not an array - "+e);return function(e){return t.some(this.nonUndoableInitialDataPaths,function(n){var i=n.path,o=n.innerDepth||0,s=i.length+o;return e.length===s&&t.startsWith(e.join("."),i.join("."))})&&!t.some(this.persistentInitialData,{path:e})}.call(this,e)?d.call(this,e,n):y.call(this,e,n)},setByPathWithMutation:function(e,n){if(this.isReadOnly)throw new Error("DAL is in read only state, can't set");if(!t.isArray(e))throw new Error("path type is not an array - "+e);return function(t,e){v(t=b(t,this.jsonsRootsMap),this.jsonData,this.jsonsRootsMap);var n=i.fromJS(e);return this.immutableSiteJsons=this.immutableSiteJsons.withMutations(function(e){e.updateIn(t,function(t){return P(t,n)})}),S(this.jsonData,r(e),t,this.pathsCache),!0}.call(this,e,n)},set:function(t,e){var n=this.pathsCache.getPath(t,!0);return this.setByPath(n,e)},push:function(t,e,n,i){if(this.isReadOnly)throw new Error("DAL is in read only state, can't push");var o=this.pathsCache.getPath(t),s=b(o,this.jsonsRootsMap),a=I.call(this,s,e,i);if(n){var r=o;r.push(a),this.pathsCache.setPath(n,r)}},pushByPath:function(t,e,n){if(this.isReadOnly)throw new Error("DAL is in read only state, can't push");return v(t=b(t,this.jsonsRootsMap),this.jsonData,this.jsonsRootsMap),I.call(this,t,e,n)},mergeByPath:function(t,e){if(this.isReadOnly)throw new Error("DAL is in read only state, can't merge");return v(t=b(t,this.jsonsRootsMap),this.jsonData,this.jsonsRootsMap),A.call(this,t,e)},merge:function(t,e){if(this.isReadOnly)throw new Error("DAL is in read only state, can't merge");var n=b(this.pathsCache.getPath(t),this.jsonsRootsMap);return A.call(this,n,e)},getByPath:function(e){return v(e=b(e,this.jsonsRootsMap),this.jsonData,this.jsonsRootsMap),c(e)?r(t.get(this.jsonData,e)):m(this.immutable.getByPath(e))},get:function(t){var e=b(this.pathsCache.getPath(t),this.jsonsRootsMap);if(e)return this.getByPath(e)},isExist:function(t){return!!this.pathsCache.getPath(t)},remove:function(t){if(this.isReadOnly)throw new Error("DAL is in read only state, can't remove");var e=b(this.pathsCache.getPath(t),this.jsonsRootsMap);e&&(this.immutableSiteJsons=this.immutableSiteJsons.deleteIn(e),p(this.jsonData,e),this.pathsCache&&this.pathsCache.resetValidations())},removeByPath:function(t){if(t=b(t,this.jsonsRootsMap),this.isReadOnly)throw new Error("DAL is in read only state, can't remove");v(t,this.jsonData,this.jsonsRootsMap),this.immutableSiteJsons=this.immutableSiteJsons.deleteIn(t),p(this.jsonData,t),this.pathsCache&&this.pathsCache.resetValidations()},getKeysByPath:function(e){v(e=b(e,this.jsonsRootsMap),this.jsonData,this.jsonsRootsMap);var n=this.getByPath(e);if(!t.isPlainObject(n))throw new Error("Can not get keys of an element that isn't a plain object");return t.keys(n)},getKeys:function(e){var n=b(this.pathsCache.getPath(e),this.jsonsRootsMap);if(n){var i=this.getByPath(n);if(!t.isPlainObject(i))throw new Error("Can not get keys of an element that isn't a plain object");return t.keys(i)}},isPathExist:function(t){return l(this.jsonData,b(t,this.jsonsRootsMap),!0)},getPointerJsonType:function(t){var e=this.pathsCache.getPath(t,!0);return this.getPathJsonType(e)},getPathJsonType:function(e){return this.jsonsRootsMap[t.head(e)]},takeSnapshot:function(t){return this.historyDictionary[t]=this.historyDictionary[t]||[],this.historyDictionary[t].push(this.immutableSiteJsons),this.historyDictionary[t].length-1},duplicateLastSnapshot:function(e,n){this.historyDictionary[e]=this.historyDictionary[e]||[];var i=this.jsonsRootsMap,o=t.last(this.historyDictionary[e])||t.head(this.historyDictionary.initialState),s=t.reduce(n,function(e,n){var o=n.path,s=n.value,a=b(o,i);return t.isUndefined(s)?e.deleteIn(a):e.updateIn(a,function(){return s})},o);return this.historyDictionary[e].push(s),this.historyDictionary[e].length-1},removeLastSnapshot:function(t){this.historyDictionary[t]&&this.historyDictionary[t].pop()},getLastSnapshotByTagName:function(t,e){return this.historyDictionary[t]&&this.historyDictionary[t].length?this.getSnapshotByTagAndIndex(t,this.historyDictionary[t].length-1,e):null},getInitialSnapshot:function(t){return this.getSnapshotByTagAndIndex("initialState",0,t)},getSnapshotByTagAndIndex:function(e,n,i){if(!this.historyDictionary[e]||this.historyDictionary[e].length<=n||n<0)throw new Error("requested index in history stack is out of bound");var o=this.historyDictionary[e][n],s=f(o,this.persistentInitialData,this.jsonsRootsMap),a=o.mergeDeep(s);if(i)return function(e,n,i){return t(e).map(function(e){return t.isString(e)?[e]:e}).reduce(function(t,e){return t[e]=m(n.getIn(b(e,i))),t},{})}(i,a,this.jsonsRootsMap);var r=a.toJS(),u=r.origin,l=t.omit(r,"origin");return t.transform(l,function(e,n){return t.assign(e,n)},{origin:u})},wasValueChangedSinceLastSnapshot:function(e,n){var o=this.historyDictionary[e];if(!o)throw new Error("No such tag name - "+e);var s=t.last(o);if(!s)throw new Error("There is no snapshot under tag name - "+e);var a=b(this.pathsCache.getPath(n,!0),this.jsonsRootsMap),r=this.immutableSiteJsons.getIn(a),u=s.getIn(a);return!i.is(r,u)}},u}.apply(e,i))||(t.exports=o)},225:function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){"use strict";function e(e,i,o){if(o){var s=n(e,i,i.length);return!t.isUndefined(s)}return function(e){return function(t){return"[object Object]"===Object.prototype.toString.call(t)}(e)||t.isArray(e)}(n(e,i,i.length-1))}function n(e,n,i){for(var o=e,s=0;s<i&&(o=o[n[s]],!t.isUndefined(o));s++);return o}return{validatePath:function(n,i,o){if(!t.isArray(n))throw new Error("path type is not an array - "+n);if(!e(i,n,o))throw new Error("path does not exist - "+n);return!0},validatePathExist:e,validatePathExistsAndCorrect:function(e,i,o){if(!i)return!1;var s=n(e,i,i.length);return!t.isUndefined(s)&&(!o||o(s))}}}.apply(e,i))||(t.exports=o)},226:function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){"use strict";var e={registerStateChange:"mediaAspect",unregisterStateChange:"mediaAspect",executeAction:"actionsAspect",previewAnimation:"actionsAspect",previewTransition:"actionsAspect",stopPreviewAnimation:"actionsAspect",reloadPageAnimations:"actionsAspect",stopAndClearAllAnimations:"animationsAspect",handleBehavior:"behaviorsAspect",scroll:"scrollableAspect",scrollBy:"scrollableAspect",getTotalScroll:"scrollableAspect",refreshAppsInCurrentPage:"WidgetAspect",registerToNotifyApplicationRequestFromViewerWorker:"WidgetAspect",isSiteScrollingBlocked:"siteScrollingBlocker",removeAllPopups:"tpaPopupAspect",removeModal:"tpaModalAspect",updatePreventRefreshState:"tpaCompStateAspect",getComponentsToRender:"tpaWorkerAspect",getMemberDetailsInPreview:"siteMembers",destroyAppsContainer:"wixCodeWidgetAspect",reloadAppsContainer:"wixCodeWidgetAspect",initApp:"wixCodeWidgetAspect",updateBiData:"WidgetAspect",registerNavigationComplete:"actionsAspect",registerToPageNavigationCanceled:"actionsAspect",updateSectionUrlState:"tpaCompStateAspect",updateSectionUrlParams:"tpaCompStateAspect",updatePushState:"tpaCompStateAspect",reportStateChanged:"tpaCompStateAspect",loadAllContextsUserCode:"WidgetAspect",triggerAppStudioWidgetOnPropsChanged:"WidgetAspect",getStylableEditorInstance:"stylableRenderingAspect",setQuickChanges:"stylableRenderingAspect",revertQuickChanges:"stylableRenderingAspect",forceState:"stylableRenderingAspect",revertForceState:"stylableRenderingAspect"};return function(n){return t.mapValues(e,function(t,e){return function(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n.apply(void 0,[t,e].concat(o))}})}}.apply(e,i))||(t.exports=o)},227:function(t,e,n){var i,o;i=[n(0),n(1),n(23),n(22),n(51),n(74)],void 0===(o=function(t,e,n,i,o,s){"use strict";var a=new e.SiteDataPrivates,r=e.loggingUtils.logger;function u(t){return a.get(t).sd}function l(t){return a.get(t).sdAPI}function c(t,e){this._siteId=t.siteId,a.set(this,{sd:t,sdAPI:e})}return c.prototype={getSiteId:function(){return this._siteId},getEditorSessionId:function(){return u(this).documentServicesModel.editorSessionId},getReLayoutedCompsMap:function(){return u(this).reLayoutedCompsMap},clearReLayoutedCompsMap:function(){u(this).reLayoutedCompsMap={}},isMobileView:function(){return u(this).isMobileView()},getMainPageId:function(){return u(this).getMainPageId()},getCurrentUrlPageId:function(){return u(this).getCurrentUrlPageId()},collectUsedStylesFromAllPages:function(e){var i={},o=u(this);t.forEach(e,function(t,e){n.styleCollector.collectStyleIdsFromFullStructure(t.structure,function(t){return o.getDataByQuery(t,e,o.dataTypes.THEME)},o,i,e)});return n.styleCollector.collectStyleIdsFromFullStructure(e.masterPage.structure,function(t){return o.getDataByQuery(t,"masterPage",o.dataTypes.THEME)},o,i,"masterPage",!0),i},getAllCompsUnderRoot:function(t){return l(this).document.getAllCompsUnderRoot(t,t)},reportBI:function(){var n=t.toArray(arguments);return n.unshift(u(this)),r.reportBI.apply(e.loggingUtils.logger,n)},getScreenSize:function(){return u(this).getScreenSize()},getSiteWidth:function(){return u(this).getSiteWidth()},getScreenWidth:function(){return u(this).getScreenWidth()},getScreenHeight:function(){return u(this).getScreenHeight()},getPageBottomMargin:function(){return u(this).getPageBottomMargin()},getPageTopMargin:function(){return u(this).getPageTopMargin()},getPageMargins:function(){return u(this).getPageMargins()},getSiteX:function(){return u(this).getSiteX()},getSiteMeasureMap:function(){return u(this).measureMap},setMobileView:function(t){u(this).setMobileView(t)},isDebugMode:function(){return u(this).isDebugMode()},hasDebugQueryParam:function(){return u(this).hasDebugQueryParam()},getPageUrl:function(t,e,n){return u(this).getPageUrl(t,e,n)},getWixappsPackageDescriptor:function(t){return u(this).wixapps[t].descriptor},setErrorPagesPopUp:function(t){l(this).setRenderRealtimeConfigItem("errorPagesPopUp",t)},setPreviewTooltipCallback:function(t){l(this).setRenderRealtimeConfigItem("previewTooltipCallback",t)},setPremiumNavigationHandler:function(t){l(this).setRenderRealtimeConfigItem("premiumNavigationHandler",t)},getClientSpecMap:function(){return u(this).getClientSpecMap()},getPrimaryPageId:function(){return u(this).getPrimaryPageId()},getFocusedRootId:function(){return u(this).getFocusedRootId()},loadBatch:function(t,e){return u(this).store.loadBatch(t,e)},getExternalBaseUrl:function(){return u(this).getExternalBaseUrl()},isPageLandingPage:function(t){return u(this).isPageLandingPage(t)},getLayoutMechanism:function(){return e.layoutUtils.getLayoutMechanism(u(this))},getMasterPageLayoutSettings:function(){return u(this).getMasterPageLayoutSettings()},getCurrentPopupId:function(){return u(this).getCurrentPopupId()},getRootNavigationInfo:function(){return u(this).getRootNavigationInfo()},getRuntimeDal:function(){return l(this).runtime},resetRuntimeData:function(){l(this).resetRuntimeData()},isPopupOpened:function(){return u(this).isPopupOpened()},getAnchorsMap:function(e){var n=u(this);return t.get(n,["anchorsMap",e,n.getViewMode()])},createPageAnchors:function(t,e){l(this).anchors.createPageAnchors(t,e)},createChildrenAnchors:function(t,e,n){l(this).anchors.createChildrenAnchors(t,e,n)},createOriginalValuesMapForRenderedRoots:function(){var e=l(this);t.forEach(this.getAllRenderedRootIds(),function(t){e.originalValues.createPageOriginalValuesMap(t)})},clearOriginalValuesMapForRenderedRoots:function(){var e=l(this);t.forEach(this.getAllRenderedRootIds(),function(t){e.originalValues.removePageOriginalValues(t)})},getQueryParam:function(e){var n=u(this);return t.get(n,["currentUrl","query",e])},getActiveModes:function(){return l(this).modes.getActiveModes()},updateActiveSOSPModes:function(t){return l(this).updateActiveSOSPModes(t)},activateModeById:function(t,e,n){l(this).modes.activateModeById(t,e,n)},activateMode:function(t,e){l(this).modes.activateMode(t,e)},deactivateModeById:function(t,e,n){l(this).modes.deactivateModeById(t,e,n)},deactivateMode:function(t,e){l(this).modes.deactivateMode(t,e)},switchModesByIds:function(t,e,n,i){l(this).modes.switchModesByIds(t,e,n,i)},resetAllActiveModes:function(){l(this).modes.resetAllActiveModes()},createDisplayedNode:function(t){this.getSiteDataAPI().createDisplayedNode(t)},createDisplayedPage:function(t){this.getSiteDataAPI().createDisplayedPage(t)},didReact:function(){return u(this).reacted},resetSiteReacted:function(){u(this).reacted=!1},setPostUpdateOperationsRender:function(t){u(this).postUpdateOperationsRenders[t]=!0},clearPostUpdateOperationsRender:function(){u(this).postUpdateOperationsRenders={}},getSiteAspect:function(t){throw new Error("siteAPI.getSiteAspect is deprecated, (requested aspect: "+t+")")},isQaMode:function(){var e=u(this).currentUrl.query;return t.has(e,"isqa")&&"false"!==e.isqa},getCurrentUrl:function(){return u(this).currentUrl},generateRemoteModelInterface:function(t,s){var a=u(this),r=l(this),c=o.modelBuilderDataHelper.getApi(a);return o.modelBuilder.build({runtimeDal:this.getRuntimeDal(),dataAPI:c,contextIds:[t],onUpdateCallback:s,componentsFetcher:function(){for(var t,e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=n.wixCode).componentsFetcher.apply(t,[r].concat(i))},getCompReactClass:i.compFactory.getCompReactClass,performanceLogger:e.loggingUtils.performance,getGhostStructure:function(){return a.getGhostStructureData()}})[t].toJson()},getAppInstance:function(e){var n=u(this).getAppInstance();return t.get(n,e)},handleDsTpaHandler:function(e){var n=e.msg,i=e.ps,o=e.callback,a=e.tpads,r=e.installedTpaAppsOnSiteService,u=e.componentDetectorAPI,l=e.isPageComp,c=e.routersGetters,p=e.structure,d=e.getApplicationId,h=e.siteMetadata,g=void 0;switch(n.type){case"navigateToSectionPage":var f=void 0,m=void 0,P=t.get(n,"data.sectionIdentifier.appDefinitionId");P?(f=a.app.getDataByAppDefId(i,P),m=t.get(f,"applicationId")):f=(m=d(i,n.compId))&&a.app.getData(i,m);var y=m&&r.getAppPages(i,m),v=i.siteAPI.getPrimaryPageId(),I={navigateToPage:i.siteAPI.navigateToPage.bind(i.siteAPI),reportBI:i.siteAPI.reportBI.bind(i.siteAPI),updatePageNavInfo:i.siteAPI.updatePageNavInfo.bind(i.siteAPI),scrollSiteTo:t.partial(p.setScroll,i),updateSectionUrlState:i.siteAPI.updateSectionUrlState.bind(i.siteAPI),updateSectionUrlParams:i.siteAPI.updateSectionUrlParams.bind(i.siteAPI),updatePushState:i.siteAPI.updatePushState.bind(i.siteAPI),reportStateChanged:i.siteAPI.reportStateChanged.bind(i.siteAPI)};s.services.tpaNavigationService.navigateToSection(I,f,n,y,v,function(e){var n=u.getAllComponents(i,e,t.partial(l,i)),o=t.head(n);return t.get(o,"id")},t.partial(c.getRouterDataForPageIfExist,i),o);break;case"getSitePages":g={filterHideFromMenuPages:!0,includePagesUrl:t.get(n,"data.includePagesUrl",!1),baseUrl:h.generalInfo.getPublicUrl(i),includeIsHomePage:!0,enhancedInfo:!1},o(s.sitePages.getSitePagesInfoData(i.siteDataAPI.siteData,g));break;case"getSiteMap":g={filterHideFromMenuPages:!0,includePagesUrl:!1,baseUrl:h.generalInfo.getPublicUrl(i),includeIsHomePage:!1,enhancedInfo:!0},o(s.sitePages.getSitePagesInfoData(i.siteDataAPI.siteData,g))}},getAspectGlobalData:t.noop,flushDsBeforeLoadMessagesQueue:t.noop,getModalCompData:t.noop,getPopupsCompData:t.noop,enforceAndPatchIfNeeded:t.constant(!1),resetBehaviorsRegistration:t.noop,enableAction:t.noop,disableAction:t.noop,bgVideo:{play:t.noop,stop:t.noop,isPlaying:function(){return!1},getReadyState:t.noop,registerToPlayingChange:t.noop,unregisterToPlayingChange:t.noop,enableVideoPlayback:t.noop,disableVideoPlayback:t.noop}},c}.apply(e,i))||(t.exports=o)},228:function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){"use strict";function e(){this._siteDataChangedCallbacks=[],this._waitingForAsync=!1,this._waitingForAsyncBatch=[],this._setOperationWaitingForAsync=null}return e.prototype={dispose:function(){},runSetOperation:function(e,n,i){var o,s;this._waitingForAsync?this._waitingForAsyncBatch.push({setOperation:e,args:n,params:i}):(o=n,s=t.get(i,"isAsyncOperation"),(t.isFunction(s)?s.apply(null,o):s)&&(this._waitingForAsync=!0,this._setOperationWaitingForAsync={setOperation:e,args:n,params:i},e=i.asyncPreDataManipulation?i.asyncPreDataManipulation:e),e.apply(null,n),t.forEach(this._siteDataChangedCallbacks,function(t){t()}))},isRunningSetOperation:function(){return!1},executeAfterCurrentOperationDone:function(t){t()},registerToSetOperationDone:function(){throw new Error("not supported, there are no handles here")},asyncSetOperationComplete:function(){this._waitingForAsync=!1;var e=this._waitingForAsyncBatch;this._waitingForAsyncBatch=[],t.forEach(e,t.bind(function(t){this.runSetOperation(t.setOperation,t.args,t.params)},this))},asyncPreDataManipulationComplete:function(e,n){this._waitingForAsync=!1;var i=this._setOperationWaitingForAsync;n||(this._setOperationWaitingForAsync=null,t.isNil(e)||i.args.splice(1,0,e),i.setOperation.apply(null,i.args))},registerToSiteDataChanged:function(t){this._siteDataChangedCallbacks.push(t)},registerToSiteChanged:function(){throw new Error("there is no site")},registerToErrorThrown:function(){throw new Error("errors are sync")},unRegisterFromErrorThrown:function(){throw new Error("errors are sync")},waitForChangesApplied:function(t){this.runSetOperation(t,[],{})},flushQueueAndExecute:function(t){this.waitForChangesApplied(t)}},e}.apply(e,i))||(t.exports=o)},229:function(t,e,n){var i,o;i=[n(0),n(1),n(28)],void 0===(o=function(t,e,n){"use strict";var i=n.constants,o=n.biErrors;function s(e,n){return t.forIn(e,function(i,o){t.isFunction(i)?e[o]=i.bind(n):t.isPlainObject(i)&&(e[o]=s(t.clone(i),n))}),e}var a=new WeakMap,r=function(e,n,i,o,r){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.noop;a.set(this,{isInTransaction:!1}),this.displayedJsonUpdater=o,this.fullJsonUpdater=i,this.fullJsonDal=e,this.displayedJsonDal=n,s(this,this),this.pointers=r,this.onError=u};function u(t,e){return t.getPointerJsonType(e)===i.JSON_TYPES.FULL}function l(t,e){return t.getPathJsonType(e)===i.JSON_TYPES.FULL}function c(t,e){var n=e.general.getActiveModes();return t.get(n)}return r.prototype={get:function(t){return this.displayedJsonDal.get(t,!0)},getByPath:function(t){return this.displayedJsonDal.getByPath(t,!0)},isExist:function(t){return this.displayedJsonDal.isExist(t)},isPathExist:function(t){return this.displayedJsonDal.isPathExist(t)},getKeys:function(t){return this.displayedJsonDal.getKeys(t,!0)},getKeysByPath:function(t){return this.displayedJsonDal.getKeysByPath(t,!0)},set:function(e,n){u(this.fullJsonDal,e)?(this.displayedJsonUpdater.Displayed.onSet(e,n),this.fullJsonUpdater.onSet(e,n)):!function(e){return t.includes(["wixapps","siteAspects","compBehaviours","svgShapes","layoutAdjustment","displayedOnlyComponents"],e.type)}(e)?(this.fullJsonDal.set(e,n),this.displayedJsonUpdater.Displayed.onSet(e,n)):this.displayedJsonDal.set(e,n)},push:function(t,e,n,i){u(this.fullJsonDal,t)?(this.displayedJsonUpdater.Displayed.onPush(t,e,n,i),this.fullJsonUpdater.onPush(t,e,n,i)):(this.fullJsonDal.push(t,e,n,i),this.displayedJsonDal.push(t,e,n,i))},merge:function(t,e){u(this.fullJsonDal,t)?(this.displayedJsonDal.merge(t,e),this.fullJsonUpdater.onMerge(t,e)):(this.fullJsonDal.merge(t,e),this.displayedJsonDal.merge(t,e))},remove:function(t){u(this.fullJsonDal,t)?(this.displayedJsonUpdater.Displayed.onRemove(t),this.fullJsonUpdater.onRemove(t)):(this.fullJsonDal.remove(t),this.displayedJsonDal.remove(t))},takeSnapshot:function(t){return this.fullJsonDal.takeSnapshot(t)},duplicateLastSnapshot:function(t,e){return this.fullJsonDal.duplicateLastSnapshot(t,e)},wasValueChangedSinceLastSnapshot:function(t,e){return this.fullJsonDal.wasValueChangedSinceLastSnapshot(t,e)},getLastSnapshotByTagName:function(t,e){return this.fullJsonDal.getLastSnapshotByTagName(t,e)},getInitialSnapshot:function(t){return this.fullJsonDal.getInitialSnapshot(t)},removeLastSnapshot:function(t){this.fullJsonDal.removeLastSnapshot(t)},getSnapshotByTagAndIndex:function(t,e,n){return this.fullJsonDal.getSnapshotByTagAndIndex(t,e,n)},transaction:function(t){var e=a.get(this);e.isInTransaction=!0;try{t()}finally{e.isInTransaction=!1}},full:{immutable:{getSnapshotByTagAndIndex:function(t,e){return this.fullJsonDal.immutable.getSnapshotByTagAndIndex(t,e)},getLastSnapshotByTagName:function(t){return this.fullJsonDal.immutable.getLastSnapshotByTagName(t)},getInitialSnapshot:function(){return this.fullJsonDal.immutable.getInitialSnapshot()},getCurrentSnapshot:function(){return this.fullJsonDal.immutable.getCurrentSnapshot()},getByPath:function(t){return this.fullJsonDal.immutable.getByPath(t)}},get:function(n){if(u(this.fullJsonDal,n)){var i=n;return(i=t.cloneDeep(n)).multilingual=e.multilingual.PointerOperation.GET,this.fullJsonDal.get(i)}return this.displayedJsonDal.get(n)},set:function(t,e){if(this.fullJsonDal.set(t,e),u(this.fullJsonDal,t)){if(a.get(this).isInTransaction)return;var n=c(this.displayedJsonDal,this.pointers);this.displayedJsonUpdater.onSet(t,n)}else this.displayedJsonDal.set(t,e)},push:function(t,e,n,i){if(this.fullJsonUpdater.push(t,e,n,i),u(this.fullJsonDal,t)){if(a.get(this).isInTransaction)return;var o=c(this.displayedJsonDal,this.pointers);this.displayedJsonUpdater.onPush(t,i,e,n,o)}else this.displayedJsonDal.push(t,e,n,i)},merge:function(t,e){if(this.fullJsonDal.merge(t,e),u(this.fullJsonDal,t)){if(a.get(this).isInTransaction)return;var n=c(this.displayedJsonDal,this.pointers);this.displayedJsonUpdater.onMerge(t,n)}else this.displayedJsonDal.merge(t,e)},getByPathInHostModel:function(t){return l(this.fullJsonDal,t)?this.fullJsonDal.getByPath(t):this.displayedJsonDal.getByPath(t)},getByPath:function(t){if(l(this.fullJsonDal,t)){var e=(new Error).stack;this.onError(o.DIRECT_PAGES_DATA_ACCESS_IN_GSD,{path:t,stack:e})}return this.full.getByPathInHostModel(t)},isExist:function(t){return u(this.fullJsonDal,t)?this.fullJsonDal.isExist(t):this.displayedJsonDal.isExist(t)},isPathExistInHostModel:function(t){return l(this.fullJsonDal,t)?this.fullJsonDal.isPathExist(t):this.displayedJsonDal.isPathExist(t)},isPathExist:function(t){if(l(this.fullJsonDal,t)){var e=(new Error).stack;this.onError(o.DIRECT_PAGES_DATA_ACCESS_IN_GSD,{path:t,stack:e})}return this.full.isPathExistInHostModel(t)},remove:function(t){if(this.fullJsonDal.remove(t),u(this.fullJsonDal,t)){if(a.get(this).isInTransaction)return;var e=c(this.displayedJsonDal,this.pointers);this.displayedJsonUpdater.onRemove(t,e)}else this.displayedJsonDal.remove(t)},getKeys:function(t){return u(this.fullJsonDal,t)?this.fullJsonDal.getKeys(t):this.displayedJsonDal.getKeys(t)},getKeysByPathInHostModel:function(t){return l(this.fullJsonDal,t)?this.fullJsonDal.getKeysByPath(t):this.displayedJsonDal.getKeysByPath(t)},getKeysByPath:function(t){if(l(this.fullJsonDal,t)){var e=(new Error).stack;this.onError(o.DIRECT_PAGES_DATA_ACCESS_IN_GSD,{path:t,stack:e})}return this.full.getKeysByPathInHostModel(t)},setByPathToHostModel:function(t,e){if(this.fullJsonDal.setByPath(t,e),l(this.fullJsonDal,t)){if(a.get(this).isInTransaction)return;var n=c(this.displayedJsonDal,this.pointers);this.displayedJsonUpdater.onSetByPath(t,n)}else this.displayedJsonDal.setByPath(t,e)},setByPathToHostModelWithMutation:function(t,e){if(this.fullJsonDal.setByPathWithMutation(t,e),l(this.fullJsonDal,t)){if(a.get(this).isInTransaction)return;var n=c(this.displayedJsonDal,this.pointers);this.displayedJsonUpdater.onSetByPath(t,n)}else this.displayedJsonDal.setByPath(t,e)},setByPath:function(t,e){if(l(this.fullJsonDal,t)){var n=(new Error).stack;this.onError(o.DIRECT_PAGES_DATA_ACCESS_IN_GSD,{path:t,stack:n})}this.full.setByPathToHostModel(t,e)},removeByPathInHostModel:function(t){if(this.fullJsonDal.removeByPath(t),l(this.fullJsonDal,t)){if(a.get(this).isInTransaction)return;var e=c(this.displayedJsonDal,this.pointers);this.displayedJsonUpdater.onRemoveByPath(t,e)}else this.displayedJsonDal.removeByPath(t)},removeByPath:function(t){if(l(this.fullJsonDal,t)){var e=(new Error).stack;this.onError(o.DIRECT_PAGES_DATA_ACCESS_IN_GSD,{path:t,stack:e})}this.full.removeByPathInHostModel(t)},pushByPathToHostModel:function(t,e,n){if(this.fullJsonDal.pushByPath(t,e,n),l(this.fullJsonDal,t)){if(a.get(this).isInTransaction)return;var i=c(this.displayedJsonDal,this.pointers);this.displayedJsonUpdater.onPushByPath(t,n,i)}else this.displayedJsonDal.pushByPath(t,e,n)},pushByPath:function(t,e,n){if(l(this.fullJsonDal,t)){var i=(new Error).stack;this.onError(o.DIRECT_PAGES_DATA_ACCESS_IN_GSD,{pathToArray:t,stack:i})}this.full.pushByPathToHostModel(t,e,n)},mergeByPathToHostModel:function(t,e){if(this.fullJsonDal.mergeByPath(t,e),l(this.fullJsonDal,t)){if(a.get(this).isInTransaction)return;var n=c(this.displayedJsonDal,this.pointers);this.displayedJsonUpdater.onMergeByPath(t,n)}else this.displayedJsonDal.mergeByPath(t,e)},mergeByPath:function(t,e){if(l(this.fullJsonDal,t)){var n=(new Error).stack;this.onError(o.DIRECT_PAGES_DATA_ACCESS_IN_GSD,{path:t,stack:n})}this.full.mergeByPathToHostModel(t,e)}}},r}.apply(e,i))||(t.exports=o)},23:function(t,e){t.exports=c},230:function(t,e,n){var i,o;i=[n(0),n(1),n(28),n(41)],void 0===(o=function(t,e,n,i){"use strict";var o=n.constants,s=n.modesUtils,a=n.dataIds,r=o.DATA_TYPES,u=i.services.schemasService,l={PROPERTY:"propertyQuery",DESIGN:"designQuery"},c=["mobileComponents","components","children"],p=["styleId","designQuery","propertyQuery"],d=t.union(["layout"],p),h=function(n,i,o){var s=function(i){return function(o){var s=t.cloneDeep(o);s.multilingual=e.multilingual.PointerOperation.SET;for(var a=arguments.length,r=Array(a>1?a-1:0),u=1;u<a;u++)r[u-1]=arguments[u];return n[i].apply(n,[s].concat(r))}};this.fullJsonDal=t(["get","set","merge","remove","push","isExist","getPointerJsonType"]).map(function(t){return[t,s(t)]}).fromPairs().value(),this.pointers=i,this.displayedJsonDal=o};function g(e,n){return n=[].concat(n),t.findIndex(e,function(e){return e.modeIds.length>=1&&t.isEqual(e.modeIds.sort(),n.sort())})}function f(t,e){e=[].concat(e),function(t){var e=this.pointers.componentStructure.getModes(t),n=this.pointers.componentStructure.getModesOverrides(t);this.fullJsonDal.isExist(e)?this.fullJsonDal.isExist(n)||this.fullJsonDal.set(n,[]):this.fullJsonDal.set(e,s.createEmptyModesObject())}.call(this,t);var n=this.pointers.componentStructure.getModesOverrides(t),i=this.fullJsonDal.get(n),o=g.call(this,i,e);return o<0&&(this.fullJsonDal.push(n,{modeIds:e}),o=i.length),this.pointers.getInnerPointer(n,o)}function m(e,n,i,o){var s=f.call(this,e,n),a=this.fullJsonDal.get(s);t.set(a,o,i),this.fullJsonDal.set(s,a)}function P(e,n,i,o){var s=function(e,n,i){var o=this.pointers.getOriginalPointerFromInner(e),s=this.fullJsonDal.get(this.pointers.getInnerPointer(o,"layout")),a=t.get(n,i);return t.merge({},s,a)}.call(this,e,n,i);return t.size(i)>1?t.set(s,t.takeRight(i,t.size(i)-1),o):s=t.merge(s,o),s}function y(n,i,o,a){var r=e.dataUtils.getChildrenKey(n,this.pointers.components.isMobile(i)),u=n[r];if(u&&u.length){for(var l=this.pointers.getInnerPointer(i,r),c=this.fullJsonDal.get(l),p=t(c).filter(function(e){return!t.find(n[r],{id:e.id})}).map("id").value(),d=p.length+u.length,h=[],g=0,f=0;g<d;g++){var m=c[g];m&&t.includes(p,m.id)?h.push(m):(h.push(u[f]),f++)}n[r]=t.map(h,function(e){return!t.find(n[r],{id:e.id})?function(e,n){e.modes=e.modes||s.createEmptyModesObject(),e.modes.overrides=e.modes.overrides||[];var i=t.find(e.modes.overrides,["modeIds[0]",n]);return i||(i={modeIds:[n]},e.modes.overrides.push(i)),i.isHiddenByModes=!0,e}(e,a):function(t,e,n,i){var o=this.pointers.components.getComponent(t.id,e),s=this.pointers.components.getViewMode(n);return o=o||this.pointers.components.getUnattached(t.id,s),v.call(this,o,e,t,i)}.call(this,e,o,i,a)}.bind(this))}}function v(n,i,o,a){o=e.displayedOnlyStructureUtil.getOriginalStructure(o);var r=t.head(s.getComponentModesToGenerateOverrides(this.pointers,this.fullJsonDal,this.displayedJsonDal,n)),u=r===(a=a||s.getFirstAncestorModeToGenerateOverrides(this.pointers,this.fullJsonDal,this.displayedJsonDal,n)||r)?p:d,l=t.pick(o,u),c=t.clone(o),h=this.pointers.componentStructure.getModes(n),g=this.fullJsonDal.isExist(h)?this.fullJsonDal.get(h):null,f=a&&!this.fullJsonDal.isExist(n),m=a&&this.fullJsonDal.isExist(n);g&&(c.modes=g);var P=null;if(f)return P=o&&o.layout||P,t.assign(c,{modes:s.createModesObjectForCompAddedInMode([a],P)});if(m){var v=this.pointers.getInnerPointer(n,"layout");P=this.fullJsonDal.get(v)||P,l.layout&&(l.layout=t.defaults(l.layout,P));var I=function(e,n){return t.mapValues(e,function(t,e){var i=this.pointers.getInnerPointer(n,e);return this.fullJsonDal.get(i)}.bind(this))}.call(this,l,n),A=function(e,n,i){if(t.isEmpty(i))return e;e=e&&t.cloneDeep(e)||s.createEmptyModesObject();var o=t.find(e.overrides,["modeIds[0]",n]);o||(o={modeIds:[n]},e.overrides.push(o));return t.merge(o,i),e}(g,a,l=t.omitBy(l,function(e,n){return t.isEqual(e,I[n])}));A&&(c.modes=A),t.assign(c,I)}return y.call(this,c,n,i,a),c}function I(e,n,i){var o=this.pointers.getOriginalPointerFromInner(e),a=s.getFirstAncestorModeToGenerateOverrides(this.pointers,this.fullJsonDal,this.displayedJsonDal,o);a?function(e,n,i,o){var s=f.call(this,e,n),a=this.fullJsonDal.get(s);if(t.includes(o,"layout")){var r=P.call(this,e,a,o,i);t.set(a,o,r)}else t.get(a,o)?t.assign(t.get(a,o),i):t.set(a,o,i);this.fullJsonDal.merge(s,a)}.call(this,o,a,n,i):this.fullJsonDal.merge(e,n)}function A(t,e){return t.getPointerJsonType(e)===o.JSON_TYPES.FULL}function S(e,n,i,o){var a=this.pointers.data.getPageIdOfData(e),r=e.component;if(r&&t.includes(l,i)){var u=s.getFirstAncestorModeToGenerateOverrides(this.pointers,this.fullJsonDal,this.displayedJsonDal,r,o);if(u){var c=f.call(this,r,u),p=this.fullJsonDal.get(c);return void(p[i]?O.call(this,p,i,a,n,e.refPath):function(t,e,n,i,o,s){(function(t,e,n,i){var o=this.pointers.getInnerPointer(i,t),s=R(t),a=(t!==l.PROPERTY?"#":"")+s;this.fullJsonDal.set(o,a),C.call(this,n,s,e,t)}).call(this,s,n,e,t),function(t,e,n,i,o){t.id=e.id,this.fullJsonDal.set(e,t);var s=(n!==l.PROPERTY?"#":"")+e.id;m.call(this,i,o,s,n)}.call(this,i,e,s,t,o)}.call(this,r,e,a,n,u,i))}}this.fullJsonDal.set(e,n)}function D(t,e,n,i){var o=this.pointers.data.getPageIdOfData(t),a=t.component;if(a){var r=s.getFirstAncestorModeToGenerateOverrides(this.pointers,this.fullJsonDal,this.displayedJsonDal,a,!!i);if(r){var u=this.pointers.componentStructure.getModesOverrides(a),l=function(t,e){var n=this.fullJsonDal.get(t),i=g.call(this,n,e);return i<0?null:this.pointers.getInnerPointer(t,i)}.call(this,u,r);l||b(n);var c=this.fullJsonDal.get(l);return void(c&&c[n]?O.call(this,c,n,o,e,t.refPath):b(n))}}this.fullJsonDal.merge(t,e)}function b(t){if(t===l.PROPERTY)throw new Error("Can't merge value to non-existent properties overrides.");if(t===l.DESIGN)throw new Error("Can't merge value to non-existent design overrides.");throw new Error("Can't merge value to non-existent overrides.")}function C(e,n,i,o){if(e&&n){var s=this.fullJsonDal.get(e);if(s){var a=w(s,o);(function(e,n,i,o){if(!i)return null;return t.forOwn(e,function(t,s){if(E(s,t,i)){var a=R(o),r=M(t),u=T(this.pointers,o,r,n),l=C.call(this,u,a,n,o);e[s]=l?"#"+l:null}}.bind(this)),e}).call(this,s,i,a,o),s.id=n;var r=T(this.pointers,o,n,i);return this.fullJsonDal.set(r,s),this.displayedJsonDal.set(r,s),n}return null}}function w(e,n){var i=null;switch(n){case l.PROPERTY:i=u.getSchema(r.prop,e.type);break;case l.DESIGN:i=u.getSchema(r.design,e.type)}return t.get(i,"properties")||t.get(i,"allOf.0.properties")}function T(t,e,n,i){var o=void 0;return e===l.PROPERTY?o=t.data.getPropertyItem(n,i):e===l.DESIGN&&(o=t.data.getDesignItem(n,i)),o}function E(e,n,i){if(n){var o=t.get(i[e],"pseudoType")||[];return t.some(o,t.partial(t.includes,["ref","refList"]))}return!1}function O(e,n,i,o,s){var a=e[n],r=function(t,e,n,i){var o=function(t,e,n){var i=M(e),o=void 0;t===l.PROPERTY?o=this.pointers.data.getPropertyItem(i,n):t===l.DESIGN&&(o=this.pointers.data.getDesignItem(i,n));return o}.call(this,i,t,e),s=this.pointers.data,a=null;switch(i){case l.DESIGN:a=s.getDesignItem.bind(s);break;case l.PROPERTY:a=s.getPropertyItem.bind(s)}if(a&&n)for(var r=0;r<n.length;r++){var u=this.fullJsonDal.get(o);if(!u){o=null;break}var c=M(u[n[r]]);o=a(c,e)}return o}.call(this,a,i,s,n);if(r){var u=this.fullJsonDal.get(r),c=function(e,n,i){if(!e)return n;if(!n)return e;if(e.type!==n.type)return t.assign({},n,{id:e.id});var o=w(e,i),s=t.omit(n,"id");return t.forOwn(n,function(i,a){E(a,i,o)&&e[a]&&n[a]&&(s=t.omit(s,a))}),t.assign({},e,s)}.call(this,u,o,n);this.fullJsonDal.set(r,c)}}function M(e){return t.isString(e)?e.replace("#",""):e}function R(t){var e=void 0;switch(t){case l.PROPERTY:e=a.generateNewId("properties");break;case l.DESIGN:e=a.generateNewId("design");break;default:e=a.generateNewId("")}return e}function U(t){if(!J.call(this,t,"layout"))return!1;if(!this.displayedJsonDal.get(this.pointers.changedByRelayout.getCompChangedByRelayout(t.id)))return!1;var n=this.pointers.getOriginalPointerFromInner(t),i=e.displayedOnlyStructureUtil.getRepeaterItemId(t.id),o=this.pointers.components.getAncestorByPredicate(n,function(t){return!e.displayedOnlyStructureUtil.isDisplayedOnlyComponent(t.id)}),s=this.pointers.displayedOnlyComponents.getComponentTemplateId(o.id);return i!==this.displayedJsonDal.get(s)}function J(t,n){return!!e.displayedOnlyStructureUtil.isDisplayedOnlyComponent(t.id)&&this.pointers.getInnerPointerPathRoot(t)===n}function B(n){if(e.displayedOnlyStructureUtil.isDisplayedOnlyComponent(n.id)){var i=this.pointers.getOriginalPointerFromInner(n),o=this.pointers.components.getParent(i);if(e.displayedOnlyStructureUtil.isDisplayedOnlyComponent(o.id))B.call(this,o);else{var s=e.displayedOnlyStructureUtil.getRepeaterItemId(i.id),a=this.pointers.displayedOnlyComponents.getComponentTemplateId(o.id);if(this.displayedJsonDal.get(a)!==s){this.displayedJsonDal.set(a,s);var r=this.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(i);t.forEach(r,function(t){var e=this.pointers.getInnerPointer(t,"layout"),n=this.displayedJsonDal.get(e);this.fullJsonDal.set(e,n)}.bind(this))}}}}return h.prototype={push:function(t,n,i,o){var s=function(t,e){return"components"!==t.getInnerPointerPathRoot(e)?e:t.full.components.getChildrenContainer(t.getOriginalPointerFromInner(e))}(this.pointers,t);this.fullJsonDal.push(s,n,i,o),e.displayedOnlyStructureUtil.isDisplayedOnlyComponent(s.id)&&"components"===this.pointers.getInnerPointerPathRoot(s)&&B.call(this,s)},onSet:function(e,n){if(!A(this.fullJsonDal,e))throw new Error("updates outside of pagesData should be done only through full json DAL");switch(this.pointers.getPointerType(e)){case"page":if(t.isEmpty(e.innerPath))throw new Error("updating pages object should be done directly through full json DAL");break;case"component":var i=this.pointers.components.getPageOfComponent(e);return void this.fullJsonDal.set(e,v.call(this,e,i,n));case"componentStructure":var o=this.pointers.getInnerPointerPathRoot(e);if(o&&t.includes(d,o)){if(J.call(this,e,"designQuery")||U.call(this,e))return;return function(e,n,i){var o=this.pointers.getOriginalPointerFromInner(e),a=t.head(s.getComponentModesToGenerateOverrides(this.pointers,this.fullJsonDal,this.displayedJsonDal,o)),r=s.getFirstAncestorModeToGenerateOverrides(this.pointers,this.fullJsonDal,this.displayedJsonDal,o)||a,u=a===r?p:d,l=t.head(i);if(r&&t.includes(u,l)){if("layout"===l&&t.size(i)>1){var c=t.set({},t.takeRight(i,i.length-1),n);i=["layout"];var h=f.call(this,o,r),g=this.fullJsonDal.get(h);n=P.call(this,o,g,i,c)}m.call(this,o,r,n,i)}else this.fullJsonDal.set(e,n)}.call(this,e,n,e.innerPath),void("layout"===o&&B.call(this,e))}break;case"props":return void S.call(this,e,n,l.PROPERTY);case"design":return void S.call(this,e,n,l.DESIGN,!0)}this.fullJsonDal.set(e,n)},onRemove:function(n){if(!A(this.fullJsonDal,n))throw new Error("updates outside of pagesData should be done only through full json DAL");switch(this.pointers.getPointerType(n)){case"page":if(t.isEmpty(n.innerPath))throw new Error("updating pages object should be done directly through full json DAL");break;case"component":return void function(n){var i=s.getFirstAncestorWithModesToGenerateOverrides(this.pointers,this.fullJsonDal,this.displayedJsonDal,n),o=void 0,a=void 0;if(i&&(a=t.head(s.getComponentModesToGenerateOverrides(this.pointers,this.fullJsonDal,this.displayedJsonDal,i)),o=e.modesUtils.isCompVisibleAfterRemovalFromMode(this.pointers,this.fullJsonDal,n,i,a)),i&&o){var r=t.head(s.getComponentModesToGenerateOverrides(this.pointers,this.fullJsonDal,this.displayedJsonDal,i)),u=f.call(this,n,r);this.fullJsonDal.merge(u,{isHiddenByModes:!0})}else this.fullJsonDal.isExist(n)&&this.fullJsonDal.remove(n)}.call(this,n)}this.fullJsonDal.remove(n)},onPush:function(n,i,o,a){if(!A(this.fullJsonDal,n))throw new Error("updates outside of pagesData should be done only through full json DAL");var r=this.pointers.getOriginalPointerFromInner(n),u=this.pointers.getInnerPointerPathRoot(n),l=this.pointers.getOriginalPointerFromInner(n);if("components"===u){var p=t.tail(n.innerPath);if(this.pointers.components.isMobile(n)){var d=this.pointers.full.components.getPage(n.id,l.type),h=this.pointers.full.components.getChildrenContainer(d);n=this.pointers.getInnerPointer(h,p)}else if(this.pointers.components.isMasterPage(r)){var g=this.pointers.full.components.getChildrenContainer(l);n=this.pointers.getInnerPointer(g,p)}}var f=void 0,m=u&&t.includes(c,u);if(m){var P=e.displayedOnlyStructureUtil.getOriginalStructure(i);f=s.adjustModesToNewContainer(this.pointers,this.fullJsonDal,this.displayedJsonDal,l,P)}this.fullJsonDal.push(n,f||i,o,a),m&&B.call(this,l)},onMerge:function(n,i){if(!A(this.fullJsonDal,n))throw new Error("updates outside of pagesData should be done only through full json DAL");switch(this.pointers.getPointerType(n)){case"page":if(t.isEmpty(n.innerPath))throw new Error("updating pages object should be done directly through full json DAL");break;case"component":var o=s.getFirstAncestorModeToGenerateOverrides(this.pointers,this.fullJsonDal,this.displayedJsonDal,n)||t.head(s.getComponentModesToGenerateOverrides(this.pointers,this.fullJsonDal,this.displayedJsonDal,n));if(!o){i=e.displayedOnlyStructureUtil.getOriginalStructure(i);break}var a=this.pointers.components.getPageOfComponent(n);return void this.fullJsonDal.merge(n,v.call(this,n,a,i,o));case"componentStructure":var r=this.pointers.getInnerPointerPathRoot(n);if(r&&t.includes(d,r)){if(J.call(this,n,"designQuery")||U.call(this,n))return;return I.call(this,n,i,n.innerPath),void("layout"===r&&B.call(this,n))}break;case"props":return void D.call(this,n,i,l.PROPERTY);case"design":return void D.call(this,n,i,l.DESIGN,!0)}this.fullJsonDal.merge(n,i)}},h}.apply(e,i))||(t.exports=o)},231:function(t,e,n){var i,o;i=[n(0),n(1),n(23),n(8),n(709)],void 0===(o=function(t,e,n,i,o){"use strict";var s="updates outside of pagesData should be done only through full json DAL";function a(t){return l(t)&&t.length>2&&"data"===t[2]}function r(t){return l(t)&&t.length>2&&"structure"===t[2]}function u(t){return l(t)&&2===t.length}function l(t){return t&&t.length>0&&"pagesData"===t[0]}function c(t){var e=this.pointers.getOriginalPointerFromInner(t);return l(this.displayedCache.getPath(e)||this.fullCache.getPath(e))}function p(t){return"componentStructure"===this.pointers.getPointerType(t)}function d(n,o){var s=n[1],a=!i.isOpen("ds_updateAnchorsOnlyOnNavigation");if(r(n)){var l=this.pointers.components.getPage(s,e.constants.VIEW_MODES.DESKTOP);this.simpleDisplayedJsonUpdater.updateDisplayedJsonInPagesDataByPointer(l,o,a)}else if(u(n)){var c=this.pointers.page.getPagePointer(s)||this.pointers.page.getNewPagePointer(s);this.simpleDisplayedJsonUpdater.updateDisplayedJsonInPagesDataByPointer(c,o,a)}else if(function(e){return t.isEqual(e,["pagesData"])}(n)){var p=JSON.parse(JSON.stringify(t.get(this.fullJson,n)));this.simpleDisplayedJsonUpdater.updateDisplayedPagesData(p,o,a)}else{var d=e.objectUtils.cloneDeep(t.get(this.fullJson,n));this.displayedJsonDAL.setByPath(n,d)}}function h(t,e,i,s,a,r){this.fullJson=t,this.displayedJsonDAL=e,this.fullCache=i,this.displayedCache=s,this.pointers=a,this.simpleDisplayedJsonUpdater=new n.SimpleDisplayedJsonUpdater(t,e,i,a,r),this.Displayed=o(this.pointers,this.displayedJsonDAL)}return h.prototype={onPush:function(t,e,n,i,o){if(o=o||{},!c.call(this,t))throw new Error(s);if(function(t){return function(t){return"component"===this.pointers.getPointerType(t)}.call(this,t)||p.call(this,t)}.call(this,t)){var a=this.pointers.getOriginalPointerFromInner(t);this.simpleDisplayedJsonUpdater.updateDisplayedJsonByPointer(a,o)}else this.displayedJsonDAL.push(t,n,i,e)},onMerge:function(t,e){e=e||{};var n=this.pointers.getOriginalPointerFromInner(t);if(!c.call(this,n))throw new Error(s);this.simpleDisplayedJsonUpdater.updateDisplayedJsonByPointer(n,e)},onRemove:function(e,n){n=n||{};var i=this.displayedJsonDAL;if(i.isExist(e)&&!c.call(this,e))throw new Error(s);if(p.call(this,e)){var o=this.pointers.getOriginalPointerFromInner(e);if(!i.isExist(o))return;this.simpleDisplayedJsonUpdater.updateDisplayedJsonByPointer(o,n)}else t.forEach(this.pointers.components.getAllDisplayedOnlyComponents(e),function(t){i.isExist(t)&&i.remove(t)})},onSet:function(t,e){e=e||{};var n="modes"===this.pointers.getInnerPointerPathRoot(t),i=this.pointers.getOriginalPointerFromInner(t),o=void 0;if(n){var a=this.pointers.full.components.getParent(i);o=a||i}else o=i;if(!l(this.fullCache.getPath(o)))throw new Error(s);this.simpleDisplayedJsonUpdater.updateDisplayedJsonByPointer(o,e)},onSetByPath:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!l(t))throw new Error(s);d.call(this,t,e)},onRemoveByPath:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!l(e))throw new Error(s);if(!t.isArray(e)||t.isEqual(e,["pagesData"]))throw new Error('path "'+e+'" is invalid or cant be removed');u(e)||a(e)?this.displayedJsonDAL.removeByPath(e,n):r(e)&&d.call(this,e,n)},onPushByPath:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!l(e))throw new Error(s);if(t.isArray(e)&&l(e))d.call(this,e,i);else{var o=t.isNumber(n)?e.concat(n):e,a=t.get(this.fullJson,o);this.displayedJsonDAL.pushByPath(e,a,n)}},onMergeByPath:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!l.call(this,e))throw new Error(s);if(t.isArray(e)&&l(e))d.call(this,e,n);else{var i=t.get(this.fullJson,e);this.displayedJsonDAL.mergeByPath(e,i)}},onModesChange:function(t,e){return this.simpleDisplayedJsonUpdater.updateDisplayedJsonByPointer(t,e)}},h}.apply(e,i))||(t.exports=o)},24:function(t,e){t.exports=p},28:function(t,e){t.exports=d},3:function(t,e){t.exports=n},37:function(t,e){t.exports=h},41:function(t,e){t.exports=g},47:function(t,e,n){var i,o;i=[n(0),n(712),n(28),n(41),n(8),n(1),n(37),n(3),n(6),n(70),n(74),n(713),n(5),n(714),n(24),n(10),n(23),n(48),n(715)],void 0===(o=function(t,e,n){"use strict";var i=arguments,o=3,s=["document-services-schemas","experiment","coreUtils","color","componentsCore","zepto","wixappsClassics","tpa","speakingurl","skins","mobileCore","layout","santa-core-utils","core","coreMultilingual","wix-ui-santa/componentsMetaData.bundle.min"].reduce(function(e,n,s){return t.set(e,n,i[s+o])},{});s.documentServicesSchemas=s["document-services-schemas"],s["documentServices/localMode/localMode"]=n.temp.localMode,s["documentServices/utils/idGenerator"]=n.temp.idGenerator,s["documentServices/accessibility/visualFocusData"]=n.temp.visualFocusData,s["documentServices/accessibility/componentA11yAPI"]=n.temp.componentA11yAPI,s["documentServices/actionsAndBehaviors/actionsAndBehaviors"]=n.temp.actionsAndBehaviors,s["documentServices/utils/utils"]=n.utils,s["documentServices/appControllerData/appControllerData"]=n.temp.appControllerData,s["documentServices/appStudio/appStudioComponents"]=n.temp.appStudioComponents,s["documentServices/appStudio/appStudio"]=n.temp.appStudio,s["documentServices/appStudioWidgets/appStudioWidgets"]=n.temp.appStudioWidgets,s["documentServices/autosave/autosave"]=n.autosave,s["documentServices/bi/bi"]=n.bi,s.biEventTypes=n.biEventTypes,s["documentServices/componentDetectorAPI/componentDetectorAPI"]=n.temp.componentDetectorAPI,s["documentServices/component/component"]=n.temp.component,s["documentServices/stylableEditor/stylableEditorAPI"]=n.temp.stylableEditorAPI,s["documentServices/dataModel/dataModel"]=n.dataModel,s["documentServices/component/componentStylesAndSkinsAPI"]=n.temp.componentStylesAndSkinsAPI,s["documentServices/component/componentCode"]=n.temp.componentCode,s["documentServices/component/componentBehaviors"]=n.temp.componentBehaviors,s["documentServices/media/wixVideoAPI"]=n.temp.wixVideoAPI,s["documentServices/constants/constants"]=n.constants,s["documentServices/component/componentStructureInfo"]=n.componentStructureInfo,s["documentServices/component/componentScroll"]=n.temp.componentScroll,s["documentServices/mobileConversion/mobileActions"]=n.temp.mobileActions,s["documentServices/componentsLoader/componentsLoader"]=n.componentsLoader,s["documentServices/componentsMetaData/componentsMetaData"]=n.temp.componentsMetaData,s["documentServices/hooks/componentsExternalHooks/createCompDriver"]=n.temp.createCompDriver,s["documentServices/connections/connections"]=n.temp.connections,s["documentServices/utils/setOperationQueueUtils"]=n.setOperationQueueUtils,s["documentServices/structure/structure"]=n.structure,s["documentServices/debug/dsQTrace"]=n.dsQTrace,s["documentServices/documentMode/documentMode"]=n.documentMode,s["documentServices/errors/errors"]=n.temp.tmpErrors,s["documentServices/feedback/feedback"]=n.temp.feedback,s["documentServices/fonts/fonts"]=n.temp.fonts,s["documentServices/inlinePopup/inlinePopup"]=n.temp.inlinePopup,s["documentServices/browserThemeColor/browserThemeColor"]=n.temp.browserThemeColor,s["documentServices/layouters/layouters"]=n.temp.layouters,s["documentServices/media/globalImageQualityData"]=n.temp.globalImageQualityData,s["documentServices/media/vectorImageAPI"]=n.temp.vectorImageAPI,s["documentServices/media/svgFiltersDefinitions"]=n.temp.svgFiltersDefinitions,s["documentServices/menu/mainMenu"]=n.temp.mainMenu,s["documentServices/menu/menuAPI"]=n.temp.menuAPI,s["documentServices/menu/basicMenuItemMethods"]=n.temp.basicMenuItemMethods,s["documentServices/mobileConversion/mobileConversionFacade"]=n.temp.mobileConversionFacade,s["documentServices/mobileConversion/mobileEditorSettings/mobileSettings"]=n.temp.mobileSettings,s["documentServices/mobileConversion/mobileEditorSettings/quickActions"]=n.temp.quickActions,s["documentServices/mobileConversion/mobileEditorSettings/quickActionsVersionUtils"]=n.temp.quickActionsVersionUtils,s["documentServices/mobileConversion/mobileEditorSettings/quickActionBarManager"]=n.temp.quickActionBarManager,s["documentServices/mobileConversion/modules/mergeAggregator"]=n.temp.mergeAggregator,s["documentServices/mobileConversion/modules/mobilePresets/mobilePresetsHandler"]=n.temp.mobilePresetsHandler,s["documentServices/mobileConversion/modules/menuContainer/menuContainer"]=n.temp.menuContainer,s["documentServices/page/page"]=n.page,s["documentServices/page/pageData"]=n.temp.pageData,s["documentServices/pagesGroup/pagesGroup"]=n.temp.pagesGroup,s["documentServices/platform/platform"]=n.temp.platform,s["documentServices/platform/provision"]=n.temp.provision||n.temp.platform,s["documentServices/platform/sessionState"]=n.temp.sessionState,s["documentServices/platform/pages"]=n.temp.pages,s["documentServices/platform/serialization"]=n.temp.serialization,s["documentServices/platform/services/viewerInfoChangedEmitter"]=n.temp.viewerInfoChangedEmitter,s["documentServices/platform/services/apiCallBiService"]=n.temp.apiCallBiService,s["documentServices/platform/livePreview/livePreview"]=n.temp.livePreview,s["documentServices/platform/common/constants"]=n.temp.platformConstants,s["documentServices/renderPlugins/renderPlugins"]=n.temp.renderPlugins,s["documentServices/routers/routers"]=n.temp.routers,s["documentServices/routers/pointers/routersPointers"]=n.temp.routersPointers,s["documentServices/saveAPI/saveAPI"]=n.temp.saveAPI,s["documentServices/siteMembers/siteMembers"]=n.temp.siteMembers,s["documentServices/siteMetadata/siteMetadata"]=n.siteMetadata,s["documentServices/siteSegments/siteSegments"]=n.temp.siteSegments,s["documentServices/smartBoxes/smartBoxes"]=n.temp.smartBoxes,s["documentServices/smartBoxes/multiComponentsUtils"]=n.temp.multiComponentsUtils,s["documentServices/smartBoxes/multiComponentsUtilsValidations"]=n.temp.multiComponentsUtilsValidations,s["documentServices/smartBoxes/grouping"]=n.temp.grouping,s["documentServices/smartBoxes/groupingUtils"]=n.temp.groupingUtils,s["documentServices/structure/structureUtils"]=n.temp.structureUtils,s["documentServices/structure/utils/arrangement"]=n.temp.arrangement,s["documentServices/structure/meshMigrationUtil"]=n.temp.meshMigrationUtil,s["documentServices/theme/theme"]=n.temp.theme,s["documentServices/tpa/tpa"]=n.temp.tpa,s["documentServices/tpa/core"]=n.temp.tpaCore,s["documentServices/validation/validation"]=n.temp.validation,s["documentServices/wixCode/wixCode"]=n.temp.wixCode,s["documentServices/wixapps/wixapps"]=n.temp.wixapps;var a={get:function(t){return s[t]},all:s};function r(t){return e.initPublicModules(a,t)}function u(n,i){return t.assign(n.santaLegacy,{viewerLibrary:a}),e.initDocumentServicesPublicAPI(n,i)}function l(){var e={sendHttpRequest:function(e,n,i,o,a,r){s.coreUtils.ajaxLibrary.ajax(t.merge(i,{url:e,type:n,data:o,success:a,error:r}))}};t.set(n,["contextAdapter","actions"],e),t.set(n,["contextAdapter","documentServicesHandlersThatOverridesViewerHandlers"],{applicationLoaded:!0,siteInfo:!0,getSectionUrl:!0,getStateUrl:!0,navigateToPage:!0,getExternalId:!0,getValue:!0,getValues:!0,getPublicData:!0,getCurrentPageAnchors:!0,getComponentInfo:!0,navigateToSectionPage:!0,isAppSectionInstalled:!0,getAppVendorProductId:!0,getSitePages:!0,getSiteMap:!0,smCurrentMember:!0,refreshCurrentMember:!0})}return{initPublicModules:r,initDocumentServicesPublicAPI:u,initContextAdapter:l}}.apply(e,i))||(t.exports=o)},48:function(t,e){t.exports=f},5:function(t,e){t.exports=i},51:function(t,e){t.exports=m},6:function(t,e){t.exports=o},63:function(t,e,n){var i;void 0===(i=function(){"use strict";return{fullFunctionalityConfig:["siteSegmentsPublicAPI","pagePublicAPI","pagesGroupPublicAPI","themePublicAPI","fontsPublicAPI","componentPublicAPI","stylableEditorPublicAPI","continuousActionsPublicAPI","smartBoxesPublicAPI","dataModelPublicAPI","componentsMetaDataPublicAPI","componentsLoaderPublicAPI","actionsAndBehaviorsPublicAPI","siteMetadataPublicAPI","feedbackPublicAPI","savePublicAPI","structurePublicAPI","documentModePublicAPI","menuPublicAPI","componentDetectorPublicAPI","wixappsPublicAPI","tpaPublicAPI","biPublicAPI","renderPluginsPublicApi","mobilePublicAPI","errorsPublicAPI","layoutersPublicAPI","validationPublicAPI","mediaPublicAPI","wixCodePublicAPI","siteMembersPublicAPI","connectionsPublicAPI","appControllerDataPublicAPI","appStudioWidgetsPublicAPI","platformPublicAPI","routersPublicAPI","autosavePublicAPI","deprecationPublicAPI","accessibilityPublicAPI","debugPublicAPI","inlinePopupPublicAPI","browserThemeColorPublicAPI"],fullHeadlessConfig:["siteSegmentsPublicAPI","pagePublicAPI","themePublicAPI","fontsPublicAPI","componentPublicAPI","smartBoxesPublicAPI","dataModelPublicAPI","componentsMetaDataPublicAPI","actionsAndBehaviorsPublicAPI","siteMetadataPublicAPI","feedbackPublicAPI","savePublicAPI","structurePublicAPI","documentModePublicAPI","menuPublicAPI","componentDetectorPublicAPI","wixappsPublicAPI","tpaPublicAPI","biPublicAPI","renderPluginsPublicApi","mobilePublicAPI","errorsPublicAPI","layoutersPublicAPI","validationPublicAPI","mediaPublicAPI","wixCodePublicAPI","siteMembersPublicAPI","connectionsPublicAPI","appControllerDataPublicAPI","appStudioWidgetsPublicAPI","platformPublicAPI","routersPublicAPI","autosavePublicAPI","deprecationPublicAPI","accessibilityPublicAPI","inlinePopupPublicAPI","browserThemeColorPublicAPI"],testConfig:["siteSegmentsPublicAPI","pagePublicAPI","pagesGroupPublicAPI","themePublicAPI","fontsPublicAPI","componentPublicAPI","stylableEditorPublicAPI","smartBoxesPublicAPI","dataModelPublicAPI","componentsMetaDataPublicAPI","actionsAndBehaviorsPublicAPI","siteMetadataPublicAPI","feedbackPublicAPI","savePublicAPI","structurePublicAPI","documentModePublicAPI","menuPublicAPI","componentDetectorPublicAPI","wixappsPublicAPI","tpaPublicAPI","biPublicAPI","renderPluginsPublicApi","mobilePublicAPI","errorsPublicAPI","layoutersPublicAPI","mediaPublicAPI","wixCodePublicAPI","connectionsPublicAPI","appControllerDataPublicAPI","appStudioWidgetsPublicAPI","siteMembersPublicAPI","platformPublicAPI","routersPublicAPI","autosavePublicAPI","accessibilityPublicAPI","appStudioPublicAPI","inlinePopupPublicAPI","browserThemeColorPublicAPI"],listsDataConfig:["componentDetectorPublicAPI","dataModelPublicAPI","menuPublicAPI","siteSegmentsPublicAPI","pagePublicAPI","wixappsPublicAPI","biPublicAPI"],siteInfo_v2Config:["siteSegmentsPublicAPI","pagePublicAPI","themePublicAPI","componentPublicAPI","dataModelPublicAPI","componentsMetaDataPublicAPI","actionsAndBehaviorsPublicAPI","siteMetadataPublicAPI","structurePublicAPI","documentModePublicAPI","menuPublicAPI","componentDetectorPublicAPI","wixappsPublicAPI","mobilePublicAPI","routersPublicAPI","accessibilityPublicAPI","inlinePopupPublicAPI","browserThemeColorPublicAPI"],siteInfoConfig:["siteSegmentsPublicAPI","pagePublicAPI","themePublicAPI","componentPublicAPI","dataModelPublicAPI","componentsMetaDataPublicAPI","actionsAndBehaviorsPublicAPI","siteMetadataPublicAPI","structurePublicAPI","documentModePublicAPI","menuPublicAPI","componentDetectorPublicAPI","wixappsPublicAPI","mobilePublicAPI","appStudioPublicAPI","inlinePopupPublicAPI","browserThemeColorPublicAPI"]}}.apply(e,[]))||(t.exports=i)},70:function(t,e){t.exports=P},700:function(t,e,n){var i,o;i=[n(701),n(97),n(716),n(717),n(718),n(719),n(720),n(721),n(722),n(723),n(224),n(225),n(228),n(230),n(229),n(231),n(223),n(127)],void 0===(o=function(t,e,n,i,o,s,a,r,u,l,c,p,d,h,g,f,m,P){"use strict";return{Site:t,configs:{fullFunctionality:e,localMode:i,fullHeadless:n,listsData:o,siteInfo:s,test:a,siteInfo_v2:r,ADI:l,appStudio:u},debug:{DataAccessLayer:c,pathValidationUtil:p,fullFunctionalityConfig:e,fullHeadlessConfig:n,listsDataConfig:o,siteInfoConfig:s,testConfig:a,siteInfo_v2Config:r,appStudioConfig:u,ADIConfig:l,SetOperationsQueueNoSite:d,FullJsonUpdater:h,GeneralSuperDal:g,DisplayedJsonUpdater:f,privateServices:m,DocumentServicesSiteAPINoSite:P}}}.apply(e,i))||(t.exports=o)},701:function(t,e,n){var i,o;i=[n(0),n(28),n(223),n(711),n(8),n(16),n(1),n(47)],void 0===(o=function(t,e,n,i,o,s,a,r){"use strict";var u=e.bi,l=e.biErrors,c=e.biEvents,p=e.undoRedo,d=e.documentServicesDataFixer,h=e.mobilePreSaveOperation,g=e.patchData,f=e.autosave,m=e.siteMetadata;function P(e,n,i,o){n.isReadOnly||function(e,n,i){if(i.__setDs_OperationsQAllAsyncIsOpen=t.noop,!n.shouldRender)return i.registerToSiteDataChanged=e.setOperationsQueue.registerToSiteDataChanged.bind(e.setOperationsQueue),void(i.waitForChangesApplied=function(t){t()});i.waitForChangesApplied=function(t,n){n?e.setOperationsQueue.flushQueueAndExecute(t):e.setOperationsQueue.waitForChangesApplied(t)},i.registerToErrorThrown=e.setOperationsQueue.registerToErrorThrown.bind(e.setOperationsQueue),i.unRegisterFromErrorThrown=e.setOperationsQueue.unRegisterFromErrorThrown.bind(e.setOperationsQueue),i.registerToSiteChanged=e.setOperationsQueue.registerToSiteChanged.bind(e.setOperationsQueue),i.useSimpleTimeoutToDeferQueue=e.setOperationsQueue.useSimpleTimeoutToDefer.bind(e.setOperationsQueue),i.useAnimationFrameToDeferQueue=e.setOperationsQueue.useAnimationFrameToDefer.bind(e.setOperationsQueue)}(e,n,i),n.noUndo||(i.history=o||new p(e,n.undoablePaths,n.nonUndoablePaths))}var y=function(t){if(a.log.error("Document services init failed"),a.log.error(t.message),s.integrations.ravenUtils.captureError(t),o.isOpen("sv_preventEditorToOpenOnDataFixerFailure"))throw new Error("Document services init failed!!!")};var v=function(e,n,i){return new Promise(function(r){!function(t){var e=t.dal.get(t.pointers.general.getAutosaveInfo());e&&(e.changesApplied?t.siteAPI.reportBI(c.AUTO_SAVE_DIFFS_RESTORED,{}):e.restoreError&&(f.handleValidationError(t),t.siteAPI.reportBI(l.AUTOSAVE_RESTORE_FAILED,e.restoreError)))}(e);var u=void 0;if(n.isReadOnly||(u=function(e,n){var i=n.modules,o=n.runStylesGC,s=n.disableSave,r=n.componentsToLoad,u=n.firstSaveExtraPayload,l=n.selectiveCompsDS;return new Promise(function(n){var c=e.siteDataAPI.getActionQueue(),p={runStylesGC:o,disableSave:s,componentsToLoad:r,firstSaveExtraPayload:u,selectiveCompsDS:l},h=function(){a.loggingUtils.performance.finish(a.loggingUtils.performanceMetrics.DS_INIT),n()};c.runImmediately(function(){d.fix(e),a.loggingUtils.performance.start(a.loggingUtils.performanceMetrics.DS_INIT),t.invokeMap(i,"initMethod",e,p)});var g=t(i).invokeMap("asyncInitMethod",e,p).compact().value();g.length?Promise.all(g).catch(y).finally(h):h()})}(e,n)),o.isOpen("sv_restoreAutosaveWhenMobileFails",e.siteDataAPI.siteData)){var p=e.dal.get(e.pointers.general.getAutosaveInfo());t.get(p,"changesApplied")&&function(t){try{s.integrations.ravenUtils.breadcrumb("Starting mobile conversion on load."),a.loggingUtils.performance.start(a.loggingUtils.performanceMetrics.MOBILE.CONVERSION_ON_LOAD_AUTOSAVE),h(t),a.loggingUtils.performance.finish(a.loggingUtils.performanceMetrics.MOBILE.CONVERSION_ON_LOAD_AUTOSAVE)}catch(t){s.integrations.ravenUtils.captureError(t,{tags:{mobileConversionOnLoadFailed:!0}}),window.parent.postMessage("mobileConversionFailed_ReloadNeeded","*")}}(e)}return P(e,n,i),u?u.then(r).catch(function(t){return y(t)}):r()})};function I(e,n,i,s,a,r,u){r?function(e,n){var i=-10104===n.errorCode?{errorMsg:"Validation Error"}:t.merge({errorMsg:n.message},n.patch);e.dal.set(e.pointers.general.getAutoSaveInnerPointer("restoreError"),i)}(e,r):u.changesApplied&&e.dal.set(e.pointers.general.getAutoSaveInnerPointer("changesApplied"),!0),e.dal.takeSnapshot("saveDocumentautosave");var l=function(e,n,i,s){var a=i.fullPagesData.pagesData,r=t.get(a,"masterPage.data.document_data.SITE_STRUCTURE"),u=s.fixPages(a);return n.isReadOnly?u:(o.isOpen("sv_fasterPagesDataOnLoad",e.siteDataAPI.siteData)?e.dal.full.setByPathToHostModelWithMutation(["pagesData"],u):(e.dal.full.setByPathToHostModel(["pagesData"],{}),e.dal.full.setByPathToHostModel(["pagesData","masterPage"],u.masterPage),t.forEach(u,function(t,n){e.dal.full.setByPathToHostModel(["pagesData",n],t)})),r&&function(t){var e=t.pointers.general.getOrphanPermanentDataNodes();t.dal.push(e,"SITE_STRUCTURE")}(e,u.masterPage),u)}(e,n,s,a);e.siteDataAPI.anchors.createPageAnchors("masterPage"),"editor"!==s.siteData.renderFlags.componentViewMode||n.isReadOnly||m.setProperty(e,m.PROPERTY_NAMES.MULTILINGUAL,{originalLanguage:{},translationLanguages:[]}),n.isReadOnly||!n.shouldRender?(a.createDisplayedPagesWhenNoSite(l),v(e,n,i).then(function(){return b()})):a.buildRenderedSite(function(t){if(n.shouldRender){if(!t)throw new Error("you need to pass the Site instance if you want to be able to render it...");e.initiateSiteAPI(t)}A(e),v(e,n,i).then(function(){return D(e)})})}var A=function(t){var e=t.config.origin;u.event(t,c.PREVIEW_SITE_READY,{dsOrigin:e}),window.parent.postMessage("santa.siteReady","*")},S=function(){a.loggingUtils.fedopsLogger.interactionEnded(a.loggingUtils.fedopsLogger.INTERACTIONS.DOCUMENT_SERVICES_INITIALIZATION)},D=function(t){if(window.documentServices){var e=t.config.origin;u.event(t,c.DOCUMENT_SERVICES_LOADED,{dsOrigin:e}),window.didLoadDocumentServices=!0,window.parent.postMessage("documentServicesLoaded","*"),S()}},b=function(){return t.attempt(function(){!t.isUndefined(window)&&window.parent&&(window.parent.postMessage("documentServicesLoaded","*"),S())})};return function(e,s,u,l,c){o.isOpen("ds_recordActionsToCompareWithRC")&&a.guidUtils.setInitialSeed(Date.now()),o.isOpen("ds_runActionsToCompareWithRC")&&a.guidUtils.setInitialSeed(t.parseInt(s.siteData.currentUrl.query.initialSeed));var p=new n(e,s);o.isOpen("ds_recordActionsToCompareWithRC")&&(p.runtimeConfig.trace.isTracing=!0),e.isTest&&(this.ps=p),e.socketAPI&&(p.socketAPI=e.socketAPI);var d={addPostDataFixersMethodsToPublicAPI:P.bind(P,p,e)};r.initContextAdapter();var h={config:e,santaLegacy:d,ps:p};r.initDocumentServicesPublicAPI(h,this);var f={fixPages:u||t.identity,createDisplayedPagesWhenNoSite:c||t.identity};if(l&&(f.buildRenderedSite=l.bind(this)),e.isReadOnly)I(p,e,this,s,f,null,{changesApplied:!1});else{var m=I.bind(null,p,e,this,s,f);g.applyPatchIfExists(p,e,m,m)}this.withCache=function(e){var n=function(t){return t?[t.id+"###"+t.type]:[]},o=i(e).memoize("components.layout.get",n).memoize("components.layout.getRelativeToScreen",function(t,e){return t?[t.id+"###"+t.type+"###"+e]:[]}).memoize("components.layout.getRelativeToStructure",n).memoize("components.is.groupedComponent",n).memoize("components.is.group",n).memoize("components.getType",n).memoize("components.arrangement.canMoveBackward",n).memoize("components.arrangement.canMoveForward",n).memoize("components.is.containable",n).build(),s=o.api,a=o.clear,r=[];return e.registerToSiteChanged(function(e){a(),t.forEach(r,function(t){t(e)})}),s.registerToSiteChanged=function(t){r.push(t)},s}.bind(null,this)}}.apply(e,i))||(t.exports=o)},702:function(t,e){t.exports=v},703:function(t,e,n){var i,o;i=[n(0),n(23),n(1),n(8),n(226),n(227),n(704)],void 0===(o=function(t,e,n,i,o,s,a){"use strict";var r={};function u(e,n,i){var o=r[e._siteId];return t.get(o,n,i)}function l(t){return u(t,"props.siteData",t._siteData)}function c(t){return t._siteDataAPI||u(t,"props.viewerPrivateServices.siteDataAPI")}function p(t,e){return u(t,"siteAspects",{})[e]}function d(t){return u(t,"siteAPI",{})}function h(t){var e=function(t){var e=d(this),n=r[this._siteId].getPageOfComp(t);if(!n)return null;var i=n.props.rootId,o=e.getPointers(),s=o.components.getPage(i,l(this).getViewMode());return o.components.getComponent(t,s)}.call(this,t);if(!e)return{};var n=d(this),i=n.getPointers(),o=n.getDisplayedDAL();return a.getAdditionalComps(e,i,o)}function g(e){return t(e).keys().map(h.bind(this)).reduce(t.assign)}function f(n){var i=this;if(n&&n.props){var a=n.props.siteData;this._siteId=a.siteId,r[this._siteId]=n,s.call(this,a,c(this)),this._didLayoutCallbacks=[],this._registeredToDidLayout=!1,this._lastForceUpdate=null,t.forEach(this.bgVideo,function(t,e){this.bgVideo[e]=t.bind(this)}.bind(this));t.assign(this,o(function(t,e){for(var n=arguments.length,o=Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];var a;return(a=p(i,t))[e].apply(a,o)}))}else window.wixBiSession&&window.wixBiSession.sendError(e.errors.NULL_SITE_ERROR,"Document Services")}return f.prototype=t.create(s.prototype,{constructor:f,enforceAndPatchIfNeeded:function(){var t=l(this),e=!!d(this).getNoEnforceAnchors(),n=t.enforceAndPatchRequested;return t.enforceAndPatchRequested=!1,!(!n||!e)&&r[this._siteId].enforceAndPatchLayout()},registerToDidLayout:function(t){var e=r[this._siteId];this._registeredToDidLayout||(e.registerAspectToEvent(e.supportedEvents.didLayout,this.didLayoutCallback.bind(this)),this._registeredToDidLayout=!0),this._didLayoutCallbacks.push(t)},didLayoutCallback:function(){var e=r[this._siteId];this._lastForceUpdate&&this._lastForceUpdate!==e.state.forceUpdateIndex||t.forEach(this._didLayoutCallbacks,function(t){t()})},unRegisterFromDidLayout:function(t){var e=r[this._siteId];e.unregisterAspectFromEvent(e.supportedEvents.didLayout,t)},setLockedCompMap:function(t){var e=r[this._siteId];e.lockedCompMap=t?g.call(this,t):null},setCompsToRelayoutMap:function(t){var e=r[this._siteId];e.compsToRelayoutMap=t?g.call(this,t):null},setNoEnforceAnchors:function(t){d(this).setNoEnforceAnchors(t)},refreshRenderedRootsData:function(){c(this).refreshRenderedRootsData(t.noop)},forceUpdate:function(){var e=r[this._siteId];this._lastForceUpdate=t.uniqueId("upd"),function(){var t=l(this);n.loggingUtils.performance.time("mobxUpdate",function(){t.observableUpdateIndex++})}.call(this),e.setState({noEnforceAnchors:!1,forceUpdateIndex:this._lastForceUpdate})},resetBehaviorsRegistration:function(){p(this,"actionsAspect").resetBehaviorsRegistration(),p(this,"behaviorsAspect").resetBehaviorsRegistration()},enableAction:function(t){p(this,"actionsAspect").enableAction(t)},disableAction:function(t){p(this,"actionsAspect").disableAction(t)},removeResolvedDataMapForPage:function(t){d(this).removeResolvedDataMapForPage(t)},createDisplayedPage:function(t){c(this).createDisplayedPage(t)},createDisplayedNode:function(t){c(this).createDisplayedNode(t)},getComponentsByPageId:function(t){return r[this._siteId].getComponentsByPageId(t)},getAllRenderedRootIds:function(){return r[this._siteId].getAllRenderedRootIds()},getRootIdsWhichShouldBeRendered:function(){return r[this._siteId].getRootIdsWhichShouldBeRendered()},isComponentRenderedOnSite:function(e){var n=this,i=this.getAllRenderedRootIds();return t.includes(i,e)||t.some(i,function(t){var i=n.getComponentsByPageId(t);return Boolean(i&&i[e])})},navigateToPage:function(t,e,n){r[this._siteId].tryToNavigate(t,e,!1,n)},updatePageNavInfo:function(t,e,n){var i=r[this._siteId],o=l(this);if(t.pageId!==o.getPrimaryPageId()&&t.pageId!==o.getCurrentPopupId())throw new Error("you need to navigate to page if it's a different page");i.tryToNavigate(t,e,!0,n)},scrollToAnchor:function(t,e){var i=r[this._siteId],o=n.scrollAnchors.calcAnchorScrollToPosition(t,d(this));return i.scrollToAnchor(o,e)},scrollToComponent:function(t,e){return d(this).scrollToComponent(t,e)},setMobileView:function(t){d(this).setMobileView(t)},openPopupPage:function(t){this.navigateToPage({pageId:t},!0)},closePopupPage:function(){var t=l(this),e=t.getPrimaryPageId(),n=t.getExistingRootNavigationInfo(e);this.navigateToPage(n,!0)},hasPendingFonts:function(){return d(this).getSiteAspect("fontsLoaderAspect").hasPendingFonts()},isExperimentOpen:function(t){return i.isOpen(t,l(this))},isSiteBusy:function(){return u(this,"isBusy")},isSiteBusyIncludingTransition:function(){return r[this._siteId].siteAPI.isSiteBusyIncludingTransition()},getSiteAnimationsService:function(){return l(this).animations},getCurrentUrl:function(){return l(this).currentUrl},isQaMode:function(){var e=l(this).currentUrl.query;return t.has(e,"isqa")&&"false"!==e.isqa},getViewMode:function(){return l(this).getViewMode()},getPublicBaseUrl:function(){return l(this).getPublicBaseUrl()},getAspectGlobalData:function(t){return d(this).getAspectGlobalData(t)},getModalCompData:function(){return this.getAspectGlobalData("tpaModalAspect")},getPopupsCompData:function(){return this.getAspectGlobalData("tpaPopupAspect")},getTpaCompPreviewData:function(t){return d(this).getAspectComponentData("tpaCompStateAspect",t)},setTpaCompPreviewData:function(t,e){return d(this).setAspectComponentData("tpaCompStateAspect",t,e)}}),f}.apply(e,i))||(t.exports=o)},704:function(t,e,n){var i,o;i=[n(0)],void 0===(o=function(t){"use strict";var e={"wysiwyg.viewer.components.BoxSlideShow":!0,"wysiwyg.viewer.components.StripContainerSlideShow":!0,"wysiwyg.viewer.components.StripColumnsContainer":!0},n={"wysiwyg.viewer.components.Column":function(t){return!t}},i={"wysiwyg.viewer.components.Column":function(t){return!t}};return{getAdditionalComps:function(o,s,a){var r=s.components.getChildren(o),u={},l=function(e){t.forEach(e,function(e){var n=e.id;t.set(u,n,!0)})};l([o]),l(r);var c=s.components.getParent(o);if(c){var p=s.components.isMobile(o),d=a.get(s.getInnerPointer(o,"componentType"));if(function(e,i,o){return"wysiwyg.viewer.components.Group"===i||t.invoke(n,e,o)}(d,a.get(s.getInnerPointer(c,"componentType")),p)&&l([c]),function(e,n){return t.invoke(i,e,n)}(d,p)){var h=s.components.getChildren(c);l(h)}(function(t){return e[t]})(d)&&t.forEach(r,function(t){var e=s.components.getChildren(t);l(e)})}return u}}}.apply(e,i))||(t.exports=o)},705:function(t,e,n){var i,o;i=[n(0),n(16),n(127)],void 0===(o=function(t,e,n){"use strict";function i(i,o){var s=i&&i instanceof e.FullSiteData;n.call(this,i,o,s),this.navigateToPage=function(t){i.setRootNavigationInfo(t,!0)},this.getTotalScroll=function(){return{x:0,y:0}},this.reportBI=t.noop}return i.prototype=new n({}),i}.apply(e,i))||(t.exports=o)},706:function(t,e,n){var i,o;i=[n(0),n(28),n(707),n(1)],void 0===(o=function(t,e,n,i){"use strict";var o=e.setOperationQueueUtils,s=e.dsQTrace,a={};function r(e,n,i){var o=t.get(e,n,i);return t.isFunction(o)&&(o=o.apply(null,e.args)),o}function u(t){this.updateHandlesCounter=1,this.queue=[],this.doneCallbacks={},this.currentContinuousAction=null,this.itemCurrentlyRunning=null,this.lastUpdateFinished=null,this.failed={},this.siteUpdatesHandler=new n(t,this.onSiteUpdated.bind(this)),this.onErrorCallbacks=[],this.siteUpdatedCallbacks=[],this.isDebug=t.siteAPI.isDebugMode(),this.deferFunction=i.animationFrame.request,this.actionQueue=t.siteDataAPI.getActionQueue(),this.privateServices=t}function l(t){this.siteId=t.siteAPI.getSiteId(),a[this.siteId]=new u(t)}return u.prototype={addToActionQueue:function(t){t.params.isContinuousAction&&this.siteUpdatesHandler.beforeContinuousActionApplied(t.params),this.actionQueue.addItem(this.executeOperation.bind(this,t.operation,t.args,t))},runBatchOfOperations:function(t){for(var e,n,i=this,o=this.queue[0];!this.disposed&&(e=this.itemCurrentlyRunning,(n=o)&&n.firstInBatch||n&&i.siteUpdatesHandler.canAddItemToUpdateBatch(n.params)&&e&&(!e.isRealAsyncOperation||t));)this.itemCurrentlyRunning=o,o.firstInBatch||(o.firstInBatch=this.siteUpdatesHandler.addItemToUpdateBatch(o.handle,o.params)),this.queue.shift(),this.applySetOperation(o),o=this.queue[0];this.itemCurrentlyRunning.isRealAsyncOperation&&!t||this.siteUpdatesHandler.closeBatchAndUpdate()},executeSetOperation:function(t){this.itemCurrentlyRunning=t,t.firstInBatch=this.siteUpdatesHandler.addItemToUpdateBatch(t.handle,t.params),t.firstInBatch&&this.deferFunction(this.runBatchOfOperations.bind(this,!1))},applySetOperation:function(t){t.firstInBatch&&this.siteUpdatesHandler.addTraceTime("notMe"),r(t,"params.shouldExecOp",!0)?t.isRealAsyncOperation&&t.asyncPreDataManipulation?this.executeOperation(t.asyncPreDataManipulation,t.args,t):this.addToActionQueue(t):this.siteUpdatesHandler.cancelUpdateBatchItem(t.handle)},validateContinuousAction:function(t){if(null!==this.currentContinuousAction){if(this.currentContinuousAction!==t.params.methodName)throw new Error("cant run "+t.params.methodName+" action while "+this.currentContinuousAction+" is running");if(t.params.continuousActionType===o.CONTINUOUS_ACTION_TYPES.START)throw new Error("cant start new continuous operation")}else if(t.params.continuousActionType===o.CONTINUOUS_ACTION_TYPES.ON||t.params.continuousActionType===o.CONTINUOUS_ACTION_TYPES.END)throw new Error("cant continue "+t.params.methodName+" before started")},validateNonContinuousAction:function(){if(null!==this.currentContinuousAction)throw new Error("cant run other actions while "+this.currentContinuousAction+" is running")},validateOperation:function(t){t.params.isContinuousAction?this.validateContinuousAction(t):this.validateNonContinuousAction()},updateContinuousQueueState:function(t){t.params.continuousActionType===o.CONTINUOUS_ACTION_TYPES.START?this.currentContinuousAction=t.params.methodName:t.params.continuousActionType===o.CONTINUOUS_ACTION_TYPES.END&&(this.currentContinuousAction=null)},executeOperation:function(t,e,n){try{return this.validateOperation(n),n.params.isContinuousAction&&this.updateContinuousQueueState(n),t.apply(null,e)}catch(t){throw this.handleFailure(n,t),t}},handleFailure:function(e,n){this.failed[e.handle]=n,this.siteUpdatesHandler.cancelUpdateBatchItem(e.handle),this.itemCurrentlyRunning=null,i.log.error(n),t.forEach(this.onErrorCallbacks,function(t){t({error:n,methodName:e.params.methodName,handle:e.handle})}),!this.isDebug||window.karmaIntegration||window.__karma__||window.alert("you have error (in DS) !!! look at the console"),this.siteUpdatesHandler.closeBatchAndUpdate()},runDoneCallbacks:function(e){var n=this.failed[e];t.forEach(this.doneCallbacks[e],function(t){t(n)}),delete this.doneCallbacks[e]},runNextStepInQueue:function(){if(!this.disposed){var t=this.queue[0];t&&this.siteUpdatesHandler.canAddItemToUpdateBatch(t.params)?this.executeSetOperation(t):this.siteUpdatesHandler.closeBatchAndUpdate()}},onSiteUpdated:function(e,n){this.disposed||(e&&!t.isEmpty(e)&&(this.itemCurrentlyRunning=null,this.lastUpdateFinished=t.last(e),t.forEach(e,this.runDoneCallbacks.bind(this))),this.siteUpdatesHandler.addTraceTime("waitForChanges"),this.siteUpdatesHandler.logTrace(),s.shouldLogConsoleTrace(this.privateServices)&&console.trace&&console.trace(),this.itemCurrentlyRunning||this.runNextStepInQueue(),t.forEach(this.siteUpdatedCallbacks,function(t){t(n)}))},getNextUpdateHandle:function(){return++this.updateHandlesCounter},getLastQueueItem:function(){if(!this.itemCurrentlyRunning&&!this.queue.length)return null;var e=this.itemCurrentlyRunning;return this.queue.length&&(e=t.last(this.queue)),e},setNoBatchingAfterLastItemInQ:function(){var t=this.getLastQueueItem();t&&(t===this.itemCurrentlyRunning?this.siteUpdatesHandler.closeUpdateBatchAfterCurrentItem():t.params.noBatchingAfter=!0)},createNewQueueItem:function(e,n,i){var o={handle:this.getNextUpdateHandle(),operation:e,args:n,params:i,snapshot:null,isAsyncOperation:i.isAsyncOperation,asyncPreDataManipulation:i.asyncPreDataManipulation};if(t.isFunction(o.isAsyncOperation)&&"components.remove"!==i.methodName)throw Error("isAsyncOperation has to be a boolean. functions are still allowed for components.remove since we didn't have a choice. please make it false there as soon as you can");return o.isRealAsyncOperation=r(o,"isAsyncOperation"),delete o.isAsyncOperation,o}},l.prototype={dispose:function(){var t=a[this.siteId];t.siteUpdatesHandler.dispose(),t.queue=[],t.doneCallbacks={},t.onErrorCallbacks=[],t.disposed=!0,this.siteId=null},useSimpleTimeoutToDefer:function(e){a[this.siteId].deferFunction=t.partialRight(t.delay,e)},useAnimationFrameToDefer:function(){a[this.siteId].deferFunction=i.animationFrame.request},runSetOperation:function(t,e,n){var i=a[this.siteId],o=n||{},s=i.createNewQueueItem(t,e,o);return o.noBatching&&(o.noBatchingAfter=!0),(o.noBatching||s.isRealAsyncOperation)&&i.setNoBatchingAfterLastItemInQ(),i.queue.push(s),this.isRunningSetOperation()||i.runNextStepInQueue(),s.handle},isRunningSetOperation:function(){return!!a[this.siteId].itemCurrentlyRunning},executeAfterCurrentOperationDone:function(t){var e=a[this.siteId];e.itemCurrentlyRunning&&e.siteUpdatesHandler.addItemPostUpdateOperation(t,e.itemCurrentlyRunning.handle)},asyncPreDataManipulationComplete:function(e,n){var i=a[this.siteId];if(i.itemCurrentlyRunning&&i.itemCurrentlyRunning.isRealAsyncOperation)if(n)i.handleFailure(i.itemCurrentlyRunning,n);else{var o=i.itemCurrentlyRunning;t.isNil(e)||o.args.splice(1,0,e),i.addToActionQueue(o),t.defer(function(){i.runBatchOfOperations(!0)})}},registerToSiteChanged:function(t){a[this.siteId].siteUpdatedCallbacks.push(t)},registerToErrorThrown:function(t){a[this.siteId].onErrorCallbacks.push(t)},unRegisterFromErrorThrown:function(e){var n=a[this.siteId];n.onErrorCallbacks=t.without(n.onErrorCallbacks,e)},unRegisterAll:function(){var t=a[this.siteId];t.siteUpdatedCallbacks=[],t.onErrorCallbacks=[]},waitForChangesApplied:function(t){var e=a[this.siteId].getLastQueueItem();e?this.registerToSetOperationDone(e.handle,t):t()},registerToSetOperationDone:function(t,e){var n=a[this.siteId];n.lastUpdateFinished&&t<=n.lastUpdateFinished?e(n.failed[t]):(n.doneCallbacks[t]=n.doneCallbacks[t]||[],n.doneCallbacks[t].push(e))},flushQueueAndExecute:function(t){a[this.siteId].setNoBatchingAfterLastItemInQ(),this.waitForChangesApplied(t)}},l}.apply(e,i))||(t.exports=o)},707:function(t,e,n){var i,o;i=[n(0),n(28),n(708)],void 0===(o=function(t,e,n){"use strict";var i=e.setOperationQueueUtils,o=e.anchors,s=e.dsQTrace,a={};function r(t,e){this.continuous=null,this.clearLastUpdate(),this.ps=t,this.actionQueue=this.ps.siteDataAPI.getActionQueue(),this.updateProcessDoneCallback=e,this.traceTimes={}}function u(t){return(t=t||i.ENFORCE_TYPES.FULL)!==i.ENFORCE_TYPES.FULL}function l(t,e){this.siteId=t.siteAPI.getSiteId();var n=new r(t,e);a[this.siteId]=n,n.boundOnSiteUpdate=n.onSiteUpdated.bind(n),t.siteAPI.registerToDidLayout(n.boundOnSiteUpdate)}function c(){return a[this.siteId]||{logTrace:t.noop,addTraceTime:t.noop}}return r.prototype={beforeContinuousStart:function(){this.continuous.withOriginalValues&&this.ps.siteAPI.createOriginalValuesMapForRenderedRoots()},afterContinuousEnd:function(){this.continuous.withOriginalValues&&this.ps.siteAPI.clearOriginalValuesMapForRenderedRoots(),this.clearContinuousState()},clearLastUpdate:function(){this.isUpdatingAnchors=i.IS_UPDATING_ANCHORS.DONT_CARE,this.enforceType=i.ENFORCE_TYPES.DONT_CARE,this.batchedItemsCount=0,this.postUpdateOperations=[],this.addedToBatchItems=[],this.lockedComps={},this.singleCompFunctions=[],this.methodNames=[],this.noBatchingAfter=!1,this.isDuringBatch=!1,this.waitingForTransition=!1,this.isDuringContinuous()&&this.continuous.isLastBatch&&this.afterContinuousEnd()},initContinuousState:function(t){this.continuous={name:t.methodName,withOriginalValues:t.withOriginalValues,isLastBatch:!1}},updateContinuousState:function(t){this.continuous&&t.continuousActionType===i.CONTINUOUS_ACTION_TYPES.END&&(this.continuous.isLastBatch=!0)},clearContinuousState:function(){this.continuous=null},isDuringContinuous:function(){return null!==this.continuous},canRunAfterCurrentItem:function(t){return!!this.isBatchEmpty()||this.isDuringContinuous()===t.isContinuousAction&&(t.isContinuousAction?t.methodName===this.continuous.name&&t.continuousActionType!==i.CONTINUOUS_ACTION_TYPES.START:this.enforceType===i.ENFORCE_TYPES.DONT_CARE||t.enforceType===i.ENFORCE_TYPES.DONT_CARE||this.enforceType===t.enforceType)},canAddItemToBatch:function(t){return!(this.noBatchingAfter||this.ps.siteAPI.isSiteBusyIncludingTransition())&&this.canRunAfterCurrentItem(t)},beforeContinuousActionApplied:function(t){t.continuousActionType===i.CONTINUOUS_ACTION_TYPES.START?(this.initContinuousState(t),this.beforeContinuousStart()):this.updateContinuousState(t)},addItemToBatch:function(e,n){this.batchedItemsCount++,this.addedToBatchItems.push(e),n.isUpdatingAnchors!==i.IS_UPDATING_ANCHORS.DONT_CARE&&(this.isUpdatingAnchors=n.isUpdatingAnchors),n.enforceType!==i.ENFORCE_TYPES.DONT_CARE&&(this.enforceType=n.enforceType),this.noBatchingAfter=!!n.noBatchingAfter,this.isDuringBatch=!0,n.lockedComp&&t.set(this.lockedComps,n.lockedComp,!0),this.singleCompFunctions.push(n.singleComp),this.waitingForTransition=this.waitingForTransition||n.waitingForTransition,this.methodNames=t.union(this.methodNames,[n.methodName]);var o=1===this.addedToBatchItems.length;return o&&this.startTrace(),o},batchIncludes:function(e){return t.includes(this.addedToBatchItems,e)},cancelBatchedItem:function(e){this.batchedItemsCount--,t.remove(this.postUpdateOperations,{itemId:e})},addPostUpdateOperation:function(t,e){this.postUpdateOperations.push({itemId:t,operation:e})},isBatchEmpty:function(){return t.isEmpty(this.addedToBatchItems)},closeBatchAfterCurrentItem:function(){this.noBatchingAfter=!0},logTrace:function(){s.isTracing(this.ps)&&this.traceTimes.start&&(this.traceTimes.total=this.traceTimes.last-this.traceTimes.start,s.logTrace(this.ps,"VIEWER RENDERED FROM Q",{items:this.traceTimes.items,traceTimes:t.omit(this.traceTimes,"items")}))},startTrace:function(){if(s.isTracing(this.ps)){this.traceTimes={};var t=performance.now();this.traceTimes.items=this.addedToBatchItems,this.traceTimes.start=t,this.traceTimes.last=t}},addTraceTime:function(t){if(s.isTracing(this.ps)){var e=performance.now();this.traceTimes[t]=e-this.traceTimes.last,this.traceTimes.last=e}},batchUpdateDone:function(t){var e=this.addedToBatchItems;this.clearLastUpdate(),this.updateProcessDoneCallback(e,t)},processSiteUpdated:function(){if(!this.isDuringBatch){var e=!this.isDuringContinuous()||this.continuous.isLastBatch;this.actionQueue.runImmediately(function(){this.addTraceTime("renderAndStuff"),n.runPostUpdateOperations(this.ps,e),t.forEach(this.postUpdateOperations,function(t){t.operation()}),this.updateAnchorsOnNextRelayout&&(o.updateAnchorsForMultipleComps(this.ps),this.updateAnchorsOnNextRelayout=!1),this.ps.siteAPI.enforceAndPatchIfNeeded()&&n.runPostUpdateOperations(this.ps,!1),this.addTraceTime("postUpdate"),this.batchUpdateDone(this.methodNames)}.bind(this))}},onSiteUpdated:function(){this.isDuringBatch||this.waitingForTransition&&this.ps.siteAPI.isSiteBusyIncludingTransition()||(this.waitingForTransition=!1,this.processSiteUpdated())},listenToPageTransitionEnded:function(){var t=this;this.ps.siteAPI.registerNavigationComplete(function(){t.onSiteUpdated()})},listenToPageNavigationCanceled:function(){var t=this;this.ps.siteAPI.registerToPageNavigationCanceled(function(){t.onSiteUpdated()})},closeBatch:function(t){this.isDuringBatch=!1,this.isUpdatingAnchors===i.IS_UPDATING_ANCHORS.YES&&(this.updateAnchorsOnNextRelayout=!0),t&&(this.isInPostUpdateOperation=!1,this.waitingForTransition&&(this.listenToPageTransitionEnded(),this.listenToPageNavigationCanceled()),this.enforceType=this.enforceType===i.ENFORCE_TYPES.DONT_CARE?i.ENFORCE_TYPES.FULL:this.enforceType,this.addTraceTime("allOps"))},getLockedCompsMap:function(){return t.isEmpty(this.lockedComps)?null:this.lockedComps},getCompToRelayout:function(){var e=t.reduce(this.singleCompFunctions,function(e,n){var i=!!t.isFunction(n)&&n();return!(!e||!i)&&t.set(e,i,!0)},{});return t.isEmpty(e)?null:e},handleBatchFlushEnd:function(){this.ps.siteAPI.setNoEnforceAnchors(!!u(this.enforceType)&&t.uniqueId("enforce")),this.ps.siteAPI.setLockedCompMap(this.getLockedCompsMap()),this.ps.siteAPI.setCompsToRelayoutMap(this.getCompToRelayout()),this.ps.siteAPI.refreshRenderedRootsData()},closeBatchAndUpdate:function(){var t=this.batchedItemsCount>0;this.closeBatch(t),t?(this.ps.siteAPI.resetSiteReacted(),this.ps.siteAPI.clearPostUpdateOperationsRender(),this.actionQueue.addItem(this.handleBatchFlushEnd.bind(this)),this.actionQueue.flush(),this.ps.siteAPI.didReact()||(u(this.enforceType)&&o.updateAnchorsForMultipleComps(this.ps),this.onSiteUpdated())):this.isBatchEmpty()||this.batchUpdateDone()}},l.prototype={addItemToUpdateBatch:function(t,e){if(!this.canAddItemToUpdateBatch(e))throw new Error("the site is during update or this item isn't compatible with the current batch");return c.call(this).addItemToBatch(t,e)},addTraceTime:function(t){return c.call(this).addTraceTime(t)},logTrace:function(){return c.call(this).logTrace()},beforeContinuousActionApplied:function(t){c.call(this).beforeContinuousActionApplied(t)},closeUpdateBatchAfterCurrentItem:function(){var t=c.call(this);if(t.isBatchEmpty())throw new Error("there are no items in the batch..");t.closeBatchAfterCurrentItem()},canAddItemToUpdateBatch:function(t){return c.call(this).canAddItemToBatch(t)},cancelUpdateBatchItem:function(t){var e=c.call(this);if(!e.batchIncludes(t))throw new Error("no such item in the batch");e.cancelBatchedItem(t)},addItemPostUpdateOperation:function(t,e){var n=c.call(this);if(!n.batchIncludes(e))throw new Error("no such item in the batch");n.addPostUpdateOperation(e,t)},closeBatchAndUpdate:function(){c.call(this).closeBatchAndUpdate()},dispose:function(){var t=c.call(this);t.clearLastUpdate(),t.ps.siteAPI.unRegisterFromDidLayout(t.boundOnSiteUpdate),t.updateProcessDoneCallback=null,t.disposed=!0,this.siteId=null}},l}.apply(e,i))||(t.exports=o)},708:function(t,e,n){var i,o;i=[n(0),n(1),n(28)],void 0===(o=function(t,e,n){"use strict";var i=n.componentLayout,o=n.structure,s=n.documentMode,a=n.dataModel,r=n.anchors,u=n.constants,l=n.page,c=n.setOperationQueueUtils,p=n.sectionsLayoutMigrator;function d(t){return t&&t.packed}var h=function(e){return 0!==t.get(e,"minHeight",0)};function g(e,n,i,o,s,r){var u=e.siteAPI.getPrimaryPageId(),c=i.height[u],p=l.getReference(e,u),g=!1;if(!function(t,e){return"wysiwyg.viewer.components.WRichText"===t.dal.get(t.pointers.getInnerPointer(e,"componentType"))}(e,n))return!1;var f=a.getPropertiesItem(e,n);if(h(f))return d(f)&&(f.packed=!1,a.updatePropertiesItem(e,n,f)),!1;if(d(f))return!1;f||(f=a.createPropertiesItemByType(e,"WRichTextProperties"));var y=e.pointers.getInnerPointer(n,"layout"),v=e.dal.get(y),I=i.minHeight[n.id],A=function(t,e,n){return m(t,e,n,"previousPackFixHeight")}(s,r,n);return function(t,e,n){return!!m(t,e,n,"originalValues")}(s,r,n)&&(I<v.height||A&&I!==A)&&function(e,n){return t.some(n,{targetComponent:e,type:"BOTTOM_PARENT"})}(u,v.anchors)&&l.properties.update(e,p,{minHeight:c}),v.height!==I&&(g=!0),v.height=I,function(t,e,n,i){P(t,e,n,"previousPackFixHeight",i)}(s,r,n,I),function(e,n){var i=e.pointers.components.getSiblings(n);t.forEach(i,function(i){var o=e.pointers.getInnerPointer(i,["layout","anchors"]);if(e.dal.isExist(o)){var s=e.dal.get(o);if(t.some(s,{type:"BOTTOM_BOTTOM",targetComponent:n.id})){var a=t.reject(s,{type:"BOTTOM_BOTTOM",targetComponent:n.id});e.dal.set(o,a)}}})}(e,n),e.dal.set(y,v),i.height[n.id]=I,o||(f.packed=!0,a.updatePropertiesItem(e,n,f)),g}var f={};function m(e,n,i,o){return t.get(f,[e,n,i.id,o])}function P(e,n,i,o,s){t.set(f,[e,n,i.id,o],s)}function y(e,n){var i=e.pointers.getInnerPointer(n,"anchors"),o=e.dal.get(i),s={};return t.forEach(o,function(e){t.set(s,[e.type,e.targetComponent],e.distance)}),s}function v(t,e,n,i,o,s){(function(t,e,n){return m(t,e,n,"originalValues")})(o,s,e)||function(t,e,n,i){P(t,e,n,"originalValues",i)}(o,s,e,{height:t.dal.get(i),distancesTo:y(t,n)})}function I(e,n,o,s,a){if(n){var r=e.pointers.getInnerPointer(a,"layout");if(e.dal.isExist(r)){var u=n.top[a.id],l=n.height[a.id],c=n.width[a.id];if(function(){return t.every(arguments,t.isFinite)}(u,l,c)){var p=n.left[a.id],d=e.pointers.getInnerPointer(r,"docked");if(e.dal.get(d)){var h=e.pointers.getInnerPointer(e.pointers.general.getDockedRuntimeLayout(),a.id),g=i.getPositionAndSize(e,a);A(e.dal.get(h),g)&&e.dal.set(h,g)}var f={y:u,width:c},m=e.dal.get(e.pointers.getInnerPointer(r,"fixedPosition"));t.isUndefined(p)||s&&m||(f.x=p);var P=e.pointers.getInnerPointer(r,"height");f.height=l,v(e,a,r,P,o,s),A(e.dal.get(r),f)&&(e.siteAPI.setPostUpdateOperationsRender(a.id),e.dal.merge(r,f))}}}}function A(e,n){return!e||t.some(n,function(n,i){return!e||!t.isEqual(e[i],n)})}function S(n){var i=n.pointers.components.getMasterPage(u.VIEW_MODES.DESKTOP),o=n.pointers.components.getChildren(i),s=t.find(o,{id:"PAGES_CONTAINER"}),a=n.pointers.getInnerPointer(s,"layout.y"),r=n.dal.full.get(a),l=n.pointers.getInnerPointer(i,"layout"),c=t.find(o,{id:"SITE_HEADER"}),p=n.pointers.getInnerPointer(c,"layout"),d=n.dal.full.get(p),h=r-(d.y+d.height),g=h<0,f={targetComponent:"PAGES_CONTAINER",type:"BOTTOM_TOP"};f.distance=g?function(n,i,o){var s=n.dal.get(o),a=s.anchors&&t.find(s.anchors,{targetComponent:"PAGES_CONTAINER"});if(a)return a.distance;var r=t.map(i,function(t){var e=n.pointers.getInnerPointer(t,"layout");return n.dal.get(e)}),u=t.maxBy(r,function(t){return D(t.anchors)?e.boundingLayout.getBoundingY(t)+e.boundingLayout.getBoundingHeight(t):-1e4}),l=u&&D(u.anchors);if(!l)return 0;var c=e.boundingLayout.getBoundingY(u)+e.boundingLayout.getBoundingHeight(u),p=l.distance+c,d=t.find(i,{id:"SITE_HEADER"}),h=n.pointers.getInnerPointer(d,"layout"),g=n.dal.get(h);return p-(g.y+g.height)}(n,o,l):h;var m=t.get(n.dal.get(l),["anchors","0"]);t.isEqual(m,f)||n.dal.full.merge(l,{anchors:[f]})}function D(e){return t.find(e,{targetComponent:"PAGES_CONTAINER",type:"BOTTOM_TOP"})}function b(e,n){var i=e.siteAPI.isMobileView(),o=[];return t.forEach(n,function(n,a){if("masterPage"===a){var r=e.pointers.components.getMasterPage(s.getViewMode(e));n=e.pointers.components.getChildrenRecursively(r)}"masterPage"!==a||i||S(e),function(e,n){var i=!1;return t(n).map(function(t){return e.pointers.getInnerPointer(t,["layout","anchors"])}).filter(e.dal.full.isExist).forEach(function(t){i=!0,e.dal.full.remove(t)}),i}(e,n)&&o.push(a)}),o}function C(e,n,i){var a=t.some(n,function(t){return e.dal.isExist(e.pointers.getInnerPointer(t,["layout","anchors"]))});if(!a){var r=e.pointers.components.getPage(i,s.getViewMode(e)),u=o.getCompLayoutRelativeToStructure(e,r).y,l=e.pointers.getInnerPointer(r,"components"),c=t.filter(n,function(t){var n=e.pointers.components.getParent(t),i=e.pointers.getInnerPointer(n,"componentType"),o=e.pointers.getInnerPointer(t,"componentType");return n&&"wysiwyg.viewer.components.Column"===e.dal.get(i)&&"wysiwyg.common.components.anchor.viewer.Anchor"===e.dal.get(o)});t.forEach(c,function(t){var n=e.dal.get(t);n.layout.y=o.getCompLayoutRelativeToStructure(e,t).y-u,e.dal.remove(t),e.dal.push(l,n,t)}),a||t.isEmpty(c)||e.siteAPI.createPageAnchors(i)}}function w(e){(function(e){var n=e.siteAPI.getMasterPageLayoutSettings();return!t.get(n,"useDesktopSectionsLayout",!1)})(e)&&function(t){t.setOperationsQueue.runSetOperation(p,[t],{methodName:"sectionsLayoutMigrator",singleComp:!1,noBatching:!0,isUpdatingAnchors:c.IS_UPDATING_ANCHORS.NO,enforceType:c.ENFORCE_TYPES.FULL})}(e)}return{runPostUpdateOperations:function(e,n){var i=e.pointers.general.getRenderFlag("shouldUpdateJsonFromMeasureMap");if(!e.dal.get(i))return e.siteAPI.clearReLayoutedCompsMap(),!1;var o=function(e){var n=e.siteAPI.getSiteMeasureMap(),i=e.siteAPI.getAllRenderedRootIds(),o=e.siteAPI.getReLayoutedCompsMap(),a=t.keyBy(i);return a=t.mapValues(a,function(i){var a=e.pointers.components.getPage(i,s.getViewMode(e)),r=e.pointers.components.getChildrenRecursively(a);return r=t.filter(r,function(e){return!!o[e.id]&&t.isFinite(n.height[e.id])}),e.pointers.components.isMasterPage(a)||r.push(a),r}),e.siteAPI.clearReLayoutedCompsMap(),{compsByRoot:a,allComps:[].concat.apply([],t.values(a))}}(e),a=o.allComps;if(function(e,n){var i=e.siteAPI.getSiteMeasureMap(),o=e.siteAPI.getSiteId(),s=e.siteAPI.isMobileView();t.forEach(n,t.partial(I,e,i,o,s))}(e,a),!n)return!1;var u=function(e,n){var i=e.siteAPI.getSiteMeasureMap(),o=e.siteAPI.getSiteId(),s=e.siteAPI.hasPendingFonts(),a=e.siteAPI.isMobileView(),u=[];return t.forEach(n,function(n,r){var l=!1;t.forEach(n,function(t){var n=g(e,t,i,s,o,a);l=l||n}),l&&u.push(r)}),r.updateAnchorsForMultipleComps(e),u}(e,o.compsByRoot);t.forEach(o.compsByRoot,t.partial(C,e));var l=b(e,o.compsByRoot);t(u).union(l).forEach(function(t){e.siteAPI.createPageAnchors(t)}),w(e)},reset:function(){f={}}}}.apply(e,i))||(t.exports=o)},709:function(t,e,n){var i,o;i=[n(0),n(1)],void 0===(o=function(t,e){"use strict";return function(n,i){function o(o){return function(s,a){if(e.displayedOnlyStructureUtil.isRepeatedComponent(s.id)){var r=n.components.getAllDisplayedOnlyComponents(s);if(i.get(n.changedByRelayout.getCompChangedByRelayout(s.id)))o(s,a);else{var u=n.components.getParent(n.getOriginalPointerFromInner(s));if(function(t,n,i){return"layout"===t.getInnerPointerPathRoot(n)&&!e.displayedOnlyStructureUtil.isRepeatedComponent(i.id)}(n,s,u)){var l=i.get(n.getInnerPointer(u,"componentType"));e.jsonUpdaterRegistrar.getCompLayouter(l).setLayout(n,i,u,a)}else!function(t,e){var n=t.getInnerPointerPathRoot(e);return"designQuery"===n||"dataQuery"===n}(n,s)?t.forEach(r,function(e){o(e,t.clone(a))}):o(s,a)}}else o(s,a)}}return{onSet:o(t.bind(i.set,i)),onMerge:o(t.bind(i.merge,i)),onRemove:function(e){if("component"===n.getPointerType(e)){var o=n.components.getParent(e);if(o){var s=n.components.getChildrenContainer(o),a=i.get(s);i.set(s,t.without(a,e.id))}}i.remove(e)},onPush:function(e,o,s,a){if(s){var r=t.defaults({parent:e.id},o);o.components&&(r.components=t.map(o.components,"id"));var u=n.full.components.getPageOfComponent(n.getOriginalPointerFromInner(e)).id,l=n.components.getViewMode(e),c=n.page.getComponentsMapPointer(u,l);i.merge(c,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},r.id,r)),i.push(e,o.id,s,a)}else i.push(e,o,s,a)}}}}.apply(e,i))||(t.exports=o)},710:function(t,e,n){var i,o;i=[n(23),n(28)],void 0===(o=function(t,e){"use strict";var n=e.siteMetadataPropertiesInfo,i="metadata",o=t.pointerGeneratorsRegistry;o.registerPointerType(i,function(){return null},function(){return!0});var s={getSiteMetaDataPointer:function(t,e,o){if(!n[o])return null;var s=n[o].path;return e.getPointer(o,i,s)}};o.registerDataAccessPointersGenerator(i,s)}.apply(e,i))||(t.exports=o)},711:function(t,e){t.exports=I},712:function(t,e){t.exports=A},713:function(t,e){t.exports=S},714:function(t,e){t.exports=D},715:function(t,e){t.exports=b},716:function(t,e,n){var i,o;i=[n(0),n(28),n(63),n(47)],void 0===(o=function(t,e,n,i){"use strict";var o=e.jsonConfig,s=i.initPublicModules(n.fullHeadlessConfig);return{getConfig:function(){return{modules:s,shouldRender:!1,isReadOnly:!1,noUndo:!1,runStylesGC:!1,pathsInJsonData:o.getPathsInJsonData(),undoablePaths:o.getWhiteList(),nonUndoablePaths:o.getNonUndoableList(),nonUndoableInitialDataPaths:o.getNonUndoableInitialDataPaths(),autosavePaths:o.getAutosavePaths()}}}}.apply(e,i))||(t.exports=o)},717:function(t,e,n){var i,o;i=[n(97),n(47)],void 0===(o=function(t,e){"use strict";var n=e.initPublicModules(["localModePublicAPI"]);return{getConfig:function(){var e=t.getConfig(),i=e.modules,o=e.modulesList.indexOf("savePublicAPI"),s=i.slice();return s.splice.apply(s,[o,1].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(n))),e.modules=s,e}}}.apply(e,i))||(t.exports=o)},718:function(t,e,n){var i,o;i=[n(63),n(47)],void 0===(o=function(t,e){"use strict";return{modules:e.initPublicModules(t.listsDataConfig),isReadOnly:!1,shouldRender:!1,noUndo:!1,pathsInJsonData:{siteData:[{path:["rendererModel"],optional:!1},{path:["wixapps"],optional:!1}]},undoablePaths:[]}}.apply(e,i))||(t.exports=o)},719:function(t,e,n){var i,o;i=[n(63),n(47)],void 0===(o=function(t,e){"use strict";return{modules:e.initPublicModules(t.siteInfoConfig),shouldRender:!1,isReadOnly:!0,noUndo:!0,pathsInJsonData:{siteData:[{path:["pagesData"],optional:!1},{path:["editorData"],optional:!1}],fullJson:[{path:["pagesData"],optional:!1}]},undoablePaths:[]}}.apply(e,i))||(t.exports=o)},720:function(t,e,n){var i,o;i=[n(0),n(28),n(63),n(47)],void 0===(o=function(t,e,n,i){"use strict";var o=e.jsonConfig,s=i.initPublicModules(n.testConfig);return{getConfig:function(){return{modules:s,shouldRender:!1,isReadOnly:!1,isTest:!0,noUndo:!1,runStylesGC:!1,pathsInJsonData:o.getPathsInJsonData(),undoablePaths:o.getWhiteList(),nonUndoablePaths:o.getNonUndoableList()}}}}.apply(e,i))||(t.exports=o)},721:function(t,e,n){var i,o;i=[n(0),n(28),n(63),n(47)],void 0===(o=function(t,e,n,i){"use strict";var o=e.jsonConfig,s=i.initPublicModules(n.siteInfo_v2Config);return{getConfig:function(){return{modules:s,shouldRender:!1,isReadOnly:!0,noUndo:!0,pathsInJsonData:o.getPathsInJsonData(),undoablePaths:[]}}}}.apply(e,i))||(t.exports=o)},722:function(t,e,n){var i,o;i=[n(0),n(97),n(47)],void 0===(o=function(t,e,n){"use strict";var i=n.initPublicModules(["appStudioPublicAPI"]);return{getConfig:function(){var n=e.getConfig();return n.modules=t.concat(n.modules,i),n}}}.apply(e,i))||(t.exports=o)},723:function(t,e,n){var i,o;i=[n(0),n(97),n(28)],void 0===(o=function(t,e,n){"use strict";var i=n.componentsLoader,o=["wysiwyg.viewer.components.StripColumnsContainer","wysiwyg.viewer.components.Column","wysiwyg.viewer.components.WRichText","wysiwyg.viewer.components.LinkBar","wysiwyg.viewer.components.FiveGridLine","wysiwyg.viewer.components.menus.DropDownMenu","wysiwyg.viewer.components.SiteButton","wysiwyg.common.components.anchor.viewer.Anchor","wysiwyg.viewer.components.ContactForm","wysiwyg.viewer.components.GoogleMap","wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.WPhoto","tpa.viewer.components.Collage","tpa.viewer.components.StripSlideshow","wysiwyg.viewer.components.VectorImage","wysiwyg.viewer.components.MatrixGallery","tpa.viewer.components.StripShowcase","tpa.viewer.components.Accordion","wysiwyg.viewer.components.Video","wysiwyg.viewer.components.tpapps.TPAWidget","wysiwyg.viewer.components.FooterContainer","wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.PagesContainer","wysiwyg.viewer.components.tpapps.TPASection","wysiwyg.viewer.components.FormContainer","wixui.VideoPlayer","wysiwyg.viewer.components.mobile.TinyMenu","wysiwyg.viewer.components.QuickActionBar","wysiwyg.viewer.components.StripContainerSlideShowSlide","platform.components.AppController","wysiwyg.viewer.components.SiteRegionContainer","wysiwyg.viewer.components.LoginSocialBar","wysiwyg.common.components.verticalmenu.viewer.VerticalMenu","wysiwyg.viewer.components.InlinePopup","wysiwyg.viewer.components.InlinePopupToggle","wysiwyg.viewer.components.MenuContainer","wysiwyg.viewer.components.MenuToggle","wysiwyg.viewer.components.ExpandableMenu"];function s(e,n){var o=n.selectiveCompsDS,s=n.componentsToLoad;return o?i.loadViewerComponents(e,s):t.noop}return{getConfig:function(){var t=e.getConfig();return t.componentsToLoad=o,t.modules=t.modules.concat([{asyncInitMethod:s}]),t}}}.apply(e,i))||(t.exports=o)},74:function(t,e){t.exports=y},8:function(t,e){t.exports=s},97:function(t,e,n){var i,o;i=[n(0),n(8),n(28),n(63),n(47)],void 0===(o=function(t,e,n,i,o){"use strict";var s=n.jsonConfig,a=o.initPublicModules(i.fullFunctionalityConfig);return{getConfig:function(){var t=e.isOpen("registerComponentsDynamically")?"ALL":void 0;return{modules:a,modulesList:i.fullFunctionalityConfig,shouldRender:!0,isReadOnly:!1,noUndo:!1,runStylesGC:!0,componentsToLoad:t,pathsInJsonData:s.getPathsInJsonData(),undoablePaths:s.getWhiteList(),nonUndoablePaths:s.getNonUndoableList(),nonUndoableInitialDataPaths:s.getNonUndoableInitialDataPaths(),autosavePaths:s.getAutosavePaths()}}}}.apply(e,i))||(t.exports=o)}})});
//# sourceMappingURL=documentServices-santa.min.js.map